(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function getQueryParameterByName(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}var $=require("jquery");window.$=window.jQuery=$,require("./upload.js")($);var suiteh=window.suiteh={};suiteh.sitemap=require("./sitemap.js").init,$(function(){function e(e){return"false"!==e&&("true"===e||e)}$('a[data-method="delete"]').on("click",function(e){e.preventDefault();var t=$(e.currentTarget),a=t.attr("href"),n=t.data("confirm");if(!n||confirm(n)){var r=$('<form id="delete-method-form" />');r.attr("action",a),r.attr("method","POST"),r.append($('<input type="hidden" name="_method" value="DELETE" />')),$("body").append(r),r.submit(),r.remove()}}),$("a[data-use-redirect-query]").on("click",function(e){e.preventDefault();var t=getQueryParameterByName("redirect");window.location=t}),$("form[data-site-settings]").submit(function(e){e.preventDefault();var t=$(this),a=t.serializeArray(),n={};$.each(a,function(e,t){n[t.name]=t.value}),$.ajax(t.attr("action"),{method:"PATCH",contentType:"application/json",dataType:"json",data:JSON.stringify(n),xhrFields:{withCredentials:!0}}).then(function(e){console.log(e)}).fail(function(e){console.log("error",e)})});var t=function(e){return $.ajax(e,{method:"GET",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:!0}})},a=function(t){for(var a=(t||{}).data,n=Object.keys(a),r=0,i=n.length;r<i;r++){var o=n[r],c=a[o],s=$('[name="'+o+'"]');"radio"===s.attr("type")?s.each(function(){var t=$(this);t.prop("checked",!1),e(t.val())==c&&t.prop("checked",!0)}):s.val(c)}};$('a[data-toggle="tab"][data-site-settings]').on("shown.bs.tab",function(e){var n=$("form",$(e.target).attr("href")),r=n.attr("action");r&&t(r).then(a).fail(function(e){console.log("error",e)})}),function(e){if(0!=e.length){var n=e.attr("action");t(n).then(a).fail(function(e){console.log("error",e)})}}($(".tab-pane.active form[data-site-settings]")),require("./sitemap-behavior.js")});

},{"./sitemap-behavior.js":2,"./sitemap.js":3,"./upload.js":5,"jquery":9}],2:[function(require,module,exports){
"use strict";$("#page-view-selector").on("click","a",function(){return $(this).hasClass("tree-view")&&($("#page-tree-view").hide(),$("#page-list-view").show(),$("#page-view-selector").html('<a href="#" class="list-view">Click for Tree View</a>')),$(this).hasClass("list-view")&&($("#page-list-view").hide(),$("#page-tree-view").show(),$("#page-view-selector").html('<a href="#" class="tree-view">Click for List View</a>')),!1});

},{}],3:[function(require,module,exports){
"use strict";function init(e){var t=$.Deferred();return getRoutes(e).then(function(e,a,n){jstree(insertNewPageNodes(e.data)),t.resolve()}).fail(t.reject),t.promise()}function _jstree(){return $("[data-route-map-tree]").jstree(!0)}function addNode(e,t,a,n){var o=_jstree().get_node(t),r=o.children.length-1;if(a){var i=dirname(e.path),s=_jstree().get_node(i);s||(s={id:i,parent:o.id,text:pathjoin("/",basename(i)),state:{opened:!0}},_jstree().create_node(o.id,s,r),_jstree().create_node(s.id,extend({},newPageNode,{id:s.id+"/+-new-page",parent:s.id}),0)),o=s,r=o.children?o.children.length-1:0}var s={id:e.path,parent:o.id,text:pathjoin("/",basename(e.path))};_jstree().create_node(o.id,s,r,n)}function removeNode(e,t){var a=_jstree().get_node(e);_jstree().delete_node(a);var n=_jstree().get_node(a.parent);n&&1==n.children.length&&_jstree().delete_node(n),t()}function updateNode(e,t){var a=e.path,n=e.new_path,o=_jstree().get_node(a);_jstree().rename_node(o,pathjoin("/",basename(n))),_jstree().set_id(o,n),t()}function jstree(e){var t=$("#new-page-modal"),a=function(){$(".page-dir").hide(),$(".page-name").removeClass("col-sm-6"),$(".page-name").addClass("col-sm-12"),$('[name="page.dir"]').val("")};t.bind("hide.bs.modal",function(e){$('[name="page.name"]').val(""),$('[name="page.is_dir"]').prop("checked",!1).change()}),$('[name="page.is_dir"]:checkbox').on("change",function(e){e.preventDefault();var t=$(e.currentTarget);$(t).is(":checked")?($(".page-dir").show(),$(".page-name").removeClass("col-sm-12"),$(".page-name").addClass("col-sm-6")):a()}),$('[rel="create-new-page"]',t).on("click",function(e){e.preventDefault();var a=t.data("node-parent"),n=$('[name="page.name"]').val();if(n&&/^[a-z0-9_\-]+\.html$/i.test(n)){var o=$('[name="page.is_dir"]:checkbox').is(":checked");if(o){var r=$('[name="page.dir"]').val();if(!/^[a-z0-9_\-]+\/$/i.test(r))return;n=pathjoin("/",r,n)}n=pathjoin("/","#"===a?"":a,n),postRoute(siteId,{path:n,filepath:"/.page.html"}).then(function(e,n,r){addNode(e,a,o,function(){t.modal("hide")})}).fail(function(e){console.log("error",e)}),setTimeout(function(){$(".jstree-container-ul > li.jstree-last > a").trigger("click")},100)}}),$('[rel="delete-page-or-dir"]',t).on("click",function(e){e.preventDefault();var a=$(e.currentTarget),n=a.data("path");console.log("delete-page-or-dir",a.data("path")),deleteRoute(siteId,n).then(function(e,a,n){if(!e.path)return void console.log("TODO when no path");removeNode(e.path,function(){t.modal("hide")})}).fail(function(e){console.log("error",e)}),setTimeout(function(){$(".jstree-container-ul > li.jstree-last > a").trigger("click")},100)});var n,o;$('[rel="update-page-setting"]',t).on("click",function(e){e.preventDefault();var a=$(e.currentTarget),r=a.data("path"),i=t.data("node-parent"),s=$('[name="page.name"]').val();if(s&&/^[a-z0-9_\-]+\.html$/i.test(s)){s=pathjoin("/","#"===i?"":i,s),console.log("update-page-setting",r,s);var d=extend({},o,{data:n.get()});d.path=s,updateRoute(siteId,r,d).then(function(e,a,n){updateNode(e,function(){t.modal("hide")})}).fail(function(e){console.log("error",e)})}}),$("[data-route-map-tree]").on("changed.jstree",function(e,a){var r=a.selected[0],i=a.node.parent,s="#"===i?"":i;$('[for="page.name"]',t).html(s+"/"),t.data("node-parent",i),$(".page-settings").html(""),/\+-new-page$/.test(r)?($(".modal-title",t).html("New Page"),$('[rel="create-new-page"]',t).show(),$('[rel="delete-page-or-dir"]',t).hide(),$('[rel="update-page-setting"]',t).hide(),$('[rel="edit-page"]',t).hide()):($('[name="page.name"]').val(a.node.text.substring(1,a.node.text.length)),$(".modal-title",t).html("Page: "+r),$('[rel="create-new-page"]',t).hide(),$('[rel="delete-page-or-dir"]',t).data("path",r).show(),$('[rel="update-page-setting"]',t).data("path",r).show(),$('[rel="edit-page"]',t).attr("href",url("edit",host,a.selected)).show(),isDir(r)?($(".modal-title",t).html("Directory: "+r),$('[rel="edit-page"]').hide(),$('[rel="update-page-setting"]').hide(),$(".modal-body").hide()):($(".modal-body").show(),$(".page-settings").html("Loading page settings..."),getConf(r).then(function(e){o=e,getFields(o).then(function(e){var t=(e.fields.page||[]).join("")+(e.fields.meta||[]).join("");n=new Ractive({el:".page-settings",template:t,data:o.data})})}).fail(function(e){console.log(e)})))}).jstree({core:{check_callback:!0,multiple:!1,data:e},sort:function(e,t){return console.log("sort function"),this.get_type(e)===this.get_type(t)?this.get_text(t)>this.get_text(e)?1:-1:this.get_type(t)>=this.get_type(e)?1:-1},contextmenu:{items:function(e){$("#tree").jstree(!0);return{Edit:{separator_before:!1,separator_after:!1,label:"",action:function(){var t=url("edit",host,e.id);window.open(t,"_blank")}},Delete:{separator_before:!1,separator_after:!1,label:""}}}},noclose:void jQuery,plugins:["sort","types","contextmenu","noclose"]}).on("loaded.jstree changed.jstree",function(){$(".jstree-container-ul a").hover(function(){if($(this).parent().hasClass("jstree-last"))$.vakata.context.hide(),$(".jstree-clicked").removeClass("jstree-clicked"),$(this).on("click",function(){t.modal("show")});else{$(this).addClass("jstree-clicked");var e=$(this).offset();$("[data-route-map-tree]").jstree("show_contextmenu",$(this)),$("ul.vakata-context").css("left",e.left+180+"px").css("top",e.top+2+"px"),$(".vakata-context li:first-child a").addClass("glyphicon glyphicon-pencil"),$(".vakata-context li:last-child a").addClass("glyphicon glyphicon-cog"),$(".vakata-context li:last-child a").on("click",function(){t.modal("show")})}}).click(function(){if(!$(this).parent().hasClass("jstree-last"))return!1})})}function isDir(e){return console.log(e),!/(\.html|\+-new-page|:\w+)$/.test(e)}function insertNewPageNodes(e){for(var t=[],a=0,n=e.length;a<n;a++){var o=e[a];if(o.is_dir){var r=o.id;t.push(extend({},newPageNode,{id:r+"/+-new-page",parent:r}))}}return t.push(extend({},newPageNode,{id:"/+-new-page",parent:"#"})),[].concat(e,t)}function postRoute(e,t){return $.ajax({method:"POST",url:"//"+host+"/sites/"+e+"/routes",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",xhrFields:{withCredentials:!0}})}function getRoutes(e){return $.ajax({method:"GET",url:"//"+host+"/sites/"+e+"/routes",xhrFields:{withCredentials:!0},accepts:{json:"application/json"},dataType:"json"})}function deleteRoute(e,t){return $.ajax({method:"DELETE",url:"//"+host+"/sites/"+e+"/routes"+t,xhrFields:{withCredentials:!0},accepts:{json:"application/json"}})}function updateRoute(e,t,a){return $.ajax({method:"PATCH",url:"//"+e+"."+host+"/patch"+t,data:JSON.stringify(a),dataType:"json",contentType:"application/json; charset=utf-8",xhrFields:{withCredentials:!0}})}function getConf(e){return new Template(e).get("json")}function getFields(e){return e||(e={}),$.ajax({method:"POST",data:JSON.stringify(e),url:"//"+siteId+"."+host+"/fields/for",xhrFields:{withCredentials:!0},dataType:"json",contentType:"application/json; charset=utf-8"})}var $=require("jquery"),extend=require("extend"),url=require("./url.js"),Template=require("./template.js"),Ractive=require("ractive"),path=require("path"),basename=path.basename,dirname=path.dirname,pathjoin=path.join;window.$=window.jQuery=$,require("../../node_modules/bootstrap/js/modal.js"),require("jstree"),console.log("sitemap.js works"),exports.init=init;var newPageNode={id:"",parent:"",text:"+ New Page"};

},{"../../node_modules/bootstrap/js/modal.js":7,"./template.js":4,"./url.js":6,"extend":8,"jquery":9,"jstree":10,"path":11,"ractive":13}],4:[function(require,module,exports){
"use strict";function Template(e){this.path=e}function call(e,t,r){void 0!==e&&""!==e||(e="html");var a=$.Deferred(),l={method:t,url:url(e,host,r),xhrFields:{withCredentials:!0}};return"conf"===e&&(l.accepts={json:"application/json"},l.dataType="json"),$.ajax(l).then(a.resolve).fail(a.resolve),a.promise()}var $=require("jquery"),url=require("./url.js");Template.prototype.get=function(e,t){var r=this.path;return t&&(r+="?skip_inspection=true"),call(e,"GET",r)},Template.prototype.head=function(e){return call(e,"HEAD",this.path)},module.exports=Template;

},{"./url.js":6,"jquery":9}],5:[function(require,module,exports){
"use strict";module.exports=function(e,t){function r(t){t.show();var r=e(".progress-bar",t),n=e(".sr-only",t);return function(e){var t=e.percent+"%";r.css("width",t),n.html(t)}}function n(t,r){var n=new FormData,a=new XMLHttpRequest;n.append("key",r.key),n.append("acl",r.acl||"public-read"),n.append("Policy",r.policy),null!==r.type&&n.append("Content-Type",r.type||t.type||"application/octet-stream"),null!==r.size&&n.append("Content-Length",r.size||t.size),n.append("X-Amz-Credential",r.credential),n.append("X-Amz-Algorithm",r.algorithm||"AWS4-HMAC-SHA256"),n.append("X-Amz-Signature",r.signature),n.append("X-Amz-Date",r.date),n.append("file",t);var o=e.Deferred();return r.onprogress&&a.upload.addEventListener("progress",function(e){e.percent=e.loaded/e.total*100,r.onprogress(e)},!1),a.onreadystatechange=function(){if(4==a.readyState){if(a.status<400)return o.resolve({url:r.action+"/"+r.key.replace("${filename}",t.name)});var e=new Error(a.responseText);e.status=a.status,e.statusText=a.statusText,o.reject(e)}},a.open("POST",r.action,!0),a.send(n),o.promise()}function a(a){return function(p){var i;i="droppable"===a?p.originalEvent.dataTransfer.files:p.currentTarget.files,i=o(i);var s=e(p.currentTarget).closest("[data-type]"),l=e(".progress",s),d=e("[data-path]",s).attr("data-path");e.when.apply(e,i).then(function(e,t,a,o){return t.onprogress=r(l),n(e,t)}).then(function(r){setTimeout(function(){l.hide()},350),console.log("preview",e(".image-preview",s)),e("input[name='"+d+"']",s).val(r.url),e(".image-preview",s).attr("src",r.url).removeClass("hidden").show(),t&&t.set(d,r.url)}).fail(function(e,t,r,n){console.log("error",n)})}}function o(t){var r=[];return e.each(t,function(t,n){var a=e.Deferred();e.ajax({method:"get",url:"//"+host+"/api/s3/"+siteId+"/sign/"+n.name+"?type="+n.type+"&size="+n.size,xhrFields:{withCredentials:!0},success:function(e,t,r){a.resolve(n,e,t,r)},error:function(e,t,r){a.reject(n,e,t,r)}}),r.push(a.promise())}),r}return e(function(){e(".droppable.upload").on("drag dragstart dragend dragover dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(e){console.log("dragover dragenter")}).on("dragleave dragend drop",function(e){console.log("drop")}).on("drop",a("droppable")),e('input[type="file"]').on("change",a("input")),e('[rel="clear-file"]').on("click",function(r){r.preventDefault(),console.log("clear-file");var n=e(r.currentTarget),a=n.closest("[data-type]"),o=e(".droppable.upload",a).data("path");e('[type="file"]',a).val(""),e('[name="'+o+'"]',a).val(""),"image"===a.data("as")&&e(".image-preview",a).attr("src","").hide(),t&&t.set(o,"")})}),a};

},{}],6:[function(require,module,exports){
"use strict";function url(r,t,u){return["//",siteId,".",t,"/"+r+u].join("")}module.exports=url;

},{}],7:[function(require,module,exports){
+function(t){"use strict";function e(e,i){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},o.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new o(this,a)),"string"==typeof e?n[e](i):a.show&&n.show(i)})}var o=function(e,o){this.options=o,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};o.VERSION="3.3.7",o.TRANSITION_DURATION=300,o.BACKDROP_TRANSITION_DURATION=150,o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},o.prototype.show=function(e){var i=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),s&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});s?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(o.TRANSITION_DURATION):i.$element.trigger("focus").trigger(n)}))},o.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(o.TRANSITION_DURATION):this.hideModal())},o.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},o.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},o.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var i=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){if(this.ignoreBackdropClick)return void(this.ignoreBackdropClick=!1);t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},o.prototype.handleUpdate=function(){this.adjustDialog()},o.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},o.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},o.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},o.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},o.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},o.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=o,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(o){var i=t(this),s=i.attr("href"),n=t(i.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),i.data());i.is("a")&&o.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(n,a,this)})}(jQuery);

},{}],8:[function(require,module,exports){
"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(r){return"function"==typeof Array.isArray?Array.isArray(r):"[object Array]"===toStr.call(r)},isPlainObject=function(r){if(!r||"[object Object]"!==toStr.call(r))return!1;var t=hasOwn.call(r,"constructor"),o=r.constructor&&r.constructor.prototype&&hasOwn.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!t&&!o)return!1;var n;for(n in r);return void 0===n||hasOwn.call(r,n)};module.exports=function r(){var t,o,n,c,e,a,i=arguments[0],s=1,l=arguments.length,u=!1;for("boolean"==typeof i?(u=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||null==i)&&(i={});s<l;++s)if(null!=(t=arguments[s]))for(o in t)n=i[o],c=t[o],i!==c&&(u&&c&&(isPlainObject(c)||(e=isArray(c)))?(e?(e=!1,a=n&&isArray(n)?n:[]):a=n&&isPlainObject(n)?n:{},i[o]=r(u,a,c)):void 0!==c&&(i[o]=c));return i};

},{}],9:[function(require,module,exports){
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return Z.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return ie.each(e.match(ve)||[],function(e,n){t[n]=!0}),t}function s(){G.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),ie.ready()}function a(){this.expando=ie.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ce,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Te.test(n)?ie.parseJSON(n):n)}catch(e){}we.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return ie.css(e,t,"")},u=a(),l=n&&n[3]||(ie.cssNumber[t]?"":"px"),c=(ie.cssNumber[t]||"px"!==l&&+u)&&Ee.exec(ie.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do{o=o||".5",c/=o,ie.style(e,t,c+l)}while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function c(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],n):n}function f(e,t){for(var n=0,r=e.length;n<r;n++)be.set(e[n],"globalEval",!t||be.get(t[n],"globalEval"))}function p(e,t,n,r,i){for(var o,s,a,u,l,p,d=t.createDocumentFragment(),h=[],g=0,v=e.length;g<v;g++)if((o=e[g])||0===o)if("object"===ie.type(o))ie.merge(h,o.nodeType?[o]:o);else if(Le.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(De.exec(o)||["",""])[1].toLowerCase(),u=qe[a]||qe._default,s.innerHTML=u[1]+ie.htmlPrefilter(o)+u[2],p=u[0];p--;)s=s.lastChild;ie.merge(h,s.childNodes),s=d.firstChild,s.textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",g=0;o=h[g++];)if(r&&ie.inArray(o,r)>-1)i&&i.push(o);else if(l=ie.contains(o.ownerDocument,o),s=c(d.appendChild(o),"script"),l&&f(s),n)for(p=0;o=s[p++];)Ae.test(o.type||"")&&n.push(o);return d}function d(){return!0}function h(){return!1}function g(){try{return G.activeElement}catch(e){}}function v(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)v(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=h;else if(!i)return e;return 1===o&&(s=i,i=function(e){return ie().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=ie.guid++)),e.each(function(){ie.event.add(this,t,i,r,n)})}function m(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=Me.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(be.hasData(e)&&(o=be.access(e),s=be.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)ie.event.add(t,i,l[i][n])}we.hasData(e)&&(a=we.access(e),u=ie.extend({},a),we.set(t,u))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&je.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function T(e,t,n,r){t=J.apply([],t);var i,o,s,a,u,l,f=0,d=e.length,h=d-1,g=t[0],v=ie.isFunction(g);if(v||d>1&&"string"==typeof g&&!re.checkClone&&Re.test(g))return e.each(function(i){var o=e.eq(i);v&&(t[0]=g.call(this,i,o.html())),T(o,t,n,r)});if(d&&(i=p(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=ie.map(c(i,"script"),y),a=s.length;f<d;f++)u=i,f!==h&&(u=ie.clone(u,!0,!0),a&&ie.merge(s,c(u,"script"))),n.call(e[f],u,f);if(a)for(l=s[s.length-1].ownerDocument,ie.map(s,x),f=0;f<a;f++)u=s[f],Ae.test(u.type||"")&&!be.access(u,"globalEval")&&ie.contains(l,u)&&(u.src?ie._evalUrl&&ie._evalUrl(u.src):ie.globalEval(u.textContent.replace(Ie,"")))}return e}function C(e,t,n){for(var r,i=t?ie.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ie.cleanData(c(r)),r.parentNode&&(n&&ie.contains(r.ownerDocument,r)&&f(c(r,"script")),r.parentNode.removeChild(r));return e}function k(e,t){var n=ie(t.createElement(e)).appendTo(t.body),r=ie.css(n[0],"display");return n.detach(),r}function E(e){var t=G,n=$e[e];return n||(n=k(e,t),"none"!==n&&n||(We=(We||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=k(e,t),We.detach()),$e[e]=n),n}function N(e,t,n){var r,i,o,s,a=e.style;return n=n||Xe(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ie.contains(e.ownerDocument,e)||(s=ie.style(e,t)),n&&!re.pixelMarginRight()&&_e.test(s)&&Be.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function j(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;n--;)if((e=Qe[n]+t)in Je)return e}function D(e,t,n){var r=Ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=ie.css(e,n+Ne[o],!0,i)),r?("content"===n&&(s-=ie.css(e,"padding"+Ne[o],!0,i)),"margin"!==n&&(s-=ie.css(e,"border"+Ne[o]+"Width",!0,i))):(s+=ie.css(e,"padding"+Ne[o],!0,i),"padding"!==n&&(s+=ie.css(e,"border"+Ne[o]+"Width",!0,i)));return s}function q(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Xe(e),s="border-box"===ie.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=N(e,t,o),(i<0||null==i)&&(i=e.style[t]),_e.test(i))return i;r=s&&(re.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(s?"border":"content"),r,o)+"px"}function L(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)r=e[s],r.style&&(o[s]=be.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Se(r)&&(o[s]=be.access(r,"olddisplay",E(r.nodeName)))):(i=Se(r),"none"===n&&i||be.set(r,"olddisplay",i?n:ie.css(r,"display"))));for(s=0;s<a;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function O(){return e.setTimeout(function(){Ke=void 0}),Ke=ie.now()}function F(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Ne[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function P(e,t,n){for(var r,i=(I.tweeners[t]||[]).concat(I.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function R(e,t,n){var r,i,o,s,a,u,l,c=this,f={},p=e.style,d=e.nodeType&&Se(e),h=be.get(e,"fxshow");n.queue||(a=ie._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ie.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=ie.css(e,"display"),"inline"===("none"===l?be.get(e,"olddisplay")||E(e.nodeName):l)&&"none"===ie.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],et.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;d=!0}f[r]=h&&h[r]||ie.style(e,r)}else l=void 0;if(ie.isEmptyObject(f))"inline"===("none"===l?E(e.nodeName):l)&&(p.display=l);else{h?"hidden"in h&&(d=h.hidden):h=be.access(e,"fxshow",{}),o&&(h.hidden=!d),d?ie(e).show():c.done(function(){ie(e).hide()}),c.done(function(){var t;be.remove(e,"fxshow");for(t in f)ie.style(e,t,f[t])});for(r in f)s=P(d?h[r]:0,r,c),r in h||(h[r]=s.start,d&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function M(e,t){var n,r,i,o,s;for(n in e)if(r=ie.camelCase(n),i=t[r],o=e[n],ie.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=ie.cssHooks[r])&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function I(e,t,n){var r,i,o=0,s=I.prefilters.length,a=ie.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Ke||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;s<u;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),o<1&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ke||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(M(c,l.opts.specialEasing);o<s;o++)if(r=I.prefilters[o].call(l,e,c,l.opts))return ie.isFunction(r.stop)&&(ie._queueHooks(l.elem,l.opts.queue).stop=ie.proxy(r.stop,r)),r;return ie.map(c,P,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),ie.fx.timer(ie.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(ve)||[];if(ie.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function B(e,t,n,r){function i(a){var u;return o[a]=!0,ie.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===gt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function _(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ie.extend(!0,e,r),e}function X(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}function z(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||yt.test(e)?r(e,i):U(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)U(e+"["+i+"]",t[i],n,r)}function V(e){return ie.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],G=e.document,Q=Y.slice,J=Y.concat,K=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie=function(e,t){return new ie.fn.init(e,t)},oe=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:"2.2.4",constructor:ie,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ie.each(this,e)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:Y.sort,splice:Y.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||ie.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(ie.isPlainObject(r)||(i=ie.isArray(r)))?(i?(i=!1,o=n&&ie.isArray(n)?n:[]):o=n&&ie.isPlainObject(n)?n:{},s[t]=ie.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},ie.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ie.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=ie.trim(e))&&(1===e.indexOf("use strict")?(t=G.createElement("script"),t.text=e,G.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,oe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;i<r&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):K.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,r){var i,o,s=0,a=[];if(n(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,r))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,r))&&a.push(o);return J.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ie.isFunction(e))return r=Q.call(arguments,2),i=function(){return e.apply(t||this,r.concat(Q.call(arguments)))},i.guid=e.guid=e.guid||ie.guid++,i},now:Date.now,support:re}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=Y[Symbol.iterator]),ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var se=function(e){function t(e,t,n,r){var i,o,s,a,l,f,p,d,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&((t?t.ownerDocument||t:M)!==A&&D(t),t=t||A,L)){if(11!==g&&(f=ge.exec(e)))if(i=f[1]){if(9===g){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(h&&(s=h.getElementById(i))&&P(t,s)&&s.id===i)return n.push(s),n}else{if(f[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=f[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(x.qsa&&!_[e+" "]&&(!H||!H.test(e))){if(1!==g)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(me,"\\$&"):t.setAttribute("id",a=R),p=C(e),o=p.length,l=ce.test(a)?"#"+a:"[id='"+a+"']";o--;)p[o]=l+" "+c(p[o]);d=p.join(","),h=ve.test(e)&&u(t.parentNode)||t}if(d)try{return Q.apply(n,h.querySelectorAll(d)),n}catch(e){}finally{a===R&&t.removeAttribute("id")}}}return E(e.replace(oe,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>b.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[R]=!0,e}function i(e){var t=A.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||z)-(~e.sourceIndex||z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function c(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=W++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[I,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[R]||(t[R]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[r])&&a[0]===I&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function d(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function h(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),l&&t.push(a)));return s}function g(e,t,n,i,o,s){return i&&!i[R]&&(i=g(i)),o&&!o[R]&&(o=g(o,s)),r(function(r,s,a,u){var l,c,f,p=[],g=[],v=s.length,m=r||d(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?m:h(m,p,e,a,u),x=n?o||(r?e:v||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=h(x,g),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[g[c]]=!(y[g[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?K(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=h(x===s?x.splice(v,x.length):x),o?o(null,s,x,u):Q.apply(s,x)})}function v(e){for(var t,n,r,i=e.length,o=b.relative[e[0].type],s=o||b.relative[" "],a=o?1:0,u=f(function(e){return e===t},s,!0),l=f(function(e){return K(t,e)>-1},s,!0),d=[function(e,n,r){var i=!o&&(r||n!==N)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];a<i;a++)if(n=b.relative[e[a].type])d=[f(p(d),n)];else{if(n=b.filter[e[a].type].apply(null,e[a].matches),n[R]){for(r=++a;r<i&&!b.relative[e[r].type];r++);return g(a>1&&p(d),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(oe,"$1"),n,a<r&&v(e.slice(a,r)),r<i&&v(e=e.slice(r)),r<i&&c(e))}d.push(n)}return p(d)}function m(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,g="0",v=r&&[],m=[],y=N,x=r||o&&b.find.TAG("*",l),w=I+=null==y?1:Math.random()||.1,T=x.length;for(l&&(N=s===A||s||l);g!==T&&null!=(c=x[g]);g++){if(o&&c){for(f=0,s||c.ownerDocument===A||(D(c),a=!L);p=e[f++];)if(p(c,s||A,a)){u.push(c);break}l&&(I=w)}i&&((c=!p&&c)&&d--,r&&v.push(c))}if(d+=g,i&&g!==d){for(f=0;p=n[f++];)p(v,m,s,a);if(r){if(d>0)for(;g--;)v[g]||m[g]||(m[g]=Y.call(u));m=h(m)}Q.apply(u,m),l&&!r&&m.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(I=w,N=y),v};return i?r(s):s}var y,x,b,w,T,C,k,E,N,S,j,D,A,q,L,H,O,F,P,R="sizzle"+1*new Date,M=e.document,I=0,W=0,$=n(),B=n(),_=n(),X=function(e,t){return e===t&&(j=!0),0},z=1<<31,U={}.hasOwnProperty,V=[],Y=V.pop,G=V.push,Q=V.push,J=V.slice,K=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),ae=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ue=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),le=new RegExp(re),ce=new RegExp("^"+te+"$"),fe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,me=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),xe=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=function(){D()};try{Q.apply(V=J.call(M.childNodes),M.childNodes),V[M.childNodes.length].nodeType}catch(e){Q={apply:V.length?function(e,t){G.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:M;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,q=A.documentElement,L=!T(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",be,!1):n.attachEvent&&n.attachEvent("onunload",be)),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=he.test(A.getElementsByClassName),x.getById=i(function(e){return q.appendChild(e).id=R,!A.getElementsByName||!A.getElementsByName(R).length}),x.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}},b.filter.ID=function(e){var t=e.replace(ye,xe);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var t=e.replace(ye,xe);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),b.find.TAG=x.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=x.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&L)return t.getElementsByClassName(e)},O=[],H=[],(x.qsa=he.test(A.querySelectorAll))&&(i(function(e){q.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&H.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+R+"-]").length||H.push("~="),e.querySelectorAll(":checked").length||H.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||H.push(".#.+[+~]")}),i(function(e){var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(x.matchesSelector=he.test(F=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&i(function(e){x.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),O.push("!=",re)}),H=H.length&&new RegExp(H.join("|")),O=O.length&&new RegExp(O.join("|")),t=he.test(q.compareDocumentPosition),P=t||he.test(q.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===M&&P(M,e)?-1:t===A||t.ownerDocument===M&&P(M,t)?1:S?K(S,e)-K(S,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!i||!o)return e===A?-1:t===A?1:i?-1:o?1:S?K(S,e)-K(S,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?s(a[r],u[r]):a[r]===M?-1:u[r]===M?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&D(e),n=n.replace(ue,"='$1']"),x.matchesSelector&&L&&!_[n+" "]&&(!O||!O.test(n))&&(!H||!H.test(n)))try{var r=F.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&D(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&D(e);var n=b.attrHandle[t.toLowerCase()],r=n&&U.call(b.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:x.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!x.detectDuplicates,S=!x.sortStable&&e.slice(0),e.sort(X),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return S=null,e},w=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},b=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&le.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),y=!u&&!a,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?v.firstChild:v.lastChild],s&&y){for(p=v,f=p[R]||(p[R]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===I&&l[1],x=d&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[I,d,x];break}}else if(y&&(p=t,f=p[R]||(p[R]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===I&&l[1],x=d),x===!1)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++x||(y&&(f=p[R]||(p[R]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),c[e]=[I,x]),p!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,n){var i,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(n):o.length>1?(i=[e,e,"",n],b.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=K(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(oe,"$1"));return i[R]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ye,xe),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,xe).toLowerCase(),function(t){var n;do{if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[n<0?n+t:n]}),even:a(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:a(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},b.pseudos.nth=b.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[y]=function(e){return function(t){
return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})b.pseudos[y]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(y);return l.prototype=b.filters=b.pseudos,b.setFilters=new l,C=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=B[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=b.preFilter;a;){r&&!(i=se.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ae.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(oe," ")}),a=a.slice(r.length));for(s in b.filter)!(i=fe[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):B(e,u).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=_[e+" "];if(!o){for(t||(t=C(e)),n=t.length;n--;)o=v(t[n]),o[R]?r.push(o):i.push(o);o=_(e,m(i,r)),o.selector=e}return o},E=t.select=function(e,t,n,r){var i,o,s,a,l,f="function"==typeof e&&e,p=!r&&C(e=f.selector||e);if(n=n||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===t.nodeType&&L&&b.relative[o[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(ye,xe),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((l=b.find[a])&&(r=l(s.matches[0].replace(ye,xe),ve.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&c(o)))return Q.apply(n,r),n;break}}return(f||k(e,p))(r,t,!L,n,!t||ve.test(e)&&u(t.parentNode)||t),n},x.sortStable=R.split("").sort(X).join("")===R,x.detectDuplicates=!!j,D(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=se,ie.expr=se.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=se.uniqueSort,ie.text=se.getText,ie.isXMLDoc=se.isXML,ie.contains=se.contains;var ae=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&ie(e).is(n))break;r.push(e)}return r},ue=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},le=ie.expr.match.needsContext,ce=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;t<n;t++)if(ie.contains(i[t],this))return!0}));for(t=0;t<n;t++)ie.find(e,i[t],r);return r=this.pushStack(n>1?ie.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&le.test(e)?ie(e):e||[],!1).length}});var pe,de=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ie.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||pe,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:de.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:G,!0)),ce.test(r[1])&&ie.isPlainObject(t))for(r in t)ie.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=G.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==n.ready?n.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))}).prototype=ie.fn,pe=ie(G);var he=/^(?:parents|prev(?:Until|All))/,ge={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(e){var t=ie(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ie.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=le.test(e)||"string"!=typeof e?ie(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ie.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(ie(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae(e,"parentNode")},parentsUntil:function(e,t,n){return ae(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ae(e,"nextSibling")},prevAll:function(e){return ae(e,"previousSibling")},nextUntil:function(e,t,n){return ae(e,"nextSibling",n)},prevUntil:function(e,t,n){return ae(e,"previousSibling",n)},siblings:function(e){return ue((e.parentNode||{}).firstChild,e)},children:function(e){return ue(e.firstChild)},contents:function(e){return e.contentDocument||ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ge[e]||ie.uniqueSort(i),he.test(e)&&i.reverse()),this.pushStack(i)}});var ve=/\S+/g;ie.Callbacks=function(e){e="string"==typeof e?o(e):ie.extend({},e);var t,n,r,i,s=[],a=[],u=-1,l=function(){for(i=e.once,r=t=!0;a.length;u=-1)for(n=a.shift();++u<s.length;)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(u=s.length-1,a.push(n)),function t(n){ie.each(n,function(n,r){ie.isFunction(r)?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==ie.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ie.each(arguments,function(e,t){for(var n;(n=ie.inArray(t,s,n))>-1;)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?ie.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=a=[],n||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,o){var s=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=Q.call(arguments),s=o.length,a=1!==s||e&&ie.isFunction(e.promise)?s:0,u=1===a?e:ie.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?Q.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&ie.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(u.reject):--a;return a||u.resolveWith(r,o),u.promise()}});var me;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){(e===!0?--ie.readyWait:ie.isReady)||(ie.isReady=!0,e!==!0&&--ie.readyWait>0||(me.resolveWith(G,[ie]),ie.fn.triggerHandler&&(ie(G).triggerHandler("ready"),ie(G).off("ready"))))}}),ie.ready.promise=function(t){return me||(me=ie.Deferred(),"complete"===G.readyState||"loading"!==G.readyState&&!G.documentElement.doScroll?e.setTimeout(ie.ready):(G.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),me.promise(t)},ie.ready.promise();var ye=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===ie.type(n)){i=!0;for(a in n)ye(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ie(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},xe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!xe(e))return{};var t=e[this.expando];return t||(t={},xe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,ie.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{ie.isArray(t)?r=t.concat(t.map(ie.camelCase)):(i=ie.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(ve)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||ie.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ie.isEmptyObject(t)}};var be=new a,we=new a,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/[A-Z]/g;ie.extend({hasData:function(e){return we.hasData(e)||be.hasData(e)},data:function(e,t,n){return we.access(e,t,n)},removeData:function(e,t){we.remove(e,t)},_data:function(e,t,n){return be.access(e,t,n)},_removeData:function(e,t){be.remove(e,t)}}),ie.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=we.get(o),1===o.nodeType&&!be.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),u(o,r,i[r])));be.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){we.set(this,e)}):ye(this,function(t){var n,r;if(o&&void 0===t){if(void 0!==(n=we.get(o,e)||we.get(o,e.replace(Ce,"-$&").toLowerCase())))return n;if(r=ie.camelCase(e),void 0!==(n=we.get(o,r)))return n;if(void 0!==(n=u(o,r,void 0)))return n}else r=ie.camelCase(e),this.each(function(){var n=we.get(this,r);we.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&we.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){we.remove(this,e)})}}),ie.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=be.get(e,t),n&&(!r||ie.isArray(n)?r=be.access(e,t,ie.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),o=ie._queueHooks(e,t),s=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return be.get(e,n)||be.access(e,n,{empty:ie.Callbacks("once memory").add(function(){be.remove(e,[t+"queue",n])})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=be.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),Ne=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},je=/^(?:checkbox|radio)$/i,De=/<([\w:-]+)/,Ae=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var Le=/<|&#?\w+;/;!function(){var e=G.createDocumentFragment(),t=e.appendChild(G.createElement("div")),n=G.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var He=/^key/,Oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Fe=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,v=be.get(e);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=ie.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(t){return void 0!==ie&&ie.event.triggered!==t.type?ie.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ve)||[""],l=t.length;l--;)a=Fe.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=ie.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ie.event.special[d]||{},c=ie.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ie.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,v=be.hasData(e)&&be.get(e);if(v&&(u=v.events)){for(t=(t||"").match(ve)||[""],l=t.length;l--;)if(a=Fe.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=ie.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,v.handle)!==!1||ie.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ie.event.remove(e,d+t[l],n,r,!0);ie.isEmptyObject(u)&&be.remove(e,"handle events")}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,o,s=[],a=Q.call(arguments),u=(be.get(this,"events")||{})[e.type]||[],l=ie.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=ie.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((ie.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],n=0;n<a;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?ie(i,this).index(u)>-1:ie.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||G,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Oe.test(i)?this.mouseHooks:He.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new ie.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=G),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===g()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ie.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ie.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ie.Event=function(e,t){if(!(this instanceof ie.Event))return new ie.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:h):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),this[ie.expando]=!0},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||ie.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ie.fn.extend({on:function(e,t,n,r){return v(this,e,t,n,r)},one:function(e,t,n,r){return v(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){ie.event.remove(this,e,n,t)})}});var Pe=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^true\/(.*)/,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(e){return e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=ie.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(s=c(a),o=c(e),r=0,i=o.length;r<i;r++)w(o[r],s[r]);if(t)if(n)for(o=o||c(e),s=s||c(a),r=0,i=o.length;r<i;r++)b(o[r],s[r]);else b(e,a);return s=c(a,"script"),s.length>0&&f(s,!u&&c(e,"script")),a},cleanData:function(e){for(var t,n,r,i=ie.event.special,o=0;void 0!==(n=e[o]);o++)if(xe(n)){if(t=n[be.expando]){if(t.events)for(r in t.events)i[r]?ie.event.remove(n,r):ie.removeEvent(n,r,t.handle);n[be.expando]=void 0}n[we.expando]&&(n[we.expando]=void 0)}}}),ie.fn.extend({domManip:T,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return ye(this,function(e){return void 0===e?ie.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){m(this,e).appendChild(e)}})},prepend:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ie.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return ye(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!qe[(De.exec(e)||["",""])[1].toLowerCase()]){e=ie.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return T(this,arguments,function(t){var n=this.parentNode;ie.inArray(this,e)<0&&(ie.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=[],i=ie(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),ie(i[s])[t](n),K.apply(r,n.get());return this.pushStack(r)}});var We,$e={HTML:"block",BODY:"block"},Be=/^margin/,_e=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},ze=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},Ue=G.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ue.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Ue.removeChild(s)}var n,r,i,o,s=G.createElement("div"),a=G.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),ie.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=a.appendChild(G.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Ue.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ue.removeChild(s),a.removeChild(n),t}}))}();var Ve=/^(none|table(?!-c[ea]).+)/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Qe=["Webkit","O","Moz","ms"],Je=G.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=N(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=ie.camelCase(t),u=e.style;if(t=ie.cssProps[a]||(ie.cssProps[a]=j(a)||a),s=ie.cssHooks[t]||ie.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];o=typeof n,"string"===o&&(i=Ee.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(ie.cssNumber[a]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,o,s,a=ie.camelCase(t);return t=ie.cssProps[a]||(ie.cssProps[a]=j(a)||a),s=ie.cssHooks[t]||ie.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=N(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){if(n)return Ve.test(ie.css(e,"display"))&&0===e.offsetWidth?ze(e,Ye,function(){return q(e,t,r)}):q(e,t,r)},set:function(e,n,r){var i,o=r&&Xe(e),s=r&&A(e,t,r,"border-box"===ie.css(e,"boxSizing",!1,o),o);return s&&(i=Ee.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=ie.css(e,t)),D(e,n,s)}}}),ie.cssHooks.marginLeft=S(re.reliableMarginLeft,function(e,t){if(t)return(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ie.cssHooks.marginRight=S(re.reliableMarginRight,function(e,t){if(t)return ze(e,{display:"inline-block"},N,[e,"marginRight"])}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Ne[r]+t]=o[r]||o[r-2]||o[0];return i}},Be.test(e)||(ie.cssHooks[e+t].set=D)}),ie.fn.extend({css:function(e,t){return ye(this,function(e,t,n){var r,i,o={},s=0;if(ie.isArray(t)){for(r=Xe(e),i=t.length;s<i;s++)o[t[s]]=ie.css(e,t[s],!1,r);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Se(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ie.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ie.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ie.cssProps[e.prop]]&&!ie.cssHooks[e.prop]?e.elem[e.prop]=e.now:ie.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ie.fx=H.prototype.init,ie.fx.step={};var Ke,Ze,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;ie.Animation=ie.extend(I,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Ee.exec(t),n),n}]},tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.match(ve);for(var n,r=0,i=e.length;r<i;r++)n=e[r],I.tweeners[n]=I.tweeners[n]||[],I.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),o=ie.speed(t,n,r),s=function(){var t=I(this,ie.extend({},e),o);(i||be.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,s=be.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&tt.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||ie.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=be.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ie.timers,s=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,i)}}),ie.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=0,n=ie.timers;for(Ke=ie.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ie.fx.stop(),Ke=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){
Ze||(Ze=e.setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){e.clearInterval(Ze),Ze=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,n){return t=ie.fx?ie.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=G.createElement("input"),t=G.createElement("select"),n=t.appendChild(G.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=G.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var nt,rt=ie.expr.attrHandle;ie.fn.extend({attr:function(e,t){return ye(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ie.prop(e,t,n):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),i=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?nt:void 0)),void 0!==n?null===n?void ie.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=ie.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(ve);if(o&&1===e.nodeType)for(;n=o[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),nt={set:function(e,t,n){return t===!1?ie.removeAttr(e,n):e.setAttribute(n,n),n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=rt[t]||ie.find.attr;rt[t]=function(e,t,r){var i,o;return r||(o=rt[t],rt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,rt[t]=o),i}});var it=/^(?:input|select|textarea|button)$/i,ot=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return ye(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ie.propFix[e]||e]})}}),ie.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ie.isXMLDoc(e)||(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):it.test(e.nodeName)||ot.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this});ie.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,u=0;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(ve)||[];n=this[u++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(/[\t\r\n\f]/g," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=ie.trim(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,u=0;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ve)||[];n=this[u++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(/[\t\r\n\f]/g," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=ie.trim(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=ie(this),o=e.match(ve)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=W(this),t&&be.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":be.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(/[\t\r\n\f]/g," ").indexOf(t)>-1)return!0;return!1}});ie.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(/\r/g,""):null==n?"":n)}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e)).replace(/[\x20\t\r\n\f]+/g," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,u=i<0?a:o?i:0;u<a;u++)if(n=r[u],(n.selected||u===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=ie.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=ie.inArray(ie.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){if(ie.isArray(t))return e.checked=ie.inArray(ie(e).val(),t)>-1}},re.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var st=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||G],d=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!st.test(d+ie.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[ie.expando]?t:new ie.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),f=ie.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!ie.isWindow(r)){for(u=f.delegateType||d,st.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||G)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(be.get(s,"events")||{})[t.type]&&be.get(s,"handle"),c&&c.apply(s,n),(c=l&&s[l])&&c.apply&&xe(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!xe(r)||l&&ie.isFunction(r[d])&&!ie.isWindow(r)&&(a=r[l],a&&(r[l]=null),ie.event.triggered=d,r[d](),ie.event.triggered=void 0,a&&(r[l]=a)),t.result}},simulate:function(e,t,n){var r=ie.extend(new ie.Event,n,{type:e,isSimulated:!0});ie.event.trigger(r,null,t)}}),ie.fn.extend({trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ie.event.trigger(e,t,n,!0)}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e))};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=be.access(r,t);i||r.addEventListener(e,n,!0),be.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=be.access(r,t)-1;i?be.access(r,t,i):(r.removeEventListener(e,n,!0),be.remove(r,t))}}});var at=e.location,ut=ie.now(),lt=/\?/;ie.parseJSON=function(e){return JSON.parse(e+"")},ie.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var ct=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,dt=/^(?:GET|HEAD)$/,ht={},gt={},vt="*/".concat("*"),mt=G.createElement("a");mt.href=at.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:at.href,type:"GET",isLocal:pt.test(at.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_(_(e,ie.ajaxSettings),t):_(ie.ajaxSettings,e)},ajaxPrefilter:$(ht),ajaxTransport:$(gt),ajax:function(t,n){function r(t,n,r,a){var l,f,y,x,w,C=n;2!==b&&(b=2,u&&e.clearTimeout(u),i=void 0,s=a||"",T.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(x=X(p,T,r)),x=z(p,x,T,l),l?(p.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(ie.lastModified[o]=w),(w=T.getResponseHeader("etag"))&&(ie.etag[o]=w)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=x.state,f=x.data,y=x.error,l=!y)):(y=C,!t&&C||(C="error",t<0&&(t=0))),T.status=t,T.statusText=(n||C)+"",l?g.resolveWith(d,[f,C,T]):g.rejectWith(d,[T,C,y]),T.statusCode(m),m=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[T,p,l?f:y]),v.fireWith(d,[T,C]),c&&(h.trigger("ajaxComplete",[T,p]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,u,l,c,f,p=ie.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?ie(d):ie.event,g=ie.Deferred(),v=ie.Callbacks("once memory"),m=p.statusCode||{},y={},x={},b=0,w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=ft.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=x[n]=x[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),r(0,t),this}};if(g.promise(T).complete=v.add,T.success=T.done,T.error=T.fail,p.url=((t||p.url||at.href)+"").replace(/#.*$/,"").replace(/^\/\//,at.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=ie.trim(p.dataType||"*").toLowerCase().match(ve)||[""],null==p.crossDomain){l=G.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=mt.protocol+"//"+mt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ie.param(p.data,p.traditional)),B(ht,p,n,T),2===b)return T;c=ie.event&&p.global,c&&0==ie.active++&&ie.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!dt.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(lt.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=ct.test(o)?o.replace(ct,"$1_="+ut++):o+(lt.test(o)?"&":"?")+"_="+ut++)),p.ifModified&&(ie.lastModified[o]&&T.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&T.setRequestHeader("If-None-Match",ie.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+vt+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(d,T,p)===!1||2===b))return T.abort();w="abort";for(f in{success:1,error:1,complete:1})T[f](p[f]);if(i=B(gt,p,n,T)){if(T.readyState=1,c&&h.trigger("ajaxSend",[T,p]),2===b)return T;p.async&&p.timeout>0&&(u=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{b=1,i.send(y,r)}catch(e){if(!(b<2))throw e;r(-1,e)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax(ie.extend({url:e,type:t,dataType:i,data:n,success:r},ie.isPlainObject(e)&&e))}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){var t;return ie.isFunction(e)?this.each(function(t){ie(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ie(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return!ie.expr.filters.visible(e)},ie.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var yt=/\[\]$/,xt=/^(?:submit|button|image|reset|file)$/i,bt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)U(n,e[n],t,i);return r.join("&").replace(/%20/g,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&bt.test(this.nodeName)&&!xt.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(/\r?\n/g,"\r\n")}}):{name:t.name,value:n.replace(/\r?\n/g,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var wt={0:200,1223:204},Tt=ie.ajaxSettings.xhr();re.cors=!!Tt&&"withCredentials"in Tt,re.ajax=Tt=!!Tt,ie.ajaxTransport(function(t){var n,r;if(re.cors||Tt&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=ie("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),G.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ct=[],kt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ct.pop()||ie.expando+"_"+ut++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(kt,"$1"+i):t.jsonp!==!1&&(t.url+=(lt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||ie.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?ie(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ct.push(i)),s&&ie.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var r=ce.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var Et=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&Et)return Et.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=ie.trim(e.slice(a)),e=e.slice(0,a)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&ie.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length},ie.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=ie.css(e,"position"),f=ie(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=ie.css(e,"top"),u=ie.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),ie.isFunction(t)&&(t=t.call(e,n,ie.extend({},a))),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,ie.contains(t,r)?(i=r.getBoundingClientRect(),n=V(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ie.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(r=e.offset()),r.top+=ie.css(e[0],"borderTopWidth",!0),r.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ie.css(n,"marginTop",!0),left:t.left-r.left-ie.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||Ue})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ie.fn[e]=function(r){return ye(this,function(e,r,i){var o=V(e);if(void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=S(re.pixelPosition,function(e,n){if(n)return n=N(e,t),_e.test(n)?ie(e).position()[t]+"px":n})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return ye(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,s):ie.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),ie.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var Nt=e.jQuery,St=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=St),t&&e.jQuery===ie&&(e.jQuery=Nt),ie},t||(e.jQuery=e.$=ie),ie});

},{}],10:[function(require,module,exports){
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";if(!e.jstree){var r=0,i=!1,s=!1,a=!1,n=[],o=e("script:last").attr("src"),d=window.document;e.jstree={version:"3.3.3",defaults:{plugins:[]},plugins:{},path:o&&o.indexOf("/")!==-1?o.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,i){var s=new e.jstree.core(++r),a=i;return i=e.extend(!0,{},e.jstree.defaults,i),a&&a.plugins&&(i.plugins=a.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(s=s.plugin(t,i[t]))}),e(t).data("jstree",s),s.init(t,i),s},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(d).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var r=null,i=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!i||!i.length)try{i=e(t)}catch(e){}if(!i||!i.length)try{i=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?r=i:e(".jstree").each(function(){var i=e(this).data("jstree");if(i&&i._model.data[t])return r=i,!1}),r},e.fn.jstree=function(r){var i="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=null;return!(r===!0&&!this.length)&&(this.each(function(){var n=e.jstree.reference(this),o=i&&n?n[r]:null;if(a=i&&o?o.apply(n,s):null,n||i||r!==t&&!e.isPlainObject(r)||e.jstree.create(this,r),(n&&!i||r===!0)&&(a=n||!1),null!==a&&a!==t)return!1}),null!==a&&a!==t?a:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(r){return function(r){return e(r).hasClass("jstree")&&e(r).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,r){var i=e.jstree.plugins[t];return i?(this._data[t]={},i.prototype=this,new i(r,this)):this},init:function(t,r){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=r,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,r=d.createElement("LI");return r.setAttribute("role","treeitem"),e=d.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),r.appendChild(e),e=d.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=d.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),r.appendChild(e),e=t=null,r},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",r=null,i=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(d.selection&&d.selection.empty)d.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),i=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==d.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var r=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(r=this.get_parent(t.currentTarget))&&r.id!==e.jstree.root&&this.get_node(r,!0).children(".jstree-anchor").focus();break;case 38:t.preventDefault(),r=this.get_prev_dom(t.currentTarget),r&&r.length&&r.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(r=this.get_node(t.currentTarget,!0).children(".jstree-children")[0])&&e(this._firstChild(r)).children(".jstree-anchor").focus();break;case 40:t.preventDefault(),r=this.get_next_dom(t.currentTarget),r&&r.length&&r.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),r=this._firstChild(this.get_container_ul()[0]),r&&e(r).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,r){r.status&&(r.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,r,i=[];for(t=0,r=this._data.core.selected.length;t<r;t++)i=i.concat(this._model.data[this._data.core.selected[t]].parents);for(i=e.vakata.array_unique(i),t=0,r=i.length;t<r;t++)this.open_node(i[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(i){if(i.target.tagName&&"input"===i.target.tagName.toLowerCase())return!0;r&&clearTimeout(r),r=setTimeout(function(){t=""},500);var s=String.fromCharCode(i.which).toLowerCase(),a=this.element.find(".jstree-anchor").filter(":visible"),n=a.index(d.activeElement)||0,o=!1;if(t+=s,t.length>1){if(a.slice(n).each(e.proxy(function(r,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return;if(a.slice(0,n).each(e.proxy(function(r,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return}if(new RegExp("^"+s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(a.slice(n+1).each(e.proxy(function(t,r){if(e(r).text().toLowerCase().charAt(0)===s)return e(r).focus(),o=!0,!1},this)),o)return;if(a.slice(0,n+1).each(e.proxy(function(t,r){if(e(r).text().toLowerCase().charAt(0)===s)return e(r).focus(),o=!0,!1},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var r=this.get_node(t.currentTarget);r&&r.id&&(this._data.core.focused=r.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-i>500&&!this._data.core.focused){i=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(d).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var r=this.settings.core.strings;return e.isFunction(r)?r.call(this,t):r&&r[t]?r[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,r){t&&t.id&&(t=t.id);var i;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(i=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=e(t,this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=e(t,this.element)).length||!i.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return r&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,r,i){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var s,a,n=[];for(n.push(i?t.id:t.text),s=0,a=t.parents.length;s<a;s++)n.push(i?t.parents[s]:this.get_text(t.parents[s]));return n=n.reverse().slice(1),r?n.join(r):n},get_next_dom:function(t,r){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(r){i=t[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return!!i&&e(i)}if(t.hasClass("jstree-open")){for(i=this._firstChild(t.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return e(i)}i=t[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return null!==i?e(i):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,r){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(r){i=t[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);return!!i&&e(i)}i=t[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);if(null!==i){for(t=e(i);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(i=t[0].parentNode.parentNode)||!i.className||i.className.indexOf("jstree-node")===-1)&&e(i)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,r){var i,s,a,n,o;if(e.isArray(t))return this._load_nodes(t.slice(),r),!0;if(!(t=this.get_node(t)))return r&&r.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,a=0,n=t.parents.length;a<n;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_filter(this._model.data[t.parents[a]].children_d,function(r){return e.inArray(r,t.children_d)===-1});for(i=0,s=t.children_d.length;i<s;i++)this._model.data[t.children_d[i]].state.selected&&(o=!0),delete this._model.data[t.children_d[i]];o&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(r){return e.inArray(r,t.children_d)===-1})),t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var i=this.get_node(t,!0),s=0,a=0,n=this._model.data,o=!1;for(s=0,a=t.children.length;s<a;s++)if(n[t.children[s]]&&!n[t.children[s]].state.hidden){o=!0;break}t.state.loaded&&i&&i.length&&(i.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==t.id&&i.addClass(t.state.opened?"jstree-open":"jstree-closed"):i.addClass("jstree-leaf")),i.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),r&&r.call(this,t,e)},this)),!0},_load_nodes:function(e,t,r,i){var s,a,n=!0,o=function(){this._load_nodes(e,t,!0)},d=this._model.data,c=[];for(s=0,a=e.length;s<a;s++)d[e[s]]&&(!d[e[s]].state.loaded&&!d[e[s]].state.failed||!r&&i)&&(this.is_loading(e[s])||this.load_node(e[s],o),n=!1);if(n){for(s=0,a=e.length;s<a;s++)d[e[s]]&&d[e[s]].state.loaded&&c.push(e[s]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var i,s,a=[],n=this._model.data,o=n[t.id].children_d;for(t.state&&!t.state.loaded&&a.push(t.id),i=0,s=o.length;i<s;i++)n[o[i]]&&n[o[i]].state&&!n[o[i]].state.loaded&&a.push(o[i]);a.length?this._load_nodes(a,function(){this.load_all(t,r)}):(r&&r.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,r){var i,s=this.settings.core.data,a=function(){return 3!==this.nodeType&&8!==this.nodeType};return s?e.isFunction(s)?s.call(this,t,e.proxy(function(i){i===!1?r.call(this,!1):this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(a):i,function(e){r.call(this,e)})},this)):"object"==typeof s?s.url?(s=e.extend(!0,{},s),e.isFunction(s.url)&&(s.url=s.url.call(this,t)),e.isFunction(s.data)&&(s.data=s.data.call(this,t)),e.ajax(s).done(e.proxy(function(i,s,n){var o=n.getResponseHeader("Content-Type");return o&&o.indexOf("json")!==-1||"object"==typeof i?this._append_json_data(t,i,function(e){r.call(this,e)}):o&&o.indexOf("html")!==-1||"string"==typeof i?this._append_html_data(t,e(e.parseHTML(i)).filter(a),function(e){r.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:n})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1))},this)).fail(e.proxy(function(e){r.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(i=e.isArray(s)||e.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s,t.id===e.jstree.root?this._append_json_data(t,i,function(e){r.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1))):"string"==typeof s?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(s)).filter(a),function(e){r.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1)):r.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){r.call(this,e)}):r.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,r,i){t=this.get_node(t),t.children=[],t.children_d=[];var s,a,n,o=r.is("ul")?r.children():r,d=t.id,c=[],l=[],h=this._model.data,_=h[d],u=this._data.core.selected.length;for(o.each(e.proxy(function(t,r){(s=this._parse_model_from_html(e(r),d,_.parents.concat()))&&(c.push(s),l.push(s),h[s].children_d.length&&(l=l.concat(h[s].children_d)))},this)),_.children=c,_.children_d=l,a=0,n=_.parents.length;a<n;a++)h[_.parents[a]].children_d=h[_.parents[a]].children_d.concat(l);this.trigger("model",{nodes:l,parent:d}),d!==e.jstree.root?(this._node_changed(d),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==u&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(t,r,i,s){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],r.d&&"string"==typeof(r=r.d)&&(r=JSON.parse(r)),e.isArray(r)||(r=[r]);var a=null,n={df:this._model.default_state,dat:r,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var r,i,s,a,n=e.dat,o=e.par,d=[],c=[],l=[],h=e.df,_=e.t_id,u=e.t_cnt,g=e.m,f=g[o],p=e.sel,m=function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d=e.id.toString(),c={id:d,text:e.text||"",icon:e.icon===t||e.icon,parent:r,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(c.state[s]=h[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(c.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(c.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(c.li_attr[s]=e.li_attr[s]);if(c.li_attr.id||(c.li_attr.id=d),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(c.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),g[c.id]=c,s=0,a=c.children.length;s<a;s++)n=m(g[c.children[s]],c.id,i),o=g[n],c.children_d.push(n),o.children_d.length&&(c.children_d=c.children_d.concat(o.children_d));return delete e.data,delete e.children,g[c.id].original=e,c.state.selected&&l.push(c.id),c.id},v=function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d,c=!1;do{c="j"+_+"_"+ ++u}while(g[c]);d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=c),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=v(e.children[s],d.id,i),o=g[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,g[d.id]=d,d.state.selected&&l.push(d.id),d.id};if(n.length&&n[0].id!==t&&n[0].parent!==t){for(i=0,s=n.length;i<s;i++)n[i].children||(n[i].children=[]),g[n[i].id.toString()]=n[i];for(i=0,s=n.length;i<s;i++)g[n[i].parent.toString()].children.push(n[i].id.toString()),f.children_d.push(n[i].id.toString());for(i=0,s=f.children.length;i<s;i++)r=m(g[f.children[i]],o,f.parents.concat()),c.push(r),g[r].children_d.length&&(c=c.concat(g[r].children_d));for(i=0,s=f.parents.length;i<s;i++)g[f.parents[i]].children_d=g[f.parents[i]].children_d.concat(c);a={cnt:u,mod:g,sel:p,par:o,dpc:c,add:l}}else{for(i=0,s=n.length;i<s;i++)(r=v(n[i],o,f.parents.concat()))&&(d.push(r),c.push(r),g[r].children_d.length&&(c=c.concat(g[r].children_d)));for(f.children=d,f.children_d=c,i=0,s=f.parents.length;i<s;i++)g[f.parents[i]].children_d=g[f.parents[i]].children_d.concat(c);a={cnt:u,mod:g,sel:p,par:o,dpc:c,add:l}}if("undefined"!=typeof window&&void 0!==window.document)return a;postMessage(a)},d=function(t,r){if(null!==this.element){this._cnt=t.cnt;var s,a=this._model.data;for(s in a)a.hasOwnProperty(s)&&a[s].state&&a[s].state.loading&&t.mod[s]&&(t.mod[s].state.loading=!0);if(this._model.data=t.mod,r){var n,o=t.add,d=t.sel,c=this._data.core.selected.slice();if(a=this._model.data,d.length!==c.length||e.vakata.array_unique(d.concat(c)).length!==d.length){for(s=0,n=d.length;s<n;s++)e.inArray(d[s],o)===-1&&e.inArray(d[s],c)===-1&&(a[d[s]].state.selected=!1);for(s=0,n=c.length;s<n;s++)e.inArray(c[s],d)===-1&&(a[c[s]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||s?(this._data.core.working=!0,a=new window.Worker(this._wrk),a.onmessage=e.proxy(function(e){d.call(this,e.data,!0);try{a.terminate(),a=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),n.par?a.postMessage(n):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,r,i,!0])}catch(e){d.call(this,o(n),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else d.call(this,o(n),!1)}},_parse_model_from_html:function(r,i,s){s=s?[].concat(s):[],i&&s.unshift(i);var a,n,o,d,c,l=this._model.data,h={id:!1,text:!1,icon:!0,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(h.state[o]=this._model.default_state[o]);if(d=e.vakata.attributes(r,!0),e.each(d,function(t,r){if(r=e.trim(r),!r.length)return!0;h.li_attr[t]=r,"id"===t&&(h.id=r.toString())}),d=r.children("a").first(),d.length&&(d=e.vakata.attributes(d,!0),e.each(d,function(t,r){r=e.trim(r),r.length&&(h.a_attr[t]=r)})),d=r.children("a").first().length?r.children("a").first().clone():r.clone(),d.children("ins, i, ul").remove(),d=d.html(),d=e("<div />").html(d),h.text=this.settings.core.force_text?d.text():d.html(),d=r.data(),h.data=d?e.extend(!0,{},d):null,h.state.opened=r.hasClass("jstree-open"),h.state.selected=r.children("a").hasClass("jstree-clicked"),h.state.disabled=r.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(o in h.data.jstree)h.data.jstree.hasOwnProperty(o)&&(h.state[o]=h.data.jstree[o]);d=r.children("a").children(".jstree-themeicon"),d.length&&(h.icon=!d.hasClass("jstree-themeicon-hidden")&&d.attr("rel")),h.state.icon!==t&&(h.icon=h.state.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),d=r.children("ul").children("li");do{c="j"+this._id+"_"+ ++this._cnt}while(l[c]);return h.id=h.li_attr.id?h.li_attr.id.toString():c,d.length?(d.each(e.proxy(function(t,r){a=this._parse_model_from_html(e(r),h.id,s),n=this._model.data[a],h.children.push(a),n.children_d.length&&(h.children_d=h.children_d.concat(n.children_d))},this)),h.children_d=h.children_d.concat(h.children)):r.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr.class&&(h.li_attr.class=h.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),h.a_attr.class&&(h.a_attr.class=h.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),l[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d=e.id.toString(),c=this._model.data,l=this._model.default_state,h={id:d,text:e.text||"",icon:e.icon===t||e.icon,parent:r,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in l)l.hasOwnProperty(s)&&(h.state[s]=l[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=d),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),c[h.id]=h,s=0,a=h.children.length;s<a;s++)n=this._parse_model_from_flat_json(c[h.children[s]],h.id,i),o=c[n],h.children_d.push(n),o.children_d.length&&(h.children_d=h.children_d.concat(o.children_d));return delete e.data,delete e.children,c[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d,c=!1,l=this._model.data,h=this._model.default_state;do{c="j"+this._id+"_"+ ++this._cnt}while(l[c]);d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=c),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=this._parse_model_from_json(e.children[s],d.id,i),o=l[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,l[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_redraw:function(){var t,r,i,s=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),a=d.createElement("UL"),n=this._data.core.focused;for(r=0,i=s.length;r<i;r++)(t=this.redraw_node(s[r],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&a.appendChild(t);this._model.force_full_redraw&&(a.className=this.get_container_ul()[0].className,a.setAttribute("role","group"),this.element.empty().append(a)),null!==n&&(t=this.get_node(n,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==d.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:s})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var r=this.get_node(t),i=!1,s=!1,a=!1,n=d;if(!r)return!1;if(r.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],r.children.length&&r.state.loaded){for(a=n.createElement("UL"),a.setAttribute("role","group"),a.className="jstree-children",i=0,s=r.children.length;i<s;i++)a.appendChild(this.redraw_node(r.children[i],!0,!0));t.appendChild(a)}},redraw_node:function(t,r,i,s){var a=this.get_node(t),n=!1,o=!1,c=!1,l=!1,h=!1,_=!1,u="",g=d,f=this._model.data,p=!1,m=null,v=0,j=0,y=!1,k=!1;if(!a)return!1
;if(a.id===e.jstree.root)return this.redraw(!0);if(r=r||0===a.children.length,t=d.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(a.id[0])!==-1?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):d.getElementById(a.id))t=e(t),i||(n=t.parent().parent()[0],n===this.element[0]&&(n=null),o=t.index()),r||!a.children.length||t.children(".jstree-children").length||(r=!0),r||(c=t.children(".jstree-children")[0]),p=t.children(".jstree-anchor")[0]===d.activeElement,t.remove();else if(r=!0,!i){if(!(null===(n=a.parent!==e.jstree.root?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||n&&f[a.parent].state.opened))return!1;o=e.inArray(a.id,null===n?f[e.jstree.root].children:f[a.parent].children)}t=this._data.core.node.cloneNode(!0),u="jstree-node ";for(l in a.li_attr)if(a.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?t.setAttribute(l,a.li_attr[l]):u+=a.li_attr[l]}for(a.a_attr.id||(a.a_attr.id=a.id+"_anchor"),t.setAttribute("aria-selected",!!a.state.selected),t.setAttribute("aria-level",a.parents.length),t.setAttribute("aria-labelledby",a.a_attr.id),a.state.disabled&&t.setAttribute("aria-disabled",!0),l=0,h=a.children.length;l<h;l++)if(!f[a.children[l]].state.hidden){y=!0;break}if(null!==a.parent&&f[a.parent]&&!a.state.hidden&&(l=e.inArray(a.id,f[a.parent].children),k=a.id,l!==-1))for(l++,h=f[a.parent].children.length;l<h&&(f[f[a.parent].children[l]].state.hidden||(k=f[a.parent].children[l]),k===a.id);l++);a.state.hidden&&(u+=" jstree-hidden"),a.state.loaded&&!y?u+=" jstree-leaf":(u+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),k===a.id&&(u+=" jstree-last"),t.id=a.id,t.className=u,u=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":"");for(h in a.a_attr)if(a.a_attr.hasOwnProperty(h)){if("href"===h&&"#"===a.a_attr[h])continue;"class"!==h?t.childNodes[1].setAttribute(h,a.a_attr[h]):u+=" "+a.a_attr[h]}if(u.length&&(t.childNodes[1].className="jstree-anchor "+u),(a.icon&&a.icon!==!0||a.icon===!1)&&(a.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":a.icon.indexOf("/")===-1&&a.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+a.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(g.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,r&&a.children.length&&(a.state.opened||s)&&a.state.loaded){for(_=g.createElement("UL"),_.setAttribute("role","group"),_.className="jstree-children",l=0,h=a.children.length;l<h;l++)_.appendChild(this.redraw_node(a.children[l],r,!0));t.appendChild(_)}if(c&&t.appendChild(c),!i){for(n||(n=this.element[0]),l=0,h=n.childNodes.length;l<h;l++)if(n.childNodes[l]&&n.childNodes[l].className&&n.childNodes[l].className.indexOf("jstree-children")!==-1){m=n.childNodes[l];break}m||(m=g.createElement("UL"),m.setAttribute("role","group"),m.className="jstree-children",n.appendChild(m)),n=m,o<n.childNodes.length?n.insertBefore(t,n.childNodes[o]):n.appendChild(t),p&&(v=this.element[0].scrollTop,j=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=j)}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(a.id,!1,0)},this),0)),t},open_node:function(r,i,s){var a,n,o,d;if(e.isArray(r)){for(r=r.slice(),a=0,n=r.length;a<n;a++)this.open_node(r[a],i,s);return!0}return!(!(r=this.get_node(r))||r.id===e.jstree.root)&&(s=s===t?this.settings.core.animation:s,this.is_closed(r)?this.is_loaded(r)?(o=this.get_node(r,!0),d=this,o.length&&(s&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),r.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(r),s?(this.trigger("before_open",{node:r}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",d.element&&d.trigger("after_open",{node:r})})):(this.trigger("before_open",{node:r}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),r.state.opened=!0,i&&i.call(this,r,!0),o.length||this.trigger("before_open",{node:r}),this.trigger("open_node",{node:r}),s&&o.length||this.trigger("after_open",{node:r}),!0):this.is_loading(r)?setTimeout(e.proxy(function(){this.open_node(r,i,s)},this),500):void this.load_node(r,function(e,t){return t?this.open_node(e,i,s):!!i&&i.call(this,e,!1)}):(i&&i.call(this,r,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,i,s=t.parents;for(r=0,i=s.length;r<i;r+=1)r!==e.jstree.root&&this.open_node(s[r],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(r,i){var s,a,n,o;if(e.isArray(r)){for(r=r.slice(),s=0,a=r.length;s<a;s++)this.close_node(r[s],i);return!0}return!(!(r=this.get_node(r))||r.id===e.jstree.root)&&(!this.is_closed(r)&&(i=i===t?this.settings.core.animation:i,n=this,o=this.get_node(r,!0),r.state.opened=!1,this.trigger("close_node",{node:r}),void(o.length?i?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,function(){this.style.display="",o.children(".jstree-children").remove(),n.element&&n.trigger("after_close",{node:r})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:r})):this.trigger("after_close",{node:r}))))},toggle_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.toggle_node(t[r]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,r,i){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var s,a,n,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(s=0,a=t.children_d.length;s<a;s++)this.is_closed(this._model.data[t.children_d[s]])&&(this._model.data[t.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:t})}i=i||o,n=this,o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){n.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,r,i)},r||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var i,s,a=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),n=this;for(a.length&&(a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each(function(){n.close_node(this,r||0)})),i=0,s=t.children_d.length;i<s;i++)this._model.data[t.children_d[i]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.enable_node(t[r]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:t})},disable_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.disable_node(t[r]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:t})},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.hide_node(t[i],!0);return r||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),r||this.redraw(),this.trigger("hide_node",{node:t}))},show_node:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.show_node(t[i],!0);return r||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),r||this.redraw(),this.trigger("show_node",{node:t}))},hide_all:function(t){var r,i=this._model.data,s=[];for(r in i)i.hasOwnProperty(r)&&r!==e.jstree.root&&!i[r].state.hidden&&(i[r].state.hidden=!0,s.push(r));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:s}),s},show_all:function(t){var r,i=this._model.data,s=[];for(r in i)i.hasOwnProperty(r)&&r!==e.jstree.root&&i[r].state.hidden&&(i[r].state.hidden=!1,s.push(r));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:s}),s},activate_node:function(e,r){if(this.is_disabled(e))return!1;if(r&&"object"==typeof r||(r={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(r.metaKey||r.ctrlKey||r.shiftKey)&&(!r.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(r.shiftKey){var i,s,a=this.get_node(e).id,n=this._data.core.last_clicked.id,o=this.get_node(this._data.core.last_clicked.parent).children,d=!1;for(i=0,s=o.length;i<s;i+=1)o[i]===a&&(d=!d),o[i]===n&&(d=!d),this.is_disabled(o[i])||!d&&o[i]!==a&&o[i]!==n?this.deselect_node(o[i],!0,r):this.is_hidden(o[i])||this.select_node(o[i],!0,!1,r);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:r})}else this.is_selected(e)?this.deselect_node(e,!1,r):this.select_node(e,!1,!1,r);else!this.settings.core.multiple&&(r.metaKey||r.ctrlKey||r.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,r):(this.deselect_all(!0),this.select_node(e,!1,!1,r),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:r})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),r=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){r.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,r,i,s){var a,n,o;if(e.isArray(t)){for(t=t.slice(),n=0,o=t.length;n<o;n++)this.select_node(t[n],r,i,s);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),i||(a=this._open_to(t)),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:s}),r||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:s}))},deselect_node:function(t,r,i){var s,a,n;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.deselect_node(t[s],r,i);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;n=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),n.length&&n.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:i}),r||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:i}))},select_all:function(t){var r,i,s=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),r=0,i=this._data.core.selected.length;r<i;r++)this._model.data[this._data.core.selected[r]]&&(this._model.data[this._data.core.selected[r]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:s})},deselect_all:function(e){var t,r,i=this._data.core.selected.concat([]);for(t=0,r=this._data.core.selected.length;t<r;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var r,i,s,a,n=this.get_selected(!0),o={};for(r=0,i=n.length;r<i;r++)o[n[r].id]=n[r];for(r=0,i=n.length;r<i;r++)for(s=0,a=n[r].children_d.length;s<a;s++)o[n[r].children_d[s]]&&delete o[n[r].children_d[s]];n=[];for(r in o)o.hasOwnProperty(r)&&n.push(r);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},get_bottom_selected:function(t){var r,i,s=this.get_selected(!0),a=[];for(r=0,i=s.length;r<i;r++)s[r].children.length||a.push(s[r].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_state:function(){var t,r={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&r.core.open.push(t),this._model.data[t].state.selected&&r.core.selected.push(t));return r},set_state:function(r,i){if(r){if(r.core){var s,a;if(r.core.open)return e.isArray(r.core.open)&&r.core.open.length?this._load_nodes(r.core.open,function(e){this.open_node(e,!1,0),delete r.core.open,this.set_state(r,i)}):(delete r.core.open,this.set_state(r,i)),!1;if(r.core.scroll)return r.core.scroll&&r.core.scroll.left!==t&&this.element.scrollLeft(r.core.scroll.left),r.core.scroll&&r.core.scroll.top!==t&&this.element.scrollTop(r.core.scroll.top),delete r.core.scroll,this.set_state(r,i),!1;if(r.core.selected)return s=this,this.deselect_all(),e.each(r.core.selected,function(e,t){s.select_node(t,!1,!0)}),delete r.core.selected,this.set_state(r,i),!1;for(a in r)r.hasOwnProperty(a)&&"core"!==a&&e.inArray(a,this.settings.plugins)===-1&&delete r[a];if(e.isEmptyObject(r.core))return delete r.core,this.set_state(r,i),!1}return!e.isEmptyObject(r)||(r=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,r){this._data.core.state=r===!0?{}:this.get_state(),r&&e.isFunction(r)&&(this._data.core.state=r.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,r){r&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r=[],i=[],s=this._data.core.selected.concat([]);i.push(t.id),t.state.opened===!0&&r.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id),r.push(this.id)}),this._load_nodes(i,e.proxy(function(e){this.open_node(r,!1,0),this.select_node(s),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,r){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var i,s,a=this._model.data,n=t.id;for(r=r.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=r,i=0,s=t.parents.length;i<s;i++)a[t.parents[i]].children_d[e.inArray(t.id,a[t.parents[i]].children_d)]=r;for(i=0,s=t.children.length;i<s;i++)a[t.children[i]].parent=r;for(i=0,s=t.children_d.length;i<s;i++)a[t.children_d[i]].parents[e.inArray(t.id,a[t.children_d[i]].parents)]=r;return i=e.inArray(t.id,this._data.core.selected),i!==-1&&(this._data.core.selected[i]=r),i=this.get_node(t.id,!0),i&&(i.attr("id",r),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",r)),delete a[t.id],t.id=r,t.li_attr.id=r,a[r]=t,this.trigger("set_id",{node:t,new:t.id,old:n}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.set_text(t[i],r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=r,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:r}),!0)},get_json:function(t,r,i){if(!(t=this.get_node(t||e.jstree.root)))return!1;r&&r.flat&&!i&&(i=[]);var s,a,n={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!r||!r.no_data)&&e.extend(!0,{},t.data)};if(r&&r.flat?n.parent=t.parent:n.children=[],r&&r.no_state)delete n.state;else for(s in t.state)t.state.hasOwnProperty(s)&&(n.state[s]=t.state[s]);if(r&&r.no_li_attr&&delete n.li_attr,r&&r.no_a_attr&&delete n.a_attr,r&&r.no_id&&(delete n.id,n.li_attr&&n.li_attr.id&&delete n.li_attr.id,n.a_attr&&n.a_attr.id&&delete n.a_attr.id),r&&r.flat&&t.id!==e.jstree.root&&i.push(n),!r||!r.no_children)for(s=0,a=t.children.length;s<a;s++)r&&r.flat?this.get_json(t.children[s],r,i):n.children.push(this.get_json(t.children[s],r));return r&&r.flat?i:t.id===e.jstree.root?n.children:n},create_node:function(r,i,s,a,n){if(null===r&&(r=e.jstree.root),!(r=this.get_node(r)))return!1;if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(r))return this.load_node(r,function(){this.create_node(r,i,s,a,!0)});i||(i={text:this.get_string("New node")}),"string"==typeof i&&(i={text:i}),i.text===t&&(i.text=this.get_string("New node"));var o,d,c,l;switch(r.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":o=this.get_node(r.parent),s=e.inArray(r.id,o.children),r=o;break;case"after":o=this.get_node(r.parent),s=e.inArray(r.id,o.children)+1,r=o;break;case"inside":case"first":s=0;break;case"last":s=r.children.length;break;default:s||(s=0)}if(s>r.children.length&&(s=r.children.length),i.id||(i.id=!0),!this.check("create_node",i,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.id===!0&&delete i.id,!(i=this._parse_model_from_json(i,r.id,r.parents.concat())))return!1;for(o=this.get_node(i),d=[],d.push(i),d=d.concat(o.children_d),this.trigger("model",{nodes:d,parent:r.id}),r.children_d=r.children_d.concat(d),c=0,l=r.parents.length;c<l;c++)this._model.data[r.parents[c]].children_d=this._model.data[r.parents[c]].children_d.concat(d);for(i=o,o=[],c=0,l=r.children.length;c<l;c++)o[c>=s?c+1:c]=r.children[c];return o[s]=i.id,r.children=o,this.redraw_node(r,!0),a&&a.call(this,this.get_node(i)),this.trigger("create_node",{node:this.get_node(i),parent:r.id,position:s}),i.id},rename_node:function(t,r){var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.rename_node(t[i],r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=t.text,this.check("rename_node",t,this.get_parent(t),r)?(this.set_text(t,r),this.trigger("rename_node",{node:t,text:r,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var r,i,s,a,n,o,d,c,l,h,_,u;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.delete_node(t[r]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(s=this.get_node(t.parent),a=e.inArray(t.id,s.children),h=!1,!this.check("delete_node",t,s,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(a!==-1&&(s.children=e.vakata.array_remove(s.children,a)),n=t.children_d.concat([]),n.push(t.id),o=0,d=t.parents.length;o<d;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(t){return e.inArray(t,n)===-1});for(c=0,l=n.length;c<l;c++)if(this._model.data[n[c]].state.selected){h=!0;break}for(h&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return e.inArray(t,n)===-1})),this.trigger("delete_node",{node:t,parent:s.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:s.id}),c=0,l=n.length;c<l;c++)delete this._model.data[n[c]];return e.inArray(this._data.core.focused,n)!==-1&&(this._data.core.focused=null,_=this.element[0].scrollTop,u=this.element[0].scrollLeft,s.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(s,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=_,this.element[0].scrollLeft=u),this.redraw_node(s,!0),!0},check:function(t,r,i,s,a){r=r&&r.id?r:this.get_node(r),i=i&&i.id?i:this.get_node(i);var n=t.match(/^move_node|copy_node|create_node$/i)?i:r,o=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||a&&a.is_multi||r.id!==i.id&&("move_node"!==t||e.inArray(r.id,i.children)!==s)&&e.inArray(i.id,r.children_d)===-1?(n&&n.data&&(n=n.data),n&&n.functions&&(n.functions[t]===!1||n.functions[t]===!0)?(n.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})}),n.functions[t]):!(o===!1||e.isFunction(o)&&o.call(this,t,r,i,s,a)===!1||o&&o[t]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(r,i,s,a,n,o,d){var c,l,h,_,u,g,f,p,m,v,j,y,k,x;if(i=this.get_node(i),s=s===t?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(i))return this.load_node(i,function(){this.move_node(r,i,s,a,!0,!1,d)});if(e.isArray(r)){if(1!==r.length){for(c=0,l=r.length;c<l;c++)(m=this.move_node(r[c],i,s,a,n,!1,d))&&(i=m,s="after");return this.redraw(),!0}r=r[0]}if(!(r=r&&r.id?r:this.get_node(r))||r.id===e.jstree.root)return!1;if(h=(r.parent||e.jstree.root).toString(),u=s.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,g=d||(this._model.data[r.id]?this:e.jstree.reference(r.id)),f=!g||!g._id||this._id!==g._id,_=g&&g._id&&h&&g._model.data[h]&&g._model.data[h].children?e.inArray(r.id,g._model.data[h].children):-1,g&&g._id&&(r=g._model.data[r.id]),f)return!!(m=this.copy_node(r,i,s,a,n,!1,d))&&(g&&g.delete_node(r),m);switch(i.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,u.children);break;case"after":s=e.inArray(i.id,u.children)+1;break;case"inside":case"first":s=0;break;case"last":s=u.children.length;break;default:s||(s=0)}if(s>u.children.length&&(s=u.children.length),!this.check("move_node",r,u,s,{core:!0,origin:d,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(r.parent===u.id){for(p=u.children.concat(),m=e.inArray(r.id,p),m!==-1&&(p=e.vakata.array_remove(p,m),s>m&&s--),m=[],v=0,j=p.length;v<j;v++)m[v>=s?v+1:v]=p[v];m[s]=r.id,u.children=m,this._node_changed(u.id),this.redraw(u.id===e.jstree.root)}else{for(m=r.children_d.concat(),m.push(r.id),v=0,j=r.parents.length;v<j;v++){for(p=[],x=g._model.data[r.parents[v]].children_d,y=0,k=x.length;y<k;y++)e.inArray(x[y],m)===-1&&p.push(x[y]);g._model.data[r.parents[v]].children_d=p}for(g._model.data[h].children=e.vakata.array_remove_item(g._model.data[h].children,r.id),v=0,j=u.parents.length;v<j;v++)this._model.data[u.parents[v]].children_d=this._model.data[u.parents[v]].children_d.concat(m);for(p=[],v=0,j=u.children.length;v<j;v++)p[v>=s?v+1:v]=u.children[v];for(p[s]=r.id,u.children=p,u.children_d.push(r.id),u.children_d=u.children_d.concat(r.children_d),r.parent=u.id,m=u.parents.concat(),m.unshift(u.id),x=r.parents.length,r.parents=m,m=m.concat(),v=0,j=r.children_d.length;v<j;v++)this._model.data[r.children_d[v]].parents=this._model.data[r.children_d[v]].parents.slice(0,x*-1),Array.prototype.push.apply(this._model.data[r.children_d[v]].parents,m);h!==e.jstree.root&&u.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(u.id)),o||this.redraw()}return a&&a.call(this,r,u,s),this.trigger("move_node",{node:r,parent:u.id,position:s,old_parent:h,old_position:_,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id,old_instance:g,new_instance:this}),r.id},copy_node:function(r,i,s,a,n,o,d){var c,l,h,_,u,g,f,p,m,v;if(i=this.get_node(i),s=s===t?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(i))return this.load_node(i,function(){this.copy_node(r,i,s,a,!0,!1,d)});if(e.isArray(r)){if(1!==r.length){for(c=0,l=r.length;c<l;c++)(_=this.copy_node(r[c],i,s,a,n,!0,d))&&(i=_,s="after");return this.redraw(),!0}r=r[0]}if(!(r=r&&r.id?r:this.get_node(r))||r.id===e.jstree.root)return!1;switch(p=(r.parent||e.jstree.root).toString(),m=s.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,v=d||(this._model.data[r.id]?this:e.jstree.reference(r.id)),!v||!v._id||this._id!==v._id,v&&v._id&&(r=v._model.data[r.id]),i.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,m.children);break;case"after":s=e.inArray(i.id,m.children)+1;break;case"inside":case"first":s=0;break;case"last":s=m.children.length;break;default:s||(s=0)}if(s>m.children.length&&(s=m.children.length),!this.check("copy_node",r,m,s,{core:!0,origin:d,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(f=v?v.get_json(r,{no_id:!0,no_data:!0,no_state:!0}):r))return!1;if(f.id===!0&&delete f.id,!(f=this._parse_model_from_json(f,m.id,m.parents.concat())))return!1;for(_=this.get_node(f),r&&r.state&&r.state.loaded===!1&&(_.state.loaded=!1),h=[],h.push(f),h=h.concat(_.children_d),this.trigger("model",{nodes:h,parent:m.id}),u=0,g=m.parents.length;u<g;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(h);for(h=[],u=0,g=m.children.length;u<g;u++)h[u>=s?u+1:u]=m.children[u];return h[s]=_.id,m.children=h,m.children_d.push(_.id),m.children_d=m.children_d.concat(_.children_d),m.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),o||this.redraw(m.id===e.jstree.root),a&&a.call(this,_,m,s),this.trigger("copy_node",{node:_,original:r,parent:m.id,position:s,old_parent:p,old_position:v&&v._id&&p&&v._model.data[p]&&v._model.data[p].children?e.inArray(r.id,v._model.data[p].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),_.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var r,n,o,d=[];for(n=0,o=t.length;n<o;n++)(r=this.get_node(t[n]))&&r.id&&r.id!==e.jstree.root&&d.push(r);if(!d.length)return!1;i=d,a=this,s="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var r,n,o,d=[];for(n=0,o=t.length;n<o;n++)(r=this.get_node(t[n]))&&r.id&&r.id!==e.jstree.root&&d.push(r);if(!d.length)return!1;i=d,a=this,s="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:s,node:i,inst:a}},can_paste:function(){return s!==!1&&i!==!1},paste:function(e,t){if(!((e=this.get_node(e))&&s&&s.match(/^(copy_node|move_node)$/)&&i))return!1;this[s](i,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:i,mode:s}),i=!1,s=!1,a=!1},clear_buffer:function(){i=!1,s=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,r,i){var s,a,n,o,c,l,h,_,u,g=!1;return!!(t=this.get_node(t))&&(this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(u=t,r="string"==typeof r?r:t.text,this.set_text(t,""),t=this._open_to(t),u.text=r,s=this._data.core.rtl,a=this.element.width(),this._data.core.focused=u.id,n=t.children(".jstree-anchor").focus(),o=e("<span>"),c=r,l=e("<div />",{css:{position:"absolute",top:"-200px",left:s?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=e("<input />",{value:c,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(r){r.stopImmediatePropagation(),r.preventDefault();var s,a=o.children(".jstree-rename-input"),d=a.val(),_=this.settings.core.force_text;""===d&&(d=c),l.remove(),o.replaceWith(n),o.remove(),c=_?c:e("<div></div>").append(e.parseHTML(c)).html(),this.set_text(t,c),s=!!this.rename_node(t,_?e("<div></div>").text(d).text():e("<div></div>").append(e.parseHTML(d)).html()),s||this.set_text(t,c),this._data.core.focused=u.id,setTimeout(e.proxy(function(){var e=this.get_node(u.id,!0);e.length&&(this._data.core.focused=u.id,e.children(".jstree-anchor").focus())},this),0),i&&i.call(this,u,s,g),h=null},this),keydown:function(e){var t=e.which;27===t&&(g=!0,this.value=c),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(e){if(13===e.which)return!1}}),_={fontFamily:n.css("fontFamily")||"",fontSize:n.css("fontSize")||"",fontWeight:n.css("fontWeight")||"",
fontStyle:n.css("fontStyle")||"",fontStretch:n.css("fontStretch")||"",fontVariant:n.css("fontVariant")||"",letterSpacing:n.css("letterSpacing")||"",wordSpacing:n.css("wordSpacing")||""},o.attr("class",n.attr("class")).append(n.contents().clone()).append(h),n.replaceWith(o),l.css(_),h.css(_).width(Math.min(l.text("pW"+h[0].value).width(),a))[0].select(),void e(d).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){h&&t.target!==h&&e(h).blur()})))},set_theme:function(t,r){if(!t)return!1;if(r===!0){var i=this.settings.core.themes.dir;i||(i=e.jstree.path+"/themes"),r=i+"/"+t+"/style.css"}r&&e.inArray(r,n)===-1&&(e("head").append('<link rel="stylesheet" href="'+r+'" type="text/css" />'),n.push(r)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(r,i){var s,a,n,o;if(e.isArray(r)){for(r=r.slice(),s=0,a=r.length;s<a;s++)this.set_icon(r[s],i);return!0}return!(!(r=this.get_node(r))||r.id===e.jstree.root)&&(o=r.icon,r.icon=i===!0||null===i||i===t||""===i||i,n=this.get_node(r,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(r):i===!0||null===i||i===t||""===i?(n.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),o===!1&&this.show_icon(r)):i.indexOf("/")===-1&&i.indexOf(".")===-1?(n.removeClass(o).css("background",""),n.addClass(i+" jstree-themeicon-custom").attr("rel",i),o===!1&&this.show_icon(r)):(n.removeClass(o).css("background",""),n.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),o===!1&&this.show_icon(r)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.hide_icon(t[r]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.show_icon(t[r]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(s=this.get_node(t,!0),t.icon=!s.length||s.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),s.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,r){t=e(t)[0];var i=r?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,s){e.inArray(s.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==s.value&&""!==e.trim(s.value)&&(r?i[s.name]=s.value:i.push(s.name))}),i},e.vakata.array_unique=function(e){var r,i,s=[],a={};for(r=0,i=e.length;r<i;r++)a[e[r]]===t&&(s.push(e[r]),a[e[r]]=!0);return s},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,r){var i=e.inArray(r,t);return i!==-1?e.vakata.array_remove(t,i):t},e.vakata.array_filter=function(e,t,r,i,s){if(e.filter)return e.filter(t,r);i=[];for(s in e)~~s+""==s+""&&s>=0&&t.call(r,e[s],+s,e)&&i.push(e[s]);return i},e.jstree.plugins.changed=function(e,t){var r=[];this.trigger=function(e,i){var s,a;if(i||(i={}),"changed"===e.replace(".jstree","")){i.changed={selected:[],deselected:[]};var n={};for(s=0,a=r.length;s<a;s++)n[r[s]]=1;for(s=0,a=i.selected.length;s<a;s++)n[i.selected[s]]?n[i.selected[s]]=2:i.changed.selected.push(i.selected[s]);for(s=0,a=r.length;s<a;s++)1===n[r[s]]&&i.changed.deselected.push(r[s]);r=i.selected.slice()}t.trigger.call(this,e,i)},this.refresh=function(e,i){return r=[],t.refresh.apply(this,arguments)}};var c=d.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(r,i){this.bind=function(){i.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var r,i,s=this._model.data,a=(s[t.parent],t.nodes);for(r=0,i=a.length;r<i;r++)s[a[r]].state.checked=s[a[r]].state.checked||s[a[r]].original&&s[a[r]].original.state&&s[a[r]].original.state.checked,s[a[r]].state.checked&&this._data.checkbox.selected.push(a[r])},this)),this.settings.checkbox.cascade.indexOf("up")===-1&&this.settings.checkbox.cascade.indexOf("down")===-1||this.element.on("model.jstree",e.proxy(function(t,r){var i,s,a,n,o,d,c=this._model.data,l=c[r.parent],h=r.nodes,_=[],u=this.settings.checkbox.cascade,g=this.settings.checkbox.tie_selection;if(u.indexOf("down")!==-1)if(l.state[g?"selected":"checked"]){for(s=0,a=h.length;s<a;s++)c[h[s]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(h)}else for(s=0,a=h.length;s<a;s++)if(c[h[s]].state[g?"selected":"checked"]){for(n=0,o=c[h[s]].children_d.length;n<o;n++)c[c[h[s]].children_d[n]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(c[h[s]].children_d)}if(u.indexOf("up")!==-1){for(s=0,a=l.children_d.length;s<a;s++)c[l.children_d[s]].children.length||_.push(c[l.children_d[s]].parent);for(_=e.vakata.array_unique(_),n=0,o=_.length;n<o;n++)for(l=c[_[n]];l&&l.id!==e.jstree.root;){for(i=0,s=0,a=l.children.length;s<a;s++)i+=c[l.children[s]].state[g?"selected":"checked"];if(i!==a)break;l.state[g?"selected":"checked"]=!0,this._data[g?"core":"checkbox"].selected.push(l.id),(d=this.get_node(l,!0))&&d.length&&d.attr("aria-selected",!0).children(".jstree-anchor").addClass(g?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}}this._data[g?"core":"checkbox"].selected=e.vakata.array_unique(this._data[g?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,r){var i,s,a,n,o=r.node,d=this._model.data,c=this.get_node(o.parent),l=this.get_node(o,!0),h=this.settings.checkbox.cascade,_=this.settings.checkbox.tie_selection,u={},g=this._data[_?"core":"checkbox"].selected;for(i=0,s=g.length;i<s;i++)u[g[i]]=!0;if(h.indexOf("down")!==-1)for(i=0,s=o.children_d.length;i<s;i++)u[o.children_d[i]]=!0,n=d[o.children_d[i]],n.state[_?"selected":"checked"]=!0,n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1);if(h.indexOf("up")!==-1)for(;c&&c.id!==e.jstree.root;){for(a=0,i=0,s=c.children.length;i<s;i++)a+=d[c.children[i]].state[_?"selected":"checked"];if(a!==s)break;c.state[_?"selected":"checked"]=!0,u[c.id]=!0,(n=this.get_node(c,!0))&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}g=[];for(i in u)u.hasOwnProperty(i)&&g.push(i);this._data[_?"core":"checkbox"].selected=g,h.indexOf("down")!==-1&&l.length&&l.find(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,r){var i,s,a,n=this.get_node(e.jstree.root),o=this._model.data;for(i=0,s=n.children_d.length;i<s;i++)(a=o[n.children_d[i]])&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,r){var i,s,a,n=r.node,o=this.get_node(n,!0),d=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection,l=this._data[c?"core":"checkbox"].selected,h={};if(n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1),d.indexOf("down")!==-1)for(i=0,s=n.children_d.length;i<s;i++)a=this._model.data[n.children_d[i]],a.state[c?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1);if(d.indexOf("up")!==-1)for(i=0,s=n.parents.length;i<s;i++)a=this._model.data[n.parents[i]],a.state[c?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),(a=this.get_node(n.parents[i],!0))&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked");for(h={},i=0,s=l.length;i<s;i++)d.indexOf("down")!==-1&&e.inArray(l[i],n.children_d)!==-1||d.indexOf("up")!==-1&&e.inArray(l[i],n.parents)!==-1||(h[l[i]]=!0);l=[];for(i in h)h.hasOwnProperty(i)&&l.push(i);this._data[c?"core":"checkbox"].selected=l,d.indexOf("down")!==-1&&o.length&&o.find(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",e.proxy(function(t,r){for(var i,s,a,n,o=this.get_node(r.parent),d=this._model.data,c=this.settings.checkbox.tie_selection;o&&o.id!==e.jstree.root&&!o.state[c?"selected":"checked"];){for(a=0,i=0,s=o.children.length;i<s;i++)a+=d[o.children[i]].state[c?"selected":"checked"];if(!(s>0&&a===s))break;o.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(o.id),(n=this.get_node(o,!0))&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,r){var i,s,a,n,o,d=r.is_multi,c=r.old_parent,l=this.get_node(r.parent),h=this._model.data,_=this.settings.checkbox.tie_selection;if(!d)for(i=this.get_node(c);i&&i.id!==e.jstree.root&&!i.state[_?"selected":"checked"];){for(s=0,a=0,n=i.children.length;a<n;a++)s+=h[i.children[a]].state[_?"selected":"checked"];if(!(n>0&&s===n))break;i.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=l;i&&i.id!==e.jstree.root;){for(s=0,a=0,n=i.children.length;a<n;a++)s+=h[i.children[a]].state[_?"selected":"checked"];if(s===n)i.state[_?"selected":"checked"]||(i.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"));else{if(!i.state[_?"selected":"checked"])break;i.state[_?"selected":"checked"]=!1,this._data[_?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[_?"core":"checkbox"].selected,i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(_?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}},this))},this._undetermined=function(){if(null!==this.element){var r,i,s,a,n={},o=this._model.data,d=this.settings.checkbox.tie_selection,c=this._data[d?"core":"checkbox"].selected,l=[],h=this;for(r=0,i=c.length;r<i;r++)if(o[c[r]]&&o[c[r]].parents)for(s=0,a=o[c[r]].parents.length;s<a&&n[o[c[r]].parents[s]]===t;s++)o[c[r]].parents[s]!==e.jstree.root&&(n[o[c[r]].parents[s]]=!0,l.push(o[c[r]].parents[s]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var d,c=h.get_node(this);if(c.state.loaded){for(r=0,i=c.children_d.length;r<i;r++)if(d=o[c.children_d[r]],!d.state.loaded&&d.original&&d.original.state&&d.original.state.undetermined&&d.original.state.undetermined===!0)for(n[d.id]===t&&d.id!==e.jstree.root&&(n[d.id]=!0,l.push(d.id)),s=0,a=d.parents.length;s<a;s++)n[d.parents[s]]===t&&d.parents[s]!==e.jstree.root&&(n[d.parents[s]]=!0,l.push(d.parents[s]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&c.original.state.undetermined===!0)for(n[c.id]===t&&c.id!==e.jstree.root&&(n[c.id]=!0,l.push(c.id)),s=0,a=c.parents.length;s<a;s++)n[c.parents[s]]===t&&c.parents[s]!==e.jstree.root&&(n[c.parents[s]]=!0,l.push(c.parents[s]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),r=0,i=l.length;r<i;r++)o[l[r]].state[d?"selected":"checked"]||(c=this.get_node(l[r],!0))&&c.length&&c.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,r,s,a){if(t=i.redraw_node.apply(this,arguments)){var n,o,d=null,l=null;for(n=0,o=t.childNodes.length;n<o;n++)if(t.childNodes[n]&&t.childNodes[n].className&&t.childNodes[n].className.indexOf("jstree-anchor")!==-1){d=t.childNodes[n];break}d&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(d.className+=" jstree-checked"),l=c.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(l.className+=" jstree-checkbox-disabled"),d.insertBefore(l,d.childNodes[0]))}return s||this.settings.checkbox.cascade.indexOf("undetermined")===-1||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var r,i,s=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,n=this._data[a?"core":"checkbox"].selected,o=this._model.data;if(!t||t.state[a?"selected":"checked"]===!0||s.indexOf("undetermined")===-1||s.indexOf("down")===-1&&s.indexOf("up")===-1)return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(r=0,i=t.children_d.length;r<i;r++)if(e.inArray(t.children_d[r],n)!==-1||!o[t.children_d[r]].state.loaded&&o[t.children_d[r]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.disable_checkbox(t[r]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;s=this.get_node(t,!0),t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))},this.enable_checkbox=function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.enable_checkbox(t[r]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;s=this.get_node(t,!0),t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))},this.activate_node=function(t,r){return!e(r.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(r.target).hasClass("jstree-checkbox"))&&(r.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(r.target).hasClass("jstree-checkbox")?i.activate_node.call(this,t,r):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,r):this.check_node(t,r),void this.trigger("activate_node",{node:this.get_node(t)})))},this.check_node=function(t,r){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,r);var i,s,a;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.check_node(t[s],r);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;i=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:r}))},this.uncheck_node=function(t,r){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,r);var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.uncheck_node(t[i],r);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:r}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,r;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,r=this._data.checkbox.selected.length;t<r;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,r=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:r})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var r,i,s,a,n=this.get_checked(!0),o={};for(r=0,i=n.length;r<i;r++)o[n[r].id]=n[r];for(r=0,i=n.length;r<i;r++)for(s=0,a=n[r].children_d.length;s<a;s++)o[n[r].children_d[s]]&&delete o[n[r].children_d[s]];n=[];for(r in o)o.hasOwnProperty(r)&&n.push(r);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var r,i,s=this.get_checked(!0),a=[];for(r=0,i=s.length;r<i;r++)s[r].children.length||a.push(s[r].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.load_node=function(t,r){var s,a,n;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(n=this.get_node(t))&&n.state.loaded)for(s=0,a=n.children_d.length;s<a;s++)this._model.data[n.children_d[s]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,n.children_d[s]));return i.load_node.apply(this,arguments)},this.get_state=function(){var e=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,r){var s=i.set_state.apply(this,arguments);if(s&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var a=this;e.each(t.checkbox,function(e,t){a.check_node(t)})}return delete t.checkbox,this.set_state(t,r),!1}return s},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),i.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,r){this.settings.conditionalselect.call(this,this.get_node(e),r)&&t.activate_node.call(this,e,r)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,r){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.create_node(i,{},"last",function(e){setTimeout(function(){r.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.delete_node(r.get_selected()):r.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.cut(r.get_top_selected()):r.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.copy(r.get_top_selected()):r.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.paste(i)}}}}}}},e.jstree.plugins.contextmenu=function(r,i){this.bind=function(){i.bind.call(this);var t,r,s=0,a=null;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),s=e.ctrlKey?+new Date:0,(t||a)&&(s=+new Date+1e4),a&&clearTimeout(a),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!s||+new Date-s>250)&&e.vakata.context.hide(),s=0},this)).on("touchstart.jstree",".jstree-anchor",function(i){i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(t=i.originalEvent.changedTouches[0].clientX,r=i.originalEvent.changedTouches[0].clientY,a=setTimeout(function(){e(i.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){a&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(r-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(a)}).on("touchend.vakata.jstree",function(e){a&&clearTimeout(a)}),e(d).on("context_hide.vakata.jstree",e.proxy(function(t,r){this._data.contextmenu.visible=!1,e(r.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(r,i,s,a){if(!(r=this.get_node(r))||r.id===e.jstree.root)return!1;var n=this.settings.contextmenu,o=this.get_node(r,!0),d=o.children(".jstree-anchor"),c=!1,l=!1;(n.show_at_node||i===t||s===t)&&(c=d.offset(),i=c.left,s=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(r)&&this.activate_node(r,a),l=n.items,e.isFunction(l)&&(l=l.call(this,r,e.proxy(function(e){this._show_contextmenu(r,i,s,e)},this))),e.isPlainObject(l)&&this._show_contextmenu(r,i,s,l)},this._show_contextmenu=function(t,r,i,s){var a=this.get_node(t,!0),n=a.children(".jstree-anchor");e(d).one("context_show.vakata.jstree",e.proxy(function(t,r){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(r.element).addClass(i),n.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(n,{x:r,y:i},s),this.trigger("show_contextmenu",{node:t,x:r,y:i})}},function(e){var t=!1,r={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(d).triggerHandler("context_"+t+".vakata",{reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}})},_execute:function(t){return!(!(t=r.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:r.reference,element:r.element}))||!t.action)&&t.action.call(null,{item:t,reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}})},_parse:function(t,i){if(!t)return!1;i||(r.html="",r.items=[]);var s,a="",n=!1;return i&&(a+="<ul>"),e.each(t,function(t,i){if(!i)return!0;r.items.push(i),!n&&i.separator_before&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),n=!1,a+="<li class='"+(i._class||"")+(i._disabled===!0||e.isFunction(i._disabled)&&i._disabled({item:i,reference:r.reference,element:r.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",a+="<a href='#' rel='"+(r.items.length-1)+"' "+(i.title?"title='"+i.title+"'":"")+">",e.vakata.context.settings.icons&&(a+="<i ",i.icon&&(i.icon.indexOf("/")!==-1||i.icon.indexOf(".")!==-1?a+=" style='background:url(\""+i.icon+"\") center center no-repeat' ":a+=" class='"+i.icon+"' "),a+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),a+=(e.isFunction(i.label)?i.label({item:t,reference:r.reference,element:r.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(s=e.vakata.context._parse(i.submenu,!0))&&(a+=s),a+="</li>",i.separator_after&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",n=!0)}),a=a.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(a+="</ul>"),i||(r.html=a,e.vakata.context._trigger("parse")),a.length>10&&a},_show_submenu:function(r){if(r=e(r),r.length&&r.children("ul").length){var i=r.children("ul"),s=r.offset().left,a=s+r.outerWidth(),n=r.offset().top,o=i.width(),d=i.height(),c=e(window).width()+e(window).scrollLeft(),l=e(window).height()+e(window).scrollTop();t?r[a-(o+10+r.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):r[a+o>c&&s>c-a?"addClass":"removeClass"]("vakata-context-right"),n+d+10>l&&i.css("bottom","-1px"),r.hasClass("vakata-context-right")?s<o&&i.css("margin-right",s-o):c-a<o&&i.css("margin-left",c-a-o),i.show()}},show:function(i,s,a){var n,o,d,c,l,h,_,u;switch(r.element&&r.element.length&&r.element.width(""),!0){case!s&&!i:return!1;case!!s&&!!i:r.reference=i,r.position_x=s.x,r.position_y=s.y;break;case!s&&!!i:r.reference=i,n=i.offset(),r.position_x=n.left+i.outerHeight(),r.position_y=n.top;break;case!!s&&!i:r.position_x=s.x,r.position_y=s.y}i&&!a&&e(i).data("vakata_contextmenu")&&(a=e(i).data("vakata_contextmenu")),e.vakata.context._parse(a)&&r.element.html(r.html),r.items.length&&(r.element.appendTo("body"),o=r.element,d=r.position_x,c=r.position_y,l=o.width(),h=o.height(),_=e(window).width()+e(window).scrollLeft(),u=e(window).height()+e(window).scrollTop(),t&&(d-=o.outerWidth()-e(i).outerWidth())<e(window).scrollLeft()+20&&(d=e(window).scrollLeft()+20),d+l+20>_&&(d=_-(l+20)),c+h+20>u&&(c=u-(h+20)),r.element.css({left:d,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),r.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){r.is_visible&&(r.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),r.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var i=!1;r.element=e("<ul class='vakata-context'></ul>"),r.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(i&&clearTimeout(i),r.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(i=setTimeout(function(t){return function(){e.vakata.context.hide()}}(),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var i=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:r.is_visible&&(r.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:r.is_visible&&(i=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),
i.length||(i=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:r.is_visible&&(r.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:r.is_visible&&(i=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),i.length||(i=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=r.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(d).on("mousedown.vakata.jstree",function(t){r.is_visible&&!e.contains(r.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,i){r.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&r.element.addClass("vakata-context-rtl").css("direction","rtl"),r.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var l,h;e.jstree.plugins.dnd=function(t,r){this.init=function(e,t){r.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in d.createElement("span")},this.bind=function(){r.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var r=this.get_node(t.target),i=this.is_selected(r)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,s=i>1?i+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(s=e.vakata.html.escape(s)),r&&r.id&&r.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_top_selected(!0):[r],t))){if(l={jstree:!0,origin:this,obj:this.get_node(r,!0),nodes:i>1?this.get_top_selected():[r.id]},h=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,l,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+s+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:h,data:l})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:h,data:l}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:h,data:l}),!1},this))},this.redraw_node=function(e,t,i,s){if((e=r.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var a,n,o=null;for(a=0,n=e.childNodes.length;a<n;a++)if(e.childNodes[a]&&e.childNodes[a].className&&e.childNodes[a].className.indexOf("jstree-anchor")!==-1){o=e.childNodes[a];break}o&&o.setAttribute("draggable",!0)}return e}},e(function(){var r=!1,i=!1,s=!1,a=!1,n=e('<div id="jstree-marker">&#160;</div>').hide();e(d).on("dnd_start.vakata.jstree",function(e,t){r=!1,s=!1,t&&t.data&&t.data.jstree&&n.appendTo("body")}).on("dnd_move.vakata.jstree",function(o,d){if(a&&(d.event&&"dragover"===d.event.type&&d.event.target===s.target||clearTimeout(a)),d&&d.data&&d.data.jstree&&(!d.event.target.id||"jstree-marker"!==d.event.target.id)){s=d.event;var c,l,h,_,u,g,f,p,m,v,j,y,k,x,b,w,C=e.jstree.reference(d.event.target),T=!1,O=!1,A=!1;if(C&&C._data&&C._data.dnd)if(n.attr("class","jstree-"+C.get_theme()+(C.settings.core.themes.responsive?" jstree-dnd-responsive":"")),b=d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey)),d.helper.children().attr("class","jstree-"+C.get_theme()+" jstree-"+C.get_theme()+"-"+C.get_theme_variant()+" "+(C.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[b?"show":"hide"](),d.event.target!==C.element[0]&&d.event.target!==C.get_container_ul()[0]||0!==C.get_container_ul().children().length){if((T=C.settings.dnd.large_drop_target?e(d.event.target).closest(".jstree-node").children(".jstree-anchor"):e(d.event.target).closest(".jstree-anchor"))&&T.length&&T.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(O=T.offset(),A=(d.event.pageY!==t?d.event.pageY:d.event.originalEvent.pageY)-O.top,h=T.outerHeight(),g=A<h/3?["b","i","a"]:A>h-h/3?["a","i","b"]:A>h/2?["i","a","b"]:["i","b","a"],e.each(g,function(t,s){switch(s){case"b":c=O.left-6,l=O.top,_=C.get_parent(T),u=T.parent().index();break;case"i":k=C.settings.dnd.inside_pos,x=C.get_node(T.parent()),c=O.left-2,l=O.top+h/2+1,_=x.id,u="first"===k?0:"last"===k?x.children.length:Math.min(k,x.children.length);break;case"a":c=O.left-6,l=O.top+h,_=C.get_parent(T),u=T.parent().index()+1}for(f=!0,p=0,m=d.data.nodes.length;p<m;p++)if(v=d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey))?"copy_node":"move_node",j=u,"move_node"===v&&"a"===s&&d.data.origin&&d.data.origin===C&&_===C.get_parent(d.data.nodes[p])&&(y=C.get_node(_),j>e.inArray(d.data.nodes[p],y.children)&&(j-=1)),!(f=f&&(C&&C.settings&&C.settings.dnd&&C.settings.dnd.check_while_dragging===!1||C.check(v,d.data.origin&&d.data.origin!==C?d.data.origin.get_node(d.data.nodes[p]):d.data.nodes[p],_,j,{dnd:!0,ref:C.get_node(T.parent()),pos:s,origin:d.data.origin,is_multi:d.data.origin&&d.data.origin!==C,is_foreign:!d.data.origin})))){C&&C.last_error&&(i=C.last_error());break}if("i"===s&&T.parent().is(".jstree-closed")&&C.settings.dnd.open_timeout&&(a=setTimeout(function(e,t){return function(){e.open_node(t)}}(C,T),C.settings.dnd.open_timeout)),f)return w=C.get_node(_,!0),w.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),r={ins:C,par:_,pos:"i"!==s||"last"!==k||0!==u||C.is_loaded(x)?u:"last"},n.css({left:c+"px",top:l+"px"}).show(),d.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),d.event.originalEvent&&d.event.originalEvent.dataTransfer&&(d.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"),i={},g=!0,!1}),g===!0))return}else{for(f=!0,p=0,m=d.data.nodes.length;p<m&&(f=f&&C.check(d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey))?"copy_node":"move_node",d.data.origin&&d.data.origin!==C?d.data.origin.get_node(d.data.nodes[p]):d.data.nodes[p],e.jstree.root,"last",{dnd:!0,ref:C.get_node(e.jstree.root),pos:"i",origin:d.data.origin,is_multi:d.data.origin&&d.data.origin!==C,is_foreign:!d.data.origin}));p++);if(f)return r={ins:C,par:e.jstree.root,pos:"last"},n.hide(),d.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(d.event.originalEvent&&d.event.originalEvent.dataTransfer&&(d.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),r=!1,d.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),d.event.originalEvent&&d.event.originalEvent.dataTransfer&&(d.event.originalEvent.dataTransfer.dropEffect="none"),n.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(n.hide(),r=!1,s=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,o){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),a&&clearTimeout(a),o&&o.data&&o.data.jstree){n.hide().detach();var d,c,l=[];if(r){for(d=0,c=o.data.nodes.length;d<c;d++)l[d]=o.data.origin?o.data.origin.get_node(o.data.nodes[d]):o.data.nodes[d];r.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](l,r.par,r.pos,!1,!1,!1,o.data.origin)}else d=e(o.event.target).closest(".jstree"),d.length&&i&&i.error&&"check"===i.error&&(d=d.jstree(!0))&&d.settings.core.error.call(this,i);s=!1,r=!1}}).on("keyup.jstree keydown.jstree",function(t,o){(o=e.vakata.dnd._get())&&o.data&&o.data.jstree&&("keyup"===t.type&&27===t.which?(a&&clearTimeout(a),r=!1,i=!1,s=!1,a=!1,n.hide().detach(),e.vakata.dnd._clean()):(o.helper.find(".jstree-copy").first()[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),s&&(s.metaKey=t.metaKey,s.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",s))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var r={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(r,i,s){s===t&&(s=e.vakata.dnd._get()),s.event=i,e(d).triggerHandler("dnd_"+r+".vakata",s)},_get:function(){return{data:r.data,element:r.element,helper:r.helper}},_clean:function(){r.helper&&r.helper.remove(),r.scroll_i&&(clearInterval(r.scroll_i),r.scroll_i=!1),r={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(d).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(d).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!r.scroll_e||!r.scroll_l&&!r.scroll_t)return r.scroll_i&&(clearInterval(r.scroll_i),r.scroll_i=!1),!1;if(!r.scroll_i)return r.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var i=r.scroll_e.scrollTop(),s=r.scroll_e.scrollLeft();r.scroll_e.scrollTop(i+r.scroll_t*e.vakata.dnd.settings.scroll_speed),r.scroll_e.scrollLeft(s+r.scroll_l*e.vakata.dnd.settings.scroll_speed),i===r.scroll_e.scrollTop()&&s===r.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",r.scroll_e)},start:function(t,i,s){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return r.init_x=t.pageX,r.init_y=t.pageY,r.data=i,r.is_down=!0,r.element=t.currentTarget,r.target=t.target,r.is_touch="touchstart"===t.type,s!==!1&&(r.helper=e("<div id='vakata-dnd'></div>").html(s).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(d).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(d).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_down){if(!r.is_drag){if(!(Math.abs(t.pageX-r.init_x)>(r.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-r.init_y)>(r.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;r.helper&&(r.helper.appendTo("body"),r.helper_w=r.helper.outerWidth()),r.is_drag=!0,e(r.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var i=!1,s=!1,a=!1,n=!1,o=!1,c=!1,l=!1,h=!1,_=!1,u=!1;return r.scroll_t=0,r.scroll_l=0,r.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var i=e(this),s=i.offset();if(this.scrollHeight>this.offsetHeight&&(s.top+i.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=1),t.pageY-s.top<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(s.left+i.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=1),t.pageX-s.left<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=-1)),r.scroll_t||r.scroll_l)return r.scroll_e=e(this),!1}),r.scroll_e||(i=e(d),s=e(window),a=i.height(),n=s.height(),o=i.width(),c=s.width(),l=i.scrollTop(),h=i.scrollLeft(),a>n&&t.pageY-l<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=-1),a>n&&n-(t.pageY-l)<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=1),o>c&&t.pageX-h<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=-1),o>c&&c-(t.pageX-h)<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=1),(r.scroll_t||r.scroll_l)&&(r.scroll_e=i)),r.scroll_e&&e.vakata.dnd._scroll(!0),r.helper&&(_=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),u=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),a&&_+25>a&&(_=a-50),o&&u+r.helper_w>o&&(u=o-(r.helper_w+2)),r.helper.css({left:u+"px",top:_+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_drag)t.target!==r.target&&e(r.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===r.target){var i=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){i&&clearTimeout(i)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,r){this.init=function(e,t){this._data.massload={},r.init.call(this,e,t)},this._load_nodes=function(t,i,s,a){var n,o,d,c=this.settings.massload,l=(JSON.stringify(t),[]),h=this._model.data;if(!s){for(n=0,o=t.length;n<o;n++)h[t[n]]&&(h[t[n]].state.loaded||h[t[n]].state.failed)&&!a||(l.push(t[n]),(d=this.get_node(t[n],!0))&&d.length&&d.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},l.length){if(e.isFunction(c))return c.call(this,l,e.proxy(function(e){var n,o;if(e)for(n in e)e.hasOwnProperty(n)&&(this._data.massload[n]=e[n]);for(n=0,o=t.length;n<o;n++)(d=this.get_node(t[n],!0))&&d.length&&d.removeClass("jstree-loading").attr("aria-busy",!1);r._load_nodes.call(this,t,i,s,a)},this));if("object"==typeof c&&c&&c.url)return c=e.extend(!0,{},c),e.isFunction(c.url)&&(c.url=c.url.call(this,l)),e.isFunction(c.data)&&(c.data=c.data.call(this,l)),e.ajax(c).done(e.proxy(function(e,n,o){var c,l;if(e)for(c in e)e.hasOwnProperty(c)&&(this._data.massload[c]=e[c]);for(c=0,l=t.length;c<l;c++)(d=this.get_node(t[c],!0))&&d.length&&d.removeClass("jstree-loading").attr("aria-busy",!1);r._load_nodes.call(this,t,i,s,a)},this)).fail(e.proxy(function(e){r._load_nodes.call(this,t,i,s,a)},this))}}return r._load_nodes.call(this,t,i,s,a)},this._load_node=function(t,i){var s,a=this._data.massload[t.id],n=null;return a?(n=this["string"==typeof a?"_append_html_data":"_append_json_data"](t,"string"==typeof a?e(e.parseHTML(a)).filter(function(){return 3!==this.nodeType}):a,function(e){i.call(this,e)}),s=this.get_node(t.id,!0),s&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],n):r._load_node.call(this,t,i)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(r,i){this.bind=function(){i.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,r){if(this._data.search.som&&r.res.length){var i,s,a,n,o=this._model.data,d=[];for(i=0,s=r.res.length;i<s;i++)if(o[r.res[i]]&&!o[r.res[i]].state.hidden&&(d.push(r.res[i]),d=d.concat(o[r.res[i]].parents),this._data.search.smc))for(a=0,n=o[r.res[i]].children_d.length;a<n;a++)o[o[r.res[i]].children_d[a]]&&!o[o[r.res[i]].children_d[a]].state.hidden&&d.push(o[r.res[i]].children_d[a]);d=e.vakata.array_remove_item(e.vakata.array_unique(d),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(d,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(r,i,s,a,n,o){if(r===!1||""===e.trim(r.toString()))return this.clear_search();a=this.get_node(a),a=a&&a.id?a.id:null,r=r.toString();var d,c,l=this.settings.search,h=!!l.ajax&&l.ajax,_=this._model.data,u=null,g=[],f=[];if(this._data.search.res.length&&!n&&this.clear_search(),s===t&&(s=l.show_only_matches),o===t&&(o=l.show_only_matches_children),!i&&h!==!1)return e.isFunction(h)?h.call(this,r,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(r,!0,s,a,n,o)})},this),a):(h=e.extend({},h),h.data||(h.data={}),h.data.str=r,a&&(h.data.inside=a),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(h).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(h)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(r,!0,s,a,n,o)})},this)),this._data.search.lastRequest);if(n||(this._data.search.str=r,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=s,this._data.search.smc=o),u=new e.vakata.search(r,!0,{caseSensitive:l.case_sensitive,fuzzy:l.fuzzy}),e.each(_[a||e.jstree.root].children_d,function(e,t){var i=_[t];i.text&&!i.state.hidden&&(!l.search_leaves_only||i.state.loaded&&0===i.children.length)&&(l.search_callback&&l.search_callback.call(this,r,i)||!l.search_callback&&u.search(i.text).isMatch)&&(g.push(t),f=f.concat(i.parents))}),g.length){for(f=e.vakata.array_unique(f),d=0,c=f.length;d<c;d++)f[d]!==e.jstree.root&&_[f[d]]&&this.open_node(f[d],null,0)===!0&&this._data.search.opn.push(f[d]);n?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(g,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(g))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(g,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=g),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:r,res:this._data.search.res,show_only_matches:s})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,r,s,a){if((t=i.redraw_node.apply(this,arguments))&&e.inArray(t.id,this._data.search.res)!==-1){var n,o,d=null;for(n=0,o=t.childNodes.length;n<o;n++)if(t.childNodes[n]&&t.childNodes[n].className&&t.childNodes[n].className.indexOf("jstree-anchor")!==-1){d=t.childNodes[n];break}d&&(d.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,r,i){i=i||{},i=e.extend({},e.vakata.search.defaults,i),i.fuzzy!==!1&&(i.fuzzy=!0),t=i.caseSensitive?t:t.toLowerCase();var s,a,n,o,d=i.location,c=i.distance,l=i.threshold,h=t.length;return h>32&&(i.fuzzy=!1),i.fuzzy&&(s=1<<h-1,a=function(){var e={},r=0;for(r=0;r<h;r++)e[t.charAt(r)]=0;for(r=0;r<h;r++)e[t.charAt(r)]|=1<<h-r-1;return e}(),n=function(e,t){var r=e/h,i=Math.abs(d-t);return c?r+i/c:i?1:r}),o=function(e){if(e=i.caseSensitive?e:e.toLowerCase(),t===e||e.indexOf(t)!==-1)return{isMatch:!0,score:0};if(!i.fuzzy)return{isMatch:!1,score:1};var r,o,c,_,u,g,f,p,m,v=e.length,j=l,y=e.indexOf(t,d),k=h+v,x=1,b=[];for(y!==-1&&(j=Math.min(n(0,y),j),(y=e.lastIndexOf(t,d+h))!==-1&&(j=Math.min(n(0,y),j))),y=-1,r=0;r<h;r++){for(c=0,_=k;c<_;)n(r,d+_)<=j?c=_:k=_,_=Math.floor((k-c)/2+c);for(k=_,g=Math.max(1,d-_+1),f=Math.min(d+_,v)+h,p=new Array(f+2),p[f+1]=(1<<r)-1,o=f;o>=g;o--)if(m=a[e.charAt(o-1)],p[o]=0===r?(p[o+1]<<1|1)&m:(p[o+1]<<1|1)&m|(u[o+1]|u[o])<<1|1|u[o+1],p[o]&s&&(x=n(r,o-1))<=j){if(j=x,y=o-1,b.push(y),!(y>d))break;g=Math.max(1,2*d-y)}if(n(r+1,d)>j)break;u=p}return{isMatch:y>=0,score:x}},r===!0?{search:o}:o(r)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,r){this.bind=function(){r.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,r){var i,s;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),r))for(i=0,s=t.children_d.length;i<s;i++)this.sort(t.children_d[i],!1)}};var _=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,r){this.bind=function(){r.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){_&&clearTimeout(_),_=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,r){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",function(r,i){i.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(r,i){this.init=function(r,s){var a,n;if(s&&s.types&&s.types.default)for(a in s.types)if("default"!==a&&a!==e.jstree.root&&s.types.hasOwnProperty(a))for(n in s.types.default)s.types.default.hasOwnProperty(n)&&s.types[a][n]===t&&(s.types[a][n]=s.types.default[n]);i.init.call(this,r,s),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,r){i.refresh.call(this,t,r),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(r,i){var s,a,n,o=this._model.data,d=i.nodes,c=this.settings.types,l="default";for(s=0,a=d.length;s<a;s++){if(l="default",o[d[s]].original&&o[d[s]].original.type&&c[o[d[s]].original.type]&&(l=o[d[s]].original.type),o[d[s]].data&&o[d[s]].data.jstree&&o[d[s]].data.jstree.type&&c[o[d[s]].data.jstree.type]&&(l=o[d[s]].data.jstree.type),o[d[s]].type=l,o[d[s]].icon===!0&&c[l].icon!==t&&(o[d[s]].icon=c[l].icon),c[l].li_attr!==t&&"object"==typeof c[l].li_attr)for(n in c[l].li_attr)if(c[l].li_attr.hasOwnProperty(n)){if("id"===n)continue;o[d[s]].li_attr[n]===t?o[d[s]].li_attr[n]=c[l].li_attr[n]:"class"===n&&(o[d[s]].li_attr.class=c[l].li_attr.class+" "+o[d[s]].li_attr.class)}if(c[l].a_attr!==t&&"object"==typeof c[l].a_attr)for(n in c[l].a_attr)if(c[l].a_attr.hasOwnProperty(n)){if("id"===n)continue;o[d[s]].a_attr[n]===t?o[d[s]].a_attr[n]=c[l].a_attr[n]:"href"===n&&"#"===o[d[s]].a_attr[n]?o[d[s]].a_attr.href=c[l].a_attr.href:"class"===n&&(o[d[s]].a_attr.class=c[l].a_attr.class+" "+o[d[s]].a_attr.class)}}o[e.jstree.root].type=e.jstree.root},this)),i.bind.call(this)},this.get_json=function(t,r,s){var a,n,o=this._model.data,d=r?e.extend(!0,{},r,{no_id:!1}):{},c=i.get_json.call(this,t,d,s);if(c===!1)return!1;if(e.isArray(c))for(a=0,n=c.length;a<n;a++)c[a].type=c[a].id&&o[c[a].id]&&o[c[a].id].type?o[c[a].id].type:"default",r&&r.no_id&&(delete c[a].id,c[a].li_attr&&c[a].li_attr.id&&delete c[a].li_attr.id,c[a].a_attr&&c[a].a_attr.id&&delete c[a].a_attr.id);else c.type=c.id&&o[c.id]&&o[c.id].type?o[c.id].type:"default",r&&r.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++)t[r]=this._delete_ids(t[r]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(r,s,a,n,o){if(i.check.call(this,r,s,a,n,o)===!1)return!1;s=s&&s.id?s:this.get_node(s),a=a&&a.id?a:this.get_node(a);var d,c,l,h,_=s&&s.id?o&&o.origin?o.origin:e.jstree.reference(s.id):null;switch(_=_&&_._model&&_._model.data?_._model.data:null,r){case"create_node":case"move_node":case"copy_node":if("move_node"!==r||e.inArray(s.id,a.children)===-1){if(d=this.get_rules(a),d.max_children!==t&&d.max_children!==-1&&d.max_children===a.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;if(d.valid_children!==t&&d.valid_children!==-1&&e.inArray(s.type||"default",d.valid_children)===-1)return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;if(_&&s.children_d&&s.parents){for(c=0,l=0,h=s.children_d.length;l<h;l++)c=Math.max(c,_[s.children_d[l]].parents.length);c=c-s.parents.length+1}(c<=0||c===t)&&(c=1);do{if(d.max_depth!==t&&d.max_depth!==-1&&d.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;a=this.get_node(a.parent),d=this.get_rules(a),c++}while(a)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var r=this.get_type(e,!0);return r.max_depth===t&&(r.max_depth=-1),r.max_children===t&&(r.max_children=-1),r.valid_children===t&&(r.valid_children=-1),r},this.get_type=function(t,r){return!!(t=this.get_node(t))&&(r?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(r,i){var s,a,n,o,d,c,l,h,_=this._model.data;if(e.isArray(r)){for(r=r.slice(),a=0,n=r.length;a<n;a++)this.set_type(r[a],i);return!0}if(s=this.settings.types,r=this.get_node(r),!s[i]||!r)return!1;if(l=this.get_node(r,!0),l&&l.length&&(h=l.children(".jstree-anchor")),o=r.type,d=this.get_icon(r),r.type=i,(d===!0||!s[o]||s[o].icon!==t&&d===s[o].icon)&&this.set_icon(r,s[i].icon===t||s[i].icon),s[o]&&s[o].li_attr!==t&&"object"==typeof s[o].li_attr)for(c in s[o].li_attr)if(s[o].li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(_[r.id].li_attr.class=(_[r.id].li_attr.class||"").replace(s[o].li_attr[c],""),l&&l.removeClass(s[o].li_attr[c])):_[r.id].li_attr[c]===s[o].li_attr[c]&&(_[r.id].li_attr[c]=null,l&&l.removeAttr(c))}if(s[o]&&s[o].a_attr!==t&&"object"==typeof s[o].a_attr)for(c in s[o].a_attr)if(s[o].a_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(_[r.id].a_attr.class=(_[r.id].a_attr.class||"").replace(s[o].a_attr[c],""),h&&h.removeClass(s[o].a_attr[c])):_[r.id].a_attr[c]===s[o].a_attr[c]&&("href"===c?(_[r.id].a_attr[c]="#",h&&h.attr("href","#")):(delete _[r.id].a_attr[c],h&&h.removeAttr(c)))}if(s[i].li_attr!==t&&"object"==typeof s[i].li_attr)for(c in s[i].li_attr)if(s[i].li_attr.hasOwnProperty(c)){if("id"===c)continue;_[r.id].li_attr[c]===t?(_[r.id].li_attr[c]=s[i].li_attr[c],l&&("class"===c?l.addClass(s[i].li_attr[c]):l.attr(c,s[i].li_attr[c]))):"class"===c&&(_[r.id].li_attr.class=s[i].li_attr[c]+" "+_[r.id].li_attr.class,l&&l.addClass(s[i].li_attr[c]))}if(s[i].a_attr!==t&&"object"==typeof s[i].a_attr)for(c in s[i].a_attr)if(s[i].a_attr.hasOwnProperty(c)){if("id"===c)continue;_[r.id].a_attr[c]===t?(_[r.id].a_attr[c]=s[i].a_attr[c],h&&("class"===c?h.addClass(s[i].a_attr[c]):h.attr(c,s[i].a_attr[c]))):"href"===c&&"#"===_[r.id].a_attr[c]?(_[r.id].a_attr.href=s[i].a_attr.href,h&&h.attr("href",s[i].a_attr.href)):"class"===c&&(_[r.id].a_attr.class=s[i].a_attr.class+" "+_[r.id].a_attr.class,h&&h.addClass(s[i].a_attr[c]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(r,i){this.check=function(t,r,s,a,n){if(i.check.call(this,t,r,s,a,n)===!1)return!1;if(r=r&&r.id?r:this.get_node(r),
!(s=s&&s.id?s:this.get_node(s))||!s.children)return!0;var o,d,c="rename_node"===t?a:r.text,l=[],h=this.settings.unique.case_sensitive,_=this._model.data;for(o=0,d=s.children.length;o<d;o++)l.push(h?_[s.children[o]].text:_[s.children[o]].text.toLowerCase());switch(h||(c=c.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return o=e.inArray(c,l)===-1||r.text&&r.text[h?"toString":"toLowerCase"]()===c,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"create_node":return o=e.inArray(c,l)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"copy_node":return o=e.inArray(c,l)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"move_node":return o=r.parent===s.id&&(!n||!n.is_multi)||e.inArray(c,l)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o}return!0},this.create_node=function(r,s,a,n,o){if(!s||s.text===t){if(null===r&&(r=e.jstree.root),!(r=this.get_node(r)))return i.create_node.call(this,r,s,a,n,o);if(a=a===t?"last":a,!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(r))return i.create_node.call(this,r,s,a,n,o);s||(s={});var d,c,l,h,_,u=this._model.data,g=this.settings.unique.case_sensitive,f=this.settings.unique.duplicate;for(c=d=this.get_string("New node"),l=[],h=0,_=r.children.length;h<_;h++)l.push(g?u[r.children[h]].text:u[r.children[h]].text.toLowerCase());for(h=1;e.inArray(g?c:c.toLowerCase(),l)!==-1;)c=f.call(this,d,++h).toString();s.text=c}return i.create_node.call(this,r,s,a,n,o)}};var u=d.createElement("DIV");if(u.setAttribute("unselectable","on"),u.setAttribute("role","presentation"),u.className="jstree-wholerow",u.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,r){this.bind=function(){r.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var r,i,s=!1;for(r=0,i=t.selected.length;r<i;r++)(s=this.get_node(t.selected[r],!0))&&s.length&&s.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var r=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var r=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var r=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var r=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),r.teardown.call(this)},this.redraw_node=function(t,i,s,a){if(t=r.redraw_node.apply(this,arguments)){var n=u.cloneNode(!0);e.inArray(t.id,this._data.core.selected)!==-1&&(n.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(n.className+=" jstree-wholerow-hovered"),t.insertBefore(n,t.childNodes[0])}return t}},d.registerElement&&Object&&Object.create){var g=Object.create(HTMLElement.prototype);g.createdCallback=function(){var t,r={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(r.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(r[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(r.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(r)};try{d.registerElement("vakata-jstree",{prototype:g})}catch(e){}}}});

},{"jquery":9}],11:[function(require,module,exports){
(function (process){
function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),r||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;u<i;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return l=l.concat(s.slice(o)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};

}).call(this,require('_process'))

},{"_process":12}],12:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],13:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r,s;s=n.shift();)for(r in s)Aa.call(s,r)&&(t[r]=s[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function s(t){return"[object Array]"===Sa.call(t)}function o(t){return Ca.test(Sa.call(t))}function a(t,e){return null===t&&null===e||"object"!=typeof t&&"object"!=typeof e&&t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===Sa.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function f(){Vb.DEBUG&&ka.apply(null,arguments)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=c(t,n),Ea(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=c(t,n),Pa[t]||(Pa[t]=!0,Ea(t,n))}function m(){Vb.DEBUG&&d.apply(null,arguments)}function v(){Vb.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var i=y(t,e,n);return i?i[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function b(t){return function(){return t}}function w(t){var e,n,i,r,s,o;for(e=t.split("."),(n=Va[e.length])||(n=x(e.length)),s=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)o=n[r].map(i).join("."),s.hasOwnProperty(o)||(s.push(o),s[o]=!0);return s}function x(t){var e,n,i,r,s,o,a,u,h="";if(!Va[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},s=0;s<=e;s+=1){for(n=s.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,o=0;o<a;o++)u.push(r(n[o]));i[s]=u}Va[t]=i}return Va[t]}function k(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function E(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Wa.hasOwnProperty(t)||(Wa[t]=new za(t)),Wa[t])}function A(t,e){function n(e,n){var i,r,o;return n.isRoot?o=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],r=i?i.get():t.viewmodel.get(n),o=r?Object.keys(r):null),o&&o.forEach(function(t){"_ractive"===t&&s(r)||e.push(n.join(t))}),e}var i,r,o;for(i=e.str.split("."),o=[qa];r=i.shift();)"*"===r?o=o.reduce(n,[]):o[0]===qa?o[0]=_(r):o=o.map(S(r));return o}function S(t){return function(e){return e.join(t)}}function C(t){return t?t.replace(Ma,".$1"):""}function O(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},A(t,_(C(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!u(i))throw new Error(Qa);r[e.str]=i+n}),t.set(r);if(i=t.get(e),!u(i))throw new Error(Qa);return t.set(e,+i+n)}function P(t,e){return $a(this,t,void 0===e?1:+e)}function T(t){this.event=t,this.method="on"+t,this.deprecate=Ya[t]}function F(t,e){t.indexOf(e)===-1&&t.push(e)}function R(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function j(t,e){var n;if(!s(t)||!s(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function D(t){return t[t.length-1]}function I(t,e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}function L(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function V(t){setTimeout(t,0)}function M(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Ja)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(t){return void i(t)}if("function"==typeof r){var s,o,a;o=function(e){s||(s=!0,U(t,e,n,i))},a=function(t){s||(s=!0,i(t))};try{r.call(e,o,a)}catch(t){if(!s)return i(t),void(s=!0)}}else n(e)}}function W(t,e,n){var i;return e=C(e),"~/"===e.substr(0,2)?(i=_(e.substring(2)),q(t,i.firstKey)):"."===e[0]?(i=z(ru(n),e))&&q(t,i.firstKey):i=B(t,_(e),n),i}function z(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function B(t,e,n,i){var r,s,o,a,u;if(e.isRoot)return e;for(s=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,(o=t.viewmodel.get(r))&&("object"==typeof o||"function"==typeof o)&&s in o))return r.join(e.str);return $(t.viewmodel,s)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,s=_(s),u=B(t.parent,s,n,!0))?(t.viewmodel.map(s,{origin:t.parent.viewmodel,keypath:u}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function q(t,e){var n;!t.parent||t.isolated||$(t.viewmodel,e)||(e=_(e),(n=B(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function $(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function Q(t){t.teardown()}function Z(t){t.unbind()}function H(t){t.unrender()}function K(t){t.cancel()}function G(t){t.detach()}function Y(t){t.detachNodes()}function J(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function X(){for(var t,e,n;au.ractives.length;)e=au.ractives.pop(),(n=e.viewmodel.applyChanges())&&lu.fire(e,n);for(tt(),t=0;t<au.views.length;t+=1)au.views[t].update();for(au.views.length=0,t=0;t<au.tasks.length;t+=1)au.tasks[t]();if(au.tasks.length=0,au.ractives.length)return X()}function tt(){var t,e,n,i;for(t=cu.length;t--;)e=cu[t],e.keypath?cu.splice(t,1):(n=su(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),cu.splice(t,1));i&&i.forEach(et)}function et(t){t.item.resolve(t.keypath)}function nt(t,e,n){var i,r,s,o,a,u,h,c,l,f,d,p,m,v;if(i=new iu(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(d={},n.step=null,n.complete=null,f=function(t){return function(e,n){d[t]=n}});for(s in t)t.hasOwnProperty(s)&&((c||l)&&(p=f(s),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:Oa,a.push(it(this,s,t[s],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,d)}),l&&i.then(function(t){return l(t,d)}),v.complete=r,m=it(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,o=it(this,t,e,n),i.stop=function(){return o.stop()},i}function it(t,e,n,i){var r,s,o,u;return e&&(e=_(C(e))),null!==e&&(u=t.viewmodel.get(e)),mu.abort(e,t),a(u,n)?(i.complete&&i.complete(i.to),bu):(i.easing&&"function"!=typeof(r="function"==typeof i.easing?i.easing:t.easing[i.easing])&&(r=null),s=void 0===i.duration?400:i.duration,o=new gu({keypath:e,from:u,to:n,root:t,duration:s,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),mu.add(o),t._animations.push(o),o)}function rt(){return this.detached?this.detached:(this.el&&I(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),xu.fire(this),this.detached)}function st(t){return this.el?this.fragment.find(t):null}function ot(t,e){if(this._isComponentQuery?!this.selector||t.name===this.selector:t.node?la(t.node,this.selector):null)return this.push(t.node||t.instance),e||this._makeDirty(),!0}function at(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ut(t){var e,n;for(e=[t],n=at(t);n;)e.push(n),n=at(n);return e}function ht(t,e,n,i){var r=[];return xa(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:Eu}}),n?(xa(r,{cancel:{value:_u},_root:{value:t},_sort:{value:Cu},_makeDirty:{value:Ou},_remove:{value:Pu},_dirty:{value:!1,writable:!0}}),r):r}function ct(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Tu(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function lt(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Tu(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function ft(t){return this.fragment.findComponent(t)}function dt(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function pt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function mt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};vt(t,_(e).wildcardMatches(),n.event,n.args,!0)}}function vt(t,e,n,i){var r,s,o=void 0!==arguments[4]&&arguments[4],a=!0;for(Lu.enqueue(t,n),s=e.length;s>=0;s--)(r=t._subs[e[s]])&&(a=gt(t,r,n,i)&&a);if(Lu.dequeue(t),t.parent&&a){if(o&&t.component){e=_(t.component.name+"."+e[e.length-1]).wildcardMatches(),n&&(n.component=t)}vt(t.parent,e,n,i)}}function gt(t,e,n,i){var r=null,s=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var o=0,a=e.length;o<a;o+=1)e[o].apply(t,i)===!1&&(s=!0);return n&&!n._noArg&&s&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function yt(t){var e={args:Array.prototype.slice.call(arguments,1)};Vu(this,t,e)}function bt(t){var e;return t=_(C(t)),e=this.viewmodel.get(t,Wu),void 0===e&&this.parent&&!this.isolated&&su(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function wt(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,xt(this)}function xt(t){Bu.fire(t),t.findAllComponents("*").forEach(function(t){xt(t.instance)})}function kt(t,e,n){var i,r;return t=_(C(t)),i=this.viewmodel.get(t),s(i)&&s(e)?(r=fu.start(this,!0),this.viewmodel.merge(t,i,e,n),fu.end(),r):this.set(t,e,n&&n.complete)}function Et(t,e){var n,i;return n=A(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function _t(t,e,n,i){var r,s,o;e=_(C(e)),i=i||rh,e.isPattern?(r=new nh(t,e,n,i),t.viewmodel.patternObservers.push(r),s=!0):r=new Zu(t,e,n,i),r.init(i.init),t.viewmodel.register(e,r,s?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;o||(s?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),o=!0)}};return t._observers.push(a),a}function At(t,e,n){var i,r,s,o;if(h(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",ih(this,t,e,n);if(s=t.split(" "),1===s.length)return ih(this,t,e,n);for(i=[],o=s.length;o--;)(t=s[o])&&i.push(ih(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function St(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ct(t,e){var n,i=this;if(t)n=t.split(" ").map(ah).filter(uh),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e))!==-1&&n.splice(r,1):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Ot(t,e){var n,i,r,s=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(ah).filter(uh),r.forEach(function(t){(s._subs[t]||(s._subs[t]=[])).push(e)}),{cancel:function(){return s.off(t,e)}}}function Pt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Tt(t,e,n){var i,r,s,o,a,u,h=[];if(!(i=Ft(t,e,n)))return null;for(r=t.length,a=i.length-2-i[1],s=Math.min(r,i[0]),o=s+i[1],u=0;u<s;u+=1)h.push(u);for(;u<o;u+=1)h.push(-1);for(;u<r;u+=1)h.push(u+a);return h.touchedFrom=0!==a?i[0]:t.length,h}function Ft(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function Rt(e,n){var i,r,s,o=this;if(s=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=fu.start(this,!0),fu.scheduleTask(function(){return Eh.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&jt(a),e.innerHTML=""}return this.cssId&&xh.apply(),e&&((r=e.__ractive_instances__)?r.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),fu.end(),this.transitionsEnabled=s,i.then(function(){return _h.fire(o)})}function jt(t){t.splice(0,t.length).forEach(Q)}function Nt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Dt(t,e){var n,i;return n='[data-ractive-css~="{'+e+'}"]',i=function(t){var e,i,r,s,o,a,u,h=[];for(e=[];i=Th.exec(t);)e.push({str:i[0],base:i[1],modifiers:i[2]});for(s=e.map(Lt),u=e.length;u--;)a=s.slice(),r=e[u],a[u]=r.base+n+r.modifiers||"",o=s.slice(),o[u]=n+" "+o[u],h.push(a.join(" "),o.join(" "));return h.join(", ")},Rh.test(t)?t.replace(Rh,n):t.replace(Ph,"").replace(Oh,function(t,e){var n,r;return Fh.test(e)?t:(n=e.split(",").map(It),r=n.map(i).join(", ")+" ",t.replace(e,r))})}function It(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Lt(t){return t.str}function Vt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Mt(t,e){Vt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){return Wt(i?Ut(e,this):e,n?Ut(t,this):t)}:Wt(e,t)}function Ut(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Wt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function zt(t){var e,n,i;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(Cc))?t.matchPattern(Oc)?(i=t.matchPattern(Cc))?(t.allowWhitespace(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function Bt(t){var e;return(e=t.matchPattern(Tc))?{t:uc,v:e}:null}function qt(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=$t(t,t.tags[n]))return e}function $t(t,e){var n,i,r,s;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(i=Sc(t))return t.matchString(e.close)?(e.open=i[0],e.close=i[1],t.sortMustacheTags(),Rc):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var o=t.pos;Pc(t)?t.pos=o:(t.pos=o-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(s=0;s<e.readers.length;s+=1)if(r=e.readers[s],i=r(t,e))return e.isStatic&&(i.s=!0),t.includeLinePositions&&(i.p=t.getLinePos(n)),i;return t.pos=n,null}function Qt(t){var e;return(e=t.matchPattern(Ic))?{t:ic,v:e}:null}function Zt(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:ac,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:ac,v:"false"}):null}function Ht(t){var e;return(e=Bc(t))?Qc.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Dc(t))?e.v:(e=t.matchPattern(qc))?e:void 0}function Kt(t){var e,n,i;return e=t.pos,t.allowWhitespace(),null===(n=$c(t))?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),i=kl(t),null===i?(t.pos=e,null):{t:cc,k:n,v:i}):(t.pos=e,null))}function Gt(t){var e,n,i,r;return e=t.pos,null===(i=Zc(t))?null:(n=[i],t.matchString(",")?(r=Gt(t),r?n.concat(r):(t.pos=e,null)):n)}function Yt(t){function e(t){n.push(t)}var n,i,r;return t.pos,t.allowWhitespace(),null===(i=kl(t))?null:(n=[i],t.allowWhitespace(),t.matchString(",")&&(r=Yt(t),null===r&&t.error(jc),r.forEach(e)),n)}function Jt(t){return Dc(t)||Lc(t)||Bc(t)||Kc(t)||Yc(t)||Pc(t)}function Xt(t){var e,n,i,r,s,o;return e=t.pos,i=t.matchPattern(/^@(?:keypath|index|key)/),i||(n=t.matchPattern(tl)||"",(i=!n&&t.relaxedNames&&t.matchPattern(rl)||t.matchPattern(il))||"."!==n||(n="",i=".")),i?n||t.relaxedNames||!Mc.test(i)?!n&&Vc.test(i)?(r=Vc.exec(i)[0],t.pos=e+r.length,{t:hc,v:r}):(s=(n||"")+C(i),t.matchString("(")&&(o=s.lastIndexOf("."),o!==-1?(s=s.substr(0,o),t.pos=e+s.length):t.pos-=1),{t:lc,n:s.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function te(t){var e;return t.pos,t.matchString("(")?(t.allowWhitespace(),e=kl(t),e||t.error(jc),t.allowWhitespace(),t.matchString(")")||t.error(Nc),{t:mc,x:e}):null}function ee(t){var e,n;if(t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),e=t.matchPattern(qc))return{t:fc,n:e};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),n=kl(t),n||t.error(jc),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:fc,x:n}):null}function ne(t){var e,n,i,r;return(n=wl(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),i=kl(t),i||t.error(jc),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),r=kl(t),r||t.error(jc),{t:vc,o:[n,i,r]}):(t.pos=e,n)):null}function ie(t){return xl(t)}function re(t){function e(t){switch(t.t){case ac:case hc:case ic:case uc:return t.v;case rc:return JSON.stringify(String(t.v));case sc:return"["+(t.m?t.m.map(e).join(","):"")+"]";case oc:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case cc:return t.k+":"+e(t.v);case pc:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case gc:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case yc:return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case mc:return"("+e(t.x)+")";case dc:return e(t.x)+e(t.r);case fc:return t.n?"."+t.n:"["+e(t.x)+"]";case vc:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case lc:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return se(t,n=[]),{r:n,s:e(t)}}function se(t,e){var n,i;if(t.t===lc&&e.indexOf(t.n)===-1&&e.unshift(t.n),i=t.o||t.m)if(h(i))se(i,e);else for(n=i.length;n--;)se(i[n],e);t.x&&se(t.x,e),t.r&&se(t.r,e),t.v&&se(t.v,e)}function oe(t,e){var n;if(t){for(;t.t===mc&&t.x;)t=t.x;return t.t===lc?e.r=t.n:t.t===ic&&Al.test(t.v)?e.r=t.v:(n=ae(t))?e.rx=n:e.x=El(t),e}}function ae(t){for(var e,n=[];t.t===dc&&t.r.t===fc;)e=t.r,e.x?e.x.t===lc?n.unshift(e.x):n.unshift(El(e.x)):n.unshift(e.n),t=t.x;return t.t!==lc?null:{r:t.n,m:n}}function ue(t,e){var n,i=kl(t);return i?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:Bh},_l(i,n),n):null}function he(t,e){var n,i;return t.matchString("&")?(t.allowWhitespace(),(n=kl(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i={t:Bh},_l(n,i),i):null):null}function ce(t,e){var n,i,r;return t.pos,t.matchString(">")?(t.allowWhitespace(),t.pos,t.relaxedNames=!0,n=kl(t),t.relaxedNames=!1,t.allowWhitespace(),i=kl(t),t.allowWhitespace(),n?(r={t:Hh},_l(n,r),t.allowWhitespace(),i&&(r={t:qh,n:kc,f:[r]},_l(i,r)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r):null):null}function le(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),n!==-1?(t.pos+=n+e.close.length,{t:Kh}):void 0):null}function fe(t,e){var n,i,r;if(n=t.pos,!(i=kl(t)))return null;for(r=0;r<e.length;r+=1)if(t.remaining().substr(0,e[r].length)===e[r])return i;return t.pos=n,Xc(t)}function de(t,e){var n,i,r,s;n=t.pos;try{i=Tl(t,[e.close])}catch(t){s=t}if(!i){if("!"===t.str.charAt(n))return t.pos=n,null;if(s)throw s}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!i)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return r={t:zh},_l(i,r),r}function pe(t,e){var n,i;return t.matchPattern(jl)?(t.pos,n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),i={t:tc},n&&(i.n=n),i):null}function me(t,e){var n,i,r,s;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),i=t.remaining(),(r=i.indexOf(e.close))!==-1?(s={t:Qh,r:i.substr(0,r).split(" ")[0]},t.pos+=r,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):(t.pos=n,null)):(t.pos=n,null)):null}function ve(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(Il)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:_c}):(t.pos=n,null):null}function ge(t,e){var n,i=t.pos;return t.matchString(e.open)?t.matchPattern(Vl)?(n=kl(t),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Ac,x:n}):(t.pos=i,null):null}function ye(t,e){var n,i,r,s,o,a,u,h,c,l,f,d;if(n=t.pos,t.matchString("^"))r={t:qh,f:[],n:wc};else{if(!t.matchString("#"))return null;r={t:qh,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(u=t.matchPattern(Bl))&&(d=u,r.n=Ml[u])}if(t.allowWhitespace(),i=kl(t),i||t.error("Expected expression"),f=t.matchPattern(Wl)){var p=void 0;(p=t.matchPattern(zl))?r.i=f+","+p:r.i=f}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,o=r.f,c=[];do{if(s=Nl(t,e))d&&s.r!==d&&t.error("Expected "+e.open+"/"+d+e.close),t.sectionDepth-=1,l=!0;else if(s=Ll(t,e))r.n===wc&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),h||(h=be(i,r.n)),h.f.push({t:qh,n:bc,x:El(xe(c.concat(s.x))),f:o=[]}),c.push(we(s.x));else if(s=Dl(t,e))r.n===wc&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,h?h.f.push({t:qh,n:bc,x:El(xe(c)),f:o=[]}):(h=be(i,r.n),o=h.f);else{if(!(s=t.read(Hf)))break;o.push(s)}}while(!l);return h&&(r.n===kc&&(r.n=Ec),r.l=h),_l(i,r),r.f.length||delete r.f,r}function be(t,e){var n;return e===kc?(n={t:qh,n:bc,f:[]},_l(we(t),n)):(n={t:qh,n:wc,f:[]},_l(t,n)),n}function we(t){return t.t===pc&&"!"===t.s?t.o:{t:pc,s:"!",o:ke(t)}}function xe(t){return 1===t.length?t[0]:{t:gc,s:"&&",o:[ke(t[0]),ke(xe(t.slice(1)))]}}function ke(t){return{t:mc,x:t}}function Ee(t){var e,n,i,r,s;return e=t.pos,t.matchString($l)?(i=t.remaining(),r=i.indexOf(Ql),r===-1&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=i.substr(0,r),t.pos+=r+3,s={t:Kh,c:n},t.includeLinePositions&&(s.p=t.getLinePos(e)),s):null}function _e(t){return t.replace(vl,function(t,e){var n;return n="#"!==e[0]?pl[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Ae(n)):t})}function Ae(t){return t?10===t?32:t<128?t:t<=159?ml[t-128]:t<55296?t:t<=57343?65533:t<=65535?t:65533:65533}function Se(t){return t.replace(bl,"&amp;").replace(gl,"&lt;").replace(yl,"&gt;")}function Ce(t){return"string"==typeof t}function Oe(t){return t.t===Kh||t.t===Gh}function Pe(t){return(t.t===qh||t.t===$h)&&t.f}function Te(t,e,n,i,r){var o,a,u,h,c,l,f,d;for(nf(t),o=t.length;o--;)a=t[o],a.exclude?t.splice(o,1):e&&a.t===Kh&&t.splice(o,1);for(rf(t,i?uf:null,r?hf:null),o=t.length;o--;){if(a=t[o],a.f){var p=a.t===Zh&&af.test(a.e);c=n||p,!n&&p&&rf(a.f,cf,lf),c||(u=t[o-1],h=t[o+1],(!u||"string"==typeof u&&hf.test(u))&&(l=!0),(!h||"string"==typeof h&&uf.test(h))&&(f=!0)),Te(a.f,e,c,l,f)}if(a.l&&(Te(a.l.f,e,n,l,f),t.splice(o+1,0,a.l),delete a.l),a.a)for(d in a.a)a.a.hasOwnProperty(d)&&"string"!=typeof a.a[d]&&Te(a.a[d],e,n,l,f);if(a.m&&Te(a.m,e,n,l,f),a.v)for(d in a.v)a.v.hasOwnProperty(d)&&(s(a.v[d].n)&&Te(a.v[d].n,e,n,l,f),s(a.v[d].d)&&Te(a.v[d].d,e,n,l,f))}for(o=t.length;o--;)"string"==typeof t[o]&&("string"==typeof t[o+1]&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(of," ")),""===t[o]&&t.splice(o,1))}function Fe(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(df))?t.inside&&n!==t.inside?(t.pos=e,null):{t:Jh,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function Re(t){var e,n,i;return t.allowWhitespace(),(n=t.matchPattern(vf))?(e={name:n},i=je(t),null!=i&&(e.value=i),e):null}function je(t){var e,n,i,r;return e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,i=t.sectionDepth,r=Ie(t,"'")||Ie(t,'"')||De(t),null===r&&t.error("Expected valid attribute value"),t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),r.length?1===r.length&&"string"==typeof r[0]?_e(r[0]):r:""):(t.pos=e,null)}function Ne(t){var e,n,i,r,s;return e=t.pos,(n=t.matchPattern(gf))?(i=n,r=t.tags.map(function(t){return t.open}),(s=pf(i,r))!==-1&&(n=n.substr(0,s),t.pos=e+n.length),n):null}function De(t){var e,n;for(t.inAttribute=!0,e=[],n=Fc(t)||Ne(t);null!==n;)e.push(n),n=Fc(t)||Ne(t);return e.length?(t.inAttribute=!1,e):null}function Ie(t,e){var n,i,r;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,i=[],r=Fc(t)||Le(t,e);null!==r;)i.push(r),r=Fc(t)||Le(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function Le(t,e){var n,i,r;return t.pos,i=t.remaining(),r=t.tags.map(function(t){return t.open}),r.push(e),n=pf(i,r),n===-1&&t.error("Quoted attribute value must have a closing quote"),n?(t.pos+=n,i.substr(0,n)):null}function Ve(t){var e,n,i;return t.allowWhitespace(),(e=$c(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function Me(t,e){var n,i,r,s,o,a,u,h,c;if("string"==typeof t){if(i=xf.exec(t)){var l=t.lastIndexOf(")");return kf.test(t)||e.error("Invalid input after method call expression '"+t.slice(l+1)+"'"),n={m:i[1]},s="["+t.slice(n.m.length+1,l)+"]",r=new yf(s),n.a=El(r.result[0]),n}if(t.indexOf(":")===-1)return t.trim();t=[t]}if(n={},u=[],h=[],t){for(;t.length;)if("string"==typeof(o=t.shift())){if((a=o.indexOf(":"))!==-1){a&&u.push(o.substr(0,a)),o.length>a+1&&(h[0]=o.substring(a+1));break}u.push(o)}else u.push(o);h=h.concat(t)}return u.length?h.length||"string"!=typeof u?(n={n:1===u.length&&"string"==typeof u[0]?u[0]:u},1===h.length&&"string"==typeof h[0]?(c=bf("["+h[0]+"]"),n.a=c?c.value:h[0].trim()):n.d=h):n=u:n="",n}function Ue(t){var e,n,i,r,s,o,a,u,h,c,l,f,d,p,m,v;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=nc,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=Zh,n.e=t.matchPattern(_f),!n.e)return null;for(Af.test(t.nextChar())||t.error("Illegal tag name"),s=function(e,i){var r=i.n||i;Of.test(r)&&(t.pos-=r.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=i},t.allowWhitespace();o=Fc(t)||mf(t);)o.name?(i=Pf[o.name])?n[i]=wf(o.value,t):(r=Cf.exec(o.name))?(n.v||(n.v={}),a=wf(o.value,t),s(r[1],a)):t.sanitizeEventAttributes&&Sf.test(o.name)||(n.a||(n.a={}),n.a[o.name]=o.value||(""===o.value?"":0)):(n.m||(n.m=[]),n.m.push(o)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(u=!0),!t.matchString(">"))return null;var g=n.e.toLowerCase(),y=t.preserveWhitespace;if(!u&&!dl.test(n.e)){t.elementStack.push(g),"script"!==g&&"style"!==g||(t.inside=g),h=[],c=ba(null);do{if(p=t.pos,m=t.remaining(),We(g,m))if(v=ff(t)){d=!0;var b=v.e.toLowerCase();if(b!==g&&(t.pos=p,!~t.elementStack.indexOf(b))){var w="Unexpected closing tag";dl.test(b)&&(w+=" (<"+b+"> is a void element - it cannot contain children)"),t.error(w)}}else(f=Nl(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(d=!0,t.pos=p):(f=t.read(Kf))?(c[f.n]&&(t.pos=p,t.error("Duplicate partial definition")),sf(f.f,t.stripComments,y,!y,!y),c[f.n]=f.f,l=!0):(f=t.read(Hf))?h.push(f):d=!0;else d=!0}while(!d);h.length&&(n.f=h),l&&(n.p=c),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&t.sanitizeElements.indexOf(g)!==-1?Tf:n}function We(t,e){var n,i;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=Ef[t],!n||!i||!~i.indexOf(n[1].toLowerCase())}function ze(t){var e,n,i,r;return n=t.remaining(),r=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(r):(i=t.tags.map(function(t){return t.open}),i=i.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(r),e=pf(n,i)),e?(e===-1&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):_e(n.substr(0,e))):null}function Be(t){return t.replace(Df,"\\$&")}function qe(t){var e=t.pos,n=t.standardDelimiters[0],i=t.standardDelimiters[1],r=void 0,s=void 0;if(!t.matchPattern(Lf)||!t.matchString(n))return t.pos=e,null;var o=t.matchPattern(Vf);if(v("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+o+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+o+"}} --> ... <!-- {{/"+o+"}} -->'"),!t.matchString(i)||!t.matchPattern(Mf))return t.pos=e,null;r=[];var a=new RegExp("^<!--\\s*"+Nf(n)+"\\s*\\/\\s*"+o+"\\s*"+Nf(i)+"\\s*-->");do{t.matchPattern(a)?s=!0:(Ff=t.read(Hf),Ff||t.error("expected closing comment ('<!-- "+n+"/"+o+i+" -->')"),r.push(Ff))}while(!s);return{t:ec,f:r,n:o}}function $e(t){var e,n,i,r,s;e=t.pos;var o=t.standardDelimiters;if(!t.matchString(o[0]))return null;if(!t.matchPattern(Wf))return t.pos=e,null;n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n||t.error("expected legal partial name"),t.matchString(o[1])||t.error("Expected closing delimiter '"+o[1]+"'"),i=[];do{(r=Nl(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!r.r&&t.error("Expected "+o[0]+"/partial"+o[1]),s=!0):(r=t.read(Hf),r||t.error("Expected "+o[0]+"/partial"+o[1]),i.push(r))}while(!s);return{t:ec,n:n,f:i}}function Qe(t){for(var e=[],n=ba(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var s=t.pos,o=void 0,a=void 0;(a=t.read(Kf))?(n[a.n]&&(t.pos=s,t.error("Duplicated partial definition")),sf(a.f,t.stripComments,r,!r,!r),n[a.n]=a.f,i=!0):(o=t.read(Hf))?e.push(o):t.error("Unexpected template content")}var u={v:oa,t:e}
;return i&&(u.p=n),u}function Ze(t,e){return new Zf(t,e||{}).result}function He(t){var e=ba(td);return e.parse=function(e,n){return Ke(e,n||t)},e}function Ke(t,e){if(!Bf)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Bf(t,e||this.options)}function Ge(t,e){var n;if(!Xo){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Ye(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Ye(t){return t&&"#"===t[0]}function Je(t){return!("string"==typeof t)}function Xe(t){return t.defaults&&(t=t.defaults),Xf.reduce(function(e,n){return e[n]=t[n],e},{})}function tn(t){var e,n=t._config.template;if(n&&n.fn)return e=en(t,n.fn),e!==n.result?(n.result=e,e=rn(e,t)):void 0}function en(t,e){var n=nn(ed.getParseOptions(t));return e.call(t,n)}function nn(t){var e=ba(ed);return e.parse=function(e,n){return ed.parse(e,n||t)},e}function rn(t,e){if("string"==typeof t)"#"===t[0]&&(t=ed.fromId(t)),t=Bf(t,ed.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==oa)throw new Error("Mismatched template version (expected "+oa+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function sn(t,e,n){if(e)for(var i in e)!n&&t.hasOwnProperty(i)||(t[i]=e[i])}function on(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=an(i._parent,e),s="_super"in this,o=this._super;return this._super=r,t=n.apply(this,arguments),s?this._super=o:delete this._super,t};return i._parent=t,i._method=n,i}function an(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=Oa,i}function un(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function hn(t,e,n){if(e in t){if(n in t)throw new Error(un(e,n,!0));m(un(e,n)),t[n]=t[e]}}function cn(t){hn(t,"beforeInit","onconstruct"),hn(t,"init","onrender"),hn(t,"complete","oncomplete"),hn(t,"eventDefinitions","events"),s(t.adaptors)&&hn(t,"adaptors","adapt")}function ln(t,e,n,i){fd(i);for(var r in i)if(hd.hasOwnProperty(r)){var s=i[r];"el"!==r&&"function"==typeof s?m(r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=s}cd.forEach(function(r){r[t](e,n,i)}),Sh[t](e,n,i),id[t](e,n,i),Dh[t](e,n,i),fn(e.prototype,n,i)}function fn(t,e,n){for(var i in n)if(!ud[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=ld(t,i,r)),e[i]=r}}function dn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function pn(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function mn(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function vn(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;e<n;e+=1)if(i=this.items[e],i.find&&(r=i.find(t)))return r;return null}}function gn(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)r=this.items[n],r.findAll&&r.findAll(t,e);return e}function yn(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(t,e);return e}function bn(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;n<e;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(t)))return r;return null}}function wn(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function xn(){return this.items&&this.items[0]?this.items[0].firstNode():null}function kn(t,e,n,i){return i=i||0,t.map(function(t){var r,s,o;return t.text?t.text:t.fragments?t.fragments.map(function(t){return kn(t.items,e,n,i)}).join(""):(r=n+"-"+i++,o=t.keypath&&(s=t.root.viewmodel.wrapped[t.keypath.str])?s.value:t.getValue(),e[r]=o,"${"+r+"}")}).join("")}function En(){var t,e,n,i;return this.dirtyArgs&&(e=kd(this.items,t={},this.root._guid),n=bf("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function _n(){var t=this;do{if(t.pElement)return t.pElement.node}while(t=t.parent);return this.root.detached||this.root.el}function An(){var t,e,n,i;return this.dirtyValue&&(e=kd(this.items,t={},this.root._guid),n=bf(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function Sn(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Cn(){return this.value}function On(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Pn(t,e){var n,i,r,s,o,a={},u=!1;for(e||(a.refs=n={});t;){if((o=t.owner)&&(i=o.indexRefs)){if(e&&(r=o.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(s in i)r=i[s],n[r.n]||(u=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Tn(t,e,n){var i;return"@"===e.charAt(0)?new Dd(t,e,n):(i=Vd(t.parentFragment,e))?new Ld(t,i,n):new Rd(t,e,n)}function Fn(t,e){var n,i;if(zd[t])return zd[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),zd[t]=n,n}function Rn(t){return t.call()}function jn(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Nn(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Dn(t){return void 0!==t&&"@"!==t[0]}function In(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){wa(t,i,{value:Bd.call(t,e),configurable:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return wa(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Ln(t){return t.value}function Vn(t){return void 0!=t}function Mn(t){t.forceResolution()}function Un(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var r,s,o;s=e.parentFragment,o=e.template,t.root=s.root,t.parentFragment=s,t.pElement=s.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(r=o.r)&&(t.resolver=Ud(t,r,n)),e.template.x&&(t.resolver=new qd(t,s,e.template.x,i)),e.template.rx&&(t.resolver=new Hd(t,e.template.rx,i)),t.template.n!==wc||t.hasOwnProperty("value")||t.setValue(void 0)}function Wn(t){var e,n,i;if(t&&t.isSpecial)return this.keypath=t,void this.setValue(t.value);this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),e&&(i=this.twowayBinding)&&i.rebound()}function zn(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function Bn(){this.parentFragment.bubble()}function qn(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function $n(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].find(t))return i;return null}function Qn(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAll(t,e)}function Zn(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAllComponents(t,e)}function Hn(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function Kn(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function Gn(){var t,e,n;if(t=this.fragments.length)for(e=0;e<t;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Yn(t){var e,n,i,r,s,o=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===xc){if(this.shuffling=!0,fu.scheduleTask(function(){return o.shuffling=!1}),this.parentFragment,r=[],t.forEach(function(t,n){var i,s,a,u;return t===n?void(r[t]=o.fragments[n]):(i=o.fragments[n],void 0===e&&(e=n),t===-1?(o.fragmentsToUnrender.push(i),void i.unbind()):(t-n,s=o.keypath.join(n),a=o.keypath.join(t),i.index=t,(u=i.registeredIndexRefs)&&u.forEach(Jn),i.rebind(s,a),void(r[t]=i)))}),i=this.root.viewmodel.get(this.keypath).length,void 0===e){if(this.length===i)return;e=this.length}for(this.length=this.fragments.length=i,this.rendered&&fu.addView(this),{template:this.template.f,root:this.root,owner:this},n=e;n<i;n+=1)s=r[n],s||this.fragmentsToCreate.push(n),this.fragments[n]=s}}function Jn(t){t.rebind("","")}function Xn(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ti(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new lb(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):ni(this,t)&&(this.bubble(),this.rendered&&fu.addView(this)),this.value=t,this.updating=!1)}function ei(t,e,n){if(e===xc&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function ni(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case bc:return t.hasContext=!1,ai(t,e,!1,n);case wc:return t.hasContext=!1,ai(t,e,!0,n);case kc:return oi(t,n);case Ec:return si(t,e,n);case xc:if(h(e))return ei(t,t.subtype,!0),ri(t,e,n)}return t.ordered=!!o(e),t.ordered?(ei(t,xc,!1),ii(t,e,n)):h(e)||"function"==typeof e?t.template.i?(ei(t,xc,!0),ri(t,e,n)):(ei(t,kc,!1),oi(t,n)):(ei(t,bc,!1),t.hasContext=!1,ai(t,e,!1,n))}function ii(t,e,n){var i,r,s;if((r=e.length)===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(Z);else if(r>t.length)for(i=t.length;i<r;i+=1)n.context=t.keypath.join(i),n.index=i,s=new lb(n),t.fragmentsToRender.push(t.fragments[i]=s);return t.length=r,!0}function ri(t,e,n){var i,r,s,o,a,u;for(s=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)o=t.fragments[r],o.key in e||(a=!0,o.unbind(),t.fragmentsToUnrender.push(o),t.fragments.splice(r,1),s[o.key]=!1);for(r=t.fragments.length;r--;)o=t.fragments[r],o.index!==r&&(o.index=r,(u=o.registeredIndexRefs)&&u.forEach(ci));r=t.fragments.length;for(i in e)s[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,o=new lb(n),t.fragmentsToRender.push(o),t.fragments.push(o),s[i]=!0);return t.length=t.fragments.length,a}function si(t,e,n){return e?oi(t,n):ui(t)}function oi(t,e){var n;if(!t.length)return e.context=t.keypath,e.index=0,n=new lb(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0}function ai(t,e,n,i){var r,s,a,u,c;if(s=o(e)&&0===e.length,a=!1,!o(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return r=n?s||a||!e:e&&!s&&!a,r?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(Z),!0):void 0:(i.index=0,u=new lb(i),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):ui(t)}function ui(t){if(t.length)return t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(hi),t.fragmentsToUnrender.forEach(Z),t.length=t.fragmentsToRender.length=0,!0}function hi(t){return t.rendered}function ci(t){t.rebind("","")}function li(t){var e,n,i;for(e="",n=0,i=this.length,n=0;n<i;n+=1)e+=this.fragments[n].toString(t);return e}function fi(){var t=this;this.fragments.forEach(Z),this.fragmentsToRender.forEach(function(e){return I(t.fragments,e)}),this.fragmentsToRender=[],Pd.call(this),this.length=0,this.unbound=!0}function di(t){this.fragments.forEach(t?pi:mi),this.renderedFragments=[],this.rendered=!1}function pi(t){t.unrender(!0)}function mi(t){t.unrender(!1)}function vi(){var t,e,n,i,r,s,o;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(r=this.parentFragment.getNode()),o=this.fragments.length,s=0;s<o;s+=1)t=this.fragments[s],e=n.indexOf(t,s),e!==s?(this.docFrag.appendChild(t.detach()),e!==-1&&n.splice(e,1),n.splice(s,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function gi(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;e<t;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function yi(t){var e,n,i,r;for(n=this.nodes.length,e=0;e<n;e+=1)if(i=this.nodes[e],1===i.nodeType){if(la(i,t))return i;if(r=i.querySelector(t))return r}return null}function bi(t,e){var n,i,r,s,o,a;for(i=this.nodes.length,n=0;n<i;n+=1)if(r=this.nodes[n],1===r.nodeType&&(la(r,t)&&e.push(r),s=r.querySelectorAll(t)))for(o=s.length,a=0;a<o;a+=1)e.push(s[a])}function wi(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function xi(t){return Ap[t]||(Ap[t]=ca(t))}function ki(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=L(t.node.options).filter(Ei),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function Ei(t){return t.selected}function _i(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Sp(this.value,this.parentFragment.getNode(),this.docFrag),Cp(this.pElement),this.rendered=!0,this.docFrag}function Ai(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&fu.addView(this))}function Si(){return void 0!=this.value?_e(""+this.value):""}function Ci(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Oi(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=Sp(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Cp(this.pElement)}}function Pi(){var t,e=this.node;if(e)return(t=e.parentNode)&&t.removeChild(e),e}function Ti(){return null}function Fi(){return this.node}function Ri(t){if(this.attributes&&this.attributes[t])return this.attributes[t].value}function ji(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&fu.addView(this))}function Ni(t){var e=t.fragment.items;if(1===e.length)return e[0].type===zh?e[0]:void 0}function Di(t){if(this.type=Yh,this.element=t.element,this.root=t.root,Xp(this,t.name),this.isBoolean=fl.test(this.name),!t.value||"string"==typeof t.value)return void(this.value=!!this.isBoolean||(t.value||""));this.parentFragment=this.element.parentFragment,this.fragment=new lb({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=tm(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0}function Ii(t,e){this.fragment&&this.fragment.rebind(t,e)}function Li(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==ia.html||(e=rm[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Vi(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,s=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?e:"";if(s){if(1===s.items.length&&null==s.items[0].value)return"";i=s.toString()}return n&&(e=n+":"+e),i?e+'="'+Mi(i)+'"':e}}function Mi(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Ui(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Wi(){var t,e,n,i=this.value;if(!this.locked)for(this.node._ractive.value=i,t=this.node.options,n=t.length;n--;)if(e=t[n],(e._ractive?e._ractive.value:e.value)==i){e.selected=!0;break}}function zi(){var t,e,n,i,r=this.value;for(s(r)||(r=[r]),t=this.node.options,e=t.length;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=R(r,i)}function Bi(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function qi(){var t,e,n,i,r=this.node;if(t=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(e=n[i],!e.element.node)return;if(e.element.node.checked)return fu.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function $i(){var t,e,n=this,i=n.element,r=n.node,o=n.value,a=i.binding;if(t=i.getAttribute("value"),s(o)){for(e=o.length;e--;)if(t==o[e])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}else a.isChecked=r.checked=o==t}function Qi(){this.node.className=n(this.value)}function Zi(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Hi(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function Ki(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Gi(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Yi(){this.locked||(this.node[this.propertyName]=this.value)}function Ji(){var t=this,e=t.node,n=t.namespace,i=t.name,r=t.value,s=t.fragment;n?e.setAttributeNS(n,i,(s||r).toString()):this.isBoolean?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(s||r).toString())}function Xi(){var t,e,n=this,i=n.name,r=n.element,s=n.node;"id"===i?e=dm:"value"===i?"select"===r.name&&"value"===i?e=r.getAttribute("multiple")?um:am:"textarea"===r.name?e=vm:null!=r.getAttribute("contenteditable")?e=mm:"input"===r.name&&(t=r.getAttribute("type"),e="file"===t?Oa:"radio"===t&&r.binding&&"name"===r.binding.name?cm:vm):this.isTwoway&&"name"===i?"radio"===s.type?e=hm:"checkbox"===s.type&&(e=lm):"style"===i&&s.style.setAttribute?e=pm:"class"!==i||s.namespaceURI&&s.namespaceURI!==ia.html?this.useProperty&&(e=gm):e=fm,e||(e=ym),this.update=e,this.update()}function tr(t,e){var n=e?"svg":"div";return xm.innerHTML="<"+n+" "+t+"></"+n+">",L(xm.childNodes[0].attributes)}function er(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function nr(t){for(;t=t.parent;)if("form"===t.name)return t}function ir(){this._ractive.binding.handleChange()}function rr(){var t;Tm.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function sr(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&Tm.call(e),t._timeout=void 0},t.element.lazy)}function or(t,e,n){var i=t+e+n;return Dm[i]||(Dm[i]=[])}function ar(t){return t.isChecked}function ur(t){return t.element.getAttribute("value")}function hr(t){var e,n,i,r,s,o=t.attributes;if(t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||o.contenteditable&&cr(o.contenteditable))&&cr(o.value)?n=jm:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=cr(o.name),r=cr(o.checked),i&&r&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?Mm:Wm:r&&(n="radio"===e?Lm:Bm)):"file"===e&&cr(o.value)?n=Km:cr(o.value)&&(n="number"===e||"range"===e?Gm:Fm)):"select"===t.name&&cr(o.value)?n=t.getAttribute("multiple")?Zm:$m:"textarea"===t.name&&cr(o.value)&&(n=Fm),n&&(s=new n(t))&&s.keypath)return s}function cr(t){return t&&t.isBindable}function lr(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function fr(t){Vu(this.root,this.getAction(),{event:t})}function dr(){return this.action.toString().trim()}function pr(t,e,n){var i,r,s=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,e.indexOf("*")!==-1&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Wd(n.a.s,r.length),this.parentFragment=t.parentFragment,this.root,this.refResolvers=[],r.forEach(function(t,e){var n=void 0;(n=nv.exec(t))?s.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:s.refResolvers.push(Ud(s,t,function(t){return s.resolve(e,t)}))}),this.fire=mr):(i=n.n||n,"string"!=typeof i&&(i=new lb({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new lb({template:n.d,root:this.root,owner:this.element}),this.fire=gr):n.a&&(this.params=n.a,this.fire=vr))}function mr(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,s;if(void 0!==n){if(n.eventObject){if(i=t,r=n.refinements.length)for(s=0;s<r;s+=1)i=i[n.refinements[s]]}else i=e.viewmodel.get(n);return i}}),Lu.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Lu.dequeue(e)}function vr(t){Vu(this.root,this.getAction(),{event:t,args:this.params})}function gr(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),Vu(this.root,this.getAction(),{event:t,args:e})}function yr(t){var e,n,i,r={};e=this._ractive,n=e.events[t.type],(i=Vd(n.element.parentFragment))&&(r=Vd.resolve(i)),n.fire({node:this,original:t,index:r,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function br(){var t,e=this.name;if(!this.invalid){if(t=g("events",this.root,e))this.custom=t(this.node,wr(e));else{if(!("on"+e in this.node||window&&"on"+e in window||ta))return void(ov[e]||v(Ra(e,"event"),{node:this.node}));this.node.addEventListener(e,iv,!1)}this.hasListener=!0}}function wr(t){return sv[t]||(sv[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),sv[t]}function xr(t,e){function n(n){n&&n.rebind(t,e)}if(this.method)return this.element.parentFragment,void this.refResolvers.forEach(n);"string"!=typeof this.action&&n(this.action),this.dynamicParams&&n(this.dynamicParams)}function kr(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Er(t,e){this.keypaths[t]=e}function _r(){if(this.method)return void this.refResolvers.forEach(Z);"string"!=typeof this.action&&this.action.unbind(),this.dynamicParams&&this.dynamicParams.unbind()}function Ar(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,iv,!1),this.hasListener=!1}function Sr(){var t=this;this.dirty||(this.dirty=!0,fu.scheduleTask(function(){Cr(t),t.dirty=!1})),this.parentFragment.bubble()}function Cr(t){var e,n,i,r,s;(e=t.node)&&(r=L(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach(function(t){var e,r;e=t._ractive?t._ractive.value:t.value,r=i?Or(n,e):n==e,r&&(s=!0),t.selected=r}),s||(r[0]&&(r[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Or(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Pr(t,e){t.select=Fr(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Tr(t){t.select&&I(t.select.options,t)}function Fr(t){if(t)do{if("select"===t.name)return t}while(t=t.parent)}function Rr(t){var e,n,i,r,s,o,a;this.type=Zh,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=Jp(n.e),"option"===this.name&&Pr(this,n),"select"===this.name&&(this.options=[],this.bubble=Sr),"form"===this.name&&(this.formBindings=[]),a=Gp(this,n),this.attributes=Em(this,n.a),this.conditionalAttributes=Sm(this,n.m),n.f&&(this.fragment=new lb({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),o=i.twoway,a.twoway===!1?o=!1:a.twoway===!0&&(o=!0),this.twoway=o,this.lazy=a.lazy,o&&(r=Ym(this,n.a))&&(this.binding=r,s=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),s.push(r)),n.v&&(this.eventHandlers=pv(this,n.v)),n.o&&(this.decorator=new bv(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function jr(t,e){function n(n){n.rebind(t,e)}var i,r,s;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),s=this.liveQueries)for(this.root,i=s.length;i--;)s[i]._makeDirty();this.node&&(r=this.node._ractive)&&k(r,"keypath",t,e)}function Nr(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==i&&t.node.setAttribute("height",i),t.node.removeEventListener("load",e,!1)},!1)}function Dr(t){t.node.addEventListener("reset",Lr,!1)}function Ir(t){t.node.removeEventListener("reset",Lr,!1)}function Lr(){var t=this._ractive.proxy;fu.start(),t.formBindings.forEach(Vr),fu.end()}function Vr(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Mr(t,e,n){var i,r,s;this.element=t,this.root=i=t.root,this.isIntro=n,"string"!=typeof(r=e.n||e)&&(s=new lb({template:r,root:i,owner:t}),r=s.toString(),s.unbind(),""===r)||(this.name=r,e.a?this.params=e.a:e.d&&(s=new lb({template:e.d,root:i,owner:t}),this.params=s.getArgsList(),s.unbind()),this._fn=g("transitions",i,r),this._fn||v(Ra(r,"transition"),{ractive:this.root}))}function Ur(t){return t}function Wr(){Kv.hidden=document[$v]}function zr(){Kv.hidden=!0}function Br(){Kv.hidden=!1}function qr(){var t,e,n,i=this;if(t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&$r(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},!this._fn)return void this.complete();this._fn.apply(this.root,[this].concat(this.params))}function $r(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Qr(){var t,e,n,i=this,r=this.root;return t=Zr(this),e=this.node=ca(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),wa(this.node,"_ractive",{value:{proxy:this,keypath:ru(this.parentFragment),events:ba(null),root:r}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=og,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Oa):"style"===this.name?(this.bubble=sg,this.bubble(),this.fragment.unrender=Oa):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Oa:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&Hr(this),"img"===this.name?Nr(this):"form"===this.name?Dr(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&fu.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),r.transitionsEnabled&&this.intro&&(n=new ag(this,this.intro,!0),fu.registerTransition(n),fu.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&fu.scheduleTask(function(){return i.node.focus()},!0),Kr(this),this.node}function Zr(t){var e,n;return(e=t.getAttribute("xmlns"))?e:"svg"===t.name?ia.svg:(n=t.parent)?"foreignObject"===n.name?ia.html:n.node.namespaceURI:t.root.el.namespaceURI}function Hr(t){var e,n,i;if(t.select&&void 0!==(n=t.select.getAttribute("value")))if(e=t.getAttribute("value"),t.select.node.multiple&&s(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}function Kr(t){var e,n,i,r,s;e=t.root;do{for(n=e._liveQueries,i=n.length;i--;)r=n[i],s=n["_"+r],s._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(s)}while(e=e.parent)}function Gr(t){var e,n,i;if(void 0===(e=t.getAttribute("value"))||!t.select)return!1;if((n=t.select.getAttribute("value"))==e)return!0;if(t.select.getAttribute("multiple")&&s(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Yr(t){var e,n,i,r;if(e=t.attributes,n=e.type,i=e.value,r=e.name,n&&"radio"===n.value&&i&&r.interpolator)return i.value===r.interpolator.value||void 0}function Jr(t){var e=t.toString();return e?" "+e:""}function Xr(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(Z),"option"===this.name&&Tr(this),this.attributes.forEach(Z),this.conditionalAttributes.forEach(Z)}function ts(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&fu.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(H),this.decorator&&fu.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new ag(this,this.outro,!1),fu.registerTransition(i),fu.scheduleTask(function(){return i.start()})),this.liveQueries&&es(this),"form"===this.name&&Ir(this)}function es(t){var e,n;for(n=t.liveQueries.length;n--;)e=t.liveQueries[n],e.selector,e._remove(t.node)}function ns(t,e){var n=mg.exec(e)[0];return null===t||n.length<t.length?n:t}function is(t,e,n){var i;if(i=rs(t,e,n||{}))return i;if(i=ed.fromId(e,{noThrow:!0})){i=vg(i);var r=ed.parse(i,ed.getParseOptions(t));return t.partials[e]=r.t}}function rs(t,e,n){var i=void 0,r=as(e,n.owner);if(r)return r;var s=y("partials",t,e);if(s){
if(r=s.partials[e],"function"==typeof r&&(i=r.bind(s),i.isOwner=s.partials.hasOwnProperty(e),r=i.call(t,ed)),!r&&""!==r)return void m(Fa,e,"partial","partial",{ractive:t});if(!ed.isParsed(r)){var o=ed.parse(r,ed.getParseOptions(s));o.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});(i?s:ss(s,e)).partials[e]=r=o.t}return i&&(r._fn=i),r.v?r.t:r}}function ss(t,e){return t.partials.hasOwnProperty(e)?t:os(t.constructor,e)}function os(t,e){if(t)return t.partials.hasOwnProperty(e)?t:os(t._Parent,e)}function as(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return as(t,e.parentFragment.owner)}}function us(t,e){var n,i=y("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),!(n=r()))return void m(Fa,e,"component","component",{ractive:t});"string"==typeof n&&(n=us(t,n)),n._fn=r,i.components[e]=n}return n}function hs(){var t=this.instance.fragment.detach();return Sg.fire(this.instance),t}function cs(t){return this.instance.fragment.find(t)}function ls(t,e){return this.instance.fragment.findAll(t,e)}function fs(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function ds(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function ps(){return this.parentFragment.findNextNode(this)}function ms(){return this.rendered?this.instance.fragment.firstNode():null}function vs(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,fu.start(i),i.viewmodel.mark(n),fu.end(),t.updating=!1)}var r,s,o,a,u,h;if(r=t.obj,s=t.prop,n&&!n.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}n&&(o=n.get,a=n.set),u=o||function(){return e},h=function(t){a&&a(t),e=o?o():t,h._ractiveWrappers.forEach(i)},h._ractiveWrappers=[t],Object.defineProperty(r,s,{get:u,set:h,enumerable:!0,configurable:!0})}function gs(t,e){var n,i,r,s;if(this.adaptors)for(n=this.adaptors.length,i=0;i<n;i+=1)if(r=this.adaptors[i],r.filter(e,t,this.ractive))return s=this.wrapped[t]=r.wrap(this.ractive,e,t,bs(t)),void(s.value=e)}function ys(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function bs(t){var e;return Gg[t]||(e=t?t+".":"",Gg[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?ys(n,t):n:void 0}),Gg[t]}function ws(t){var e,n,i=[qa];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)t.indexOf(n)===-1&&F(i,n),n=n.parent;return i}function xs(t,e,n){var i;Es(t,e),n||(i=e.wildcardMatches(),i.forEach(function(n){ks(t,n,e)}))}function ks(t,e,n){var i,r,s;e=e.str||e,i=t.depsMap.patternObservers,(r=i&&i[e])&&r.forEach(function(e){s=n.join(e.lastKey),Es(t,s),ks(t,e,s)})}function Es(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function _s(){function t(t){var i=t.key;t.viewmodel===o?(o.clearCache(i.str),t.invalidate(),n.push(i),e(i)):t.viewmodel.mark(i)}function e(n){var i,r;o.noCascade.hasOwnProperty(n.str)||((r=o.deps.computed[n.str])&&r.forEach(t),(i=o.depsMap.computed[n.str])&&i.forEach(e))}var n,i,r,s=this,o=this,a={};if(n=this.changes,n.length)return n.slice().forEach(e),i=Yg(n),i.forEach(function(e){var i;n.indexOf(e)===-1&&(i=o.deps.computed[e.str])&&i.forEach(t)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(t){return Jg(s,t,!0)}),n.forEach(function(t){return Jg(s,t)})),this.deps.observers&&(i.forEach(function(t){return As(s,null,t,"observers")}),Cs(this,n,"observers")),this.deps.default&&(r=[],i.forEach(function(t){return As(s,r,t,"default")}),r.length&&Ss(this,r,n),Cs(this,n,"default")),n.forEach(function(t){a[t.str]=s.get(t)}),this.implicitChanges={},this.noCascade={},a}function As(t,e,n,i){var r,s;(r=Os(t,n,i))&&(s=t.get(n),r.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(s)}))}function Ss(t,e,n){e.forEach(function(e){for(var i=!1,r=0,s=n.length,o=[];r<s;){var a=n[r];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&o.push(a),r++}i&&e.setValue(t.get(e.keypath)),o.length&&e.refineValue(o)})}function Cs(t,e,n){function i(t){t.forEach(r),t.forEach(s)}function r(e){var i=Os(t,e,n);i&&a.push({keypath:e,deps:i})}function s(e){var r;(r=t.depsMap[n][e.str])&&i(r)}function o(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];i(e),a.forEach(o)}function Os(t,e,n){var i=t.deps[n];return i?i[e.str]:null}function Ps(){this.captureGroups.push([])}function Ts(t,e){var n,i;if(e||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function Fs(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function Rs(t,e){var n=new sy(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function js(t,e){var n,i,r,s,o,a=this.cache,u=t.str;if(e=e||hy,e.capture&&(s=D(this.captureGroups))&&(~s.indexOf(t)||s.push(t)),Aa.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[u]?((i=this.computations[u])&&!i.bypass?(n=i.get(),this.adapt(u,n)):(r=this.wrapped[u])?n=r.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=Ns(this,t),a[u]=n):n=a[u],!e.noUnwrap&&(r=this.wrapped[u])&&(n=r.get()),t.isRoot&&e.fullRootGet)for(o in this.mappings)n[o]=this.mappings[o].getValue();return n===ay?void 0:n}function Ns(t,e){var n,i,r,s;if(n=t.get(e.parent),(s=t.wrapped[e.parent.str])&&(n=s.get()),null!==n&&void 0!==n)return(i=t.cacheMap[e.parent.str])?i.indexOf(e.str)===-1&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(r=n[e.lastKey],t.adapt(e.str,r,!1),t.cache[e.str]=r,r):t.cache[e.str]=ay}function Ds(){var t;for(t in this.computations)this.computations[t].init(this)}function Is(t,e){var n=this.mappings[t.str]=new fy(t,e);return n.initViewmodel(this),n}function Ls(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),this.changes.indexOf(t)===-1&&this.changes.push(t);var r=!!e&&e.keepExistingWrapper;this.clearCache(i,r),this.ready&&this.onchange()}function Vs(t,e,n,i){var r,s,o,a;if(this.mark(t),i&&i.compare){o=Us(i.compare);try{r=e.map(o),s=n.map(o)}catch(i){m('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,s=n}}else r=e,s=n;a=py(r,s),this.smartUpdate(t,n,a,e.length!==n.length)}function Ms(t){return JSON.stringify(t)}function Us(t){if(t===!0)return Ms;if("string"==typeof t)return vy[t]||(vy[t]=function(e){return e[t]}),vy[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Ws(t,e){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,s):(i=this.deps[s]||(this.deps[s]={}),r=i[t.str]||(i[t.str]=[]),r.push(e),this.depsMap[s]||(this.depsMap[s]={}),t.isRoot||zs(this,t,s)))}function zs(t,e,n){for(var i,r,s;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str]||(i[e.parent.str]=[]),s=e.str,void 0===r["_"+s]&&(r["_"+s]=0,r.push(e)),r["_"+s]+=1,e=e.parent}function Bs(){return this.captureGroups.pop()}function qs(t){this.data=t,this.clearCache("")}function $s(t,e){var n,i,r,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}a(this.cache[t.str],e)||(r=this.wrapped[t.str],r&&r.reset&&(s=r.reset(e)!==!1)&&(e=r.get()),i||s||Qs(this,t,e),o.silent?this.clearCache(t.str):this.mark(t))}function Qs(t,e,n){var i,r,s,o;s=function(){i.set?i.set(e.lastKey,n):(r=i.get(),o())},o=function(){r||(r=qg(e.lastKey),t.set(e.parent,r,{silent:!0})),r[e.lastKey]=n},i=t.wrapped[e.parent.str],i?s():(r=t.get(e.parent),(i=t.wrapped[e.parent.str])?s():o())}function Zs(t,e,n){var i,r,s,o=this;if(r=n.length,n.forEach(function(e,n){e===-1&&o.mark(t.join(n),Ey)}),this.set(t,e,{silent:!0}),(i=this.deps.default[t.str])&&i.filter(Hs).forEach(function(t){return t.shuffle(n,e)}),r!==e.length){for(this.mark(t.join("length"),ky),s=n.touchedFrom;s<e.length;s+=1)this.mark(t.join(s));for(s=e.length;s<r;s+=1)this.mark(t.join(s),Ey)}}function Hs(t){return"function"==typeof t.shuffle}function Ks(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Gs(t,e){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,s);if(i=this.deps[s][t.str],(r=i.indexOf(e))===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),t.isRoot||Ys(this,t,s)}}function Ys(t,e,n){for(var i,r;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str],r["_"+e.str]-=1,r["_"+e.str]||(I(r,e),r["_"+e.str]=void 0),e=e.parent}function Js(t){this.hook=new Xa(t),this.inProcess={},this.queue={}}function Xs(t,e){return t[e._guid]||(t[e._guid]=[])}function to(t,e){var n=Xs(t.queue,e);for(t.hook.fire(e);n.length;)to(t,n.shift());delete t.queue[e._guid]}function eo(t,e){var n,i={};for(n in e)i[n]=no(t,n,e[n]);return i}function no(t,e,n){var i,r;return"function"==typeof n&&(i=ro(n,t)),"string"==typeof n&&(i=io(t,n)),"object"==typeof n&&("string"==typeof n.get?i=io(t,n.get):"function"==typeof n.get?i=ro(n.get,t):l("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=ro(n.set,t))),{getter:i,setter:r}}function io(t,e){var n,i,r;return n="return ("+e.replace(Ty,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function ro(t,e){return/this/.test(t.toString())?t.bind(e):t}function so(e){var n,r,s=void 0===arguments[1]?{}:arguments[1],o=void 0===arguments[2]?{}:arguments[2];if(Vb.DEBUG&&_a(),uo(e,o),wa(e,"data",{get:ho}),Fy.fire(e,s),Dy.forEach(function(t){e[t]=i(ba(e.constructor[t]||null),s[t])}),r=new Cy({adapt:oo(e,e.adapt,s),data:Lh.init(e.constructor,e,s),computed:Py(e,i(ba(e.constructor.prototype.computed),s.computed)),mappings:o.mappings,ractive:e,onchange:function(){return fu.addRactive(e)}}),e.viewmodel=r,r.init(),dd.init(e.constructor,e,s),Ry.fire(e),jy.begin(e),e.template){var a=void 0;(o.cssIds||e.cssId)&&(a=o.cssIds?o.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new lb({template:e.template,root:e,owner:e,cssIds:a})}if(jy.end(e),n=t(e.el)){var u=e.render(n,e.append);Vb.DEBUG_PROMISES&&u.catch(function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&f(t.stack),t})}}function oo(t,e,n){function i(e){return"string"==typeof e&&((e=g("adaptors",t,e))||l(Ra(e,"adaptor"))),e}var r,s,o;if(e=e.map(i),r=N(n.adapt).map(i),r=ao(e,r),s="magic"in n?n.magic:t.magic,o="modifyArrays"in n?n.modifyArrays:t.modifyArrays,s){if(!na)throw new Error("Getters and setters (magic mode) are not supported in this browser");o&&r.push(Hg),r.push(Zg)}return o&&r.push(zg),r}function ao(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function uo(t,e){t._guid="r-"+Ny++,t._subs=ba(null),t._config={},t._twowayBindings=ba(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function ho(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function co(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new lb({template:e,root:t.root,owner:this}),this.update()}function lo(t,e,n){var i;return e.r?i=Ud(t,e.r,n):e.x?i=new qd(t,t.parentFragment,e.x,n):e.rx&&(i=new Hd(t,e.rx,n)),i}function fo(t){return 1===t.length&&t[0].t===zh}function po(t,e){var n;for(n in e)e.hasOwnProperty(n)&&mo(t.instance,t.root,n,e[n])}function mo(t,e,n,i){"string"!=typeof i&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),Vu(e,i,{event:t,args:n}),!1})}function vo(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=Xh,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Vy(this,e,t.template.a,t.template.f,t.template.p),My(this,t.template.v),(t.template.t0||t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Uy(this)}function go(t,e){function n(n){n.rebind(t,e)}var i;this.resolvers.forEach(n);for(var r in this.yielders)this.yielders[r][0]&&n(this.yielders[r][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function yo(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function bo(){return this.instance.fragment.toString()}function wo(){var t=this.instance;this.resolvers.forEach(Z),xo(this),t._observers.forEach(K),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&I(t.el.__ractive_instances__,t),Qy.fire(t)}function xo(t){var e,n;e=t.root;do{(n=e._liveComponentQueries["_"+t.name])&&n._remove(t)}while(e=e.parent)}function ko(t){this.shouldDestroy=t,this.instance.unrender()}function Eo(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,i){return _o({parentFragment:e,pElement:t.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function _o(t){if("string"==typeof t.template)return new Od(t);switch(t.template.t){case tc:return new Xy(t);case zh:return new tp(t);case qh:return new wp(t);case Bh:return new Vp(t);case Zh:var e=void 0;return(e=_g(t.parentFragment.root,t.template.e))?new Ky(t,e):new dg(t);case Hh:return new Eg(t);case Kh:return new Yy(t);case nc:return new eb(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Ao(t,e){this.owner&&!this.owner.hasContext||k(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function So(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Co(t){return this.items?this.items.map(t?Po:Oo).join(""):""}function Oo(t){return t.toString()}function Po(t){return t.toString(!0)}function To(){this.bound&&(this.items.forEach(Fo),this.bound=!1)}function Fo(t){t.unbind&&t.unbind()}function Ro(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function jo(t){var e,n,i,r,s;if("object"!=typeof(t=t||{}))throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),i=dd.reset(this),r=i.length;r--;)if(db.indexOf(i[r])>-1){s=!0;break}if(s){var o=void 0;this.viewmodel.mark(qa),(o=this.component)&&(o.shouldDestroy=!0),this.unrender(),o&&(o.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new lb({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=fu.start(this,!0),this.viewmodel.mark(qa),fu.end();return pb.fire(this,t),e}function No(t){var e,n;id.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new lb({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Do(t,e){var n,i;if(i=fu.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],Io(this,t,e))}else Io(this,t,e);return fu.end(),i}function Io(t,e,n){e=_(C(e)),e.isPattern?A(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Lo(t,e){return $a(this,t,void 0===e?-1:-e)}function Vo(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(K),this.fragment.rendered&&this.el.__ractive_instances__&&I(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():iu.resolve(),_b.fire(this),this._boundFunctions.forEach(Mo),t}function Mo(t){delete t.fn[t.prop]}function Uo(t){var e=this;if("string"!=typeof t)throw new TypeError(Ta);var n=void 0;return/\*/.test(t)?(n={},A(this,_(C(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Wo(){return this.fragment.toString(!0)}function zo(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),iu.resolve();for(t=fu.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),I(this.el.__ractive_instances__,this),Ob.fire(this),fu.end(),t}function Bo(t){var e;return t=_(t)||qa,e=fu.start(this,!0),this.viewmodel.mark(t),fu.end(),Fb.fire(this,t),e}function qo(t,e){var n,i,r;if("string"!=typeof t||e){r=[];for(i in this._twowayBindings)t&&!_(i).equalsOrStartsWith(t)||r.push.apply(r,this._twowayBindings[i])}else r=this._twowayBindings[t];return n=$o(this,r),this.set(n)}function $o(t,e){var n={},i=[];return e.forEach(function(t){var e,r;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t));e=t.attribute.value,r=t.getValue(),j(e,r)||a(e,r)||(n[t.keypath.str]=r)}}),i.length&&i.forEach(function(t){var e,r,s;e=i[t.str],r=e.attribute.value,s=e.getValue(),j(r,s)||(n[t.str]=s)}),n}function Qo(t,e){return"function"==typeof e&&/_super/.test(t)}function Zo(t){for(var e={};t;)Ho(t,e),Go(t,e),t=t._Parent!==Vb&&t._Parent;return e}function Ho(t,e){cd.forEach(function(n){Ko(n.useDefaults?t.prototype:t,e,n.name)})}function Ko(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function Go(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,s=i._method;s&&(i=i._method),r=Nb(e[n]._method,i),s&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}})}function Yo(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?e.reduce(Jo,this):Jo(this)}function Jo(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Vb&&(r=Db(r)),e=function(t){if(!(this instanceof e))return new e(t);Iy(this,t)},n=ba(t.prototype),n.constructor=e,xa(e,{defaults:{value:n},extend:{value:Yo,writable:!0,configurable:!0},_Parent:{value:t}}),dd.extend(t,n,r),Lh.extend(t,n,r),r.computed&&(n.computed=i(ba(t.prototype.computed),r.computed)),e.prototype=n,e}var Xo,ta,ea,na,ia,ra,sa,oa=3,aa={el:void 0,append:!1,template:{v:oa,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ua=aa,ha={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Xo="object"==typeof document,ta="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ea="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),na=!0}catch(t){na=!1}ia={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ra="undefined"!=typeof document&&(document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),sa=["o","ms","moz","webkit"];var ca,la,fa,da,pa,ma,va,ga,ya;if(ca=ra?function(t,e){return e&&e!==ia.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==ia.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Xo){for(fa=ca("div"),da=["matches","matchesSelector"],ya=function(t){return function(e,n){return e[t](n)}},va=da.length;va--&&!la;)if(pa=da[va],fa[pa])la=ya(pa);else for(ga=sa.length;ga--;)if(ma=sa[va]+pa.substr(0,1).toUpperCase()+pa.substring(1),fa[ma]){la=ya(ma);break}la||(la=function(t,e){var n,i,r;for(i=t.parentNode,i||(fa.innerHTML="",i=fa,t=t.cloneNode(),fa.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else la=null;var ba,wa,xa;try{Object.defineProperty({},"test",{value:0}),Xo&&Object.defineProperty(document.createElement("div"),"test",{value:0}),wa=Object.defineProperty}catch(t){wa=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(t){throw t}Xo&&Object.defineProperties(ca("div"),{test:{value:0}}),xa=Object.defineProperties}catch(t){xa=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&wa(t,n,e[n])}}try{Object.create(null),ba=Object.create}catch(t){ba=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var ka,Ea,_a,Aa=Object.prototype.hasOwnProperty,Sa=Object.prototype.toString,Ca=/^\[object (?:Array|FileList)\]$/,Oa=function(){},Pa={};ea?function(){var t=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];_a=function(){var e=!!console.groupCollapsed;console[e?"groupCollapsed":"log"].apply(console,t),console.log("You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n"),e&&console.groupEnd(t),_a=Oa},Ea=function(t,e){if(_a(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r=void 0;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var s=void 0;(s=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},ka=function(){console.log.apply(console,arguments)}}():Ea=ka=_a=Oa;var Ta="Bad arguments",Fa='A function was specified for "%s" %s, but no %s was returned',Ra=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},ja=function(t,e,n,i){if(t===e)return b(e);if(i){var r=g("interpolators",n,i);if(r)return r(t,e)||b(e);l(Ra(i,"interpolator"))}return Ia.number(t,e)||Ia.array(t,e)||Ia.object(t,e)||b(e)},Na=ja,Da={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,r,o;if(!s(t)||!s(e))return null;for(n=[],i=[],o=r=Math.min(t.length,e.length);o--;)i[o]=Na(t[o],e[o]);for(o=r;o<t.length;o+=1)n[o]=t[o];for(o=r;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,s,o;if(!h(t)||!h(e))return null;n=[],s={},r={};for(o in t)Aa.call(t,o)&&(Aa.call(e,o)?(n.push(o),r[o]=Na(t[o],e[o])):s[o]=t[o]);for(o in e)Aa.call(e,o)&&!Aa.call(t,o)&&(s[o]=e[o]);return i=n.length,function(t){for(var e,o=i;o--;)e=n[o],s[e]=r[e](t);return s}}},Ia=Da,La=w,Va={},Ma=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ua=/\*/,Wa={},za=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=E(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=Ua.test(t),this.parent=""===t?null:_(e.join(".")),this.isRoot=!t};za.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return _(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:_(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return!!t&&(t&&this.str.substr(0,t.str.length+1)===t.str+".")},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=La(this.str))}};var Ba,qa=_(""),$a=O,Qa="Cannot add to a non-numeric value",Za=P;"undefined"==typeof window?Ba=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,s;return n=Date.now(),i=Math.max(0,16-(n-e)),s=r(function(){t(n+i)},i),e=n+i,s})}}(sa,0,window),Ba=window.requestAnimationFrame);var Ha,Ka=Ba;Ha="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Ga=Ha,Ya={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};T.prototype.fire=function(t,e){function n(n){if(t[n])return e?t[n](e):t[n](),!0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var Ja,Xa=T,tu={},eu={},nu={};"function"==typeof Promise?Ja=Promise:(Ja=function(t){var e,n,i,r,s,o,a=[],u=[],h=tu;i=function(t){return function(i){h===tu&&(e=i,h=t,n=M(h===eu?a:u,e),V(n))}},r=i(eu),s=i(nu);try{t(r,s)}catch(t){s(t)}return o={then:function(t,e){var i=new Ja(function(r,s){var o=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),U(i,n,r,s)}catch(t){s(t)}}):e.push(n)};o(t,a,r),o(e,u,s),h!==tu&&V(n)});return i}},o.catch=function(t){return this.then(null,t)},o},Ja.all=function(t){return new Ja(function(e,n){var i,r,s,o=[];if(!t.length)return void e(o);for(s=function(t,r){t&&"function"==typeof t.then?t.then(function(t){o[r]=t,--i||e(o)},n):(o[r]=t,--i||e(o))},i=r=t.length;r--;)s(t[r],r)})},Ja.resolve=function(t){return new Ja(function(e){e(t)})},Ja.reject=function(t){return new Ja(function(e,n){n(t)})});var iu=Ja,ru=function(t){do{if(void 0!==t.context)return t.context}while(t=t.parent);return qa},su=W,ou=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};ou.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,J(this)},decrementTotal:function(){this.totalChildren-=1,J(this)},add:function(t){(t.isIntro?this.intros:this.outros).push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){I(t.isIntro?this.intros:this.outros,t),J(this)},init:function(){this.ready=!0,J(this)},detachNodes:function(){this.decoratorQueue.forEach(Q),this.detachQueue.forEach(G),this.children.forEach(Y)}};var au,uu,hu=ou,cu=[],lu=new Xa("change");uu={start:function(t,e){var n,i;return e&&(n=new iu(function(t){return i=t})),au={previousBatch:au,transitionManager:new hu(i,au&&au.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&au.ractives.push(t),n},end:function(){X(),au.transitionManager.init(),!au.previousBatch&&au.instance&&(au.instance.viewmodel.changes=[]),au=au.previousBatch},addRactive:function(t){au&&F(au.ractives,t)},registerTransition:function(t){t._manager=au.transitionManager,au.transitionManager.add(t)},registerDecorator:function(t){au.transitionManager.addDecorator(t)},addView:function(t){au.views.push(t)},addUnresolved:function(t){cu.push(t)},removeUnresolved:function(t){I(cu,t)},detachWhenReady:function(t){au.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(au){for(n=au;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var fu=uu,du=[],pu={tick:function(){var t,e,n;for(n=Ga(),fu.start(),t=0;t<du.length;t+=1)e=du[t],e.tick(n)||du.splice(t--,1);fu.end(),du.length?Ka(pu.tick):pu.running=!1},add:function(t){du.push(t),pu.running||(pu.running=!0,Ka(pu.tick))},abort:function(t,e){for(var n,i=du.length;i--;)n=du[i],n.root===e&&n.keypath===t&&n.stop()}},mu=pu,vu=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Na(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};vu.prototype={tick:function(){var t,e,n,i,r,s;return s=this.keypath,!!this.running&&(i=Date.now(),(t=i-this.startTime)>=this.duration?(null!==s&&(fu.start(this.root),this.root.viewmodel.set(s,this.to),fu.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),r===-1&&m("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==s&&(n=this.interpolator(e),fu.start(this.root),this.root.viewmodel.set(s,n),fu.end()),this.step&&this.step(e,n),!0))},stop:function(){var t
;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&m("Animation was not found"),this.root._animations.splice(t,1)}};var gu=vu,yu=nt,bu={stop:Oa},wu=rt,xu=new Xa("detach"),ku=st,Eu=ot,_u=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,(n=t.indexOf(e))!==-1&&(t.splice(n,1),t[e]=null)},Au=function(t,e){var n,i,r,s,o,a,u,h,c,l;for(n=ut(t.component||t._ractive.proxy),i=ut(e.component||e._ractive.proxy),r=D(n),s=D(i);r&&r===s;)n.pop(),i.pop(),o=r,r=D(n),s=D(i);if(r=r.component||r,s=s.component||s,c=r.parentFragment,l=s.parentFragment,c===l)return a=c.items.indexOf(r),u=l.items.indexOf(s),a-u||n.length-i.length;if(h=o.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Su=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):Au(t,e)},Cu=function(){this.sort(this._isComponentQuery?Au:Su),this._dirty=!1},Ou=function(){var t=this;this._dirty||(this._dirty=!0,fu.scheduleTask(function(){t._sort()}))},Pu=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);e!==-1&&this.splice(e,1)},Tu=ht,Fu=ct,Ru=lt,ju=ft,Nu=dt,Du=pt,Iu={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Lu=Iu,Vu=mt,Mu=yt,Uu=bt,Wu={capture:!0,noUnwrap:!0,fullRootGet:!0},zu=wt,Bu=new Xa("insert"),qu=kt,$u=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};$u.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?fu.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Qu,Zu=$u,Hu=Et,Ku=Array.prototype.slice;Qu=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t},Qu.prototype={init:function(t){var e,n;if(e=Hu(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(_(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=Hu(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(_(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void fu.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,i,r;if(e=t.str,n=this.root.viewmodel.get(t),this.updating)return void(this.values[e]=n);this.updating=!0,a(n,this.values[e])&&this.ready||(i=Ku.call(this.regex.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,r)),this.updating=!1},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Gu,Yu,Ju,Xu,th,eh,nh=Qu,ih=_t,rh={},sh=At,oh=St,ah=function(t){return t.trim()},uh=function(t){return""!==t},hh=Ct,ch=Ot,lh=Pt,fh=Tt,dh=Array.prototype,ph=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o,a,u,h=[];if(e=_(C(e)),o=this.viewmodel.get(e),o.length,!s(o))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return h=fh(o,t,i),u=dh[t].apply(o,i),a=fu.start(this,!0).then(function(){return u}),h?this.viewmodel.smartUpdate(e,o,h):this.viewmodel.mark(e),fu.end(),a}},mh=ph("pop"),vh=ph("push"),gh=[],yh=!1;Xo?(Ju=document.createElement("style"),Ju.type="text/css",Xu=document.getElementsByTagName("head")[0],eh=!1,th=Ju.styleSheet,Yu=function(){var t="/* Ractive.js component styles */\n"+gh.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");th?th.cssText=t:Ju.innerHTML=t,eh||(Xu.appendChild(Ju),eh=!0)},Gu={add:function(t){gh.push(t),yh=!0},apply:function(){yh&&(Yu(),yh=!1)}}):Gu={add:Oa,apply:Oa};var bh,wh,xh=Gu,kh=Rt,Eh=new Xa("render"),_h=new Xa("complete"),Ah={extend:function(t,e,n){e.adapt=Nt(e.adapt,N(n.adapt))},init:function(){}},Sh=Ah,Ch=Dt,Oh=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Ph=/\/\*.*?\*\//g,Th=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Fh=/^@media/,Rh=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,jh=1,Nh={name:"css",extend:function(t,e,n){if(n.css){var i=jh++,r=n.noCssTransform?n.css:Ch(n.css,i);e.cssId=i,xh.add({id:i,styles:r})}},init:function(){}},Dh=Nh,Ih={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&h(n.data))for(i in n.data)(r=n.data[i])&&"object"==typeof r&&(h(r)||s(r))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Mt(e.data,n.data)},init:function(t,e,n){var i=Mt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},Lh=Ih;wh=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}},wh.prototype=Error.prototype,bh=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},bh.prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;n<i;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],s=0,o=r.replace(/\t/g,function(t,n){return n<e[1]&&(s+=1),"  "})+"\n"+new Array(e[1]+s).join(" ")+"^----",a=new wh(t+" at line "+n+" character "+i+":\n"+o);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t},matchPattern:function(t){var e;if(e=t.exec(this.remaining()))return this.pos+=e[0].length,e[1]||e[0]},allowWhitespace:function(){this.matchPattern(/^\s+/)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},bh.extend=function(t){var e,n,i=this;e=function(t,e){bh.call(this,t,e)},e.prototype=ba(i.prototype);for(n in t)Aa.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=bh.extend,e};var Vh,Mh,Uh,Wh=bh,zh=2,Bh=3,qh=4,$h=5,Qh=6,Zh=7,Hh=8,Kh=9,Gh=10,Yh=13,Jh=14,Xh=15,tc=16,ec=17,nc=18,ic=20,rc=21,sc=22,oc=23,ac=24,uc=25,hc=26,cc=27,lc=30,fc=31,dc=32,pc=33,mc=34,vc=35,gc=36,yc=40,bc=50,wc=51,xc=52,kc=53,Ec=54,_c=60,Ac=61,Sc=zt,Cc=/^[^\s=]+/,Oc=/^\s+/,Pc=Bt,Tc=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Fc=qt,Rc={t:Gh,exclude:!0},jc="Expected a JavaScript expression",Nc="Expected closing paren",Dc=Qt,Ic=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Lc=Zt;Vh=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Mh=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Uh=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Vc,Mc,Uc=function(t){return function(e){var n,i,r;for(e.pos,n='"',i=!1;!i;)r=e.matchPattern(Vh)||e.matchPattern(Mh)||e.matchString(t),r?n+='"'===r?'\\"':"\\'"===r?"'":r:(r=e.matchPattern(Uh),r?n+="\\u"+("000"+r.charCodeAt(1).toString(16)).slice(-4):i=!0);return n+='"',JSON.parse(n)}},Wc=Uc('"'),zc=Uc("'"),Bc=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=zc(t),t.matchString('"')?{t:rc,v:n}:(t.pos=e,null)):t.matchString("'")?(n=Wc(t),t.matchString("'")?{t:rc,v:n}:(t.pos=e,null)):null},qc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,$c=Ht,Qc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Zc=Kt,Hc=Gt,Kc=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=Hc(t),t.allowWhitespace(),t.matchString("}")?{t:oc,m:n}:(t.pos=e,null)):(t.pos=e,null)},Gc=Yt,Yc=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=Gc(t),t.matchString("]")?{t:sc,m:n}:(t.pos=e,null)):(t.pos=e,null)},Jc=Jt,Xc=Xt,tl=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;Vc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Mc=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var el,nl,il=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,rl=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,sl=te,ol=function(t){return Jc(t)||Xc(t)||sl(t)},al=ee,ul=function(t){var e,n,i;if(!(e=ol(t)))return null;for(;e;)if(t.pos,n=al(t))e={t:dc,x:e,r:n};else{if(!t.matchString("("))break;t.allowWhitespace(),i=Gc(t),t.allowWhitespace(),t.matchString(")")||t.error(Nc),e={t:yc,x:e},i&&(e.o=i)}return e};nl=function(t,e){return function(n){var i;return(i=e(n))?i:n.matchString(t)?(n.allowWhitespace(),i=kl(n),i||n.error(jc),{s:t,o:i,t:pc}):null}},function(){var t,e,n,i,r;for(i="! ~ + - typeof".split(" "),r=ul,t=0,e=i.length;t<e;t+=1)n=nl(i[t],r),r=n;el=r}();var hl,cl,ll=el;cl=function(t,e){return function(n){var i,r,s;if(!(r=e(n)))return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=i,r;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.allowWhitespace(),!(s=e(n)))return n.pos=i,r;r={t:gc,s:t,o:[r,s]}}}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=ll,t=0,e=i.length;t<e;t+=1)n=cl(i[t],r),r=n;hl=r}();var fl,dl,pl,ml,vl,gl,yl,bl,wl=hl,xl=ne,kl=ie,El=re,_l=oe,Al=/^[0-9][1-9]*$/,Sl=ue,Cl=he,Ol=ce,Pl=le,Tl=fe,Fl=de,Rl=pe,jl=/^yield\s*/,Nl=me,Dl=ve,Il=/^\s*else\s*/,Ll=ge,Vl=/^\s*elseif\s+/,Ml={each:xc,if:bc,"if-with":Ec,with:kc,unless:wc},Ul=ye,Wl=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,zl=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Bl=new RegExp("^("+Object.keys(Ml).join("|")+")\\b"),ql=Ee,$l="<!--",Ql="-->";fl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,dl=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,pl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},ml=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],vl=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(pl).join("|")+"));?","g"),gl=/</g,yl=/>/g,bl=/&/g;var Zl,Hl,Kl,Gl,Yl,Jl,Xl,tf=/^\s*\r?\n/,ef=/\r?\n\s*$/,nf=function(t){var e,n,i,r,s;for(e=1;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],Ce(n)&&Oe(i)&&Ce(r)&&ef.test(r)&&tf.test(n)&&(t[e-2]=r.replace(ef,"\n"),t[e]=n.replace(tf,"")),Pe(n)&&Ce(i)&&ef.test(i)&&Ce(n.f[0])&&tf.test(n.f[0])&&(t[e-1]=i.replace(ef,"\n"),n.f[0]=n.f[0].replace(tf,"")),Ce(n)&&Pe(i)&&(s=D(i.f),Ce(s)&&ef.test(s)&&tf.test(n)&&(i.f[i.f.length-1]=s.replace(ef,"\n"),t[e]=n.replace(tf,"")));return t},rf=function(t,e,n){var i;e&&"string"==typeof(i=t[0])&&(i=i.replace(e,""),i?t[0]=i:t.shift()),n&&"string"==typeof(i=D(t))&&(i=i.replace(n,""),i?t[t.length-1]=i:t.pop())},sf=Te,of=/[ \t\f\r\n]+/g,af=/^(?:pre|script|style|textarea)$/i,uf=/^[ \t\f\r\n]+/,hf=/[ \t\f\r\n]+$/,cf=/^(?:\r\n|\r|\n)/,lf=/(?:\r\n|\r|\n)$/,ff=Fe,df=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,pf=function(t,e){var n,i,r;for(n=e.length;n--;){if(!(i=t.indexOf(e[n])))return 0;i!==-1&&((!r||i<r)&&(r=i))}return r||-1},mf=Re,vf=/^[^\s"'>\/=]+/,gf=/^[^\s"'=<>`]+/;Hl={true:!0,false:!1,undefined:void 0,null:null},Kl=new RegExp("^(?:"+Object.keys(Hl).join("|")+")"),Gl=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Yl=/\$\{([^\}]+)\}/g,Jl=/^\$\{([^\}]+)\}/,Xl=/^\s*$/,Zl=Wh.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Xl.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Jl),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;if(e=t.matchPattern(Kl))return{v:Hl[e]}},function(t){var e;if(e=t.matchPattern(Gl))return{v:+e}},function(t){var e,n=Bc(t);return n&&(e=t.values)?{v:n.v.replace(Yl,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=Ve(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var yf,bf=function(t,e){return new Zl(t,{values:e}).result},wf=Me,xf=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,kf=/\)\s*$/;yf=Wh.extend({converters:[kl]});var Ef,_f=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Af=/^[\s\n\/>]/,Sf=/^on/,Cf=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Of=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Pf={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Tf={exclude:!0};Ef={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Ff,Rf=Ue,jf=ze,Nf=Be,Df=/[-\/\\^$*+?.()|[\]{}]/g,If=qe,Lf=/^<!--\s*/,Vf=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Mf=/\s*-->/,Uf=$e,Wf=/^#\s*partial\s+/,zf=Qe,Bf=Ze,qf=[Ol,Cl,Ul,Rl,Fl,Pl],$f=[Sl],Qf=[Cl,Ul,Fl],Zf=void 0,Hf=[Fc,ql,Rf,jf],Kf=[If,Uf];Zf=Wh.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],i=e.staticDelimiters||["[[","]]"],r=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:qf},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:$f},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Qf},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:$f}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),sf(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:oa}},converters:[zf],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var Gf,Yf,Jf,Xf=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],td={fromId:Ge,isHashedId:Ye,isParsed:Je,getParseOptions:Xe,createHelper:He,parse:Ke},ed=td,nd={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,e.template="function"==typeof i?i:rn(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(r=i,i=en(e,r),e._config.template={fn:r,result:i}),i=rn(i,e),e.template=i.t,i.p&&sn(e.partials,i.p)},reset:function(t){var e,n=tn(t);if(n)return e=rn(n,t),t.template=e.t,sn(t.partials,e.p,!0),!0}},id=nd;Gf=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],Yf=function(t,e){this.name=t,this.useDefaults=e},Yf.prototype={constructor:Yf,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,s=n[r];i=ba(t[r]);for(var o in s)i[o]=s[o];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},Jf=Gf.map(function(t){return new Yf(t,"computed"===t)});var rd,sd,od,ad,ud,hd,cd=Jf,ld=on,fd=cn;ad={adapt:Sh,css:Dh,data:Lh,template:id},od=Object.keys(ua),hd=dn(od.filter(function(t){return!ad[t]})),ud=dn(od.concat(cd.map(function(t){return t.name}))),sd=[].concat(od.filter(function(t){return!cd[t]&&!ad[t]}),cd,ad.data,ad.template,ad.css),rd={extend:function(t,e,n){return ln("extend",t,e,n)},init:function(t,e,n){return ln("init",t,e,n)},reset:function(t){return sd.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:sd};var dd=rd,pd=pn,md=mn,vd=vn,gd=gn,yd=yn,bd=bn,wd=wn,xd=xn,kd=kn,Ed=En,_d=_n,Ad=An,Sd=function(){return e(this.node)},Cd=function(t){this.type=1,this.text=t.template};Cd.prototype={detach:Sd,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?Se(this.text):this.text},unrender:function(t){if(t)return this.detach()}};var Od=Cd,Pd=Sn,Td=Cn,Fd=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,i=su(t.root,e,t.parentFragment),void 0!=i?this.resolve(i):fu.addUnresolved(this)};Fd.prototype={resolve:function(t){this.keypath&&!t&&fu.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&void 0!==(n=this.keypath.replace(t,e))&&this.resolve(n)},unbind:function(){this.resolved||fu.removeUnresolved(this)}};var Rd=Fd,jd=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},Nd={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};jd.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=Nd[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+i.prefix+On(this.cached,i)));if(i.prop.indexOf("index")!==-1||i.prop.indexOf("key")!==-1)for(;n;){if(n.owner.currentSubtype===xc&&void 0!==(t=On(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=On(n,i)))return this.callback(_("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Dd=jd,Id=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};Id.prototype={rebind:function(){var t,e=this.ref.ref;void 0!==(t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index)&&this.callback(_("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Ld=Id,Vd=Pn;Pn.resolve=function(t){var e,n,i={};for(e in t.refs)n=t.refs[e],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Md,Ud=Tn,Wd=Fn,zd={},Bd=Function.prototype.bind;Md=function(t,e,n,i){var r,s=this;r=t.root,this.root=r,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Ud(s,t,function(t){s.resolve(e,t)})}),this.ready=!0,this.bubble()},Md.prototype={bubble:function(){this.ready&&(this.uniqueString=jn(this.str,this.keypaths),this.keypath=Nn(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,r,s=this;i=this.keypath,t=this.root.viewmodel.computations[i.str],t?this.root.viewmodel.mark(i):(r=Wd(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=s.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=In(e,s.root)),e}}),n={deps:this.keypaths.filter(Dn),getter:function(){var t=e.map(Rn);return r.apply(null,t)}},t=this.root.viewmodel.compute(i,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var qd=Md,$d=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===lc?this.refResolver=Ud(this,t.n,function(t){i.resolve(t)}):new qd(e,n,t,function(t){i.resolve(t)})};$d.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Qd=$d,Zd=function(t,e,n){var i,r,s,o,a=this;this.parentFragment=o=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=r=e.r,this.callback=n,this.unresolved=[],(s=su(i,r,o))?this.base=s:this.baseResolver=new Rd(this,r,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new Qd(t,a,o)}),this.ready=!0,this.bubble()};Zd.prototype={getKeypath:function(){var t=this.members.map(Ln);return!t.every(Vn)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(Z)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Mn),this.bubble()}};var Hd=Zd,Kd=Un,Gd=Wn,Yd=zn,Jd={getValue:Td,init:Kd,resolve:Gd,rebind:Yd},Xd=function(t){this.type=zh,Jd.init(this,t)};Xd.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Jd.resolve,rebind:Jd.rebind,detach:Sd,unbind:Pd,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:Jd.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&fu.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?Se(e):e}};var tp=Xd,ep=Bn,np=qn,ip=$n,rp=Qn,sp=Zn,op=Hn,ap=Kn,up=Gn,hp=Yn,cp=function(t,e){Jd.rebind.call(this,t,e)},lp=Xn,fp=ti,dp=li,pp=fi,mp=di,vp=vi,gp=function(t){this.type=qh,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===wc,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,Jd.init(this,t)};gp.prototype={bubble:ep,detach:np,find:ip,findAll:rp,findAllComponents:sp,findComponent:op,findNextNode:ap,firstNode:up,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:Jd.getValue,shuffle:hp,rebind:cp,render:lp,resolve:Jd.resolve,setValue:fp,toString:dp,unbind:pp,unrender:mp,update:vp};var yp,bp,wp=gp,xp=gi,kp=yi,Ep=bi,_p=wi,Ap={};try{ca("table").innerHTML="foo"}catch(t){yp=!0,bp={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Sp=function(t,e,n){var i,r,s,o,a,u=[];if(null!=t&&""!==t){for(yp&&(r=bp[e.tagName])?(i=xi("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(s=i.options[i.selectedIndex])):e.namespaceURI===ia.svg?(i=xi("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=xi(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(s=i.options[i.selectedIndex]));o=i.firstChild;)u.push(o),n.appendChild(o);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==s&&(u[a].selected=!1)}return u},Cp=ki,Op=_i,Pp=Ai,Tp=Si,Fp=Ci,Rp=Oi,jp=function(t){this.type=Bh,Jd.init(this,t)};jp.prototype={detach:xp,find:kp,findAll:Ep,firstNode:_p,getValue:Jd.getValue,rebind:Jd.rebind,render:Op,resolve:Jd.resolve,setValue:Pp,toString:Tp,unbind:Pd,unrender:Fp,update:Rp};var Np,Dp,Ip,Lp,Vp=jp,Mp=function(){this.parentFragment.bubble()},Up=Pi,Wp=function(t){return this.node?la(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},zp=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Bp=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},qp=function(t){if(this.fragment)return this.fragment.findComponent(t)},$p=Ti,Qp=Fi,Zp=Ri,Hp=/^true|on|yes|1$/i,Kp=/^[0-9]+$/,Gp=function(t,e){var n,i,r;return r=e.a||{},i={},n=r.twoway,void 0!==n&&(i.twoway=0===n||Hp.test(n)),n=r.lazy,void 0!==n&&(0!==n&&Kp.test(n)?i.lazy=parseInt(n):i.lazy=0===n||Hp.test(n)),i},Yp=ji;Np="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Dp="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Ip=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Lp=Ip(Np.concat(Dp));var Jp=function(t){var e=t.toLowerCase();return Lp[e]||e},Xp=function(t,e){var n,i;if((n=e.indexOf(":"))===-1||"xmlns"===(i=e.substr(0,n)))t.name=t.element.namespace!==ia.html?Jp(e):e;else if(e=e.substring(n+1),t.name=Jp(e),t.namespace=ia[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'},tm=Ni,em=Di,nm=Ii,im=Li,rm={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},sm=Vi,om=Ui,am=Wi,um=zi,hm=Bi,cm=qi,lm=$i,fm=Qi,dm=Zi,pm=Hi,mm=Ki,vm=Gi,gm=Yi,ym=Ji,bm=Xi,wm=function(t){this.init(t)};wm.prototype={
bubble:Yp,init:em,rebind:nm,render:im,toString:sm,unbind:om,update:bm};var xm,km=wm,Em=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new km({element:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(xm=ca("div"));var _m=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new lb({root:t.root,owner:this,template:[e]})};_m.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===ia.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=tr(t,this.isSvg),this.attributes.filter(function(t){return er(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var Am=_m,Sm=function(t,e){return e?e.map(function(e){return new Am(t,e)}):[]},Cm=function(t){var e,n,i,r;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",e.template.r?"'"+e.template.r+"' reference":"expression",{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&void 0!==(i=this.getInitialValue())&&this.root.viewmodel.set(n,i),(r=nr(t))&&(this.resetValue=i,r.formBindings.push(this))};Cm.prototype={handleChange:function(){var t=this;fu.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),fu.scheduleTask(function(){return t.attribute.locked=!1}),fu.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(I(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},Cm.extend=function(t){var e,n=this;return e=function(t){Cm.call(this,t),this.init&&this.init()},e.prototype=ba(n.prototype),i(e.prototype,t),e.extend=Cm.extend,e};var Om,Pm=Cm,Tm=ir;Om=Pm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?sr:Tm,e.addEventListener("change",Tm,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",rr,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Tm,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",rr,!1)}});var Fm=Om,Rm=Fm.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),jm=Rm,Nm=or,Dm={},Im=Pm.extend({name:"checked",init:function(){this.siblings=Nm(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",Tm,!1),t.attachEvent&&t.addEventListener("click",Tm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Tm,!1),t.removeEventListener("click",Tm,!1)},handleChange:function(){fu.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),fu.end()},getValue:function(){return this.element.node.checked},unbind:function(){I(this.siblings,this)}}),Lm=Im,Vm=Pm.extend({name:"name",init:function(){this.siblings=Nm(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",Tm,!1),t.attachEvent&&t.addEventListener("click",Tm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Tm,!1),t.removeEventListener("click",Tm,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&Pm.prototype.handleChange.call(this)},rebound:function(t,e){var n;Pm.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){I(this.siblings,this)}}),Mm=Vm,Um=Pm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=Nm(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){I(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),s(t)?this.isChecked=R(t,e):this.isChecked=t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",Tm,!1),n.attachEvent&&n.addEventListener("click",Tm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Tm,!1),t.removeEventListener("click",Tm,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,Pm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ar).map(ur)}}),Wm=Um,zm=Pm.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",Tm,!1),t.attachEvent&&t.addEventListener("click",Tm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Tm,!1),t.removeEventListener("click",Tm,!1)},getValue:function(){return this.element.node.checked}}),Bm=zm,qm=Pm.extend({getInitialValue:function(){var t,e,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",Tm,!1)},unrender:function(){this.element.node.removeEventListener("change",Tm,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i;for(t=this.element.node.options,n=t.length,e=0;e<n;e+=1)if(i=t[e],t[e].selected)return i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,fu.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),$m=qm,Qm=$m.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",Tm,!1),void 0===(t=this.root.viewmodel.get(this.keypath))&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Tm,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,r,s;for(t=[],e=this.element.node.options,i=e.length,n=0;n<i;n+=1)r=e[n],r.selected&&(s=r._ractive?r._ractive.value:r.value,t.push(s));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&j(n,e)||$m.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,fu.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Zm=Qm,Hm=Pm.extend({render:function(){this.element.node.addEventListener("change",Tm,!1)},unrender:function(){this.element.node.removeEventListener("change",Tm,!1)},getValue:function(){return this.element.node.files}}),Km=Hm,Gm=Fm.extend({getInitialValue:function(){},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),Ym=hr,Jm=lr,Xm=fr,tv=dr,ev=pr,nv=/^event(?:\.(.+))?/,iv=yr,rv=br,sv={},ov={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},av=xr,uv=kr,hv=Er,cv=_r,lv=Ar,fv=function(t,e,n){this.init(t,e,n)};fv.prototype={bubble:Jm,fire:Xm,getAction:tv,init:ev,listen:rv,rebind:av,render:uv,resolve:hv,unbind:cv,unrender:lv};var dv=fv,pv=function(t,e){var n,i,r,s,o=[];for(i in e)if(e.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)s=new dv(t,r[n],e[i]),o.push(s);return o},mv=function(t,e){var n,i,r,s=this;this.element=t,this.root=n=t.root,"string"!=typeof(i=e.n||e)&&(r=new lb({template:i,root:n,owner:t}),i=r.toString(),r.unbind(),""===i)||(e.a?this.params=e.a:e.d&&(this.fragment=new lb({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready&&s.update()}),this.fn=g("decorators",n,i),this.fn||l(Ra(i,"decorator")))};mv.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var vv,gv,yv,bv=mv,wv=Rr,xv=jr,kv=Mr,Ev=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Xo?(gv={},yv=ca("div").style,vv=function(t){var e,n,i;if(t=Ev(t),!gv[t])if(void 0!==yv[t])gv[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=sa.length;e--;)if(n=sa[e],void 0!==yv[n+i]){gv[t]=n+i;break}return gv[t]}):vv=null;var _v,Av,Sv=vv;Xo?(Av=window.getComputedStyle||null.getComputedStyle,_v=function(t){var e,n,i,r,o;if(e=Av(this.node),"string"==typeof t)return o=e[Sv(t)],"0px"===o&&(o=0),o;if(!s(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],o=e[Sv(r)],"0px"===o&&(o=0),n[r]=o;return n}):_v=null;var Cv=_v,Ov=function(t,e){var n;if("string"==typeof t)this.node.style[Sv(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[Sv(n)]=t[n]);return this},Pv=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing])||(v(Ra(t.easing,"easing")),e=Ur):e="function"==typeof t.easing?t.easing:Ur,this.easing=e,this.start=Ga(),this.end=this.start+this.duration,this.running=!0,mu.add(this)};Pv.prototype={tick:function(t){var e,n;return!!this.running&&(t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0))},stop:function(){this.abort&&this.abort(),this.running=!1}};var Tv,Fv,Rv,jv,Nv,Dv,Iv,Lv,Vv=Pv,Mv=new RegExp("^-(?:"+sa.join("|")+")-"),Uv=function(t){return t.replace(Mv,"")},Wv=new RegExp("^(?:"+sa.join("|")+")([A-Z])"),zv=function(t){return t?(Wv.test(t)&&(t="-"+t),t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},Bv={},qv={};Xo?(Fv=ca("div").style,function(){void 0!==Fv.transition?(Rv="transition",jv="transitionend",Nv=!0):void 0!==Fv.webkitTransition?(Rv="webkitTransition",jv="webkitTransitionEnd",Nv=!0):Nv=!1}(),Rv&&(Dv=Rv+"Duration",Iv=Rv+"Property",Lv=Rv+"TimingFunction"),Tv=function(t,e,n,i,r){setTimeout(function(){var s,o,a,u,h;u=function(){o&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},s=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Iv]=i.map(Sv).map(zv).join(","),t.node.style[Lv]=zv(n.easing||"linear"),t.node.style[Dv]=n.duration/1e3+"s",h=function(e){var n;n=i.indexOf(Ev(Uv(e.propertyName))),n!==-1&&i.splice(n,1),i.length||(t.node.removeEventListener(jv,h,!1),a=!0,u())},t.node.addEventListener(jv,h,!1),setTimeout(function(){for(var r,c,l,f,d,p=i.length,v=[];p--;)f=i[p],r=s+f,Nv&&!qv[r]&&(t.node.style[Sv(f)]=e[f],Bv[r]||(c=t.getStyle(f),Bv[r]=t.getStyle(f)!=e[f],qv[r]=!Bv[r],qv[r]&&(t.node.style[Sv(f)]=c))),Nv&&!qv[r]||(void 0===c&&(c=t.getStyle(f)),l=i.indexOf(f),l===-1?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(l,1),d=/[^\d]*$/.exec(e[f])[0],v.push({name:Sv(f),interpolator:Na(parseFloat(c),parseFloat(e[f])),suffix:d}));v.length?new Vv({root:t.root,duration:n.duration,easing:Ev(n.easing||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){o=!0,u()}}):o=!0,i.length||(t.node.removeEventListener(jv,h,!1),a=!0,u())},0)},n.delay||0)}):Tv=null;var $v,Qv,Zv,Hv,Kv,Gv=Tv;if("undefined"!=typeof document){if($v="hidden",Kv={},$v in document)Zv="";else for(Hv=sa.length;Hv--;)Qv=sa[Hv],($v=Qv+"Hidden")in document&&(Zv=Qv);void 0!==Zv?(document.addEventListener(Zv+"visibilitychange",Wr),Wr()):("onfocusout"in document?(document.addEventListener("focusout",zr),document.addEventListener("focusin",Br)):(window.addEventListener("pagehide",zr),window.addEventListener("blur",zr),window.addEventListener("pageshow",Br),window.addEventListener("focus",Br)),Kv.hidden=!1)}var Yv,Jv,Xv,tg=Kv;Xo?(Jv=window.getComputedStyle||null.getComputedStyle,Yv=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return tg.hidden?(this.setStyle(t,e),Xv||(Xv=iu.resolve())):("string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this),new iu(function(t){var e,s,o,a,u,h;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),s=[],o=Jv(r.node),{},u=e.length;u--;)h=e[u],a=o[Sv(h)],"0px"===a&&(a=0),a!=i[h]&&(s.push(h),r.node.style[Sv(h)]=a);if(!s.length)return void t();Gv(r,i,n,s,t)}))}):Yv=null;var eg=Yv,ng=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},ig=qr,rg=function(t,e,n){this.init(t,e,n)};rg.prototype={init:kv,start:ig,getStyle:Cv,setStyle:Ov,animateStyle:eg,processParams:ng};var sg,og,ag=rg,ug=Qr;sg=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},og=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var hg=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Jr).join("")+this.conditionalAttributes.map(Jr).join(""),"option"===this.name&&Gr(this)&&(t+=" selected"),"input"===this.name&&Yr(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=Se(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),dl.test(this.template.e)||(t+="</"+this.template.e+">"),t)},cg=Xr,lg=ts,fg=function(t){this.init(t)};fg.prototype={bubble:Mp,detach:Up,find:Wp,findAll:zp,findAllComponents:Bp,findComponent:qp,findNextNode:$p,firstNode:Qp,getAttribute:Zp,init:wv,rebind:xv,render:ug,toString:hg,unbind:cg,unrender:lg};var dg=fg,pg=/^\s*$/,mg=/^\s*/,vg=function(t){var e,n,i,r;return e=t.split("\n"),n=e[0],void 0!==n&&pg.test(n)&&e.shift(),i=D(e),void 0!==i&&pg.test(i)&&e.pop(),r=e.reduce(ns,null),r&&(t=e.map(function(t){return t.replace(r,"")}).join("\n")),t},gg=is,yg=function(t,e){return e?t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},bg=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=Hh,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Jd.init(this,t),this.keypath||((n=gg(this.root,this.name,e))?(Pd.call(this),this.isNamed=!0,this.setTemplate(n)):v('Could not find template for partial "%s"',this.name))};bg.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Yd.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Jd.resolve,setValue:function(t){var e;void 0!==t&&t===this.value||(void 0!==t&&(e=gg(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=gg(this.root,this.name,this.parentFragment))&&(Pd.call(this),this.isNamed=!0),e||v('Could not find template for partial "%s"',this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&fu.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new lb({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,r;return e=this.fragment.toString(t),(n=this.parentFragment.items[this.index-1])&&1===n.type?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?yg(e,r[0]):e):e},unbind:function(){this.isNamed||Pd.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var wg,xg,kg,Eg=bg,_g=us,Ag=hs,Sg=new Xa("detach"),Cg=cs,Og=ls,Pg=fs,Tg=ds,Fg=ps,Rg=ms,jg=function(t,e,n,i){var r=t.root,s=t.keypath;i?r.viewmodel.smartUpdate(s,e,i):r.viewmodel.mark(s)},Ng=[],Dg=["pop","push","reverse","shift","sort","splice","unshift"];Dg.forEach(function(t){wa(Ng,t,{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,s,o,a;for(r=fh(this,t,n),s=Array.prototype[t].apply(this,arguments),fu.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],fu.addRactive(o.root),jg(o,this,0,r);return fu.end(),this._ractive.setting=!1,s}})}),wg={},wg.__proto__?(xg=function(t){t.__proto__=Ng},kg=function(t){t.__proto__=Array.prototype}):(xg=function(t){var e,n;for(e=Dg.length;e--;)n=Dg[e],wa(t,n,{value:Ng[n],configurable:!0})},kg=function(t){var e;for(e=Dg.length;e--;)delete t[Dg[e]]}),xg.unpatch=kg;var Ig,Lg,Vg,Mg=xg;Ig={filter:function(t){return s(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Lg(t,e,n)}},Lg=function(t,e,n){this.root=t,this.value=e,this.keypath=_(n),e._ractive||(wa(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Mg(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Lg.prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if((r=n.indexOf(this))===-1)throw new Error(Vg);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if((r=i.indexOf(this.root))===-1)throw new Error(Vg);i.splice(r,1)}}else delete t._ractive,Mg.unpatch(this.value)}},Vg="Something went wrong in a rather interesting way";var Ug,Wg,zg=Ig,Bg=/^\s*[0-9]+\s*$/,qg=function(t){return Bg.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Ug={filter:function(t,e,n){var i,r;return!!e&&(e=_(e),!((i=n.viewmodel.wrapped[e.parent.str])&&!i.magic)&&(r=n.viewmodel.get(e.parent),(!s(r)||!/^[0-9]+$/.test(e.lastKey))&&(r&&("object"==typeof r||"function"==typeof r))))},wrap:function(t,e,n){return new Wg(t,e,n)}},Wg=function(t,e,n){var i,r,s;if(n=_(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),(r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&r.set&&(s=r.set._ractiveWrappers))return void(s.indexOf(this)===-1&&s.push(this));vs(this,e,r)},Wg.prototype={get:function(){return this.value},reset:function(t){if(!this.updating)return this.updating=!0,this.obj[this.prop]=t,fu.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=qg(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,r;if(this.updating)return!1;t=Object.getOwnPropertyDescriptor(this.obj,this.prop),(e=t&&t.set)&&(i=e._ractiveWrappers,r=i.indexOf(this),r!==-1&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))}}}catch(t){Ug=!1}var $g,Qg,Zg=Ug;Zg&&($g={filter:function(t,e,n){return Zg.filter(t,e,n)&&zg.filter(t)},wrap:function(t,e,n){return new Qg(t,e,n)}},Qg=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Zg.wrap(t,e,n),this.arrayWrapper=zg.wrap(t,e,n)},Qg.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var Hg=$g,Kg=gs,Gg={},Yg=ws,Jg=xs,Xg=_s,ty=Ps,ey=Ts,ny=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};ny.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var iy=ny,ry=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};ry.prototype={constructor:ry,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,i=!1;if(this.getting){return p("The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`"),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,r,s;if(!i)for(s=t.length;s--;)if(e=t[s],r=n.viewmodel.get(e),!a(r,n.depValues[e.str]))return n.depValues[e.str]=r,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(t){m('Failed to compute "%s"',this.key.str),f(t.stack||t),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,i,r,s;for(n=this.softDeps,e=n.length;e--;)i=n[e],t.indexOf(i)===-1&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],n.indexOf(i)!==-1||this.hardDeps&&this.hardDeps.indexOf(i)!==-1||(r=!0,Fs(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(s=new iy(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=s,fu.addUnresolved(s)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=t.slice()),r}};var sy=ry,oy=Rs,ay={FAILED_LOOKUP:!0},uy=js,hy={},cy=Ds,ly=Is,fy=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};fy.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){if(this.resolved)return this.origin.get(this.map(t),e)},getValue:function(){if(this.keypath)return this.origin.get(this.keypath)},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var dy=Ls,py=function(t,e){var n,i,r;return n={},i=0,t.map(function(t,s){var o,a,u;a=i,u=e.length;do{if((o=e.indexOf(t,a))===-1)return r=!0,-1;a=o+1}while(n[o]&&a<u);return o===i&&(i+=1),o!==s&&(r=!0),n[o]=!0,o})},my=Vs,vy={},gy=Ws,yy=Bs,by=qs,wy=$s,xy=Zs,ky={implicit:!0},Ey={noCascade:!0},_y=Ks,Ay=Gs,Sy=function(t){var e,n,i=t.adapt,r=t.data,s=t.ractive,o=t.computed,a=t.mappings;this.ractive=s,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=ba(null),this.deps={computed:ba(null),default:ba(null)},this.depsMap={computed:ba(null),default:ba(null)},this.patternObservers=[],this.specials=ba(null),this.wrapped=ba(null),this.computations=ba(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=ba(null);for(e in a)this.map(_(e),a[e]);if(r)for(e in r)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(r[e]);for(e in o)a&&e in a&&l("Cannot map to a computed property ('%s')",e),this.compute(_(e),o[e]);this.ready=!0};Sy.prototype={adapt:Kg,applyChanges:Xg,capture:ty,clearCache:ey,compute:oy,get:uy,init:cy,map:ly,mark:dy,merge:my,register:gy,release:yy,reset:by,set:wy,smartUpdate:xy,teardown:_y,unregister:Ay};var Cy=Sy;Js.prototype={constructor:Js,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Xs(this.queue,e).push(t):to(this,t),delete this.inProcess[t._guid]}};var Oy=Js,Py=eo,Ty=/\$\{([^\}]+)\}/g,Fy=new Xa("construct"),Ry=new Xa("config"),jy=new Oy("init"),Ny=0,Dy=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Iy=so,Ly=co;co.prototype={bubble:function(){this.dirty||(this.dirty=!0,fu.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var Vy=function(t,e,n,r,o){var a,u,h,c,l,f,d={},p={},v={},g=[];for(u=t.parentFragment,h=t.root,o=o||{},i(d,o),o.content=r||[],d[""]=o.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=u;c;){if(c.owner.type===tc){l=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var i,r,o=n[e];if("string"==typeof o)i=bf(o),p[e]=i?i.value:o;else if(0===o)p[e]=!0;else{if(!s(o))throw new Error("erm wut");fo(o)?(v[e]={origin:t.root.viewmodel,keypath:void 0},r=lo(t,o[0],function(t){t.isSpecial?f?a.set(e,t.value):(p[e]=t.value,delete v[e]):f?a.viewmodel.mappings[e].resolve(t):v[e].keypath=t})):r=new Ly(t,o,function(t){f?a.set(e,t):p[e]=t}),g.push(r)}}),a=ba(e.prototype),Iy(a,{el:null,append:!0,data:p,partials:o,magic:h.magic||e.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:t,container:l,mappings:v,inlinePartials:d,cssIds:u.cssIds}),f=!0,t.resolvers=g,a},My=po,Uy=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},Wy=vo,zy=go,By=yo,qy=bo,$y=wo,Qy=new Xa("teardown"),Zy=ko,Hy=function(t,e){this.init(t,e)};Hy.prototype={detach:Ag,find:Cg,findAll:Og,findAllComponents:Pg,findComponent:Tg,findNextNode:Fg,firstNode:Rg,init:Wy,rebind:zy,render:By,toString:qy,unbind:$y,unrender:Zy};var Ky=Hy,Gy=function(t){this.type=Kh,this.value=t.template.c};Gy.prototype={detach:Sd,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var Yy=Gy,Jy=function(t){var e,n;this.type=tc,this.container=e=t.parentFragment.root,this.component=n=e.component,
this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",r=e._inlinePartials[i];r||(m('Could not find template for partial "'+i+'"',{ractive:t.root}),r=[]),this.fragment=new lb({owner:this,root:e.parent,template:r,pElement:this.containerFragment.pElement}),s(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],fu.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};Jy.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),I(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var Xy=Jy,tb=function(t){this.declaration=t.template.a};tb.prototype={init:Oa,render:Oa,unrender:Oa,teardown:Oa,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var eb=tb,nb=Eo,ib=Ao,rb=So,sb=Co,ob=To,ab=Ro,ub=function(t){this.init(t)};ub.prototype={bubble:pd,detach:md,find:vd,findAll:gd,findAllComponents:yd,findComponent:bd,findNextNode:wd,firstNode:xd,getArgsList:Ed,getNode:_d,getValue:Ad,init:nb,rebind:ib,registerIndexRef:function(t){var e=this.registeredIndexRefs;e.indexOf(t)===-1&&e.push(t)},render:rb,toString:sb,unbind:ob,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:ab};var hb,cb,lb=ub,fb=jo,db=["template","partials","components","decorators","events"],pb=new Xa("reset"),mb=function(t,e){function n(e,i,r){r&&r.partials[t]||e.forEach(function(e){e.type===Hh&&e.getPartialName()===t&&i.push(e),e.fragment&&n(e.fragment.items,i,r),s(e.fragments)?n(e.fragments,i,r):s(e.items)?n(e.items,i,r):e.type===Xh&&e.instance&&n(e.instance.fragment.items,i,e.instance),e.type===Zh&&(s(e.attributes)&&n(e.attributes,i,r),s(e.conditionalAttributes)&&n(e.conditionalAttributes,i,r))})}var i,r=[];return n(this.fragment.items,r),this.partials[t]=e,i=fu.start(this,!0),r.forEach(function(e){e.value=void 0,e.setValue(t)}),fu.end(),i},vb=No,gb=ph("reverse"),yb=Do,bb=ph("shift"),wb=ph("sort"),xb=ph("splice"),kb=Lo,Eb=Vo,_b=new Xa("teardown"),Ab=Uo,Sb=Wo,Cb=zo,Ob=new Xa("unrender"),Pb=ph("unshift"),Tb=Bo,Fb=new Xa("update"),Rb=qo,jb={add:Za,animate:yu,detach:wu,find:ku,findAll:Fu,findAllComponents:Ru,findComponent:ju,findContainer:Nu,findParent:Du,fire:Mu,get:Uu,insert:zu,merge:qu,observe:sh,observeOnce:oh,off:hh,on:ch,once:lh,pop:mh,push:vh,render:kh,reset:fb,resetPartial:mb,resetTemplate:vb,reverse:gb,set:yb,shift:bb,sort:wb,splice:xb,subtract:kb,teardown:Eb,toggle:Ab,toHTML:Sb,toHtml:Sb,unrender:Cb,unshift:Pb,update:Tb,updateModel:Rb},Nb=function(t,e,n){return n||Qo(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t},Db=Zo,Ib=Yo,Lb=function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=Vd(e.proxy.parentFragment))&&(i.index=Vd.resolve(n)),i):i};hb=function(t){if(!(this instanceof hb))return new hb(t);Iy(this,t)},cb={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Ib},getNodeInfo:{value:Lb},parse:{value:Bf},Promise:{value:iu},svg:{value:ra},magic:{value:na},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ha},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ia},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},xa(hb,cb),hb.prototype=i(jb,ua),hb.prototype.constructor=hb,hb.defaults=hb.prototype;if("function"!=typeof Date.now||"function"!=typeof String.prototype.trim||"function"!=typeof Object.keys||"function"!=typeof Array.prototype.indexOf||"function"!=typeof Array.prototype.forEach||"function"!=typeof Array.prototype.map||"function"!=typeof Array.prototype.filter||"undefined"!=typeof window&&"function"!=typeof window.addEventListener)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Vb=hb;return Vb});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvamF2YXNjcmlwdHMvZGFzaGJvYXJkLmpzIiwiYXBwL2phdmFzY3JpcHRzL3NpdGVtYXAtYmVoYXZpb3IuanMiLCJhcHAvamF2YXNjcmlwdHMvc2l0ZW1hcC5qcyIsImFwcC9qYXZhc2NyaXB0cy90ZW1wbGF0ZS5qcyIsImFwcC9qYXZhc2NyaXB0cy91cGxvYWQuanMiLCJhcHAvamF2YXNjcmlwdHMvdXJsLmpzIiwibm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9tb2RhbC5qcyIsIm5vZGVfbW9kdWxlcy9leHRlbmQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzIiwibm9kZV9tb2R1bGVzL2pzdHJlZS9kaXN0L2pzdHJlZS5qcyIsIm5vZGVfbW9kdWxlcy9wYXRoLWJyb3dzZXJpZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JhY3RpdmUvcmFjdGl2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtZQ3NCQSxTQUFTLHlCQUF3QixHQUM3QixHQUFJLEdBQVEsT0FBTyxPQUFTLEVBQU8sWUFBWSxLQUFLLE9BQU8sU0FBUyxPQUNwRSxPQUFPLElBQVMsbUJBQW1CLEVBQU0sR0FBRyxRQUFRLE1BQU8sTUF4Qi9ELEdBQUksR0FBSSxRQUFRLFNBR2hCLFFBQU8sRUFBSSxPQUFPLE9BQVMsRUFFM0IsUUFBUSxlQUFlLEVBT3ZCLElBQUksUUFBUyxPQUFPLFNBT3BCLFFBQU8sUUFBVSxRQUFRLGdCQUFnQixLQVF6QyxFQUFFLFdBZ0lBLFFBQVMsR0FBWSxHQUNuQixNQUFZLFVBQVIsSUFHUSxTQUFSLEdBSUcsR0F0SVQsRUFBRSwyQkFBMkIsR0FBRyxRQUFTLFNBQVMsR0FDaEQsRUFBSSxnQkFFSixJQUFJLEdBQWEsRUFBRSxFQUFJLGVBQ25CLEVBQWEsRUFBRSxLQUFLLFFB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TUFBTyxJQUFLLE9BQVEsSUFBSyxLQUFNLElBQUssTUFBTyxJQUFLLE1BQU8sSUFBSyxPQUFRLElBQUssT0FBUSxJQUFLLE9BQVEsSUFBSyxNQUFPLElBQUssS0FBTSxJQUFLLE9BQVEsSUFBSyxPQUFRLElBQUssTUFBTyxJQUFLLEtBQU0sSUFBSyxJQUFLLElBQUssT0FBUSxJQUFLLE9BQVEsSUFBSyxPQUFRLElBQUssTUFBTyxJQUFLLE9BQVEsSUFBSyxLQUFNLElBQUssT0FBUSxJQUFLLE9BQVEsSUFBSyxPQUFRLElBQUssT0FBUSxJQUFLLE1BQU8sSUFBSyxLQUFNLElBQUssT0FBUSxJQUFLLE1BQU8sSUFBSyxLQUFNLElBQUssTUFBTyxJQUFLLE1BQU8sSUFBSyxPQUFRLElBQUssT0FBUSxJQUFLLEtBQU0sSUFBSyxLQUFNLElBQUssS0FBTSxJQUFLLE1BQU8sSUFBSyxNQUFPLElBQUssS0FBTSxJQUFLLE1BQU8sSUFBSyxNQUFPLElBQUssUUFBUyxJQUFLLEtBQU0sSUFBSyxJQUFLLElBQUssTUFBTyxJQUFLLEtBQU0sSUFBSyxNQUFPLElBQUssT0FBUSxJQUFLLEdBQUksSUFBSyxHQUFJLElBQUssR0FBSSxJQUFLLFFBQVMsSUFBSyxHQUFJLElBQUssSUFBSyxJQUFLLE1BQU8sSUFBSyxJQUFLLElBQUssUUFBUyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQU8sSUFBSyxNQUFPLElBQUssS0FBTSxJQUFLLE1BQU8sSUFBSyxNQUFPLElBQUssUUFBUyxJQUFLLEtBQU0sSUFBSyxJQUFLLElBQUssTUFBTyxJQUFLLEtBQU0sSUFBSyxNQUFPLElBQUssT0FBUSxJQUFLLEdBQUksSUFBSyxHQUFJLElBQUssR0FBSSxJQUFLLFFBQVMsSUFBSyxHQUFJLElBQUssSUFBSyxJQUFLLE9BQVEsSUFBSyxNQUFPLElBQUssSUFBSyxJQUFLLFFBQVMsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxNQUFPLElBQUssU0FBVSxJQUFLLE1BQU8sSUFBSyxJQUFLLElBQUssS0FBTSxLQUFNLEtBQU0sS0FBTSxPQUFRLEtBQU0sS0FBTSxLQUFNLElBQUssS0FBTSxJQUFLLEtBQU0sSUFBSyxLQUFNLE1BQU8sS0FBTSxNQUFPLEtBQU0sTUFBTyxLQUFNLE1BQU8sS0FBTSxNQUFPLEtBQU0sTUFBTyxLQUFNLE1BQU8sS0FBTSxNQUFPLEtBQU0sT0FBUSxLQUFNLE9BQVEsS0FBTSxLQUFNLEtBQU0sT0FBUSxLQUFNLE9BQVEsS0FBTSxNQUFPLEtBQU0sTUFBTyxLQUFNLE9BQVEsS0FBTSxPQUFRLEtBQU0sTUFBTyxLQUFNLE1BQU8sS0FBTSxLQUFNLEtBQU0sTUFBTyxLQUFNLE9BQVEsS0FBTSxLQUFNLEtBQU0sTUFBTyxLQUFNLFFBQVMsS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLE1BQU8sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLE9BQVEsS0FBTSxLQUFNLEtBQU0sTUFBTyxLQUFNLE1BQU8sS0FBTSxNQUFPLEtBQU0sS0FBTSxLQUFNLE1BQU8sS0FBTSxHQUFJLEtBQU0sS0FBTSxLQUFNLElBQUssS0FBTSxNQUFPLEtBQU0sT0FBUSxLQUFNLE1BQU8sS0FBTSxLQUFNLEtBQU0sTUFBTyxLQUFNLElBQUssS0FBTSxJQUFLLEtBQU0sR0FBSSxLQUFNLElBQUssS0FBTSxJQUFLLEtBQU0sSUFBSyxLQUFNLE9BQVEsS0FBTSxJQUFLLEtBQU0sS0FBTSxLQUFNLE1BQU8sS0FBTSxHQUFJLEtBQU0sTUFBTyxLQUFNLEdBQUksS0FBTSxHQUFJLEtBQU0sSUFBSyxLQUFNLElBQUssS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxNQUFPLEtBQU0sT0FBUSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sTUFBTyxLQUFNLE1BQU8sS0FBTSxPQUFRLEtBQU0sT0FBUSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sSUFBSyxLQUFNLE9BQVEsS0FBTSxNQUFPLEtBQU0sT0FBUSxLQUFNLE1BQU8sTUFDNzlGLElBQXFCLEtBQU0sSUFBSyxLQUFNLElBQUssS0FBTSxLQUFNLEtBQU0sS0FBTSxJQUFLLEtBQU0sSUFBSyxLQUFNLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLElBQUssS0FBTSxJQUFLLEtBQU0sSUFBSyxJQUFLLElBQUssS0FDak0sR0FBZ0IsR0FBSSxRQUFPLDBCQUE0QixPQUFPLEtBQUssSUFBYyxLQUFLLEtBQU8sT0FBUSxLQW1FckcsR0FBVyxLQUNYLEdBQWMsS0FDZCxHQUFNLElBTU4sSUFtYkksSUFBWSxHQUFVLEdBQWlCLEdBQTBCLEdBQW9CLEdBQTJCLEdBbmJoSCxHQUFtQixZQUNuQixHQUFvQixZQUVwQixHQUFtQixTQUFVLEdBQ2hDLEdBQUksR0FBRyxFQUFTLEVBQVMsRUFBUyxDQUVsQyxLQUFLLEVBQUksRUFBRyxFQUFJLEVBQU0sT0FBUSxHQUFLLEVBQ2xDLEVBQVUsRUFBTSxHQUNoQixFQUFVLEVBQU0sRUFBSSxHQUNwQixFQUFVLEVBQU0sRUFBSSxHQUdoQixHQUFTLElBQVksR0FBVSxJQUFZLEdBQVMsSUFHbkQsR0FBa0IsS0FBSyxJQUFZLEdBQWlCLEtBQUssS0FHNUQsRUFBTSxFQUFJLEdBQUssRUFBUSxRQUFRLEdBQW1CLE1BR2xELEVBQU0sR0FBSyxFQUFRLFFBQVEsR0FBa0IsS0FNM0MsR0FBVSxJQUFZLEdBQVMsSUFDOUIsR0FBa0IsS0FBSyxJQUFZLEdBQVMsRUFBUSxFQUFFLEtBQU8sR0FBaUIsS0FBSyxFQUFRLEVBQUUsTUFDaEcsRUFBTSxFQUFJLEdBQUssRUFBUSxRQUFRLEdBQW1CLE1BQ2xELEVBQVEsRUFBRSxHQUFLLEVBQVEsRUFBRSxHQUFHLFFBQVEsR0FBa0IsS0FNcEQsR0FBUyxJQUFZLEdBQVUsS0FDbEMsRUFBa0IsRUFBUyxFQUFRLEdBRS9CLEdBQVMsSUFBb0IsR0FBa0IsS0FBSyxJQUFvQixHQUFpQixLQUFLLEtBQ2pHLEVBQVEsRUFBRSxFQUFRLEVBQUUsT0FBUyxHQUFLLEVBQWdCLFFBQVEsR0FBbUIsTUFDN0UsRUFBTSxHQUFLLEVBQVEsUUFBUSxHQUFrQixLQUtoRCxPQUFPLElBZUosR0FBaUIsU0FBVSxFQUFPLEVBQWdCLEdBQ3JELEdBQUksRUFFQSxJQUVpQixpQkFEcEIsRUFBTyxFQUFNLE1BRVosRUFBTyxFQUFLLFFBQVEsRUFBZ0IsSUFFL0IsRUFHSixFQUFNLEdBQUssRUFGWCxFQUFNLFNBT0wsR0FFaUIsaUJBRHBCLEVBQU8sRUFBUyxNQUVmLEVBQU8sRUFBSyxRQUFRLEVBQWlCLElBRWhDLEVBR0osRUFBTSxFQUFNLE9BQVMsR0FBSyxFQUYxQixFQUFNLFFBUU4sR0FBZ0IsR0FDaEIsR0FBdUIsZ0JBQ3ZCLEdBQTZCLG1DQUM3QixHQUFtQyxnQkFDbkMsR0FBcUIsZ0JBQ3JCLEdBQWlCLGtCQUNqQixHQUFrQixrQkFxSGxCLEdBQXlCLEdBQ3pCLEdBQW9CLHVDQTRCcEIsR0FBaUIsU0FBVSxFQUFVLEdBQ3hDLEdBQUksR0FBRyxFQUFPLENBR2QsS0FEQSxFQUFJLEVBQVEsT0FDTCxLQUFLLENBSVgsS0FIQSxFQUFRLEVBQVMsUUFBUSxFQUFRLEtBSWhDLE1BQU8sRUFHSixNQUFXLE1BSVYsR0FBVSxFQUFRLEtBQ3RCLEVBQVMsSUFJWCxNQUFPLEtBQVcsR0FHZixHQUF3QixHQUV4QixHQUF1QixnQkFDdkIsR0FBb0MsZUF1S3hDLEtBQ0MsTUFBUSxFQUNSLE9BQVMsRUFDVCxVQUFXLE9BQ1gsS0FBUSxNQUdULEdBQWtCLEdBQUksUUFBTyxPQUFTLE9BQU8sS0FBSyxJQUFVLEtBQUssS0FBTyxLQUN4RSxHQUEyQiw4RkFDM0IsR0FBcUIsa0JBQ3JCLEdBQTRCLGtCQUM1QixHQUFpQixRQUVqQixHQUFhLEdBQWEsUUFDekIsS0FBTSxTQUFVLEVBQUssR0FDcEIsS0FBSyxPQUFTLEVBQVEsT0FDdEIsS0FBSyxtQkFHTixZQUFhLFNBQVUsR0FDdEIsTUFBc0IsS0FBbEIsRUFBTyxRQUFpQixHQUFlLEtBQUssS0FBSyxXQUk1QyxNQUFPLEVBQU8sR0FBRyxHQUhsQixNQU1ULFlBQWEsU0FBd0IsR0FDcEMsR0FBSSxFQUVKLE9BQUssR0FBTyxRQUlaLEVBQWMsRUFBTyxhQUFhLElBRTlCLEdBQWUsRUFBTyxPQUFPLGVBQWUsSUFDdEMsRUFBRyxFQUFPLE9BQU8sSUFEM0IsUUFMUSxNQVFOLFNBQW9CLEdBQ3RCLEdBQUksRUFFSixJQUFJLEVBQVUsRUFBTyxhQUFhLElBQ2pDLE9BQVMsRUFBRyxHQUFTLEtBRXBCLFNBQW1CLEdBQ3JCLEdBQUksRUFFSixJQUFJLEVBQVMsRUFBTyxhQUFhLElBQ2hDLE9BQVMsR0FBSSxJQUVaLFNBQW1CLEdBQ3JCLEdBQ0ksR0FEQSxFQUFnQixHQUFrQixFQUd0QyxPQUFJLEtBQWtCLEVBQVMsRUFBTyxTQUVwQyxFQUFHLEVBQWMsRUFBRSxRQUFRLEdBQW9CLFNBQVUsRUFBTyxHQUMvRCxNQUFPLEtBQU0sR0FBUyxFQUFPLEdBQU0sS0FLL0IsR0FDTCxTQUFtQixHQUNyQixHQUFJLEdBQVEsQ0FFWixLQUFLLEVBQU8sWUFBWSxLQUN2QixNQUFPLEtBT1IsSUFKQSxLQUVBLEVBQU8sa0JBRUgsRUFBTyxZQUFZLEtBQ3RCLE9BQVMsRUFBRyxFQUdiLE1BQU8sRUFBTyxHQUFnQixJQUFTLENBS3RDLEdBSkEsRUFBTyxFQUFLLEtBQU8sRUFBSyxNQUV4QixFQUFPLGtCQUVILEVBQU8sWUFBWSxLQUN0QixPQUFTLEVBQUcsRUFHYixLQUFLLEVBQU8sWUFBWSxLQUN2QixNQUFPLE1BSVQsTUFBTyxPQUNMLFNBQWtCLEdBQ3BCLEdBQUksR0FBUSxDQUVaLEtBQUssRUFBTyxZQUFZLEtBQ3ZCLE1BQU8sS0FPUixJQUpBLEtBRUEsRUFBTyxrQkFFSCxFQUFPLFlBQVksS0FDdEIsT0FBUyxFQUFHLEVBR2IsTUFBTyxFQUFhLEVBQU8sUUFBUSxDQUtsQyxHQUpBLEVBQU8sS0FBSyxFQUFXLEdBRXZCLEVBQU8sa0JBRUgsRUFBTyxZQUFZLEtBQ3RCLE9BQVMsRUFBRyxFQUdiLEtBQUssRUFBTyxZQUFZLEtBQ3ZCLE1BQU8sS0FHUixHQUFPLGtCQUdSLE1BQU8sU0FpQ1QsSUFZSSxJQVpBLEdBQVksU0FBVSxFQUFLLEdBSzlCLE1BSmEsSUFBSSxJQUFXLEdBQzNCLE9BQVEsSUFHSyxRQUlYLEdBQTJCLEdBQzNCLEdBQW9CLGdDQUNwQixHQUEwQixRQUc5QixJQUFtQixHQUFhLFFBQy9CLFlBQWEsS0F5RmQsSUFPSSxJQVBBLEdBQWlCLGdDQUNqQixHQUF1QixhQUN2QixHQUFZLE1BQ1osR0FBb0IsZ0RBQ3BCLEdBQXFCLHlGQUNyQixJQUFlLGNBQWUsS0FBTSxNQUFPLEtBQU0sTUFBTyxLQUFNLFVBQVcsS0FDekUsSUFBWSxTQUFTLEVBSXpCLEtBQ0MsSUFBSyxNQUNMLElBQUssS0FBTSxNQUNYLElBQUssS0FBTSxNQUNYLEVBQUcsMElBQTBJLE1BQU0sS0FDbkosSUFBSyxLQUFNLE1BQ1gsSUFBSyxLQUFNLE1BQ1gsVUFBVyxZQUNYLFFBQVMsU0FBVSxZQUNuQixPQUFRLFFBQVMsU0FDakIsT0FBUSxRQUFTLFNBQ2pCLE9BQVEsU0FDUixJQUFLLEtBQU0sU0FDWCxJQUFLLEtBQU0sS0FBTSxNQUNqQixJQUFLLEtBQU0sS0FBTSxNQUdsQixJQThRSSxJQTlRQSxHQUF5QixHQXNOekIsR0FBc0IsR0E2Q3RCLEdBQXFCLEdBQ3JCLEdBQThCLHlCQUs5QixHQUEwQyxHQUUxQyxHQUFlLFdBQ2YsR0FBYyx1Q0FDZCxHQUFnQixTQWlEaEIsR0FBMEMsR0FDMUMsR0FBa0Msa0JBdURsQyxHQUEwQixHQTBDMUIsR0FBUyxHQUVULElBQW9CLEdBQXNCLEdBQXdCLEdBQXNCLEdBQXNCLEdBQTJCLElBQ3pJLElBQWtCLElBQ2xCLElBQWtCLEdBQXdCLEdBQXNCLElBRWhFLEdBQWlCLE9BS2pCLElBQVcsR0FBeUIsR0FBNEIsR0FBd0IsSUFDeEYsSUFBbUIsR0FBeUMsR0FFaEUsSUFBaUIsR0FBYSxRQUM3QixLQUFNLFNBQVUsRUFBSyxHQUNwQixHQUFJLEdBQW1CLEVBQVEsbUJBQXFCLE1BQU8sT0FDdkQsRUFBbUIsRUFBUSxtQkFBcUIsS0FBTSxNQUN0RCxFQUF5QixFQUFRLHlCQUEyQixNQUFPLE1BRXZFLE1BQUssbUJBQXFCLEVBQVEsYUFBZSxLQUFNLE1BRXZELEtBQUssT0FBVSxVQUFVLEVBQU8sVUFBVSxFQUFPLEtBQU0sS0FBSyxtQkFBbUIsR0FBSSxNQUFPLEtBQUssbUJBQW1CLEdBQUksUUFBUyxLQUFzQixVQUFVLEVBQU8sVUFBVSxFQUFNLEtBQU0sRUFBaUIsR0FBSSxNQUFPLEVBQWlCLEdBQUksUUFBUyxLQUFvQixVQUFVLEVBQU0sVUFBVSxFQUFPLEtBQU0sRUFBaUIsR0FBSSxNQUFPLEVBQWlCLEdBQUksUUFBUyxLQUFvQixVQUFVLEVBQU0sVUFBVSxFQUFNLEtBQU0sRUFBdUIsR0FBSSxNQUFPLEVBQXVCLEdBQUksUUFBUyxLQUUzZSxLQUFLLG1CQUVMLEtBQUssYUFBZSxFQUNwQixLQUFLLGdCQUVMLEtBQUssYUFDSixRQUFTLEVBQVEsYUFBZSxFQUFRLFlBQVksVUFBVyxFQUMvRCxPQUFRLEVBQVEsYUFBZSxFQUFRLFlBQVksU0FBVSxHQUcxRCxFQUFRLFlBQWEsSUFDeEIsRUFBUSxVQUVQLFNBQVUseUhBQXlILE1BQU0sS0FDekksaUJBQWlCLElBSW5CLEtBQUssY0FBZ0IsRUFBUSxpQkFBa0IsRUFDL0MsS0FBSyxtQkFBcUIsRUFBUSxtQkFDbEMsS0FBSyxpQkFBbUIsRUFBUSxVQUFZLEVBQVEsU0FBUyxTQUM3RCxLQUFLLHdCQUEwQixFQUFRLFVBQVksRUFBUSxTQUFTLGdCQUNwRSxLQUFLLHFCQUF1QixFQUFRLHNCQUdyQyxZQUFhLFNBQVUsR0FFdEIsTUFBSyxHQUFPLFFBSVIsS0FBSyxhQUFlLEdBQ3ZCLEtBQUssTUFBTSwyQkFHWixHQUFjLEVBQU8sR0FBRyxFQUFHLEtBQUssY0FBZSxLQUFLLG9CQUFxQixLQUFLLG9CQUFxQixLQUFLLG9CQUVqRyxFQUFPLEtBVEosS0FBTyxFQUFHLEtBWXJCLFlBQWEsSUFFYixpQkFBa0IsV0FHakIsS0FBSyxLQUFLLEtBQUssU0FBVSxFQUFHLEdBQzNCLE1BQU8sR0FBRSxLQUFLLE9BQVMsRUFBRSxLQUFLLFdBS2pDLElBd05JLElBQWtDLEdBQVUsR0F4TjVDLElBQWdCLHFCQUFzQixXQUFZLGdCQUFpQixhQUFjLG1CQUFvQixlQUVyRyxJQUNILE9BQVEsR0FBUSxXQUFZLEdBQVksU0FBVSxHQUFVLGdCQUFpQixHQUFpQixhQUFjLEdBQzVHLE1BQU8sSUFzRUosR0FBa0IsR0FFbEIsSUFDSCxLQUFNLFdBRU4sT0FBUSxTQUFnQixFQUFRLEVBQU8sR0FDdEMsR0FBSSxFQUdBLGFBQWMsS0FDakIsRUFBVyxFQUFRLFNBR2xCLEVBQU0sU0FEaUIsa0JBQWIsR0FDTyxFQUVBLEdBQWMsRUFBVSxLQUs1QyxLQUFNLFNBQWMsRUFBUSxFQUFTLEdBQ3BDLEdBQUksR0FBVSxDQUtkLEdBQVcsWUFBYyxHQUFVLEVBQVEsU0FBVyxFQUFPLFVBQVUsU0FFL0Msa0JBQWIsS0FDVixFQUFLLEVBQ0wsRUFBVyxHQUFtQixFQUFTLEdBRXZDLEVBQVEsUUFBUSxVQUNmLEdBQUksRUFDSixPQUFRLElBSVYsRUFBVyxHQUFjLEVBQVUsR0FNbkMsRUFBUSxTQUFXLEVBQVMsRUFFeEIsRUFBUyxHQUNaLEdBQWUsRUFBUSxTQUFVLEVBQVMsSUFJNUMsTUFBTyxTQUFVLEdBQ2hCLEdBQ0ksR0FEQSxFQUFTLEdBQVcsRUFHeEIsSUFBSSxFQU1ILE1BTEEsR0FBUyxHQUFjLEVBQVEsR0FFL0IsRUFBUSxTQUFXLEVBQU8sRUFDMUIsR0FBZSxFQUFRLFNBQVUsRUFBTyxHQUFHLElBRXBDLElBK0VOLEdBQW9CLEVBSXhCLEtBQW9DLFdBQVksYUFBYyxXQUFZLGFBQWMsU0FBVSxTQUFVLGdCQUFpQixXQUFZLGVBRXpJLEdBQVcsU0FBVSxFQUFNLEdBQzFCLEtBQUssS0FBTyxFQUNaLEtBQUssWUFBYyxHQUdwQixHQUFTLFdBQ1IsWUFBYSxHQUViLE9BQVEsU0FBVSxFQUFRLEVBQU8sR0FDaEMsS0FBSyxVQUFVLEtBQUssWUFBYyxFQUFPLFNBQVcsRUFBUSxLQUFLLFlBQWMsRUFBUSxFQUFNLFlBQWEsSUFHM0csS0FBTSxhQUVOLFVBQVcsU0FBVSxFQUFRLEVBQVEsR0FDcEMsR0FFSSxHQUZBLEVBQU8sS0FBSyxLQUNaLEVBQVMsRUFBUSxFQUdyQixHQUFXLEdBQU8sRUFBTyxHQUV6QixLQUFLLEdBQUksS0FBTyxHQUNmLEVBQVMsR0FBTyxFQUFPLEVBR3hCLEdBQU8sR0FBUSxHQUdoQixNQUFPLFNBQVUsR0FDaEIsR0FBSSxHQUFXLEVBQVEsS0FBSyxNQUN4QixHQUFVLENBWWQsT0FYQSxRQUFPLEtBQUssR0FBVSxRQUFRLFNBQVUsR0FDdkMsR0FBSSxHQUFPLEVBQVMsRUFDaEIsR0FBSyxNQUNKLEVBQUssSUFBSSxRQUNaLEVBQVMsR0FBTyxFQUFLLFVBRWQsR0FBUyxHQUVqQixHQUFVLEtBR0wsSUFJVCxHQUFhLEdBQWlDLElBQUksU0FBVSxHQUMzRCxNQUFPLElBQUksSUFBUyxFQUFlLGFBQVQsSUFHM0IsSUF3RkksSUFBUSxHQUFPLEdBQWEsR0FBUSxHQUFlLEdBeEZuRCxHQUFvQixHQU9wQixHQUFnQixHQW9EaEIsR0FBbUIsRUErQnZCLEtBQ0MsTUFBTyxHQUNQLElBQUssR0FDTCxLQUFNLEdBQ04sU0FBVSxJQUdYLEdBQWMsT0FBTyxLQUFLLElBRTFCLEdBQWdCLEdBQVEsR0FBWSxPQUFPLFNBQVUsR0FDcEQsT0FBUSxHQUFPLE1BSWhCLEdBQWdCLEdBQVEsR0FBWSxPQUFPLEdBQWtCLElBQUksU0FBVSxHQUMxRSxNQUFPLEdBQUUsU0FHVixNQUFXLE9BQU8sR0FBWSxPQUFPLFNBQVUsR0FDOUMsT0FBUSxHQUFrQixLQUFTLEdBQU8sS0FDdkMsR0FBbUIsR0FBTyxLQUFNLEdBQU8sU0FBVSxHQUFPLEtBRTVELElBQ0MsT0FBUSxTQUFVLEVBQVEsRUFBTyxHQUNoQyxNQUFPLElBQVUsU0FBVSxFQUFRLEVBQU8sSUFHM0MsS0FBTSxTQUFVLEVBQVEsRUFBUyxHQUNoQyxNQUFPLElBQVUsT0FBUSxFQUFRLEVBQVMsSUFHM0MsTUFBTyxTQUFVLEdBQ2hCLE1BQU8sSUFBTSxPQUFPLFNBQVUsR0FDN0IsTUFBTyxHQUFFLE9BQVMsRUFBRSxNQUFNLEtBQ3hCLElBQUksU0FBVSxHQUNoQixNQUFPLEdBQUUsUUFNWCxNQUFPLEdBd0RSLElBQUksSUFBZ0IsR0FFaEIsR0FBbUIsR0FVbkIsR0FBNEIsR0EyQjVCLEdBQTBCLEdBbUIxQixHQUE2QixHQW1CN0IsR0FBdUMsR0FtQnZDLEdBQW1DLEdBbUJuQyxHQUF5QixHQThCekIsR0FBc0IsR0FVdEIsR0FBc0IsR0FnQ3RCLEdBQWMsR0FxQmQsR0FBVSxHQWNWLEdBQXFCLEdBcUJyQixHQUFnQixXQUNuQixNQUFPLEdBQVcsS0FBSyxPQUdwQixHQUFPLFNBQVUsR0FDcEIsS0FBSyxLQTUvR0ssRUE2L0dWLEtBQUssS0FBTyxFQUFRLFNBR3JCLElBQUssV0FDSixPQUFRLEdBRVIsVUFBVyxXQUNWLE1BQU8sTUFBSyxNQUdiLE9BQVEsV0FLUCxNQUpLLE1BQUssT0FDVCxLQUFLLEtBQU8sU0FBUyxlQUFlLEtBQUssT0FHbkMsS0FBSyxNQUdiLFNBQVUsU0FBVSxHQUNuQixNQUFPLEdBQVMsR0FBVyxLQUFLLE1BQVEsS0FBSyxNQUc5QyxTQUFVLFNBQVUsR0FDbkIsR0FBSSxFQUNILE1BQU8sTUFBSyxVQUtmLElBQUksSUFBYSxHQUViLEdBQWdCLEdBYWhCLEdBQW9CLEdBTXBCLEdBQW9CLFNBQVUsRUFBTyxFQUFLLEdBQzdDLEdBQUksRUFFSixNQUFLLElBQU0sRUFDWCxLQUFLLFVBQVcsRUFFaEIsS0FBSyxLQUFPLEVBQU0sS0FDbEIsS0FBSyxlQUFpQixFQUFNLGVBQzVCLEtBQUssU0FBVyxFQUVoQixFQUFVLEdBQWtCLEVBQU0sS0FBTSxFQUFLLEVBQU0sZ0JBQ3BDLFFBQVgsRUFDSCxLQUFLLFFBQVEsR0FFYixHQUFlLGNBQWMsTUFJL0IsSUFBa0IsV0FDakIsUUFBUyxTQUFVLEdBQ2QsS0FBSyxVQUFZLEdBR3BCLEdBQWUsY0FBYyxNQUc5QixLQUFLLFVBQVcsRUFFaEIsS0FBSyxRQUFVLEVBQ2YsS0FBSyxTQUFTLElBR2YsZ0JBQWlCLFdBQ2hCLEtBQUssUUFBUSxFQUFXLEtBQUssT0FHOUIsT0FBUSxTQUFVLEVBQVksR0FDN0IsR0FBSSxFQUVnQixTQUFoQixLQUFLLFNBR1EsVUFGaEIsRUFBVSxLQUFLLFFBQVEsUUFBUSxFQUFZLEtBSTFDLEtBQUssUUFBUSxJQUtoQixPQUFRLFdBQ0YsS0FBSyxVQUNULEdBQWUsaUJBQWlCLE9BS25DLElBQUksSUFBOEIsR0FFOUIsR0FBa0IsU0FBVSxFQUFPLEVBQUssR0FDM0MsS0FBSyxlQUFpQixFQUFNLGVBQzVCLEtBQUssSUFBTSxFQUNYLEtBQUssU0FBVyxFQUVoQixLQUFLLFVBR0YsSUFDSCxZQUFjLE9BQVEsSUFBSyxNQUFPLFlBQ2xDLFVBQVksT0FBUSxJQUFLLE1BQU8sVUFDaEMsUUFBVSxPQUFRLElBQUssTUFBTyxNQUFPLFVBWXRDLElBQWdCLFdBQ2YsT0FBUSxXQUNQLEdBR0ksR0FIQSxFQUFNLEtBQUssSUFDWCxFQUFXLEtBQUssZUFDaEIsRUFBTyxHQUFNLEVBR2pCLEtBQUssRUFDSixLQUFNLElBQUksT0FBTSw4QkFBaUMsRUFBTSxxREFJeEQsSUFBSSxLQUFLLE9BQ1IsTUFBTyxNQUFLLFNBQVMsRUFBVyxJQUFNLEVBQUssT0FBUyxHQUFRLEtBQUssT0FBUSxJQUkxRSxJQUFJLEVBQUssS0FBSyxRQUFRLFlBQWMsR0FBSyxFQUFLLEtBQUssUUFBUSxVQUFZLEVBQ3RFLEtBQU8sR0FBVSxDQUNoQixHQUFJLEVBQVMsTUFBTSxpQkFBbUIsSUFBc0QsVUFBckMsRUFBUSxHQUFRLEVBQVUsSUFLaEYsTUFKQSxNQUFLLE9BQVMsRUFFZCxFQUFTLGlCQUFpQixNQUVuQixLQUFLLFNBQVMsRUFBVyxJQUFNLEVBQUssT0FBUyxHQUtwRCxJQURJLEVBQVMsUUFBVSxFQUFTLE9BQVMsRUFBUyxNQUFNLFdBQWEsRUFBUyxNQUFNLFVBQVUsaUJBQW1CLEVBQVMsTUFBTSxVQUFVLFNBQVMsU0FDeEksRUFBUyxNQUFNLFVBQVUsZUFFekIsRUFBUyxXQUl0QixNQUFPLEdBQVUsQ0FDaEIsR0FBMEMsVUFBckMsRUFBUSxHQUFRLEVBQVUsSUFDOUIsTUFBTyxNQUFLLFNBQVMsRUFBVyxJQUFNLEVBQUssT0FBUyxFQUFNLEtBRzNELEdBQVcsRUFBUyxTQUt2QixPQUFRLFdBQ0gsS0FBSyxRQUNSLEtBQUssT0FBTyxtQkFBbUIsT0FLbEMsSUFBSSxJQUE0QixHQUU1QixHQUFnQixTQUFVLEVBQU8sRUFBSyxHQUN6QyxLQUFLLGVBQWlCLEVBQU0sZUFDNUIsS0FBSyxJQUFNLEVBQ1gsS0FBSyxTQUFXLEVBRWhCLEVBQUksSUFBSSxTQUFTLGlCQUFpQixNQUVsQyxLQUFLLFNBR04sSUFBYyxXQUNiLE9BQVEsV0FDUCxHQUFJLEdBQ0EsRUFBTSxLQUFLLElBQUksR0FRTCxXQUxiLEVBRGlCLE1BQWQsRUFBSSxJQUFJLEVBQ0gsSUFBTSxFQUFJLFNBQVMsSUFFbkIsSUFBTSxFQUFJLFNBQVMsUUFJM0IsS0FBSyxTQUFTLEVBQVcsSUFBTSxLQUlqQyxPQUFRLFdBQ1AsS0FBSyxJQUFJLElBQUksU0FBUyxtQkFBbUIsT0FJM0MsSUFBSSxJQUEwQixHQUUxQixHQUEwQixFQTREOUIsSUFBYyxRQUFVLFNBQWlCLEdBQ3hDLEdBQ0ksR0FDQSxFQUZBLElBSUosS0FBSyxJQUFLLEdBQVEsS0FDakIsRUFBTSxFQUFRLEtBQUssR0FDbkIsRUFBSyxFQUFJLElBQUksR0FBbUIsTUFBZCxFQUFJLElBQUksRUFBWSxFQUFJLFNBQVMsSUFBTSxFQUFJLFNBQVMsS0FHdkUsT0FBTyxHQUdSLElBbUNJLElBbkNBLEdBQW9DLEdBZXBDLEdBQStCLEdBQy9CLE1Bb0JBLEdBQXFDLFNBQVMsVUFBVSxJQUU1RCxJQUFxQixTQUFVLEVBQU8sRUFBZ0IsRUFBWSxHQUNqRSxHQUVJLEdBRkEsRUFBUSxJQUlaLEdBQVUsRUFBTSxLQUVoQixLQUFLLEtBQU8sRUFDWixLQUFLLGVBQWlCLEVBQ3RCLEtBQUssU0FBVyxFQUNoQixLQUFLLE1BQVEsRUFDYixLQUFLLElBQU0sRUFBVyxFQUN0QixLQUFLLFlBR0wsS0FBSyxRQUFVLEVBQVcsRUFBRSxPQUM1QixLQUFLLGFBQWUsRUFBVyxFQUFFLElBQUksU0FBVSxFQUFLLEdBQ25ELE1BQU8sSUFBa0MsRUFBTyxFQUFLLFNBQVUsR0FDOUQsRUFBTSxRQUFRLEVBQUcsT0FJbkIsS0FBSyxPQUFRLEVBQ2IsS0FBSyxVQUdOLEdBQW1CLFdBQ2xCLE9BQVEsV0FDRixLQUFLLFFBSVYsS0FBSyxhQUFlLEdBQWdCLEtBQUssSUFBSyxLQUFLLFVBQ25ELEtBQUssUUFBVSxHQUF3QixLQUFLLGNBRTVDLEtBQUssa0JBQ0wsS0FBSyxTQUFTLEtBQUssV0FHcEIsT0FBUSxXQUdQLElBRkEsR0FBSSxHQUVHLEVBQVcsS0FBSyxhQUFhLE9BQ25DLEVBQVMsVUFJWCxRQUFTLFNBQVUsRUFBTyxHQUN6QixLQUFLLFNBQVMsR0FBUyxFQUN2QixLQUFLLFVBR04sZ0JBQWlCLFdBQ2hCLEdBRUksR0FBYSxFQUFjLEVBQVcsRUFBUyxFQUYvQyxFQUFRLElBSVosR0FBVSxLQUFLLFFBQ2YsRUFBYyxLQUFLLEtBQUssVUFBVSxhQUFhLEVBQVEsS0FHbEQsRUF1Q0osS0FBSyxLQUFLLFVBQVUsS0FBSyxJQXRDekIsRUFBSyxHQUE2QixLQUFLLElBQUssS0FBSyxhQUFhLFFBRTlELEVBQWUsS0FBSyxTQUFTLElBQUksU0FBVSxHQUMxQyxHQUFJLEVBRUosT0FBZ0IsY0FBWixFQUNJLGFBTUosRUFBUSxXQUNYLEVBQVEsRUFBUSxNQUNULFdBQ04sTUFBTyxLQUlGLFdBQ04sR0FBSSxHQUFRLEVBQU0sS0FBSyxVQUFVLElBQUksR0FBVyxVQUFVLEVBQU0sYUFBYSxHQUk3RSxPQUhxQixrQkFBVixLQUNWLEVBQVEsR0FBYSxFQUFPLEVBQU0sT0FFNUIsS0FJVCxHQUNDLEtBQU0sS0FBSyxTQUFTLE9BQU8sSUFDM0IsT0FBUSxXQUNQLEdBQUksR0FBTyxFQUFhLElBQUksR0FDNUIsT0FBTyxHQUFHLE1BQU0sS0FBTSxLQUl4QixFQUFjLEtBQUssS0FBSyxVQUFVLFFBQVEsRUFBUyxLQU1yRCxPQUFRLFNBQVUsRUFBWSxHQUU3QixLQUFLLGFBQWEsUUFBUSxTQUFVLEdBQ25DLE1BQU8sR0FBRSxPQUFPLEVBQVksTUFLL0IsSUFBSSxJQUErQixHQWtGL0IsR0FBaUIsU0FBVSxFQUFVLEVBQVUsR0FDbEQsR0FBSSxHQUFRLElBRVosTUFBSyxTQUFXLEVBQ2hCLEtBQUssS0FBTyxFQUFTLEtBQ3JCLEtBQUssZUFBaUIsRUFDdEIsS0FBSyxVQUFZLEVBQVMsS0FBSyxVQUVQLGdCQUFiLEdBQ1YsS0FBSyxNQUFRLEVBSUwsRUFBUyxJQUFNLEdBQ3ZCLEtBQUssWUFBYyxHQUFrQyxLQUFNLEVBQVMsRUFBRyxTQUFVLEdBQ2hGLEVBQU0sUUFBUSxLQU1mLEdBQUksSUFBNkIsRUFBVSxFQUFnQixFQUFVLFNBQVUsR0FDOUUsRUFBTSxRQUFRLEtBS2pCLElBQWUsV0FDZCxRQUFTLFNBQVUsR0FDZCxLQUFLLFNBQ1IsS0FBSyxVQUFVLFdBQVcsS0FBSyxRQUFTLE1BR3pDLEtBQUssUUFBVSxFQUNmLEtBQUssTUFBUSxLQUFLLFVBQVUsSUFBSSxHQUVoQyxLQUFLLE9BRUwsS0FBSyxTQUFTLFVBR2YsS0FBTSxXQUNMLEtBQUssVUFBVSxTQUFTLEtBQUssUUFBUyxPQUd2QyxPQUFRLFNBQVUsRUFBWSxHQUN6QixLQUFLLGFBQ1IsS0FBSyxZQUFZLE9BQU8sRUFBWSxJQUl0QyxTQUFVLFNBQVUsR0FDbkIsS0FBSyxNQUFRLEVBQ2IsS0FBSyxTQUFTLFVBR2YsT0FBUSxXQUNILEtBQUssU0FDUixLQUFLLFVBQVUsV0FBVyxLQUFLLFFBQVMsTUFHckMsS0FBSyxhQUNSLEtBQUssWUFBWSxVQUluQixnQkFBaUIsV0FDWixLQUFLLGFBQ1IsS0FBSyxZQUFZLG1CQUtwQixJQUFJLElBQTZDLEdBRTdDLEdBQThCLFNBQVUsRUFBVSxFQUFVLEdBQy9ELEdBRUksR0FBUyxFQUFLLEVBQVMsRUFGdkIsRUFBUSxJQUlaLE1BQUssZUFBaUIsRUFBaUIsRUFBUyxlQUNoRCxLQUFLLEtBQU8sRUFBVSxFQUFTLEtBQy9CLEtBQUssU0FBVyxFQUVoQixLQUFLLElBQU0sRUFBTSxFQUFTLEVBQzFCLEtBQUssU0FBVyxFQUVoQixLQUFLLGVBR0QsRUFBVSxHQUFrQixFQUFTLEVBQUssSUFDN0MsS0FBSyxLQUFPLEVBRVosS0FBSyxhQUFlLEdBQUksSUFBNEIsS0FBTSxFQUFLLFNBQVUsR0FDeEUsRUFBTSxLQUFPLEVBQ2IsRUFBTSxhQUFlLEtBQ3JCLEVBQU0sV0FLUixLQUFLLFFBQVUsRUFBUyxFQUFFLElBQUksU0FBVSxHQUN2QyxNQUFPLElBQUksSUFBMkMsRUFBVSxFQUFPLEtBR3hFLEtBQUssT0FBUSxFQUNiLEtBQUssU0FHTixJQUE0QixXQUMzQixXQUFZLFdBQ1gsR0FBSSxHQUFTLEtBQUssUUFBUSxJQUFJLEdBRTlCLFFBQUssRUFBTyxNQUFNLEtBQWMsS0FBSyxhQUM3QixLQUdELEtBQUssS0FBSyxLQUFLLEVBQU8sS0FBSyxPQUduQyxPQUFRLFdBQ0YsS0FBSyxRQUFTLEtBQUssY0FJeEIsS0FBSyxTQUFTLEtBQUssZUFHcEIsT0FBUSxXQUNQLEtBQUssUUFBUSxRQUFRLElBR3RCLE9BQVEsU0FBVSxFQUFZLEdBQzdCLEdBQUksRUFFSixJQUFJLEtBQUssS0FBTSxDQUNkLEdBQUksR0FBVSxLQUFLLEtBQUssUUFBUSxFQUFZLEVBQ3hDLElBQVcsSUFBWSxLQUFLLE9BQy9CLEtBQUssS0FBTyxFQUNaLEdBQVUsR0FJWixLQUFLLFFBQVEsUUFBUSxTQUFVLEdBQzFCLEVBQVEsT0FBTyxFQUFZLEtBQzlCLEdBQVUsS0FJUixHQUNILEtBQUssVUFJUCxnQkFBaUIsV0FDWixLQUFLLGVBQ1IsS0FBSyxLQUFPLEVBQVcsS0FBSyxLQUU1QixLQUFLLGFBQWEsU0FDbEIsS0FBSyxhQUFlLE1BR3JCLEtBQUssUUFBUSxRQUFRLElBQ3JCLEtBQUssVUFnQlAsSUFBSSxJQUEwRCxHQUUxRCxHQUFzQixHQTJEdEIsR0FBbUIsR0EyQ25CLEdBQWtCLEdBZ0JsQixJQUNILFNBQVUsR0FDVixLQUFNLEdBQ04sUUFBUyxHQUNULE9BQVEsSUFHTCxHQUFlLFNBQVUsR0FDNUIsS0FBSyxLQUFPLEdBQ1osR0FBUyxLQUFLLEtBQU0sR0FHckIsSUFBYSxXQUNaLE9BQVEsV0FDUCxLQUFLLEtBQUssS0FBcUIsUUFBZCxLQUFLLE1BQXFCLEdBQUssS0FBSyxPQUV0RCxRQUFTLEdBQVMsUUFDbEIsT0FBUSxHQUFTLE9BQ2pCLE9BQVEsR0FFUixPQUFRLEdBRVIsT0FBUSxXQUtQLE1BSkssTUFBSyxPQUNULEtBQUssS0FBTyxTQUFTLGVBQWUsRUFBa0IsS0FBSyxTQUdyRCxLQUFLLE1BR2IsU0FBVSxTQUFVLEdBQ2YsR0FDSCxFQUFXLEtBQUssT0FJbEIsU0FBVSxHQUFTLFNBR25CLFNBQVUsU0FBVSxHQUNuQixHQUFJLEVBR0EsTUFBSyxVQUFZLEVBQVUsS0FBSyxLQUFLLFVBQVUsUUFBUSxLQUFLLFFBQVEsUUFDdkUsRUFBUSxFQUFRLE9BR1osRUFBUSxFQUFPLEtBQUssU0FDeEIsS0FBSyxNQUFRLEVBQ2IsS0FBSyxlQUFlLFNBRWhCLEtBQUssTUFDUixHQUFlLFFBQVEsUUFLMUIsVUFBVyxXQUNWLE1BQU8sTUFBSyxNQUdiLFNBQVUsU0FBVSxHQUNuQixHQUFJLEdBQVMsR0FBSyxFQUFrQixLQUFLLE1BQ3pDLE9BQU8sR0FBUyxHQUFXLEdBQVUsR0FJdkMsSUFBSSxJQUFxQixHQUVyQixHQUEyQixHQU0zQixHQUEyQixHQWtCM0IsR0FBTyxHQWVQLEdBQVUsR0FXVixHQUFvQixHQVdwQixHQUFnQixHQWVoQixHQUFlLEdBVWYsR0FBWSxHQWdCWixHQUFVLEdBeUdWLEdBQW1CLFNBQVUsRUFBWSxHQUM1QyxHQUFTLE9BQU8sS0FBSyxLQUFNLEVBQVksSUFHcEMsR0FBMkIsR0FrQjNCLEdBQVcsR0FzVVgsR0FBcUIsR0FpQnJCLEdBQW1CLEdBZW5CLEdBQXFCLEdBZ0JyQixHQUFtQixHQTBEbkIsR0FBVSxTQUFVLEdBQ3ZCLEtBQUssS0FBTyxHQUNaLEtBQUssUUFBVSxLQUFLLGVBQWlCLEVBQVEsU0FBUyxFQUN0RCxLQUFLLFNBQVcsS0FBSyxVQUFZLEdBRWpDLEtBQUssU0FBVyxFQUFRLFNBRXhCLEtBQUssYUFDTCxLQUFLLHFCQUNMLEtBQUsscUJBQ0wsS0FBSyx1QkFFRCxFQUFRLFNBQVMsSUFDcEIsS0FBSyxVQUFZLEVBQVEsU0FBUyxFQUFFLE1BQU0sS0FBSyxJQUFJLFNBQVUsRUFBRyxHQUMvRCxPQUFTLEVBQUcsRUFBRyxFQUFTLElBQU4sRUFBVSxJQUFNLFFBSXBDLEtBQUsscUJBRUwsS0FBSyxPQUFTLEVBRWQsR0FBUyxLQUFLLEtBQU0sR0FHckIsSUFBUSxXQUNQLE9BQVEsR0FDUixPQUFRLEdBQ1IsS0FBTSxHQUNOLFFBQVMsR0FDVCxrQkFBbUIsR0FDbkIsY0FBZSxHQUNmLGFBQWMsR0FDZCxVQUFXLEdBQ1gsWUFBYSxTQUFVLEdBQ3RCLEdBQUksS0FBSyxVQUVSLElBREEsR0FBSSxHQUFJLEtBQUssVUFBVSxPQUNoQixLQUFLLENBQ1gsR0FBSSxHQUFNLEtBQUssVUFBVSxFQUN6QixJQUFJLEVBQUksSUFBTSxFQUNiLE1BQU8sS0FLWCxTQUFVLEdBQVMsU0FDbkIsUUFBUyxHQUNULE9BQVEsR0FDUixPQUFRLEdBQ1IsUUFBUyxHQUFTLFFBQ2xCLFNBQVUsR0FDVixTQUFVLEdBQ1YsT0FBUSxHQUNSLFNBQVUsR0FDVixPQUFRLEdBR1QsSUE2RUksSUFDQSxHQTlFQSxHQUFXLEdBRVgsR0FBMEIsR0FlMUIsR0FBd0IsR0F3QnhCLEdBQTJCLEdBeUIzQixHQUE2QixHQVU3QixLQUlKLEtBQ0MsR0FBYyxTQUFTLFVBQVksTUFDbEMsTUFBTyxHQUNSLElBQVEsRUFFUixJQUNDLE9BQVEsb0JBQXVCLFlBQy9CLE9BQVEsMkJBQThCLG9CQUN0QyxPQUFRLDJCQUE4QixvQkFDdEMsSUFBSyx3QkFBMkIsaUJBQ2hDLFFBQVMscUJBQXdCLGNBSW5DLEdBQUksSUFBYSxTQUFVLEVBQU0sRUFBTSxHQUN0QyxHQUFJLEdBRUEsRUFDQSxFQUNBLEVBQ0EsRUFKQSxJQU9KLElBQVksTUFBUixHQUF5QixLQUFULEVBQWEsQ0FzQmhDLElBckJJLEtBQVUsRUFBVSxHQUFZLEVBQUssV0FDeEMsRUFBWSxHQUFRLE9BQ3BCLEVBQVUsVUFBWSxFQUFRLEdBQUssRUFBTyxFQUFRLEdBQ2xELEVBQVksRUFBVSxjQUFjLE1BRVYsV0FBdEIsRUFBVSxVQUNiLEVBQWlCLEVBQVUsUUFBUSxFQUFVLGlCQUVwQyxFQUFLLGVBQWlCLEdBQVcsS0FDM0MsRUFBWSxHQUFRLE9BQ3BCLEVBQVUsVUFBWSxrQkFBc0IsRUFBTyxTQUNuRCxFQUFZLEVBQVUsY0FBYyxRQUVwQyxFQUFZLEdBQVEsRUFBSyxTQUN6QixFQUFVLFVBQVksRUFFSSxXQUF0QixFQUFVLFVBQ2IsRUFBaUIsRUFBVSxRQUFRLEVBQVUsaUJBSXhDLEVBQVEsRUFBVSxZQUN4QixFQUFNLEtBQUssR0FDWCxFQUFRLFlBQVksRUFRckIsSUFBcUIsV0FBakIsRUFBSyxRQUVSLElBREEsRUFBSSxFQUFNLE9BQ0gsS0FDRixFQUFNLEtBQU8sSUFDaEIsRUFBTSxHQUFHLFVBQVcsR0FNeEIsTUFBTyxJQU9KLEdBQXVCLEdBZ0N2QixHQUEwQixHQWdCMUIsR0FBcUIsR0FtQnJCLEdBQTRCLEdBSzVCLEdBQTRCLEdBVTVCLEdBQTBCLEdBd0IxQixHQUFTLFNBQVUsR0FDdEIsS0FBSyxLQUFPLEdBQ1osR0FBUyxLQUFLLEtBQU0sR0FHckIsSUFBTyxXQUNOLE9BQVEsR0FDUixLQUFNLEdBQ04sUUFBUyxHQUNULFVBQVcsR0FDWCxTQUFVLEdBQVMsU0FDbkIsT0FBUSxHQUFTLE9BQ2pCLE9BQVEsR0FDUixRQUFTLEdBQVMsUUFDbEIsU0FBVSxHQUNWLFNBQVUsR0FDVixPQUFRLEdBQ1IsU0FBVSxHQUNWLE9BQVEsR0FHVCxJQThJSSxJQUFzQixHQUF3QixHQUFXLEdBOUl6RCxHQUFVLEdBRVYsR0FBMkIsV0FDOUIsS0FBSyxlQUFlLFVBR2pCLEdBQTJCLEdBaUIzQixHQUF5QixTQUFVLEdBQ3RDLE1BQUssTUFBSyxLQUtOLEdBQVEsS0FBSyxLQUFNLEdBQ2YsS0FBSyxLQUdULEtBQUssVUFBWSxLQUFLLFNBQVMsS0FDM0IsS0FBSyxTQUFTLEtBQUssR0FEM0IsT0FQUSxNQVlMLEdBQTRCLFNBQVUsRUFBVSxHQUcvQyxFQUFNLE1BQU0sTUFBTSxJQUFTLEVBQU0sT0FDbkMsS0FBSyxjQUFnQixLQUFLLGlCQUFtQixLQUFLLEdBR2hELEtBQUssVUFDUixLQUFLLFNBQVMsUUFBUSxFQUFVLElBSTlCLEdBQXNDLFNBQVUsRUFBVSxHQUN6RCxLQUFLLFVBQ1IsS0FBSyxTQUFTLGtCQUFrQixFQUFVLElBSXhDLEdBQWtDLFNBQVUsR0FDL0MsR0FBSSxLQUFLLFNBQ1IsTUFBTyxNQUFLLFNBQVMsY0FBYyxJQUlqQyxHQUFpQyxHQU1qQyxHQUE4QixHQU05QixHQUFlLEdBVWYsR0FBUyxtQkFDVCxHQUFzQyxXQUV0QyxHQUEyQixTQUFVLEVBQVMsR0FDakQsR0FBSSxHQUFLLEVBQU8sQ0F3QmhCLE9BdEJBLEdBQWEsRUFBUyxNQUN0QixLQU1BLEVBQU0sRUFBVyxPQUNMLFNBQVIsSUFDSCxFQUFNLE9BQWlCLElBQVIsR0FBYSxHQUFPLEtBQUssSUFHekMsRUFBTSxFQUFXLEtBQ0wsU0FBUixJQUVTLElBQVIsR0FBYSxHQUFvQyxLQUFLLEdBQ3pELEVBQU0sS0FBTyxTQUFTLEdBRXRCLEVBQU0sS0FBZSxJQUFSLEdBQWEsR0FBTyxLQUFLLElBSWpDLEdBR0osR0FBNkIsRUE0QmpDLElBQXVCLGdjQUFnYyxNQUFNLEtBQzdkLEdBQXlCLGl6QkFBaXpCLE1BQU0sS0FFaDFCLEdBQVksU0FBVSxHQUdyQixJQUZBLEdBQUksTUFDQSxFQUFJLEVBQU0sT0FDUCxLQUNOLEVBQUksRUFBTSxHQUFHLGVBQWlCLEVBQU0sRUFFckMsT0FBTyxJQUdSLEdBQU0sR0FBVSxHQUFxQixPQUFPLElBRTVDLElBQUksSUFBYyxTQUFVLEdBQzNCLEdBQUksR0FBdUIsRUFBWSxhQUN2QyxPQUFPLElBQUksSUFBeUIsR0FHakMsR0FBNEIsU0FBVSxFQUFXLEdBQ3BELEdBQUksR0FBWSxDQUloQixLQURBLEVBQWEsRUFBSyxRQUFRLFNBQ04sR0FPSyxXQUp4QixFQUFrQixFQUFLLE9BQU8sRUFBRyxJQW9CbEMsRUFBVSxLQUFPLEVBQVUsUUFBUSxZQUFjLEdBQVcsS0FBTyxHQUFZLEdBQVEsTUFUckYsSUFOQSxFQUFPLEVBQUssVUFBVSxFQUFhLEdBRW5DLEVBQVUsS0FBTyxHQUFZLEdBQzdCLEVBQVUsVUFBWSxHQUFXLEVBQWdCLGVBQ2pELEVBQVUsZ0JBQWtCLEdBRXZCLEVBQVUsVUFDZCxLQUFNLHVCQUEwQixFQUFrQixNQVdsRCxHQUEwQixHQWExQixHQUFpQixHQXdDakIsR0FBNkIsR0FRN0IsR0FBNkIsR0FDN0IsSUFDSCxpQkFBa0IsZ0JBQ2xCLFVBQVcsWUFDWCxRQUFTLFVBQ1QsTUFBUyxZQUNULFNBQVUsV0FDVixRQUFTLFVBQ1QsZ0JBQWlCLGtCQUNqQixTQUFVLFdBQ1YsUUFBUyxVQUNULElBQU8sVUFDUCxhQUFjLFlBQ2QsTUFBTyxRQUNQLFVBQVcsWUFDWCxXQUFZLGFBQ1osUUFBUyxVQUNULFNBQVUsV0FDVixRQUFTLFVBQ1QsU0FBVSxXQUNWLE9BQVEsVUE4QkwsR0FBK0IsR0FtRC9CLEdBQTZCLEdBYTdCLEdBQW9CLEdBK0JwQixHQUE0QixHQXNCNUIsR0FBa0IsR0FXbEIsR0FBbUIsR0F5Q25CLEdBQXFCLEdBd0JyQixHQUFrQixHQUtsQixHQUFvQixHQVlwQixHQUF5QixHQWV6QixHQUE2QixHQWM3QixHQUFjLEdBa0JkLEdBQWdCLEdBVWhCLEdBQXVCLEdBbUN2QixHQUE2QixHQXNFN0IsR0FBWSxTQUFVLEdBQ3pCLEtBQUssS0FBSyxHQUdYLElBQVUsV0FDVCxPQUFRO1VBQ1IsS0FBTSxHQUNOLE9BQVEsR0FDUixPQUFRLEdBQ1IsU0FBVSxHQUNWLE9BQVEsR0FDUixPQUFRLEdBR1QsSUF3Q0ksSUF4Q0EsR0FBYSxHQUViLEdBQW1CLFNBQVUsRUFBUyxHQUN6QyxHQUFJLEdBQ0EsRUFDQSxJQUVKLEtBQUssSUFBUSxHQUVDLFdBQVQsR0FBOEIsU0FBVCxHQUlyQixFQUFXLGVBQWUsS0FDN0IsRUFBWSxHQUFJLEtBQ2YsUUFBUyxFQUNULEtBQU0sRUFDTixNQUFPLEVBQVcsR0FDbEIsS0FBTSxFQUFRLE9BR2YsRUFBTyxHQUFRLEVBRUYsVUFBVCxHQUNILEVBQU8sS0FBSyxHQWFmLFFBSkksRUFBWSxFQUFPLFFBQ3RCLEVBQU8sS0FBSyxHQUdOLEVBS2dCLG9CQUFiLFlBQ1YsR0FBNkIsR0FBYyxPQUc1QyxJQUFJLElBQXVCLFNBQVUsRUFBUyxHQUM3QyxLQUFLLFFBQVUsRUFDZixLQUFLLEtBQU8sRUFBUSxLQUNwQixLQUFLLGVBQWlCLEVBQVEsZUFFOUIsS0FBSyxjQUVMLEtBQUssU0FBVyxHQUFJLEtBQ25CLEtBQU0sRUFBUSxLQUNkLE1BQU8sS0FDUCxVQUFXLEtBSWIsSUFBcUIsV0FDcEIsT0FBUSxXQUNILEtBQUssTUFDUixLQUFLLFNBR04sS0FBSyxRQUFRLFVBR2QsT0FBUSxTQUFVLEVBQVksR0FDN0IsS0FBSyxTQUFTLE9BQU8sRUFBWSxJQUdsQyxPQUFRLFNBQVUsR0FDakIsS0FBSyxLQUFPLEVBQ1osS0FBSyxNQUFRLEVBQUssZUFBaUIsR0FBVyxJQUU5QyxLQUFLLFVBR04sT0FBUSxXQUNQLEtBQUssU0FBUyxVQUdmLE9BQVEsV0FDUCxHQUVJLEdBQUssRUFGTCxFQUFRLElBSVosR0FBTSxLQUFLLFNBQVMsV0FDcEIsRUFBUSxHQUFnQixFQUFLLEtBQUssT0FJbEMsS0FBSyxXQUFXLE9BQU8sU0FBVSxHQUNoQyxNQUFPLElBQU0sRUFBTyxLQUNsQixRQUFRLFNBQVUsR0FDcEIsRUFBTSxLQUFLLGdCQUFnQixFQUFFLFFBRzlCLEVBQU0sUUFBUSxTQUFVLEdBQ3ZCLEVBQU0sS0FBSyxhQUFhLEVBQUUsS0FBTSxFQUFFLFNBR25DLEtBQUssV0FBYSxHQUduQixTQUFVLFdBQ1QsTUFBTyxNQUFLLFNBQVMsWUFJdkIsSUFBSSxJQUF3QixHQXFCeEIsR0FBOEIsU0FBVSxFQUFTLEdBQ3BELE1BQUssR0FJRSxFQUFXLElBQUksU0FBVSxHQUMvQixNQUFPLElBQUksSUFBc0IsRUFBUyxTQUl4QyxHQUFVLFNBQVUsR0FDdkIsR0FBSSxHQUFjLEVBQVMsRUFBTyxDQVNsQyxJQVBBLEtBQUssUUFBVSxFQUNmLEtBQUssS0FBTyxFQUFRLEtBQ3BCLEtBQUssVUFBWSxFQUFRLFdBQVcsS0FBSyxNQUFRLFNBRWpELEVBQWUsS0FBSyxVQUFVLGFBQzlCLEVBQWEsY0FBZ0IsS0FFekIsRUFBVSxFQUFhLFFBQVMsQ0FDbkMsR0FBOEIsTUFBMUIsRUFBUSxJQUFJLE9BQU8sR0FFdEIsTUFEQSxHQUFnQixnRUFBaUUsRUFBYSxTQUFTLGFBQWMsRUFBUSxNQUFRLFFBQVMsS0FBSyxRQUM1SSxDQUdSLElBQUksRUFBUSxVQUVYLE1BREEsR0FBZ0Isd0NBQXlDLEVBQWEsU0FBUyxLQUFPLFFBQVMsS0FBSyxRQUM3RixNQUVGLENBZ0JOLEVBQVksbUpBREYsRUFBYSxTQUFTLEVBQUksSUFBTSxFQUFhLFNBQVMsRUFBSSxjQUFnQixjQUNtRixRQUFTLEtBQUssT0FDckwsRUFBYSxTQUFTLGtCQUN0QixFQUFVLEVBQWEsUUFHeEIsS0FBSyxVQUFVLFVBQVcsRUFDMUIsS0FBSyxRQUFVLEVBR2YsRUFBUSxLQUFLLEtBQUssVUFBVSxJQUFJLEdBRWxCLFNBQVYsR0FBdUIsS0FBSyxpQkFHakIsVUFGZCxFQUFRLEtBQUssb0JBR1osS0FBSyxLQUFLLFVBQVUsSUFBSSxFQUFTLElBSS9CLEVBQWEsR0FBZSxNQUMvQixLQUFLLFdBQWEsRUFDbEIsRUFBVyxhQUFhLEtBQUssT0FJL0IsSUFBUSxXQUNQLGFBQWMsV0FDYixHQUFJLEdBQVEsSUFFWixJQUFlLE1BQU0sS0FBSyxNQUMxQixLQUFLLFVBQVUsUUFBUyxFQUN4QixLQUFLLEtBQUssVUFBVSxJQUFJLEtBQUssUUFBUyxLQUFLLFlBQzNDLEdBQWUsYUFBYSxXQUMzQixNQUFPLEdBQU0sVUFBVSxRQUFTLElBRWpDLEdBQWUsT0FHaEIsUUFBUyxXQUNSLEdBQUksR0FBVSxFQUFZLENBRTFCLEdBQWEsS0FBSyxRQUNsQixFQUFhLEtBQUssVUFBVSxhQUFhLFFBR3JDLElBQWUsSUFJbkIsRUFBZ0IsS0FBSyxLQUFLLGdCQUFnQixFQUFXLEtBQU0sTUFFM0QsS0FBSyxRQUFVLEVBRWYsRUFBVyxLQUFLLEtBQUssZ0JBQWdCLEVBQVcsT0FBUyxLQUFLLEtBQUssZ0JBQWdCLEVBQVcsU0FDOUYsRUFBUyxLQUFLLFFBR2YsT0FBUSxjQUdULEdBQVEsT0FBUyxTQUFVLEdBQzFCLEdBQ0ksR0FEQSxFQUFTLElBZ0JiLE9BYkEsR0FBcUIsU0FBVSxHQUM5QixHQUFRLEtBQUssS0FBTSxHQUVmLEtBQUssTUFDUixLQUFLLFFBSVAsRUFBbUIsVUFBWSxHQUFPLEVBQU8sV0FDN0MsRUFBcUIsRUFBbUIsVUFBVyxHQUVuRCxFQUFtQixPQUFTLEdBQVEsT0FFN0IsRUFHUixJQXFCSSxJQXJCQSxHQUFrQixHQWVsQixHQUFpQixFQVFyQixJQUFpQixHQUFnQixRQUNoQyxnQkFBaUIsV0FDaEIsTUFBTyxJQUdSLFNBQVUsV0FDVCxNQUFPLE1BQUssUUFBUSxLQUFLLE9BRzFCLE9BQVEsV0FDUCxHQUNJLEdBREEsRUFBTyxLQUFLLFFBQVEsS0FFcEIsR0FBVSxDQUNkLE1BQUssVUFBVyxFQUloQixFQUFPLEtBQUssS0FBSyxLQUNiLEtBQUssUUFBUSxRQUFTLEVBQ3pCLEdBQU8sRUFDRyxLQUFLLFFBQVEsUUFBUyxFQUNoQyxHQUFPLEVBQ0csRUFBYyxLQUFLLFFBQVEsT0FDckMsR0FBTyxFQUNQLEdBQVcsS0FBSyxRQUFRLE1BQ2QsRUFBYyxHQUFRLE1BQ2hDLEdBQVcsRUFDWCxHQUFPLEVBR1AsS0FBSyxRQUFRLEtBQU8sR0FHckIsS0FBSyxRQUFVLEVBQVUsR0FBYyxHQUV2QyxFQUFLLGlCQUFpQixTQUFVLElBQWdCLEdBRTNDLElBQ0osRUFBSyxpQkFBaUIsUUFBUyxLQUFLLFNBQVMsR0FFekMsRUFBSyxhQUNSLEVBQUssaUJBQWlCLFFBQVMsS0FBSyxTQUFTLElBSS9DLEVBQUssaUJBQWlCLE9BQVEsSUFBWSxJQUczQyxTQUFVLFdBQ1QsR0FBSSxHQUFPLEtBQUssUUFBUSxJQUN4QixNQUFLLFVBQVcsRUFFaEIsRUFBSyxvQkFBb0IsU0FBVSxJQUFnQixHQUNuRCxFQUFLLG9CQUFvQixRQUFTLEtBQUssU0FBUyxHQUNoRCxFQUFLLG9CQUFvQixRQUFTLEtBQUssU0FBUyxHQUNoRCxFQUFLLG9CQUFvQixPQUFRLElBQVksS0FJL0MsSUFBSSxJQUF5QixHQXVCekIsR0FBeUIsR0FBdUIsUUFDbkQsZ0JBQWlCLFdBQ2hCLE1BQU8sTUFBSyxRQUFRLFNBQVcsS0FBSyxRQUFRLFNBQVMsV0FBYSxJQUduRSxTQUFVLFdBQ1QsTUFBTyxNQUFLLFFBQVEsS0FBSyxhQUl2QixHQUFpQyxHQUVqQyxHQUFxQixHQUNyQixNQU1BLEdBQWUsR0FBZ0IsUUFDbEMsS0FBTSxVQUVOLEtBQU0sV0FDTCxLQUFLLFNBQVcsR0FBbUIsS0FBSyxLQUFLLE1BQU8sUUFBUyxLQUFLLFFBQVEsYUFBYSxTQUN2RixLQUFLLFNBQVMsS0FBSyxPQUdwQixPQUFRLFdBQ1AsR0FBSSxHQUFPLEtBQUssUUFBUSxJQUV4QixHQUFLLGlCQUFpQixTQUFVLElBQWdCLEdBRTVDLEVBQUssYUFDUixFQUFLLGlCQUFpQixRQUFTLElBQWdCLElBSWpELFNBQVUsV0FDVCxHQUFJLEdBQU8sS0FBSyxRQUFRLElBRXhCLEdBQUssb0JBQW9CLFNBQVUsSUFBZ0IsR0FDbkQsRUFBSyxvQkFBb0IsUUFBUyxJQUFnQixJQUduRCxhQUFjLFdBQ2IsR0FBZSxNQUFNLEtBQUssTUFFMUIsS0FBSyxTQUFTLFFBQVEsU0FBVSxHQUMvQixFQUFRLEtBQUssVUFBVSxJQUFJLEVBQVEsUUFBUyxFQUFRLGNBR3JELEdBQWUsT0FHaEIsU0FBVSxXQUNULE1BQU8sTUFBSyxRQUFRLEtBQUssU0FHMUIsT0FBUSxXQUNQLEVBQWdCLEtBQUssU0FBVSxTQUk3QixHQUF1QixHQUV2QixHQUFtQixHQUFnQixRQUN0QyxLQUFNLE9BRU4sS0FBTSxXQUNMLEtBQUssU0FBVyxHQUFtQixLQUFLLEtBQUssTUFBTyxZQUFhLEtBQUssUUFBUSxLQUM5RSxLQUFLLFNBQVMsS0FBSyxNQUVuQixLQUFLLFdBQVksR0FHbEIsZ0JBQWlCLFdBQ2hCLEdBQUksS0FBSyxRQUFRLGFBQWEsV0FDN0IsTUFBTyxNQUFLLFFBQVEsYUFBYSxVQUluQyxPQUFRLFdBQ1AsR0FBSSxHQUFPLEtBQUssUUFBUSxJQUV4QixHQUFLLEtBQU8sS0FBTyxLQUFLLFFBQVEsSUFBTSxLQUN0QyxFQUFLLFFBQVUsS0FBSyxLQUFLLFVBQVUsSUFBSSxLQUFLLFVBQVksS0FBSyxRQUFRLGFBQWEsU0FFbEYsRUFBSyxpQkFBaUIsU0FBVSxJQUFnQixHQUU1QyxFQUFLLGFBQ1IsRUFBSyxpQkFBaUIsUUFBUyxJQUFnQixJQUlqRCxTQUFVLFdBQ1QsR0FBSSxHQUFPLEtBQUssUUFBUSxJQUV4QixHQUFLLG9CQUFvQixTQUFVLElBQWdCLEdBQ25ELEVBQUssb0JBQW9CLFFBQVMsSUFBZ0IsSUFHbkQsU0FBVSxXQUNULEdBQUksR0FBTyxLQUFLLFFBQVEsSUFDeEIsT0FBTyxHQUFLLFNBQVcsRUFBSyxTQUFTLE1BQVEsRUFBSyxPQUduRCxhQUFjLFdBR1QsS0FBSyxRQUFRLEtBQUssU0FDckIsR0FBZ0IsVUFBVSxhQUFhLEtBQUssT0FJOUMsUUFBUyxTQUFVLEVBQVksR0FDOUIsR0FBSSxFQUVKLElBQWdCLFVBQVUsUUFBUSxLQUFLLEtBQU0sRUFBWSxJQUVyRCxFQUFPLEtBQUssUUFBUSxRQUN2QixFQUFLLEtBQU8sS0FBTyxLQUFLLFFBQVEsSUFBTSxPQUl4QyxPQUFRLFdBQ1AsRUFBZ0IsS0FBSyxTQUFVLFNBSTdCLEdBQTJCLEdBRTNCLEdBQXNCLEdBQWdCLFFBQ3pDLEtBQU0sT0FFTixnQkFBaUIsV0FTaEIsTUFEQSxNQUFLLGdCQUFpQixNQUl2QixLQUFNLFdBQ0wsR0FBSSxHQUFlLENBRW5CLE1BQUssY0FBZSxFQUtwQixLQUFLLFNBQVcsR0FBbUIsS0FBSyxLQUFLLE1BQU8sYUFBYyxLQUFLLFFBQVEsS0FDL0UsS0FBSyxTQUFTLEtBQUssTUFFZixLQUFLLGlCQUNSLEtBQUssU0FBUyxnQkFBaUIsR0FLNUIsS0FBSyxTQUFTLGdCQUFrQixLQUFLLFFBQVEsYUFBYSxhQUM3RCxFQUFnQixLQUFLLEtBQUssVUFBVSxJQUFJLEtBQUssU0FDN0MsRUFBZSxLQUFLLFFBQVEsYUFBYSxTQUV6QyxFQUFjLEtBQUssS0FJckIsT0FBUSxXQUNQLEVBQWdCLEtBQUssU0FBVSxPQUdoQyxPQUFRLFdBQ1AsR0FDSSxHQUNBLEVBRkEsRUFBTyxLQUFLLFFBQVEsSUFJeEIsR0FBZ0IsS0FBSyxLQUFLLFVBQVUsSUFBSSxLQUFLLFNBQzdDLEVBQWUsS0FBSyxRQUFRLGFBQWEsU0FFckMsRUFBUSxHQUNYLEtBQUssVUFBWSxFQUFjLEVBQWUsR0FFOUMsS0FBSyxVQUFZLEdBQWlCLEVBR25DLEVBQUssS0FBTyxLQUFPLEtBQUssUUFBUSxJQUFNLEtBQ3RDLEVBQUssUUFBVSxLQUFLLFVBRXBCLEVBQUssaUJBQWlCLFNBQVUsSUFBZ0IsR0FHNUMsRUFBSyxhQUNSLEVBQUssaUJBQWlCLFFBQVMsSUFBZ0IsSUFJakQsU0FBVSxXQUNULEdBQUksR0FBTyxLQUFLLFFBQVEsSUFFeEIsR0FBSyxvQkFBb0IsU0FBVSxJQUFnQixHQUNuRCxFQUFLLG9CQUFvQixRQUFTLElBQWdCLElBR25ELFFBQVMsV0FDUixHQUFJLEtBQWUsS0FBSyxTQUV4QixPQURBLE1BQUssVUFBWSxLQUFLLFFBQVEsS0FBSyxRQUM1QixLQUFLLFlBQWMsR0FHM0IsYUFBYyxXQUNiLEtBQUssVUFBWSxLQUFLLFFBQVEsS0FBSyxRQUNuQyxHQUFnQixVQUFVLGFBQWEsS0FBSyxPQUc3QyxTQUFVLFdBQ1QsTUFBTyxNQUFLLFNBQVMsT0FBTyxJQUFXLElBQUksT0FZekMsR0FBOEIsR0FFOUIsR0FBa0IsR0FBZ0IsUUFDckMsS0FBTSxVQUVOLE9BQVEsV0FDUCxHQUFJLEdBQU8sS0FBSyxRQUFRLElBRXhCLEdBQUssaUJBQWlCLFNBQVUsSUFBZ0IsR0FFNUMsRUFBSyxhQUNSLEVBQUssaUJBQWlCLFFBQVMsSUFBZ0IsSUFJakQsU0FBVSxXQUNULEdBQUksR0FBTyxLQUFLLFFBQVEsSUFFeEIsR0FBSyxvQkFBb0IsU0FBVSxJQUFnQixHQUNuRCxFQUFLLG9CQUFvQixRQUFTLElBQWdCLElBR25ELFNBQVUsV0FDVCxNQUFPLE1BQUssUUFBUSxLQUFLLFdBSXZCLEdBQTBCLEdBRTFCLEdBQWdCLEdBQWdCLFFBQ25DLGdCQUFpQixXQUNoQixHQUNJLEdBQ0EsRUFDQSxFQUNBLEVBSkEsRUFBVSxLQUFLLFFBQVEsT0FNM0IsSUFBMkMsU0FBdkMsS0FBSyxRQUFRLGFBQWEsV0FJOUIsRUFBSSxFQUFNLEVBQVEsT0FFYixHQUFMLENBS0EsS0FBTyxLQUNOLEdBQUksRUFBUSxHQUFHLGFBQWEsWUFBYSxDQUN4QyxFQUFRLEVBQVEsR0FBRyxhQUFhLFNBQ2hDLEdBQW9CLENBQ3BCLE9BS0YsSUFBSyxFQUNKLE9BQVMsRUFBSSxHQUNaLElBQUssRUFBUSxHQUFHLGFBQWEsWUFBYSxDQUN6QyxFQUFRLEVBQVEsR0FBRyxhQUFhLFFBQ2hDLE9BV0gsTUFKYyxVQUFWLElBQ0gsS0FBSyxRQUFRLFdBQVcsTUFBTSxNQUFRLEdBR2hDLElBR1IsT0FBUSxXQUNQLEtBQUssUUFBUSxLQUFLLGlCQUFpQixTQUFVLElBQWdCLElBRzlELFNBQVUsV0FDVCxLQUFLLFFBQVEsS0FBSyxvQkFBb0IsU0FBVSxJQUFnQixJQUlqRSxTQUFVLFNBQVUsR0FDbkIsS0FBSyxLQUFLLFVBQVUsSUFBSSxLQUFLLFFBQVMsSUFHdkMsU0FBVSxXQUNULEdBQUksR0FBUyxFQUFHLEVBQUssQ0FLckIsS0FIQSxFQUFVLEtBQUssUUFBUSxLQUFLLFFBQzVCLEVBQU0sRUFBUSxPQUVULEVBQUksRUFBRyxFQUFJLEVBQUssR0FBSyxFQUd6QixHQUZBLEVBQVMsRUFBUSxHQUViLEVBQVEsR0FBRyxTQUVkLE1BRGMsR0FBTyxTQUFXLEVBQU8sU0FBUyxNQUFRLEVBQU8sT0FNbEUsWUFBYSxXQUNaLEdBQUksR0FBUSxLQUVSLEVBQVEsS0FBSyxVQUVILFVBQVYsSUFDSCxLQUFLLFVBQVUsUUFBUyxFQUN4QixHQUFlLGFBQWEsV0FDM0IsTUFBTyxHQUFNLFVBQVUsUUFBUyxJQUVqQyxLQUFLLEtBQUssVUFBVSxJQUFJLEtBQUssUUFBUyxPQUtyQyxHQUF3QixHQUV4QixHQUF3QixHQUFzQixRQUNqRCxnQkFBaUIsV0FDaEIsTUFBTyxNQUFLLFFBQVEsUUFBUSxPQUFPLFNBQVUsR0FDNUMsTUFBTyxHQUFPLGFBQWEsY0FDekIsSUFBSSxTQUFVLEdBQ2hCLE1BQU8sR0FBTyxhQUFhLFlBSTdCLE9BQVEsV0FDUCxHQUFJLEVBRUosTUFBSyxRQUFRLEtBQUssaUJBQWlCLFNBQVUsSUFBZ0IsR0FJdEMsVUFGdkIsRUFBaUIsS0FBSyxLQUFLLFVBQVUsSUFBSSxLQUFLLFdBSTdDLEtBQUssZ0JBSVAsU0FBVSxXQUNULEtBQUssUUFBUSxLQUFLLG9CQUFvQixTQUFVLElBQWdCLElBR2pFLFNBQVUsV0FDVCxLQUFNLElBQUksT0FBTSw2QkFHakIsU0FBVSxXQUNULEdBQUksR0FBZ0IsRUFBUyxFQUFHLEVBQUssRUFBUSxDQU03QyxLQUpBLEtBQ0EsRUFBVSxLQUFLLFFBQVEsS0FBSyxRQUM1QixFQUFNLEVBQVEsT0FFVCxFQUFJLEVBQUcsRUFBSSxFQUFLLEdBQUssRUFDekIsRUFBUyxFQUFRLEdBRWIsRUFBTyxXQUNWLEVBQWMsRUFBTyxTQUFXLEVBQU8sU0FBUyxNQUFRLEVBQU8sTUFDL0QsRUFBZSxLQUFLLEdBSXRCLE9BQU8sSUFHUixhQUFjLFdBQ2IsR0FBSSxHQUFXLEVBQWUsQ0FXOUIsT0FUQSxHQUFZLEtBQUssVUFDakIsRUFBZ0IsRUFBVSxNQUUxQixFQUFRLEtBQUssV0FFUyxTQUFsQixHQUFnQyxFQUFtQixFQUFPLElBQzdELEdBQXNCLFVBQVUsYUFBYSxLQUFLLE1BRzVDLE1BR1IsWUFBYSxXQUNaLEdBQUksR0FBUSxLQUVSLEVBQVEsS0FBSyxVQUVILFVBQVYsSUFDSCxLQUFLLFVBQVUsUUFBUyxFQUN4QixHQUFlLGFBQWEsV0FDM0IsTUFBTyxHQUFNLFVBQVUsUUFBUyxJQUVqQyxLQUFLLEtBQUssVUFBVSxJQUFJLEtBQUssUUFBUyxLQUl4QyxZQUFhLFdBQ2lCLFNBQXpCLEtBQUssVUFBVSxPQUF3QixLQUFLLFVBQVUsTUFBTSxRQUMvRCxLQUFLLEtBQUssVUFBVSxJQUFJLEtBQUssUUFBUyxLQUFLLGlCQUsxQyxHQUFnQyxHQUVoQyxHQUFrQixHQUFnQixRQUNyQyxPQUFRLFdBQ1AsS0FBSyxRQUFRLEtBQUssaUJBQWlCLFNBQVUsSUFBZ0IsSUFHOUQsU0FBVSxXQUNULEtBQUssUUFBUSxLQUFLLG9CQUFvQixTQUFVLElBQWdCLElBR2pFLFNBQVUsV0FDVCxNQUFPLE1BQUssUUFBUSxLQUFLLFNBSXZCLEdBQTBCLEdBRTFCLEdBQWlCLEdBQXVCLFFBQzNDLGdCQUFpQixhQUlqQixTQUFVLFdBQ1QsR0FBSSxHQUFRLFdBQVcsS0FBSyxRQUFRLEtBQUssTUFDekMsT0FBTyxPQUFNLEdBQVMsT0FBWSxLQUloQyxHQUEyQixHQXNFM0IsR0FBZ0MsR0FjaEMsR0FBOEIsR0FLOUIsR0FBWSxHQU1aLEdBQThCLEdBRTlCLEdBQWUsb0JBbUlmLEdBQXdCLEdBdUJ4QixHQUFTLEdBRVQsTUFDQSxJQUNILFlBQVksRUFDWixXQUFXLEVBQ1gsVUFBVSxFQUNWLGFBQWEsRUFFYixZQUFZLEdBOENULEdBQWdDLEdBd0JoQyxHQUFnQyxHQWFoQyxHQUFvQixHQU1wQixHQUFnQyxHQWtCaEMsR0FBa0MsR0FZbEMsR0FBZSxTQUFVLEVBQVMsRUFBTSxHQUMzQyxLQUFLLEtBQUssRUFBUyxFQUFNLEdBRzFCLElBQWEsV0FDWixPQUFRLEdBQ1IsS0FBTSxHQUNOLFVBQVcsR0FDWCxLQUFNLEdBQ04sT0FBUSxHQUNSLE9BQVEsR0FDUixPQUFRLEdBQ1IsUUFBUyxHQUNULE9BQVEsR0FDUixTQUFVLEdBR1gsSUFBSSxJQUFnQixHQUVoQixHQUFzQixTQUFVLEVBQVMsR0FDNUMsR0FBSSxHQUNBLEVBQ0EsRUFDQSxFQUNBLElBRUosS0FBSyxJQUFRLEdBQ1osR0FBSSxFQUFTLGVBQWUsR0FJM0IsSUFIQSxFQUFRLEVBQUssTUFBTSxLQUNuQixFQUFJLEVBQU0sT0FFSCxLQUNOLEVBQVUsR0FBSSxJQUFjLEVBQVMsRUFBTSxHQUFJLEVBQVMsSUFDeEQsRUFBTyxLQUFLLEVBS2YsT0FBTyxJQUdKLEdBQVksU0FBVSxFQUFTLEdBQ2xDLEdBQ0ksR0FDQSxFQUNBLEVBSEEsRUFBTyxJQUtYLE1BQUssUUFBVSxFQUNmLEtBQUssS0FBTyxFQUFVLEVBQVEsS0FJVixpQkFGcEIsRUFBTyxFQUFTLEdBQUssS0FHcEIsRUFBVyxHQUFJLEtBQ2QsU0FBVSxFQUNWLEtBQU0sRUFDTixNQUFPLElBR1IsRUFBTyxFQUFTLFdBQ2hCLEVBQVMsU0FFSSxLQUFULEtBTUQsRUFBUyxFQUNaLEtBQUssT0FBUyxFQUFTLEVBQ2IsRUFBUyxJQUNuQixLQUFLLFNBQVcsR0FBSSxLQUNuQixTQUFVLEVBQVMsRUFDbkIsS0FBTSxFQUNOLE1BQU8sSUFHUixLQUFLLE9BQVMsS0FBSyxTQUFTLGNBRTVCLEtBQUssU0FBUyxPQUFTLFdBQ3RCLEtBQUssVUFBWSxLQUFLLFlBQWEsRUFDbkMsRUFBSyxPQUFTLEtBQUssY0FFZixFQUFLLE9BQ1IsRUFBSyxXQUtSLEtBQUssR0FBSyxFQUFvQixhQUFjLEVBQVMsR0FFaEQsS0FBSyxJQUNULEVBQU0sR0FBYyxFQUFNLGVBSTVCLElBQVUsV0FDVCxLQUFNLFdBQ0wsR0FBSSxHQUFNLEVBQVEsQ0FXbEIsSUFUQSxFQUFPLEtBQUssUUFBUSxLQUVoQixLQUFLLFFBQ1IsR0FBUSxHQUFNLE9BQU8sS0FBSyxRQUMxQixFQUFTLEtBQUssR0FBRyxNQUFNLEtBQUssS0FBTSxJQUVsQyxFQUFTLEtBQUssR0FBRyxLQUFLLEtBQUssS0FBTSxJQUc3QixJQUFXLEVBQU8sU0FDdEIsS0FBTSxJQUFJLE9BQU0sb0VBSWpCLE1BQUssT0FBUyxFQUNkLEtBQUssT0FBUSxHQUdkLE9BQVEsV0FDSCxLQUFLLE9BQU8sT0FDZixLQUFLLE9BQU8sT0FBTyxNQUFNLEtBQUssS0FBTSxLQUFLLFNBRXpDLEtBQUssT0FBTyxVQUFTLEdBQ3JCLEtBQUssU0FJUCxPQUFRLFNBQVUsRUFBWSxHQUN6QixLQUFLLFVBQ1IsS0FBSyxTQUFTLE9BQU8sRUFBWSxJQUluQyxTQUFVLFNBQVUsR0FDbkIsS0FBSyxVQUFXLEVBQ1osS0FBSyxPQUNSLEtBQUssT0FBTyxZQUdSLEdBQVksS0FBSyxVQUNyQixLQUFLLFNBQVMsVUFLakIsSUEyVkksSUFBd0IsR0FBYSxHQTNWckMsR0FBYSxHQXVIYixHQUF5QixHQW1GekIsR0FBMkIsR0F5RjNCLEdBQTRCLEdBa0Q1QixHQUFZLFNBQVUsR0FDekIsTUFBTyxHQUFjLFFBQVEsZUFBZ0IsU0FBVSxFQUFPLEdBQzdELE1BQU8sR0FBRyxnQkFNUCxLQUdKLE1BQ0EsR0FBNEIsR0FBYyxPQUFPLE1BRWpELEdBQXlCLFNBQVUsR0FDbEMsR0FBSSxHQUFHLEVBQVEsQ0FJZixJQUZBLEVBQU8sR0FBVSxJQUVaLEdBQVksR0FDaEIsR0FBd0MsU0FBcEMsR0FBMEIsR0FDN0IsR0FBWSxHQUFRLE1BTXBCLEtBSEEsRUFBUyxFQUFLLE9BQU8sR0FBRyxjQUFnQixFQUFLLFVBQVUsR0FFdkQsRUFBSSxHQUFRLE9BQ0wsS0FFTixHQURBLEVBQVMsR0FBUSxHQUNrQyxTQUEvQyxHQUEwQixFQUFTLEdBQXVCLENBQzdELEdBQVksR0FBUSxFQUFTLENBQzdCLE9BTUosTUFBTyxJQUFZLEtBNUJwQixHQUF5QixJQWdDMUIsSUFFSSxJQUFVLEdBRlYsR0FBaUIsRUFJaEIsS0FHSixHQUF1QyxPQUFPLGtCQXJqV2xDLEtBcWpXNkQsaUJBRXpFLEdBQVcsU0FBVSxHQUNwQixHQUFJLEdBQWUsRUFBUSxFQUFHLEVBQU0sQ0FJcEMsSUFGQSxFQUFnQixHQUFxQyxLQUFLLE1BRXJDLGdCQUFWLEdBS1YsTUFKQSxHQUFRLEVBQWMsR0FBZSxJQUN2QixRQUFWLElBQ0gsRUFBUSxHQUVGLENBR1IsS0FBSyxFQUFRLEdBQ1osS0FBTSxJQUFJLE9BQU0sa0dBTWpCLEtBSEEsS0FFQSxFQUFJLEVBQU0sT0FDSCxLQUNOLEVBQU8sRUFBTSxHQUNiLEVBQVEsRUFBYyxHQUFlLElBQ3ZCLFFBQVYsSUFDSCxFQUFRLEdBRVQsRUFBTyxHQUFRLENBR2hCLE9BQU8sS0FqQ1IsR0FBVyxJQXFDWixJQUFJLElBQXFCLEdBRXJCLEdBQVcsU0FBVSxFQUFPLEdBQy9CLEdBQUksRUFFSixJQUFxQixnQkFBVixHQUNWLEtBQUssS0FBSyxNQUFNLEdBQWUsSUFBVSxNQUV6QyxLQUFLLElBQVEsR0FDUixFQUFNLGVBQWUsS0FDeEIsS0FBSyxLQUFLLE1BQU0sR0FBZSxJQUFTLEVBQU0sR0FLakQsT0FBTyxPQUdKLEdBQVMsU0FBVSxHQUN0QixHQUFJLEVBRUosTUFBSyxTQUFXLEVBQVEsU0FDeEIsS0FBSyxLQUFPLEVBQVEsS0FDcEIsS0FBSyxTQUFXLEVBQVEsU0FHTSxnQkFBbkIsR0FBUSxRQUNsQixFQUFTLEVBQVEsS0FBSyxPQUFPLEVBQVEsV0FHcEMsRUFBZ0IsR0FBYyxFQUFRLE9BQVEsV0FDOUMsRUFBUyxJQUdWLEVBRG9DLGtCQUFuQixHQUFRLE9BQ2hCLEVBQVEsT0FFUixHQUdWLEtBQUssT0FBUyxFQUVkLEtBQUssTUFBUSxLQUNiLEtBQUssSUFBTSxLQUFLLE1BQVEsS0FBSyxTQUU3QixLQUFLLFNBQVUsRUFDZixHQUFrQixJQUFJLE1BR3ZCLElBQU8sV0FDTixLQUFNLFNBQVUsR0FDZixHQUFJLEdBQVMsQ0FFYixTQUFLLEtBQUssVUFJTixFQUFNLEtBQUssS0FDVixLQUFLLE1BQ1IsS0FBSyxLQUFLLEdBR1AsS0FBSyxVQUNSLEtBQUssU0FBUyxJQUdSLElBR1IsRUFBVSxFQUFNLEtBQUssTUFDckIsRUFBUSxLQUFLLE9BQU8sRUFBVSxLQUFLLFVBRS9CLEtBQUssTUFDUixLQUFLLEtBQUssSUFHSixLQUdSLEtBQU0sV0FDRCxLQUFLLE9BQ1IsS0FBSyxRQUdOLEtBQUssU0FBVSxHQUlqQixJQStCSSxJQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBdENBLEdBQWdCLEdBS2hCLEdBQWtCLEdBQUksUUFBTyxRQUFVLEdBQVEsS0FBSyxLQUFPLE1BRTNELEdBQVcsU0FBVSxHQUN4QixNQUFPLEdBQUssUUFBUSxHQUFpQixLQUdsQyxHQUFnQixHQUFJLFFBQU8sT0FBUyxHQUFRLEtBQUssS0FBTyxZQUV4RCxHQUFZLFNBQVUsR0FHekIsTUFBSyxJQUlELEdBQWMsS0FBSyxLQUN0QixFQUFNLElBQU0sR0FHQSxFQUFJLFFBQVEsU0FBVSxTQUFVLEdBQzVDLE1BQU8sSUFBTSxFQUFNLGlCQVJaLElBc0JMLE1BQ0EsS0FFQyxLQUdKLEdBQTRDLEdBQWMsT0FBTyxNQUdqRSxXQUM4RCxTQUF6RCxHQUEwQyxZQUM3QyxHQUFhLGFBQ2IsR0FBZ0IsZ0JBQ2hCLElBQTBCLEdBQytDLFNBQS9ELEdBQTBDLGtCQUNwRCxHQUFhLG1CQUNiLEdBQWdCLHNCQUNoQixJQUEwQixHQUUxQixJQUEwQixLQUl4QixLQUNILEdBQXNCLEdBQWEsV0FDbkMsR0FBc0IsR0FBYSxXQUNuQyxHQUE2QixHQUFhLGtCQUczQyxHQUFvQixTQUFVLEVBQUcsRUFBSSxFQUFTLEVBQW1CLEdBSWhFLFdBQVcsV0FFVixHQUFJLEdBQVksRUFBdUIsRUFBd0IsRUFBZSxDQUU5RSxHQUFnQixXQUNYLEdBQXlCLElBRTVCLEVBQUUsS0FBSyxLQUFLLEVBQUUsS0FBTyxPQUFRLEVBQUUsS0FBTSxFQUFFLFNBQ3ZDLE1BTUYsR0FBYyxFQUFFLEtBQUssY0FBZ0IsSUFBTSxFQUFFLEtBQUssUUFFbEQsRUFBRSxLQUFLLE1BQU0sSUFBdUIsRUFBa0IsSUFBSSxJQUFnQixJQUFJLElBQVcsS0FBSyxLQUM5RixFQUFFLEtBQUssTUFBTSxJQUE4QixHQUFVLEVBQVEsUUFBVSxVQUN2RSxFQUFFLEtBQUssTUFBTSxJQUF1QixFQUFRLFNBQVcsSUFBTyxJQUU5RCxFQUF1QixTQUFVLEdBQ2hDLEdBQUksRUFFSixHQUFRLEVBQWtCLFFBQVEsR0FBVSxHQUFTLEVBQU0sZ0JBQ3ZELEtBQVcsR0FDZCxFQUFrQixPQUFPLEVBQU8sR0FHN0IsRUFBa0IsU0FLdEIsRUFBRSxLQUFLLG9CQUFvQixHQUFlLEdBQXNCLEdBRWhFLEdBQXlCLEVBQ3pCLE1BR0QsRUFBRSxLQUFLLGlCQUFpQixHQUFlLEdBQXNCLEdBRTdELFdBQVcsV0FTVixJQVJBLEdBQ0ksR0FDQSxFQUNBLEVBRUEsRUFDQSxFQU5BLEVBQUksRUFBa0IsT0FJdEIsS0FJRyxLQUNOLEVBQU8sRUFBa0IsR0FDekIsRUFBTyxFQUFhLEVBRWhCLEtBQTRCLEdBQXdCLEtBQ3ZELEVBQUUsS0FBSyxNQUFNLEdBQWUsSUFBUyxFQUFHLEdBSW5DLEdBQXFCLEtBQ3pCLEVBQWdCLEVBQUUsU0FBUyxHQUkzQixHQUFxQixHQUFRLEVBQUUsU0FBUyxJQUFTLEVBQUcsR0FDcEQsR0FBd0IsSUFBUyxHQUFxQixHQUdsRCxHQUF3QixLQUMzQixFQUFFLEtBQUssTUFBTSxHQUFlLElBQVMsS0FLbkMsS0FBMkIsR0FBd0IsS0FFakMsU0FBbEIsSUFDSCxFQUFnQixFQUFFLFNBQVMsSUFLNUIsRUFBUSxFQUFrQixRQUFRLEdBQzlCLEtBQVcsRUFDZCxFQUFZLG9JQUFzSSxLQUFNLEVBQUUsT0FFMUosRUFBa0IsT0FBTyxFQUFPLEdBS2pDLEVBQVMsVUFBVSxLQUFLLEVBQUcsSUFBTyxHQUdsQyxFQUEyQixNQUMxQixLQUFNLEdBQWUsR0FDckIsYUFBYyxHQUFtQixXQUFXLEdBQWdCLFdBQVcsRUFBRyxLQUMxRSxPQUFRLElBTVAsR0FBMkIsT0FDOUIsR0FBSSxLQUNILEtBQU0sRUFBRSxLQUNSLFNBQVUsRUFBUSxTQUNsQixPQUFRLEdBQVUsRUFBUSxRQUFVLElBQ3BDLEtBQU0sU0FBVSxHQUNmLEdBQUksR0FBTSxDQUdWLEtBREEsRUFBSSxFQUEyQixPQUN4QixLQUNOLEVBQU8sRUFBMkIsR0FDbEMsRUFBRSxLQUFLLE1BQU0sRUFBSyxNQUFRLEVBQUssYUFBYSxHQUFPLEVBQUssUUFHMUQsU0FBVSxXQUNULEdBQXdCLEVBQ3hCLE9BSUYsR0FBd0IsRUFHcEIsRUFBa0IsU0FHdEIsRUFBRSxLQUFLLG9CQUFvQixHQUFlLEdBQXNCLEdBQ2hFLEdBQXlCLEVBQ3pCLE1BRUMsSUFDRCxFQUFRLE9BQVMsS0FuS3JCLEdBQW9CLElBdUtyQixJQUVJLElBQVEsR0FBUSxHQUFpQyxHQUE0QixHQUY3RSxHQUFpQyxFQUlyQyxJQUF3QixtQkFBYixVQUEwQixDQUtwQyxHQUpBLEdBQVMsU0FFVCxNQUVJLEtBQVUsVUFDYixHQUFrQyxPQUdsQyxLQURBLEdBQTZCLEdBQVEsT0FDOUIsTUFDTixHQUFTLEdBQVEsS0FDakIsR0FBUyxHQUFTLFdBRUosWUFDYixHQUFrQyxHQUtHLFVBQXBDLElBQ0gsU0FBUyxpQkFBaUIsR0FBa0MsbUJBQW9CLElBR2hGLE9BR0ksY0FBZ0IsV0FDbkIsU0FBUyxpQkFBaUIsV0FBWSxJQUN0QyxTQUFTLGlCQUFpQixVQUFXLE1BRXJDLE9BQU8saUJBQWlCLFdBQVksSUFDcEMsT0FBTyxpQkFBaUIsT0FBUSxJQUVoQyxPQUFPLGlCQUFpQixXQUFZLElBQ3BDLE9BQU8saUJBQWlCLFFBQVMsS0FHbEMsR0FBVyxRQUFTLEdBZ0J0QixHQUVJLElBQWMsR0FBaUMsR0FGL0MsR0FBMEIsRUFJekIsS0FHSixHQUFrQyxPQUFPLGtCQWo4VzdCLEtBaThXd0QsaUJBRXBFLEdBQWUsU0FBVSxFQUFPLEVBQU8sR0FDdEMsR0FFSSxHQUZBLEVBQVEsSUFJWixJQUF5QixJQUFyQixVQUFVLE9BQ2IsS0FBTSxJQUFJLE9BQU0saUZBS2pCLE9BQUksSUFBd0IsUUFDM0IsS0FBSyxTQUFTLEVBQU8sR0FDZCxLQUFhLEdBQVcsR0FBYyxhQUd6QixnQkFBVixJQUNWLEtBQ0EsRUFBRyxHQUFTLElBRVosRUFBSyxFQUdMLEVBQVUsR0FRTixJQUNKLEVBQWdCLGlNQUFvTSxLQUFLLE1BQ3pOLEVBQVUsTUFHRyxHQUFJLElBQWMsU0FBVSxHQUN6QyxHQUFJLEdBQWUsRUFBbUIsRUFBZSxFQUFlLEVBQUcsQ0FHdkUsS0FBSyxFQUFRLFNBR1osTUFGQSxHQUFNLFNBQVMsT0FDZixJQWFELEtBUkEsRUFBZ0IsT0FBTyxLQUFLLEdBQzVCLEtBR0EsRUFBZ0IsR0FBZ0MsRUFBTSxTQUd0RCxFQUFJLEVBQWMsT0FDWCxLQUNOLEVBQU8sRUFBYyxHQUNyQixFQUFVLEVBQWMsR0FBZSxJQUV2QixRQUFaLElBQ0gsRUFBVSxHQUlQLEdBQVcsRUFBRyxLQUVqQixFQUFrQixLQUFLLEdBSXZCLEVBQU0sS0FBSyxNQUFNLEdBQWUsSUFBUyxFQU0zQyxLQUFLLEVBQWtCLE9BRXRCLFdBREEsSUFJRCxJQUErQixFQUFPLEVBQUksRUFBUyxFQUFtQixRQXJGeEUsR0FBZSxJQTRGaEIsSUFBSSxJQUFnQixHQUVoQixHQUFnQixTQUFVLEVBQVEsR0FlckMsTUFkc0IsZ0JBQVgsR0FDVixHQUFXLFNBQVUsR0FDTyxnQkFBWCxHQUVoQixFQURjLFNBQVgsR0FDUSxTQUFVLEtBQ0EsU0FBWCxHQUNDLFNBQVUsTUFFVixTQUFVLEtBRVgsSUFDWCxNQUdNLEtBQWEsRUFBUSxJQUd6QixHQUFrQixHQWlEbEIsR0FBYSxTQUFVLEVBQU8sRUFBVSxHQUMzQyxLQUFLLEtBQUssRUFBTyxFQUFVLEdBRzVCLElBQVcsV0FDVixLQUFNLEdBQ04sTUFBTyxHQUNQLFNBQVUsR0FDVixTQUFVLEdBQ1YsYUFBYyxHQUNkLGNBQWUsR0FHaEIsSUFJSSxJQUFXLEdBSlgsR0FBYyxHQUVkLEdBQTJCLEVBSS9CLElBQVksV0FDWCxHQUFJLEdBQU8sS0FBSyxLQUNaLEVBQVUsS0FBSyxTQUFTLFVBQVMsRUFPckMsSUFKSSxRQUFVLE9BQU8sMEJBQ3BCLEVBQUssS0FBTyxZQUdULEVBQUssV0FDUixFQUFLLFdBQVcsUUFBVSxNQUNwQixDQUVOLEtBQU8sRUFBSyxpQkFDWCxFQUFLLFlBQVksRUFBSyxXQUd2QixHQUFLLFlBQVksU0FBUyxlQUFlLE1BSTNDLEdBQWUsV0FDVCxLQUFLLEtBQUssTUFBMkIsb0JBQW5CLEtBQUssS0FBSyxNQUNoQyxFQUFZLDRFQUE4RSxRQUFTLEtBQUssT0FNekcsS0FBSyxLQUFLLEtBQU8sS0FBSyxTQUFTLFVBQVMsR0FpTnpDLElBQUksSUFBNkIsV0FDaEMsR0FBSSxHQUFLLENBRVQsT0FBSSxNQUFLLFNBQVMsRUFFVixZQUFjLEtBQUssU0FBUyxHQUFLLEtBR3pDLEVBQU0sSUFBTSxLQUFLLFNBQVMsRUFFMUIsR0FBTyxLQUFLLFdBQVcsSUFBSSxJQUFvQixLQUFLLElBQU0sS0FBSyxzQkFBc0IsSUFBSSxJQUFvQixLQUFLLElBR2hHLFdBQWQsS0FBSyxNQUFxQixHQUFpQixRQUM5QyxHQUFPLGFBSVUsVUFBZCxLQUFLLE1BQW9CLEdBQW9CLFFBQ2hELEdBQU8sWUFHUixHQUFPLElBR1csYUFBZCxLQUFLLE1BQXNELFNBQS9CLEtBQUssYUFBYSxTQUNqRCxHQUFPLEdBQVcsS0FBSyxhQUFhLFVBSWEsU0FBekMsS0FBSyxhQUFhLHFCQUMxQixHQUFPLEtBQUssYUFBYSxVQUFZLElBR2xDLEtBQUssV0FDUixFQUF1QixXQUFkLEtBQUssTUFBbUMsVUFBZCxLQUFLLEtBQ3hDLEdBQU8sS0FBSyxTQUFTLFNBQVMsSUFJMUIsR0FBaUIsS0FBSyxLQUFLLFNBQVMsS0FDeEMsR0FBTyxLQUFPLEtBQUssU0FBUyxFQUFJLEtBRzFCLElBbURKLEdBQTJCLEdBdUIzQixHQUE2QixHQXlFN0IsR0FBVSxTQUFVLEdBQ3ZCLEtBQUssS0FBSyxHQUdYLElBQVEsV0FDUCxPQUFRLEdBQ1IsT0FBUSxHQUNSLEtBQU0sR0FDTixRQUFTLEdBQ1Qsa0JBQW1CLEdBQ25CLGNBQWUsR0FDZixhQUFjLEdBQ2QsVUFBVyxHQUNYLGFBQWMsR0FDZCxLQUFNLEdBQ04sT0FBUSxHQUNSLE9BQVEsR0FDUixTQUFVLEdBQ1YsT0FBUSxHQUNSLFNBQVUsR0FHWCxJQUFJLElBQVcsR0FFWCxHQUFrQixRQUNsQixHQUE4QixPQUU5QixHQUFXLFNBQVUsR0FDeEIsR0FBSSxHQUFPLEVBQVcsRUFBVSxDQXVCaEMsT0FyQkEsR0FBUSxFQUFJLE1BQU0sTUFHbEIsRUFBWSxFQUFNLEdBQ0EsU0FBZCxHQUEyQixHQUFnQixLQUFLLElBQ25ELEVBQU0sUUFHUCxFQUFXLEVBQVMsR0FDSCxTQUFiLEdBQTBCLEdBQWdCLEtBQUssSUFDbEQsRUFBTSxNQUdQLEVBQVksRUFBTSxPQUFPLEdBQVMsTUFFOUIsSUFDSCxFQUFNLEVBQU0sSUFBSSxTQUFVLEdBQ3pCLE1BQU8sR0FBSyxRQUFRLEVBQVcsTUFDN0IsS0FBSyxPQUdGLEdBYUosR0FBNkIsR0F1RzdCLEdBQWMsU0FBVSxFQUFRLEdBR25DLE1BQUssR0FJTSxFQUFPLE1BQU0sTUFBTSxJQUFJLFNBQVUsRUFBTSxHQUNqRCxNQUFPLEdBQWUsRUFBUyxFQUFPLElBQ3BDLEtBQUssTUFMQSxHQVlMLEdBQVUsU0FBVSxHQUN2QixHQUFJLEdBQWdCLENBRXBCLEdBQWlCLEtBQUssZUFBaUIsRUFBUSxlQUUvQyxLQUFLLEtBQU8sRUFBZSxLQUMzQixLQUFLLEtBQU8sR0FDWixLQUFLLE1BQVEsRUFBUSxNQUNyQixLQUFLLEtBQU8sRUFBUSxTQUFTLEVBQzdCLEtBQUssVUFBVyxFQUVoQixLQUFLLFNBQVcsS0FBSyxpQkFBbUIsS0FBSyxtQkFBcUIsS0FFbEUsR0FBUyxLQUFLLEtBQU0sR0FLZixLQUFLLFdBQ0wsRUFBVyxHQUEyQixLQUFLLEtBQU0sS0FBSyxLQUFNLEtBQy9ELEdBQWMsS0FBSyxNQUNuQixLQUFLLFNBQVUsRUFDZixLQUFLLFlBQVksSUFFakIsRUExQnlCLDJDQTBCYyxLQUFLLE9BSy9DLElBQVEsV0FDUCxPQUFRLFdBQ1AsS0FBSyxlQUFlLFVBR3JCLE9BQVEsV0FDUCxNQUFPLE1BQUssU0FBUyxVQUd0QixLQUFNLFNBQVUsR0FDZixNQUFPLE1BQUssU0FBUyxLQUFLLElBRzNCLFFBQVMsU0FBVSxFQUFVLEdBQzVCLE1BQU8sTUFBSyxTQUFTLFFBQVEsRUFBVSxJQUd4QyxjQUFlLFNBQVUsR0FDeEIsTUFBTyxNQUFLLFNBQVMsY0FBYyxJQUdwQyxrQkFBbUIsU0FBVSxFQUFVLEdBQ3RDLE1BQU8sTUFBSyxTQUFTLGtCQUFrQixFQUFVLElBR2xELFVBQVcsV0FDVixNQUFPLE1BQUssU0FBUyxhQUd0QixhQUFjLFdBQ2IsTUFBTyxNQUFLLGVBQWUsYUFBYSxPQUd6QyxlQUFnQixXQUNmLE1BQUksTUFBSyxTQUFXLEtBQUssS0FBYSxLQUFLLEtBQTZCLFNBQWYsS0FBSyxNQUE0QixLQUFLLEtBQWlCLEtBQUssT0FHdEgsU0FBVSxXQUNULE1BQU8sTUFBSyxTQUFTLFlBR3RCLE9BQVEsU0FBVSxFQUFZLEdBRXhCLEtBQUssU0FDVCxHQUFnQixLQUFLLEtBQU0sRUFBWSxHQUdwQyxLQUFLLFVBQ1IsS0FBSyxTQUFTLE9BQU8sRUFBWSxJQUluQyxPQUFRLFdBS1AsTUFKQSxNQUFLLFFBQVUsU0FBUyx5QkFDeEIsS0FBSyxTQUVMLEtBQUssVUFBVyxFQUNULEtBQUssU0FHYixRQUFTLEdBQVMsUUFFbEIsU0FBVSxTQUFVLEdBQ25CLEdBQUksRUFFVSxVQUFWLEdBQXVCLElBQVUsS0FBSyxRQUs1QixTQUFWLElBQ0gsRUFBVyxHQUEyQixLQUFLLEtBQU0sR0FBSyxFQUFPLEtBQUssa0JBTTlELEdBQVksS0FBSyxPQUFTLEVBQVcsR0FBMkIsS0FBSyxLQUFNLEtBQUssS0FBTSxLQUFLLG1CQUMvRixHQUFjLEtBQUssTUFDbkIsS0FBSyxTQUFVLEdBR1gsR0FDSixFQWxIeUIsMkNBa0hjLEtBQUssTUFBUSxRQUFTLEtBQUssT0FHbkUsS0FBSyxNQUFRLEVBRWIsS0FBSyxZQUFZLE9BRWpCLEtBQUssU0FFRCxLQUFLLFVBQ1IsR0FBZSxRQUFRLFFBSXpCLFlBQWEsU0FBVSxHQUNsQixLQUFLLFdBQ1IsS0FBSyxTQUFTLFNBQ1YsS0FBSyxXQUNSLEtBQUssbUJBQXFCLEtBQUssV0FJakMsS0FBSyxTQUFXLEdBQUksS0FDbkIsU0FBVSxFQUNWLEtBQU0sS0FBSyxLQUNYLE1BQU8sS0FDUCxTQUFVLEtBQUssZUFBZSxXQUcvQixLQUFLLGlCQUFtQixLQUFLLFVBRzlCLFNBQVUsU0FBVSxHQUNuQixHQUFJLEdBQVEsRUFBYyxFQUFVLENBTXBDLE9BSkEsR0FBUyxLQUFLLFNBQVMsU0FBUyxJQUVoQyxFQUFlLEtBQUssZUFBZSxNQUFNLEtBQUssTUFBUSxLQXJoUzdDLElBdWhTWSxFQUFhLE1BSWxDLEVBQVcsRUFBYSxLQUFLLE1BQU0sTUFBTSxPQUVyQyxFQUFRLFFBQVEsS0FBSyxJQUNqQixHQUFZLEVBQVEsRUFBTSxJQUczQixHQVRDLEdBWVQsT0FBUSxXQUNGLEtBQUssU0FFVCxHQUFjLEtBQUssTUFHaEIsS0FBSyxVQUNSLEtBQUssU0FBUyxVQUloQixTQUFVLFNBQVUsR0FDZixLQUFLLFdBQ0osS0FBSyxVQUNSLEtBQUssU0FBUyxTQUFTLEdBRXhCLEtBQUssVUFBVyxJQUlsQixPQUFRLFdBQ1AsR0FBSSxHQUFRLENBRVIsTUFBSyxxQkFDUixLQUFLLG1CQUFtQixVQUFTLEdBQ2pDLEtBQUssbUJBQXFCLE1BR3ZCLEtBQUssbUJBQ1IsS0FBSyxRQUFRLFlBQVksS0FBSyxpQkFBaUIsVUFDL0MsS0FBSyxpQkFBbUIsTUFHckIsS0FBSyxXQUNSLEVBQVMsS0FBSyxlQUFlLFVBQzdCLEVBQVMsS0FBSyxlQUFlLGFBQWEsTUFDMUMsRUFBTyxhQUFhLEtBQUssUUFBUyxLQUtyQyxJQWtISSxJQUNBLEdBQ0EsR0FwSEEsR0FBVyxHQUlYLEdBQXlCLEdBbUN6QixHQUE2QixHQUM3QixHQUF5QyxHQUFJLElBQVcsVUFPeEQsR0FBMkIsR0FNM0IsR0FBOEIsR0FNOUIsR0FBd0MsR0FVeEMsR0FBb0MsR0FjcEMsR0FBbUMsR0FNbkMsR0FBZ0MsR0FVaEMsR0FBaUIsU0FBVSxFQUFTLEVBQU8sRUFBWSxHQUMxRCxHQUFJLEdBQU8sRUFBUSxLQUNmLEVBQVUsRUFBUSxPQUVoQixHQUNMLEVBQUssVUFBVSxZQUFZLEVBQVMsRUFBTyxHQUkzQyxFQUFLLFVBQVUsS0FBSyxJQUlsQixNQUNBLElBQWtCLE1BQU8sT0FBUSxVQUFXLFFBQVMsT0FBUSxTQUFVLFVBSzNFLElBQWUsUUFBUSxTQUFVLEdBK0JoQyxHQUFlLEdBQW1CLEdBQ2pDLE1BL0JZLFdBQ1osSUFBSyxHQUFJLEdBQU8sVUFBVSxPQUFRLEVBQU8sTUFBTSxHQUFPLEVBQU8sRUFBRyxFQUFPLEVBQU0sSUFDNUUsRUFBSyxHQUFRLFVBQVUsRUFHeEIsSUFBSSxHQUFZLEVBQVEsRUFBUyxDQVlqQyxLQVZBLEVBQWEsR0FBcUIsS0FBTSxFQUFZLEdBR3BELEVBQVMsTUFBTSxVQUFVLEdBQVksTUFBTSxLQUFNLFdBR2pELEdBQWUsUUFFZixLQUFLLFNBQVMsU0FBVSxFQUN4QixFQUFJLEtBQUssU0FBUyxTQUFTLE9BQ3BCLEtBQ04sRUFBVSxLQUFLLFNBQVMsU0FBUyxHQUVqQyxHQUFlLFdBQVcsRUFBUSxNQUNsQyxHQUFlLEVBQVMsS0FBTSxFQUFZLEVBTTNDLE9BSEEsSUFBZSxNQUVmLEtBQUssU0FBUyxTQUFVLEVBQ2pCLE9BVVQsTUFFSSxHQUFRLFdBRVgsR0FBb0IsU0FBVSxHQUM3QixFQUFNLFVBQVksSUFHbkIsR0FBc0IsU0FBVSxHQUMvQixFQUFNLFVBQVksTUFBTSxhQUl6QixHQUFvQixTQUFVLEdBQzdCLEdBQUksR0FBRyxDQUdQLEtBREEsRUFBSSxHQUFlLE9BQ1osS0FDTixFQUFhLEdBQWUsR0FDNUIsR0FBZSxFQUFPLEdBQ3JCLE1BQU8sR0FBa0IsR0FDekIsY0FBYyxLQUtqQixHQUFzQixTQUFVLEdBQy9CLEdBQUksRUFHSixLQURBLEVBQUksR0FBZSxPQUNaLFdBQ0MsR0FBTSxHQUFlLE1BSy9CLEdBQWtCLFFBQVUsRUFDNUIsSUFFSSxJQUdKLEdBQWMsR0FMVixHQUFRLEVBT1osS0FDQyxPQUFRLFNBQVUsR0FHakIsTUFBTyxHQUFRLE1BQWEsRUFBTyxXQUFhLEVBQU8sU0FBUyxVQUVqRSxLQUFNLFNBQVUsRUFBUyxFQUFPLEdBQy9CLE1BQU8sSUFBSSxJQUFhLEVBQVMsRUFBTyxLQUkxQyxHQUFlLFNBQVUsRUFBUyxFQUFPLEdBQ3hDLEtBQUssS0FBTyxFQUNaLEtBQUssTUFBUSxFQUNiLEtBQUssUUFBVSxFQUFXLEdBR3JCLEVBQU0sV0FHVixHQUFlLEVBQU8sWUFDckIsT0FDQyxZQUNBLGFBQ0EsU0FBUyxHQUVWLGNBQWMsSUFHZixHQUFNLElBSUYsRUFBTSxTQUFTLFVBQVUsRUFBUSxTQUNyQyxFQUFNLFNBQVMsVUFBVSxFQUFRLE9BQVMsRUFDMUMsRUFBTSxTQUFTLFVBQVUsS0FBSyxJQUcvQixFQUFNLFNBQVMsVUFBVSxFQUFRLFFBQVUsRUFDM0MsRUFBTSxTQUFTLFNBQVMsS0FBSyxPQUc5QixHQUFhLFdBQ1osSUFBSyxXQUNKLE1BQU8sTUFBSyxPQUViLFNBQVUsV0FDVCxHQUFJLEdBQU8sRUFBUyxFQUFVLEVBQVcsQ0FVekMsSUFSQSxFQUFRLEtBQUssTUFDYixFQUFVLEVBQU0sU0FDaEIsRUFBVyxFQUFRLFNBQ25CLEVBQVksRUFBUSxVQUtoQixFQUFRLFFBQ1gsT0FBTyxDQUlSLEtBREEsRUFBUSxFQUFTLFFBQVEsVUFDVixFQUNkLEtBQU0sSUFBSSxPQUFNLEdBT2pCLElBSkEsRUFBUyxPQUFPLEVBQU8sR0FJbEIsRUFBUyxRQU1iLEdBREEsRUFBVSxLQUFLLEtBQUssUUFBVSxHQUN6QixFQUFVLEtBQUssS0FBSyxPQUFRLENBR2hDLElBRkEsRUFBUSxFQUFVLFFBQVEsS0FBSyxVQUVoQixFQUNkLEtBQU0sSUFBSSxPQUFNLEdBR2pCLEdBQVUsT0FBTyxFQUFPLGVBWmxCLEdBQU0sU0FDYixHQUFNLFFBQVEsS0FBSyxTQWlCdEIsR0FBNEIsa0RBQzVCLElBUUksSUFBYyxHQVJkLEdBQWMsR0FFZCxHQUFVLGlCQUVWLEdBQWUsU0FBVSxHQUM1QixNQUFPLElBQVEsS0FBSyxTQUtyQixLQUNDLE9BQU8sa0JBQW1CLFFBQVUsTUFBTyxJQUUzQyxJQUNDLE9BQVEsU0FBVSxFQUFRLEVBQVMsR0FDbEMsR0FBSSxHQUFlLENBRW5CLFNBQUssSUFJTCxFQUFVLEVBQVcsTUFJaEIsRUFBZ0IsRUFBUSxVQUFVLFFBQVEsRUFBUSxPQUFPLFFBQVUsRUFBYyxTQUl0RixFQUFjLEVBQVEsVUFBVSxJQUFJLEVBQVEsVUFJeEMsRUFBUSxLQUFnQixXQUFXLEtBQUssRUFBUSxZQUk3QyxJQUF1QyxnQkFBaEIsSUFBbUQsa0JBQWhCLFFBRWxFLEtBQU0sU0FBVSxFQUFTLEVBQVUsR0FDbEMsTUFBTyxJQUFJLElBQWEsRUFBUyxFQUFVLEtBSTdDLEdBQWUsU0FBVSxFQUFTLEVBQU8sR0FDeEMsR0FBSSxHQUFZLEVBQVUsQ0FrQjFCLElBaEJBLEVBQVUsRUFBVyxHQUVyQixLQUFLLE9BQVEsRUFFYixLQUFLLFFBQVUsRUFDZixLQUFLLFFBQVUsRUFDZixLQUFLLE1BQVEsRUFFYixLQUFLLEtBQU8sRUFBUSxRQUVwQixFQUFhLEVBQVEsT0FDckIsS0FBSyxJQUFNLEVBQVcsT0FBUyxFQUFRLFVBQVUsS0FBTyxFQUFRLFVBQVUsSUFBSSxJQUU5RSxFQUFXLEtBQUssbUJBQXFCLE9BQU8seUJBQXlCLEtBQUssSUFBSyxLQUFLLFFBR3BFLEVBQVMsTUFBUSxFQUFXLEVBQVMsSUFBSSxrQkFPeEQsWUFKSSxFQUFTLFFBQVEsU0FBVyxHQUMvQixFQUFTLEtBQUssTUFPaEIsSUFBZ0IsS0FBTSxFQUFPLElBRzlCLEdBQWEsV0FDWixJQUFLLFdBQ0osTUFBTyxNQUFLLE9BRWIsTUFBTyxTQUFVLEdBQ2hCLElBQUksS0FBSyxTQVNULE1BTEEsTUFBSyxVQUFXLEVBQ2hCLEtBQUssSUFBSSxLQUFLLE1BQVEsRUFDdEIsR0FBZSxXQUFXLEtBQUssU0FDL0IsS0FBSyxRQUFRLFVBQVUsS0FBSyxLQUFLLFNBQVcscUJBQXFCLElBQ2pFLEtBQUssVUFBVyxHQUNULEdBRVIsSUFBSyxTQUFVLEVBQUssR0FDZixLQUFLLFdBSUosS0FBSyxJQUFJLEtBQUssUUFDbEIsS0FBSyxVQUFXLEVBQ2hCLEtBQUssSUFBSSxLQUFLLE1BQVEsR0FBYSxHQUNuQyxLQUFLLFVBQVcsR0FHakIsS0FBSyxJQUFJLEtBQUssTUFBTSxHQUFPLElBRTVCLFNBQVUsV0FDVCxHQUFJLEdBQVUsRUFBSyxFQUFPLEVBQVUsQ0FLcEMsSUFBSSxLQUFLLFNBQ1IsT0FBTyxDQUdSLEdBQVcsT0FBTyx5QkFBeUIsS0FBSyxJQUFLLEtBQUssT0FDMUQsRUFBTSxHQUFZLEVBQVMsT0FPM0IsRUFBVyxFQUFJLGlCQUVmLEVBQVEsRUFBUyxRQUFRLE1BQ3JCLEtBQVcsR0FDZCxFQUFTLE9BQU8sRUFBTyxHQUluQixFQUFTLFNBQ2IsRUFBUSxLQUFLLElBQUksS0FBSyxNQUV0QixPQUFPLGVBQWUsS0FBSyxJQUFLLEtBQUssS0FBTSxLQUFLLHFCQUMvQyxVQUFVLEVBQ1YsWUFBWSxFQUNaLGNBQWMsSUFHZixLQUFLLElBQUksS0FBSyxNQUFRLE1BSXhCLE1BQU8sR0FDUixJQUFlLEVBR2hCLEdBaUVJLElBQW1CLEdBakVuQixHQUFpQixFQW1FakIsTUFDSCxJQUNDLE9BQVEsU0FBVSxFQUFRLEVBQVMsR0FDbEMsTUFBTyxJQUFlLE9BQU8sRUFBUSxFQUFTLElBQVksR0FBWSxPQUFPLElBRzlFLEtBQU0sU0FBVSxFQUFTLEVBQU8sR0FDL0IsTUFBTyxJQUFJLElBQWtCLEVBQVMsRUFBTyxLQUkvQyxHQUFvQixTQUFVLEVBQVMsRUFBTyxHQUM3QyxLQUFLLE1BQVEsRUFFYixLQUFLLE9BQVEsRUFFYixLQUFLLGFBQWUsR0FBZSxLQUFLLEVBQVMsRUFBTyxHQUN4RCxLQUFLLGFBQWUsR0FBWSxLQUFLLEVBQVMsRUFBTyxJQUd0RCxHQUFrQixXQUNqQixJQUFLLFdBQ0osTUFBTyxNQUFLLE9BRWIsU0FBVSxXQUNULEtBQUssYUFBYSxXQUNsQixLQUFLLGFBQWEsWUFFbkIsTUFBTyxTQUFVLEdBQ2hCLE1BQU8sTUFBSyxhQUFhLE1BQU0sS0FLbEMsSUFBSSxJQUFhLEdBRWIsR0FBa0IsR0FFbEIsTUFpRUEsR0FBNkIsR0FxQjdCLEdBQXNDLEdBOEN0QyxHQUFlLEdBcU1mLEdBQVUsR0FNVixHQUFhLEdBMkJiLEdBQXVCLFNBQVUsRUFBYSxHQUNqRCxLQUFLLFlBQWMsRUFDbkIsS0FBSyxVQUFZLEVBQVksVUFDN0IsS0FBSyxJQUFNLEVBR1gsS0FBSyxLQUFPLEtBQUssVUFBVSxRQUMzQixLQUFLLGVBQWlCLEtBQUssS0FBSyxXQUFhLEtBQUssS0FBSyxVQUFVLGVBR2xFLElBQXFCLFdBQ3BCLFFBQVMsU0FBVSxHQUNsQixLQUFLLFlBQVksU0FBUyxLQUFLLEdBQy9CLEtBQUssWUFBWSxlQUFlLEVBQVEsS0FBTyxLQUMvQyxLQUFLLFVBQVUsU0FBUyxFQUFTLEtBQUssWUFBYSxhQUlyRCxJQUFJLElBQW1DLEdBRW5DLEdBQWMsU0FBVSxFQUFLLEdBQ2hDLEtBQUssSUFBTSxFQUVYLEtBQUssT0FBUyxFQUFVLE9BQ3hCLEtBQUssT0FBUyxFQUFVLE9BRXhCLEtBQUssU0FBVyxFQUFVLFNBQzFCLEtBQUssWUFDTCxLQUFLLGtCQUVMLEtBQUssYUFFTCxLQUFLLE9BQVMsS0FBSyxXQUFZLEVBR2hDLElBQVksV0FDWCxZQUFhLEdBRWIsS0FBTSxTQUFVLEdBQ2YsR0FFSSxHQUZBLEVBQVEsSUFJWixNQUFLLFVBQVksRUFDakIsS0FBSyxRQUFTLEVBRWQsRUFBVSxFQUFVLElBQUksS0FBSyxLQUM3QixFQUFVLFdBQVcsS0FBSyxJQUFJLEtBRTlCLEtBQUssUUFBUyxFQUVWLEtBQUssUUFBc0IsU0FBWixHQUNsQixLQUFLLElBQUksR0FHTixLQUFLLFVBQ1IsS0FBSyxTQUFTLFFBQVEsU0FBVSxHQUMvQixNQUFPLEdBQVUsU0FBUyxFQUFHLEVBQU8sZUFLdkMsV0FBWSxXQUNYLEtBQUssUUFBUyxHQUdmLElBQUssV0FDSixHQUVJLEdBQ0EsRUFIQSxFQUFRLEtBSVIsR0FBMEIsQ0FFOUIsSUFBSSxLQUFLLFFBQVMsQ0FJakIsTUFEQSxHQURVLE9BQVMsS0FBSyxJQUFJLElBQU0sa05BRTNCLEtBQUssTUFLYixHQUZBLEtBQUssU0FBVSxFQUVYLEtBQUssT0FBUSxDQTRCaEIsR0F6QkksS0FBSyxZQUFjLEtBQUssU0FBUyxTQUFXLEtBQUssU0FBUyxPQUM3RCxHQUEwQixHQUV6QixLQUFLLFNBQVUsS0FBSyxVQUFVLFFBQVEsU0FBVSxHQUNoRCxHQUFJLEdBQVMsRUFBTyxDQUVwQixLQUFJLEVBS0osSUFEQSxFQUFJLEVBQUssT0FDRixLQUlOLEdBSEEsRUFBVSxFQUFLLEdBQ2YsRUFBUSxFQUFNLFVBQVUsSUFBSSxJQUV2QixFQUFRLEVBQU8sRUFBTSxVQUFVLEVBQVEsTUFJM0MsTUFIQSxHQUFNLFVBQVUsRUFBUSxLQUFPLE9BQy9CLEdBQTBCLEtBUTFCLEVBQXlCLENBQzVCLEtBQUssVUFBVSxTQUVmLEtBQ0MsS0FBSyxNQUFRLEtBQUssU0FDakIsTUFBTyxHQUNSLEVBQVkseUJBQTRCLEtBQUssSUFBSSxLQUNqRCxFQUFXLEVBQUksT0FBUyxHQUV4QixLQUFLLE1BQVEsT0FHZCxFQUFVLEtBQUssVUFBVSxVQUN6QixFQUFzQixLQUFLLG1CQUFtQixHQUUxQyxJQUNGLEtBQUssU0FBVSxLQUFLLFVBQVUsUUFBUSxTQUFVLEdBQ2hELEVBQUssUUFBUSxTQUFVLEdBQ3RCLEVBQU0sVUFBVSxFQUFRLEtBQU8sRUFBTSxVQUFVLElBQUksT0FNdkQsS0FBSyxRQUFTLEVBSWYsTUFEQSxNQUFLLFFBQVUsS0FBSyxXQUFZLEVBQ3pCLEtBQUssT0FHYixJQUFLLFNBQVUsR0FDZCxHQUFJLEtBQUssUUFFUixZQURBLEtBQUssTUFBUSxFQUlkLEtBQUssS0FBSyxPQUNULEtBQU0sSUFBSSxPQUFNLHVHQUdqQixNQUFLLE9BQU8sSUFHYixtQkFBb0IsU0FBVSxHQUM3QixHQUFJLEdBQUcsRUFBUyxFQUFTLEVBQXFCLENBTTlDLEtBSkEsRUFBVSxLQUFLLFNBR2YsRUFBSSxFQUFRLE9BQ0wsS0FDTixFQUFVLEVBQVEsR0FFZCxFQUFRLFFBQVEsTUFBYyxJQUNqQyxHQUFzQixFQUN0QixLQUFLLFVBQVUsV0FBVyxFQUFTLEtBQU0sWUFNM0MsS0FEQSxFQUFJLEVBQVEsT0FDTCxLQUNOLEVBQVUsRUFBUSxHQUVkLEVBQVEsUUFBUSxNQUFjLEdBQU8sS0FBSyxVQUFZLEtBQUssU0FBUyxRQUFRLE1BQWMsSUFDN0YsR0FBc0IsRUFJbEIsR0FBYSxLQUFLLFVBQVcsS0FBYSxLQUFLLGVBQWUsRUFBUSxNQUN6RSxFQUFhLEdBQUksSUFBaUMsS0FBTSxFQUFRLEtBQ2hFLEVBQVEsT0FBTyxFQUFHLEdBRWxCLEtBQUssZUFBZSxFQUFRLEtBQU8sRUFDbkMsR0FBZSxjQUFjLElBRTdCLEtBQUssVUFBVSxTQUFTLEVBQVMsS0FBTSxZQVMxQyxPQUpJLEtBQ0gsS0FBSyxTQUFXLEVBQVEsU0FHbEIsR0FVVCxJQUFJLElBQTBCLEdBRTFCLEdBQVUsR0FXVixJQUFrQixlQUFlLEdBRWpDLEdBQTBCLEdBRTFCLE1BNEdBLEdBQTJCLEdBVTNCLEdBQWdCLEdBUWhCLEdBQVUsU0FBVSxFQUFVLEdBQ2pDLEtBQUssU0FBVyxFQUNoQixLQUFLLFFBQVUsRUFBUSxRQUN2QixLQUFLLE9BQVMsRUFBUSxPQUV0QixLQUFLLFFBQ0wsS0FBSyxjQUVMLEtBQUssVUFBVyxFQUdqQixJQUFRLFdBQ1AsZ0JBQWlCLFdBRWhCLEtBQUssUUFBVSxLQUFLLFNBQ3BCLEtBQUssU0FHTixJQUFLLFNBQVUsRUFBUyxHQUN2QixHQUFLLEtBQUssU0FHVixNQUFPLE1BQUssT0FBTyxJQUFJLEtBQUssSUFBSSxHQUFVLElBRzNDLFNBQVUsV0FDVCxHQUFLLEtBQUssUUFHVixNQUFPLE1BQUssT0FBTyxJQUFJLEtBQUssVUFHN0IsY0FBZSxTQUFVLEdBQ3hCLEtBQUssTUFBUSxFQUNiLEtBQUssU0FHTixJQUFLLFNBQVUsR0FDZCxNQUE0QixnQkFBakIsTUFBSyxRQUNSLEtBQUssU0FFTixFQUFRLFFBQVEsS0FBSyxTQUFVLEtBQUssVUFHNUMsU0FBVSxTQUFVLEVBQVMsRUFBVyxHQUN2QyxLQUFLLEtBQUssTUFBTyxRQUFTLEVBQVMsSUFBSyxFQUFXLE1BQU8sSUFFdEQsS0FBSyxVQUNSLEtBQUssT0FBTyxTQUFTLEtBQUssSUFBSSxHQUFVLEVBQVcsSUFJckQsUUFBUyxTQUFVLEdBQ0csU0FBakIsS0FBSyxTQUNSLEtBQUssUUFBTyxHQUdiLEtBQUssUUFBVSxFQUNmLEtBQUssU0FHTixJQUFLLFNBQVUsRUFBUyxHQUNsQixLQUFLLFVBQ1QsS0FBSyxrQkFHTixLQUFLLE9BQU8sSUFBSSxLQUFLLElBQUksR0FBVSxJQUdwQyxNQUFPLFdBQ04sR0FBSSxHQUFRLElBRVMsVUFBakIsS0FBSyxVQUlULEtBQUssVUFBVyxFQUdaLEtBQUssS0FBSyxTQUNiLEtBQUssS0FBSyxRQUFRLFNBQVUsR0FDM0IsR0FBSSxHQUFVLEVBQU0sSUFBSSxFQUFFLFFBSTFCLElBSEEsRUFBTSxPQUFPLFNBQVMsRUFBUyxFQUFFLElBQUssRUFBRSxPQUdwQyxFQUFFLElBQUksU0FDVCxFQUFFLElBQUksU0FBUyxFQUFNLE9BQU8sSUFBSSxRQUMxQixDQUFBLElBQUksRUFBRSxJQUFJLFdBR2hCLEtBQU0sSUFBSSxPQUFNLCtHQUZoQixHQUFFLElBQUksZ0JBTVIsS0FBSyxPQUFPLEtBQUssS0FBSyxZQUl4QixTQUFVLFNBQVUsR0FDbkIsSUFBSyxLQUFLLFFBQ1QsS0FBTSxJQUFJLE9BQU0sa0lBR2pCLE1BQUssT0FBTyxJQUFJLEtBQUssUUFBUyxJQUcvQixPQUFRLFNBQVUsR0FDakIsR0FBSSxHQUFRLElBRVAsVUFDRyxNQUFLLE1BQU0sU0FBUyxLQUFLLFVBRzVCLEtBQUssV0FJVixLQUFLLEtBQUssUUFBUSxTQUFVLEdBQzNCLEVBQU0sT0FBTyxXQUFXLEVBQU0sSUFBSSxFQUFFLFNBQVUsRUFBRSxJQUFLLEVBQUUsU0FHcEQsS0FBSyxTQUNSLEtBQUssT0FBTyxXQUFXLEtBQUssUUFBUyxLQUFLLFdBSTVDLFdBQVksU0FBVSxFQUFTLEVBQVcsR0FDekMsR0FBSSxHQUFNLENBRVYsSUFBSyxLQUFLLFNBQVYsQ0FPQSxJQUhBLEVBQU8sS0FBSyxLQUNaLEVBQUksRUFBSyxPQUVGLEtBQ04sR0FBSSxFQUFLLEdBQUcsTUFBUSxFQUFXLENBQzlCLEVBQUssT0FBTyxFQUFHLEVBQ2YsT0FHRixLQUFLLE9BQU8sV0FBVyxLQUFLLElBQUksR0FBVSxFQUFXLEtBSXZELElBQUksSUFBTyxHQW1DUCxHQUFtQixTQUFVLEVBQVUsR0FDMUMsR0FBSSxHQUFhLEVBQThCLENBb0MvQyxPQWxDQSxNQUNBLEVBQW1CLEVBRU4sRUFBUyxJQUFJLFNBQVUsRUFBTSxHQUN6QyxHQUFJLEdBQU8sRUFBTyxDQUVsQixHQUFRLEVBQ1IsRUFBTSxFQUFTLE1BRWYsR0FBRyxDQUdGLElBRkEsRUFBUSxFQUFTLFFBQVEsRUFBTSxPQUVoQixFQUVkLE1BREEsSUFBVSxHQUNGLENBR1QsR0FBUSxFQUFRLFFBQ1IsRUFBWSxJQUFVLEVBQVEsRUFhdkMsT0FUSSxLQUFVLElBQ2IsR0FBb0IsR0FHakIsSUFBVSxJQUNiLEdBQVUsR0FHWCxFQUFZLElBQVMsRUFDZCxLQU1MLEdBQVEsR0FFUixNQTZEQSxHQUFXLEdBa0RYLEdBQVUsR0FNVixHQUFRLEdBT1IsR0FBZ0IsR0E4RmhCLEdBQWMsR0FFZCxJQUFtQixVQUFVLEdBQzdCLElBQW9CLFdBQVcsR0E0Qy9CLEdBQXFCLEdBbUJyQixHQUFhLEdBbURiLEdBQVksU0FBVSxHQUN6QixHQUtJLEdBQ0EsRUFOQSxFQUFRLEVBQVEsTUFDaEIsRUFBTyxFQUFRLEtBQ2YsRUFBVSxFQUFRLFFBQ2xCLEVBQVcsRUFBUSxTQUNuQixFQUFXLEVBQVEsUUFLdkIsTUFBSyxRQUFVLEVBRWYsS0FBSyxTQUFXLEVBQ2hCLEtBQUssU0FBVyxFQUFRLFNBRXhCLEtBQUssU0FDTCxLQUFLLFNBQVcsR0FBTyxNQUV2QixLQUFLLE1BQ0osU0FBVSxHQUFPLE1BQ2pCLFFBQVcsR0FBTyxPQUVuQixLQUFLLFNBQ0osU0FBVSxHQUFPLE1BQ2pCLFFBQVcsR0FBTyxPQUduQixLQUFLLG9CQUVMLEtBQUssU0FBVyxHQUFPLE1BRXZCLEtBQUssUUFBVSxHQUFPLE1BQ3RCLEtBQUssYUFBZSxHQUFPLE1BRTNCLEtBQUssaUJBQ0wsS0FBSyxrQ0FFTCxLQUFLLFdBQ0wsS0FBSyxtQkFDTCxLQUFLLGFBRUwsS0FBSyxLQUFPLEVBR1osS0FBSyxTQUFXLEdBQU8sS0FDdkIsS0FBSyxJQUFPLEdBQ1gsS0FBSyxJQUFJLEVBQVcsR0FBTSxFQUFTLEdBR3BDLElBQUksRUFHSCxJQUFLLElBQU8sSUFDTixFQUFVLEtBQUssU0FBUyxLQUFnQyxTQUF2QixFQUFRLFlBQzdDLEVBQVEsU0FBUyxFQUFLLEdBS3pCLEtBQUssSUFBTyxHQUNQLEdBQVksSUFBTyxJQUN0QixFQUFNLDJDQUE0QyxHQUduRCxLQUFLLFFBQVEsRUFBVyxHQUFNLEVBQVMsR0FHeEMsTUFBSyxPQUFRLEVBR2QsSUFBVSxXQUNULE1BQU8sR0FDUCxhQUFjLEdBQ2QsUUFBUyxHQUNULFdBQVksR0FDWixRQUFTLEdBQ1QsSUFBSyxHQUNMLEtBQU0sR0FDTixJQUFLLEdBQ0wsS0FBTSxHQUNOLE1BQU8sR0FDUCxTQUFVLEdBQ1YsUUFBUyxHQUNULE1BQU8sR0FDUCxJQUFLLEdBQ0wsWUFBYSxHQUNiLFNBQVUsR0FDVixXQUFZLEdBR2IsSUFBSSxJQUFzQixFQVExQixJQUFVLFdBRVQsWUFBYSxHQUViLE1BQU8sU0FBVSxHQUNoQixLQUFLLFVBQVUsRUFBUSxRQUFTLEdBR2pDLElBQUssU0FBVSxHQUVkLEdBQUksR0FBUyxFQUFRLE1BSWhCLElBQVcsS0FBSyxVQUFVLEVBQU8sT0FLckMsR0FBYyxLQUFLLE1BQU8sR0FBUSxLQUFLLEdBSnZDLEdBQUssS0FBTSxTQU9MLE1BQUssVUFBVSxFQUFRLFFBdUJoQyxJQUFJLElBQWtCLEdBRWxCLEdBQW1DLEdBRW5DLEdBQTRDLGtCQTRENUMsR0FBZ0IsR0FBSSxJQUFXLGFBQy9CLEdBQWEsR0FBSSxJQUFXLFVBQzVCLEdBQVcsR0FBSSxJQUFnQixRQUMvQixHQUFrQixFQUVsQixJQUE2QixXQUFZLGFBQWMsYUFBYyxTQUFVLFNBQVUsZ0JBQWlCLFdBQVksZUFFdEgsR0FBYSxHQXNOYixHQUE4QixFQUVsQyxJQUFpQixXQUNoQixPQUFRLFdBQ0YsS0FBSyxRQUNULEtBQUssT0FBUSxFQUNiLEdBQWUsUUFBUSxRQUl6QixPQUFRLFdBQ1AsS0FBSyxTQUFTLEtBQUssU0FBUyxZQUM1QixLQUFLLE9BQVEsR0FHZCxPQUFRLFNBQVUsRUFBWSxHQUM3QixLQUFLLFNBQVMsT0FBTyxFQUFZLElBR2xDLE9BQVEsV0FDUCxLQUFLLFNBQVMsVUFJaEIsSUFBSSxJQUFpQixTQUFVLEVBQVcsRUFBVyxFQUFZLEVBQWUsR0FDL0UsR0FBSSxHQUNBLEVBQ0EsRUFDQSxFQUNBLEVBSUEsRUFIQSxLQUNBLEtBQ0EsS0FFQSxJQW9CSixLQWxCQSxFQUFpQixFQUFVLGVBQzNCLEVBQVUsRUFBVSxLQUVwQixFQUFXLE1BQ1gsRUFBcUIsRUFBZ0IsR0FHckMsRUFBUyxRQUFVLE1BR25CLEVBQWUsSUFBTSxFQUFTLFFBRTFCLEVBQVUsU0FBUyxJQUN0QixFQUFZLDJFQUE0RSxFQUFVLE1BSW5HLEVBQVcsRUFDSixHQUFVLENBQ2hCLEdBQUksRUFBUyxNQUFNLE9BQVMsR0FBUyxDQUNwQyxFQUFZLEVBQVMsTUFBTSxTQUMzQixPQUdELEVBQVcsRUFBUyxPQW9GckIsTUFoRkksSUFDSCxPQUFPLEtBQUssR0FBWSxRQUFRLFNBQVUsR0FDekMsR0FDSSxHQUNBLEVBRkEsRUFBWSxFQUFXLEVBSTNCLElBQXlCLGdCQUFkLEdBRVYsRUFBUyxHQUFVLEdBQ25CLEVBQUssR0FBTyxFQUFTLEVBQU8sTUFBUSxNQUM5QixJQUFrQixJQUFkLEVBRVYsRUFBSyxJQUFPLE1BQ04sQ0FBQSxJQUFJLEVBQVEsR0F1Q2xCLEtBQU0sSUFBSSxPQUFNLFVBckNaLElBQXFCLElBQ3hCLEVBQVMsSUFDUixPQUFRLEVBQVUsS0FBSyxVQUN2QixRQUFTLFFBR1YsRUFBVyxHQUFlLEVBQVcsRUFBVSxHQUFJLFNBQVUsR0FDeEQsRUFBUSxVQUNQLEVBQ0gsRUFBUyxJQUFJLEVBQUssRUFBUSxRQUUxQixFQUFLLEdBQU8sRUFBUSxZQUdiLEdBQVMsSUFHYixFQUNILEVBQVMsVUFBVSxTQUFTLEdBQUssUUFBUSxHQUd6QyxFQUFTLEdBQUssUUFBVSxLQUszQixFQUFXLEdBQUksSUFBNEIsRUFBVyxFQUFXLFNBQVUsR0FDdEUsRUFDSCxFQUFTLElBQUksRUFBSyxHQUVsQixFQUFLLEdBQU8sSUFLZixFQUFVLEtBQUssTUFPbEIsRUFBVyxHQUFPLEVBQVUsV0FFNUIsR0FBVyxHQUNWLEdBQUksS0FDSixRQUFRLEVBQ1IsS0FBTSxFQUNOLFNBQVUsRUFDVixNQUFPLEVBQVEsT0FBUyxFQUFVLFNBQVMsTUFDM0MsYUFBYyxFQUFRLGFBRXRCLE1BQU8sRUFBUSxRQUVmLE9BQVEsRUFDUixVQUFXLEVBQ1gsVUFBVyxFQUNYLFNBQVUsRUFDVixlQUFnQixFQUNoQixPQUFRLEVBQWUsU0FHeEIsR0FBUSxFQUNSLEVBQVUsVUFBWSxFQUVmLEdBMkJKLEdBQTZCLEdBa0M3QixHQUErQixTQUFVLEdBQzVDLEdBQUksR0FBVSxDQUlkLEtBREEsRUFBVyxFQUFVLEtBQ2QsSUFDRixFQUFRLEVBQVMsc0JBQXNCLElBQU0sRUFBVSxRQUMxRCxFQUFNLEtBQUssRUFBVSxVQUd0QixFQUFXLEVBQVMsUUFJbEIsR0FBMkIsR0E4QjNCLEdBQTZCLEdBc0I3QixHQUE2QixHQVc3QixHQUErQixHQU0vQixHQUE2QixHQUU3QixHQUEyQyxHQUFJLElBQVcsWUFpQzFELEdBQStCLEdBTy9CLEdBQVksU0FBVSxFQUFTLEdBQ2xDLEtBQUssS0FBSyxFQUFTLEdBR3BCLElBQVUsV0FDVCxPQUFRLEdBQ1IsS0FBTSxHQUNOLFFBQVMsR0FDVCxrQkFBbUIsR0FDbkIsY0FBZSxHQUNmLGFBQWMsR0FDZCxVQUFXLEdBQ1gsS0FBTSxHQUNOLE9BQVEsR0FDUixPQUFRLEdBQ1IsU0FBVSxHQUNWLE9BQVEsR0FDUixTQUFVLEdBR1gsSUFBSSxJQUFhLEdBRWIsR0FBVSxTQUFVLEdBQ3ZCLEtBQUssS0FBTyxHQUNaLEtBQUssTUFBUSxFQUFRLFNBQVMsRUFHL0IsSUFBUSxXQUNQLE9BQVEsR0FFUixVQUFXLFdBQ1YsTUFBTyxNQUFLLE1BR2IsT0FBUSxXQUtQLE1BSkssTUFBSyxPQUNULEtBQUssS0FBTyxTQUFTLGNBQWMsS0FBSyxRQUdsQyxLQUFLLE1BR2IsU0FBVSxXQUNULE1BQU8sT0FBUyxLQUFLLE1BQVEsT0FHOUIsU0FBVSxTQUFVLEdBQ2YsR0FDSCxLQUFLLEtBQUssV0FBVyxZQUFZLEtBQUssT0FLekMsSUFBSSxJQUFnQixHQUVoQixHQUFVLFNBQVUsR0FDdkIsR0FBSSxHQUFXLENBRWYsTUFBSyxLQUFPLEdBRVosS0FBSyxVQUFZLEVBQVksRUFBUSxlQUFlLEtBQ3BELEtBQUssVUFBWSxFQUFZLEVBQVUsVUFFdkMsS0FBSyxVQUFZO2lCQUNqQixLQUFLLGtCQUFvQixFQUFRLGVBQ2pDLEtBQUssZUFBaUIsRUFBVSxjQUVoQyxJQUFJLEdBQU8sS0FBSyxLQUFPLEVBQVEsU0FBUyxHQUFLLEdBRXpDLEVBQVcsRUFBVSxnQkFBZ0IsRUFFcEMsS0FDSixFQUFZLHdDQUEyQyxFQUFPLEtBQVEsUUFBUyxFQUFRLE9BQ3ZGLE1BR0QsS0FBSyxTQUFXLEdBQUksS0FDbkIsTUFBTyxLQUNQLEtBQU0sRUFBVSxPQUNoQixTQUFVLEVBQ1YsU0FBVSxLQUFLLGtCQUFrQixXQU03QixFQUFRLEVBQVUsU0FBUyxJQUcvQixFQUFVLFNBQVMsR0FBTSxLQUFLLE1BRjlCLEVBQVUsU0FBUyxJQUFTLE1BSzdCLEdBQWUsYUFBYSxXQUMzQixHQUFJLEVBQVUsU0FBUyxHQUFNLE9BQVMsRUFDckMsS0FBTSxJQUFJLE9BQU0sa0RBQW9ELEVBQU8sSUFBTSxFQUFPLElBQU0sOEJBS2pHLElBQVEsV0FDUCxPQUFRLFdBQ1AsTUFBTyxNQUFLLFNBQVMsVUFHdEIsS0FBTSxTQUFVLEdBQ2YsTUFBTyxNQUFLLFNBQVMsS0FBSyxJQUczQixRQUFTLFNBQVUsRUFBVSxHQUM1QixNQUFPLE1BQUssU0FBUyxRQUFRLEVBQVUsSUFHeEMsY0FBZSxTQUFVLEdBQ3hCLE1BQU8sTUFBSyxTQUFTLGNBQWMsSUFHcEMsa0JBQW1CLFNBQVUsRUFBVSxHQUN0QyxNQUFPLE1BQUssU0FBUyxrQkFBa0IsRUFBVSxJQUdsRCxhQUFjLFdBQ2IsTUFBTyxNQUFLLGtCQUFrQixhQUFhLE9BRzVDLFVBQVcsV0FDVixNQUFPLE1BQUssU0FBUyxhQUd0QixTQUFVLFNBQVUsR0FDbkIsTUFBTyxNQUFLLFNBQVMsU0FBUyxJQUcvQixPQUFRLFdBQ1AsTUFBTyxNQUFLLFNBQVMsVUFHdEIsT0FBUSxXQUNQLEtBQUssU0FBUyxVQUdmLFNBQVUsU0FBVSxHQUNuQixLQUFLLFNBQVMsU0FBUyxHQUN2QixFQUFnQixLQUFLLFVBQVUsU0FBUyxLQUFLLE1BQU8sT0FHckQsT0FBUSxTQUFVLEVBQVksR0FDN0IsS0FBSyxTQUFTLE9BQU8sRUFBWSxJQUdsQyxTQUFVLFdBQ1QsTUFBTyxNQUFLLFNBQVMsWUFJdkIsSUFBSSxJQUFnQixHQUVoQixHQUFVLFNBQVUsR0FDdkIsS0FBSyxZQUFjLEVBQVEsU0FBUyxFQUdyQyxJQUFRLFdBQ1AsS0FBTSxHQUNOLE9BQVEsR0FDUixTQUFVLEdBQ1YsU0FBVSxHQUNWLFNBQVUsV0FDVCxNQUFPLFlBQWMsS0FBSyxZQUFjLEtBSTFDLElBQUksSUFBZ0IsR0FFaEIsR0FBMEIsR0FrRTFCLEdBQTRCLEdBZTVCLEdBQTRCLEdBbUI1QixHQUE4QixHQWtCOUIsR0FBNEIsR0FpQjVCLEdBQThCLEdBYTlCLEdBQVcsU0FBVSxHQUN4QixLQUFLLEtBQUssR0FHWCxJQUFTLFdBQ1IsT0FBUSxHQUNSLE9BQVEsR0FDUixLQUFNLEdBQ04sUUFBUyxHQUNULGtCQUFtQixHQUNuQixjQUFlLEdBQ2YsYUFBYyxHQUNkLFVBQVcsR0FDWCxZQUFhLEdBQ2IsUUFBUyxHQUNULFNBQVUsR0FDVixLQUFNLEdBQ04sT0FBUSxHQUNSLGlCQUFrQixTQUFVLEdBQzNCLEdBQUksR0FBTyxLQUFLLG1CQUNaLEdBQUssUUFBUSxNQUFVLEdBQzFCLEVBQUssS0FBSyxJQUdaLE9BQVEsR0FDUixTQUFVLEdBQ1YsT0FBUSxHQUNSLG1CQUFvQixTQUFVLEdBQzdCLEdBQUksR0FBTyxLQUFLLG1CQUNoQixHQUFLLE9BQU8sRUFBSyxRQUFRLEdBQU0sSUFFaEMsU0FBVSxHQUdYLElBNG9CSSxJQUFTLEdBNW9CVCxHQUFzQixHQUV0QixHQUFrQixHQUNsQixJQUFrQixXQUFZLFdBQVksYUFBYyxhQUFjLFVBQ3RFLEdBQVksR0FBSSxJQUFXLFNBMEUzQixHQUFlLFNBQVUsRUFBTSxHQUlsQyxRQUFTLEdBQVEsRUFBUSxFQUFNLEdBRTFCLEdBQVcsRUFBUSxTQUFTLElBRWhDLEVBQU8sUUFBUSxTQUFVLEdBRXBCLEVBQUssT0FBUyxJQUFXLEVBQUssbUJBQXFCLEdBQ3RELEVBQUssS0FBSyxHQUlQLEVBQUssVUFDUixFQUFRLEVBQUssU0FBUyxNQUFPLEVBQU0sR0FJaEMsRUFBUSxFQUFLLFdBQ2hCLEVBQVEsRUFBSyxVQUFXLEVBQU0sR0FJdEIsRUFBUSxFQUFLLE9BQ3JCLEVBQVEsRUFBSyxNQUFPLEVBQU0sR0FJbEIsRUFBSyxPQUFTLElBQWEsRUFBSyxVQUN4QyxFQUFRLEVBQUssU0FBUyxTQUFTLE1BQU8sRUFBTSxFQUFLLFVBSTlDLEVBQUssT0FBUyxLQUNiLEVBQVEsRUFBSyxhQUNoQixFQUFRLEVBQUssV0FBWSxFQUFNLEdBRzVCLEVBQVEsRUFBSyx3QkFDaEIsRUFBUSxFQUFLLHNCQUF1QixFQUFNLE1BeEM5QyxHQUFJLEdBQ0EsSUF5REosT0FaQSxHQUFRLEtBQUssU0FBUyxNQUFPLEdBQzdCLEtBQUssU0FBUyxHQUFRLEVBRXRCLEVBQVUsR0FBZSxNQUFNLE1BQU0sR0FFckMsRUFBVyxRQUFRLFNBQVUsR0FDNUIsRUFBSyxNQUFRLE9BQ2IsRUFBSyxTQUFTLEtBR2YsR0FBZSxNQUVSLEdBUUosR0FBZ0IsR0FvQ2hCLEdBQVUsR0FBZ0IsV0FFMUIsR0FBd0IsR0F5Q3hCLEdBQVEsR0FBZ0IsU0FFeEIsR0FBaUIsR0FBZ0IsUUFFakMsR0FBUyxHQUFnQixVQUV6QixHQUFXLEdBUVgsR0FBNkIsR0FFN0IsR0FBMkMsR0FBSSxJQUFXLFlBMkIxRCxHQUFTLEdBdUJULEdBQVMsR0FNVCxHQUE2QixHQUM3QixHQUFlLEdBQUksSUFBVyxZQThCOUIsR0FBVSxHQUFnQixXQUUxQixHQUEyQixHQUMzQixHQUFhLEdBQUksSUFBVyxVQWU1QixHQUF3QixHQTJFeEIsSUFDSCxJQUFLLEdBQ0wsUUFBUyxHQUNULE9BQVEsR0FDUixLQUFNLEdBQ04sUUFBUyxHQUNULGtCQUFtQixHQUNuQixjQUFlLEdBQ2YsY0FBZSxHQUNmLFdBQVksR0FDWixLQUFNLEdBQ04sSUFBSyxHQUNMLE9BQVEsR0FDUixNQUFPLEdBQ1AsUUFBUyxHQUNULFlBQWEsR0FDYixJQUFLLEdBQ0wsR0FBSSxHQUNKLEtBQU0sR0FDTixJQUFLLEdBQ0wsS0FBTSxHQUNOLE9BQVEsR0FDUixNQUFPLEdBQ1AsYUFBYyxHQUNkLGNBQWUsR0FDZixRQUFTLEdBQ1QsSUFBSyxHQUNMLE1BQU8sR0FDUCxLQUFNLEdBQ04sT0FBUSxHQUNSLFNBQVUsR0FDVixTQUFVLEdBQ1YsT0FBUSxHQUNSLE9BQVEsR0FDUixPQUFRLEdBQ1IsU0FBVSxHQUNWLFFBQVMsR0FDVCxPQUFRLEdBQ1IsWUFBYSxJQUdWLEdBQWEsU0FBVSxFQUFRLEVBQWEsR0FFL0MsTUFBSSxJQUFTLEdBQVcsRUFBUSxHQUV4QixXQUVOLEdBRUksR0FGQSxFQUFZLFVBQVksTUFDeEIsRUFBUyxLQUFLLE1BV2xCLE9BUkEsTUFBSyxPQUFTLEVBRWQsRUFBUyxFQUFPLE1BQU0sS0FBTSxXQUV4QixJQUNILEtBQUssT0FBUyxHQUdSLEdBR0QsR0FRTCxHQUFpQixHQThFakIsR0FBVSxHQStEVixHQUFjLFNBQVUsR0FDM0IsR0FDSSxHQUNBLEVBRkEsSUFJSixPQUFLLEtBQVUsRUFBTyxFQUFLLFdBSTNCLEVBQUssUUFBVSxFQUFLLEtBQ3BCLEVBQUssUUFBVSxFQUFLLFFBQVEsSUFDNUIsRUFBSyxVQUdELEVBQVUsR0FBd0IsRUFBSyxNQUFNLG1CQUNoRCxFQUFLLE1BQVEsR0FBd0IsUUFBUSxJQUd2QyxHQVpDLEVBa0JULElBQVUsU0FBVSxHQUNuQixLQUFNLGVBQWdCLEtBQVUsTUFBTyxJQUFJLElBQVEsRUFDbkQsSUFBVyxLQUFNLElBSWxCLElBR0MsT0FBUyxVQUFVLEVBQU0sT0FBTyxHQUNoQyxnQkFBa0IsVUFBVSxFQUFNLE9BQU8sR0FHekMsUUFBVSxNQUFPLElBQ2pCLGFBQWUsTUFBTyxJQUN0QixPQUFTLE1BQU8sSUFHaEIsU0FBVyxNQUFPLElBR2xCLEtBQU8sTUFBTyxJQUNkLE9BQVMsTUFBTyxJQUdoQixTQUFXLE1BQU8sU0FHbEIsVUFBWSxVQUFVLEVBQU0sVUFDNUIsWUFBYyxVQUFVLEVBQU0sVUFDOUIsWUFBYyxVQUFVLEVBQU0sVUFDOUIsUUFBVSxVQUFVLEVBQU0sTUFBTyxJQUNqQyxRQUFVLFVBQVUsRUFBTSxVQUMxQixlQUFpQixVQUFVLEVBQU0sTUFBTyxJQUN4QyxVQUFZLFVBQVUsRUFBTSxVQUM1QixhQUFlLFVBQVUsRUFBTSxXQUloQyxHQUFpQixHQUFTLElBRTFCLEdBQVEsVUFBWSxFQUFxQixHQUFXLElBRXBELEdBQVEsVUFBVSxZQUFjLEdBR2hDLEdBQVEsU0FBVyxHQUFRLFNBUTNCLElBRmUsa0JBRUosTUFBSyxLQUZELGtCQUU0QixRQUFPLFVBQVUsTUFGN0Msa0JBRXlFLFFBQU8sTUFGaEYsa0JBRTRHLE9BQU0sVUFBVSxTQUY1SCxrQkFFMkosT0FBTSxVQUFVLFNBRjNLLGtCQUUwTSxPQUFNLFVBQVUsS0FGMU4sa0JBRXFQLE9BQU0sVUFBVSxRQUF5QyxtQkFBWCxTQUZuUyxrQkFFb1UsUUFBTyxpQkFDelYsS0FBTSxJQUFJLE9BQU0sdU5BR2pCLElBQUksSUFBVyxFQUVmLE9BQU8iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpXG5cbi8vIHNldCBqcXVlcnkgb24gd2luZG93LCB3ZSBoYXZlIHRvIGRvIHRoaXMuLi5cbndpbmRvdy4kID0gd2luZG93LmpRdWVyeSA9ICQ7XG5cbnJlcXVpcmUoXCIuL3VwbG9hZC5qc1wiKSgkKTtcblxuLyoqXG4gKiBzdWl0ZWggbmFtZXNwYWNlXG4gKlxuICovXG5cbnZhciBzdWl0ZWggPSB3aW5kb3cuc3VpdGVoID0ge307XG5cbi8qKlxuICogc2l0ZW1hcFxuICpcbiAqL1xuXG5zdWl0ZWguc2l0ZW1hcCA9IHJlcXVpcmUoXCIuL3NpdGVtYXAuanNcIikuaW5pdDtcblxuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlckJ5TmFtZShuYW1lKSB7XG4gICAgdmFyIG1hdGNoID0gUmVnRXhwKCdbPyZdJyArIG5hbWUgKyAnPShbXiZdKiknKS5leGVjKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgIHJldHVybiBtYXRjaCAmJiBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xufVxuXG4kKGZ1bmN0aW9uKCkge1xuXG4gICQoJ2FbZGF0YS1tZXRob2Q9XCJkZWxldGVcIl0nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGEgICAgICAgICAgPSAkKGV2dC5jdXJyZW50VGFyZ2V0KTtcbiAgICB2YXIgaHJlZiAgICAgICA9IGEuYXR0cihcImhyZWZcIik7XG4gICAgdmFyIGNvbmZpcm1Nc2cgPSBhLmRhdGEoXCJjb25maXJtXCIpO1xuXG4gICAgaWYgKCEhY29uZmlybU1zZykge1xuICAgICAgaWYgKCFjb25maXJtKGNvbmZpcm1Nc2cpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZm9ybSA9ICQoJzxmb3JtIGlkPVwiZGVsZXRlLW1ldGhvZC1mb3JtXCIgLz4nKTtcbiAgICBmb3JtLmF0dHIoXCJhY3Rpb25cIiwgaHJlZik7XG4gICAgZm9ybS5hdHRyKFwibWV0aG9kXCIsIFwiUE9TVFwiKTtcbiAgICBmb3JtLmFwcGVuZCgkKCc8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJfbWV0aG9kXCIgdmFsdWU9XCJERUxFVEVcIiAvPicpKTtcblxuICAgICQoXCJib2R5XCIpLmFwcGVuZChmb3JtKTtcblxuICAgIGZvcm0uc3VibWl0KCk7XG4gICAgZm9ybS5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgJCgnYVtkYXRhLXVzZS1yZWRpcmVjdC1xdWVyeV0nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIHVybCA9IGdldFF1ZXJ5UGFyYW1ldGVyQnlOYW1lKFwicmVkaXJlY3RcIik7XG4gICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiBzaXRlIHNldHRpbmdzIGhhbmRsZXJzXG4gICAqXG4gICAqL1xuXG4gIC8vIGJpbmRzIGZvcm0gc3VibWl0cyB0byBjYWxsIHRoZSBzaXRlIHNldHRpbmdzIFBBVENIIGVuZHBvaW50IHdpdGggdGhlIFxuICAvLyByZXNwZWN0aXZlIGZvcm0gZGF0YS5cbiAgJCgnZm9ybVtkYXRhLXNpdGUtc2V0dGluZ3NdJykuc3VibWl0KGZ1bmN0aW9uKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGZvcm0gPSAkKHRoaXMpO1xuICAgIHZhciBmaWVsZHMgPSBmb3JtLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICAkLmVhY2goZmllbGRzLCBmdW5jdGlvbihpLCBvYmopIHtcbiAgICAgIGRhdGFbb2JqLm5hbWVdID0gb2JqLnZhbHVlO1xuICAgIH0pO1xuXG4gICAgdmFyIHhociA9ICQuYWpheChmb3JtLmF0dHIoXCJhY3Rpb25cIiksIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgeGhyLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vIFRPRE8gaGFuZGxlXG4gICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIGdldFNldHRpbmdzIGlzIGEgd3JhcHBlciBhcm91bmQgJC5hamF4IHRvIGdldCBkYXRhIGZvciBhIGdpdmUgc2V0dGluZ3MgdGFiXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLy8gdXJsIHRvIHRoZSBKU09OIGVuZHBvaW50IGFwcGVuZGVkIHdpdGggdGhlIHNldHRpbmcgbmFtZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgdmFyIGdldFNldHRpbmdzID0gZnVuY3Rpb24odXJsKSB7XG4gICAgcmV0dXJuICQuYWpheCh1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgIHhockZpZWxkczoge1xuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogZGF0YVRvRm9ybSB0YWtlcyBhIGNvbmYgYW5kIGl0ZXJhdGVzIHRocm91Z2ggaXQncyBkYXRhLCBzZXR0aW5nIGZvcm0gZmllbGRzXG4gICAqIHdpdGggdGhlaXIgcmVzcGVjdGl2ZSB2YWx1ZXNcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmYgLy8gbXVzdCBjdW50YWluIGBkYXRhYCAgYXR0cmlidXRlXG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgZGF0YVRvRm9ybSA9IGZ1bmN0aW9uKGNvbmYpIHtcbiAgICB2YXIgZGF0YSA9IChjb25mIHx8IHt9KS5kYXRhO1xuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGogPSBrZXlzLmxlbmd0aDtcbiAgICBmb3IgKDsgaSA8IGo7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgICB2YXIgaW5wdXQgPSAkKCdbbmFtZT1cIicgKyBrZXkgKyAnXCJdJyk7XG4gICAgICB2YXIgaW5wdXRfdHlwZSA9IGlucHV0LmF0dHIoXCJ0eXBlXCIpO1xuICAgICAgaWYgKGlucHV0X3R5cGUgPT09IFwicmFkaW9cIikge1xuICAgICAgICBpbnB1dC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByYWRpbyA9ICQodGhpcyk7XG4gICAgICAgICAgcmFkaW8ucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xuICAgICAgICAgIGlmIChyYWRpb192YWx1ZShyYWRpby52YWwoKSkgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJhZGlvLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC52YWwodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogcmFkaW9fdmFsdWUgY2hlY2tzIGEgcmFkaW8gdmFsdWUgZm9yIGJvb2xlYW4gdmFsdWVzIHJlcHJlc2VudGVkIGluIHN0cmluZ1xuICAgKiBmb3JtIGFuZCByZXR1cm5zIHRoZSB0cnVlIGJvb2xlYW4gdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiByYWRpb192YWx1ZSh2YWwpIHtcbiAgICBpZiAodmFsID09PSBcImZhbHNlXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHZhbCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICAvLyBvbiB0YWIgKnNob3duKiBpdCBtYWtlcyBhIGNhbGwgdG8gcmV0cmlldmUgdGhhdCB0YWIncyBzZXR0aW5nIGRhdGFcbiAgJCgnYVtkYXRhLXRvZ2dsZT1cInRhYlwiXVtkYXRhLXNpdGUtc2V0dGluZ3NdJykub24oXCJzaG93bi5icy50YWJcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgdmFyIGZvcm0gPSAkKFwiZm9ybVwiLCAkKGV2dC50YXJnZXQpLmF0dHIoXCJocmVmXCIpKTtcbiAgICB2YXIgdXJsID0gZm9ybS5hdHRyKFwiYWN0aW9uXCIpO1xuICAgIGlmICghISF1cmwpIHtcbiAgICAgIHJldHVybjsgLy8gbm8gdXJsLCBsZXRzIG5vdCBldmVuIGF0dGVtcHQgdG8gY2FsbCBUT0RPIGhhbmRsZSBibGFuayB1cmxcbiAgICB9XG5cbiAgICBnZXRTZXR0aW5ncyh1cmwpLnRoZW4oZGF0YVRvRm9ybSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gZ3JhYiB0aGUgYWN0aXZlIHRhYidzIGRhdGEuIGNsb3N1cmUgZm9yIGlzb2xhdGlvblxuICAoZnVuY3Rpb24oYWN0aXZlU2V0dGluZykge1xuICAgIGlmIChhY3RpdmVTZXR0aW5nLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm47IC8vIG5vIGFjdGl2ZSBzZXR0aW5nIHRhYiwgc3RvcFxuICAgIH1cblxuICAgIHZhciB1cmwgPSBhY3RpdmVTZXR0aW5nLmF0dHIoXCJhY3Rpb25cIik7XG5cbiAgICBnZXRTZXR0aW5ncyh1cmwpLnRoZW4oZGF0YVRvRm9ybSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9KTtcbiAgfSkoJCgnLnRhYi1wYW5lLmFjdGl2ZSBmb3JtW2RhdGEtc2l0ZS1zZXR0aW5nc10nKSk7XG5cbiAgcmVxdWlyZShcIi4vc2l0ZW1hcC1iZWhhdmlvci5qc1wiKTtcbn0pO1xuIiwiJCgnI3BhZ2Utdmlldy1zZWxlY3RvcicpLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24gKCkge1xuICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndHJlZS12aWV3JykpIHtcbiAgICAkKCcjcGFnZS10cmVlLXZpZXcnKS5oaWRlKCk7XG4gICAgJCgnI3BhZ2UtbGlzdC12aWV3Jykuc2hvdygpO1xuICAgICQoJyNwYWdlLXZpZXctc2VsZWN0b3InKS5odG1sKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwibGlzdC12aWV3XCI+Q2xpY2sgZm9yIFRyZWUgVmlldzwvYT4nKTtcbiAgfVxuICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnbGlzdC12aWV3JykpIHtcbiAgICAkKCcjcGFnZS1saXN0LXZpZXcnKS5oaWRlKCk7XG4gICAgJCgnI3BhZ2UtdHJlZS12aWV3Jykuc2hvdygpO1xuICAgICQoJyNwYWdlLXZpZXctc2VsZWN0b3InKS5odG1sKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwidHJlZS12aWV3XCI+Q2xpY2sgZm9yIExpc3QgVmlldzwvYT4nKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59KTtcbiIsInZhciAkICAgICAgICA9IHJlcXVpcmUoJ2pxdWVyeScpO1xudmFyIGV4dGVuZCAgID0gcmVxdWlyZShcImV4dGVuZFwiKTtcbnZhciB1cmwgICAgICA9IHJlcXVpcmUoXCIuL3VybC5qc1wiKTtcbnZhciBUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL3RlbXBsYXRlLmpzXCIpO1xudmFyIFJhY3RpdmUgID0gcmVxdWlyZSgncmFjdGl2ZScpO1xudmFyIHBhdGggICAgID0gcmVxdWlyZShcInBhdGhcIilcbiAgLCBiYXNlbmFtZSA9IHBhdGguYmFzZW5hbWVcbiAgLCBkaXJuYW1lICA9IHBhdGguZGlybmFtZVxuICAsIHBhdGhqb2luID0gcGF0aC5qb2luO1xuXG4vLyBqcXVlcnkgbmVlZHMgYSB3aW5kb3cuXG53aW5kb3cuJCA9IHdpbmRvdy5qUXVlcnkgPSAkO1xuXG5yZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9tb2RhbC5qc1wiKTtcbnJlcXVpcmUoXCJqc3RyZWVcIik7XG5cbmNvbnNvbGUubG9nKCdzaXRlbWFwLmpzIHdvcmtzJyk7XG5cbi8qKlxuICogZXhwb3NlXG4gKi9cblxuZXhwb3J0cy5pbml0ID0gaW5pdDtcblxuXG4vKipcbiAqIGluaXRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2l0ZV9pZFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gaW5pdChzaXRlX2lkKSB7XG4gIHZhciBkID0gJC5EZWZlcnJlZCgpO1xuXG4gIGdldFJvdXRlcyhzaXRlX2lkKS5cbiAgICB0aGVuKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgeGhyKSB7XG4gICAgICBqc3RyZWUoaW5zZXJ0TmV3UGFnZU5vZGVzKGRhdGEuZGF0YSkpO1xuXG4gICAgICBkLnJlc29sdmUoKTtcbiAgICB9KS5cbiAgICBmYWlsKGQucmVqZWN0KTtcblxuICByZXR1cm4gZC5wcm9taXNlKCk7XG59XG5cbi8qKlxuICogX2pzdHJlZSByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGpzdHJlZSB0byBjYWxsIGZ1bmN0aW9ucyBvbiB0aGUgdHJlZVxuICpcbiAqIEByZXR1cm4ge2pzdHJlZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIF9qc3RyZWUoKSB7XG4gIHJldHVybiAkKFwiW2RhdGEtcm91dGUtbWFwLXRyZWVdXCIpLmpzdHJlZSh0cnVlKTtcbn1cblxuLyoqXG4gKiBhZGROb2RlIGFkZHMgYSBuZXcgbm9kZSBhdCB0aGUgcGFyZW50IHBhdGhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZmlsZUluZm9cbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRQYXRoXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzX2RpclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbi8vIHZhciBpbmRleE5vZGUgPSAkKFwiW2RhdGEtcm91dGUtbWFwLXRyZWVdXCIpLmpzdHJlZShcInNlbGVjdF9ub2RlXCIsIFwiIy9pbmRleC5odG1sXCIpO1xuLy8gY29uc29sZS5sb2coaW5kZXhOb2RlKTtcbi8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGluZGV4Tm9kZSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG5mdW5jdGlvbiBhZGROb2RlKGZpbGVJbmZvLCBwYXJlbnRQYXRoLCBpc19kaXIsIGNhbGxiYWNrKSB7XG4gIHZhciBwYXJlbnQgPSBfanN0cmVlKCkuZ2V0X25vZGUocGFyZW50UGF0aCk7XG4gIHZhciBwb3MgPSBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcblxuICBpZiAoISFpc19kaXIpIHtcbiAgICB2YXIgZGlyID0gZGlybmFtZShmaWxlSW5mby5wYXRoKTtcblxuICAgIC8vIGNoZWNrIGlmIHRoZSBkaXIgYWxyZWFkeSBleGlzdHNcbiAgICB2YXIgbm9kZSA9IF9qc3RyZWUoKS5nZXRfbm9kZShkaXIpO1xuICAgIGlmICghISFub2RlKSB7XG4gICAgICBub2RlID0ge1xuICAgICAgICBpZDogZGlyLFxuICAgICAgICBwYXJlbnQ6IHBhcmVudC5pZCxcbiAgICAgICAgdGV4dDogcGF0aGpvaW4oXCIvXCIsIGJhc2VuYW1lKGRpcikpLFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgIG9wZW5lZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgX2pzdHJlZSgpLmNyZWF0ZV9ub2RlKHBhcmVudC5pZCwgbm9kZSwgcG9zKTtcblxuICAgICAgLy8gd2hlbiBpc19kaXIgbXVzdCBjcmVhdGUgbmV3IHBhZ2Ugbm9kZVxuICAgICAgX2pzdHJlZSgpLmNyZWF0ZV9ub2RlKG5vZGUuaWQsIGV4dGVuZCh7fSwgbmV3UGFnZU5vZGUsIHtcbiAgICAgICAgaWQ6IG5vZGUuaWQrXCIvKy1uZXctcGFnZVwiLFxuICAgICAgICBwYXJlbnQ6IG5vZGUuaWRcbiAgICAgIH0pLCAwKTtcbiAgICB9XG5cblxuICAgIC8vIHNldCBwYXJlbnQgYW5kIGdldCBuZXcgcG9zaXRpb25cbiAgICBwYXJlbnQgPSBub2RlO1xuICAgIHBvcyA9ICghIXBhcmVudC5jaGlsZHJlbikgPyAocGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDEpIDogMDtcbiAgfVxuXG4gIC8vIGFkZCB0aGUgY2hpbGQgbm9kZVxuICB2YXIgbm9kZSA9IHtcbiAgICBpZDogZmlsZUluZm8ucGF0aCxcbiAgICBwYXJlbnQ6IHBhcmVudC5pZCxcbiAgICB0ZXh0OiBwYXRoam9pbihcIi9cIiwgYmFzZW5hbWUoZmlsZUluZm8ucGF0aCkpXG4gIH07XG4gIF9qc3RyZWUoKS5jcmVhdGVfbm9kZShwYXJlbnQuaWQsIG5vZGUsIHBvcywgY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHBhdGgsIGNhbGxiYWNrKSB7XG4gIHZhciBub2RlID0gX2pzdHJlZSgpLmdldF9ub2RlKHBhdGgpO1xuXG4gIF9qc3RyZWUoKS5kZWxldGVfbm9kZShub2RlKTtcblxuICB2YXIgcGFyZW50ID0gX2pzdHJlZSgpLmdldF9ub2RlKG5vZGUucGFyZW50KTtcbiAgaWYgKCEhcGFyZW50ICYmIHBhcmVudC5jaGlsZHJlbi5sZW5ndGggPT0gMSkge1xuICAgIC8vIGlmIHRoZSBwYXJlbnQgb25seSBoYXMgb25lIGNoaWxkLCB0aGUgXCJuZXctcGFnZVwiIGl0ZW0sIHJlbW92ZSBpdCBhcyB3ZWxsXG4gICAgX2pzdHJlZSgpLmRlbGV0ZV9ub2RlKHBhcmVudCk7XG4gIH1cblxuICBjYWxsYmFjaygpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVOb2RlKGRhdGEsIGNhbGxiYWNrKSB7XG4gIHZhciBwYXRoID0gZGF0YS5wYXRoO1xuICB2YXIgbmV3X3BhdGggPSBkYXRhLm5ld19wYXRoO1xuXG4gIHZhciBub2RlID0gX2pzdHJlZSgpLmdldF9ub2RlKHBhdGgpO1xuXG4gIF9qc3RyZWUoKS5yZW5hbWVfbm9kZShub2RlLCBwYXRoam9pbihcIi9cIiwgYmFzZW5hbWUobmV3X3BhdGgpKSk7XG4gIF9qc3RyZWUoKS5zZXRfaWQobm9kZSwgbmV3X3BhdGgpO1xuXG4gIGNhbGxiYWNrKCk7XG59XG5cbi8qKlxuICoganN0cmVlIGJvb3RzdHJhcHMganN0cmVlIHdpdGggdGhlIGdpdmVuIGRhdGEgc2V0IGFuZCBiaW5kcyBhbnkgYWRkaXRpb25hbFxuICogaG9va3MvZXZlbnRzIHJlcXVpcmVkIHRvIGludGVyYWN0IHdpdGgganN0cmVlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGRhdGEgKGpzdHJlZSBmb3JtYXR0ZWQgZGF0YSlcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGpzdHJlZShkYXRhKSB7XG4gIHZhciBtb2RhbCA9ICQoXCIjbmV3LXBhZ2UtbW9kYWxcIik7XG5cbiAgdmFyIHJlc2V0RGlySW5wdXRzID0gZnVuY3Rpb24oKSB7XG4gICAgJChcIi5wYWdlLWRpclwiKS5oaWRlKCk7XG4gICAgJChcIi5wYWdlLW5hbWVcIikucmVtb3ZlQ2xhc3MoXCJjb2wtc20tNlwiKTtcbiAgICAkKFwiLnBhZ2UtbmFtZVwiKS5hZGRDbGFzcyhcImNvbC1zbS0xMlwiKTtcblxuICAgICQoJ1tuYW1lPVwicGFnZS5kaXJcIl0nKS52YWwoXCJcIik7XG4gIH07XG5cbiAgbW9kYWwuYmluZChcImhpZGUuYnMubW9kYWxcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgLy8gcmVzZXQgb24gY2xvc2VcbiAgICAkKCdbbmFtZT1cInBhZ2UubmFtZVwiXScpLnZhbChcIlwiKTtcbiAgICAkKCdbbmFtZT1cInBhZ2UuaXNfZGlyXCJdJykucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpLmNoYW5nZSgpO1xuICB9KTtcblxuXG4gICQoJ1tuYW1lPVwicGFnZS5pc19kaXJcIl06Y2hlY2tib3gnKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbihldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciB0YXJnID0gJChldnQuY3VycmVudFRhcmdldCk7XG4gICAgdmFyIGNoZWNrZWQgPSAkKHRhcmcpLmlzKFwiOmNoZWNrZWRcIik7XG5cbiAgICBpZiAoISFjaGVja2VkKSB7XG4gICAgICAkKFwiLnBhZ2UtZGlyXCIpLnNob3coKTtcbiAgICAgICQoXCIucGFnZS1uYW1lXCIpLnJlbW92ZUNsYXNzKFwiY29sLXNtLTEyXCIpO1xuICAgICAgJChcIi5wYWdlLW5hbWVcIikuYWRkQ2xhc3MoXCJjb2wtc20tNlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXREaXJJbnB1dHMoKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJ1tyZWw9XCJjcmVhdGUtbmV3LXBhZ2VcIl0nLCBtb2RhbCkub24oXCJjbGlja1wiLCBmdW5jdGlvbihldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBwYXJlbnQgPSBtb2RhbC5kYXRhKFwibm9kZS1wYXJlbnRcIik7XG5cbiAgICB2YXIgcGF0aCA9ICQoJ1tuYW1lPVwicGFnZS5uYW1lXCJdJykudmFsKCk7XG4gICAgaWYgKCEhIXBhdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEvXlthLXowLTlfXFwtXStcXC5odG1sJC9pLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gVE9ETyBkaXNwbGF5IGVycm9yIGZvciB0aGVzZSBjaGVja3NcblxuICAgIHZhciBpc19kaXIgPSAkKCdbbmFtZT1cInBhZ2UuaXNfZGlyXCJdOmNoZWNrYm94JykuaXMoXCI6Y2hlY2tlZFwiKTtcbiAgICBpZiAoaXNfZGlyKSB7XG4gICAgICB2YXIgZGlyID0gJCgnW25hbWU9XCJwYWdlLmRpclwiXScpLnZhbCgpO1xuICAgICAgaWYgKCEvXlthLXowLTlfXFwtXStcXC8kL2kudGVzdChkaXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcGF0aCA9IHBhdGhqb2luKFwiL1wiLCBkaXIsIHBhdGgpO1xuICAgIH1cblxuICAgIHBhdGggPSBwYXRoam9pbihcIi9cIiwgKChwYXJlbnQgPT09IFwiI1wiKSA/IFwiXCIgOiBwYXJlbnQpLCAgcGF0aCk7XG5cbiAgICAvLyBUT0RPIGFsbG93IHNlbGV0aW9uIG9mIHRlbXBsYXRlcywgd2hpY2ggd2lsbCBkZWZpbmUgZmlsZXBhdGggYW5kIGtpbmRcbiAgICBwb3N0Um91dGUoc2l0ZUlkLCB7XG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgZmlsZXBhdGg6IFwiLy5wYWdlLmh0bWxcIlxuICAgIH0pLlxuICAgICAgdGhlbihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIHhocikge1xuICAgICAgICAvLyBGSVhNRSB0aGlzIGlzX2RpciBzcGFubmluZyB0aHJvdWdoIHRoZSBzY29wZSBoZXJlIGlzIGEgdWdseVxuICAgICAgICBhZGROb2RlKGRhdGEsIHBhcmVudCwgaXNfZGlyLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2RhbC5tb2RhbChcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSkuXG4gICAgICBmYWlsKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWxsb3dzIGpzdHJlZSB0aW1lIHRvIHVwZGF0ZSwgdGhlbiBjbGlja3Mgb24gbGFzdCBub2RlIHRvIHJlaW5pdGlhdGUgY29udGV4dCBtZW51XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIi5qc3RyZWUtY29udGFpbmVyLXVsID4gbGkuanN0cmVlLWxhc3QgPiBhXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcbiAgICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gICQoJ1tyZWw9XCJkZWxldGUtcGFnZS1vci1kaXJcIl0nLCBtb2RhbCkub24oXCJjbGlja1wiLCBmdW5jdGlvbihldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBlbCA9ICQoZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhciBwYXRoID0gZWwuZGF0YShcInBhdGhcIik7XG5cbiAgICBjb25zb2xlLmxvZyhcImRlbGV0ZS1wYWdlLW9yLWRpclwiLCBlbC5kYXRhKFwicGF0aFwiKSk7XG5cbiAgICBkZWxldGVSb3V0ZShzaXRlSWQsIHBhdGgpLlxuICAgICAgdGhlbihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIHhocikge1xuICAgICAgICBpZiAoISEhZGF0YS5wYXRoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIHdoZW4gbm8gcGF0aFwiKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZU5vZGUoZGF0YS5wYXRoLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2RhbC5tb2RhbChcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSkuXG4gICAgICBmYWlsKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWxsb3dzIGpzdHJlZSB0aW1lIHRvIHVwZGF0ZSwgdGhlbiBjbGlja3Mgb24gbGFzdCBub2RlIHRvIHJlaW5pdGlhdGUgY29udGV4dCBtZW51XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIi5qc3RyZWUtY29udGFpbmVyLXVsID4gbGkuanN0cmVlLWxhc3QgPiBhXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcbiAgICAgIH0sIDEwMCk7XG5cbiAgfSk7XG5cbiAgdmFyIHJhY3RpdmU7XG4gIHZhciBjb25mX2RhdGE7IC8vIEZJWE1FIHRoaXMgc2hvdWxkIG5vdCBiZSBoZXJlLCBidXQgYmVjYXVzZSBkdWUgdG8gdGhlIGFqYXggYWxsIHRvIGdldCB0aGlzLCBpdCdzLi4uXG5cbiAgJCgnW3JlbD1cInVwZGF0ZS1wYWdlLXNldHRpbmdcIl0nLCBtb2RhbCkub24oXCJjbGlja1wiLCBmdW5jdGlvbihldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBlbCA9ICQoZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhciBwYXRoID0gZWwuZGF0YShcInBhdGhcIik7XG5cbiAgICB2YXIgcGFyZW50ID0gbW9kYWwuZGF0YShcIm5vZGUtcGFyZW50XCIpO1xuICAgIHZhciBuZXdfcGF0aCA9ICQoJ1tuYW1lPVwicGFnZS5uYW1lXCJdJykudmFsKCk7XG4gICAgaWYgKCEhIW5ld19wYXRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghL15bYS16MC05X1xcLV0rXFwuaHRtbCQvaS50ZXN0KG5ld19wYXRoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBuZXdfcGF0aCA9IHBhdGhqb2luKFwiL1wiLCAoKHBhcmVudCA9PT0gXCIjXCIpID8gXCJcIiA6IHBhcmVudCksICBuZXdfcGF0aCk7XG5cbiAgICBjb25zb2xlLmxvZyhcInVwZGF0ZS1wYWdlLXNldHRpbmdcIiwgcGF0aCwgbmV3X3BhdGgpO1xuXG4gICAgdmFyIGRhdGEgPSBleHRlbmQoe30sIGNvbmZfZGF0YSwge2RhdGE6IHJhY3RpdmUuZ2V0KCl9KTtcbiAgICBkYXRhW1wicGF0aFwiXSA9IG5ld19wYXRoO1xuXG4gICAgdXBkYXRlUm91dGUoc2l0ZUlkLCBwYXRoLCBkYXRhKS5cbiAgICAgIHRoZW4oZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCB4aHIpIHtcbiAgICAgICAgdXBkYXRlTm9kZShkYXRhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtb2RhbC5tb2RhbChcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSkuXG4gICAgICBmYWlsKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGVycik7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgJChcIltkYXRhLXJvdXRlLW1hcC10cmVlXVwiKS5cbiAgICBvbihcImNoYW5nZWQuanN0cmVlXCIsIGZ1bmN0aW9uKGV2dCwgZGF0YSkge1xuXG4gICAgICB2YXIgc2VsZWN0ZWQgPSBkYXRhLnNlbGVjdGVkWzBdO1xuICAgICAgdmFyIHBhcmVudCA9IGRhdGEubm9kZS5wYXJlbnQ7XG4gICAgICB2YXIgZGlyID0gKHBhcmVudCA9PT0gXCIjXCIpID8gXCJcIiA6IHBhcmVudDtcblxuICAgICAgJCgnW2Zvcj1cInBhZ2UubmFtZVwiXScsIG1vZGFsKS5odG1sKGRpcitcIi9cIik7XG4gICAgICBtb2RhbC5kYXRhKFwibm9kZS1wYXJlbnRcIiwgcGFyZW50KTtcblxuICAgICAgLy8gVE9ETyBiZWxvdyB0byBzZXQgc3RhdGUgaXMgYSBiaXQgZWguLi5cblxuICAgICAgJChcIi5wYWdlLXNldHRpbmdzXCIpLmh0bWwoXCJcIik7XG5cbiAgICAgIGlmICgvXFwrLW5ldy1wYWdlJC8udGVzdChzZWxlY3RlZCkpIHtcbiAgICAgICAgJChcIi5tb2RhbC10aXRsZVwiLCBtb2RhbCkuaHRtbChcIk5ldyBQYWdlXCIpO1xuICAgICAgICAkKCdbcmVsPVwiY3JlYXRlLW5ldy1wYWdlXCJdJywgbW9kYWwpLnNob3coKTtcbiAgICAgICAgJCgnW3JlbD1cImRlbGV0ZS1wYWdlLW9yLWRpclwiXScsIG1vZGFsKS5oaWRlKCk7XG4gICAgICAgICQoJ1tyZWw9XCJ1cGRhdGUtcGFnZS1zZXR0aW5nXCJdJywgbW9kYWwpLmhpZGUoKTtcbiAgICAgICAgJCgnW3JlbD1cImVkaXQtcGFnZVwiXScsIG1vZGFsKS5oaWRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCdbbmFtZT1cInBhZ2UubmFtZVwiXScpLnZhbChkYXRhLm5vZGUudGV4dC5zdWJzdHJpbmcoMSwgZGF0YS5ub2RlLnRleHQubGVuZ3RoKSk7XG4gICAgICAgICQoXCIubW9kYWwtdGl0bGVcIiwgbW9kYWwpLmh0bWwoXCJQYWdlOiBcIitzZWxlY3RlZCk7XG4gICAgICAgICQoJ1tyZWw9XCJjcmVhdGUtbmV3LXBhZ2VcIl0nLCBtb2RhbCkuaGlkZSgpO1xuICAgICAgICAkKCdbcmVsPVwiZGVsZXRlLXBhZ2Utb3ItZGlyXCJdJywgbW9kYWwpLmRhdGEoXCJwYXRoXCIsIHNlbGVjdGVkKS5zaG93KCk7XG4gICAgICAgICQoJ1tyZWw9XCJ1cGRhdGUtcGFnZS1zZXR0aW5nXCJdJywgbW9kYWwpLmRhdGEoXCJwYXRoXCIsIHNlbGVjdGVkKS5zaG93KCk7XG4gICAgICAgICQoJ1tyZWw9XCJlZGl0LXBhZ2VcIl0nLCBtb2RhbCkuYXR0cihcImhyZWZcIiwgdXJsKFwiZWRpdFwiLCBob3N0LCBkYXRhLnNlbGVjdGVkKSkuc2hvdygpO1xuXG4gICAgICAgIGlmIChpc0RpcihzZWxlY3RlZCkpIHtcbiAgICAgICAgICAkKFwiLm1vZGFsLXRpdGxlXCIsIG1vZGFsKS5odG1sKFwiRGlyZWN0b3J5OiBcIitzZWxlY3RlZCk7XG4gICAgICAgICAgJCgnW3JlbD1cImVkaXQtcGFnZVwiXScpLmhpZGUoKTtcbiAgICAgICAgICAkKCdbcmVsPVwidXBkYXRlLXBhZ2Utc2V0dGluZ1wiXScpLmhpZGUoKTtcbiAgICAgICAgICAkKCcubW9kYWwtYm9keScpLmhpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcubW9kYWwtYm9keScpLnNob3coKTtcbiAgICAgICAgICAkKFwiLnBhZ2Utc2V0dGluZ3NcIikuaHRtbChcIkxvYWRpbmcgcGFnZSBzZXR0aW5ncy4uLlwiKTtcblxuICAgICAgICAgIGdldENvbmYoc2VsZWN0ZWQpLlxuICAgICAgICAgICAgdGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgIGNvbmZfZGF0YSA9IGRhdGE7XG5cbiAgICAgICAgICAgICAgZ2V0RmllbGRzKGNvbmZfZGF0YSkudGhlbihmdW5jdGlvbihmb3JtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1GaWVsZHMgPSAoZm9ybS5maWVsZHNbXCJwYWdlXCJdIHx8IFtdKS5qb2luKCcnKSArXG4gICAgICAgICAgICAgICAgICAoZm9ybS5maWVsZHNbXCJtZXRhXCJdIHx8IFtdKS5qb2luKCcnKTtcblxuICAgICAgICAgICAgICAgIHJhY3RpdmUgPSBuZXcgUmFjdGl2ZSh7XG4gICAgICAgICAgICAgICAgICBlbDogXCIucGFnZS1zZXR0aW5nc1wiLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGZvcm1GaWVsZHMsXG4gICAgICAgICAgICAgICAgICBkYXRhOiBjb25mX2RhdGEuZGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG1vZGFsLm1vZGFsKFwic2hvd1wiKTtcbiAgICB9KS5cbiAgICBqc3RyZWUoe1xuICAgICAgY29yZToge1xuICAgICAgICBjaGVja19jYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgbXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgfSxcbiAgICAgIHNvcnQ6IGZ1bmN0aW9uKGEsYikge1xuICAgICAgICBjb25zb2xlLmxvZygnc29ydCBmdW5jdGlvbicpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRfdHlwZShhKSA9PT0gdGhpcy5nZXRfdHlwZShiKSA/ICh0aGlzLmdldF90ZXh0KGIpID4gdGhpcy5nZXRfdGV4dChhKSA/IDEgOiAtMSkgOiAodGhpcy5nZXRfdHlwZShiKSA+PSB0aGlzLmdldF90eXBlKGEpID8gMSA6IC0xKTtcbiAgICAgIH0sXG4gICAgICBcImNvbnRleHRtZW51XCI6e1xuICAgICAgICBcIml0ZW1zXCI6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgdHJlZSA9ICQoXCIjdHJlZVwiKS5qc3RyZWUodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiRWRpdFwiOiB7XG4gICAgICAgICAgICAgIFwic2VwYXJhdG9yX2JlZm9yZVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgXCJzZXBhcmF0b3JfYWZ0ZXJcIjogZmFsc2UsXG4gICAgICAgICAgICAgIFwibGFiZWxcIjogXCJcIixcbiAgICAgICAgICAgICAgXCJhY3Rpb25cIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIE9wZW5zIHBhZ2UgZWRpdG9yIGluIG5ldyB0YWJcbiAgICAgICAgICAgICAgICB2YXIgZWRpdFVybCA9IHVybChcImVkaXRcIiwgaG9zdCwgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXG4gICAgICAgICAgICAgICAgICBlZGl0VXJsLFxuICAgICAgICAgICAgICAgICAgJ19ibGFuaydcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJEZWxldGVcIjoge1xuICAgICAgICAgICAgICBcInNlcGFyYXRvcl9iZWZvcmVcIjogZmFsc2UsXG4gICAgICAgICAgICAgIFwic2VwYXJhdG9yX2FmdGVyXCI6IGZhbHNlLFxuICAgICAgICAgICAgICBcImxhYmVsXCI6IFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbm9jbG9zZTogKGZ1bmN0aW9uICgkLCB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gQ3VzdG9tIHBsdWdpbiB0aGF0IGRpc2FibGVzIHRoZSBjb2xsYXBzZSBmdW5jdGlvbmFsaXR5IG9uIGZvbGRlciB1bHNcbiAgICAgICAgLy8gRklYTUUgc2l0ZW1hcC5qczozOTNVbmNhdWdodCBUeXBlRXJyb3I6IENhbm5vdCByZWFkIHByb3BlcnR5ICdwbHVnaW5zJyBvZiB1bmRlZmluZWRcbiAgICAgICAgLy8gXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIC8vICQuanN0cmVlLnBsdWdpbnMubm9jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gICB0aGlzLmNsb3NlX25vZGUgPSAkLm5vb3A7XG4gICAgICAgIC8vIH07XG4gICAgICB9KShqUXVlcnkpLFxuICAgICAgICBwbHVnaW5zOiBbJ3NvcnQnLCAndHlwZXMnLCdjb250ZXh0bWVudScsICdub2Nsb3NlJ11cbiAgICAgIH1cbiAgICApXG4gICAgLm9uKCdsb2FkZWQuanN0cmVlIGNoYW5nZWQuanN0cmVlJywgZnVuY3Rpb24oKSB7XG5cblxuICAgICAgJChcIi5qc3RyZWUtY29udGFpbmVyLXVsIGFcIikuaG92ZXIoXG4gICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8gUHJldmVudHMgY29udGV4dCBtZW51IGZyb20gYXBwZWFyaW5nIG9uICdOZXcgUGFnZScgbm9kZXNcbiAgICAgICAgICBpZiAoISQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ2pzdHJlZS1sYXN0JykpIHtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2pzdHJlZS1jbGlja2VkJyk7XG4gICAgICAgICAgICAvLyBQcm9wZXJseSBhbGlnbnMgdG9vbHRpcCB0byB0aGUgcmlnaHQgb2YgdGhlIGdpdmVuIG5vZGVcbiAgICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKTtcbiAgICAgICAgICAgICQoXCJbZGF0YS1yb3V0ZS1tYXAtdHJlZV1cIikuanN0cmVlKFwic2hvd19jb250ZXh0bWVudVwiLCAkKHRoaXMpKTtcbiAgICAgICAgICAgICQoJ3VsLnZha2F0YS1jb250ZXh0JylcbiAgICAgICAgICAgIC5jc3MoJ2xlZnQnLCAoZWxlbWVudE9mZnNldC5sZWZ0ICsgMTgwKSArICdweCcpXG4gICAgICAgICAgICAuY3NzKCd0b3AnLCAoZWxlbWVudE9mZnNldC50b3AgKyAyKSArICdweCcpO1xuXG4gICAgICAgICAgICAvLyBBZGRzIGdseXBoaWNvbnMgYXMgdGhlIGxhYmVsIGZvciBlZGl0IGFuZCBkZWxldGUgb3B0aW9uc1xuICAgICAgICAgICAgJCgnLnZha2F0YS1jb250ZXh0IGxpOmZpcnN0LWNoaWxkIGEnKS5hZGRDbGFzcygnZ2x5cGhpY29uIGdseXBoaWNvbi1wZW5jaWwnKTtcbiAgICAgICAgICAgICQoJy52YWthdGEtY29udGV4dCBsaTpsYXN0LWNoaWxkIGEnKS5hZGRDbGFzcygnZ2x5cGhpY29uIGdseXBoaWNvbi1jb2cnKTtcblxuICAgICAgICAgICAgLy8gRGlzcGxheSBtb2RhbCBmb3Igc2V0dGluZ3NcbiAgICAgICAgICAgICQoJy52YWthdGEtY29udGV4dCBsaTpsYXN0LWNoaWxkIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG1vZGFsLm1vZGFsKFwic2hvd1wiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgaG92ZXJlZCBpdGVtIGlzIGEgJ05ldyBQYWdlJyBub2RlXG4gICAgICAgICAgICAvLyBDb3JyZWN0cyBzdHJhbmdlIGJlaGF2aW9yIGJ5IGhpZGluZyBjb250ZXh0bWVudSBvbiBwcmV2aW91cyBwYWdlIG5vZGVcbiAgICAgICAgICAgICQudmFrYXRhLmNvbnRleHQuaGlkZSgpO1xuICAgICAgICAgICAgLy8gQ29ycmVjdHMgc3RyYW5nZSBiZWhhdmlvciBieSB1bmhpZ2hsaWdodGluZyBwcmV2aW91cyBwYWdlIG5vZGVcbiAgICAgICAgICAgICQoJy5qc3RyZWUtY2xpY2tlZCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2xpY2tlZCcpO1xuXG4gICAgICAgICAgICAvLyBEaXNwbGF5IG1vZGFsIGZvciBjcmVhdGluZyBhIG5ldyBwYWdlXG4gICAgICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbW9kYWwubW9kYWwoXCJzaG93XCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUHJldmVudHMgY29udGV4dCBtZW51IGZyb20gZGlzYXBwZWFyaW5nIHdoZW4gbm9kZSBpcyBjbGlja2VkXG4gICAgICAgIGlmICghJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygnanN0cmVlLWxhc3QnKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzRGlyKHBhdGgpIHtcbiAgY29uc29sZS5sb2cocGF0aCk7XG4gIHJldHVybiAhKC8oXFwuaHRtbHxcXCstbmV3LXBhZ2V8OlxcdyspJC8udGVzdChwYXRoKSk7XG59XG5cbi8vIG5ld1BhZ2VOb2RlIGlzIGEgYmFzZSBmb3IgY3JlYXRpbmcgXCJOZXcgUGFnZVwiIG5vZGVzIGluIHRoZSB0cmVlXG52YXIgbmV3UGFnZU5vZGUgPSB7XG4gIGlkOiAgICAgIFwiXCIsXG4gIHBhcmVudDogIFwiXCIsXG4gIHRleHQ6ICAgIFwiKyBOZXcgUGFnZVwiLFxufTtcblxuLyoqXG4gKiBpbnNlcnROZXdQYWdlTm9kZXMgdHJhdmVyc2VzIHRoZSBkYXRhIHNldCBhbmQgYWRkcyBcIk5ldyBQYWdlXCIgbm9kZXMgYXQgZWFjaFxuICogZGlyZWN0b3J5IG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpbnNlcnROZXdQYWdlTm9kZXMoZGF0YSkge1xuICB2YXIgbmV3UGFnZXMgPSBbXTtcblxuICB2YXIgaSA9IDA7XG4gIHZhciBqID0gZGF0YS5sZW5ndGg7XG4gIGZvciAoOyBpIDwgajsgaSsrKSB7XG4gICAgdmFyIHIgPSBkYXRhW2ldO1xuICAgIGlmICghISFyLmlzX2Rpcikge1xuICAgICAgY29udGludWUgLy8gbm90IGEgZGlyZWN0b3J5XG4gICAgfVxuICAgIHZhciBkaXIgPSByLmlkO1xuICAgIG5ld1BhZ2VzLnB1c2goZXh0ZW5kKHt9LCBuZXdQYWdlTm9kZSwge1xuICAgICAgaWQ6IGRpcitcIi8rLW5ldy1wYWdlXCIsXG4gICAgICBwYXJlbnQ6IGRpclxuICAgIH0pKTtcbiAgfVxuXG4gIC8vIGFkZCBvbmUgdG8gdGhlIHJvb3RcbiAgbmV3UGFnZXMucHVzaChleHRlbmQoe30sIG5ld1BhZ2VOb2RlLCB7XG4gICAgaWQ6IFwiLystbmV3LXBhZ2VcIixcbiAgICBwYXJlbnQ6IFwiI1wiXG4gIH0pKVxuXG4gIHJldHVybiBbXS5jb25jYXQoZGF0YSwgbmV3UGFnZXMpO1xufVxuXG4vKipcbiAqIHBvc3RSb3V0ZSBjYWxscyB0aGUgZGFzaGJvYXJkIEFQSSB0byBjcmVhdGUgYSBuZXcgcm91dGVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2l0ZV9pZFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqIEByZXR1cm4ge1Byb21pc2V9IChhbiAkLmFqYXggcHJvbWlzZSlcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBvc3RSb3V0ZShzaXRlX2lkLCBkYXRhKSB7XG4gIHJldHVybiAkLmFqYXgoe1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgdXJsOiBcIi8vXCIraG9zdCtcIi9zaXRlcy9cIitzaXRlX2lkK1wiL3JvdXRlc1wiLFxuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgeGhyRmllbGRzOiB7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICB9XG4gIH0pXG59XG5cbi8qKlxuICogZ2V0Um91dGVzIGdldHMgdGhlIHJvdXRpbmcgbWFwIGZyb20gdGhlIGRhc2hib2FyZCBBUElcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2l0ZV9pZFxuICogQHJldHVybiB7UHJvbWlzZX0gKGFuICQuYWpheCBwcm9taXNlKVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZ2V0Um91dGVzKHNpdGVfaWQpIHtcbiAgcmV0dXJuICQuYWpheCh7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHVybDogXCIvL1wiK2hvc3QrXCIvc2l0ZXMvXCIrc2l0ZV9pZCtcIi9yb3V0ZXNcIixcbiAgICB4aHJGaWVsZHM6IHtcbiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgIH0sXG4gICAgYWNjZXB0czoge1xuICAgICAganNvbjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICB9KTtcbn1cblxuLyoqXG4gKiBkZWxldGVSb3V0ZSBkZWxldGVzIHJvdXRlIG9uIHBhdGhcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2l0ZV9pZFxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1Byb21pc2V9IChhbiAkLmFqYXggcHJvaXNlKVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZGVsZXRlUm91dGUoc2l0ZV9pZCwgcGF0aCkge1xuICByZXR1cm4gJC5hamF4KHtcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgdXJsOiBcIi8vXCIraG9zdCtcIi9zaXRlcy9cIitzaXRlX2lkK1wiL3JvdXRlc1wiK3BhdGgsXG4gICAgeGhyRmllbGRzOiB7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICB9LFxuICAgIGFjY2VwdHM6IHtcbiAgICAgIGpzb246IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiB1cGRhdGVSb3V0ZSBQQVRDSGVzIGEgcm91dGUgb24gcGF0aCB3aXRoIG9ubHkgdGhlIHByb3ZpZGVkIGRhdGFcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2l0ZV9pZFxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAoYW4gJC5hamF4IHByb2lzZSlcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVJvdXRlKHNpdGVfaWQsIHBhdGgsIGRhdGEpIHtcbiAgcmV0dXJuICQuYWpheCh7XG4gICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgdXJsOiBcIi8vXCIrc2l0ZV9pZCtcIi5cIitob3N0K1wiL3BhdGNoXCIrcGF0aCxcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgIHhockZpZWxkczoge1xuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfVxuICB9KVxufVxuXG5cbmZ1bmN0aW9uIGdldENvbmYocGF0aCkge1xuICByZXR1cm4gbmV3IFRlbXBsYXRlKHBhdGgpLmdldChcImpzb25cIik7XG59XG5cblxuLy8gVE9ETyB0aGlzIGlzIG9uIHNpdGUtYnVpbGRlciwgbmVlZHMgdW5pZmljYXRpb25cbmZ1bmN0aW9uIGdldEZpZWxkcyhjb25mKSB7XG4gIGlmICghISFjb25mKSB7XG4gICAgY29uZiA9IHt9O1xuICB9XG5cbiAgcmV0dXJuICQuYWpheCh7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShjb25mKSxcbiAgICB1cmw6IFwiLy9cIitzaXRlSWQrXCIuXCIraG9zdCtcIi9maWVsZHMvZm9yXCIsXG4gICAgeGhyRmllbGRzOiB7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICB9LFxuICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJcbiAgfSk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgdXJsID0gcmVxdWlyZShcIi4vdXJsLmpzXCIpO1xuXG4vKipcbiAqIFRlbXBsYXRlIGlzIGEgY29uc3RydWN0IHRvIGdldCB0ZW1wbGF0ZSBiYXNlZCBkYXRhIGZyb20gdGhlIGRhc2hib2FyZCBhcGlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICogQGFwaSBwdWJsaWNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIFRlbXBsYXRlKHBhdGgpIHtcbiAgdGhpcy5wYXRoID0gcGF0aDtcbn1cblxuLyoqXG4gKiBnZXQgZ2V0cyBhIHJlc3BvbnNlIGZyb20gZGFzaGJvYXJkIHVuZGVyIHRoZSBkZWZpbmVkIG5hbWVzcGFjZS4gSWYgbm9cbiAqIG5hbWVzcGFjZSBpcyBwcm92aWRlZCBpdCBnZXRzIC9odG1sIGJ5IGRlZmF1bHQuXG4gKiBOT1RFIGFsbCBuYW1lc3BhY2VzIG11c3QgYmUgc2xhc2ggcHJlZml4ZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5zXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNraXBcbiAqIEByZXR1cm4ge3Byb21pc2V9ICh4aHIgd3JhcHBlZCBpbiBkZWZlcnJlZClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuVGVtcGxhdGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5zLCBza2lwKSB7XG4gIHZhciBwYXRoID0gdGhpcy5wYXRoO1xuICBpZiAoISFza2lwKSB7XG4gICAgcGF0aCA9IHBhdGgrXCI/c2tpcF9pbnNwZWN0aW9uPXRydWVcIjtcbiAgfVxuXG4gIHJldHVybiBjYWxsKG5zLCBcIkdFVFwiLCBwYXRoKTtcbn07XG5cbi8qKlxuICogaGVhZCBtYWtlcyBhIEhFQUQgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbnNcbiAqIEByZXR1cm4ge3Byb21pc2V9ICh4aHIgd3JhcHBlZCBpbiBkZWZlcnJlZClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuVGVtcGxhdGUucHJvdG90eXBlLmhlYWQgPSBmdW5jdGlvbihucykge1xuICByZXR1cm4gY2FsbChucywgXCJIRUFEXCIsIHRoaXMucGF0aCk7XG59O1xuXG4vKipcbiAqIGNhbGwgY3JlYXRlcyBhIHhociByZXF1ZXN0IHdyYXBwaW5nIGl0IGluIGEgZGVmZXJyZWQsIHJlc29sdmluZyBib3RoIHN1Y2Nlc3NcbiAqIGFuZCBmYWlsLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuc1xuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge3Byb21pc2V9ICh4aHIgd3JhcHBlZCBpbiBkZWZlcnJlZClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gY2FsbChucywgbWV0aG9kLCBwYXRoKSB7XG4gIGlmIChcInVuZGVmaW5lZFwiID09PSB0eXBlb2YgbnMgfHwgbnMgPT09IFwiXCIpIHtcbiAgICBucyA9IFwiaHRtbFwiXG4gIH1cblxuICB2YXIgZCA9ICQuRGVmZXJyZWQoKTtcbiAgdmFyIG9wdHMgPSB7XG4gICAgbWV0aG9kOiBtZXRob2QsXG4gICAgdXJsOiB1cmwobnMsIGhvc3QsIHBhdGgpLFxuICAgIHhockZpZWxkczoge1xuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfVxuICB9O1xuXG4gIGlmIChcImNvbmZcIiA9PT0gbnMpIHtcbiAgICBvcHRzLmFjY2VwdHMgPSB7XG4gICAgICBqc29uOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH07XG4gICAgb3B0cy5kYXRhVHlwZSA9IFwianNvblwiO1xuICB9XG5cbiAgJC5hamF4KG9wdHMpLnRoZW4oZC5yZXNvbHZlKS5mYWlsKGQucmVzb2x2ZSk7XG5cbiAgcmV0dXJuIGQucHJvbWlzZSgpO1xufVxuXG5cbi8qKlxuICogZXhwb3NlXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBUZW1wbGF0ZTtcbiIsIlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigkLCByYWN0aXZlKSB7XG4gICQoZnVuY3Rpb24oKSB7XG4gICAgJChcIi5kcm9wcGFibGUudXBsb2FkXCIpLm9uKFxuICAgICAgXCJkcmFnIGRyYWdzdGFydCBkcmFnZW5kIGRyYWdvdmVyIGRyYWdsZWF2ZSBkcm9wXCIsIGZ1bmN0aW9uKGV2dCkge1xuXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KVxuICAgIC5vbihcImRyYWdvdmVyIGRyYWdlbnRlclwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZHJhZ292ZXIgZHJhZ2VudGVyXCIpO1xuICAgIH0pXG4gICAgLm9uKFwiZHJhZ2xlYXZlIGRyYWdlbmQgZHJvcFwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZHJvcFwiKTtcbiAgICB9KVxuICAgIC5vbihcImRyb3BcIiwgdXBsb2FkRmlsZShcImRyb3BwYWJsZVwiKSk7XG5cbiAgICAkKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLm9uKFwiY2hhbmdlXCIsIHVwbG9hZEZpbGUoXCJpbnB1dFwiKSk7XG5cbiAgICAvKipcbiAgICAgKiBbcmVsPVwiY2xlYXItZmlsZVwiXSBvbiBjbGljayBoYW5kbGVzIGNsZWFyaW5nIHVwbG9hZGVkIGZpbGUgZGF0YS4gVGhpcyBha2luXG4gICAgICogdG8gZGVsZXRlLCBidXQgZG9lcyBub3QgcGh5c2ljYWxseSBkZWxldGUgdGhlIHVwbG9hZGVkIGZpbGUsIGp1c3QgYW55IFxuICAgICAqIHJlZmVyZW5jZSB0byBpdCBpbiB0aGUgY3VycmVudCBwYXRoLlxuICAgICAqXG4gICAgICovXG5cbiAgICAkKCdbcmVsPVwiY2xlYXItZmlsZVwiXScpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xlYXItZmlsZVwiKTtcblxuICAgICAgdmFyIHJlbCA9ICQoZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHJlbC5jbG9zZXN0KFwiW2RhdGEtdHlwZV1cIik7XG4gICAgICB2YXIgcGF0aCA9ICQoJy5kcm9wcGFibGUudXBsb2FkJywgY29udGFpbmVyKS5kYXRhKFwicGF0aFwiKTtcblxuICAgICAgLy8gY2xlYXIgaW5wdXQgYW5kIGhpZGRlbiBuYW1lIHZhbHVlXG4gICAgICAkKCdbdHlwZT1cImZpbGVcIl0nLCBjb250YWluZXIpLnZhbChcIlwiKTtcbiAgICAgICQoJ1tuYW1lPVwiJytwYXRoKydcIl0nLCBjb250YWluZXIpLnZhbChcIlwiKTtcblxuICAgICAgLy8gaWYgYXMgPT09IFwiaW1hZ2VcIiByZXNldCB0aGUgcHJldmlld1xuICAgICAgaWYgKGNvbnRhaW5lci5kYXRhKFwiYXNcIikgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAkKCcuaW1hZ2UtcHJldmlldycsIGNvbnRhaW5lcikuYXR0cihcInNyY1wiLCBcIlwiKS5oaWRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoISFyYWN0aXZlKSB7XG4gICAgICAgIHJhY3RpdmUuc2V0KHBhdGgsIFwiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogdXBsb2FkUHJvZ3Jlc3MgaXMgdGhlIHByb2dyZXNzIGhhbmRsZXJcbiAgICpcbiAgICogQHBhcmFtIHtTZWxlY3Rvcn0gZWwgKGpxdWVyeSBzZWxlY3RvcilcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiB1cGxvYWRQcm9ncmVzcyhlbCkge1xuICAgIGVsLnNob3coKTtcblxuICAgIHZhciBiID0gJChcIi5wcm9ncmVzcy1iYXJcIiwgZWwpO1xuICAgIHZhciBsID0gJChcIi5zci1vbmx5XCIsIGVsKTtcblxuICAgIHJldHVybiBmdW5jdGlvbihldnQpIHtcbiAgICAgIHZhciBwID0gZXZ0LnBlcmNlbnQrXCIlXCI7XG5cbiAgICAgIGIuY3NzKFwid2lkdGhcIiwgcCk7XG4gICAgICBsLmh0bWwocCk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGxvYWQgaGFuZGxlcyB4aHIgYmFzZWQgdXBsb2FkcyB0byBhbiBzMyBlbmRwb2ludFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZmlsZSAoYSBodG1sIGZpbGUgb2JqZWN0fVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgZnVuY3Rpb24gdXBsb2FkKGZpbGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YTtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuXG4gICAgZm9ybS5hcHBlbmQoJ2tleScsIG9wdGlvbnMua2V5KTtcbiAgICBmb3JtLmFwcGVuZCgnYWNsJywgb3B0aW9ucy5hY2wgfHwgJ3B1YmxpYy1yZWFkJyk7XG4gICAgZm9ybS5hcHBlbmQoJ1BvbGljeScsIG9wdGlvbnMucG9saWN5KTtcbiAgICBpZiAob3B0aW9ucy50eXBlICE9PSBudWxsKSBmb3JtLmFwcGVuZCgnQ29udGVudC1UeXBlJywgb3B0aW9ucy50eXBlIHx8IGZpbGUudHlwZSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7XG4gICAgaWYgKG9wdGlvbnMuc2l6ZSAhPT0gbnVsbCkgZm9ybS5hcHBlbmQoJ0NvbnRlbnQtTGVuZ3RoJywgb3B0aW9ucy5zaXplIHx8IGZpbGUuc2l6ZSk7XG4gICAgZm9ybS5hcHBlbmQoJ1gtQW16LUNyZWRlbnRpYWwnLCBvcHRpb25zLmNyZWRlbnRpYWwpO1xuICAgIGZvcm0uYXBwZW5kKCdYLUFtei1BbGdvcml0aG0nLCBvcHRpb25zLmFsZ29yaXRobSB8fCAnQVdTNC1ITUFDLVNIQTI1NicpO1xuICAgIGZvcm0uYXBwZW5kKCdYLUFtei1TaWduYXR1cmUnLCBvcHRpb25zLnNpZ25hdHVyZSk7XG4gICAgZm9ybS5hcHBlbmQoJ1gtQW16LURhdGUnLCBvcHRpb25zLmRhdGUpO1xuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZmlsZSk7XG5cbiAgICB2YXIgZCA9ICQuRGVmZXJyZWQoKTtcblxuICAgIGlmIChvcHRpb25zLm9ucHJvZ3Jlc3MpIHtcbiAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgZS5wZXJjZW50ID0gZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwO1xuICAgICAgICBvcHRpb25zLm9ucHJvZ3Jlc3MoZSk7XG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuICAgICAgaWYgKHhoci5zdGF0dXMgPCA0MDApIHJldHVybiBkLnJlc29sdmUoeyB1cmw6IG9wdGlvbnMuYWN0aW9uICsgXCIvXCIgKyBvcHRpb25zLmtleS5yZXBsYWNlKFwiJHtmaWxlbmFtZX1cIiwgZmlsZS5uYW1lKSB9KTtcbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICBlcnIuc3RhdHVzID0geGhyLnN0YXR1cztcbiAgICAgIGVyci5zdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQ7XG4gICAgICBkLnJlamVjdChlcnIpO1xuICAgIH1cblxuICAgIHhoci5vcGVuKCdQT1NUJywgb3B0aW9ucy5hY3Rpb24sIHRydWUpO1xuICAgIHhoci5zZW5kKGZvcm0pO1xuXG4gICAgcmV0dXJuIGQucHJvbWlzZSgpO1xuICB9XG5cblxuICAvKipcbiAgICogdXBsb2FkRmlsZSByZXR1cm5zIGFuIGV2ZW50IGhhbmRsZXIgdGhhdCBzaWducyBhbmQgYmVnaW5zIGZpbGUgdXBsb2Fkc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAodG8gaGVscCBkZXRlcm1pbmUgZXZ0IHRhcmdldHMgdG8gZ3JhYiBmaWxlcyBhcnJheSlcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqIEBhcGkgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiB1cGxvYWRGaWxlKHR5cGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICB2YXIgZmlsZXM7XG5cbiAgICAgIGlmICh0eXBlID09PSBcImRyb3BwYWJsZVwiKSB7XG4gICAgICAgIGZpbGVzID0gZXZ0Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsZXMgPSBldnQuY3VycmVudFRhcmdldC5maWxlcztcbiAgICAgIH1cbiAgICAgIGZpbGVzID0gc2lnbkZpbGVzKGZpbGVzKTtcblxuICAgICAgdmFyIG5vZGUgPSAkKGV2dC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiW2RhdGEtdHlwZV1cIik7XG4gICAgICB2YXIgYmFyICA9ICQoXCIucHJvZ3Jlc3NcIiwgbm9kZSk7XG4gICAgICB2YXIgcGF0aCA9ICQoJ1tkYXRhLXBhdGhdJywgbm9kZSkuYXR0cihcImRhdGEtcGF0aFwiKTtcblxuICAgICAgJC53aGVuLmFwcGx5KCQsIGZpbGVzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZmlsZSwgZGF0YSwgc3RhdHVzLCB4aHIpIHtcbiAgICAgICAgZGF0YS5vbnByb2dyZXNzID0gdXBsb2FkUHJvZ3Jlc3MoYmFyKTtcblxuICAgICAgICByZXR1cm4gdXBsb2FkKGZpbGUsIGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgLy8gZGVsYXkgdy8gbmV4dC10aWNrIHNvIHByb2dyZXNzIGJhciBjYW4gZ28gdG8gMTAwJVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGJhci5oaWRlKCk7XG4gICAgICAgIH0sIDM1MCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJwcmV2aWV3XCIsICQoXCIuaW1hZ2UtcHJldmlld1wiLCBub2RlKSk7XG4gICAgICAgICQoXCJpbnB1dFtuYW1lPSdcIitwYXRoK1wiJ11cIiwgbm9kZSkudmFsKGRhdGEudXJsKTtcbiAgICAgICAgJChcIi5pbWFnZS1wcmV2aWV3XCIsIG5vZGUpLmF0dHIoXCJzcmNcIiwgZGF0YS51cmwpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpLnNob3coKTtcblxuICAgICAgICAvLyB0aGVyZSBpcyBhIHJhY3RpdmUgc2V0IHRoZSByYWN0aXZlIGJpbmRpbmdcbiAgICAgICAgaWYgKCEhcmFjdGl2ZSkge1xuICAgICAgICAgIHJhY3RpdmUuc2V0KHBhdGgsIGRhdGEudXJsKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGZpbGUsIHN0YXR1cywgeGhyLCBtc2cpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiLCBtc2cpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzaWduRmlsZXMgcmV0dXJucyBhbiBhcnJheSBvZiBwcm9taXNlZCBmaWxlcyB0byBiZSBzaWduZWRcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZmlsZXMgKGFuIGFycmF5IG9mIGh0bWwgZmlsZSBvYmplY3RzKVxuICAgKiBAcmV0dXJuIHtBcnJheX0gKGFuIGFycmF5IG9mIHByb21pc2VzKVxuICAgKiBAYXBpIHByaXZhdGVcbiAgICovXG5cbiAgZnVuY3Rpb24gc2lnbkZpbGVzKGZpbGVzKSB7XG4gICAgdmFyIHNpZ25lZCA9IFtdO1xuXG4gICAgJC5lYWNoKGZpbGVzLCBmdW5jdGlvbihpLCBmaWxlKSB7XG4gICAgICB2YXIgZCA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgbWV0aG9kOiBcImdldFwiLFxuICAgICAgICB1cmw6IFwiLy9cIitob3N0K1wiL2FwaS9zMy9cIitzaXRlSWQrXCIvc2lnbi9cIitmaWxlLm5hbWUrXG4gICAgICAgICAgXCI/dHlwZT1cIitmaWxlLnR5cGUrXCImc2l6ZT1cIitmaWxlLnNpemUsXG4gICAgICAgIHhockZpZWxkczoge1xuICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIHhocikge1xuICAgICAgICAgIGQucmVzb2x2ZShmaWxlLCBkYXRhLCBzdGF0dXMsIHhocik7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgbXNnKSB7XG4gICAgICAgICAgZC5yZWplY3QoZmlsZSwgeGhyLCBzdGF0dXMsIG1zZyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHNpZ25lZC5wdXNoKGQucHJvbWlzZSgpKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNpZ25lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBleHBvc2VcbiAgICovXG5cbiAgcmV0dXJuIHVwbG9hZEZpbGU7XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSB1cmw7XG4gIFxuLy8gVE9ETyBhbGwgdmFycyB1c2VkIHRvIGJ1aWxkIHRoaXMgdXJsIHNob3VsZCBiZSBwYXNzZWQgYXMgYXJndW1lbnRzXG5mdW5jdGlvbiB1cmwobnMsIGhvc3QsIHBhdGgpIHtcbiAgcmV0dXJuIFtcbiAgICBcIi8vXCIsXG4gICAgc2l0ZUlkLFwiLlwiLGhvc3QsXG4gICAgXCIvXCIrbnMrcGF0aFxuICBdLmpvaW4oXCJcIik7XG59XG4iLCIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogbW9kYWwuanMgdjMuMy43XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNtb2RhbHNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBNT0RBTCBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyAgICAgICAgICAgICA9IG9wdGlvbnNcbiAgICB0aGlzLiRib2R5ICAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpXG4gICAgdGhpcy4kZWxlbWVudCAgICAgICAgICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMuJGRpYWxvZyAgICAgICAgICAgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLm1vZGFsLWRpYWxvZycpXG4gICAgdGhpcy4kYmFja2Ryb3AgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMuaXNTaG93biAgICAgICAgICAgICA9IG51bGxcbiAgICB0aGlzLm9yaWdpbmFsQm9keVBhZCAgICAgPSBudWxsXG4gICAgdGhpcy5zY3JvbGxiYXJXaWR0aCAgICAgID0gMFxuICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnJlbW90ZSkge1xuICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAuZmluZCgnLm1vZGFsLWNvbnRlbnQnKVxuICAgICAgICAubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLCAkLnByb3h5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5icy5tb2RhbCcpXG4gICAgICAgIH0sIHRoaXMpKVxuICAgIH1cbiAgfVxuXG4gIE1vZGFsLlZFUlNJT04gID0gJzMuMy43J1xuXG4gIE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDBcbiAgTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIE1vZGFsLkRFRkFVTFRTID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIHNob3c6IHRydWVcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1Nob3duID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3coX3JlbGF0ZWRUYXJnZXQpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChfcmVsYXRlZFRhcmdldCkge1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgIHZhciBlICAgID0gJC5FdmVudCgnc2hvdy5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcblxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXG4gICAgaWYgKHRoaXMuaXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHRoaXMuaXNTaG93biA9IHRydWVcblxuICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKVxuICAgIHRoaXMuc2V0U2Nyb2xsYmFyKClcbiAgICB0aGlzLiRib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuJylcblxuICAgIHRoaXMuZXNjYXBlKClcbiAgICB0aGlzLnJlc2l6ZSgpXG5cbiAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJywgJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsICQucHJveHkodGhpcy5oaWRlLCB0aGlzKSlcblxuICAgIHRoaXMuJGRpYWxvZy5vbignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGF0LiRlbGVtZW50Lm9uZSgnbW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoYXQuJGVsZW1lbnQpKSB0aGF0Lmlnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhhdC4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpXG5cbiAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHtcbiAgICAgICAgdGhhdC4kZWxlbWVudC5hcHBlbmRUbyh0aGF0LiRib2R5KSAvLyBkb24ndCBtb3ZlIG1vZGFscyBkb20gcG9zaXRpb25cbiAgICAgIH1cblxuICAgICAgdGhhdC4kZWxlbWVudFxuICAgICAgICAuc2hvdygpXG4gICAgICAgIC5zY3JvbGxUb3AoMClcblxuICAgICAgdGhhdC5hZGp1c3REaWFsb2coKVxuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICB0aGF0LiRlbGVtZW50WzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvd1xuICAgICAgfVxuXG4gICAgICB0aGF0LiRlbGVtZW50LmFkZENsYXNzKCdpbicpXG5cbiAgICAgIHRoYXQuZW5mb3JjZUZvY3VzKClcblxuICAgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93bi5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcblxuICAgICAgdHJhbnNpdGlvbiA/XG4gICAgICAgIHRoYXQuJGRpYWxvZyAvLyB3YWl0IGZvciBtb2RhbCB0byBzbGlkZSBpblxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKS50cmlnZ2VyKGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ2ZvY3VzJykudHJpZ2dlcihlKVxuICAgIH0pXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgZSA9ICQuRXZlbnQoJ2hpZGUuYnMubW9kYWwnKVxuXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICBpZiAoIXRoaXMuaXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHRoaXMuaXNTaG93biA9IGZhbHNlXG5cbiAgICB0aGlzLmVzY2FwZSgpXG4gICAgdGhpcy5yZXNpemUoKVxuXG4gICAgJChkb2N1bWVudCkub2ZmKCdmb2N1c2luLmJzLm1vZGFsJylcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5yZW1vdmVDbGFzcygnaW4nKVxuICAgICAgLm9mZignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcpXG4gICAgICAub2ZmKCdtb3VzZXVwLmRpc21pc3MuYnMubW9kYWwnKVxuXG4gICAgdGhpcy4kZGlhbG9nLm9mZignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnKVxuXG4gICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgJC5wcm94eSh0aGlzLmhpZGVNb2RhbCwgdGhpcykpXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICB0aGlzLmhpZGVNb2RhbCgpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICQoZG9jdW1lbnQpXG4gICAgICAub2ZmKCdmb2N1c2luLmJzLm1vZGFsJykgLy8gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wXG4gICAgICAub24oJ2ZvY3VzaW4uYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChkb2N1bWVudCAhPT0gZS50YXJnZXQgJiZcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnRbMF0gIT09IGUudGFyZ2V0ICYmXG4gICAgICAgICAgICAhdGhpcy4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKVxuICAgICAgICB9XG4gICAgICB9LCB0aGlzKSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaXNTaG93biAmJiB0aGlzLm9wdGlvbnMua2V5Ym9hcmQpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2tleWRvd24uZGlzbWlzcy5icy5tb2RhbCcsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PSAyNyAmJiB0aGlzLmhpZGUoKVxuICAgICAgfSwgdGhpcykpXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1Nob3duKSB7XG4gICAgICB0aGlzLiRlbGVtZW50Lm9mZigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJylcbiAgICB9XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmlzU2hvd24pIHtcbiAgICAgICQod2luZG93KS5vbigncmVzaXplLmJzLm1vZGFsJywgJC5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcykpXG4gICAgfSBlbHNlIHtcbiAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZS5icy5tb2RhbCcpXG4gICAgfVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICB0aGlzLiRlbGVtZW50LmhpZGUoKVxuICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC4kYm9keS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpXG4gICAgICB0aGF0LnJlc2V0QWRqdXN0bWVudHMoKVxuICAgICAgdGhhdC5yZXNldFNjcm9sbGJhcigpXG4gICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ2hpZGRlbi5icy5tb2RhbCcpXG4gICAgfSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5yZW1vdmVCYWNrZHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRiYWNrZHJvcCAmJiB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKVxuICAgIHRoaXMuJGJhY2tkcm9wID0gbnVsbFxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmJhY2tkcm9wID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgdmFyIGFuaW1hdGUgPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyAnZmFkZScgOiAnJ1xuXG4gICAgaWYgKHRoaXMuaXNTaG93biAmJiB0aGlzLm9wdGlvbnMuYmFja2Ryb3ApIHtcbiAgICAgIHZhciBkb0FuaW1hdGUgPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiBhbmltYXRlXG5cbiAgICAgIHRoaXMuJGJhY2tkcm9wID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSlcbiAgICAgICAgLmFkZENsYXNzKCdtb2RhbC1iYWNrZHJvcCAnICsgYW5pbWF0ZSlcbiAgICAgICAgLmFwcGVuZFRvKHRoaXMuJGJvZHkpXG5cbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICB0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0KSByZXR1cm5cbiAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnXG4gICAgICAgICAgPyB0aGlzLiRlbGVtZW50WzBdLmZvY3VzKClcbiAgICAgICAgICA6IHRoaXMuaGlkZSgpXG4gICAgICB9LCB0aGlzKSlcblxuICAgICAgaWYgKGRvQW5pbWF0ZSkgdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XG5cbiAgICAgIHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKCdpbicpXG5cbiAgICAgIGlmICghY2FsbGJhY2spIHJldHVyblxuXG4gICAgICBkb0FuaW1hdGUgP1xuICAgICAgICB0aGlzLiRiYWNrZHJvcFxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNhbGxiYWNrKVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICAgIGNhbGxiYWNrKClcblxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93biAmJiB0aGlzLiRiYWNrZHJvcCkge1xuICAgICAgdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoJ2luJylcblxuICAgICAgdmFyIGNhbGxiYWNrUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0LnJlbW92ZUJhY2tkcm9wKClcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgICAgfVxuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cbiAgICAgICAgdGhpcy4kYmFja2Ryb3BcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBjYWxsYmFja1JlbW92ZSlcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgICBjYWxsYmFja1JlbW92ZSgpXG5cbiAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgLy8gdGhlc2UgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgdG8gaGFuZGxlIG92ZXJmbG93aW5nIG1vZGFsc1xuXG4gIE1vZGFsLnByb3RvdHlwZS5oYW5kbGVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hZGp1c3REaWFsb2coKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmFkanVzdERpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9kYWxJc092ZXJmbG93aW5nID0gdGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cbiAgICB0aGlzLiRlbGVtZW50LmNzcyh7XG4gICAgICBwYWRkaW5nTGVmdDogICF0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmIG1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFyV2lkdGggOiAnJyxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhpcy5ib2R5SXNPdmVyZmxvd2luZyAmJiAhbW9kYWxJc092ZXJmbG93aW5nID8gdGhpcy5zY3JvbGxiYXJXaWR0aCA6ICcnXG4gICAgfSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5yZXNldEFkanVzdG1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcbiAgICAgIHBhZGRpbmdMZWZ0OiAnJyxcbiAgICAgIHBhZGRpbmdSaWdodDogJydcbiAgICB9KVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmdWxsV2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIGlmICghZnVsbFdpbmRvd1dpZHRoKSB7IC8vIHdvcmthcm91bmQgZm9yIG1pc3Npbmcgd2luZG93LmlubmVyV2lkdGggaW4gSUU4XG4gICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZnVsbFdpbmRvd1dpZHRoID0gZG9jdW1lbnRFbGVtZW50UmVjdC5yaWdodCAtIE1hdGguYWJzKGRvY3VtZW50RWxlbWVudFJlY3QubGVmdClcbiAgICB9XG4gICAgdGhpcy5ib2R5SXNPdmVyZmxvd2luZyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBmdWxsV2luZG93V2lkdGhcbiAgICB0aGlzLnNjcm9sbGJhcldpZHRoID0gdGhpcy5tZWFzdXJlU2Nyb2xsYmFyKClcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5zZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJvZHlQYWQgPSBwYXJzZUludCgodGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnKSB8fCAwKSwgMTApXG4gICAgdGhpcy5vcmlnaW5hbEJvZHlQYWQgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJ1xuICAgIGlmICh0aGlzLmJvZHlJc092ZXJmbG93aW5nKSB0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcsIGJvZHlQYWQgKyB0aGlzLnNjcm9sbGJhcldpZHRoKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnJlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgdGhpcy5vcmlnaW5hbEJvZHlQYWQpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHsgLy8gdGh4IHdhbHNoXG4gICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZSdcbiAgICB0aGlzLiRib2R5LmFwcGVuZChzY3JvbGxEaXYpXG4gICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoXG4gICAgdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpXG4gICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoXG4gIH1cblxuXG4gIC8vIE1PREFMIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbiwgX3JlbGF0ZWRUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5tb2RhbCcpXG4gICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBNb2RhbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbilcblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5tb2RhbCcsIChkYXRhID0gbmV3IE1vZGFsKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oX3JlbGF0ZWRUYXJnZXQpXG4gICAgICBlbHNlIGlmIChvcHRpb25zLnNob3cpIGRhdGEuc2hvdyhfcmVsYXRlZFRhcmdldClcbiAgICB9KVxuICB9XG5cbiAgdmFyIG9sZCA9ICQuZm4ubW9kYWxcblxuICAkLmZuLm1vZGFsICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4ubW9kYWwuQ29uc3RydWN0b3IgPSBNb2RhbFxuXG5cbiAgLy8gTU9EQUwgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT1cblxuICAkLmZuLm1vZGFsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5tb2RhbCA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIE1PREFMIERBVEEtQVBJXG4gIC8vID09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLm1vZGFsLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICB2YXIgaHJlZiAgICA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxuICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLywgJycpKSkgLy8gc3RyaXAgZm9yIGllN1xuICAgIHZhciBvcHRpb24gID0gJHRhcmdldC5kYXRhKCdicy5tb2RhbCcpID8gJ3RvZ2dsZScgOiAkLmV4dGVuZCh7IHJlbW90ZTogIS8jLy50ZXN0KGhyZWYpICYmIGhyZWYgfSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSlcblxuICAgIGlmICgkdGhpcy5pcygnYScpKSBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICR0YXJnZXQub25lKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24gKHNob3dFdmVudCkge1xuICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cbiAgICAgICR0YXJnZXQub25lKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0aGlzLmlzKCc6dmlzaWJsZScpICYmICR0aGlzLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICAgIH0pXG4gICAgfSlcbiAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb24sIHRoaXMpXG4gIH0pXG5cbn0oalF1ZXJ5KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG52YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoYXJyKSB7XG5cdGlmICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBBcnJheS5pc0FycmF5KGFycik7XG5cdH1cblxuXHRyZXR1cm4gdG9TdHIuY2FsbChhcnIpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxudmFyIGlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHRpZiAoIW9iaiB8fCB0b1N0ci5jYWxsKG9iaikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dmFyIGhhc093bkNvbnN0cnVjdG9yID0gaGFzT3duLmNhbGwob2JqLCAnY29uc3RydWN0b3InKTtcblx0dmFyIGhhc0lzUHJvdG90eXBlT2YgPSBvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSAmJiBoYXNPd24uY2FsbChvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCAnaXNQcm90b3R5cGVPZicpO1xuXHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdGlmIChvYmouY29uc3RydWN0b3IgJiYgIWhhc093bkNvbnN0cnVjdG9yICYmICFoYXNJc1Byb3RvdHlwZU9mKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsXG5cdC8vIGlmIGxhc3Qgb25lIGlzIG93biwgdGhlbiBhbGwgcHJvcGVydGllcyBhcmUgb3duLlxuXHR2YXIga2V5O1xuXHRmb3IgKGtleSBpbiBvYmopIHsvKiovfVxuXG5cdHJldHVybiB0eXBlb2Yga2V5ID09PSAndW5kZWZpbmVkJyB8fCBoYXNPd24uY2FsbChvYmosIGtleSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCgpIHtcblx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1swXSxcblx0XHRpID0gMSxcblx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGRlZXAgPSBmYWxzZTtcblxuXHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnYm9vbGVhbicpIHtcblx0XHRkZWVwID0gdGFyZ2V0O1xuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sxXSB8fCB7fTtcblx0XHQvLyBza2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0aSA9IDI7XG5cdH0gZWxzZSBpZiAoKHR5cGVvZiB0YXJnZXQgIT09ICdvYmplY3QnICYmIHR5cGVvZiB0YXJnZXQgIT09ICdmdW5jdGlvbicpIHx8IHRhcmdldCA9PSBudWxsKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHRmb3IgKDsgaSA8IGxlbmd0aDsgKytpKSB7XG5cdFx0b3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKG9wdGlvbnMgIT0gbnVsbCkge1xuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yIChuYW1lIGluIG9wdGlvbnMpIHtcblx0XHRcdFx0c3JjID0gdGFyZ2V0W25hbWVdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1tuYW1lXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICh0YXJnZXQgIT09IGNvcHkpIHtcblx0XHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0XHRpZiAoZGVlcCAmJiBjb3B5ICYmIChpc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IGlzQXJyYXkoY29weSkpKSkge1xuXHRcdFx0XHRcdFx0aWYgKGNvcHlJc0FycmF5KSB7XG5cdFx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTtcblxuXHRcdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBjb3B5ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gY29weTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxuIiwiLyohXG4gKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYyLjIuNFxuICogaHR0cDovL2pxdWVyeS5jb20vXG4gKlxuICogSW5jbHVkZXMgU2l6emxlLmpzXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE2LTA1LTIwVDE3OjIzWlxuICovXG5cbihmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vXCJ1c2Ugc3RyaWN0XCI7XG52YXIgYXJyID0gW107XG5cbnZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcblx0dmVyc2lvbiA9IFwiMi4yLjRcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFxuXG5cdC8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xuXHRybXNQcmVmaXggPSAvXi1tcy0vLFxuXHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cblx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRqcXVlcnk6IHZlcnNpb24sXG5cblx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblxuXHQvLyBTdGFydCB3aXRoIGFuIGVtcHR5IHNlbGVjdG9yXG5cdHNlbGVjdG9yOiBcIlwiLFxuXG5cdC8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMFxuXHRsZW5ndGg6IDAsXG5cblx0dG9BcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0fSxcblxuXHQvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG5cdC8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5XG5cdGdldDogZnVuY3Rpb24oIG51bSApIHtcblx0XHRyZXR1cm4gbnVtICE9IG51bGwgP1xuXG5cdFx0XHQvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0XG5cdFx0XHQoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6XG5cblx0XHRcdC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGluIGEgY2xlYW4gYXJyYXlcblx0XHRcdHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cdFx0cmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIHRhcmdldCApICkge1xuXHRcdHRhcmdldCA9IHt9O1xuXHR9XG5cblx0Ly8gRXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkXG5cdGlmICggaSA9PT0gbGVuZ3RoICkge1xuXHRcdHRhcmdldCA9IHRoaXM7XG5cdFx0aS0tO1xuXHR9XG5cblx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKCAoIG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSApICE9IG51bGwgKSB7XG5cblx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRcdFx0c3JjID0gdGFyZ2V0WyBuYW1lIF07XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zWyBuYW1lIF07XG5cblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRpZiAoIHRhcmdldCA9PT0gY29weSApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb3B5ICkgfHxcblx0XHRcdFx0XHQoIGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoIGNvcHkgKSApICkgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KCBzcmMgKSA/IHNyYyA6IFtdO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzRnVuY3Rpb246IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJmdW5jdGlvblwiO1xuXHR9LFxuXG5cdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cblx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fSxcblxuXHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cblx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfFwiXCIpXG5cdFx0Ly8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHRcdC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHRcdC8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKVxuXHRcdHZhciByZWFsU3RyaW5nT2JqID0gb2JqICYmIG9iai50b1N0cmluZygpO1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzQXJyYXkoIG9iaiApICYmICggcmVhbFN0cmluZ09iaiAtIHBhcnNlRmxvYXQoIHJlYWxTdHJpbmdPYmogKSArIDEgKSA+PSAwO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIGtleTtcblxuXHRcdC8vIE5vdCBwbGFpbiBvYmplY3RzOlxuXHRcdC8vIC0gQW55IG9iamVjdCBvciB2YWx1ZSB3aG9zZSBpbnRlcm5hbCBbW0NsYXNzXV0gcHJvcGVydHkgaXMgbm90IFwiW29iamVjdCBPYmplY3RdXCJcblx0XHQvLyAtIERPTSBub2Rlc1xuXHRcdC8vIC0gd2luZG93XG5cdFx0aWYgKCBqUXVlcnkudHlwZSggb2JqICkgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdFxuXHRcdGlmICggb2JqLmNvbnN0cnVjdG9yICYmXG5cdFx0XHRcdCFoYXNPd24uY2FsbCggb2JqLCBcImNvbnN0cnVjdG9yXCIgKSAmJlxuXHRcdFx0XHQhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgfHwge30sIFwiaXNQcm90b3R5cGVPZlwiICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsXG5cdFx0Ly8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd25cblx0XHRmb3IgKCBrZXkgaW4gb2JqICkge31cblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTtcblx0fSxcblxuXHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBuYW1lO1xuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHR0eXBlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gb2JqICsgXCJcIjtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMCwgaU9TPDYgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0XHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCBcIm9iamVjdFwiIDpcblx0XHRcdHR5cGVvZiBvYmo7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcblx0Z2xvYmFsRXZhbDogZnVuY3Rpb24oIGNvZGUgKSB7XG5cdFx0dmFyIHNjcmlwdCxcblx0XHRcdGluZGlyZWN0ID0gZXZhbDtcblxuXHRcdGNvZGUgPSBqUXVlcnkudHJpbSggY29kZSApO1xuXG5cdFx0aWYgKCBjb2RlICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgY29kZSBpbmNsdWRlcyBhIHZhbGlkLCBwcm9sb2d1ZSBwb3NpdGlvblxuXHRcdFx0Ly8gc3RyaWN0IG1vZGUgcHJhZ21hLCBleGVjdXRlIGNvZGUgYnkgaW5qZWN0aW5nIGFcblx0XHRcdC8vIHNjcmlwdCB0YWcgaW50byB0aGUgZG9jdW1lbnQuXG5cdFx0XHRpZiAoIGNvZGUuaW5kZXhPZiggXCJ1c2Ugc3RyaWN0XCIgKSA9PT0gMSApIHtcblx0XHRcdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXHRcdFx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIGF2b2lkIHRoZSBET00gbm9kZSBjcmVhdGlvbiwgaW5zZXJ0aW9uXG5cdFx0XHRcdC8vIGFuZCByZW1vdmFsIGJ5IHVzaW5nIGFuIGluZGlyZWN0IGdsb2JhbCBldmFsXG5cblx0XHRcdFx0aW5kaXJlY3QoIGNvZGUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuXHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdC8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3Milcblx0Y2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkge1xuXHRcdHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuXHR9LFxuXG5cdG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0fSxcblxuXHRlYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHtcblx0XHR2YXIgbGVuZ3RoLCBpID0gMDtcblxuXHRcdGlmICggaXNBcnJheUxpa2UoIG9iaiApICkge1xuXHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0cmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuXHR9LFxuXG5cdG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcblx0XHR2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSBmaXJzdC5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdGZpcnN0WyBpKysgXSA9IHNlY29uZFsgaiBdO1xuXHRcdH1cblxuXHRcdGZpcnN0Lmxlbmd0aCA9IGk7XG5cblx0XHRyZXR1cm4gZmlyc3Q7XG5cdH0sXG5cblx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdHZhciBjYWxsYmFja0ludmVyc2UsXG5cdFx0XHRtYXRjaGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcblx0XHQvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuXHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG5cdFx0XHRpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG5cdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVzO1xuXHR9LFxuXG5cdC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcblx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7XG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIGVsZW1zICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHR9LFxuXG5cdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRndWlkOiAxLFxuXG5cdC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuXHQvLyBhcmd1bWVudHMuXG5cdHByb3h5OiBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG5cdFx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRcdGNvbnRleHQgPSBmbjtcblx0XHRcdGZuID0gdG1wO1xuXHRcdH1cblxuXHRcdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdFx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0XHRpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gU2ltdWxhdGVkIGJpbmRcblx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdFx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuXHRcdH07XG5cblx0XHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0XHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuXHRcdHJldHVybiBwcm94eTtcblx0fSxcblxuXHRub3c6IERhdGUubm93LFxuXG5cdC8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpclxuXHQvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LlxuXHRzdXBwb3J0OiBzdXBwb3J0XG59ICk7XG5cbi8vIEpTSGludCB3b3VsZCBlcnJvciBvbiB0aGlzIGNvZGUgZHVlIHRvIHRoZSBTeW1ib2wgbm90IGJlaW5nIGRlZmluZWQgaW4gRVM1LlxuLy8gRGVmaW5pbmcgdGhpcyBnbG9iYWwgaW4gLmpzaGludHJjIHdvdWxkIGNyZWF0ZSBhIGRhbmdlciBvZiB1c2luZyB0aGUgZ2xvYmFsXG4vLyB1bmd1YXJkZWQgaW4gYW5vdGhlciBwbGFjZSwgaXQgc2VlbXMgc2FmZXIgdG8ganVzdCBkaXNhYmxlIEpTSGludCBmb3IgdGhlc2Vcbi8vIHRocmVlIGxpbmVzLlxuLyoganNoaW50IGlnbm9yZTogc3RhcnQgKi9cbmlmICggdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRqUXVlcnkuZm5bIFN5bWJvbC5pdGVyYXRvciBdID0gYXJyWyBTeW1ib2wuaXRlcmF0b3IgXTtcbn1cbi8qIGpzaGludCBpZ25vcmU6IGVuZCAqL1xuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKCBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoIFwiIFwiICksXG5mdW5jdGlvbiggaSwgbmFtZSApIHtcblx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG59ICk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9ICEhb2JqICYmIFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjFcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTUtMTAtMTdcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2Vcblx0d2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IFwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsXG5cblx0Ly8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgaWRlbnRpZmllciArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcXFxcKChcIiArXG5cdFx0Ly8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czpcblx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblx0XHQvLyAyLiBzaW1wbGUgKGNhcHR1cmUgNilcblx0XHRcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMgKyBcIikqKXxcIiArXG5cdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFwiLipcIiArXG5cdFx0XCIpXFxcXCl8KVwiLFxuXG5cdC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcblx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuXHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cblx0cmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoIFwiPVwiICsgd2hpdGVzcGFjZSArIFwiKihbXlxcXFxdJ1xcXCJdKj8pXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIiwgXCJnXCIgKSxcblxuXHRycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLFxuXHRyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cblx0bWF0Y2hFeHByID0ge1xuXHRcdFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiQ0xBU1NcIjogbmV3IFJlZ0V4cCggXCJeXFxcXC4oXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBpZGVudGlmaWVyICsgXCJ8WypdKVwiICksXG5cdFx0XCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuXHRcdFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuXHRcdFwiQ0hJTERcIjogbmV3IFJlZ0V4cCggXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG5cdFx0XCJib29sXCI6IG5ldyBSZWdFeHAoIFwiXig/OlwiICsgYm9vbGVhbnMgKyBcIikkXCIsIFwiaVwiICksXG5cdFx0Ly8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG5cdFx0Ly8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuXHRcdFwibmVlZHNDb250ZXh0XCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArXG5cdFx0XHR3aGl0ZXNwYWNlICsgXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcblx0fSxcblxuXHRyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0cmhlYWRlciA9IC9eaFxcZCQvaSxcblxuXHRybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuXHQvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcblx0cnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXG5cdHJzaWJsaW5nID0gL1srfl0vLFxuXHRyZXNjYXBlID0gLyd8XFxcXC9nLFxuXG5cdC8vIENTUyBlc2NhcGVzIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcblx0cnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98KFwiICsgd2hpdGVzcGFjZSArIFwiKXwuKVwiLCBcImlnXCIgKSxcblx0ZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkge1xuXHRcdHZhciBoaWdoID0gXCIweFwiICsgZXNjYXBlZCAtIDB4MTAwMDA7XG5cdFx0Ly8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnRcblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI0XG5cdFx0Ly8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArXCIweFwiXG5cdFx0cmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgP1xuXHRcdFx0ZXNjYXBlZCA6XG5cdFx0XHRoaWdoIDwgMCA/XG5cdFx0XHRcdC8vIEJNUCBjb2RlcG9pbnRcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6XG5cdFx0XHRcdC8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKVxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fTtcblxuLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0IClcbnRyeSB7XG5cdHB1c2guYXBwbHkoXG5cdFx0KGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLFxuXHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdCk7XG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0YXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcbn0gY2F0Y2ggKCBlICkge1xuXHRwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cblx0XHQvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuXHRcdH0gOlxuXG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0Ly8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG5cdFx0XHR3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG5cdFx0XHR0YXJnZXQubGVuZ3RoID0gaiAtIDE7XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHR2YXIgbSwgaSwgZWxlbSwgbmlkLCBuaWRzZWxlY3QsIG1hdGNoLCBncm91cHMsIG5ld1NlbGVjdG9yLFxuXHRcdG5ld0NvbnRleHQgPSBjb250ZXh0ICYmIGNvbnRleHQub3duZXJEb2N1bWVudCxcblxuXHRcdC8vIG5vZGVUeXBlIGRlZmF1bHRzIHRvIDksIHNpbmNlIGNvbnRleHQgZGVmYXVsdHMgdG8gZG9jdW1lbnRcblx0XHRub2RlVHlwZSA9IGNvbnRleHQgPyBjb250ZXh0Lm5vZGVUeXBlIDogOTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dFxuXHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiB8fCAhc2VsZWN0b3IgfHxcblx0XHRub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgKGFzIG9wcG9zZWQgdG8gZmlsdGVycykgaW4gSFRNTCBkb2N1bWVudHNcblx0aWYgKCAhc2VlZCApIHtcblxuXHRcdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHRcdH1cblx0XHRjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblxuXHRcdGlmICggZG9jdW1lbnRJc0hUTUwgKSB7XG5cblx0XHRcdC8vIElmIHRoZSBzZWxlY3RvciBpcyBzdWZmaWNpZW50bHkgc2ltcGxlLCB0cnkgdXNpbmcgYSBcImdldCpCeSpcIiBET00gbWV0aG9kXG5cdFx0XHQvLyAoZXhjZXB0aW5nIERvY3VtZW50RnJhZ21lbnQgY29udGV4dCwgd2hlcmUgdGhlIG1ldGhvZHMgZG9uJ3QgZXhpc3QpXG5cdFx0XHRpZiAoIG5vZGVUeXBlICE9PSAxMSAmJiAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkge1xuXG5cdFx0XHRcdC8vIElEIHNlbGVjdG9yXG5cdFx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb2N1bWVudCBjb250ZXh0XG5cdFx0XHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEVsZW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJlxuXHRcdFx0XHRcdFx0XHRjb250YWlucyggY29udGV4dCwgZWxlbSApICYmXG5cdFx0XHRcdFx0XHRcdGVsZW0uaWQgPT09IG0gKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUeXBlIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHNlbGVjdG9yICkgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0XHQvLyBDbGFzcyBzZWxlY3RvclxuXHRcdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiZcblx0XHRcdFx0XHRjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRha2UgYWR2YW50YWdlIG9mIHF1ZXJ5U2VsZWN0b3JBbGxcblx0XHRcdGlmICggc3VwcG9ydC5xc2EgJiZcblx0XHRcdFx0IWNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXSAmJlxuXHRcdFx0XHQoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXG5cdFx0XHRcdGlmICggbm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRcdFx0bmV3Q29udGV4dCA9IGNvbnRleHQ7XG5cdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBzZWxlY3RvcjtcblxuXHRcdFx0XHQvLyBxU0EgbG9va3Mgb3V0c2lkZSBFbGVtZW50IGNvbnRleHQsIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnRcblx0XHRcdFx0Ly8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgd29ya2Fyb3VuZCB0ZWNobmlxdWVcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgb2JqZWN0IGVsZW1lbnRzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHRcdC8vIENhcHR1cmUgdGhlIGNvbnRleHQgSUQsIHNldHRpbmcgaXQgZmlyc3QgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0aWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApKSApIHtcblx0XHRcdFx0XHRcdG5pZCA9IG5pZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIChuaWQgPSBleHBhbmRvKSApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdFx0XHRcdGkgPSBncm91cHMubGVuZ3RoO1xuXHRcdFx0XHRcdG5pZHNlbGVjdCA9IHJpZGVudGlmaWVyLnRlc3QoIG5pZCApID8gXCIjXCIgKyBuaWQgOiBcIltpZD0nXCIgKyBuaWQgKyBcIiddXCI7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRncm91cHNbaV0gPSBuaWRzZWxlY3QgKyBcIiBcIiArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCBcIixcIiApO1xuXG5cdFx0XHRcdFx0Ly8gRXhwYW5kIGNvbnRleHQgZm9yIHNpYmxpbmcgc2VsZWN0b3JzXG5cdFx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8XG5cdFx0XHRcdFx0XHRjb250ZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBuZXdTZWxlY3RvciApIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cyxcblx0XHRcdFx0XHRcdFx0bmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fSBjYXRjaCAoIHFzYUVycm9yICkge1xuXHRcdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0XHRpZiAoIG5pZCA9PT0gZXhwYW5kbyApIHtcblx0XHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoIFwiaWRcIiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFsbCBvdGhlcnNcblx0cmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nLCBvYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoXG4gKlx0cHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aClcbiAqXHRkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkge1xuXHR2YXIga2V5cyA9IFtdO1xuXG5cdGZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkge1xuXHRcdC8vIFVzZSAoa2V5ICsgXCIgXCIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpXG5cdFx0aWYgKCBrZXlzLnB1c2goIGtleSArIFwiIFwiICkgPiBFeHByLmNhY2hlTGVuZ3RoICkge1xuXHRcdFx0Ly8gT25seSBrZWVwIHRoZSBtb3N0IHJlY2VudCBlbnRyaWVzXG5cdFx0XHRkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdO1xuXHRcdH1cblx0XHRyZXR1cm4gKGNhY2hlWyBrZXkgKyBcIiBcIiBdID0gdmFsdWUpO1xuXHR9XG5cdHJldHVybiBjYWNoZTtcbn1cblxuLyoqXG4gKiBNYXJrIGEgZnVuY3Rpb24gZm9yIHNwZWNpYWwgdXNlIGJ5IFNpenpsZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcbiAqL1xuZnVuY3Rpb24gbWFya0Z1bmN0aW9uKCBmbiApIHtcblx0Zm5bIGV4cGFuZG8gXSA9IHRydWU7XG5cdHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUGFzc2VkIHRoZSBjcmVhdGVkIGRpdiBhbmQgZXhwZWN0cyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG5cdHRyeSB7XG5cdFx0cmV0dXJuICEhZm4oIGRpdiApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZGl2LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZGl2ICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZFxuICovXG5mdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkge1xuXHR2YXIgYXJyID0gYXR0cnMuc3BsaXQoXCJ8XCIpLFxuXHRcdGkgPSBhcnIubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZFxuXHRpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fVxuXG5cdC8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzXG5cdGRvY3VtZW50ID0gZG9jO1xuXHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTtcblxuXHQvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlXG5cdC8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9ycyAoalF1ZXJ5ICMxMzkzNilcblx0aWYgKCAocGFyZW50ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHBhcmVudC50b3AgIT09IHBhcmVudCApIHtcblx0XHQvLyBTdXBwb3J0OiBJRSAxMVxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5XG5cdFx0fSBlbHNlIGlmICggcGFyZW50LmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0cGFyZW50LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHR9XG5cdH1cblxuXHQvKiBBdHRyaWJ1dGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBTdXBwb3J0OiBJRTw4XG5cdC8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllc1xuXHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZGl2LmNsYXNzTmFtZSA9IFwiaVwiO1xuXHRcdHJldHVybiAhZGl2LmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcblx0fSk7XG5cblx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpICk7XG5cdFx0cmV0dXJuICFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gU3VwcG9ydDogSUU8OVxuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gSUQgZmluZCBhbmQgZmlsdGVyXG5cdGlmICggc3VwcG9ydC5nZXRCeUlkICkge1xuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIG0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHRyZXR1cm4gbSA/IFsgbSBdIDogW107XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU2Lzdcblx0XHQvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG5cdFx0ZGVsZXRlIEV4cHIuZmluZFtcIklEXCJdO1xuXG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9ICBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIG5vZGUgPSB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIFFTQS9tYXRjaGVzU2VsZWN0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnRcblxuXHQvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KVxuXHRyYnVnZ3lNYXRjaGVzID0gW107XG5cblx0Ly8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSlcblx0Ly8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yXG5cdC8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWVcblx0Ly8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3Jcblx0Ly8gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG5cdHJidWdneVFTQSA9IFtdO1xuXG5cdGlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICkpICkge1xuXHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRcdC8vIFNlbGVjdCBpcyBzZXQgdG8gZW1wdHkgc3RyaW5nIG9uIHB1cnBvc2Vcblx0XHRcdC8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseVxuXHRcdFx0Ly8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsXG5cdFx0XHQvLyBzaW5jZSBpdHMgcHJlc2VuY2Ugc2hvdWxkIGJlIGVub3VnaFxuXHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlubmVySFRNTCA9IFwiPGEgaWQ9J1wiICsgZXhwYW5kbyArIFwiJz48L2E+XCIgK1xuXHRcdFx0XHRcIjxzZWxlY3QgaWQ9J1wiICsgZXhwYW5kbyArIFwiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPlwiICtcblx0XHRcdFx0XCI8b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTgsIE9wZXJhIDExLTEyLjE2XG5cdFx0XHQvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9XG5cdFx0XHQvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCBcInNhZmVcIiBmb3IgV2luUlRcblx0XHRcdC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbKl4kXT1cIiArIHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgXCJ2YWx1ZVwiIGFyZSBub3QgdHJlYXRlZCBjb3JyZWN0bHlcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86dmFsdWV8XCIgKyBib29sZWFucyArIFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcIkRcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZVxuXHRcdFx0aWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwibmFtZVwiICsgd2hpdGVzcGFjZSArIFwiKlsqXiR8IX5dPz1cIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGRiAzLjUgLSA6ZW5hYmxlZC86ZGlzYWJsZWQgYW5kIGhpZGRlbiBlbGVtZW50cyAoaGlkZGVuIGVsZW1lbnRzIGFyZSBzdGlsbCBlbmFibGVkKVxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRkaXYucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIik7XG5cdFx0XHRyYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRcdC8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvclxuXHRcdFx0Ly8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcblx0XHRcdHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggPSBtYXRjaGVzLmNhbGwoIGRpdiwgXCJkaXZcIiApO1xuXG5cdFx0XHQvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uXG5cdFx0XHQvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkXG5cdFx0XHRtYXRjaGVzLmNhbGwoIGRpdiwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9KTtcblx0fVxuXG5cdHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0aWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdHJldHVybiBhID09PSBkb2N1bWVudCA/IC0xIDpcblx0XHRcdFx0YiA9PT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2N1bWVudDtcbn07XG5cblNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xufTtcblxuU2l6emxlLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBlbGVtLCBleHByICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHQvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWRcblx0ZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXG5cdGlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHQhY29tcGlsZXJDYWNoZVsgZXhwciArIFwiIFwiIF0gJiZcblx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0KCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkge1xuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuXHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fFxuXHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge31cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0c29ydElucHV0ID0gbnVsbDtcblxuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0dmFyIG5vZGUsXG5cdFx0cmV0ID0gXCJcIixcblx0XHRpID0gMCxcblx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0aWYgKCAhbm9kZVR5cGUgKSB7XG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcblx0fVxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cblx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHR1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHQvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuXHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuXHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0fVxuXHR9LFxuXG5cdGZpbHRlcjoge1xuXG5cdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuXHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSxcblx0XHRcdFx0XHRcdGRpZmYgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXg7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pXG5cdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0Ly8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuXHRcdFx0Ly8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuXHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdGlmICggZm5bIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG5cdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm47XG5cdFx0fVxuXHR9LFxuXG5cdHBzZXVkb3M6IHtcblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pIDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0bWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApO1xuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0Ly8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcblx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0Ly8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG5cdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlO1xuXHRcdH0sXG5cblx0XHRcImRpc2FibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAobm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHQvLyBDb250ZW50c1xuXHRcdFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9KSxcblxuXHRcdFwibGFzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9KSxcblxuXHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDE7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbXCJudGhcIl0gPSBFeHByLnBzZXVkb3NbXCJlcVwiXTtcblxuLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3NcbmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG59XG5mb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xufVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbmZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fVxuc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7XG5FeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG50b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuXHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLFxuXHRcdGNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoIGNhY2hlZCApIHtcblx0XHRyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApO1xuXHR9XG5cblx0c29GYXIgPSBzZWxlY3Rvcjtcblx0Z3JvdXBzID0gW107XG5cdHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuXHR3aGlsZSAoIHNvRmFyICkge1xuXG5cdFx0Ly8gQ29tbWEgYW5kIGZpcnN0IHJ1blxuXHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHR9XG5cdFx0XHRncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgXCIgXCIgKVxuXHRcdFx0fSk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIW1hdGNoZWQgKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3Ncblx0Ly8gaWYgd2UncmUganVzdCBwYXJzaW5nXG5cdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRyZXR1cm4gcGFyc2VPbmx5ID9cblx0XHRzb0Zhci5sZW5ndGggOlxuXHRcdHNvRmFyID9cblx0XHRcdFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSBcInBhcmVudE5vZGVcIixcblx0XHRkb25lTmFtZSA9IGRvbmUrKztcblxuXHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdGlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGRpciBdKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0XHRcdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0XHRcdFx0XHRcdHhtbCA9ICFkb2N1bWVudElzSFRNTDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlZENvdW50LS07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgXG5cdFx0XHQvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmVcblx0XHRcdC8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuXG5cdFx0XHQvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyBcIjBcIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0XG5cdFx0XHQvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIFwiMDBcIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc29cblx0XHRcdC8vIG51bWVyaWNhbGx5IHplcm8uXG5cdFx0XHRpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWRcblx0Ly8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KVxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0IWNvbnRleHQgfHwgcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5cblxuXG52YXIgZGlyID0gZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdHZhciBtYXRjaGVkID0gW10sXG5cdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICggL148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvICk7XG5cblxuXG52YXIgcmlzU2ltcGxlID0gL14uW146I1xcW1xcLixdKiQvO1xuXG4vLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdFxuZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7XG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0XHRyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7XG5cdFx0fSApO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSApO1xuXG5cdH1cblxuXHRpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0aWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG5cdFx0fVxuXG5cdFx0cXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdDtcblx0fSApO1xufVxuXG5qUXVlcnkuZmlsdGVyID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1zLCBub3QgKSB7XG5cdHZhciBlbGVtID0gZWxlbXNbIDAgXTtcblxuXHRpZiAoIG5vdCApIHtcblx0XHRleHByID0gXCI6bm90KFwiICsgZXhwciArIFwiKVwiO1xuXHR9XG5cblx0cmV0dXJuIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxID9cblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOlxuXHRcdGpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0XHR9ICkgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBpLFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSApICk7XG5cdFx0fVxuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHR9XG5cblx0XHQvLyBOZWVkZWQgYmVjYXVzZSAkKCBzZWxlY3RvciwgY29udGV4dCApIGJlY29tZXMgJCggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yIClcblx0XHRyZXQgPSB0aGlzLnB1c2hTdGFjayggbGVuID4gMSA/IGpRdWVyeS51bmlxdWUoIHJldCApIDogcmV0ICk7XG5cdFx0cmV0LnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuc2VsZWN0b3IgKyBcIiBcIiArIHNlbGVjdG9yIDogc2VsZWN0b3I7XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0dGhpcyxcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0dHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0ZmFsc2Vcblx0XHQpLmxlbmd0aDtcblx0fVxufSApO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gTWV0aG9kIGluaXQoKSBhY2NlcHRzIGFuIGFsdGVybmF0ZSByb290alF1ZXJ5XG5cdFx0Ly8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKVxuXHRcdHJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7XG5cblx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpZiAoIHNlbGVjdG9yWyAwIF0gPT09IFwiPFwiICYmXG5cdFx0XHRcdHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmXG5cdFx0XHRcdHNlbGVjdG9yLmxlbmd0aCA+PSAzICkge1xuXG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAoIG1hdGNoWyAxIF0gfHwgIWNvbnRleHQgKSApIHtcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSlcblx0XHRcdFx0aWYgKCBtYXRjaFsgMSBdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDtcblxuXHRcdFx0XHRcdC8vIE9wdGlvbiB0byBydW4gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuXHRcdFx0XHRcdFx0bWF0Y2hbIDEgXSxcblx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHR0cnVlXG5cdFx0XHRcdFx0KSApO1xuXG5cdFx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwsIHByb3BzKVxuXHRcdFx0XHRcdGlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsgMSBdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQmxhY2tiZXJyeSA0LjZcblx0XHRcdFx0XHQvLyBnRUJJRCByZXR1cm5zIG5vZGVzIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKCM2OTYzKVxuXHRcdFx0XHRcdGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWyAwIF0gPSBlbGVtO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRoaXMuY29udGV4dCA9IGRvY3VtZW50O1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKVxuXHRcdFx0fSBlbHNlIGlmICggIWNvbnRleHQgfHwgY29udGV4dC5qcXVlcnkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGNvbnRleHQgfHwgcm9vdCApLmZpbmQoIHNlbGVjdG9yICk7XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCBjb250ZXh0KVxuXHRcdFx0Ly8gKHdoaWNoIGlzIGp1c3QgZXF1aXZhbGVudCB0bzogJChjb250ZXh0KS5maW5kKGV4cHIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvciggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHQvLyBIQU5ETEU6ICQoRE9NRWxlbWVudClcblx0XHR9IGVsc2UgaWYgKCBzZWxlY3Rvci5ub2RlVHlwZSApIHtcblx0XHRcdHRoaXMuY29udGV4dCA9IHRoaXNbIDAgXSA9IHNlbGVjdG9yO1xuXHRcdFx0dGhpcy5sZW5ndGggPSAxO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHQvLyBIQU5ETEU6ICQoZnVuY3Rpb24pXG5cdFx0Ly8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5XG5cdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRyZXR1cm4gcm9vdC5yZWFkeSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0cm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRzZWxlY3RvciggalF1ZXJ5ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3Rvci5zZWxlY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yLnNlbGVjdG9yO1xuXHRcdFx0dGhpcy5jb250ZXh0ID0gc2VsZWN0b3IuY29udGV4dDtcblx0XHR9XG5cblx0XHRyZXR1cm4galF1ZXJ5Lm1ha2VBcnJheSggc2VsZWN0b3IsIHRoaXMgKTtcblx0fTtcblxuLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvblxuaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47XG5cbi8vIEluaXRpYWxpemUgY2VudHJhbCByZWZlcmVuY2VcbnJvb3RqUXVlcnkgPSBqUXVlcnkoIGRvY3VtZW50ICk7XG5cblxudmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLFxuXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkge1xuXHRcdHZhciB0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSxcblx0XHRcdGwgPSB0YXJnZXRzLmxlbmd0aDtcblxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzWyBpIF0gKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cblx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlIDwgMTEgJiYgKCBwb3MgP1xuXHRcdFx0XHRcdHBvcy5pbmRleCggY3VyICkgPiAtMSA6XG5cblx0XHRcdFx0XHQvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGVcblx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXG5cdFx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTtcblx0fSxcblxuXHQvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluIHRoZSBzZXRcblx0aW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnRcblx0XHRpZiAoICFlbGVtICkge1xuXHRcdFx0cmV0dXJuICggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xO1xuXHRcdH1cblxuXHRcdC8vIEluZGV4IGluIHNlbGVjdG9yXG5cdFx0aWYgKCB0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBpbmRleE9mLmNhbGwoIGpRdWVyeSggZWxlbSApLCB0aGlzWyAwIF0gKTtcblx0XHR9XG5cblx0XHQvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnRcblx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCB0aGlzLFxuXG5cdFx0XHQvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWRcblx0XHRcdGVsZW0uanF1ZXJ5ID8gZWxlbVsgMCBdIDogZWxlbVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKFxuXHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxuXHRcdCk7XG5cdH1cbn0gKTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKCBjdXIgPSBjdXJbIGRpciBdICkgJiYgY3VyLm5vZGVUeXBlICE9PSAxICkge31cblx0cmV0dXJuIGN1cjtcbn1cblxualF1ZXJ5LmVhY2goIHtcblx0cGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7XG5cdH0sXG5cdHBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiICk7XG5cdH0sXG5cdHBhcmVudHNVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0c2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggKCBlbGVtLnBhcmVudE5vZGUgfHwge30gKS5maXJzdENoaWxkLCBlbGVtICk7XG5cdH0sXG5cdGNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZ3MoIGVsZW0uZmlyc3RDaGlsZCApO1xuXHR9LFxuXHRjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50IHx8IGpRdWVyeS5tZXJnZSggW10sIGVsZW0uY2hpbGROb2RlcyApO1xuXHR9XG59LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG5cdFx0aWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSBcIlVudGlsXCIgKSB7XG5cdFx0XHRzZWxlY3RvciA9IHVudGlsO1xuXHRcdH1cblxuXHRcdGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0bWF0Y2hlZCA9IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBtYXRjaGVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzXG5cdFx0XHRpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdG1hdGNoZWQucmV2ZXJzZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZCApO1xuXHR9O1xufSApO1xudmFyIHJub3R3aGl0ZSA9ICggL1xcUysvZyApO1xuXG5cblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXNcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7XG5cdHZhciBvYmplY3QgPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0gKTtcblx0cmV0dXJuIG9iamVjdDtcbn1cblxuLypcbiAqIENyZWF0ZSBhIGNhbGxiYWNrIGxpc3QgdXNpbmcgdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICpcbiAqXHRvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93XG4gKlx0XHRcdHRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3RcbiAqXG4gKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZVxuICogXCJmaXJlZFwiIG11bHRpcGxlIHRpbWVzLlxuICpcbiAqIFBvc3NpYmxlIG9wdGlvbnM6XG4gKlxuICpcdG9uY2U6XHRcdFx0d2lsbCBlbnN1cmUgdGhlIGNhbGxiYWNrIGxpc3QgY2FuIG9ubHkgYmUgZmlyZWQgb25jZSAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHRtZW1vcnk6XHRcdFx0d2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZFxuICpcdFx0XHRcdFx0YWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgXCJtZW1vcml6ZWRcIlxuICpcdFx0XHRcdFx0dmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdHVuaXF1ZTpcdFx0XHR3aWxsIGVuc3VyZSBhIGNhbGxiYWNrIGNhbiBvbmx5IGJlIGFkZGVkIG9uY2UgKG5vIGR1cGxpY2F0ZSBpbiB0aGUgbGlzdClcbiAqXG4gKlx0c3RvcE9uRmFsc2U6XHRpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2VcbiAqXG4gKi9cbmpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHQvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkXG5cdC8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdClcblx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiID9cblx0XHRjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcblx0XHRmaXJpbmcsXG5cblx0XHQvLyBMYXN0IGZpcmUgdmFsdWUgZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0c1xuXHRcdG1lbW9yeSxcblxuXHRcdC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IHdhcyBhbHJlYWR5IGZpcmVkXG5cdFx0ZmlyZWQsXG5cblx0XHQvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nXG5cdFx0bG9ja2VkLFxuXG5cdFx0Ly8gQWN0dWFsIGNhbGxiYWNrIGxpc3Rcblx0XHRsaXN0ID0gW10sXG5cblx0XHQvLyBRdWV1ZSBvZiBleGVjdXRpb24gZGF0YSBmb3IgcmVwZWF0YWJsZSBsaXN0c1xuXHRcdHF1ZXVlID0gW10sXG5cblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZClcblx0XHRmaXJpbmdJbmRleCA9IC0xLFxuXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuZm9yY2Ugc2luZ2xlLWZpcmluZ1xuXHRcdFx0bG9ja2VkID0gb3B0aW9ucy5vbmNlO1xuXG5cdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdGZpcmVkID0gZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHR3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiZcblx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmVcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdGlmICggbG9ja2VkICkge1xuXG5cdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0aWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiBqUXVlcnkudHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID9cblx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdC8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlc1xuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHQvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGxvY2tlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWxvY2tlZDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHNcblx0XHRcdGZpcmVXaXRoOiBmdW5jdGlvbiggY29udGV4dCwgYXJncyApIHtcblx0XHRcdFx0aWYgKCAhbG9ja2VkICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0cXVldWUucHVzaCggYXJncyApO1xuXHRcdFx0XHRcdGlmICggIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDYWxsIGFsbCB0aGUgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuZmlyZVdpdGgoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgdGhlIGNhbGxiYWNrcyBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQgYXQgbGVhc3Qgb25jZVxuXHRcdFx0ZmlyZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFmaXJlZDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdHJldHVybiBzZWxmO1xufTtcblxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0RGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkge1xuXHRcdHZhciB0dXBsZXMgPSBbXG5cblx0XHRcdFx0Ly8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGxpc3RlbmVyIGxpc3QsIGZpbmFsIHN0YXRlXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCBcInJlamVjdGVkXCIgXSxcblx0XHRcdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSBdXG5cdFx0XHRdLFxuXHRcdFx0c3RhdGUgPSBcInBlbmRpbmdcIixcblx0XHRcdHByb21pc2UgPSB7XG5cdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRoZW46IGZ1bmN0aW9uKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLyApIHtcblx0XHRcdFx0XHR2YXIgZm5zID0gYXJndW1lbnRzO1xuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdFx0XHRcdFx0dmFyIGZuID0galF1ZXJ5LmlzRnVuY3Rpb24oIGZuc1sgaSBdICkgJiYgZm5zWyBpIF07XG5cblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWRbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSBmb3IgZm9yd2FyZGluZyBhY3Rpb25zIHRvIG5ld0RlZmVyXG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC5wcm9taXNlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXJbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHNcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRmbnMgPSBudWxsO1xuXHRcdFx0XHRcdH0gKS5wcm9taXNlKCk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZFxuXHRcdFx0XHQvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0XG5cdFx0XHRcdHByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZGVmZXJyZWQgPSB7fTtcblxuXHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRwcm9taXNlLnBpcGUgPSBwcm9taXNlLnRoZW47XG5cblx0XHQvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzXG5cdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0dmFyIGxpc3QgPSB0dXBsZVsgMiBdLFxuXHRcdFx0XHRzdGF0ZVN0cmluZyA9IHR1cGxlWyAzIF07XG5cblx0XHRcdC8vIHByb21pc2VbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSA9IGxpc3QuYWRkXG5cdFx0XHRwcm9taXNlWyB0dXBsZVsgMSBdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSggdGhpcyA9PT0gZGVmZXJyZWQgPyBwcm9taXNlIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSApO1xuXG5cdFx0Ly8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlXG5cdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG5cdFx0Ly8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueVxuXHRcdGlmICggZnVuYyApIHtcblx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGRvbmUhXG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9LFxuXG5cdC8vIERlZmVycmVkIGhlbHBlclxuXHR3aGVuOiBmdW5jdGlvbiggc3Vib3JkaW5hdGUgLyogLCAuLi4sIHN1Ym9yZGluYXRlTiAqLyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRsZW5ndGggPSByZXNvbHZlVmFsdWVzLmxlbmd0aCxcblxuXHRcdFx0Ly8gdGhlIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlc1xuXHRcdFx0cmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8XG5cdFx0XHRcdCggc3Vib3JkaW5hdGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHN1Ym9yZGluYXRlLnByb21pc2UgKSApID8gbGVuZ3RoIDogMCxcblxuXHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZC5cblx0XHRcdC8vIElmIHJlc29sdmVWYWx1ZXMgY29uc2lzdCBvZiBvbmx5IGEgc2luZ2xlIERlZmVycmVkLCBqdXN0IHVzZSB0aGF0LlxuXHRcdFx0ZGVmZXJyZWQgPSByZW1haW5pbmcgPT09IDEgPyBzdWJvcmRpbmF0ZSA6IGpRdWVyeS5EZWZlcnJlZCgpLFxuXG5cdFx0XHQvLyBVcGRhdGUgZnVuY3Rpb24gZm9yIGJvdGggcmVzb2x2ZSBhbmQgcHJvZ3Jlc3MgdmFsdWVzXG5cdFx0XHR1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGksIGNvbnRleHRzLCB2YWx1ZXMgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0Y29udGV4dHNbIGkgXSA9IHRoaXM7XG5cdFx0XHRcdFx0dmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7XG5cdFx0XHRcdFx0aWYgKCB2YWx1ZXMgPT09IHByb2dyZXNzVmFsdWVzICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoICEoIC0tcmVtYWluaW5nICkgKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cblx0XHRcdHByb2dyZXNzVmFsdWVzLCBwcm9ncmVzc0NvbnRleHRzLCByZXNvbHZlQ29udGV4dHM7XG5cblx0XHQvLyBBZGQgbGlzdGVuZXJzIHRvIERlZmVycmVkIHN1Ym9yZGluYXRlczsgdHJlYXQgb3RoZXJzIGFzIHJlc29sdmVkXG5cdFx0aWYgKCBsZW5ndGggPiAxICkge1xuXHRcdFx0cHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cHJvZ3Jlc3NDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSApICkge1xuXHRcdFx0XHRcdHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlKClcblx0XHRcdFx0XHRcdC5wcm9ncmVzcyggdXBkYXRlRnVuYyggaSwgcHJvZ3Jlc3NDb250ZXh0cywgcHJvZ3Jlc3NWYWx1ZXMgKSApXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC0tcmVtYWluaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlclxuXHRcdGlmICggIXJlbWFpbmluZyApIHtcblx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuXHR9XG59ICk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cblx0Ly8gQWRkIHRoZSBjYWxsYmFja1xuXHRqUXVlcnkucmVhZHkucHJvbWlzZSgpLmRvbmUoIGZuICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG5cdGhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7XG5cdFx0aWYgKCBob2xkICkge1xuXHRcdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkucmVhZHkoIHRydWUgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXG5cdFx0Ly8gVHJpZ2dlciBhbnkgYm91bmQgcmVhZHkgZXZlbnRzXG5cdFx0aWYgKCBqUXVlcnkuZm4udHJpZ2dlckhhbmRsZXIgKSB7XG5cdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkudHJpZ2dlckhhbmRsZXIoIFwicmVhZHlcIiApO1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLm9mZiggXCJyZWFkeVwiICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdGpRdWVyeS5yZWFkeSgpO1xufVxuXG5qUXVlcnkucmVhZHkucHJvbWlzZSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cdGlmICggIXJlYWR5TGlzdCApIHtcblxuXHRcdHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXG5cdFx0Ly8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWRcblx0XHQvLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBTdXBwb3J0OiBJRTktMTAgb25seVxuXHRcdC8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuXHRcdGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG5cdFx0XHQoIGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiICYmICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgKSApIHtcblxuXHRcdFx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cblx0XHRcdC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcdGZvciAoIGkgaW4ga2V5ICkge1xuXHRcdFx0YWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKFxuXHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY2hhaW5hYmxlID9cblx0XHRlbGVtcyA6XG5cblx0XHQvLyBHZXRzXG5cdFx0YnVsayA/XG5cdFx0XHRmbi5jYWxsKCBlbGVtcyApIDpcblx0XHRcdGxlbiA/IGZuKCBlbGVtc1sgMCBdLCBrZXkgKSA6IGVtcHR5R2V0O1xufTtcbnZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXG5cdC8vIEFjY2VwdHMgb25seTpcblx0Ly8gIC0gTm9kZVxuXHQvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFXG5cdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdC8vICAtIE9iamVjdFxuXHQvLyAgICAtIEFueVxuXHQvKiBqc2hpbnQgLVcwMTggKi9cblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXG5cdHJlZ2lzdGVyOiBmdW5jdGlvbiggb3duZXIsIGluaXRpYWwgKSB7XG5cdFx0dmFyIHZhbHVlID0gaW5pdGlhbCB8fCB7fTtcblxuXHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdC8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0Ly8gY29uZmlndXJhYmlsaXR5IG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHQvLyBkZWxldGVkIHdpdGggdGhlIGRlbGV0ZSBvcGVyYXRvclxuXHRcdH0gZWxzZSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG93bmVyLCB0aGlzLmV4cGFuZG8sIHtcblx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHR9ICk7XG5cdFx0fVxuXHRcdHJldHVybiBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdH0sXG5cdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdGlmICggIWFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIG93bmVyIG9iamVjdCBhbHJlYWR5IGhhcyBhIGNhY2hlXG5cdFx0dmFyIHZhbHVlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXG5cdFx0Ly8gSWYgbm90LCBjcmVhdGUgb25lXG5cdFx0aWYgKCAhdmFsdWUgKSB7XG5cdFx0XHR2YWx1ZSA9IHt9O1xuXG5cdFx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0XHQvLyBBbHdheXMgcmV0dXJuIGFuIGVtcHR5IG9iamVjdC5cblx0XHRcdGlmICggYWNjZXB0RGF0YSggb3duZXIgKSApIHtcblxuXHRcdFx0XHQvLyBJZiBpdCBpcyBhIG5vZGUgdW5saWtlbHkgdG8gYmUgc3RyaW5naWZ5LWVkIG9yIGxvb3BlZCBvdmVyXG5cdFx0XHRcdC8vIHVzZSBwbGFpbiBhc3NpZ25tZW50XG5cdFx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdmFsdWU7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5XG5cdFx0XHRcdC8vIGNvbmZpZ3VyYWJsZSBtdXN0IGJlIHRydWUgdG8gYWxsb3cgdGhlIHByb3BlcnR5IHRvIGJlXG5cdFx0XHRcdC8vIGRlbGV0ZWQgd2hlbiBkYXRhIGlzIHJlbW92ZWRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG93bmVyLCB0aGlzLmV4cGFuZG8sIHtcblx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZSxcblx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcblx0c2V0OiBmdW5jdGlvbiggb3duZXIsIGRhdGEsIHZhbHVlICkge1xuXHRcdHZhciBwcm9wLFxuXHRcdFx0Y2FjaGUgPSB0aGlzLmNhY2hlKCBvd25lciApO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCBrZXksIHZhbHVlIF0gYXJnc1xuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgZGF0YSBdID0gdmFsdWU7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIHsgcHJvcGVydGllcyB9IF0gYXJnc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdGNhY2hlWyBwcm9wIF0gPSBkYXRhWyBwcm9wIF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYWNoZTtcblx0fSxcblx0Z2V0OiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHRyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcy5jYWNoZSggb3duZXIgKSA6XG5cdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gJiYgb3duZXJbIHRoaXMuZXhwYW5kbyBdWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblxuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCggKCBrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKSApO1xuXHRcdH1cblxuXHRcdC8vIFdoZW4gdGhlIGtleSBpcyBub3QgYSBzdHJpbmcsIG9yIGJvdGggYSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly8gYXJlIHNwZWNpZmllZCwgc2V0IG9yIGV4dGVuZCAoZXhpc3Rpbmcgb2JqZWN0cykgd2l0aCBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIEFuIG9iamVjdCBvZiBwcm9wZXJ0aWVzXG5cdFx0Ly8gICAyLiBBIGtleSBhbmQgdmFsdWVcblx0XHQvL1xuXHRcdHRoaXMuc2V0KCBvd25lciwga2V5LCB2YWx1ZSApO1xuXG5cdFx0Ly8gU2luY2UgdGhlIFwic2V0XCIgcGF0aCBjYW4gaGF2ZSB0d28gcG9zc2libGUgZW50cnkgcG9pbnRzXG5cdFx0Ly8gcmV0dXJuIHRoZSBleHBlY3RlZCBkYXRhIGJhc2VkIG9uIHdoaWNoIHBhdGggd2FzIHRha2VuWypdXG5cdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGtleTtcblx0fSxcblx0cmVtb3ZlOiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHR2YXIgaSwgbmFtZSwgY2FtZWwsXG5cdFx0XHRjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdGlmICggY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhpcy5yZWdpc3Rlciggb3duZXIgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFN1cHBvcnQgYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBrZXlzXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCBrZXkgKSApIHtcblxuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHRcdC8vIFRyeSB0aGUgc3RyaW5nIGFzIGEga2V5IGJlZm9yZSBhbnkgbWFuaXB1bGF0aW9uXG5cdFx0XHRcdGlmICgga2V5IGluIGNhY2hlICkge1xuXHRcdFx0XHRcdG5hbWUgPSBbIGtleSwgY2FtZWwgXTtcblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGNyZWF0ZSBhbiBhcnJheSBieSBtYXRjaGluZyBub24td2hpdGVzcGFjZVxuXHRcdFx0XHRcdG5hbWUgPSBjYW1lbDtcblx0XHRcdFx0XHRuYW1lID0gbmFtZSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0XHRbIG5hbWUgXSA6ICggbmFtZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpID0gbmFtZS5sZW5ndGg7XG5cblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YVxuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHwgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PSAzNS00NStcblx0XHRcdC8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzXG5cdFx0XHQvLyBmcm9tIERPTSBub2Rlcywgc28gc2V0IHRvIHVuZGVmaW5lZCBpbnN0ZWFkXG5cdFx0XHQvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3XG5cdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWxldGUgb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHZhciBjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRyZXR1cm4gY2FjaGUgIT09IHVuZGVmaW5lZCAmJiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICk7XG5cdH1cbn07XG52YXIgZGF0YVByaXYgPSBuZXcgRGF0YSgpO1xuXG52YXIgZGF0YVVzZXIgPSBuZXcgRGF0YSgpO1xuXG5cblxuLy9cdEltcGxlbWVudGF0aW9uIFN1bW1hcnlcbi8vXG4vL1x0MS4gRW5mb3JjZSBBUEkgc3VyZmFjZSBhbmQgc2VtYW50aWMgY29tcGF0aWJpbGl0eSB3aXRoIDEuOS54IGJyYW5jaFxuLy9cdDIuIEltcHJvdmUgdGhlIG1vZHVsZSdzIG1haW50YWluYWJpbGl0eSBieSByZWR1Y2luZyB0aGUgc3RvcmFnZVxuLy9cdFx0cGF0aHMgdG8gYSBzaW5nbGUgbWVjaGFuaXNtLlxuLy9cdDMuIFVzZSB0aGUgc2FtZSBzaW5nbGUgbWVjaGFuaXNtIHRvIHN1cHBvcnQgXCJwcml2YXRlXCIgYW5kIFwidXNlclwiIGRhdGEuXG4vL1x0NC4gX05ldmVyXyBleHBvc2UgXCJwcml2YXRlXCIgZGF0YSB0byB1c2VyIGNvZGUgKFRPRE86IERyb3AgX2RhdGEsIF9yZW1vdmVEYXRhKVxuLy9cdDUuIEF2b2lkIGV4cG9zaW5nIGltcGxlbWVudGF0aW9uIGRldGFpbHMgb24gdXNlciBvYmplY3RzIChlZy4gZXhwYW5kbyBwcm9wZXJ0aWVzKVxuLy9cdDYuIFByb3ZpZGUgYSBjbGVhciBwYXRoIGZvciBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlIHRvIFdlYWtNYXAgaW4gMjAxNFxuXG52YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuXHRybXVsdGlEYXNoID0gL1tBLVpdL2c7XG5cbmZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0Ly8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlXG5cdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcblx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcblxuXHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdFx0XHRcdFx0K2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxuXHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBqUXVlcnkucGFyc2VKU09OKCBkYXRhICkgOlxuXHRcdFx0XHRcdGRhdGE7XG5cdFx0XHR9IGNhdGNoICggZSApIHt9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuXHRcdFx0ZGF0YVVzZXIuc2V0KCBlbGVtLCBrZXksIGRhdGEgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFVc2VyLnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9LFxuXG5cdC8vIFRPRE86IE5vdyB0aGF0IGFsbCBjYWxscyB0byBfZGF0YSBhbmQgX3JlbW92ZURhdGEgaGF2ZSBiZWVuIHJlcGxhY2VkXG5cdC8vIHdpdGggZGlyZWN0IGNhbGxzIHRvIGRhdGFQcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdF9yZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSApO1xuXG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhZGF0YVByaXYuZ2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiICkgKSB7XG5cdFx0XHRcdFx0aSA9IGF0dHJzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUxMStcblx0XHRcdFx0XHRcdC8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KVxuXHRcdFx0XHRcdFx0aWYgKCBhdHRyc1sgaSBdICkge1xuXHRcdFx0XHRcdFx0XHRuYW1lID0gYXR0cnNbIGkgXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAoIG5hbWUuaW5kZXhPZiggXCJkYXRhLVwiICkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLCBjYW1lbEtleTtcblxuXHRcdFx0Ly8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHlcblx0XHRcdC8vIChhbmQgdGhlcmVmb3JlIGhhcyBhbiBlbGVtZW50IGFwcGVhcnMgYXQgdGhpc1sgMCBdKSBhbmQgdGhlXG5cdFx0XHQvLyBgdmFsdWVgIHBhcmFtZXRlciB3YXMgbm90IHVuZGVmaW5lZC4gQW4gZW1wdHkgalF1ZXJ5IG9iamVjdFxuXHRcdFx0Ly8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbFxuXHRcdFx0Ly8gdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFuIGF0dGVtcHQgdG8gcmVhZCBhIGRhdGEgY2FjaGUgaXMgbWFkZS5cblx0XHRcdGlmICggZWxlbSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGtleSApIHx8XG5cblx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBkYXNoZWQga2V5IGlmIGl0IGV4aXN0cyAoZ2gtMjc3OSlcblx0XHRcdFx0XHQvLyBUaGlzIGlzIGZvciAyLjIueCBvbmx5XG5cdFx0XHRcdFx0ZGF0YVVzZXIuZ2V0KCBlbGVtLCBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJCZcIiApLnRvTG93ZXJDYXNlKCkgKTtcblxuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbWVsS2V5ID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyB3aXRoIHRoZSBrZXkgY2FtZWxpemVkXG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBGaXJzdCwgYXR0ZW1wdCB0byBzdG9yZSBhIGNvcHkgb3IgcmVmZXJlbmNlIG9mIGFueVxuXHRcdFx0XHQvLyBkYXRhIHRoYXQgbWlnaHQndmUgYmVlbiBzdG9yZSB3aXRoIGEgY2FtZWxDYXNlZCBrZXkuXG5cdFx0XHRcdHZhciBkYXRhID0gZGF0YVVzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywgY2FtZWxLZXksIHZhbHVlICk7XG5cblx0XHRcdFx0Ly8gKi4uLiBJbiB0aGUgY2FzZSBvZiBwcm9wZXJ0aWVzIHRoYXQgbWlnaHQgX2FjdHVhbGx5X1xuXHRcdFx0XHQvLyBoYXZlIGRhc2hlcywgd2UgbmVlZCB0byBhbHNvIHN0b3JlIGEgY29weSBvZiB0aGF0XG5cdFx0XHRcdC8vIHVuY2hhbmdlZCBwcm9wZXJ0eS5cblx0XHRcdFx0aWYgKCBrZXkuaW5kZXhPZiggXCItXCIgKSA+IC0xICYmIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSwgdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7XG5cdFx0XHRcdFx0cXVldWUgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEgKSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGRhdGEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHF1ZXVlIHx8IFtdO1xuXHRcdH1cblx0fSxcblxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSxcblx0XHRcdHN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLFxuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpLFxuXHRcdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSxcblx0XHRcdG5leHQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTtcblx0XHRcdH07XG5cblx0XHQvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsXG5cdFx0aWYgKCBmbiA9PT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRzdGFydExlbmd0aC0tO1xuXHRcdH1cblxuXHRcdGlmICggZm4gKSB7XG5cblx0XHRcdC8vIEFkZCBhIHByb2dyZXNzIHNlbnRpbmVsIHRvIHByZXZlbnQgdGhlIGZ4IHF1ZXVlIGZyb20gYmVpbmdcblx0XHRcdC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcblx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICkge1xuXHRcdFx0XHRxdWV1ZS51bnNoaWZ0KCBcImlucHJvZ3Jlc3NcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uXG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdGZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIE5vdCBwdWJsaWMgLSBnZW5lcmF0ZSBhIHF1ZXVlSG9va3Mgb2JqZWN0LCBvciByZXR1cm4gdGhlIGN1cnJlbnQgb25lXG5cdF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR2YXIga2V5ID0gdHlwZSArIFwicXVldWVIb29rc1wiO1xuXHRcdHJldHVybiBkYXRhUHJpdi5nZXQoIGVsZW0sIGtleSApIHx8IGRhdGFQcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICkuYWRkKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBbIHR5cGUgKyBcInF1ZXVlXCIsIGtleSBdICk7XG5cdFx0XHR9IClcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzIDpcblx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWyAwIF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdH0gKTtcblx0fSxcblx0Y2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHR9LFxuXG5cdC8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGVcblx0Ly8gYXJlIGVtcHRpZWQgKGZ4IGlzIHRoZSB0eXBlIGJ5IGRlZmF1bHQpXG5cdHByb21pc2U6IGZ1bmN0aW9uKCB0eXBlLCBvYmogKSB7XG5cdFx0dmFyIHRtcCxcblx0XHRcdGNvdW50ID0gMSxcblx0XHRcdGRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRlbGVtZW50cyA9IHRoaXMsXG5cdFx0XHRpID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRyZXNvbHZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggISggLS1jb3VudCApICkge1xuXHRcdFx0XHRcdGRlZmVyLnJlc29sdmVXaXRoKCBlbGVtZW50cywgWyBlbGVtZW50cyBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0b2JqID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG1wID0gZGF0YVByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59ICk7XG52YXIgcG51bSA9ICggL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8gKS5zb3VyY2U7XG5cbnZhciByY3NzTnVtID0gbmV3IFJlZ0V4cCggXCJeKD86KFsrLV0pPXwpKFwiICsgcG51bSArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIgKTtcblxuXG52YXIgY3NzRXhwYW5kID0gWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF07XG5cbnZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8XG5cdFx0XHQhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdHZhciBhZGp1c3RlZCxcblx0XHRzY2FsZSA9IDEsXG5cdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHdlZW4uY3VyKCk7IH0gOlxuXHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wLCBcIlwiICk7IH0sXG5cdFx0aW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLFxuXHRcdHVuaXQgPSB2YWx1ZVBhcnRzICYmIHZhbHVlUGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0aW5pdGlhbEluVW5pdCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiAraW5pdGlhbCApICYmXG5cdFx0XHRyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApO1xuXG5cdGlmICggaW5pdGlhbEluVW5pdCAmJiBpbml0aWFsSW5Vbml0WyAzIF0gIT09IHVuaXQgKSB7XG5cblx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0dW5pdCA9IHVuaXQgfHwgaW5pdGlhbEluVW5pdFsgMyBdO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdHZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdO1xuXG5cdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWwgfHwgMTtcblxuXHRcdGRvIHtcblxuXHRcdFx0Ly8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouXG5cdFx0XHQvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuXHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdC8vIEFkanVzdCBhbmQgYXBwbHlcblx0XHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7XG5cdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cblx0XHQvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKVxuXHRcdC8vIEJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2guXG5cdFx0fSB3aGlsZSAoXG5cdFx0XHRzY2FsZSAhPT0gKCBzY2FsZSA9IGN1cnJlbnRWYWx1ZSgpIC8gaW5pdGlhbCApICYmIHNjYWxlICE9PSAxICYmIC0tbWF4SXRlcmF0aW9uc1xuXHRcdCk7XG5cdH1cblxuXHRpZiAoIHZhbHVlUGFydHMgKSB7XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cblx0XHQvLyBBcHBseSByZWxhdGl2ZSBvZmZzZXQgKCs9Ly09KSBpZiBzcGVjaWZpZWRcblx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRpbml0aWFsSW5Vbml0ICsgKCB2YWx1ZVBhcnRzWyAxIF0gKyAxICkgKiB2YWx1ZVBhcnRzWyAyIF0gOlxuXHRcdFx0K3ZhbHVlUGFydHNbIDIgXTtcblx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHR0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7XG5cdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFkanVzdGVkO1xufVxudmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApO1xuXG52YXIgcnRhZ05hbWUgPSAoIC88KFtcXHc6LV0rKS8gKTtcblxudmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cblxuXG4vLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKVxudmFyIHdyYXBNYXAgPSB7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdG9wdGlvbjogWyAxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgXCI8L3NlbGVjdD5cIiBdLFxuXG5cdC8vIFhIVE1MIHBhcnNlcnMgZG8gbm90IG1hZ2ljYWxseSBpbnNlcnQgZWxlbWVudHMgaW4gdGhlXG5cdC8vIHNhbWUgd2F5IHRoYXQgdGFnIHNvdXAgcGFyc2VycyBkby4gU28gd2UgY2Fubm90IHNob3J0ZW5cblx0Ly8gdGhpcyBieSBvbWl0dGluZyA8dGJvZHk+IG9yIG90aGVyIHJlcXVpcmVkIGVsZW1lbnRzLlxuXHR0aGVhZDogWyAxLCBcIjx0YWJsZT5cIiwgXCI8L3RhYmxlPlwiIF0sXG5cdGNvbDogWyAyLCBcIjx0YWJsZT48Y29sZ3JvdXA+XCIsIFwiPC9jb2xncm91cD48L3RhYmxlPlwiIF0sXG5cdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0dGQ6IFsgMywgXCI8dGFibGU+PHRib2R5Pjx0cj5cIiwgXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXG5cdF9kZWZhdWx0OiBbIDAsIFwiXCIsIFwiXCIgXVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblxuXHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdC8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSlcblx0dmFyIHJldCA9IHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiID9cblx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuXG4vLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWRcbmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGRhdGFQcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sXG5cdFx0XHRcImdsb2JhbEV2YWxcIixcblx0XHRcdCFyZWZFbGVtZW50cyB8fCBkYXRhUHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sIFwiZ2xvYmFsRXZhbFwiIClcblx0XHQpO1xuXHR9XG59XG5cblxudmFyIHJodG1sID0gLzx8JiM/XFx3KzsvO1xuXG5mdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkge1xuXHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0bm9kZXMgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdGlmICggZWxlbSB8fCBlbGVtID09PSAwICkge1xuXG5cdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgUGhhbnRvbUpTPDJcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0aSA9IDA7XG5cdHdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7XG5cblx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkge1xuXHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMC00LjMsIFNhZmFyaTw9NS4xXG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBTYWZhcmk8PTUuMSwgQW5kcm9pZDw0LjJcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdGRpdi5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIjtcblx0c3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7XG59ICkoKTtcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkvO1xuXG5mdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG5cdHJldHVybiBmYWxzZTtcbn1cblxuLy8gU3VwcG9ydDogSUU5XG4vLyBTZWUgIzEzMzkzIGZvciBtb3JlIGluZm9cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbmZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdHZhciBvcmlnRm4sIHR5cGU7XG5cblx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdG9uKCBlbGVtLCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG5cdFx0fVxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblxuXHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgZGF0YSwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggb25lID09PSAxICkge1xuXHRcdG9yaWdGbiA9IGZuO1xuXHRcdGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdHJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH07XG5cblx0XHQvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuXHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHR9XG5cdHJldHVybiBlbGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0fSApO1xufVxuXG4vKlxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLlxuICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cbiAqL1xualF1ZXJ5LmV2ZW50ID0ge1xuXG5cdGdsb2JhbDoge30sXG5cblx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXG5cdFx0dmFyIGhhbmRsZU9iakluLCBldmVudEhhbmRsZSwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107XG5cdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTtcblx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsgMiBdICYmXG5cdFx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApO1xuXG5cdFx0XHQvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzXG5cdFx0XHRvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBqIF07XG5cblx0XHRcdFx0aWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJlxuXHRcdFx0XHRcdCggIWhhbmRsZXIgfHwgaGFuZGxlci5ndWlkID09PSBoYW5kbGVPYmouZ3VpZCApICYmXG5cdFx0XHRcdFx0KCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJlxuXHRcdFx0XHRcdCggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHxcblx0XHRcdFx0XHRcdHNlbGVjdG9yID09PSBcIioqXCIgJiYgaGFuZGxlT2JqLnNlbGVjdG9yICkgKSB7XG5cdFx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7XG5cblx0XHRcdFx0XHRpZiAoIGhhbmRsZU9iai5zZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBzcGVjaWFsLnJlbW92ZSApIHtcblx0XHRcdFx0XHRcdHNwZWNpYWwucmVtb3ZlLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0XG5cdFx0XHQvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycylcblx0XHRcdGlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRcdGlmICggIXNwZWNpYWwudGVhcmRvd24gfHxcblx0XHRcdFx0XHRzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIGRhdGEgYW5kIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJoYW5kbGUgZXZlbnRzXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0ZGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdC8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdFxuXHRcdGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKTtcblxuXHRcdHZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaixcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWyAwIF0gPSBldmVudDtcblx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cblx0XHQvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG5cdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhhbmRsZXJzXG5cdFx0aGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG5cdFx0Ly8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXNcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07XG5cblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoIGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdICkgJiZcblx0XHRcdFx0IWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblxuXHRcdFx0XHRcdGV2ZW50LmhhbmRsZU9iaiA9IGhhbmRsZU9iajtcblx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cblx0XHRcdFx0XHRyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggcmV0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gU3VwcG9ydCAoYXQgbGVhc3QpOiBDaHJvbWUsIElFOVxuXHRcdC8vIEZpbmQgZGVsZWdhdGUgaGFuZGxlcnNcblx0XHQvLyBCbGFjay1ob2xlIFNWRyA8dXNlPiBpbnN0YW5jZSB0cmVlcyAoIzEzMTgwKVxuXHRcdC8vXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDw9NDIrXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgaW4gRkYgYnV0IGRvbid0IGJsb2NrIElFIHJhZGlvIGV2ZW50cyAoIzM4NjEsIGdoLTIzNDMpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJlxuXHRcdFx0KCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgfHwgaXNOYU4oIGV2ZW50LmJ1dHRvbiApIHx8IGV2ZW50LmJ1dHRvbiA8IDEgKSApIHtcblxuXHRcdFx0Zm9yICggOyBjdXIgIT09IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgY2hlY2sgbm9uLWVsZW1lbnRzICgjMTMyMDgpXG5cdFx0XHRcdC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KVxuXHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAoIGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgKSApIHtcblx0XHRcdFx0XHRtYXRjaGVzID0gW107XG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdO1xuXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKVxuXHRcdFx0XHRcdFx0c2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgXCIgXCI7XG5cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID9cblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+IC0xIDpcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiB0aGlzLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHQvLyBJbmNsdWRlcyBzb21lIGV2ZW50IHByb3BzIHNoYXJlZCBieSBLZXlFdmVudCBhbmQgTW91c2VFdmVudFxuXHRwcm9wczogKCBcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlIFwiICtcblx0XHRcIm1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIiApLnNwbGl0KCBcIiBcIiApLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdCggXCIgXCIgKSxcblx0XHRmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7XG5cblx0XHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdFx0aWYgKCBldmVudC53aGljaCA9PSBudWxsICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9IG9yaWdpbmFsLmNoYXJDb2RlICE9IG51bGwgPyBvcmlnaW5hbC5jaGFyQ29kZSA6IG9yaWdpbmFsLmtleUNvZGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0bW91c2VIb29rczoge1xuXHRcdHByb3BzOiAoIFwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBcIiArXG5cdFx0XHRcInNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIiApLnNwbGl0KCBcIiBcIiApLFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblx0XHRcdHZhciBldmVudERvYywgZG9jLCBib2R5LFxuXHRcdFx0XHRidXR0b24gPSBvcmlnaW5hbC5idXR0b247XG5cblx0XHRcdC8vIENhbGN1bGF0ZSBwYWdlWC9ZIGlmIG1pc3NpbmcgYW5kIGNsaWVudFgvWSBhdmFpbGFibGVcblx0XHRcdGlmICggZXZlbnQucGFnZVggPT0gbnVsbCAmJiBvcmlnaW5hbC5jbGllbnRYICE9IG51bGwgKSB7XG5cdFx0XHRcdGV2ZW50RG9jID0gZXZlbnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cdFx0XHRcdGRvYyA9IGV2ZW50RG9jLmRvY3VtZW50RWxlbWVudDtcblx0XHRcdFx0Ym9keSA9IGV2ZW50RG9jLmJvZHk7XG5cblx0XHRcdFx0ZXZlbnQucGFnZVggPSBvcmlnaW5hbC5jbGllbnRYICtcblx0XHRcdFx0XHQoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLVxuXHRcdFx0XHRcdCggZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDAgKTtcblx0XHRcdFx0ZXZlbnQucGFnZVkgPSBvcmlnaW5hbC5jbGllbnRZICtcblx0XHRcdFx0XHQoIGRvYyAmJiBkb2Muc2Nyb2xsVG9wICB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsVG9wICB8fCAwICkgLVxuXHRcdFx0XHRcdCggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblxuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGZvY3VzOiB7XG5cblx0XHRcdC8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkge1xuXHRcdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG5cdFx0fSxcblx0XHRibHVyOiB7XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuXHRcdH0sXG5cdFx0Y2xpY2s6IHtcblxuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuXG5cdC8vIFRoaXMgXCJpZlwiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0c1xuXHRpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcblx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApO1xuXHR9XG59O1xuXG5qUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblxuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7XG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIEV2ZW50IG9iamVjdFxuXHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0dGhpcy50eXBlID0gc3JjLnR5cGU7XG5cblx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdFx0XHRcdHNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0cmV0dXJuVHJ1ZSA6XG5cdFx0XHRyZXR1cm5GYWxzZTtcblxuXHQvLyBFdmVudCB0eXBlXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy50eXBlID0gc3JjO1xuXHR9XG5cblx0Ly8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3Rcblx0aWYgKCBwcm9wcyApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0dGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBqUXVlcnkubm93KCk7XG5cblx0Ly8gTWFyayBpdCBhcyBmaXhlZFxuXHR0aGlzWyBqUXVlcnkuZXhwYW5kbyBdID0gdHJ1ZTtcbn07XG5cbi8vIGpRdWVyeS5FdmVudCBpcyBiYXNlZCBvbiBET00zIEV2ZW50cyBhcyBzcGVjaWZpZWQgYnkgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgQmluZGluZ1xuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNTaW11bGF0ZWQ6IGZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cbi8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0XG4vL1xuLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6XG4vLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4XG4vLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLlxualF1ZXJ5LmVhY2goIHtcblx0bW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcblx0bW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuXHRwb2ludGVyZW50ZXI6IFwicG9pbnRlcm92ZXJcIixcblx0cG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxufSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcblx0XHRkZWxlZ2F0ZVR5cGU6IGZpeCxcblx0XHRiaW5kVHlwZTogZml4LFxuXG5cdFx0aGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHR0YXJnZXQgPSB0aGlzLFxuXHRcdFx0XHRyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcblx0XHRcdFx0aGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXG5cdFx0XHQvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkgKSApIHtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcblx0XHRcdFx0cmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRldmVudC50eXBlID0gZml4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cblx0XHRcdC8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnRcblx0XHRcdGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcblx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdGhhbmRsZU9iai5uYW1lc3BhY2UgP1xuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSArIFwiLlwiICsgaGFuZGxlT2JqLm5hbWVzcGFjZSA6XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMgWywgZm5dIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzotXSspW14+XSopXFwvPi9naSxcblxuXHQvLyBTdXBwb3J0OiBJRSAxMC0xMSwgRWRnZSAxMDI0MCtcblx0Ly8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy5cblx0Ly8gU2VlIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMTczNjUxMi9cblx0cm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksXG5cblx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO1xuXG4vLyBNYW5pcHVsYXRpbmcgdGFibGVzIHJlcXVpcmVzIGEgdGJvZHlcbmZ1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldCggZWxlbSwgY29udGVudCApIHtcblx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJ0YWJsZVwiICkgJiZcblx0XHRqUXVlcnkubm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgIT09IDExID8gY29udGVudCA6IGNvbnRlbnQuZmlyc3RDaGlsZCwgXCJ0clwiICkgP1xuXG5cdFx0ZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ0Ym9keVwiIClbIDAgXSB8fFxuXHRcdFx0ZWxlbS5hcHBlbmRDaGlsZCggZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwidGJvZHlcIiApICkgOlxuXHRcdGVsZW07XG59XG5cbi8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb25cbmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG5cdGVsZW0udHlwZSA9ICggZWxlbS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICkgIT09IG51bGwgKSArIFwiL1wiICsgZWxlbS50eXBlO1xuXHRyZXR1cm4gZWxlbTtcbn1cbmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7XG5cdHZhciBtYXRjaCA9IHJzY3JpcHRUeXBlTWFza2VkLmV4ZWMoIGVsZW0udHlwZSApO1xuXG5cdGlmICggbWF0Y2ggKSB7XG5cdFx0ZWxlbS50eXBlID0gbWF0Y2hbIDEgXTtcblx0fSBlbHNlIHtcblx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggXCJ0eXBlXCIgKTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG5mdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXHR2YXIgaSwgbCwgdHlwZSwgcGRhdGFPbGQsIHBkYXRhQ3VyLCB1ZGF0YU9sZCwgdWRhdGFDdXIsIGV2ZW50cztcblxuXHRpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gMS4gQ29weSBwcml2YXRlIGRhdGE6IGV2ZW50cywgaGFuZGxlcnMsIGV0Yy5cblx0aWYgKCBkYXRhUHJpdi5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHRwZGF0YU9sZCA9IGRhdGFQcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhUHJpdi5zZXQoIGRlc3QsIHBkYXRhT2xkICk7XG5cdFx0ZXZlbnRzID0gcGRhdGFPbGQuZXZlbnRzO1xuXG5cdFx0aWYgKCBldmVudHMgKSB7XG5cdFx0XHRkZWxldGUgcGRhdGFDdXIuaGFuZGxlO1xuXHRcdFx0cGRhdGFDdXIuZXZlbnRzID0ge307XG5cblx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IGV2ZW50c1sgdHlwZSBdLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyAyLiBDb3B5IHVzZXIgZGF0YVxuXHRpZiAoIGRhdGFVc2VyLmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHVkYXRhT2xkID0gZGF0YVVzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YVVzZXIuc2V0KCBkZXN0LCB1ZGF0YUN1ciApO1xuXHR9XG59XG5cbi8vIEZpeCBJRSBidWdzLCBzZWUgc3VwcG9ydCB0ZXN0c1xuZnVuY3Rpb24gZml4SW5wdXQoIHNyYywgZGVzdCApIHtcblx0dmFyIG5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdC8vIEZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3ggb3IgcmFkaW8gYnV0dG9uLlxuXHRpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcblx0XHRkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDtcblxuXHQvLyBGYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZCBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9uc1xuXHR9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5vZGVOYW1lID09PSBcInRleHRhcmVhXCIgKSB7XG5cdFx0ZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGRvbU1hbmlwKCBjb2xsZWN0aW9uLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApIHtcblxuXHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdGFyZ3MgPSBjb25jYXQuYXBwbHkoIFtdLCBhcmdzICk7XG5cblx0dmFyIGZyYWdtZW50LCBmaXJzdCwgc2NyaXB0cywgaGFzU2NyaXB0cywgbm9kZSwgZG9jLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBjb2xsZWN0aW9uLmxlbmd0aCxcblx0XHRpTm9DbG9uZSA9IGwgLSAxLFxuXHRcdHZhbHVlID0gYXJnc1sgMCBdLFxuXHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0aWYgKCBpc0Z1bmN0aW9uIHx8XG5cdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc3VwcG9ydC5jaGVja0Nsb25lICYmIHJjaGVja2VkLnRlc3QoIHZhbHVlICkgKSApIHtcblx0XHRyZXR1cm4gY29sbGVjdGlvbi5lYWNoKCBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHR2YXIgc2VsZiA9IGNvbGxlY3Rpb24uZXEoIGluZGV4ICk7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdGFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuXHRcdFx0fVxuXHRcdFx0ZG9tTWFuaXAoIHNlbGYsIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICk7XG5cdFx0fSApO1xuXHR9XG5cblx0aWYgKCBsICkge1xuXHRcdGZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7XG5cdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0fVxuXG5cdFx0Ly8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrXG5cdFx0aWYgKCBmaXJzdCB8fCBpZ25vcmVkICkge1xuXHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG5cdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtXG5cdFx0XHQvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblxuXHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBzY3JpcHRzLCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cblx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRub2RlID0gc2NyaXB0c1sgaSBdO1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0IWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBPcHRpb25hbCBBSkFYIGRlcGVuZGVuY3ksIGJ1dCB3b24ndCBydW4gc2NyaXB0cyBpZiBub3QgcHJlc2VudFxuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5fZXZhbFVybCApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSggZWxlbSwgc2VsZWN0b3IsIGtlZXBEYXRhICkge1xuXHR2YXIgbm9kZSxcblx0XHRub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sXG5cdFx0aSA9IDA7XG5cblx0Zm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdGlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApO1xuXHRcdH1cblxuXHRcdGlmICggbm9kZS5wYXJlbnROb2RlICkge1xuXHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcblx0XHRcdHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmaXhJbnB1dCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0aWYgKCBkYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0aWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTtcblxuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggZGVzdEVsZW1lbnRzLCAhaW5QYWdlICYmIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBkYXRhLCBlbGVtLCB0eXBlLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7XG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0aWYgKCAoIGRhdGEgPSBlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWRcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0gMzUtNDUrXG5cdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0ZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdICkge1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9IDM1LTQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0Ly8gS2VlcCBkb21NYW5pcCBleHBvc2VkIHVudGlsIDMuMCAoZ2gtMjIyNSlcblx0ZG9tTWFuaXA6IGRvbU1hbmlwLFxuXG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFF0V2ViS2l0XG5cdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0fTtcbn0gKTtcblxuXG52YXIgaWZyYW1lLFxuXHRlbGVtZGlzcGxheSA9IHtcblxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3hcblx0XHQvLyBXZSBoYXZlIHRvIHByZS1kZWZpbmUgdGhlc2UgdmFsdWVzIGZvciBGRiAoIzEwMjI3KVxuXHRcdEhUTUw6IFwiYmxvY2tcIixcblx0XHRCT0RZOiBcImJsb2NrXCJcblx0fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuXG4vLyBDYWxsZWQgb25seSBmcm9tIHdpdGhpbiBkZWZhdWx0RGlzcGxheVxuZnVuY3Rpb24gYWN0dWFsRGlzcGxheSggbmFtZSwgZG9jICkge1xuXHR2YXIgZWxlbSA9IGpRdWVyeSggZG9jLmNyZWF0ZUVsZW1lbnQoIG5hbWUgKSApLmFwcGVuZFRvKCBkb2MuYm9keSApLFxuXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW1bIDAgXSwgXCJkaXNwbGF5XCIgKTtcblxuXHQvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCxcblx0Ly8gc28gdXNlIFwiZGV0YWNoXCIgbWV0aG9kIGFzIGZhc3Qgd2F5IHRvIGdldCByaWQgb2YgdGhlIGVsZW1lbnRcblx0ZWxlbS5kZXRhY2goKTtcblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cblxuLyoqXG4gKiBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IGRpc3BsYXkgdmFsdWUgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHREaXNwbGF5KCBub2RlTmFtZSApIHtcblx0dmFyIGRvYyA9IGRvY3VtZW50LFxuXHRcdGRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTtcblxuXHRpZiAoICFkaXNwbGF5ICkge1xuXHRcdGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG5cblx0XHQvLyBJZiB0aGUgc2ltcGxlIHdheSBmYWlscywgcmVhZCBmcm9tIGluc2lkZSBhbiBpZnJhbWVcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiIHx8ICFkaXNwbGF5ICkge1xuXG5cdFx0XHQvLyBVc2UgdGhlIGFscmVhZHktY3JlYXRlZCBpZnJhbWUgaWYgcG9zc2libGVcblx0XHRcdGlmcmFtZSA9ICggaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSApXG5cdFx0XHRcdC5hcHBlbmRUbyggZG9jLmRvY3VtZW50RWxlbWVudCApO1xuXG5cdFx0XHQvLyBBbHdheXMgd3JpdGUgYSBuZXcgSFRNTCBza2VsZXRvbiBzbyBXZWJraXQgYW5kIEZpcmVmb3ggZG9uJ3QgY2hva2Ugb24gcmV1c2Vcblx0XHRcdGRvYyA9IGlmcmFtZVsgMCBdLmNvbnRlbnREb2N1bWVudDtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUVcblx0XHRcdGRvYy53cml0ZSgpO1xuXHRcdFx0ZG9jLmNsb3NlKCk7XG5cblx0XHRcdGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG5cdFx0XHRpZnJhbWUuZGV0YWNoKCk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5XG5cdFx0ZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXHR9XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG52YXIgcm1hcmdpbiA9ICggL15tYXJnaW4vICk7XG5cbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcblxuXHRcdGlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkge1xuXHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdH07XG5cbnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuXHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG5cblxudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCwgcGl4ZWxNYXJnaW5SaWdodFZhbCwgcmVsaWFibGVNYXJnaW5MZWZ0VmFsLFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0Ly8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHNcblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7XCIgK1xuXHRcdFwicGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXHRcdGRpdi5zdHlsZS5jc3NUZXh0ID1cblxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7XCIgK1xuXHRcdFx0XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO1wiICtcblx0XHRcdFwibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDtcIiArXG5cdFx0XHRcInRvcDoxJTt3aWR0aDo1MCVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSBkaXZTdHlsZS5tYXJnaW5MZWZ0ID09PSBcIjJweFwiO1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gZGl2U3R5bGUud2lkdGggPT09IFwiNHB4XCI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdFx0Ly8gU29tZSBzdHlsZXMgY29tZSBiYWNrIHdpdGggcGVyY2VudGFnZSB2YWx1ZXMsIGV2ZW4gdGhvdWdoIHRoZXkgc2hvdWxkbid0XG5cdFx0ZGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI1MCVcIjtcblx0XHRwaXhlbE1hcmdpblJpZ2h0VmFsID0gZGl2U3R5bGUubWFyZ2luUmlnaHQgPT09IFwiNHB4XCI7XG5cblx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdC8vIHNpbmNlIHdlIGNhbiB1c2UgdGhlIGJveFNpemluZ1JlbGlhYmxlIHByZS1jb21wdXRpbmcuXG5cdFx0XHQvLyBObyBuZWVkIHRvIGNoZWNrIGlmIHRoZSB0ZXN0IHdhcyBhbHJlYWR5IHBlcmZvcm1lZCwgdGhvdWdoLlxuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuXHRcdH0sXG5cdFx0Ym94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBib3hTaXppbmdSZWxpYWJsZVZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wLTQuM1xuXHRcdFx0Ly8gV2UncmUgY2hlY2tpbmcgZm9yIGJveFNpemluZ1JlbGlhYmxlVmFsIGhlcmUgaW5zdGVhZCBvZiBwaXhlbE1hcmdpblJpZ2h0VmFsXG5cdFx0XHQvLyBzaW5jZSB0aGF0IGNvbXByZXNzZXMgYmV0dGVyIGFuZCB0aGV5J3JlIGNvbXB1dGVkIHRvZ2V0aGVyIGFueXdheS5cblx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwaXhlbE1hcmdpblJpZ2h0VmFsO1xuXHRcdH0sXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IG9ubHksIEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gMzdcblx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7XG5cdFx0fSxcblx0XHRyZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdC8vIGdldHMgY29tcHV0ZWQgbWFyZ2luLXJpZ2h0IGJhc2VkIG9uIHdpZHRoIG9mIGNvbnRhaW5lci4gKCMzMzMzKVxuXHRcdFx0Ly8gV2ViS2l0IEJ1ZyAxMzM0MyAtIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyB3cm9uZyB2YWx1ZSBmb3IgbWFyZ2luLXJpZ2h0XG5cdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHRtYXJnaW5EaXYgPSBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRtYXJnaW5EaXYuc3R5bGUuY3NzVGV4dCA9IGRpdi5zdHlsZS5jc3NUZXh0ID1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHRcdFx0XHQvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcblx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtcIiArXG5cdFx0XHRcdFwiZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdG1hcmdpbkRpdi5zdHlsZS5tYXJnaW5SaWdodCA9IG1hcmdpbkRpdi5zdHlsZS53aWR0aCA9IFwiMFwiO1xuXHRcdFx0ZGl2LnN0eWxlLndpZHRoID0gXCIxcHhcIjtcblx0XHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2ICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdGRpdi5yZW1vdmVDaGlsZCggbWFyZ2luRGl2ICk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9ICk7XG59ICkoKTtcblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRjb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApO1xuXHRyZXQgPSBjb21wdXRlZCA/IGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoIG5hbWUgKSB8fCBjb21wdXRlZFsgbmFtZSBdIDogdW5kZWZpbmVkO1xuXG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDEyLjF4IG9ubHlcblx0Ly8gRmFsbCBiYWNrIHRvIHN0eWxlIGV2ZW4gd2l0aG91dCBjb21wdXRlZFxuXHQvLyBjb21wdXRlZCBpcyB1bmRlZmluZWQgZm9yIGVsZW1zIG9uIGRvY3VtZW50IGZyYWdtZW50c1xuXHRpZiAoICggcmV0ID09PSBcIlwiIHx8IHJldCA9PT0gdW5kZWZpbmVkICkgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBvbmx5IG5lZWRlZCBmb3IgLmNzcygnZmlsdGVyJykgKCMxMjUzNylcblx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdC8vIEEgdHJpYnV0ZSB0byB0aGUgXCJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXCJcblx0XHQvLyBBbmRyb2lkIEJyb3dzZXIgcmV0dXJucyBwZXJjZW50YWdlIGZvciBzb21lIHZhbHVlcyxcblx0XHQvLyBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzLlxuXHRcdC8vIFRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzpcblx0XHQvLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5waXhlbE1hcmdpblJpZ2h0KCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblxuXHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG52YXJcblxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXG5cdGNzc1Nob3cgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIGRpc3BsYXk6IFwiYmxvY2tcIiB9LFxuXHRjc3NOb3JtYWxUcmFuc2Zvcm0gPSB7XG5cdFx0bGV0dGVyU3BhY2luZzogXCIwXCIsXG5cdFx0Zm9udFdlaWdodDogXCI0MDBcIlxuXHR9LFxuXG5cdGNzc1ByZWZpeGVzID0gWyBcIldlYmtpdFwiLCBcIk9cIiwgXCJNb3pcIiwgXCJtc1wiIF0sXG5cdGVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkuc3R5bGU7XG5cbi8vIFJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHR2YXIgY2FwTmFtZSA9IG5hbWVbIDAgXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSggMSApLFxuXHRcdGkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0bmFtZSA9IGNzc1ByZWZpeGVzWyBpIF0gKyBjYXBOYW1lO1xuXHRcdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdFx0cmV0dXJuIG5hbWU7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cblx0Ly8gQW55IHJlbGF0aXZlICgrLy0pIHZhbHVlcyBoYXZlIGFscmVhZHkgYmVlblxuXHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0dmFyIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblxuXHRcdC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG5cdFx0TWF0aC5tYXgoIDAsIG1hdGNoZXNbIDIgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSA6XG5cdFx0dmFsdWU7XG59XG5cbmZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHtcblx0dmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApID9cblxuXHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuXHRcdDQgOlxuXG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cblx0XHQvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0XG5cdFx0aWYgKCBleHRyYSA9PT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGlzQm9yZGVyQm94ICkge1xuXG5cdFx0XHQvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnRcblx0XHRcdGlmICggZXh0cmEgPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGJvcmRlciBub3IgbWFyZ2luLCBzbyByZW1vdmUgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcIm1hcmdpblwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblxuXHRcdC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeVxuXHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0aWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcdFx0dmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uXG5cdFx0aWYgKCBybnVtbm9ucHgudGVzdCggdmFsICkgKSB7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzXG5cdFx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveCAmJlxuXHRcdFx0KCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBuYW1lIF0gKTtcblxuXHRcdC8vIE5vcm1hbGl6ZSBcIlwiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmFcblx0XHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXHR9XG5cblx0Ly8gVXNlIHRoZSBhY3RpdmUgYm94LXNpemluZyBtb2RlbCB0byBhZGQvc3VidHJhY3QgaXJyZWxldmFudCBzdHlsZXNcblx0cmV0dXJuICggdmFsICtcblx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdGVsZW0sXG5cdFx0XHRuYW1lLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlc1xuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxuZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkge1xuXHR2YXIgZGlzcGxheSwgZWxlbSwgaGlkZGVuLFxuXHRcdHZhbHVlcyA9IFtdLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblxuXHRcdFx0Ly8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHRoaXMgZWxlbWVudCB0byBsZWFybiBpZiBpdCBpc1xuXHRcdFx0Ly8gYmVpbmcgaGlkZGVuIGJ5IGNhc2NhZGVkIHJ1bGVzIG9yIG5vdFxuXHRcdFx0aWYgKCAhdmFsdWVzWyBpbmRleCBdICYmIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZWxlbWVudHMgd2hpY2ggaGF2ZSBiZWVuIG92ZXJyaWRkZW4gd2l0aCBkaXNwbGF5OiBub25lXG5cdFx0XHQvLyBpbiBhIHN0eWxlc2hlZXQgdG8gd2hhdGV2ZXIgdGhlIGRlZmF1bHQgYnJvd3NlciBzdHlsZSBpc1xuXHRcdFx0Ly8gZm9yIHN1Y2ggYW4gZWxlbWVudFxuXHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW4oIGVsZW0gKSApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YVByaXYuYWNjZXNzKFxuXHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0XCJvbGRkaXNwbGF5XCIsXG5cdFx0XHRcdFx0ZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFQcml2LnNldChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdFwib2xkZGlzcGxheVwiLFxuXHRcdFx0XHRcdGhpZGRlbiA/IGRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3Bcblx0Ly8gdG8gYXZvaWQgdGhlIGNvbnN0YW50IHJlZmxvd1xuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmICggIXNob3cgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgKSB7XG5cdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gdmFsdWVzWyBpbmRleCBdIHx8IFwiXCIgOiBcIm5vbmVcIjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudHM7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnRcIjogdHJ1ZSxcblx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcImZvbnRXZWlnaHRcIjogdHJ1ZSxcblx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcIm9yZGVyXCI6IHRydWUsXG5cdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcInpJbmRleFwiOiB0cnVlLFxuXHRcdFwiem9vbVwiOiB0cnVlXG5cdH0sXG5cblx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdGNzc1Byb3BzOiB7XG5cdFx0XCJmbG9hdFwiOiBcImNzc0Zsb2F0XCJcblx0fSxcblxuXHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblxuXHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8XG5cdFx0XHQoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7XG5cblx0XHQvLyBHZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uLCB0aGVuIHVucHJlZml4ZWQgdmVyc2lvblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdFx0Ly8gQ29udmVydCBcIis9XCIgb3IgXCItPVwiIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KVxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICYmICggcmV0ID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiYgcmV0WyAxIF0gKSB7XG5cdFx0XHRcdHZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTtcblxuXHRcdFx0XHQvLyBGaXhlcyBidWcgIzkyMzdcblx0XHRcdFx0dHlwZSA9IFwibnVtYmVyXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpXG5cdFx0XHRpZiAoIHZhbHVlID09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKVxuXHRcdFx0aWYgKCB0eXBlID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gXCJcIiA6IFwicHhcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gXCJcIiAmJiBuYW1lLmluZGV4T2YoIFwiYmFja2dyb3VuZFwiICkgPT09IDAgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHxcblx0XHRcdFx0KCB2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdHJldHVybiBzdHlsZVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHxcblx0XHRcdCggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgaXNGaW5pdGUoIG51bSApID8gbnVtIHx8IDAgOiB2YWw7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJlxuXHRcdFx0XHRcdGVsZW0ub2Zmc2V0V2lkdGggPT09IDAgP1xuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdHZhciBtYXRjaGVzLFxuXHRcdFx0XHRzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSAmJiBhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gQ29udmVydCB0byBwaXhlbHMgaWYgdmFsdWUgYWRqdXN0bWVudCBpcyBuZWVkZWRcblx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblxuXHRcdFx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICk7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiApICkgfHxcblx0XHRcdFx0ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cblx0XHRcdFx0XHRzd2FwKCBlbGVtLCB7IG1hcmdpbkxlZnQ6IDAgfSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdFx0XHRcdH0gKVxuXHRcdFx0XHQpICsgXCJweFwiO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gU3VwcG9ydDogQW5kcm9pZCAyLjNcbmpRdWVyeS5jc3NIb29rcy5tYXJnaW5SaWdodCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0LFxuXHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdHJldHVybiBzd2FwKCBlbGVtLCB7IFwiZGlzcGxheVwiOiBcImlubGluZS1ibG9ja1wiIH0sXG5cdFx0XHRcdGN1ckNTUywgWyBlbGVtLCBcIm1hcmdpblJpZ2h0XCIgXSApO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gVGhlc2UgaG9va3MgYXJlIHVzZWQgYnkgYW5pbWF0ZSB0byBleHBhbmQgcHJvcGVydGllc1xualF1ZXJ5LmVhY2goIHtcblx0bWFyZ2luOiBcIlwiLFxuXHRwYWRkaW5nOiBcIlwiLFxuXHRib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRleHBhbmRlZCA9IHt9LFxuXG5cdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KCBcIiBcIiApIDogWyB2YWx1ZSBdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cblx0XHRcdFx0XHRwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBleHBhbmRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGlzSGlkZGVuKCB0aGlzICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgalF1ZXJ5LmVhc2luZy5fZGVmYXVsdDtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7XG5cdFx0dGhpcy5lbmQgPSBlbmQ7XG5cdFx0dGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0fSxcblx0Y3VyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0cmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/XG5cdFx0XHRob29rcy5nZXQoIHRoaXMgKSA6XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG5cdH0sXG5cdHJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7XG5cdFx0dmFyIGVhc2VkLFxuXHRcdFx0aG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcblx0XHRcdFx0cGVyY2VudCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogcGVyY2VudCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0gcGVyY2VudDtcblx0XHR9XG5cdFx0dGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0O1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuc3RlcCApIHtcblx0XHRcdHRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcblx0XHRcdGhvb2tzLnNldCggdGhpcyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5Ud2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7XG5cblR3ZWVuLnByb3BIb29rcyA9IHtcblx0X2RlZmF1bHQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cblx0XHRcdC8vIFVzZSBhIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IGRpcmVjdGx5IHdoZW4gaXQgaXMgbm90IGEgRE9NIGVsZW1lbnQsXG5cdFx0XHQvLyBvciB3aGVuIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHN0eWxlIHByb3BlcnR5IHRoYXQgZXhpc3RzLlxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICE9PSAxIHx8XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cblx0XHRcdC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuXHRcdFx0cmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblxuXHRcdFx0Ly8gVXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQuXG5cdFx0XHQvLyBVc2UgY3NzSG9vayBpZiBpdHMgdGhlcmUuXG5cdFx0XHQvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLlxuXHRcdFx0aWYgKCBqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdICkge1xuXHRcdFx0XHRqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApO1xuXHRcdFx0fSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHQoIHR3ZWVuLmVsZW0uc3R5bGVbIGpRdWVyeS5jc3NQcm9wc1sgdHdlZW4ucHJvcCBdIF0gIT0gbnVsbCB8fFxuXHRcdFx0XHRcdGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9LFxuXHRfZGVmYXVsdDogXCJzd2luZ1wiXG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJydW4gPSAvcXVldWVIb29rcyQvO1xuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9ICk7XG5cdHJldHVybiAoIGZ4Tm93ID0galF1ZXJ5Lm5vdygpICk7XG59XG5cbi8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uXG5mdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuXHR2YXIgd2hpY2gsXG5cdFx0aSA9IDAsXG5cdFx0YXR0cnMgPSB7IGhlaWdodDogdHlwZSB9O1xuXG5cdC8vIElmIHdlIGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMSB0byBkbyBhbGwgY3NzRXhwYW5kIHZhbHVlcyxcblx0Ly8gb3RoZXJ3aXNlIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcblx0aW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7XG5cdGZvciAoIDsgaSA8IDQgOyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0d2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcblx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0fVxuXG5cdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdH1cblxuXHRyZXR1cm4gYXR0cnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHR2YXIgdHdlZW4sXG5cdFx0Y29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICggdHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSApICkge1xuXG5cdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHR2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgdHdlZW4sIGhvb2tzLCBvbGRmaXJlLCBkaXNwbGF5LCBjaGVja0Rpc3BsYXksXG5cdFx0YW5pbSA9IHRoaXMsXG5cdFx0b3JpZyA9IHt9LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZSxcblx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuKCBlbGVtICksXG5cdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZnhzaG93XCIgKTtcblxuXHQvLyBIYW5kbGUgcXVldWU6IGZhbHNlIHByb21pc2VzXG5cdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIFwiZnhcIiApO1xuXHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdG9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlO1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRvbGRmaXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGhvb2tzLnVucXVldWVkKys7XG5cblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEhlaWdodC93aWR0aCBvdmVyZmxvdyBwYXNzXG5cdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiaGVpZ2h0XCIgaW4gcHJvcHMgfHwgXCJ3aWR0aFwiIGluIHByb3BzICkgKSB7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFQcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKSB8fCBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheTtcblxuXHRcdGlmICggY2hlY2tEaXNwbGF5ID09PSBcImlubGluZVwiICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblx0XHRcdHN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdH1cblx0fVxuXG5cdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gc2hvdy9oaWRlIHBhc3Ncblx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHR2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG5cdFx0aWYgKCByZnh0eXBlcy5leGVjKCB2YWx1ZSApICkge1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHR0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09IFwidG9nZ2xlXCI7XG5cdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBkYXRhU2hvdyBsZWZ0IG92ZXIgZnJvbSBhIHN0b3BwZWQgaGlkZSBvciBzaG93XG5cdFx0XHRcdC8vIGFuZCB3ZSBhcmUgZ29pbmcgdG8gcHJvY2VlZCB3aXRoIHNob3csIHdlIHNob3VsZCBwcmV0ZW5kIHRvIGJlIGhpZGRlblxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSBcInNob3dcIiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcblxuXHRcdC8vIEFueSBub24tZnggdmFsdWUgc3RvcHMgdXMgZnJvbSByZXN0b3JpbmcgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWVcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHRpZiAoICFqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRpZiAoIFwiaGlkZGVuXCIgaW4gZGF0YVNob3cgKSB7XG5cdFx0XHRcdGhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeSggZWxlbSApLmhpZGUoKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiZnhzaG93XCIgKTtcblx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoIGRpc3BsYXkgPT09IFwibm9uZVwiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkgKSA9PT0gXCJpbmxpbmVcIiApIHtcblx0XHRzdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcblx0fVxufVxuXG5mdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHtcblx0dmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rcztcblxuXHQvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3Ncblx0Zm9yICggaW5kZXggaW4gcHJvcHMgKSB7XG5cdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0ZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdO1xuXHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF07XG5cdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdGVhc2luZyA9IHZhbHVlWyAxIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ICE9PSBuYW1lICkge1xuXHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBpbmRleCBdO1xuXHRcdH1cblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF07XG5cdFx0aWYgKCBob29rcyAmJiBcImV4cGFuZFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRkZWxldGUgcHJvcHNbIG5hbWUgXTtcblxuXHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0Ly8gUmV1c2luZyAnaW5kZXgnIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCBcIm5hbWVcIlxuXHRcdFx0Zm9yICggaW5kZXggaW4gdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdO1xuXHRcdFx0XHRcdHNwZWNpYWxFYXNpbmdbIGluZGV4IF0gPSBlYXNpbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBBbmltYXRpb24oIGVsZW0sIHByb3BlcnRpZXMsIG9wdGlvbnMgKSB7XG5cdHZhciByZXN1bHQsXG5cdFx0c3RvcHBlZCxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRkZWxldGUgdGljay5lbGVtO1xuXHRcdH0gKSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHRcdFx0XHQvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpXG5cdFx0XHRcdHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcblx0XHRcdFx0cGVyY2VudCA9IDEgLSB0ZW1wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSgge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdHByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLFxuXHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwge1xuXHRcdFx0XHRzcGVjaWFsRWFzaW5nOiB7fSxcblx0XHRcdFx0ZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0XG5cdFx0XHR9LCBvcHRpb25zICksXG5cdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdHR3ZWVuczogW10sXG5cdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApO1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0sXG5cdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSApLFxuXHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXG5cdHByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0cmVzdWx0ID0gQW5pbWF0aW9uLnByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggYW5pbWF0aW9uLmVsZW0sIGFuaW1hdGlvbi5vcHRzLnF1ZXVlICkuc3RvcCA9XG5cdFx0XHRcdFx0alF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0fVxuXG5cdGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0fVxuXG5cdGpRdWVyeS5meC50aW1lcihcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0cXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG5cdFx0fSApXG5cdCk7XG5cblx0Ly8gYXR0YWNoIGNhbGxiYWNrcyBmcm9tIG9wdGlvbnNcblx0cmV0dXJuIGFuaW1hdGlvbi5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdC5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApXG5cdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xufVxuXG5qUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7XG5cdHR3ZWVuZXJzOiB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdGFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApO1xuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9LFxuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdHdoaXRlICk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdID0gQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG5cdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXJzOiBbIGRlZmF1bHRQcmVmaWx0ZXIgXSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/XG5cdFx0b3B0LmR1cmF0aW9uIDogb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgP1xuXHRcdFx0alF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXG5cdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcblx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdH1cblxuXHQvLyBRdWV1ZWluZ1xuXHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXG5cdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdC5vbGQgKSApIHtcblx0XHRcdG9wdC5vbGQuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0LnF1ZXVlICkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIG9wdC5xdWV1ZSApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gb3B0O1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBTaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKCB7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdCggdHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApICkge1xuXG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdO1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdGNzc0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA6XG5cdFx0XHR0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKCB7XG5cdHNsaWRlRG93bjogZ2VuRngoIFwic2hvd1wiICksXG5cdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRzbGlkZVRvZ2dsZTogZ2VuRngoIFwidG9nZ2xlXCIgKSxcblx0ZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sXG5cdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0ZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwiIH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS50aW1lcnMgPSBbXTtcbmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lcixcblx0XHRpID0gMCxcblx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXG5cdGZ4Tm93ID0galF1ZXJ5Lm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXG5cdFx0Ly8gQ2hlY2tzIHRoZSB0aW1lciBoYXMgbm90IGFscmVhZHkgYmVlbiByZW1vdmVkXG5cdFx0aWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG5cdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5meC5zdG9wKCk7XG5cdH1cblx0ZnhOb3cgPSB1bmRlZmluZWQ7XG59O1xuXG5qUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7XG5cdGpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTtcblx0aWYgKCB0aW1lcigpICkge1xuXHRcdGpRdWVyeS5meC5zdGFydCgpO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS50aW1lcnMucG9wKCk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzO1xualF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICggIXRpbWVySWQgKSB7XG5cdFx0dGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHR3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApO1xuXG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cblx0Ly8gRGVmYXVsdCBzcGVlZFxuXHRfZGVmYXVsdDogNDAwXG59O1xuXG5cbi8vIEJhc2VkIG9mZiBvZiB0aGUgcGx1Z2luIGJ5IENsaW50IEhlbGZlcnMsIHdpdGggcGVybWlzc2lvbi5cbi8vIGh0dHA6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTAwMzI0MDE0NzQ3L2h0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuXHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHR2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdH07XG5cdH0gKTtcbn07XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59ICkoKTtcblxuXG52YXIgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrIHRvIHByb3Agd2hlbiBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cblx0XHRyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdHJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDtcblx0fSxcblxuXHRhdHRySG9va3M6IHtcblx0XHR0eXBlOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSBcInJhZGlvXCIgJiZcblx0XHRcdFx0XHRqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdHByb3BOYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXG5cdFx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MClcblx0XHRcdFx0aWYgKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuYm9vbEhvb2sgPSB7XG5cdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuXHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cblx0XHRcdC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXJcblx0XHRcdGhhbmRsZSA9IGF0dHJIYW5kbGVbIG5hbWUgXTtcblx0XHRcdGF0dHJIYW5kbGVbIG5hbWUgXSA9IHJldDtcblx0XHRcdHJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID9cblx0XHRcdFx0bmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0gKTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtWyBuYW1lIF07XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0Ly8gZWxlbS50YWJJbmRleCBkb2Vzbid0IGFsd2F5cyByZXR1cm4gdGhlXG5cdFx0XHRcdC8vIGNvcnJlY3QgdmFsdWUgd2hlbiBpdCBoYXNuJ3QgYmVlbiBleHBsaWNpdGx5IHNldFxuXHRcdFx0XHQvLyBodHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHR2YXIgdGFiaW5kZXggPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInRhYmluZGV4XCIgKTtcblxuXHRcdFx0XHRyZXR1cm4gdGFiaW5kZXggP1xuXHRcdFx0XHRcdHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKSA6XG5cdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmIGVsZW0uaHJlZiA/XG5cdFx0XHRcdFx0XHRcdDAgOlxuXHRcdFx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG4vLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG4vLyBvbiB0aGUgb3B0aW9uXG4vLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuLy8gd2hlbiBpbiBhbiBvcHRncm91cFxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKCBbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSApO1xuXG5cblxuXG52YXIgcmNsYXNzID0gL1tcXHRcXHJcXG5cXGZdL2c7XG5cbmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkge1xuXHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlICkge1xuXHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHQoIFwiIFwiICsgY3VyVmFsdWUgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHIoIFwiY2xhc3NcIiwgXCJcIiApO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlICkge1xuXHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdCggXCIgXCIgKyBjdXJWYWx1ZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSAqYWxsKiBpbnN0YW5jZXNcblx0XHRcdFx0XHRcdHdoaWxlICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoXG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggdGhpcywgaSwgZ2V0Q2xhc3MoIHRoaXMgKSwgc3RhdGVWYWwgKSxcblx0XHRcdFx0XHRzdGF0ZVZhbFxuXHRcdFx0XHQpO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lcztcblxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdGNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdGlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lLCBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCI7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggXCIgXCIgKyBnZXRDbGFzcyggZWxlbSApICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiIClcblx0XHRcdFx0XHQuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMVxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgcnJldHVybiA9IC9cXHIvZyxcblx0cnNwYWNlcyA9IC9bXFx4MjBcXHRcXHJcXG5cXGZdKy9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fFxuXHRcdFx0XHRcdGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdFx0aWYgKCBob29rcyAmJlxuXHRcdFx0XHRcdFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgXCJ2YWx1ZVwiICkgKSAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXQgPSBlbGVtLnZhbHVlO1xuXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgcmV0ID09PSBcInN0cmluZ1wiID9cblxuXHRcdFx0XHRcdC8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXNcblx0XHRcdFx0XHRyZXQucmVwbGFjZSggcnJldHVybiwgXCJcIiApIDpcblxuXHRcdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRcdHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuXHRcdFx0XHRyZXR1cm4gdmFsICE9IG51bGwgP1xuXHRcdFx0XHRcdHZhbCA6XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTEwLTExK1xuXHRcdFx0XHRcdC8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OClcblx0XHRcdFx0XHQvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZVxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0alF1ZXJ5LnRyaW0oIGpRdWVyeS50ZXh0KCBlbGVtICkgKS5yZXBsYWNlKCByc3BhY2VzLCBcIiBcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VsZWN0OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsdWUsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuXHRcdFx0XHRcdG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIgfHwgaW5kZXggPCAwLFxuXHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aCxcblx0XHRcdFx0XHRpID0gaW5kZXggPCAwID9cblx0XHRcdFx0XHRcdG1heCA6XG5cdFx0XHRcdFx0XHRvbmUgPyBpbmRleCA6IDA7XG5cblx0XHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvLyBJRTgtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/XG5cdFx0XHRcdFx0XHRcdFx0IW9wdGlvbi5kaXNhYmxlZCA6IG9wdGlvbi5nZXRBdHRyaWJ1dGUoIFwiZGlzYWJsZWRcIiApID09PSBudWxsICkgJiZcblx0XHRcdFx0XHRcdFx0KCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHxcblx0XHRcdFx0XHRcdFx0XHQhalF1ZXJ5Lm5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuXHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0c1xuXHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTXVsdGktU2VsZWN0cyByZXR1cm4gYW4gYXJyYXlcblx0XHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIG9wdGlvblNldCwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXHRcdFx0XHRcdGlmICggb3B0aW9uLnNlbGVjdGVkID1cblx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdG9wdGlvblNldCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdGVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaCggWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KCBlbGVtICkudmFsKCksIHZhbHVlICkgPiAtMSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gbnVsbCA/IFwib25cIiA6IGVsZW0udmFsdWU7XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxudmFyIHJmb2N1c01vcnBoID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvO1xuXG5qUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZXZlbnQsIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblxuXHRcdHZhciBpLCBjdXIsIHRtcCwgYnViYmxlVHlwZSwgb250eXBlLCBoYW5kbGUsIHNwZWNpYWwsXG5cdFx0XHRldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSxcblx0XHRcdHR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwidHlwZVwiICkgPyBldmVudC50eXBlIDogZXZlbnQsXG5cdFx0XHRuYW1lc3BhY2VzID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcIm5hbWVzcGFjZVwiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoIFwiLlwiICkgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoIFwiLlwiICkgPiAtMSApIHtcblxuXHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZiggXCI6XCIgKSA8IDAgJiYgXCJvblwiICsgdHlwZTtcblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0ZXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cblx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0ZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApO1xuXHRcdGV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdGV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDtcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRkYXRhID0gZGF0YSA9PSBudWxsID9cblx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblxuXHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0aWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcblx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdGlmICggdG1wID09PSAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdGV2ZW50LnR5cGUgPSBpID4gMSA/XG5cdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cblx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSAoIGRhdGFQcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmXG5cdFx0XHRcdGRhdGFQcml2LmdldCggY3VyLCBcImhhbmRsZVwiICk7XG5cdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdO1xuXHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRldmVudC50eXBlID0gdHlwZTtcblxuXHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG5cdFx0XHRpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHxcblx0XHRcdFx0c3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlICkgJiZcblx0XHRcdFx0YWNjZXB0RGF0YSggZWxlbSApICkge1xuXG5cdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBuYW1lIGFzIHRoZSBldmVudC5cblx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRpZiAoIG9udHlwZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZFxuXHRcdFx0XHRcdHRtcCA9IGVsZW1bIG9udHlwZSBdO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmVcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdHlwZTtcblx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZVxuXHQvLyBVc2VkIG9ubHkgZm9yIGBmb2N1cyhpbiB8IG91dClgIGV2ZW50c1xuXHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkge1xuXHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoKSxcblx0XHRcdGV2ZW50LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHR9XG5cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHR9ICk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXTtcblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZWFjaCggKCBcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiICkuc3BsaXQoIFwiIFwiICksXG5cdGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0fVxufSApO1xuXG5cblxuXG5zdXBwb3J0LmZvY3VzaW4gPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG4vLyBTdXBwb3J0OiBGaXJlZm94XG4vLyBGaXJlZm94IGRvZXNuJ3QgaGF2ZSBmb2N1cyhpbiB8IG91dCkgZXZlbnRzXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4N1xuLy9cbi8vIFN1cHBvcnQ6IENocm9tZSwgU2FmYXJpXG4vLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cyxcbi8vIHdoaWNoIGlzIHNwZWMgdmlvbGF0aW9uIC0gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtZm9jdXNldmVudC1ldmVudC1vcmRlclxuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3XG5pZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7XG5cdGpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cblx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSApO1xuXHRcdH07XG5cblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7XG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0fSxcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApIC0gMTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9ICk7XG59XG52YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICggL1xcPy8gKTtcblxuXG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG4vLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dFxualF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHRyZXR1cm4gSlNPTi5wYXJzZSggZGF0YSArIFwiXCIgKTtcbn07XG5cblxuLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xualF1ZXJ5LnBhcnNlWE1MID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHZhciB4bWw7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR4bWwgPSAoIG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkgKS5wYXJzZUZyb21TdHJpbmcoIGRhdGEsIFwidGV4dC94bWxcIiApO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHR4bWwgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHRpZiAoICF4bWwgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInBhcnNlcmVycm9yXCIgKS5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmVycm9yKCBcIkludmFsaWQgWE1MOiBcIiArIGRhdGEgKTtcblx0fVxuXHRyZXR1cm4geG1sO1xufTtcblxuXG52YXJcblx0cmhhc2ggPSAvIy4qJC8sXG5cdHJ0cyA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbIDAgXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ29uZGVuc2UgZXF1aXZhbGVuY2UgY29udmVydGVyc1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY29udiA9PT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50ID0gdG1wWyAwIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdG1wWyAxIF0gKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSlcblx0XHRcdFx0aWYgKCBjb252ICE9PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0Ly8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbVxuXHRcdFx0XHRcdGlmICggY29udiAmJiBzLnRocm93cyApIHtcblx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdGU6IFwicGFyc2VyZXJyb3JcIixcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogY29udiA/IGUgOiBcIk5vIGNvbnZlcnNpb24gZnJvbSBcIiArIHByZXYgKyBcIiB0byBcIiArIGN1cnJlbnRcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHJlc3BvbnNlIH07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBsb2NhdGlvbi5ocmVmLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0aXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggbG9jYXRpb24ucHJvdG9jb2wgKSxcblx0XHRnbG9iYWw6IHRydWUsXG5cdFx0cHJvY2Vzc0RhdGE6IHRydWUsXG5cdFx0YXN5bmM6IHRydWUsXG5cdFx0Y29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsXG5cdFx0Lypcblx0XHR0aW1lb3V0OiAwLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0ZGF0YVR5cGU6IG51bGwsXG5cdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0cGFzc3dvcmQ6IG51bGwsXG5cdFx0Y2FjaGU6IG51bGwsXG5cdFx0dGhyb3dzOiBmYWxzZSxcblx0XHR0cmFkaXRpb25hbDogZmFsc2UsXG5cdFx0aGVhZGVyczoge30sXG5cdFx0Ki9cblxuXHRcdGFjY2VwdHM6IHtcblx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdHRleHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0aHRtbDogXCJ0ZXh0L2h0bWxcIixcblx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG5cdFx0fSxcblxuXHRcdGNvbnRlbnRzOiB7XG5cdFx0XHR4bWw6IC9cXGJ4bWxcXGIvLFxuXHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0anNvbjogL1xcYmpzb25cXGIvXG5cdFx0fSxcblxuXHRcdHJlc3BvbnNlRmllbGRzOiB7XG5cdFx0XHR4bWw6IFwicmVzcG9uc2VYTUxcIixcblx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRqc29uOiBcInJlc3BvbnNlSlNPTlwiXG5cdFx0fSxcblxuXHRcdC8vIERhdGEgY29udmVydGVyc1xuXHRcdC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2Vcblx0XHRjb252ZXJ0ZXJzOiB7XG5cblx0XHRcdC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuXHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXG5cdFx0XHQvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcblx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cblx0XHRcdC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cblx0XHRcdFwidGV4dCBqc29uXCI6IGpRdWVyeS5wYXJzZUpTT04sXG5cblx0XHRcdC8vIFBhcnNlIHRleHQgYXMgeG1sXG5cdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdH0sXG5cblx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcblx0XHQvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuXHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdGZsYXRPcHRpb25zOiB7XG5cdFx0XHR1cmw6IHRydWUsXG5cdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG5cdC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cblx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0YWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcblx0XHRyZXR1cm4gc2V0dGluZ3MgP1xuXG5cdFx0XHQvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuXHRcdFx0YWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG5cdFx0XHQvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG5cdFx0XHRhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcblx0fSxcblxuXHRhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcblx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cblx0Ly8gTWFpbiBtZXRob2Rcblx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuXHRcdC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG5cdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3B0aW9ucyA9IHVybDtcblx0XHRcdHVybCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0dmFyIHRyYW5zcG9ydCxcblxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cblx0XHRcdC8vIFJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyxcblx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblxuXHRcdFx0Ly8gdGltZW91dCBoYW5kbGVcblx0XHRcdHRpbWVvdXRUaW1lcixcblxuXHRcdFx0Ly8gVXJsIGNsZWFudXAgdmFyXG5cdFx0XHR1cmxBbmNob3IsXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHQoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cblx0XHRcdC8vIFRoZSBqcVhIUiBzdGF0ZVxuXHRcdFx0c3RhdGUgPSAwLFxuXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXG5cdFx0XHQvLyBGYWtlIHhoclxuXHRcdFx0anFYSFIgPSB7XG5cdFx0XHRcdHJlYWR5U3RhdGU6IDAsXG5cblx0XHRcdFx0Ly8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZFxuXHRcdFx0XHRnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHtcblx0XHRcdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHRcdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBMYXp5LWFkZCB0aGUgbmV3IGNhbGxiYWNrIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzXG5cdFx0XHRcdFx0XHRcdGpxWEhSLmFsd2F5cyggbWFwWyBqcVhIUi5zdGF0dXMgXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYW5jZWwgdGhlIHJlcXVlc3Rcblx0XHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHZhciBmaW5hbFRleHQgPSBzdGF0dXNUZXh0IHx8IHN0ckFib3J0O1xuXHRcdFx0XHRcdGlmICggdHJhbnNwb3J0ICkge1xuXHRcdFx0XHRcdFx0dHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZG9uZSggMCwgZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHQvLyBBdHRhY2ggZGVmZXJyZWRzXG5cdFx0ZGVmZXJyZWQucHJvbWlzZSgganFYSFIgKS5jb21wbGV0ZSA9IGNvbXBsZXRlRGVmZXJyZWQuYWRkO1xuXHRcdGpxWEhSLnN1Y2Nlc3MgPSBqcVhIUi5kb25lO1xuXHRcdGpxWEhSLmVycm9yID0ganFYSFIuZmFpbDtcblxuXHRcdC8vIFJlbW92ZSBoYXNoIGNoYXJhY3RlciAoIzc1MzE6IGFuZCBzdHJpbmcgcHJvbW90aW9uKVxuXHRcdC8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKHByZWZpbHRlcnMgbWlnaHQgZXhwZWN0IGl0KVxuXHRcdC8vIEhhbmRsZSBmYWxzeSB1cmwgaW4gdGhlIHNldHRpbmdzIG9iamVjdCAoIzEwMDkzOiBjb25zaXN0ZW5jeSB3aXRoIG9sZCBzaWduYXR1cmUpXG5cdFx0Ly8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlXG5cdFx0cy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGxvY2F0aW9uLmhyZWYgKSArIFwiXCIgKS5yZXBsYWNlKCByaGFzaCwgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9IGpRdWVyeS50cmltKCBzLmRhdGFUeXBlIHx8IFwiKlwiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cblx0XHQvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gdGhlIG9yaWdpbiBkb2Vzbid0IG1hdGNoIHRoZSBjdXJyZW50IG9yaWdpbi5cblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOC0xMStcblx0XHRcdC8vIElFIHRocm93cyBleGNlcHRpb24gaWYgdXJsIGlzIG1hbGZvcm1lZCwgZS5nLiBodHRwOi8vZXhhbXBsZS5jb206ODB4L1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSBzLnVybDtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTgtMTErXG5cdFx0XHRcdC8vIEFuY2hvcidzIGhvc3QgcHJvcGVydHkgaXNuJ3QgY29ycmVjdGx5IHNldCB3aGVuIHMudXJsIGlzIHJlbGF0aXZlXG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gdXJsQW5jaG9yLmhyZWY7XG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSBvcmlnaW5BbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyBvcmlnaW5BbmNob3IuaG9zdCAhPT1cblx0XHRcdFx0XHR1cmxBbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmxBbmNob3IuaG9zdDtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGFuIGVycm9yIHBhcnNpbmcgdGhlIFVSTCwgYXNzdW1lIGl0IGlzIGNyb3NzRG9tYWluLFxuXHRcdFx0XHQvLyBpdCBjYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIHRyYW5zcG9ydCBpZiBpdCBpcyBpbnZhbGlkXG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZ1xuXHRcdGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcHJlZmlsdGVyc1xuXHRcdGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmVcblx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdH1cblxuXHRcdC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG5cdFx0Ly8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOClcblx0XHRmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDtcblxuXHRcdC8vIFdhdGNoIGZvciBhIG5ldyBzZXQgb2YgcmVxdWVzdHNcblx0XHRpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdGFydFwiICk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBwZXJjYXNlIHRoZSB0eXBlXG5cdFx0cy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudFxuXHRcdHMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApO1xuXG5cdFx0Ly8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlXG5cdFx0Ly8gYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGxhdGVyIG9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybDtcblxuXHRcdC8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50XG5cdFx0aWYgKCAhcy5oYXNDb250ZW50ICkge1xuXG5cdFx0XHQvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsXG5cdFx0XHRpZiAoIHMuZGF0YSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgPSAoIHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGEgKTtcblxuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICtcblx0XHRcdFx0XHQoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0KCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBzdGF0ZSA9PT0gMiApICkge1xuXG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybiBqcVhIUjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGltZW91dFxuXHRcdFx0aWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7XG5cdFx0XHRcdHRpbWVvdXRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqcVhIUi5hYm9ydCggXCJ0aW1lb3V0XCIgKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBQcm9wYWdhdGUgZXhjZXB0aW9uIGFzIGVycm9yIGlmIG5vdCBkb25lXG5cdFx0XHRcdGlmICggc3RhdGUgPCAyICkge1xuXHRcdFx0XHRcdGRvbmUoIC0xLCBlICk7XG5cblx0XHRcdFx0Ly8gU2ltcGx5IHJldGhyb3cgb3RoZXJ3aXNlXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZVxuXHRcdGZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkge1xuXHRcdFx0dmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCxcblx0XHRcdFx0c3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7XG5cblx0XHRcdC8vIENhbGxlZCBvbmNlXG5cdFx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXRlIGlzIFwiZG9uZVwiIG5vd1xuXHRcdFx0c3RhdGUgPSAyO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApO1xuXG5cdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJMYXN0LU1vZGlmaWVkXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcImV0YWdcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0aWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0anFYSFIuc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG5cdFx0XHQvLyBTdWNjZXNzL0Vycm9yXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuXHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0b3BcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblxuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFRoZSB1cmwgY2FuIGJlIGFuIG9wdGlvbnMgb2JqZWN0ICh3aGljaCB0aGVuIG11c3QgaGF2ZSAudXJsKVxuXHRcdHJldHVybiBqUXVlcnkuYWpheCggalF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cdFx0XHR0eXBlOiBtZXRob2QsXG5cdFx0XHRkYXRhVHlwZTogdHlwZSxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBjYWxsYmFja1xuXHRcdH0sIGpRdWVyeS5pc1BsYWluT2JqZWN0KCB1cmwgKSAmJiB1cmwgKSApO1xuXHR9O1xufSApO1xuXG5cbmpRdWVyeS5fZXZhbFVybCA9IGZ1bmN0aW9uKCB1cmwgKSB7XG5cdHJldHVybiBqUXVlcnkuYWpheCgge1xuXHRcdHVybDogdXJsLFxuXG5cdFx0Ly8gTWFrZSB0aGlzIGV4cGxpY2l0LCBzaW5jZSB1c2VyIGNhbiBvdmVycmlkZSB0aGlzIHRocm91Z2ggYWpheFNldHVwICgjMTEyNjQpXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRhc3luYzogZmFsc2UsXG5cdFx0Z2xvYmFsOiBmYWxzZSxcblx0XHRcInRocm93c1wiOiB0cnVlXG5cdH0gKTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHR3cmFwQWxsOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgd3JhcDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpc1sgMCBdICkge1xuXG5cdFx0XHQvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZFxuXHRcdFx0d3JhcCA9IGpRdWVyeSggaHRtbCwgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgKS5lcSggMCApLmNsb25lKCB0cnVlICk7XG5cblx0XHRcdGlmICggdGhpc1sgMCBdLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0d3JhcC5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9ICkuYXBwZW5kKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0d3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaXNGdW5jdGlvbiA/IGh0bWwuY2FsbCggdGhpcywgaSApIDogaHRtbCApO1xuXHRcdH0gKTtcblx0fSxcblxuXHR1bndyYXA6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSApLmVuZCgpO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4gPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuICFqUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUoIGVsZW0gKTtcbn07XG5qUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuXHQvLyBTdXBwb3J0OiBPcGVyYSA8PSAxMi4xMlxuXHQvLyBPcGVyYSByZXBvcnRzIG9mZnNldFdpZHRocyBhbmQgb2Zmc2V0SGVpZ2h0cyBsZXNzIHRoYW4gemVybyBvbiBzb21lIGVsZW1lbnRzXG5cdC8vIFVzZSBPUiBpbnN0ZWFkIG9mIEFORCBhcyB0aGUgZWxlbWVudCBpcyBub3QgdmlzaWJsZSBpZiBlaXRoZXIgaXMgdHJ1ZVxuXHQvLyBTZWUgdGlja2V0cyAjMTA0MDYgYW5kICMxMzEzMlxuXHRyZXR1cm4gZWxlbS5vZmZzZXRXaWR0aCA+IDAgfHwgZWxlbS5vZmZzZXRIZWlnaHQgPiAwIHx8IGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPiAwO1xufTtcblxuXG5cblxudmFyIHIyMCA9IC8lMjAvZyxcblx0cmJyYWNrZXQgPSAvXFxbXFxdJC8sXG5cdHJDUkxGID0gL1xccj9cXG4vZyxcblx0cnN1Ym1pdHRlclR5cGVzID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLFxuXHRyc3VibWl0dGFibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7XG5cbmZ1bmN0aW9uIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIG9iaiwgdHJhZGl0aW9uYWwsIGFkZCApIHtcblx0dmFyIG5hbWU7XG5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggb2JqICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cblx0XHRcdFx0Ly8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuXHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRidWlsZFBhcmFtcyhcblx0XHRcdFx0XHRwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPSBudWxsID8gaSA6IFwiXCIgKSArIFwiXVwiLFxuXHRcdFx0XHRcdHYsXG5cdFx0XHRcdFx0dHJhZGl0aW9uYWwsXG5cdFx0XHRcdFx0YWRkXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdH0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiBqUXVlcnkudHlwZSggb2JqICkgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uXG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4ICsgXCJbXCIgKyBuYW1lICsgXCJdXCIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgcmV0dXJuIGl0cyB2YWx1ZVxuXHRcdFx0dmFsdWUgPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSA/IHZhbHVlKCkgOiAoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHRcdHNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlICk7XG5cdFx0fTtcblxuXHQvLyBTZXQgdHJhZGl0aW9uYWwgdG8gdHJ1ZSBmb3IgalF1ZXJ5IDw9IDEuMy4yIGJlaGF2aW9yLlxuXHRpZiAoIHRyYWRpdGlvbmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0dHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XG5cdH1cblxuXHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0alF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcblx0XHR9ICk7XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlIFwib2xkXCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyXG5cdFx0Ly8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG5cdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb25cblx0cmV0dXJuIHMuam9pbiggXCImXCIgKS5yZXBsYWNlKCByMjAsIFwiK1wiICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdH0sXG5cdHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHR9IClcblx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG5cdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0cnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJlxuXHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0fSApXG5cdFx0Lm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHR7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0fSApLmdldCgpO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoICggZSApIHt9XG59O1xuXG52YXIgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcblxuXHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbnN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHJTdXBwb3J0ZWQgKTtcbnN1cHBvcnQuYWpheCA9IHhoclN1cHBvcnRlZCA9ICEheGhyU3VwcG9ydGVkO1xuXG5qUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdHZhciBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaztcblxuXHQvLyBDcm9zcyBkb21haW4gb25seSBhbGxvd2VkIGlmIHN1cHBvcnRlZCB0aHJvdWdoIFhNTEh0dHBSZXF1ZXN0XG5cdGlmICggc3VwcG9ydC5jb3JzIHx8IHhoclN1cHBvcnRlZCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkge1xuXHRcdFx0XHR2YXIgaSxcblx0XHRcdFx0XHR4aHIgPSBvcHRpb25zLnhocigpO1xuXG5cdFx0XHRcdHhoci5vcGVuKFxuXHRcdFx0XHRcdG9wdGlvbnMudHlwZSxcblx0XHRcdFx0XHRvcHRpb25zLnVybCxcblx0XHRcdFx0XHRvcHRpb25zLmFzeW5jLFxuXHRcdFx0XHRcdG9wdGlvbnMudXNlcm5hbWUsXG5cdFx0XHRcdFx0b3B0aW9ucy5wYXNzd29yZFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRmb3IgKCBpIGluIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdFx0eGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlIG1pbWUgdHlwZSBpZiBuZWVkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLm1pbWVUeXBlICYmIHhoci5vdmVycmlkZU1pbWVUeXBlICkge1xuXHRcdFx0XHRcdHhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlclxuXHRcdFx0XHQvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlXG5cdFx0XHRcdC8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuXG5cdFx0XHRcdC8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKVxuXHRcdFx0XHQvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC5cblx0XHRcdFx0aWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSApIHtcblx0XHRcdFx0XHRoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrID0geGhyLm9ubG9hZCA9XG5cdFx0XHRcdFx0XHRcdFx0eGhyLm9uZXJyb3IgPSB4aHIub25hYm9ydCA9IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHQvLyBPbiBhIG1hbnVhbCBuYXRpdmUgYWJvcnQsIElFOSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlb2YgeGhyLnN0YXR1cyAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCAwLCBcImVycm9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFOSBoYXMgbm8gWEhSMiBidXQgdGhyb3dzIG9uIGJpbmFyeSAodHJhYy0xMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHQoIHhoci5yZXNwb25zZVR5cGUgfHwgXCJ0ZXh0XCIgKSAhPT0gXCJ0ZXh0XCIgIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayA9IHhoci5vbmVycm9yID0gY2FsbGJhY2soIFwiZXJyb3JcIiApO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdFx0XHQvLyBVc2Ugb25yZWFkeXN0YXRlY2hhbmdlIHRvIHJlcGxhY2Ugb25hYm9ydFxuXHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdGlmICggeGhyLm9uYWJvcnQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR4aHIub25hYm9ydCA9IGVycm9yQ2FsbGJhY2s7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdC8vIGJ1dCB0aGF0IHdpbGwgbm90IGhhbmRsZSBhIG5hdGl2ZSBhYm9ydFxuXHRcdFx0XHRcdFx0XHQvLyBBbHNvLCBzYXZlIGVycm9yQ2FsbGJhY2sgdG8gYSB2YXJpYWJsZVxuXHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayggXCJhYm9ydFwiICk7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHR4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRhY2NlcHRzOiB7XG5cdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgXCIgK1xuXHRcdFx0XCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHR9LFxuXHRjb250ZW50czoge1xuXHRcdHNjcmlwdDogL1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvXG5cdH0sXG5cdGNvbnZlcnRlcnM6IHtcblx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTtcblx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHMuY2FjaGUgPSBmYWxzZTtcblx0fVxuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy50eXBlID0gXCJHRVRcIjtcblx0fVxufSApO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblxuXHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzXG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHR2YXIgc2NyaXB0LCBjYWxsYmFjaztcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRzY3JpcHQgPSBqUXVlcnkoIFwiPHNjcmlwdD5cIiApLnByb3AoIHtcblx0XHRcdFx0XHRjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsXG5cdFx0XHRcdFx0c3JjOiBzLnVybFxuXHRcdFx0XHR9ICkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRyanNvbnAgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vO1xuXG4vLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlKysgKSApO1xuXHRcdHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuXHRcdHJldHVybiBjYWxsYmFjaztcblx0fVxufSApO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiIClcblx0XHRcdFx0XHQuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICYmXG5cdFx0XHRcdHJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiBcImRhdGFcIlxuXHRcdCk7XG5cblx0Ly8gSGFuZGxlIGlmZiB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlIGlzIFwianNvbnBcIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldFxuXHRpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09IFwianNvbnBcIiApIHtcblxuXHRcdC8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRcblx0XHRjYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBqUXVlcnkuaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0cy5qc29ucENhbGxiYWNrO1xuXG5cdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdGlmICgganNvblByb3AgKSB7XG5cdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0cy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuanNvbnAgKyBcIj1cIiArIGNhbGxiYWNrTmFtZTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG5cdFx0cy5jb252ZXJ0ZXJzWyBcInNjcmlwdCBqc29uXCIgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIEZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXRcblx0XHRcdGlmICggb3ZlcndyaXR0ZW4gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0alF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTtcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztcblxuXHRcdFx0XHQvLyBTYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdG9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG5cdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkge1xuXHRcdFx0XHRvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuXHRcdH0gKTtcblxuXHRcdC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuXHRcdHJldHVybiBcInNjcmlwdFwiO1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIEFyZ3VtZW50IFwiZGF0YVwiIHNob3VsZCBiZSBzdHJpbmcgb2YgaHRtbFxuLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LFxuLy8gZGVmYXVsdHMgdG8gZG9jdW1lbnRcbi8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcbmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXHRjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblxuXHR2YXIgcGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICksXG5cdFx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZiggXCIgXCIgKTtcblxuXHRpZiAoIG9mZiA+IC0xICkge1xuXHRcdHNlbGVjdG9yID0galF1ZXJ5LnRyaW0oIHVybC5zbGljZSggb2ZmICkgKTtcblx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG5cdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRjYWxsYmFjayA9IHBhcmFtcztcblx0XHRwYXJhbXMgPSB1bmRlZmluZWQ7XG5cblx0Ly8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuXHR9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdH1cblxuXHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcblx0XHRqUXVlcnkuYWpheCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIElmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWQuXG5cdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdC8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZFxuXHRcdFx0dHlwZTogdHlwZSB8fCBcIkdFVFwiLFxuXHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0fSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KCBcIjxkaXY+XCIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcblx0XHRcdFx0cmVzcG9uc2VUZXh0ICk7XG5cblx0XHQvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzIFwiZGF0YVwiLCBcInN0YXR1c1wiLCBcImpxWEhSXCJcblx0XHQvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuXG5cdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdH0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG5qUXVlcnkuZWFjaCggW1xuXHRcImFqYXhTdGFydFwiLFxuXHRcImFqYXhTdG9wXCIsXG5cdFwiYWpheENvbXBsZXRlXCIsXG5cdFwiYWpheEVycm9yXCIsXG5cdFwiYWpheFN1Y2Nlc3NcIixcblx0XCJhamF4U2VuZFwiXG5dLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59ICk7XG5cblxuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdH0gKS5sZW5ndGg7XG59O1xuXG5cblxuXG4vKipcbiAqIEdldHMgYSB3aW5kb3cgZnJvbSBhbiBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvdyggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0Vmlldztcbn1cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXG5cdFx0XHQvLyBVc2UgalF1ZXJ5LmV4dGVuZCBoZXJlIHRvIGFsbG93IG1vZGlmaWNhdGlvbiBvZiBjb29yZGluYXRlcyBhcmd1bWVudCAoZ2gtMTg0OClcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0fVxuXHRcdGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHR9XG5cblx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0b3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1ckVsZW0uY3NzKCBwcm9wcyApO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRvZmZzZXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHR0aGlzIDpcblx0XHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0dmFyIGRvY0VsZW0sIHdpbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuXHRcdFx0ZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRpZiAoICFkb2MgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHQvLyBNYWtlIHN1cmUgaXQncyBub3QgYSBkaXNjb25uZWN0ZWQgRE9NIG5vZGVcblx0XHRpZiAoICFqUXVlcnkuY29udGFpbnMoIGRvY0VsZW0sIGVsZW0gKSApIHtcblx0XHRcdHJldHVybiBib3g7XG5cdFx0fVxuXG5cdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR3aW4gPSBnZXRXaW5kb3coIGRvYyApO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IGJveC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbGVtLmNsaWVudFRvcCxcblx0XHRcdGxlZnQ6IGJveC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRMZWZ0XG5cdFx0fTtcblx0fSxcblxuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhdGhpc1sgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG5cdFx0Ly8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSxcblx0XHQvLyBiZWNhdXNlIGl0IGlzIGl0cyBvbmx5IG9mZnNldCBwYXJlbnRcblx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIEdldCAqcmVhbCogb2Zmc2V0UGFyZW50XG5cdFx0XHRvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCgpO1xuXG5cdFx0XHQvLyBHZXQgY29ycmVjdCBvZmZzZXRzXG5cdFx0XHRvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJodG1sXCIgKSApIHtcblx0XHRcdFx0cGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50Lm9mZnNldCgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb2Zmc2V0UGFyZW50IGJvcmRlcnNcblx0XHRcdHBhcmVudE9mZnNldC50b3AgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyVG9wV2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG5cdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gZG9jdW1lbnRFbGVtZW50IGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG5cdC8vIDEpIEZvciB0aGUgZWxlbWVudCBpbnNpZGUgdGhlIGlmcmFtZSB3aXRob3V0IG9mZnNldFBhcmVudCwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm5cblx0Ly8gICAgZG9jdW1lbnRFbGVtZW50IG9mIHRoZSBwYXJlbnQgd2luZG93XG5cdC8vIDIpIEZvciB0aGUgaGlkZGVuIG9yIGRldGFjaGVkIGVsZW1lbnRcblx0Ly8gMykgRm9yIGJvZHkgb3IgaHRtbCBlbGVtZW50LCBpLmUuIGluIGNhc2Ugb2YgdGhlIGh0bWwgbm9kZSAtIGl0IHdpbGwgcmV0dXJuIGl0c2VsZlxuXHQvL1xuXHQvLyBidXQgdGhvc2UgZXhjZXB0aW9ucyB3ZXJlIG5ldmVyIHByZXNlbnRlZCBhcyBhIHJlYWwgbGlmZSB1c2UtY2FzZXNcblx0Ly8gYW5kIG1pZ2h0IGJlIGNvbnNpZGVyZWQgYXMgbW9yZSBwcmVmZXJhYmxlIHJlc3VsdHMuXG5cdC8vXG5cdC8vIFRoaXMgbG9naWMsIGhvd2V2ZXIsIGlzIG5vdCBndWFyYW50ZWVkIGFuZCBjYW4gY2hhbmdlIGF0IGFueSBwb2ludCBpbiB0aGUgZnV0dXJlXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudDtcblxuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudEVsZW1lbnQ7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbi8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogXCJwYWdlWE9mZnNldFwiLCBzY3JvbGxUb3A6IFwicGFnZVlPZmZzZXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkge1xuXHR2YXIgdG9wID0gXCJwYWdlWU9mZnNldFwiID09PSBwcm9wO1xuXG5cdGpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHtcblx0XHRcdHZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTtcblxuXHRcdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHR9XG5cblx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHR3aW4uc2Nyb2xsVG8oXG5cdFx0XHRcdFx0IXRvcCA/IHZhbCA6IHdpbi5wYWdlWE9mZnNldCxcblx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXRcblx0XHRcdFx0KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbVsgbWV0aG9kIF0gPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fTtcbn0gKTtcblxuLy8gU3VwcG9ydDogU2FmYXJpPDctOCssIENocm9tZTwzNy00NCtcbi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG4vLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcbi8vIEJsaW5rIGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTIyOTI4MFxuLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDtcbi8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5qUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbixcblx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRjb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApO1xuXG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSApO1xuXG5cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sXG5cdFx0ZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cblx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcblx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZG9jO1xuXG5cdFx0XHRcdGlmICggalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBBcyBvZiA1LzgvMjAxMiB0aGlzIHdpbGwgeWllbGQgaW5jb3JyZWN0IHJlc3VsdHMgZm9yIE1vYmlsZSBTYWZhcmksIGJ1dCB0aGVyZVxuXHRcdFx0XHRcdC8vIGlzbid0IGEgd2hvbGUgbG90IHdlIGNhbiBkby4gU2VlIHB1bGwgcmVxdWVzdCBhdCB0aGlzIFVSTCBmb3IgZGlzY3Vzc2lvbjpcblx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzc2NFxuXHRcdFx0XHRcdHJldHVybiBlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdC8vIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuXHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcIm9mZnNldFwiICsgbmFtZSBdLCBkb2NbIFwib2Zmc2V0XCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0gKTtcbn0gKTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblxuXHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/XG5cdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcblx0XHRcdHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHR9LFxuXHRzaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5sZW5ndGg7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmFuZFNlbGYgPSBqUXVlcnkuZm4uYWRkQmFjaztcblxuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5O1xuXHR9ICk7XG59XG5cblxuXG52YXJcblxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoICFub0dsb2JhbCApIHtcblx0d2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5O1xufVxuXG5yZXR1cm4galF1ZXJ5O1xufSkpO1xuIiwiLypnbG9iYWxzIGpRdWVyeSwgZGVmaW5lLCBtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUsIHdpbmRvdywgZG9jdW1lbnQsIHBvc3RNZXNzYWdlICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG5cdH1cblx0ZWxzZSBpZih0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0ZmFjdG9yeShqUXVlcnkpO1xuXHR9XG59KGZ1bmN0aW9uICgkLCB1bmRlZmluZWQpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIGpzVHJlZSAzLjMuM1xuICogaHR0cDovL2pzdHJlZS5jb20vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IEl2YW4gQm96aGFub3YgKGh0dHA6Ly92YWthdGEuY29tKVxuICpcbiAqIExpY2Vuc2VkIHNhbWUgYXMganF1ZXJ5IC0gdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgTGljZW5zZVxuICogICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICovXG4vKiFcbiAqIGlmIHVzaW5nIGpzbGludCBwbGVhc2UgYWxsb3cgZm9yIHRoZSBqUXVlcnkgZ2xvYmFsIGFuZCB1c2UgZm9sbG93aW5nIG9wdGlvbnM6XG4gKiBqc2xpbnQ6IGxvb3BmdW5jOiB0cnVlLCBicm93c2VyOiB0cnVlLCBhc3M6IHRydWUsIGJpdHdpc2U6IHRydWUsIGNvbnRpbnVlOiB0cnVlLCBub21lbjogdHJ1ZSwgcGx1c3BsdXM6IHRydWUsIHJlZ2V4cDogdHJ1ZSwgdW5wYXJhbTogdHJ1ZSwgdG9kbzogdHJ1ZSwgd2hpdGU6IHRydWVcbiAqL1xuLypqc2hpbnQgLVcwODMgKi9cblxuXHQvLyBwcmV2ZW50IGFub3RoZXIgbG9hZD8gbWF5YmUgdGhlcmUgaXMgYSBiZXR0ZXIgd2F5P1xuXHRpZigkLmpzdHJlZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8qKlxuXHQgKiAjIyMganNUcmVlIGNvcmUgZnVuY3Rpb25hbGl0eVxuXHQgKi9cblxuXHQvLyBpbnRlcm5hbCB2YXJpYWJsZXNcblx0dmFyIGluc3RhbmNlX2NvdW50ZXIgPSAwLFxuXHRcdGNjcF9ub2RlID0gZmFsc2UsXG5cdFx0Y2NwX21vZGUgPSBmYWxzZSxcblx0XHRjY3BfaW5zdCA9IGZhbHNlLFxuXHRcdHRoZW1lc19sb2FkZWQgPSBbXSxcblx0XHRzcmMgPSAkKCdzY3JpcHQ6bGFzdCcpLmF0dHIoJ3NyYycpLFxuXHRcdGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50OyAvLyBsb2NhbCB2YXJpYWJsZSBpcyBhbHdheXMgZmFzdGVyIHRvIGFjY2VzcyB0aGVuIGEgZ2xvYmFsXG5cblx0LyoqXG5cdCAqIGhvbGRzIGFsbCBqc3RyZWUgcmVsYXRlZCBmdW5jdGlvbnMgYW5kIHZhcmlhYmxlcywgaW5jbHVkaW5nIHRoZSBhY3R1YWwgY2xhc3MgYW5kIG1ldGhvZHMgdG8gY3JlYXRlLCBhY2Nlc3MgYW5kIG1hbmlwdWxhdGUgaW5zdGFuY2VzLlxuXHQgKiBAbmFtZSAkLmpzdHJlZVxuXHQgKi9cblx0JC5qc3RyZWUgPSB7XG5cdFx0LyoqXG5cdFx0ICogc3BlY2lmaWVzIHRoZSBqc3RyZWUgdmVyc2lvbiBpbiB1c2Vcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS52ZXJzaW9uXG5cdFx0ICovXG5cdFx0dmVyc2lvbiA6ICczLjMuMycsXG5cdFx0LyoqXG5cdFx0ICogaG9sZHMgYWxsIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCB3aGVuIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0c1xuXHRcdCAqL1xuXHRcdGRlZmF1bHRzIDoge1xuXHRcdFx0LyoqXG5cdFx0XHQgKiBjb25maWd1cmUgd2hpY2ggcGx1Z2lucyB3aWxsIGJlIGFjdGl2ZSBvbiBhbiBpbnN0YW5jZS4gU2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MsIHdoZXJlIGVhY2ggZWxlbWVudCBpcyBhIHBsdWdpbiBuYW1lLiBUaGUgZGVmYXVsdCBpcyBgW11gXG5cdFx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5wbHVnaW5zXG5cdFx0XHQgKi9cblx0XHRcdHBsdWdpbnMgOiBbXVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogc3RvcmVzIGFsbCBsb2FkZWQganN0cmVlIHBsdWdpbnMgKHVzZWQgaW50ZXJuYWxseSlcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5wbHVnaW5zXG5cdFx0ICovXG5cdFx0cGx1Z2lucyA6IHt9LFxuXHRcdHBhdGggOiBzcmMgJiYgc3JjLmluZGV4T2YoJy8nKSAhPT0gLTEgPyBzcmMucmVwbGFjZSgvXFwvW15cXC9dKyQvLCcnKSA6ICcnLFxuXHRcdGlkcmVnZXggOiAvW1xcXFw6JiFefCgpXFxbXFxdPD5AKicrfiNcIjsuLD1cXC0gXFwvJHt9JT9gXS9nLFxuXHRcdHJvb3QgOiAnIydcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBjcmVhdGVzIGEganN0cmVlIGluc3RhbmNlXG5cdCAqIEBuYW1lICQuanN0cmVlLmNyZWF0ZShlbCBbLCBvcHRpb25zXSlcblx0ICogQHBhcmFtIHtET01FbGVtZW50fGpRdWVyeXxTdHJpbmd9IGVsIHRoZSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgaW5zdGFuY2Ugb24sIGNhbiBiZSBqUXVlcnkgZXh0ZW5kZWQgb3IgYSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGlzIGluc3RhbmNlIChleHRlbmRzIGAkLmpzdHJlZS5kZWZhdWx0c2ApXG5cdCAqIEByZXR1cm4ge2pzVHJlZX0gdGhlIG5ldyBpbnN0YW5jZVxuXHQgKi9cblx0JC5qc3RyZWUuY3JlYXRlID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG5cdFx0dmFyIHRtcCA9IG5ldyAkLmpzdHJlZS5jb3JlKCsraW5zdGFuY2VfY291bnRlciksXG5cdFx0XHRvcHQgPSBvcHRpb25zO1xuXHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5qc3RyZWUuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcdGlmKG9wdCAmJiBvcHQucGx1Z2lucykge1xuXHRcdFx0b3B0aW9ucy5wbHVnaW5zID0gb3B0LnBsdWdpbnM7XG5cdFx0fVxuXHRcdCQuZWFjaChvcHRpb25zLnBsdWdpbnMsIGZ1bmN0aW9uIChpLCBrKSB7XG5cdFx0XHRpZihpICE9PSAnY29yZScpIHtcblx0XHRcdFx0dG1wID0gdG1wLnBsdWdpbihrLCBvcHRpb25zW2tdKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKGVsKS5kYXRhKCdqc3RyZWUnLCB0bXApO1xuXHRcdHRtcC5pbml0KGVsLCBvcHRpb25zKTtcblx0XHRyZXR1cm4gdG1wO1xuXHR9O1xuXHQvKipcblx0ICogcmVtb3ZlIGFsbCB0cmFjZXMgb2YganN0cmVlIGZyb20gdGhlIERPTSBhbmQgZGVzdHJveSBhbGwgaW5zdGFuY2VzXG5cdCAqIEBuYW1lICQuanN0cmVlLmRlc3Ryb3koKVxuXHQgKi9cblx0JC5qc3RyZWUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkKCcuanN0cmVlOmpzdHJlZScpLmpzdHJlZSgnZGVzdHJveScpO1xuXHRcdCQoZG9jdW1lbnQpLm9mZignLmpzdHJlZScpO1xuXHR9O1xuXHQvKipcblx0ICogdGhlIGpzdHJlZSBjbGFzcyBjb25zdHJ1Y3RvciwgdXNlZCBvbmx5IGludGVybmFsbHlcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgJC5qc3RyZWUuY29yZShpZClcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGlkIHRoaXMgaW5zdGFuY2UncyBpbmRleFxuXHQgKi9cblx0JC5qc3RyZWUuY29yZSA9IGZ1bmN0aW9uIChpZCkge1xuXHRcdHRoaXMuX2lkID0gaWQ7XG5cdFx0dGhpcy5fY250ID0gMDtcblx0XHR0aGlzLl93cmsgPSBudWxsO1xuXHRcdHRoaXMuX2RhdGEgPSB7XG5cdFx0XHRjb3JlIDoge1xuXHRcdFx0XHR0aGVtZXMgOiB7XG5cdFx0XHRcdFx0bmFtZSA6IGZhbHNlLFxuXHRcdFx0XHRcdGRvdHMgOiBmYWxzZSxcblx0XHRcdFx0XHRpY29ucyA6IGZhbHNlLFxuXHRcdFx0XHRcdGVsbGlwc2lzIDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0c2VsZWN0ZWQgOiBbXSxcblx0XHRcdFx0bGFzdF9lcnJvciA6IHt9LFxuXHRcdFx0XHR3b3JraW5nIDogZmFsc2UsXG5cdFx0XHRcdHdvcmtlcl9xdWV1ZSA6IFtdLFxuXHRcdFx0XHRmb2N1c2VkIDogbnVsbFxuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cdC8qKlxuXHQgKiBnZXQgYSByZWZlcmVuY2UgdG8gYW4gZXhpc3RpbmcgaW5zdGFuY2Vcblx0ICpcblx0ICogX19FeGFtcGxlc19fXG5cdCAqXG5cdCAqXHQvLyBwcm92aWRlZCBhIGNvbnRhaW5lciB3aXRoIGFuIElEIG9mIFwidHJlZVwiLCBhbmQgYSBuZXN0ZWQgbm9kZSB3aXRoIGFuIElEIG9mIFwiYnJhbmNoXCJcblx0ICpcdC8vIGFsbCBvZiB0aGVyZSB3aWxsIHJldHVybiB0aGUgc2FtZSBpbnN0YW5jZVxuXHQgKlx0JC5qc3RyZWUucmVmZXJlbmNlKCd0cmVlJyk7XG5cdCAqXHQkLmpzdHJlZS5yZWZlcmVuY2UoJyN0cmVlJyk7XG5cdCAqXHQkLmpzdHJlZS5yZWZlcmVuY2UoJCgnI3RyZWUnKSk7XG5cdCAqXHQkLmpzdHJlZS5yZWZlcmVuY2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SUQoJ3RyZWUnKSk7XG5cdCAqXHQkLmpzdHJlZS5yZWZlcmVuY2UoJ2JyYW5jaCcpO1xuXHQgKlx0JC5qc3RyZWUucmVmZXJlbmNlKCcjYnJhbmNoJyk7XG5cdCAqXHQkLmpzdHJlZS5yZWZlcmVuY2UoJCgnI2JyYW5jaCcpKTtcblx0ICpcdCQuanN0cmVlLnJlZmVyZW5jZShkb2N1bWVudC5nZXRFbGVtZW50QnlJRCgnYnJhbmNoJykpO1xuXHQgKlxuXHQgKiBAbmFtZSAkLmpzdHJlZS5yZWZlcmVuY2UobmVlZGxlKVxuXHQgKiBAcGFyYW0ge0RPTUVsZW1lbnR8alF1ZXJ5fFN0cmluZ30gbmVlZGxlXG5cdCAqIEByZXR1cm4ge2pzVHJlZXxudWxsfSB0aGUgaW5zdGFuY2Ugb3IgYG51bGxgIGlmIG5vdCBmb3VuZFxuXHQgKi9cblx0JC5qc3RyZWUucmVmZXJlbmNlID0gZnVuY3Rpb24gKG5lZWRsZSkge1xuXHRcdHZhciB0bXAgPSBudWxsLFxuXHRcdFx0b2JqID0gbnVsbDtcblx0XHRpZihuZWVkbGUgJiYgbmVlZGxlLmlkICYmICghbmVlZGxlLnRhZ05hbWUgfHwgIW5lZWRsZS5ub2RlVHlwZSkpIHsgbmVlZGxlID0gbmVlZGxlLmlkOyB9XG5cblx0XHRpZighb2JqIHx8ICFvYmoubGVuZ3RoKSB7XG5cdFx0XHR0cnkgeyBvYmogPSAkKG5lZWRsZSk7IH0gY2F0Y2ggKGlnbm9yZSkgeyB9XG5cdFx0fVxuXHRcdGlmKCFvYmogfHwgIW9iai5sZW5ndGgpIHtcblx0XHRcdHRyeSB7IG9iaiA9ICQoJyMnICsgbmVlZGxlLnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJykpOyB9IGNhdGNoIChpZ25vcmUpIHsgfVxuXHRcdH1cblx0XHRpZihvYmogJiYgb2JqLmxlbmd0aCAmJiAob2JqID0gb2JqLmNsb3Nlc3QoJy5qc3RyZWUnKSkubGVuZ3RoICYmIChvYmogPSBvYmouZGF0YSgnanN0cmVlJykpKSB7XG5cdFx0XHR0bXAgPSBvYmo7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0JCgnLmpzdHJlZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgaW5zdCA9ICQodGhpcykuZGF0YSgnanN0cmVlJyk7XG5cdFx0XHRcdGlmKGluc3QgJiYgaW5zdC5fbW9kZWwuZGF0YVtuZWVkbGVdKSB7XG5cdFx0XHRcdFx0dG1wID0gaW5zdDtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdG1wO1xuXHR9O1xuXHQvKipcblx0ICogQ3JlYXRlIGFuIGluc3RhbmNlLCBnZXQgYW4gaW5zdGFuY2Ugb3IgaW52b2tlIGEgY29tbWFuZCBvbiBhIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBJZiB0aGVyZSBpcyBubyBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgbm9kZSBhIG5ldyBvbmUgaXMgY3JlYXRlZCBhbmQgYGFyZ2AgaXMgdXNlZCB0byBleHRlbmQgYCQuanN0cmVlLmRlZmF1bHRzYCBmb3IgdGhpcyBuZXcgaW5zdGFuY2UuIFRoZXJlIHdvdWxkIGJlIG5vIHJldHVybiB2YWx1ZSAoY2hhaW5pbmcgaXMgbm90IGJyb2tlbikuXG5cdCAqXG5cdCAqIElmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGluc3RhbmNlIGFuZCBgYXJnYCBpcyBhIHN0cmluZyB0aGUgY29tbWFuZCBzcGVjaWZpZWQgYnkgYGFyZ2AgaXMgZXhlY3V0ZWQgb24gdGhlIGluc3RhbmNlLCB3aXRoIGFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIHZhbHVlIGl0IHdpbGwgYmUgcmV0dXJuZWQgKGNoYWluaW5nIGNvdWxkIGJyZWFrIGRlcGVuZGluZyBvbiBmdW5jdGlvbikuXG5cdCAqXG5cdCAqIElmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGluc3RhbmNlIGFuZCBgYXJnYCBpcyBub3QgYSBzdHJpbmcgdGhlIGluc3RhbmNlIGl0c2VsZiBpcyByZXR1cm5lZCAoc2ltaWxhciB0byBgJC5qc3RyZWUucmVmZXJlbmNlYCkuXG5cdCAqXG5cdCAqIEluIGFueSBvdGhlciBjYXNlIC0gbm90aGluZyBpcyByZXR1cm5lZCBhbmQgY2hhaW5pbmcgaXMgbm90IGJyb2tlbi5cblx0ICpcblx0ICogX19FeGFtcGxlc19fXG5cdCAqXG5cdCAqXHQkKCcjdHJlZTEnKS5qc3RyZWUoKTsgLy8gY3JlYXRlcyBhbiBpbnN0YW5jZVxuXHQgKlx0JCgnI3RyZWUyJykuanN0cmVlKHsgcGx1Z2lucyA6IFtdIH0pOyAvLyBjcmVhdGUgYW4gaW5zdGFuY2Ugd2l0aCBzb21lIG9wdGlvbnNcblx0ICpcdCQoJyN0cmVlMScpLmpzdHJlZSgnb3Blbl9ub2RlJywgJyNicmFuY2hfMScpOyAvLyBjYWxsIGEgbWV0aG9kIG9uIGFuIGV4aXN0aW5nIGluc3RhbmNlLCBwYXNzaW5nIGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAqXHQkKCcjdHJlZTInKS5qc3RyZWUoKTsgLy8gZ2V0IGFuIGV4aXN0aW5nIGluc3RhbmNlIChvciBjcmVhdGUgYW4gaW5zdGFuY2UpXG5cdCAqXHQkKCcjdHJlZTInKS5qc3RyZWUodHJ1ZSk7IC8vIGdldCBhbiBleGlzdGluZyBpbnN0YW5jZSAod2lsbCBub3QgY3JlYXRlIG5ldyBpbnN0YW5jZSlcblx0ICpcdCQoJyNicmFuY2hfMScpLmpzdHJlZSgpLnNlbGVjdF9ub2RlKCcjYnJhbmNoXzEnKTsgLy8gZ2V0IGFuIGluc3RhbmNlICh1c2luZyBhIG5lc3RlZCBlbGVtZW50IGFuZCBjYWxsIGEgbWV0aG9kKVxuXHQgKlxuXHQgKiBAbmFtZSAkKCkuanN0cmVlKFthcmddKVxuXHQgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGFyZ1xuXHQgKiBAcmV0dXJuIHtNaXhlZH1cblx0ICovXG5cdCQuZm4uanN0cmVlID0gZnVuY3Rpb24gKGFyZykge1xuXHRcdC8vIGNoZWNrIGZvciBzdHJpbmcgYXJndW1lbnRcblx0XHR2YXIgaXNfbWV0aG9kXHQ9ICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJyksXG5cdFx0XHRhcmdzXHRcdD0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcblx0XHRcdHJlc3VsdFx0XHQ9IG51bGw7XG5cdFx0aWYoYXJnID09PSB0cnVlICYmICF0aGlzLmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHR0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gZ2V0IHRoZSBpbnN0YW5jZSAoaWYgdGhlcmUgaXMgb25lKSBhbmQgbWV0aG9kIChpZiBpdCBleGlzdHMpXG5cdFx0XHR2YXIgaW5zdGFuY2UgPSAkLmpzdHJlZS5yZWZlcmVuY2UodGhpcyksXG5cdFx0XHRcdG1ldGhvZCA9IGlzX21ldGhvZCAmJiBpbnN0YW5jZSA/IGluc3RhbmNlW2FyZ10gOiBudWxsO1xuXHRcdFx0Ly8gaWYgY2FsbGluZyBhIG1ldGhvZCwgYW5kIG1ldGhvZCBpcyBhdmFpbGFibGUgLSBleGVjdXRlIG9uIHRoZSBpbnN0YW5jZVxuXHRcdFx0cmVzdWx0ID0gaXNfbWV0aG9kICYmIG1ldGhvZCA/XG5cdFx0XHRcdG1ldGhvZC5hcHBseShpbnN0YW5jZSwgYXJncykgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gaW5zdGFuY2UgYW5kIG5vIG1ldGhvZCBpcyBiZWluZyBjYWxsZWQgLSBjcmVhdGUgb25lXG5cdFx0XHRpZighaW5zdGFuY2UgJiYgIWlzX21ldGhvZCAmJiAoYXJnID09PSB1bmRlZmluZWQgfHwgJC5pc1BsYWluT2JqZWN0KGFyZykpKSB7XG5cdFx0XHRcdCQuanN0cmVlLmNyZWF0ZSh0aGlzLCBhcmcpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgYW4gaW5zdGFuY2UgYW5kIG5vIG1ldGhvZCBpcyBjYWxsZWQgLSByZXR1cm4gdGhlIGluc3RhbmNlXG5cdFx0XHRpZiggKGluc3RhbmNlICYmICFpc19tZXRob2QpIHx8IGFyZyA9PT0gdHJ1ZSApIHtcblx0XHRcdFx0cmVzdWx0ID0gaW5zdGFuY2UgfHwgZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvLyBpZiB0aGVyZSB3YXMgYSBtZXRob2QgY2FsbCB3aGljaCByZXR1cm5lZCBhIHJlc3VsdCAtIGJyZWFrIGFuZCByZXR1cm4gdGhlIHZhbHVlXG5cdFx0XHRpZihyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIGlmIHRoZXJlIHdhcyBhIG1ldGhvZCBjYWxsIHdpdGggYSB2YWxpZCByZXR1cm4gdmFsdWUgLSByZXR1cm4gdGhhdCwgb3RoZXJ3aXNlIGNvbnRpbnVlIHRoZSBjaGFpblxuXHRcdHJldHVybiByZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0ICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0cmVzdWx0IDogdGhpcztcblx0fTtcblx0LyoqXG5cdCAqIHVzZWQgdG8gZmluZCBlbGVtZW50cyBjb250YWluaW5nIGFuIGluc3RhbmNlXG5cdCAqXG5cdCAqIF9fRXhhbXBsZXNfX1xuXHQgKlxuXHQgKlx0JCgnZGl2OmpzdHJlZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHQgKlx0XHQkKHRoaXMpLmpzdHJlZSgnZGVzdHJveScpO1xuXHQgKlx0fSk7XG5cdCAqXG5cdCAqIEBuYW1lICQoJzpqc3RyZWUnKVxuXHQgKiBAcmV0dXJuIHtqUXVlcnl9XG5cdCAqL1xuXHQkLmV4cHIucHNldWRvcy5qc3RyZWUgPSAkLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKHNlYXJjaCkge1xuXHRcdHJldHVybiBmdW5jdGlvbihhKSB7XG5cdFx0XHRyZXR1cm4gJChhKS5oYXNDbGFzcygnanN0cmVlJykgJiZcblx0XHRcdFx0JChhKS5kYXRhKCdqc3RyZWUnKSAhPT0gdW5kZWZpbmVkO1xuXHRcdH07XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBzdG9yZXMgYWxsIGRlZmF1bHRzIGZvciB0aGUgY29yZVxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlXG5cdCAqL1xuXHQkLmpzdHJlZS5kZWZhdWx0cy5jb3JlID0ge1xuXHRcdC8qKlxuXHRcdCAqIGRhdGEgY29uZmlndXJhdGlvblxuXHRcdCAqXG5cdFx0ICogSWYgbGVmdCBhcyBgZmFsc2VgIHRoZSBIVE1MIGluc2lkZSB0aGUganN0cmVlIGNvbnRhaW5lciBlbGVtZW50IGlzIHVzZWQgdG8gcG9wdWxhdGUgdGhlIHRyZWUgKHRoYXQgc2hvdWxkIGJlIGFuIHVub3JkZXJlZCBsaXN0IHdpdGggbGlzdCBpdGVtcykuXG5cdFx0ICpcblx0XHQgKiBZb3UgY2FuIGFsc28gcGFzcyBpbiBhIEhUTUwgc3RyaW5nIG9yIGEgSlNPTiBhcnJheSBoZXJlLlxuXHRcdCAqXG5cdFx0ICogSXQgaXMgcG9zc2libGUgdG8gcGFzcyBpbiBhIHN0YW5kYXJkIGpRdWVyeS1saWtlIEFKQVggY29uZmlnIGFuZCBqc3RyZWUgd2lsbCBhdXRvbWF0aWNhbGx5IGRldGVybWluZSBpZiB0aGUgcmVzcG9uc2UgaXMgSlNPTiBvciBIVE1MIGFuZCB1c2UgdGhhdCB0byBwb3B1bGF0ZSB0aGUgdHJlZS5cblx0XHQgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhbmRhcmQgalF1ZXJ5IGFqYXggb3B0aW9ucyBoZXJlIHlvdSBjYW4gc3VwcHkgZnVuY3Rpb25zIGZvciBgZGF0YWAgYW5kIGB1cmxgLCB0aGUgZnVuY3Rpb25zIHdpbGwgYmUgcnVuIGluIHRoZSBjdXJyZW50IGluc3RhbmNlJ3Mgc2NvcGUgYW5kIGEgcGFyYW0gd2lsbCBiZSBwYXNzZWQgaW5kaWNhdGluZyB3aGljaCBub2RlIGlzIGJlaW5nIGxvYWRlZCwgdGhlIHJldHVybiB2YWx1ZSBvZiB0aG9zZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VkLlxuXHRcdCAqXG5cdFx0ICogVGhlIGxhc3Qgb3B0aW9uIGlzIHRvIHNwZWNpZnkgYSBmdW5jdGlvbiwgdGhhdCBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIG5vZGUgYmVpbmcgbG9hZGVkIGFzIGFyZ3VtZW50IGFuZCBhIHNlY29uZCBwYXJhbSB3aGljaCBpcyBhIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgcmVzdWx0LlxuXHRcdCAqXG5cdFx0ICogX19FeGFtcGxlc19fXG5cdFx0ICpcblx0XHQgKlx0Ly8gQUpBWFxuXHRcdCAqXHQkKCcjdHJlZScpLmpzdHJlZSh7XG5cdFx0ICpcdFx0J2NvcmUnIDoge1xuXHRcdCAqXHRcdFx0J2RhdGEnIDoge1xuXHRcdCAqXHRcdFx0XHQndXJsJyA6ICcvZ2V0L2NoaWxkcmVuLycsXG5cdFx0ICpcdFx0XHRcdCdkYXRhJyA6IGZ1bmN0aW9uIChub2RlKSB7XG5cdFx0ICpcdFx0XHRcdFx0cmV0dXJuIHsgJ2lkJyA6IG5vZGUuaWQgfTtcblx0XHQgKlx0XHRcdFx0fVxuXHRcdCAqXHRcdFx0fVxuXHRcdCAqXHRcdH0pO1xuXHRcdCAqXG5cdFx0ICpcdC8vIGRpcmVjdCBkYXRhXG5cdFx0ICpcdCQoJyN0cmVlJykuanN0cmVlKHtcblx0XHQgKlx0XHQnY29yZScgOiB7XG5cdFx0ICpcdFx0XHQnZGF0YScgOiBbXG5cdFx0ICpcdFx0XHRcdCdTaW1wbGUgcm9vdCBub2RlJyxcblx0XHQgKlx0XHRcdFx0e1xuXHRcdCAqXHRcdFx0XHRcdCdpZCcgOiAnbm9kZV8yJyxcblx0XHQgKlx0XHRcdFx0XHQndGV4dCcgOiAnUm9vdCBub2RlIHdpdGggb3B0aW9ucycsXG5cdFx0ICpcdFx0XHRcdFx0J3N0YXRlJyA6IHsgJ29wZW5lZCcgOiB0cnVlLCAnc2VsZWN0ZWQnIDogdHJ1ZSB9LFxuXHRcdCAqXHRcdFx0XHRcdCdjaGlsZHJlbicgOiBbIHsgJ3RleHQnIDogJ0NoaWxkIDEnIH0sICdDaGlsZCAyJ11cblx0XHQgKlx0XHRcdFx0fVxuXHRcdCAqXHRcdFx0XVxuXHRcdCAqXHRcdH1cblx0XHQgKlx0fSk7XG5cdFx0ICpcblx0XHQgKlx0Ly8gZnVuY3Rpb25cblx0XHQgKlx0JCgnI3RyZWUnKS5qc3RyZWUoe1xuXHRcdCAqXHRcdCdjb3JlJyA6IHtcblx0XHQgKlx0XHRcdCdkYXRhJyA6IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG5cdFx0ICpcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgWydSb290IDEnLCAnUm9vdCAyJ10pO1xuXHRcdCAqXHRcdFx0fVxuXHRcdCAqXHRcdH0pO1xuXHRcdCAqXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS5kYXRhXG5cdFx0ICovXG5cdFx0ZGF0YVx0XHRcdDogZmFsc2UsXG5cdFx0LyoqXG5cdFx0ICogY29uZmlndXJlIHRoZSB2YXJpb3VzIHN0cmluZ3MgdXNlZCB0aHJvdWdob3V0IHRoZSB0cmVlXG5cdFx0ICpcblx0XHQgKiBZb3UgY2FuIHVzZSBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleSBpcyB0aGUgc3RyaW5nIHlvdSBuZWVkIHRvIHJlcGxhY2UgYW5kIHRoZSB2YWx1ZSBpcyB5b3VyIHJlcGxhY2VtZW50LlxuXHRcdCAqIEFub3RoZXIgb3B0aW9uIGlzIHRvIHNwZWNpZnkgYSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50IG9mIHRoZSBuZWVkZWQgc3RyaW5nIGFuZCBzaG91bGQgcmV0dXJuIHRoZSByZXBsYWNlbWVudC5cblx0XHQgKiBJZiBsZWZ0IGFzIGBmYWxzZWAgbm8gcmVwbGFjZW1lbnQgaXMgbWFkZS5cblx0XHQgKlxuXHRcdCAqIF9fRXhhbXBsZXNfX1xuXHRcdCAqXG5cdFx0ICpcdCQoJyN0cmVlJykuanN0cmVlKHtcblx0XHQgKlx0XHQnY29yZScgOiB7XG5cdFx0ICpcdFx0XHQnc3RyaW5ncycgOiB7XG5cdFx0ICpcdFx0XHRcdCdMb2FkaW5nIC4uLicgOiAnUGxlYXNlIHdhaXQgLi4uJ1xuXHRcdCAqXHRcdFx0fVxuXHRcdCAqXHRcdH1cblx0XHQgKlx0fSk7XG5cdFx0ICpcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLnN0cmluZ3Ncblx0XHQgKi9cblx0XHRzdHJpbmdzXHRcdFx0OiBmYWxzZSxcblx0XHQvKipcblx0XHQgKiBkZXRlcm1pbmVzIHdoYXQgaGFwcGVucyB3aGVuIGEgdXNlciB0cmllcyB0byBtb2RpZnkgdGhlIHN0cnVjdHVyZSBvZiB0aGUgdHJlZVxuXHRcdCAqIElmIGxlZnQgYXMgYGZhbHNlYCBhbGwgb3BlcmF0aW9ucyBsaWtlIGNyZWF0ZSwgcmVuYW1lLCBkZWxldGUsIG1vdmUgb3IgY29weSBhcmUgcHJldmVudGVkLlxuXHRcdCAqIFlvdSBjYW4gc2V0IHRoaXMgdG8gYHRydWVgIHRvIGFsbG93IGFsbCBpbnRlcmFjdGlvbnMgb3IgdXNlIGEgZnVuY3Rpb24gdG8gaGF2ZSBiZXR0ZXIgY29udHJvbC5cblx0XHQgKlxuXHRcdCAqIF9fRXhhbXBsZXNfX1xuXHRcdCAqXG5cdFx0ICpcdCQoJyN0cmVlJykuanN0cmVlKHtcblx0XHQgKlx0XHQnY29yZScgOiB7XG5cdFx0ICpcdFx0XHQnY2hlY2tfY2FsbGJhY2snIDogZnVuY3Rpb24gKG9wZXJhdGlvbiwgbm9kZSwgbm9kZV9wYXJlbnQsIG5vZGVfcG9zaXRpb24sIG1vcmUpIHtcblx0XHQgKlx0XHRcdFx0Ly8gb3BlcmF0aW9uIGNhbiBiZSAnY3JlYXRlX25vZGUnLCAncmVuYW1lX25vZGUnLCAnZGVsZXRlX25vZGUnLCAnbW92ZV9ub2RlJyBvciAnY29weV9ub2RlJ1xuXHRcdCAqXHRcdFx0XHQvLyBpbiBjYXNlIG9mICdyZW5hbWVfbm9kZScgbm9kZV9wb3NpdGlvbiBpcyBmaWxsZWQgd2l0aCB0aGUgbmV3IG5vZGUgbmFtZVxuXHRcdCAqXHRcdFx0XHRyZXR1cm4gb3BlcmF0aW9uID09PSAncmVuYW1lX25vZGUnID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdCAqXHRcdFx0fVxuXHRcdCAqXHRcdH1cblx0XHQgKlx0fSk7XG5cdFx0ICpcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLmNoZWNrX2NhbGxiYWNrXG5cdFx0ICovXG5cdFx0Y2hlY2tfY2FsbGJhY2tcdDogZmFsc2UsXG5cdFx0LyoqXG5cdFx0ICogYSBjYWxsYmFjayBjYWxsZWQgd2l0aCBhIHNpbmdsZSBvYmplY3QgcGFyYW1ldGVyIGluIHRoZSBpbnN0YW5jZSdzIHNjb3BlIHdoZW4gc29tZXRoaW5nIGdvZXMgd3JvbmcgKG9wZXJhdGlvbiBwcmV2ZW50ZWQsIGFqYXggZmFpbGVkLCBldGMpXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS5lcnJvclxuXHRcdCAqL1xuXHRcdGVycm9yXHRcdFx0OiAkLm5vb3AsXG5cdFx0LyoqXG5cdFx0ICogdGhlIG9wZW4gLyBjbG9zZSBhbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIC0gc2V0IHRoaXMgdG8gYGZhbHNlYCB0byBkaXNhYmxlIHRoZSBhbmltYXRpb24gKGRlZmF1bHQgaXMgYDIwMGApXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS5hbmltYXRpb25cblx0XHQgKi9cblx0XHRhbmltYXRpb25cdFx0OiAyMDAsXG5cdFx0LyoqXG5cdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgbXVsdGlwbGUgbm9kZXMgY2FuIGJlIHNlbGVjdGVkXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS5tdWx0aXBsZVxuXHRcdCAqL1xuXHRcdG11bHRpcGxlXHRcdDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiB0aGVtZSBjb25maWd1cmF0aW9uIG9iamVjdFxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvcmUudGhlbWVzXG5cdFx0ICovXG5cdFx0dGhlbWVzXHRcdFx0OiB7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRoZSBuYW1lIG9mIHRoZSB0aGVtZSB0byB1c2UgKGlmIGxlZnQgYXMgYGZhbHNlYCB0aGUgZGVmYXVsdCB0aGVtZSBpcyB1c2VkKVxuXHRcdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS50aGVtZXMubmFtZVxuXHRcdFx0ICovXG5cdFx0XHRuYW1lXHRcdFx0OiBmYWxzZSxcblx0XHRcdC8qKlxuXHRcdFx0ICogdGhlIFVSTCBvZiB0aGUgdGhlbWUncyBDU1MgZmlsZSwgbGVhdmUgdGhpcyBhcyBgZmFsc2VgIGlmIHlvdSBoYXZlIG1hbnVhbGx5IGluY2x1ZGVkIHRoZSB0aGVtZSBDU1MgKHJlY29tbWVuZGVkKS4gWW91IGNhbiBzZXQgdGhpcyB0byBgdHJ1ZWAgdG9vIHdoaWNoIHdpbGwgdHJ5IHRvIGF1dG9sb2FkIHRoZSB0aGVtZS5cblx0XHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvcmUudGhlbWVzLnVybFxuXHRcdFx0ICovXG5cdFx0XHR1cmxcdFx0XHRcdDogZmFsc2UsXG5cdFx0XHQvKipcblx0XHRcdCAqIHRoZSBsb2NhdGlvbiBvZiBhbGwganN0cmVlIHRoZW1lcyAtIG9ubHkgdXNlZCBpZiBgdXJsYCBpcyBzZXQgdG8gYHRydWVgXG5cdFx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLnRoZW1lcy5kaXJcblx0XHRcdCAqL1xuXHRcdFx0ZGlyXHRcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBjb25uZWN0aW5nIGRvdHMgYXJlIHNob3duXG5cdFx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLnRoZW1lcy5kb3RzXG5cdFx0XHQgKi9cblx0XHRcdGRvdHNcdFx0XHQ6IHRydWUsXG5cdFx0XHQvKipcblx0XHRcdCAqIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIG5vZGUgaWNvbnMgYXJlIHNob3duXG5cdFx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLnRoZW1lcy5pY29uc1xuXHRcdFx0ICovXG5cdFx0XHRpY29uc1x0XHRcdDogdHJ1ZSxcblx0XHRcdC8qKlxuXHRcdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgbm9kZSBlbGxpcHNpcyBzaG91bGQgYmUgc2hvd24gLSB0aGlzIG9ubHkgd29ya3Mgd2l0aCBhIGZpeGVkIHdpdGggb24gdGhlIGNvbnRhaW5lclxuXHRcdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS50aGVtZXMuZWxsaXBzaXNcblx0XHRcdCAqL1xuXHRcdFx0ZWxsaXBzaXNcdFx0OiBmYWxzZSxcblx0XHRcdC8qKlxuXHRcdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIHRyZWUgYmFja2dyb3VuZCBpcyBzdHJpcGVkXG5cdFx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLnRoZW1lcy5zdHJpcGVzXG5cdFx0XHQgKi9cblx0XHRcdHN0cmlwZXNcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBhIHN0cmluZyAob3IgYm9vbGVhbiBgZmFsc2VgKSBzcGVjaWZ5aW5nIHRoZSB0aGVtZSB2YXJpYW50IHRvIHVzZSAoaWYgdGhlIHRoZW1lIHN1cHBvcnRzIHZhcmlhbnRzKVxuXHRcdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS50aGVtZXMudmFyaWFudFxuXHRcdFx0ICovXG5cdFx0XHR2YXJpYW50XHRcdFx0OiBmYWxzZSxcblx0XHRcdC8qKlxuXHRcdFx0ICogYSBib29sZWFuIHNwZWNpZnlpbmcgaWYgYSByZXBvbnNpdmUgdmVyc2lvbiBvZiB0aGUgdGhlbWUgc2hvdWxkIGtpY2sgaW4gb24gc21hbGxlciBzY3JlZW5zIChpZiB0aGUgdGhlbWUgc3VwcG9ydHMgaXQpLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuXHRcdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY29yZS50aGVtZXMucmVzcG9uc2l2ZVxuXHRcdFx0ICovXG5cdFx0XHRyZXNwb25zaXZlXHRcdDogZmFsc2Vcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGlmIGxlZnQgYXMgYHRydWVgIGFsbCBwYXJlbnRzIG9mIGFsbCBzZWxlY3RlZCBub2RlcyB3aWxsIGJlIG9wZW5lZCBvbmNlIHRoZSB0cmVlIGxvYWRzIChzbyB0aGF0IGFsbCBzZWxlY3RlZCBub2RlcyBhcmUgdmlzaWJsZSB0byB0aGUgdXNlcilcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLmV4cGFuZF9zZWxlY3RlZF9vbmxvYWRcblx0XHQgKi9cblx0XHRleHBhbmRfc2VsZWN0ZWRfb25sb2FkIDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBpZiBsZWZ0IGFzIGB0cnVlYCB3ZWIgd29ya2VycyB3aWxsIGJlIHVzZWQgdG8gcGFyc2UgaW5jb21pbmcgSlNPTiBkYXRhIHdoZXJlIHBvc3NpYmxlLCBzbyB0aGF0IHRoZSBVSSB3aWxsIG5vdCBiZSBibG9ja2VkIGJ5IGxhcmdlIHJlcXVlc3RzLiBXb3JrZXJzIGFyZSBob3dldmVyIGFib3V0IDMwJSBzbG93ZXIuIERlZmF1bHRzIHRvIGB0cnVlYFxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvcmUud29ya2VyXG5cdFx0ICovXG5cdFx0d29ya2VyIDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBGb3JjZSBub2RlIHRleHQgdG8gcGxhaW4gdGV4dCAoYW5kIGVzY2FwZSBIVE1MKS4gRGVmYXVsdHMgdG8gYGZhbHNlYFxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvcmUuZm9yY2VfdGV4dFxuXHRcdCAqL1xuXHRcdGZvcmNlX3RleHQgOiBmYWxzZSxcblx0XHQvKipcblx0XHQgKiBTaG91bGQgdGhlIG5vZGUgc2hvdWxkIGJlIHRvZ2dsZWQgaWYgdGhlIHRleHQgaXMgZG91YmxlIGNsaWNrZWQgLiBEZWZhdWx0cyB0byBgdHJ1ZWBcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb3JlLmRibGNsaWNrX3RvZ2dsZVxuXHRcdCAqL1xuXHRcdGRibGNsaWNrX3RvZ2dsZSA6IHRydWVcblx0fTtcblx0JC5qc3RyZWUuY29yZS5wcm90b3R5cGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogdXNlZCB0byBkZWNvcmF0ZSBhbiBpbnN0YW5jZSB3aXRoIGEgcGx1Z2luLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBwbHVnaW4oZGVjbyBbLCBvcHRzXSlcblx0XHQgKiBAcGFyYW0gIHtTdHJpbmd9IGRlY28gdGhlIHBsdWdpbiB0byBkZWNvcmF0ZSB3aXRoXG5cdFx0ICogQHBhcmFtICB7T2JqZWN0fSBvcHRzIG9wdGlvbnMgZm9yIHRoZSBwbHVnaW5cblx0XHQgKiBAcmV0dXJuIHtqc1RyZWV9XG5cdFx0ICovXG5cdFx0cGx1Z2luIDogZnVuY3Rpb24gKGRlY28sIG9wdHMpIHtcblx0XHRcdHZhciBDaGlsZCA9ICQuanN0cmVlLnBsdWdpbnNbZGVjb107XG5cdFx0XHRpZihDaGlsZCkge1xuXHRcdFx0XHR0aGlzLl9kYXRhW2RlY29dID0ge307XG5cdFx0XHRcdENoaWxkLnByb3RvdHlwZSA9IHRoaXM7XG5cdFx0XHRcdHJldHVybiBuZXcgQ2hpbGQob3B0cywgdGhpcyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGluaXRpYWxpemUgdGhlIGluc3RhbmNlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBpbml0KGVsLCBvcHRvbnMpXG5cdFx0ICogQHBhcmFtIHtET01FbGVtZW50fGpRdWVyeXxTdHJpbmd9IGVsIHRoZSBlbGVtZW50IHdlIGFyZSB0cmFuc2Zvcm1pbmdcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGlzIGluc3RhbmNlXG5cdFx0ICogQHRyaWdnZXIgaW5pdC5qc3RyZWUsIGxvYWRpbmcuanN0cmVlLCBsb2FkZWQuanN0cmVlLCByZWFkeS5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0aW5pdCA6IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXHRcdFx0dGhpcy5fbW9kZWwgPSB7XG5cdFx0XHRcdGRhdGEgOiB7fSxcblx0XHRcdFx0Y2hhbmdlZCA6IFtdLFxuXHRcdFx0XHRmb3JjZV9mdWxsX3JlZHJhdyA6IGZhbHNlLFxuXHRcdFx0XHRyZWRyYXdfdGltZW91dCA6IGZhbHNlLFxuXHRcdFx0XHRkZWZhdWx0X3N0YXRlIDoge1xuXHRcdFx0XHRcdGxvYWRlZCA6IHRydWUsXG5cdFx0XHRcdFx0b3BlbmVkIDogZmFsc2UsXG5cdFx0XHRcdFx0c2VsZWN0ZWQgOiBmYWxzZSxcblx0XHRcdFx0XHRkaXNhYmxlZCA6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHR0aGlzLl9tb2RlbC5kYXRhWyQuanN0cmVlLnJvb3RdID0ge1xuXHRcdFx0XHRpZCA6ICQuanN0cmVlLnJvb3QsXG5cdFx0XHRcdHBhcmVudCA6IG51bGwsXG5cdFx0XHRcdHBhcmVudHMgOiBbXSxcblx0XHRcdFx0Y2hpbGRyZW4gOiBbXSxcblx0XHRcdFx0Y2hpbGRyZW5fZCA6IFtdLFxuXHRcdFx0XHRzdGF0ZSA6IHsgbG9hZGVkIDogZmFsc2UgfVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5lbGVtZW50ID0gJChlbCkuYWRkQ2xhc3MoJ2pzdHJlZSBqc3RyZWUtJyArIHRoaXMuX2lkKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MgPSBvcHRpb25zO1xuXG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUucmVhZHkgPSBmYWxzZTtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5sb2FkZWQgPSBmYWxzZTtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5ydGwgPSAodGhpcy5lbGVtZW50LmNzcyhcImRpcmVjdGlvblwiKSA9PT0gXCJydGxcIik7XG5cdFx0XHR0aGlzLmVsZW1lbnRbdGhpcy5fZGF0YS5jb3JlLnJ0bCA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShcImpzdHJlZS1ydGxcIik7XG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0cigncm9sZScsJ3RyZWUnKTtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29yZS5tdWx0aXBsZSkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1tdWx0aXNlbGVjdGFibGUnLCB0cnVlKTtcblx0XHRcdH1cblx0XHRcdGlmKCF0aGlzLmVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCcwJyk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuYmluZCgpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgYWZ0ZXIgYWxsIGV2ZW50cyBhcmUgYm91bmRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgaW5pdC5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwiaW5pdFwiKTtcblxuXHRcdFx0dGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sID0gdGhpcy5lbGVtZW50LmZpbmQoXCIgPiB1bCA+IGxpXCIpLmNsb25lKHRydWUpO1xuXHRcdFx0dGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sXG5cdFx0XHRcdC5maW5kKFwibGlcIikuYWRkQmFjaygpXG5cdFx0XHRcdC5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ub2RlVHlwZSA9PT0gMyAmJiAoIXRoaXMubm9kZVZhbHVlIHx8IC9eXFxzKyQvLnRlc3QodGhpcy5ub2RlVmFsdWUpKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5lbGVtZW50Lmh0bWwoXCI8XCIrXCJ1bCBjbGFzcz0nanN0cmVlLWNvbnRhaW5lci11bCBqc3RyZWUtY2hpbGRyZW4nIHJvbGU9J2dyb3VwJz48XCIrXCJsaSBpZD0nalwiK3RoaXMuX2lkK1wiX2xvYWRpbmcnIGNsYXNzPSdqc3RyZWUtaW5pdGlhbC1ub2RlIGpzdHJlZS1sb2FkaW5nIGpzdHJlZS1sZWFmIGpzdHJlZS1sYXN0JyByb2xlPSd0cmVlLWl0ZW0nPjxpIGNsYXNzPSdqc3RyZWUtaWNvbiBqc3RyZWUtb2NsJz48L2k+PFwiK1wiYSBjbGFzcz0nanN0cmVlLWFuY2hvcicgaHJlZj0nIyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24taGlkZGVuJz48L2k+XCIgKyB0aGlzLmdldF9zdHJpbmcoXCJMb2FkaW5nIC4uLlwiKSArIFwiPC9hPjwvbGk+PC91bD5cIik7XG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywnaicgKyB0aGlzLl9pZCArICdfbG9hZGluZycpO1xuXHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCA9IHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwibGlcIikuZmlyc3QoKS5oZWlnaHQoKSB8fCAyNDtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5ub2RlID0gdGhpcy5fY3JlYXRlX3Byb3RvdHlwZV9ub2RlKCk7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCBhZnRlciB0aGUgbG9hZGluZyB0ZXh0IGlzIHNob3duIGFuZCBiZWZvcmUgbG9hZGluZyBzdGFydHNcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgbG9hZGluZy5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwibG9hZGluZ1wiKTtcblx0XHRcdHRoaXMubG9hZF9ub2RlKCQuanN0cmVlLnJvb3QpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZGVzdHJveSBhbiBpbnN0YW5jZVxuXHRcdCAqIEBuYW1lIGRlc3Ryb3koKVxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGtlZXBfaHRtbCBpZiBub3Qgc2V0IHRvIGB0cnVlYCB0aGUgY29udGFpbmVyIHdpbGwgYmUgZW1wdGllZCwgb3RoZXJ3aXNlIHRoZSBjdXJyZW50IERPTSBlbGVtZW50cyB3aWxsIGJlIGtlcHQgaW50YWN0XG5cdFx0ICovXG5cdFx0ZGVzdHJveSA6IGZ1bmN0aW9uIChrZWVwX2h0bWwpIHtcblx0XHRcdGlmKHRoaXMuX3dyaykge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuX3dyayk7XG5cdFx0XHRcdFx0dGhpcy5fd3JrID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaCAoaWdub3JlKSB7IH1cblx0XHRcdH1cblx0XHRcdGlmKCFrZWVwX2h0bWwpIHsgdGhpcy5lbGVtZW50LmVtcHR5KCk7IH1cblx0XHRcdHRoaXMudGVhcmRvd24oKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZSBwcm90b3R5cGUgbm9kZVxuXHRcdCAqL1xuXHRcdF9jcmVhdGVfcHJvdG90eXBlX25vZGUgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdMSScpLCBfdGVtcDEsIF90ZW1wMjtcblx0XHRcdF9ub2RlLnNldEF0dHJpYnV0ZSgncm9sZScsICd0cmVlaXRlbScpO1xuXHRcdFx0X3RlbXAxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnSScpO1xuXHRcdFx0X3RlbXAxLmNsYXNzTmFtZSA9ICdqc3RyZWUtaWNvbiBqc3RyZWUtb2NsJztcblx0XHRcdF90ZW1wMS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAncHJlc2VudGF0aW9uJyk7XG5cdFx0XHRfbm9kZS5hcHBlbmRDaGlsZChfdGVtcDEpO1xuXHRcdFx0X3RlbXAxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQScpO1xuXHRcdFx0X3RlbXAxLmNsYXNzTmFtZSA9ICdqc3RyZWUtYW5jaG9yJztcblx0XHRcdF90ZW1wMS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCcjJyk7XG5cdFx0XHRfdGVtcDEuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsJy0xJyk7XG5cdFx0XHRfdGVtcDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdJJyk7XG5cdFx0XHRfdGVtcDIuY2xhc3NOYW1lID0gJ2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24nO1xuXHRcdFx0X3RlbXAyLnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcblx0XHRcdF90ZW1wMS5hcHBlbmRDaGlsZChfdGVtcDIpO1xuXHRcdFx0X25vZGUuYXBwZW5kQ2hpbGQoX3RlbXAxKTtcblx0XHRcdF90ZW1wMSA9IF90ZW1wMiA9IG51bGw7XG5cblx0XHRcdHJldHVybiBfbm9kZTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHBhcnQgb2YgdGhlIGRlc3Ryb3lpbmcgb2YgYW4gaW5zdGFuY2UuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIHRlYXJkb3duKClcblx0XHQgKi9cblx0XHR0ZWFyZG93biA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMudW5iaW5kKCk7XG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCdqc3RyZWUnKVxuXHRcdFx0XHQucmVtb3ZlRGF0YSgnanN0cmVlJylcblx0XHRcdFx0LmZpbmQoXCJbY2xhc3NePSdqc3RyZWUnXVwiKVxuXHRcdFx0XHRcdC5hZGRCYWNrKClcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UoL2pzdHJlZVteIF0qfCQvaWcsJycpOyB9KTtcblx0XHRcdHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBiaW5kIGFsbCBldmVudHMuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGJpbmQoKVxuXHRcdCAqL1xuXHRcdGJpbmQgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgd29yZCA9ICcnLFxuXHRcdFx0XHR0b3V0ID0gbnVsbCxcblx0XHRcdFx0d2FzX2NsaWNrID0gMDtcblx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0XHQub24oXCJkYmxjbGljay5qc3RyZWVcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGlmKGUudGFyZ2V0LnRhZ05hbWUgJiYgZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIpIHsgcmV0dXJuIHRydWU7IH1cblx0XHRcdFx0XHRcdGlmKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkpIHtcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYod2luZG93LmdldFNlbGVjdGlvbikge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbC5jb2xsYXBzZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGlnbm9yZSkgeyB9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQub24oXCJtb3VzZWRvd24uanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGlmKGUudGFyZ2V0ID09PSB0aGlzLmVsZW1lbnRbMF0pIHtcblx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IGxvc2luZyBmb2N1cyB3aGVuIGNsaWNraW5nIHNjcm9sbCBhcnJvd3MgKEZGLCBDaHJvbWUpXG5cdFx0XHRcdFx0XHRcdHdhc19jbGljayA9ICsobmV3IERhdGUoKSk7IC8vIGllIGRvZXMgbm90IGFsbG93IHRvIHByZXZlbnQgbG9zaW5nIGZvY3VzXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcIm1vdXNlZG93bi5qc3RyZWVcIiwgXCIuanN0cmVlLW9jbFwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IGFueSBub2RlIGluc2lkZSBmcm9tIGxvc2luZyBmb2N1cyB3aGVuIGNsaWNraW5nIHRoZSBvcGVuL2Nsb3NlIGljb25cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQub24oXCJjbGljay5qc3RyZWVcIiwgXCIuanN0cmVlLW9jbFwiLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRvZ2dsZV9ub2RlKGUudGFyZ2V0KTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwiZGJsY2xpY2suanN0cmVlXCIsIFwiLmpzdHJlZS1hbmNob3JcIiwgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0aWYoZS50YXJnZXQudGFnTmFtZSAmJiBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIikgeyByZXR1cm4gdHJ1ZTsgfVxuXHRcdFx0XHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jb3JlLmRibGNsaWNrX3RvZ2dsZSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnRvZ2dsZV9ub2RlKGUudGFyZ2V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwiY2xpY2suanN0cmVlXCIsIFwiLmpzdHJlZS1hbmNob3JcIiwgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0aWYoZS5jdXJyZW50VGFyZ2V0ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7ICQoZS5jdXJyZW50VGFyZ2V0KS5mb2N1cygpOyB9XG5cdFx0XHRcdFx0XHR0aGlzLmFjdGl2YXRlX25vZGUoZS5jdXJyZW50VGFyZ2V0LCBlKTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKCdrZXlkb3duLmpzdHJlZScsICcuanN0cmVlLWFuY2hvcicsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGlmKGUudGFyZ2V0LnRhZ05hbWUgJiYgZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIpIHsgcmV0dXJuIHRydWU7IH1cblx0XHRcdFx0XHRcdGlmKGUud2hpY2ggIT09IDMyICYmIGUud2hpY2ggIT09IDEzICYmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpKSB7IHJldHVybiB0cnVlOyB9XG5cdFx0XHRcdFx0XHR2YXIgbyA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZih0aGlzLl9kYXRhLmNvcmUucnRsKSB7XG5cdFx0XHRcdFx0XHRcdGlmKGUud2hpY2ggPT09IDM3KSB7IGUud2hpY2ggPSAzOTsgfVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmKGUud2hpY2ggPT09IDM5KSB7IGUud2hpY2ggPSAzNzsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c3dpdGNoKGUud2hpY2gpIHtcblx0XHRcdFx0XHRcdFx0Y2FzZSAzMjogLy8gYXJpYSBkZWZpbmVzIHNwYWNlIG9ubHkgd2l0aCBDdHJsXG5cdFx0XHRcdFx0XHRcdFx0aWYoZS5jdHJsS2V5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlLnR5cGUgPSBcImNsaWNrXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKGUuY3VycmVudFRhcmdldCkudHJpZ2dlcihlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgMTM6IC8vIGVudGVyXG5cdFx0XHRcdFx0XHRcdFx0ZS50eXBlID0gXCJjbGlja1wiO1xuXHRcdFx0XHRcdFx0XHRcdCQoZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKGUpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDM3OiAvLyBsZWZ0XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKHRoaXMuaXNfb3BlbihlLmN1cnJlbnRUYXJnZXQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNsb3NlX25vZGUoZS5jdXJyZW50VGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvID0gdGhpcy5nZXRfcGFyZW50KGUuY3VycmVudFRhcmdldCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihvICYmIG8uaWQgIT09ICQuanN0cmVlLnJvb3QpIHsgdGhpcy5nZXRfbm9kZShvLCB0cnVlKS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5mb2N1cygpOyB9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDM4OiAvLyB1cFxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHRvID0gdGhpcy5nZXRfcHJldl9kb20oZS5jdXJyZW50VGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0XHRpZihvICYmIG8ubGVuZ3RoKSB7IG8uY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZm9jdXMoKTsgfVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDM5OiAvLyByaWdodFxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHRpZih0aGlzLmlzX2Nsb3NlZChlLmN1cnJlbnRUYXJnZXQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLm9wZW5fbm9kZShlLmN1cnJlbnRUYXJnZXQsIGZ1bmN0aW9uIChvKSB7IHRoaXMuZ2V0X25vZGUobywgdHJ1ZSkuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZm9jdXMoKTsgfSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMuaXNfb3BlbihlLmN1cnJlbnRUYXJnZXQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvID0gdGhpcy5nZXRfbm9kZShlLmN1cnJlbnRUYXJnZXQsIHRydWUpLmNoaWxkcmVuKCcuanN0cmVlLWNoaWxkcmVuJylbMF07XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihvKSB7ICQodGhpcy5fZmlyc3RDaGlsZChvKSkuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZm9jdXMoKTsgfVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSA0MDogLy8gZG93blxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHRvID0gdGhpcy5nZXRfbmV4dF9kb20oZS5jdXJyZW50VGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0XHRpZihvICYmIG8ubGVuZ3RoKSB7IG8uY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZm9jdXMoKTsgfVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDEwNjogLy8gYXJpYSBkZWZpbmVzICogb24gbnVtcGFkIGFzIG9wZW5fYWxsIC0gbm90IHZlcnkgY29tbW9uXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vcGVuX2FsbCgpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDM2OiAvLyBob21lXG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdG8gPSB0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKTtcblx0XHRcdFx0XHRcdFx0XHRpZihvKSB7ICQobykuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZmlsdGVyKCc6dmlzaWJsZScpLmZvY3VzKCk7IH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSAzNTogLy8gZW5kXG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCcuanN0cmVlLWFuY2hvcicpLmZpbHRlcignOnZpc2libGUnKS5sYXN0KCkuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSAxMTM6IC8vIGYyIC0gc2FmZSB0byBpbmNsdWRlIC0gaWYgY2hlY2tfY2FsbGJhY2sgaXMgZmFsc2UgaXQgd2lsbCBmYWlsXG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWRpdChlLmN1cnJlbnRUYXJnZXQpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHQvKiFcblx0XHRcdFx0XHRcdFx0Ly8gZGVsZXRlXG5cdFx0XHRcdFx0XHRcdGNhc2UgNDY6XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdG8gPSB0aGlzLmdldF9ub2RlKGUuY3VycmVudFRhcmdldCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYobyAmJiBvLmlkICYmIG8uaWQgIT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG8gPSB0aGlzLmlzX3NlbGVjdGVkKG8pID8gdGhpcy5nZXRfc2VsZWN0ZWQoKSA6IG87XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRlbGV0ZV9ub2RlKG8pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oXCJsb2FkX25vZGUuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmKGRhdGEuc3RhdHVzKSB7XG5cdFx0XHRcdFx0XHRcdGlmKGRhdGEubm9kZS5pZCA9PT0gJC5qc3RyZWUucm9vdCAmJiAhdGhpcy5fZGF0YS5jb3JlLmxvYWRlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5sb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGlmKHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyx0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKS5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0XHRcdCAqIHRyaWdnZXJlZCBhZnRlciB0aGUgcm9vdCBub2RlIGlzIGxvYWRlZCBmb3IgdGhlIGZpcnN0IHRpbWVcblx0XHRcdFx0XHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0XHRcdFx0XHQgKiBAbmFtZSBsb2FkZWQuanN0cmVlXG5cdFx0XHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy50cmlnZ2VyKFwibG9hZGVkXCIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKCF0aGlzLl9kYXRhLmNvcmUucmVhZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZih0aGlzLmVsZW1lbnQgJiYgIXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmZpbmQoJy5qc3RyZWUtbG9hZGluZycpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUucmVhZHkgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jb3JlLmV4cGFuZF9zZWxlY3RlZF9vbmxvYWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciB0bXAgPSBbXSwgaSwgajtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dG1wID0gdG1wLmNvbmNhdCh0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0ucGFyZW50cyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSAkLnZha2F0YS5hcnJheV91bmlxdWUodG1wKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5vcGVuX25vZGUodG1wW2ldLCBmYWxzZSwgMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgJ2FjdGlvbicgOiAncmVhZHknLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgYWZ0ZXIgYWxsIG5vZGVzIGFyZSBmaW5pc2hlZCBsb2FkaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgKiBAbmFtZSByZWFkeS5qc3RyZWVcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMudHJpZ2dlcihcInJlYWR5XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sIHRoaXMpLCAwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQvLyBxdWljayBzZWFyY2hpbmcgd2hlbiB0aGUgdHJlZSBpcyBmb2N1c2VkXG5cdFx0XHRcdC5vbigna2V5cHJlc3MuanN0cmVlJywgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0aWYoZS50YXJnZXQudGFnTmFtZSAmJiBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIikgeyByZXR1cm4gdHJ1ZTsgfVxuXHRcdFx0XHRcdFx0aWYodG91dCkgeyBjbGVhclRpbWVvdXQodG91dCk7IH1cblx0XHRcdFx0XHRcdHRvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0d29yZCA9ICcnO1xuXHRcdFx0XHRcdFx0fSwgNTAwKTtcblxuXHRcdFx0XHRcdFx0dmFyIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdFx0Y29sID0gdGhpcy5lbGVtZW50LmZpbmQoJy5qc3RyZWUtYW5jaG9yJykuZmlsdGVyKCc6dmlzaWJsZScpLFxuXHRcdFx0XHRcdFx0XHRpbmQgPSBjb2wuaW5kZXgoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgfHwgMCxcblx0XHRcdFx0XHRcdFx0ZW5kID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR3b3JkICs9IGNocjtcblxuXHRcdFx0XHRcdFx0Ly8gbWF0Y2ggZm9yIHdob2xlIHdvcmQgZnJvbSBjdXJyZW50IG5vZGUgZG93biAoaW5jbHVkaW5nIHRoZSBjdXJyZW50IG5vZGUpXG5cdFx0XHRcdFx0XHRpZih3b3JkLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRcdFx0Y29sLnNsaWNlKGluZCkuZWFjaCgkLnByb3h5KGZ1bmN0aW9uIChpLCB2KSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYoJCh2KS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHdvcmQpID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKHYpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlbmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0XHRcdFx0XHRpZihlbmQpIHsgcmV0dXJuOyB9XG5cblx0XHRcdFx0XHRcdFx0Ly8gbWF0Y2ggZm9yIHdob2xlIHdvcmQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSB0cmVlXG5cdFx0XHRcdFx0XHRcdGNvbC5zbGljZSgwLCBpbmQpLmVhY2goJC5wcm94eShmdW5jdGlvbiAoaSwgdikge1xuXHRcdFx0XHRcdFx0XHRcdGlmKCQodikudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih3b3JkKSA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCh2KS5mb2N1cygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0XHRcdFx0aWYoZW5kKSB7IHJldHVybjsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gbGlzdCBub2RlcyB0aGF0IHN0YXJ0IHdpdGggdGhhdCBsZXR0ZXIgKG9ubHkgaWYgd29yZCBjb25zaXN0cyBvZiBhIHNpbmdsZSBjaGFyKVxuXHRcdFx0XHRcdFx0aWYobmV3IFJlZ0V4cCgnXicgKyBjaHIucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJykgKyAnKyQnKS50ZXN0KHdvcmQpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHNlYXJjaCBmb3IgdGhlIG5leHQgbm9kZSBzdGFydGluZyB3aXRoIHRoYXQgbGV0dGVyXG5cdFx0XHRcdFx0XHRcdGNvbC5zbGljZShpbmQgKyAxKS5lYWNoKCQucHJveHkoZnVuY3Rpb24gKGksIHYpIHtcblx0XHRcdFx0XHRcdFx0XHRpZigkKHYpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKSA9PT0gY2hyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKHYpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlbmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0XHRcdFx0XHRpZihlbmQpIHsgcmV0dXJuOyB9XG5cblx0XHRcdFx0XHRcdFx0Ly8gc2VhcmNoIGZyb20gdGhlIGJlZ2lubmluZ1xuXHRcdFx0XHRcdFx0XHRjb2wuc2xpY2UoMCwgaW5kICsgMSkuZWFjaCgkLnByb3h5KGZ1bmN0aW9uIChpLCB2KSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYoJCh2KS50ZXh0KCkudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkgPT09IGNocikge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCh2KS5mb2N1cygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0XHRcdFx0aWYoZW5kKSB7IHJldHVybjsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQvLyBUSEVNRSBSRUxBVEVEXG5cdFx0XHRcdC5vbihcImluaXQuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dmFyIHMgPSB0aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzO1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzXHRcdFx0PSBzLmRvdHM7XG5cdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXNcdFx0PSBzLnN0cmlwZXM7XG5cdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zXHRcdD0gcy5pY29ucztcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMuZWxsaXBzaXNcdFx0PSBzLmVsbGlwc2lzO1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRfdGhlbWUocy5uYW1lIHx8IFwiZGVmYXVsdFwiLCBzLnVybCk7XG5cdFx0XHRcdFx0XHR0aGlzLnNldF90aGVtZV92YXJpYW50KHMudmFyaWFudCk7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcImxvYWRpbmcuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhpc1sgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzID8gXCJzaG93X2RvdHNcIiA6IFwiaGlkZV9kb3RzXCIgXSgpO1xuXHRcdFx0XHRcdFx0dGhpc1sgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucyA/IFwic2hvd19pY29uc1wiIDogXCJoaWRlX2ljb25zXCIgXSgpO1xuXHRcdFx0XHRcdFx0dGhpc1sgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzID8gXCJzaG93X3N0cmlwZXNcIiA6IFwiaGlkZV9zdHJpcGVzXCIgXSgpO1xuXHRcdFx0XHRcdFx0dGhpc1sgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcyA/IFwic2hvd19lbGxpcHNpc1wiIDogXCJoaWRlX2VsbGlwc2lzXCIgXSgpO1xuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oJ2JsdXIuanN0cmVlJywgJy5qc3RyZWUtYW5jaG9yJywgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgPSBudWxsO1xuXHRcdFx0XHRcdFx0JChlLmN1cnJlbnRUYXJnZXQpLmZpbHRlcignLmpzdHJlZS1ob3ZlcmVkJykubW91c2VsZWF2ZSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKCdmb2N1cy5qc3RyZWUnLCAnLmpzdHJlZS1hbmNob3InLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHR2YXIgdG1wID0gdGhpcy5nZXRfbm9kZShlLmN1cnJlbnRUYXJnZXQpO1xuXHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5pZCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCA9IHRtcC5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCcuanN0cmVlLWhvdmVyZWQnKS5ub3QoZS5jdXJyZW50VGFyZ2V0KS5tb3VzZWxlYXZlKCk7XG5cdFx0XHRcdFx0XHQkKGUuY3VycmVudFRhcmdldCkubW91c2VlbnRlcigpO1xuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbignZm9jdXMuanN0cmVlJywgJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRpZigrKG5ldyBEYXRlKCkpIC0gd2FzX2NsaWNrID4gNTAwICYmICF0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCkge1xuXHRcdFx0XHRcdFx0XHR3YXNfY2xpY2sgPSAwO1xuXHRcdFx0XHRcdFx0XHR2YXIgYWN0ID0gdGhpcy5nZXRfbm9kZSh0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JyksIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRpZihhY3QpIHtcblx0XHRcdFx0XHRcdFx0XHRhY3QuZmluZCgnPiAuanN0cmVlLWFuY2hvcicpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKCdtb3VzZWVudGVyLmpzdHJlZScsICcuanN0cmVlLWFuY2hvcicsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdHRoaXMuaG92ZXJfbm9kZShlLmN1cnJlbnRUYXJnZXQpO1xuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oJ21vdXNlbGVhdmUuanN0cmVlJywgJy5qc3RyZWUtYW5jaG9yJywgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0dGhpcy5kZWhvdmVyX25vZGUoZS5jdXJyZW50VGFyZ2V0KTtcblx0XHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBwYXJ0IG9mIHRoZSBkZXN0cm95aW5nIG9mIGFuIGluc3RhbmNlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSB1bmJpbmQoKVxuXHRcdCAqL1xuXHRcdHVuYmluZCA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5vZmYoJy5qc3RyZWUnKTtcblx0XHRcdCQoZG9jdW1lbnQpLm9mZignLmpzdHJlZS0nICsgdGhpcy5faWQpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogdHJpZ2dlciBhbiBldmVudC4gVXNlZCBpbnRlcm5hbGx5LlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgdHJpZ2dlcihldiBbLCBkYXRhXSlcblx0XHQgKiBAcGFyYW0gIHtTdHJpbmd9IGV2IHRoZSBuYW1lIG9mIHRoZSBldmVudCB0byB0cmlnZ2VyXG5cdFx0ICogQHBhcmFtICB7T2JqZWN0fSBkYXRhIGFkZGl0aW9uYWwgZGF0YSB0byBwYXNzIHdpdGggdGhlIGV2ZW50XG5cdFx0ICovXG5cdFx0dHJpZ2dlciA6IGZ1bmN0aW9uIChldiwgZGF0YSkge1xuXHRcdFx0aWYoIWRhdGEpIHtcblx0XHRcdFx0ZGF0YSA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0ZGF0YS5pbnN0YW5jZSA9IHRoaXM7XG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoZXYucmVwbGFjZSgnLmpzdHJlZScsJycpICsgJy5qc3RyZWUnLCBkYXRhKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHJldHVybnMgdGhlIGpRdWVyeSBleHRlbmRlZCBpbnN0YW5jZSBjb250YWluZXJcblx0XHQgKiBAbmFtZSBnZXRfY29udGFpbmVyKClcblx0XHQgKiBAcmV0dXJuIHtqUXVlcnl9XG5cdFx0ICovXG5cdFx0Z2V0X2NvbnRhaW5lciA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLmVsZW1lbnQ7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiByZXR1cm5zIHRoZSBqUXVlcnkgZXh0ZW5kZWQgbWFpbiBVTCBub2RlIGluc2lkZSB0aGUgaW5zdGFuY2UgY29udGFpbmVyLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBnZXRfY29udGFpbmVyX3VsKClcblx0XHQgKiBAcmV0dXJuIHtqUXVlcnl9XG5cdFx0ICovXG5cdFx0Z2V0X2NvbnRhaW5lcl91bCA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBnZXRzIHN0cmluZyByZXBsYWNlbWVudHMgKGxvY2FsaXphdGlvbikuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGdldF9zdHJpbmcoa2V5KVxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30ga2V5XG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldF9zdHJpbmcgOiBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHR2YXIgYSA9IHRoaXMuc2V0dGluZ3MuY29yZS5zdHJpbmdzO1xuXHRcdFx0aWYoJC5pc0Z1bmN0aW9uKGEpKSB7IHJldHVybiBhLmNhbGwodGhpcywga2V5KTsgfVxuXHRcdFx0aWYoYSAmJiBhW2tleV0pIHsgcmV0dXJuIGFba2V5XTsgfVxuXHRcdFx0cmV0dXJuIGtleTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldHMgdGhlIGZpcnN0IGNoaWxkIG9mIGEgRE9NIG5vZGUuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9maXJzdENoaWxkKGRvbSlcblx0XHQgKiBAcGFyYW0gIHtET01FbGVtZW50fSBkb21cblx0XHQgKiBAcmV0dXJuIHtET01FbGVtZW50fVxuXHRcdCAqL1xuXHRcdF9maXJzdENoaWxkIDogZnVuY3Rpb24gKGRvbSkge1xuXHRcdFx0ZG9tID0gZG9tID8gZG9tLmZpcnN0Q2hpbGQgOiBudWxsO1xuXHRcdFx0d2hpbGUoZG9tICE9PSBudWxsICYmIGRvbS5ub2RlVHlwZSAhPT0gMSkge1xuXHRcdFx0XHRkb20gPSBkb20ubmV4dFNpYmxpbmc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZG9tO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0cyB0aGUgbmV4dCBzaWJsaW5nIG9mIGEgRE9NIG5vZGUuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9uZXh0U2libGluZyhkb20pXG5cdFx0ICogQHBhcmFtICB7RE9NRWxlbWVudH0gZG9tXG5cdFx0ICogQHJldHVybiB7RE9NRWxlbWVudH1cblx0XHQgKi9cblx0XHRfbmV4dFNpYmxpbmcgOiBmdW5jdGlvbiAoZG9tKSB7XG5cdFx0XHRkb20gPSBkb20gPyBkb20ubmV4dFNpYmxpbmcgOiBudWxsO1xuXHRcdFx0d2hpbGUoZG9tICE9PSBudWxsICYmIGRvbS5ub2RlVHlwZSAhPT0gMSkge1xuXHRcdFx0XHRkb20gPSBkb20ubmV4dFNpYmxpbmc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZG9tO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0cyB0aGUgcHJldmlvdXMgc2libGluZyBvZiBhIERPTSBub2RlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBfcHJldmlvdXNTaWJsaW5nKGRvbSlcblx0XHQgKiBAcGFyYW0gIHtET01FbGVtZW50fSBkb21cblx0XHQgKiBAcmV0dXJuIHtET01FbGVtZW50fVxuXHRcdCAqL1xuXHRcdF9wcmV2aW91c1NpYmxpbmcgOiBmdW5jdGlvbiAoZG9tKSB7XG5cdFx0XHRkb20gPSBkb20gPyBkb20ucHJldmlvdXNTaWJsaW5nIDogbnVsbDtcblx0XHRcdHdoaWxlKGRvbSAhPT0gbnVsbCAmJiBkb20ubm9kZVR5cGUgIT09IDEpIHtcblx0XHRcdFx0ZG9tID0gZG9tLnByZXZpb3VzU2libGluZztcblx0XHRcdH1cblx0XHRcdHJldHVybiBkb207XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBnZXQgdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBub2RlIChvciB0aGUgYWN0dWFsIGpRdWVyeSBleHRlbmRlZCBET00gbm9kZSkgYnkgdXNpbmcgYW55IGlucHV0IChjaGlsZCBET00gZWxlbWVudCwgSUQgc3RyaW5nLCBzZWxlY3RvciwgZXRjKVxuXHRcdCAqIEBuYW1lIGdldF9ub2RlKG9iaiBbLCBhc19kb21dKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBhc19kb21cblx0XHQgKiBAcmV0dXJuIHtPYmplY3R8alF1ZXJ5fVxuXHRcdCAqL1xuXHRcdGdldF9ub2RlIDogZnVuY3Rpb24gKG9iaiwgYXNfZG9tKSB7XG5cdFx0XHRpZihvYmogJiYgb2JqLmlkKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5pZDtcblx0XHRcdH1cblx0XHRcdHZhciBkb207XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZih0aGlzLl9tb2RlbC5kYXRhW29ial0pIHtcblx0XHRcdFx0XHRvYmogPSB0aGlzLl9tb2RlbC5kYXRhW29ial07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZih0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiICYmIHRoaXMuX21vZGVsLmRhdGFbb2JqLnJlcGxhY2UoL14jLywgJycpXSkge1xuXHRcdFx0XHRcdG9iaiA9IHRoaXMuX21vZGVsLmRhdGFbb2JqLnJlcGxhY2UoL14jLywgJycpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCIgJiYgKGRvbSA9ICQoJyMnICsgb2JqLnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJyksIHRoaXMuZWxlbWVudCkpLmxlbmd0aCAmJiB0aGlzLl9tb2RlbC5kYXRhW2RvbS5jbG9zZXN0KCcuanN0cmVlLW5vZGUnKS5hdHRyKCdpZCcpXSkge1xuXHRcdFx0XHRcdG9iaiA9IHRoaXMuX21vZGVsLmRhdGFbZG9tLmNsb3Nlc3QoJy5qc3RyZWUtbm9kZScpLmF0dHIoJ2lkJyldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoKGRvbSA9ICQob2JqLCB0aGlzLmVsZW1lbnQpKS5sZW5ndGggJiYgdGhpcy5fbW9kZWwuZGF0YVtkb20uY2xvc2VzdCgnLmpzdHJlZS1ub2RlJykuYXR0cignaWQnKV0pIHtcblx0XHRcdFx0XHRvYmogPSB0aGlzLl9tb2RlbC5kYXRhW2RvbS5jbG9zZXN0KCcuanN0cmVlLW5vZGUnKS5hdHRyKCdpZCcpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKChkb20gPSAkKG9iaiwgdGhpcy5lbGVtZW50KSkubGVuZ3RoICYmIGRvbS5oYXNDbGFzcygnanN0cmVlJykpIHtcblx0XHRcdFx0XHRvYmogPSB0aGlzLl9tb2RlbC5kYXRhWyQuanN0cmVlLnJvb3RdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGFzX2RvbSkge1xuXHRcdFx0XHRcdG9iaiA9IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCA/IHRoaXMuZWxlbWVudCA6ICQoJyMnICsgb2JqLmlkLnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJyksIHRoaXMuZWxlbWVudCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdH0gY2F0Y2ggKGV4KSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IHRoZSBwYXRoIHRvIGEgbm9kZSwgZWl0aGVyIGNvbnNpc3Rpbmcgb2Ygbm9kZSB0ZXh0cywgb3Igb2Ygbm9kZSBJRHMsIG9wdGlvbmFsbHkgZ2x1ZWQgdG9nZXRoZXIgKG90aGVyd2lzZSBhbiBhcnJheSlcblx0XHQgKiBAbmFtZSBnZXRfcGF0aChvYmogWywgZ2x1ZSwgaWRzXSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIHRoZSBub2RlXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBnbHVlIGlmIHlvdSB3YW50IHRoZSBwYXRoIGFzIGEgc3RyaW5nIC0gcGFzcyB0aGUgZ2x1ZSBoZXJlIChmb3IgZXhhbXBsZSAnLycpLCBpZiBhIGZhbHN5IHZhbHVlIGlzIHN1cHBsaWVkIGhlcmUsIGFuIGFycmF5IGlzIHJldHVybmVkXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gaWRzIGlmIHNldCB0byB0cnVlIGJ1aWxkIHRoZSBwYXRoIHVzaW5nIElELCBvdGhlcndpc2Ugbm9kZSB0ZXh0IGlzIHVzZWRcblx0XHQgKiBAcmV0dXJuIHttaXhlZH1cblx0XHQgKi9cblx0XHRnZXRfcGF0aCA6IGZ1bmN0aW9uIChvYmosIGdsdWUsIGlkcykge1xuXHRcdFx0b2JqID0gb2JqLnBhcmVudHMgPyBvYmogOiB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCB8fCAhb2JqLnBhcmVudHMpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGksIGosIHAgPSBbXTtcblx0XHRcdHAucHVzaChpZHMgPyBvYmouaWQgOiBvYmoudGV4dCk7XG5cdFx0XHRmb3IoaSA9IDAsIGogPSBvYmoucGFyZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0cC5wdXNoKGlkcyA/IG9iai5wYXJlbnRzW2ldIDogdGhpcy5nZXRfdGV4dChvYmoucGFyZW50c1tpXSkpO1xuXHRcdFx0fVxuXHRcdFx0cCA9IHAucmV2ZXJzZSgpLnNsaWNlKDEpO1xuXHRcdFx0cmV0dXJuIGdsdWUgPyBwLmpvaW4oZ2x1ZSkgOiBwO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IHRoZSBuZXh0IHZpc2libGUgbm9kZSB0aGF0IGlzIGJlbG93IHRoZSBgb2JqYCBub2RlLiBJZiBgc3RyaWN0YCBpcyBzZXQgdG8gYHRydWVgIG9ubHkgc2libGluZyBub2RlcyBhcmUgcmV0dXJuZWQuXG5cdFx0ICogQG5hbWUgZ2V0X25leHRfZG9tKG9iaiBbLCBzdHJpY3RdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBzdHJpY3Rcblx0XHQgKiBAcmV0dXJuIHtqUXVlcnl9XG5cdFx0ICovXG5cdFx0Z2V0X25leHRfZG9tIDogZnVuY3Rpb24gKG9iaiwgc3RyaWN0KSB7XG5cdFx0XHR2YXIgdG1wO1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYob2JqWzBdID09PSB0aGlzLmVsZW1lbnRbMF0pIHtcblx0XHRcdFx0dG1wID0gdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7XG5cdFx0XHRcdHdoaWxlICh0bXAgJiYgdG1wLm9mZnNldEhlaWdodCA9PT0gMCkge1xuXHRcdFx0XHRcdHRtcCA9IHRoaXMuX25leHRTaWJsaW5nKHRtcCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRtcCA/ICQodG1wKSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYoIW9iaiB8fCAhb2JqLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihzdHJpY3QpIHtcblx0XHRcdFx0dG1wID0gb2JqWzBdO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0dG1wID0gdGhpcy5fbmV4dFNpYmxpbmcodG1wKTtcblx0XHRcdFx0fSB3aGlsZSAodG1wICYmIHRtcC5vZmZzZXRIZWlnaHQgPT09IDApO1xuXHRcdFx0XHRyZXR1cm4gdG1wID8gJCh0bXApIDogZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihvYmouaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSkge1xuXHRcdFx0XHR0bXAgPSB0aGlzLl9maXJzdENoaWxkKG9iai5jaGlsZHJlbignLmpzdHJlZS1jaGlsZHJlbicpWzBdKTtcblx0XHRcdFx0d2hpbGUgKHRtcCAmJiB0bXAub2Zmc2V0SGVpZ2h0ID09PSAwKSB7XG5cdFx0XHRcdFx0dG1wID0gdGhpcy5fbmV4dFNpYmxpbmcodG1wKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZih0bXAgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gJCh0bXApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0bXAgPSBvYmpbMF07XG5cdFx0XHRkbyB7XG5cdFx0XHRcdHRtcCA9IHRoaXMuX25leHRTaWJsaW5nKHRtcCk7XG5cdFx0XHR9IHdoaWxlICh0bXAgJiYgdG1wLm9mZnNldEhlaWdodCA9PT0gMCk7XG5cdFx0XHRpZih0bXAgIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuICQodG1wKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmoucGFyZW50c1VudGlsKFwiLmpzdHJlZVwiLFwiLmpzdHJlZS1ub2RlXCIpLm5leHRBbGwoXCIuanN0cmVlLW5vZGU6dmlzaWJsZVwiKS5maXJzdCgpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IHRoZSBwcmV2aW91cyB2aXNpYmxlIG5vZGUgdGhhdCBpcyBhYm92ZSB0aGUgYG9iamAgbm9kZS4gSWYgYHN0cmljdGAgaXMgc2V0IHRvIGB0cnVlYCBvbmx5IHNpYmxpbmcgbm9kZXMgYXJlIHJldHVybmVkLlxuXHRcdCAqIEBuYW1lIGdldF9wcmV2X2RvbShvYmogWywgc3RyaWN0XSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gc3RyaWN0XG5cdFx0ICogQHJldHVybiB7alF1ZXJ5fVxuXHRcdCAqL1xuXHRcdGdldF9wcmV2X2RvbSA6IGZ1bmN0aW9uIChvYmosIHN0cmljdCkge1xuXHRcdFx0dmFyIHRtcDtcblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKTtcblx0XHRcdGlmKG9ialswXSA9PT0gdGhpcy5lbGVtZW50WzBdKSB7XG5cdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmxhc3RDaGlsZDtcblx0XHRcdFx0d2hpbGUgKHRtcCAmJiB0bXAub2Zmc2V0SGVpZ2h0ID09PSAwKSB7XG5cdFx0XHRcdFx0dG1wID0gdGhpcy5fcHJldmlvdXNTaWJsaW5nKHRtcCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRtcCA/ICQodG1wKSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYoIW9iaiB8fCAhb2JqLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihzdHJpY3QpIHtcblx0XHRcdFx0dG1wID0gb2JqWzBdO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0dG1wID0gdGhpcy5fcHJldmlvdXNTaWJsaW5nKHRtcCk7XG5cdFx0XHRcdH0gd2hpbGUgKHRtcCAmJiB0bXAub2Zmc2V0SGVpZ2h0ID09PSAwKTtcblx0XHRcdFx0cmV0dXJuIHRtcCA/ICQodG1wKSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dG1wID0gb2JqWzBdO1xuXHRcdFx0ZG8ge1xuXHRcdFx0XHR0bXAgPSB0aGlzLl9wcmV2aW91c1NpYmxpbmcodG1wKTtcblx0XHRcdH0gd2hpbGUgKHRtcCAmJiB0bXAub2Zmc2V0SGVpZ2h0ID09PSAwKTtcblx0XHRcdGlmKHRtcCAhPT0gbnVsbCkge1xuXHRcdFx0XHRvYmogPSAkKHRtcCk7XG5cdFx0XHRcdHdoaWxlKG9iai5oYXNDbGFzcyhcImpzdHJlZS1vcGVuXCIpKSB7XG5cdFx0XHRcdFx0b2JqID0gb2JqLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5maXJzdCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlOnZpc2libGU6bGFzdFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb2JqO1xuXHRcdFx0fVxuXHRcdFx0dG1wID0gb2JqWzBdLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiB0bXAgJiYgdG1wLmNsYXNzTmFtZSAmJiB0bXAuY2xhc3NOYW1lLmluZGV4T2YoJ2pzdHJlZS1ub2RlJykgIT09IC0xID8gJCh0bXApIDogZmFsc2U7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBnZXQgdGhlIHBhcmVudCBJRCBvZiBhIG5vZGVcblx0XHQgKiBAbmFtZSBnZXRfcGFyZW50KG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldF9wYXJlbnQgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqLnBhcmVudDtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldCBhIGpRdWVyeSBjb2xsZWN0aW9uIG9mIGFsbCB0aGUgY2hpbGRyZW4gb2YgYSBub2RlIChub2RlIG11c3QgYmUgcmVuZGVyZWQpXG5cdFx0ICogQG5hbWUgZ2V0X2NoaWxkcmVuX2RvbShvYmopXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9ialxuXHRcdCAqIEByZXR1cm4ge2pRdWVyeX1cblx0XHQgKi9cblx0XHRnZXRfY2hpbGRyZW5fZG9tIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYob2JqWzBdID09PSB0aGlzLmVsZW1lbnRbMF0pIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpO1xuXHRcdFx0fVxuXHRcdFx0aWYoIW9iaiB8fCAhb2JqLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5jaGlsZHJlbihcIi5qc3RyZWUtbm9kZVwiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNoZWNrcyBpZiBhIG5vZGUgaGFzIGNoaWxkcmVuXG5cdFx0ICogQG5hbWUgaXNfcGFyZW50KG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc19wYXJlbnQgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRyZXR1cm4gb2JqICYmIChvYmouc3RhdGUubG9hZGVkID09PSBmYWxzZSB8fCBvYmouY2hpbGRyZW4ubGVuZ3RoID4gMCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjaGVja3MgaWYgYSBub2RlIGlzIGxvYWRlZCAoaXRzIGNoaWxkcmVuIGFyZSBhdmFpbGFibGUpXG5cdFx0ICogQG5hbWUgaXNfbG9hZGVkKG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc19sb2FkZWQgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRyZXR1cm4gb2JqICYmIG9iai5zdGF0ZS5sb2FkZWQ7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjaGVjayBpZiBhIG5vZGUgaXMgY3VycmVudGx5IGxvYWRpbmcgKGZldGNoaW5nIGNoaWxkcmVuKVxuXHRcdCAqIEBuYW1lIGlzX2xvYWRpbmcob2JqKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzX2xvYWRpbmcgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRyZXR1cm4gb2JqICYmIG9iai5zdGF0ZSAmJiBvYmouc3RhdGUubG9hZGluZztcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNoZWNrIGlmIGEgbm9kZSBpcyBvcGVuZWRcblx0XHQgKiBAbmFtZSBpc19vcGVuKG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc19vcGVuIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0cmV0dXJuIG9iaiAmJiBvYmouc3RhdGUub3BlbmVkO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2hlY2sgaWYgYSBub2RlIGlzIGluIGEgY2xvc2VkIHN0YXRlXG5cdFx0ICogQG5hbWUgaXNfY2xvc2VkKG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc19jbG9zZWQgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRyZXR1cm4gb2JqICYmIHRoaXMuaXNfcGFyZW50KG9iaikgJiYgIW9iai5zdGF0ZS5vcGVuZWQ7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjaGVjayBpZiBhIG5vZGUgaGFzIG5vIGNoaWxkcmVuXG5cdFx0ICogQG5hbWUgaXNfbGVhZihvYmopXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9ialxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNfbGVhZiA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdHJldHVybiAhdGhpcy5pc19wYXJlbnQob2JqKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGxvYWRzIGEgbm9kZSAoZmV0Y2hlcyBpdHMgY2hpbGRyZW4gdXNpbmcgdGhlIGBjb3JlLmRhdGFgIHNldHRpbmcpLiBNdWx0aXBsZSBub2RlcyBjYW4gYmUgcGFzc2VkIHRvIGJ5IHVzaW5nIGFuIGFycmF5LlxuXHRcdCAqIEBuYW1lIGxvYWRfbm9kZShvYmogWywgY2FsbGJhY2tdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBvbmNlIGxvYWRpbmcgaXMgY29tcGxldGUsIHRoZSBmdW5jdGlvbiBpcyBleGVjdXRlZCBpbiB0aGUgaW5zdGFuY2UncyBzY29wZSBhbmQgcmVjZWl2ZXMgdHdvIGFyZ3VtZW50cyAtIHRoZSBub2RlIGFuZCBhIGJvb2xlYW4gc3RhdHVzXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKiBAdHJpZ2dlciBsb2FkX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0bG9hZF9ub2RlIDogZnVuY3Rpb24gKG9iaiwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBrLCBsLCBpLCBqLCBjO1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0dGhpcy5fbG9hZF9ub2RlcyhvYmouc2xpY2UoKSwgY2FsbGJhY2spO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmopIHtcblx0XHRcdFx0aWYoY2FsbGJhY2spIHsgY2FsbGJhY2suY2FsbCh0aGlzLCBvYmosIGZhbHNlKTsgfVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvLyBpZihvYmouc3RhdGUubG9hZGluZykgeyB9IC8vIHRoZSBub2RlIGlzIGFscmVhZHkgbG9hZGluZyAtIGp1c3Qgd2FpdCBmb3IgaXQgdG8gbG9hZCBhbmQgaW52b2tlIGNhbGxiYWNrPyBidXQgaWYgY2FsbGVkIGltcGxpY2l0bHkgaXQgc2hvdWxkIGJlIGxvYWRlZCBhZ2Fpbj9cblx0XHRcdGlmKG9iai5zdGF0ZS5sb2FkZWQpIHtcblx0XHRcdFx0b2JqLnN0YXRlLmxvYWRlZCA9IGZhbHNlO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmoucGFyZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHR0aGlzLl9tb2RlbC5kYXRhW29iai5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kID0gJC52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX21vZGVsLmRhdGFbb2JqLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QsIGZ1bmN0aW9uICh2KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJC5pbkFycmF5KHYsIG9iai5jaGlsZHJlbl9kKSA9PT0gLTE7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Zm9yKGsgPSAwLCBsID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVtvYmouY2hpbGRyZW5fZFtrXV0uc3RhdGUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRcdGMgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkZWxldGUgdGhpcy5fbW9kZWwuZGF0YVtvYmouY2hpbGRyZW5fZFtrXV07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGMpIHtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQgPSAkLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLCBmdW5jdGlvbiAodikge1xuXHRcdFx0XHRcdFx0cmV0dXJuICQuaW5BcnJheSh2LCBvYmouY2hpbGRyZW5fZCkgPT09IC0xO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9iai5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRvYmouY2hpbGRyZW5fZCA9IFtdO1xuXHRcdFx0XHRpZihjKSB7XG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgeyAnYWN0aW9uJyA6ICdsb2FkX25vZGUnLCAnbm9kZScgOiBvYmosICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG9iai5zdGF0ZS5mYWlsZWQgPSBmYWxzZTtcblx0XHRcdG9iai5zdGF0ZS5sb2FkaW5nID0gdHJ1ZTtcblx0XHRcdHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKS5hZGRDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoJ2FyaWEtYnVzeScsdHJ1ZSk7XG5cdFx0XHR0aGlzLl9sb2FkX25vZGUob2JqLCAkLnByb3h5KGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0XHRcdFx0b2JqID0gdGhpcy5fbW9kZWwuZGF0YVtvYmouaWRdO1xuXHRcdFx0XHRvYmouc3RhdGUubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRvYmouc3RhdGUubG9hZGVkID0gc3RhdHVzO1xuXHRcdFx0XHRvYmouc3RhdGUuZmFpbGVkID0gIW9iai5zdGF0ZS5sb2FkZWQ7XG5cdFx0XHRcdHZhciBkb20gPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSksIGkgPSAwLCBqID0gMCwgbSA9IHRoaXMuX21vZGVsLmRhdGEsIGhhc19jaGlsZHJlbiA9IGZhbHNlO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0aWYobVtvYmouY2hpbGRyZW5baV1dICYmICFtW29iai5jaGlsZHJlbltpXV0uc3RhdGUuaGlkZGVuKSB7XG5cdFx0XHRcdFx0XHRoYXNfY2hpbGRyZW4gPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKG9iai5zdGF0ZS5sb2FkZWQgJiYgZG9tICYmIGRvbS5sZW5ndGgpIHtcblx0XHRcdFx0XHRkb20ucmVtb3ZlQ2xhc3MoJ2pzdHJlZS1jbG9zZWQganN0cmVlLW9wZW4ganN0cmVlLWxlYWYnKTtcblx0XHRcdFx0XHRpZiAoIWhhc19jaGlsZHJlbikge1xuXHRcdFx0XHRcdFx0ZG9tLmFkZENsYXNzKCdqc3RyZWUtbGVhZicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChvYmouaWQgIT09ICcjJykge1xuXHRcdFx0XHRcdFx0XHRkb20uYWRkQ2xhc3Mob2JqLnN0YXRlLm9wZW5lZCA/ICdqc3RyZWUtb3BlbicgOiAnanN0cmVlLWNsb3NlZCcpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRkb20ucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKCdhcmlhLWJ1c3knLGZhbHNlKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCBhZnRlciBhIG5vZGUgaXMgbG9hZGVkXG5cdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHQgKiBAbmFtZSBsb2FkX25vZGUuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBub2RlIHRoYXQgd2FzIGxvYWRpbmdcblx0XHRcdFx0ICogQHBhcmFtIHtCb29sZWFufSBzdGF0dXMgd2FzIHRoZSBub2RlIGxvYWRlZCBzdWNjZXNzZnVsbHlcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignbG9hZF9ub2RlJywgeyBcIm5vZGVcIiA6IG9iaiwgXCJzdGF0dXNcIiA6IHN0YXR1cyB9KTtcblx0XHRcdFx0aWYoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKHRoaXMsIG9iaiwgc3RhdHVzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBsb2FkIGFuIGFycmF5IG9mIG5vZGVzICh3aWxsIGFsc28gbG9hZCB1bmF2YWlsYWJsZSBub2RlcyBhcyBzb29uIGFzIHRoZSBhcHBlYXIgaW4gdGhlIHN0cnVjdHVyZSkuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9sb2FkX25vZGVzKG5vZGVzIFssIGNhbGxiYWNrXSlcblx0XHQgKiBAcGFyYW0gIHthcnJheX0gbm9kZXNcblx0XHQgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBvbmNlIGxvYWRpbmcgaXMgY29tcGxldGUsIHRoZSBmdW5jdGlvbiBpcyBleGVjdXRlZCBpbiB0aGUgaW5zdGFuY2UncyBzY29wZSBhbmQgcmVjZWl2ZXMgb25lIGFyZ3VtZW50IC0gdGhlIGFycmF5IHBhc3NlZCB0byBfbG9hZF9ub2Rlc1xuXHRcdCAqL1xuXHRcdF9sb2FkX25vZGVzIDogZnVuY3Rpb24gKG5vZGVzLCBjYWxsYmFjaywgaXNfY2FsbGJhY2ssIGZvcmNlX3JlbG9hZCkge1xuXHRcdFx0dmFyIHIgPSB0cnVlLFxuXHRcdFx0XHRjID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9sb2FkX25vZGVzKG5vZGVzLCBjYWxsYmFjaywgdHJ1ZSk7IH0sXG5cdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLCBpLCBqLCB0bXAgPSBbXTtcblx0XHRcdGZvcihpID0gMCwgaiA9IG5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRpZihtW25vZGVzW2ldXSAmJiAoICghbVtub2Rlc1tpXV0uc3RhdGUubG9hZGVkICYmICFtW25vZGVzW2ldXS5zdGF0ZS5mYWlsZWQpIHx8ICghaXNfY2FsbGJhY2sgJiYgZm9yY2VfcmVsb2FkKSApKSB7XG5cdFx0XHRcdFx0aWYoIXRoaXMuaXNfbG9hZGluZyhub2Rlc1tpXSkpIHtcblx0XHRcdFx0XHRcdHRoaXMubG9hZF9ub2RlKG5vZGVzW2ldLCBjKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ciA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihyKSB7XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IG5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGlmKG1bbm9kZXNbaV1dICYmIG1bbm9kZXNbaV1dLnN0YXRlLmxvYWRlZCkge1xuXHRcdFx0XHRcdFx0dG1wLnB1c2gobm9kZXNbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZihjYWxsYmFjayAmJiAhY2FsbGJhY2suZG9uZSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgdG1wKTtcblx0XHRcdFx0XHRjYWxsYmFjay5kb25lID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogbG9hZHMgYWxsIHVubG9hZGVkIG5vZGVzXG5cdFx0ICogQG5hbWUgbG9hZF9hbGwoW29iaiwgY2FsbGJhY2tdKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBsb2FkIHJlY3Vyc2l2ZWx5LCBvbWl0IHRvIGxvYWQgYWxsIG5vZGVzIGluIHRoZSB0cmVlXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBvbmNlIGxvYWRpbmcgYWxsIHRoZSBub2RlcyBpcyBjb21wbGV0ZSxcblx0XHQgKiBAdHJpZ2dlciBsb2FkX2FsbC5qc3RyZWVcblx0XHQgKi9cblx0XHRsb2FkX2FsbCA6IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG5cdFx0XHRpZighb2JqKSB7IG9iaiA9ICQuanN0cmVlLnJvb3Q7IH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmopIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHR2YXIgdG9fbG9hZCA9IFtdLFxuXHRcdFx0XHRtID0gdGhpcy5fbW9kZWwuZGF0YSxcblx0XHRcdFx0YyA9IG1bb2JqLmlkXS5jaGlsZHJlbl9kLFxuXHRcdFx0XHRpLCBqO1xuXHRcdFx0aWYob2JqLnN0YXRlICYmICFvYmouc3RhdGUubG9hZGVkKSB7XG5cdFx0XHRcdHRvX2xvYWQucHVzaChvYmouaWQpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKGkgPSAwLCBqID0gYy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0aWYobVtjW2ldXSAmJiBtW2NbaV1dLnN0YXRlICYmICFtW2NbaV1dLnN0YXRlLmxvYWRlZCkge1xuXHRcdFx0XHRcdHRvX2xvYWQucHVzaChjW2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYodG9fbG9hZC5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5fbG9hZF9ub2Rlcyh0b19sb2FkLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dGhpcy5sb2FkX2FsbChvYmosIGNhbGxiYWNrKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCBhZnRlciBhIGxvYWRfYWxsIGNhbGwgY29tcGxldGVzXG5cdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHQgKiBAbmFtZSBsb2FkX2FsbC5qc3RyZWVcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGUgdGhlIHJlY3Vyc2l2ZWx5IGxvYWRlZCBub2RlXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHRpZihjYWxsYmFjaykgeyBjYWxsYmFjay5jYWxsKHRoaXMsIG9iaik7IH1cblx0XHRcdFx0dGhpcy50cmlnZ2VyKCdsb2FkX2FsbCcsIHsgXCJub2RlXCIgOiBvYmogfSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBoYW5kbGVzIHRoZSBhY3R1YWwgbG9hZGluZyBvZiBhIG5vZGUuIFVzZWQgb25seSBpbnRlcm5hbGx5LlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgX2xvYWRfbm9kZShvYmogWywgY2FsbGJhY2tdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBvbmNlIGxvYWRpbmcgaXMgY29tcGxldGUsIHRoZSBmdW5jdGlvbiBpcyBleGVjdXRlZCBpbiB0aGUgaW5zdGFuY2UncyBzY29wZSBhbmQgcmVjZWl2ZXMgb25lIGFyZ3VtZW50IC0gYSBib29sZWFuIHN0YXR1c1xuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0X2xvYWRfbm9kZSA6IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgcyA9IHRoaXMuc2V0dGluZ3MuY29yZS5kYXRhLCB0O1xuXHRcdFx0dmFyIG5vdFRleHRPckNvbW1lbnROb2RlID0gZnVuY3Rpb24gbm90VGV4dE9yQ29tbWVudE5vZGUgKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5ub2RlVHlwZSAhPT0gMyAmJiB0aGlzLm5vZGVUeXBlICE9PSA4O1xuXHRcdFx0fTtcblx0XHRcdC8vIHVzZSBvcmlnaW5hbCBIVE1MXG5cdFx0XHRpZighcykge1xuXHRcdFx0XHRpZihvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fYXBwZW5kX2h0bWxfZGF0YShvYmosIHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbC5jbG9uZSh0cnVlKSwgZnVuY3Rpb24gKHN0YXR1cykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCh0aGlzLCBzdGF0dXMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QgPyB0aGlzLl9hcHBlbmRfaHRtbF9kYXRhKG9iaiwgdGhpcy5fZGF0YS5jb3JlLm9yaWdpbmFsX2NvbnRhaW5lcl9odG1sLmNsb25lKHRydWUpKSA6IGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdGlmKCQuaXNGdW5jdGlvbihzKSkge1xuXHRcdFx0XHRyZXR1cm4gcy5jYWxsKHRoaXMsIG9iaiwgJC5wcm94eShmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdGlmKGQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKHRoaXMsIGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzW3R5cGVvZiBkID09PSAnc3RyaW5nJyA/ICdfYXBwZW5kX2h0bWxfZGF0YScgOiAnX2FwcGVuZF9qc29uX2RhdGEnXShvYmosIHR5cGVvZiBkID09PSAnc3RyaW5nJyA/ICQoJC5wYXJzZUhUTUwoZCkpLmZpbHRlcihub3RUZXh0T3JDb21tZW50Tm9kZSkgOiBkLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgc3RhdHVzKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyByZXR1cm4gZCA9PT0gZmFsc2UgPyBjYWxsYmFjay5jYWxsKHRoaXMsIGZhbHNlKSA6IGNhbGxiYWNrLmNhbGwodGhpcywgdGhpc1t0eXBlb2YgZCA9PT0gJ3N0cmluZycgPyAnX2FwcGVuZF9odG1sX2RhdGEnIDogJ19hcHBlbmRfanNvbl9kYXRhJ10ob2JqLCB0eXBlb2YgZCA9PT0gJ3N0cmluZycgPyAkKGQpIDogZCkpO1xuXHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHR9XG5cdFx0XHRpZih0eXBlb2YgcyA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0aWYocy51cmwpIHtcblx0XHRcdFx0XHRzID0gJC5leHRlbmQodHJ1ZSwge30sIHMpO1xuXHRcdFx0XHRcdGlmKCQuaXNGdW5jdGlvbihzLnVybCkpIHtcblx0XHRcdFx0XHRcdHMudXJsID0gcy51cmwuY2FsbCh0aGlzLCBvYmopO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZigkLmlzRnVuY3Rpb24ocy5kYXRhKSkge1xuXHRcdFx0XHRcdFx0cy5kYXRhID0gcy5kYXRhLmNhbGwodGhpcywgb2JqKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuICQuYWpheChzKVxuXHRcdFx0XHRcdFx0LmRvbmUoJC5wcm94eShmdW5jdGlvbiAoZCx0LHgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IHguZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtVHlwZScpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKCh0eXBlICYmIHR5cGUuaW5kZXhPZignanNvbicpICE9PSAtMSkgfHwgdHlwZW9mIGQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl9hcHBlbmRfanNvbl9kYXRhKG9iaiwgZCwgZnVuY3Rpb24gKHN0YXR1cykgeyBjYWxsYmFjay5jYWxsKHRoaXMsIHN0YXR1cyk7IH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly9yZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCB0aGlzLl9hcHBlbmRfanNvbl9kYXRhKG9iaiwgZCkpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZigodHlwZSAmJiB0eXBlLmluZGV4T2YoJ2h0bWwnKSAhPT0gLTEpIHx8IHR5cGVvZiBkID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fYXBwZW5kX2h0bWxfZGF0YShvYmosICQoJC5wYXJzZUhUTUwoZCkpLmZpbHRlcihub3RUZXh0T3JDb21tZW50Tm9kZSksIGZ1bmN0aW9uIChzdGF0dXMpIHsgY2FsbGJhY2suY2FsbCh0aGlzLCBzdGF0dXMpOyB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIHRoaXMuX2FwcGVuZF9odG1sX2RhdGEob2JqLCAkKGQpKSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yID0geyAnZXJyb3InIDogJ2FqYXgnLCAncGx1Z2luJyA6ICdjb3JlJywgJ2lkJyA6ICdjb3JlXzA0JywgJ3JlYXNvbicgOiAnQ291bGQgbm90IGxvYWQgbm9kZScsICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2lkJyA6IG9iai5pZCwgJ3hocicgOiB4IH0pIH07XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcywgdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdFx0XHQuZmFpbCgkLnByb3h5KGZ1bmN0aW9uIChmKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCh0aGlzLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnYWpheCcsICdwbHVnaW4nIDogJ2NvcmUnLCAnaWQnIDogJ2NvcmVfMDQnLCAncmVhc29uJyA6ICdDb3VsZCBub3QgbG9hZCBub2RlJywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnaWQnIDogb2JqLmlkLCAneGhyJyA6IGYgfSkgfTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLCB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcik7XG5cdFx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0ID0gKCQuaXNBcnJheShzKSB8fCAkLmlzUGxhaW5PYmplY3QocykpID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSkgOiBzO1xuXHRcdFx0XHRpZihvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fYXBwZW5kX2pzb25fZGF0YShvYmosIHQsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgc3RhdHVzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciA9IHsgJ2Vycm9yJyA6ICdub2RhdGEnLCAncGx1Z2luJyA6ICdjb3JlJywgJ2lkJyA6ICdjb3JlXzA1JywgJ3JlYXNvbicgOiAnQ291bGQgbm90IGxvYWQgbm9kZScsICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2lkJyA6IG9iai5pZCB9KSB9O1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKTtcblx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly9yZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCAob2JqLmlkID09PSAkLmpzdHJlZS5yb290ID8gdGhpcy5fYXBwZW5kX2pzb25fZGF0YShvYmosIHQpIDogZmFsc2UpICk7XG5cdFx0XHR9XG5cdFx0XHRpZih0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0aWYob2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuX2FwcGVuZF9odG1sX2RhdGEob2JqLCAkKCQucGFyc2VIVE1MKHMpKS5maWx0ZXIobm90VGV4dE9yQ29tbWVudE5vZGUpLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKHRoaXMsIHN0YXR1cyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnbm9kYXRhJywgJ3BsdWdpbicgOiAnY29yZScsICdpZCcgOiAnY29yZV8wNicsICdyZWFzb24nIDogJ0NvdWxkIG5vdCBsb2FkIG5vZGUnLCAnZGF0YScgOiBKU09OLnN0cmluZ2lmeSh7ICdpZCcgOiBvYmouaWQgfSkgfTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLCB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcik7XG5cdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpcywgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpcywgKG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCA/IHRoaXMuX2FwcGVuZF9odG1sX2RhdGEob2JqLCAkKHMpKSA6IGZhbHNlKSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpcywgZmFsc2UpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogYWRkcyBhIG5vZGUgdG8gdGhlIGxpc3Qgb2Ygbm9kZXMgdG8gcmVkcmF3LiBVc2VkIG9ubHkgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9ub2RlX2NoYW5nZWQob2JqIFssIGNhbGxiYWNrXSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqXG5cdFx0ICovXG5cdFx0X25vZGVfY2hhbmdlZCA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKG9iaikge1xuXHRcdFx0XHR0aGlzLl9tb2RlbC5jaGFuZ2VkLnB1c2gob2JqLmlkKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGFwcGVuZHMgSFRNTCBjb250ZW50IHRvIHRoZSB0cmVlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBfYXBwZW5kX2h0bWxfZGF0YShvYmosIGRhdGEpXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBhcHBlbmQgdG9cblx0XHQgKiBAcGFyYW0gIHtTdHJpbmd9IGRhdGEgdGhlIEhUTUwgc3RyaW5nIHRvIHBhcnNlIGFuZCBhcHBlbmRcblx0XHQgKiBAdHJpZ2dlciBtb2RlbC5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0X2FwcGVuZF9odG1sX2RhdGEgOiBmdW5jdGlvbiAoZG9tLCBkYXRhLCBjYikge1xuXHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShkb20pO1xuXHRcdFx0ZG9tLmNoaWxkcmVuID0gW107XG5cdFx0XHRkb20uY2hpbGRyZW5fZCA9IFtdO1xuXHRcdFx0dmFyIGRhdCA9IGRhdGEuaXMoJ3VsJykgPyBkYXRhLmNoaWxkcmVuKCkgOiBkYXRhLFxuXHRcdFx0XHRwYXIgPSBkb20uaWQsXG5cdFx0XHRcdGNoZCA9IFtdLFxuXHRcdFx0XHRkcGMgPSBbXSxcblx0XHRcdFx0bSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdHAgPSBtW3Bhcl0sXG5cdFx0XHRcdHMgPSB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoLFxuXHRcdFx0XHR0bXAsIGksIGo7XG5cdFx0XHRkYXQuZWFjaCgkLnByb3h5KGZ1bmN0aW9uIChpLCB2KSB7XG5cdFx0XHRcdHRtcCA9IHRoaXMuX3BhcnNlX21vZGVsX2Zyb21faHRtbCgkKHYpLCBwYXIsIHAucGFyZW50cy5jb25jYXQoKSk7XG5cdFx0XHRcdGlmKHRtcCkge1xuXHRcdFx0XHRcdGNoZC5wdXNoKHRtcCk7XG5cdFx0XHRcdFx0ZHBjLnB1c2godG1wKTtcblx0XHRcdFx0XHRpZihtW3RtcF0uY2hpbGRyZW5fZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGRwYyA9IGRwYy5jb25jYXQobVt0bXBdLmNoaWxkcmVuX2QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0cC5jaGlsZHJlbiA9IGNoZDtcblx0XHRcdHAuY2hpbGRyZW5fZCA9IGRwYztcblx0XHRcdGZvcihpID0gMCwgaiA9IHAucGFyZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0bVtwLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QgPSBtW3AucGFyZW50c1tpXV0uY2hpbGRyZW5fZC5jb25jYXQoZHBjKTtcblx0XHRcdH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gbmV3IGRhdGEgaXMgaW5zZXJ0ZWQgdG8gdGhlIHRyZWUgbW9kZWxcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgbW9kZWwuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge0FycmF5fSBub2RlcyBhbiBhcnJheSBvZiBub2RlIElEc1xuXHRcdFx0ICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudCB0aGUgcGFyZW50IElEIG9mIHRoZSBub2Rlc1xuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ21vZGVsJywgeyBcIm5vZGVzXCIgOiBkcGMsICdwYXJlbnQnIDogcGFyIH0pO1xuXHRcdFx0aWYocGFyICE9PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdHRoaXMuX25vZGVfY2hhbmdlZChwYXIpO1xuXHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKCcuanN0cmVlLWluaXRpYWwtbm9kZScpLnJlbW92ZSgpO1xuXHRcdFx0XHR0aGlzLnJlZHJhdyh0cnVlKTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGggIT09IHMpIHtcblx0XHRcdFx0dGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgeyAnYWN0aW9uJyA6ICdtb2RlbCcsICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQgfSk7XG5cdFx0XHR9XG5cdFx0XHRjYi5jYWxsKHRoaXMsIHRydWUpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogYXBwZW5kcyBKU09OIGNvbnRlbnQgdG8gdGhlIHRyZWUuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9hcHBlbmRfanNvbl9kYXRhKG9iaiwgZGF0YSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGFwcGVuZCB0b1xuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gZGF0YSB0aGUgSlNPTiBvYmplY3QgdG8gcGFyc2UgYW5kIGFwcGVuZFxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGZvcmNlX3Byb2Nlc3NpbmcgaW50ZXJuYWwgcGFyYW0gLSBkbyBub3Qgc2V0XG5cdFx0ICogQHRyaWdnZXIgbW9kZWwuanN0cmVlLCBjaGFuZ2VkLmpzdHJlZVxuXHRcdCAqL1xuXHRcdF9hcHBlbmRfanNvbl9kYXRhIDogZnVuY3Rpb24gKGRvbSwgZGF0YSwgY2IsIGZvcmNlX3Byb2Nlc3NpbmcpIHtcblx0XHRcdGlmKHRoaXMuZWxlbWVudCA9PT0gbnVsbCkgeyByZXR1cm47IH1cblx0XHRcdGRvbSA9IHRoaXMuZ2V0X25vZGUoZG9tKTtcblx0XHRcdGRvbS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0ZG9tLmNoaWxkcmVuX2QgPSBbXTtcblx0XHRcdC8vIColJEAhISFcblx0XHRcdGlmKGRhdGEuZCkge1xuXHRcdFx0XHRkYXRhID0gZGF0YS5kO1xuXHRcdFx0XHRpZih0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZighJC5pc0FycmF5KGRhdGEpKSB7IGRhdGEgPSBbZGF0YV07IH1cblx0XHRcdHZhciB3ID0gbnVsbCxcblx0XHRcdFx0YXJncyA9IHtcblx0XHRcdFx0XHQnZGYnXHQ6IHRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUsXG5cdFx0XHRcdFx0J2RhdCdcdDogZGF0YSxcblx0XHRcdFx0XHQncGFyJ1x0OiBkb20uaWQsXG5cdFx0XHRcdFx0J20nXHRcdDogdGhpcy5fbW9kZWwuZGF0YSxcblx0XHRcdFx0XHQndF9pZCdcdDogdGhpcy5faWQsXG5cdFx0XHRcdFx0J3RfY250J1x0OiB0aGlzLl9jbnQsXG5cdFx0XHRcdFx0J3NlbCdcdDogdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbiAoZGF0YSwgdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0aWYoZGF0YS5kYXRhKSB7IGRhdGEgPSBkYXRhLmRhdGE7IH1cblx0XHRcdFx0XHR2YXIgZGF0ID0gZGF0YS5kYXQsXG5cdFx0XHRcdFx0XHRwYXIgPSBkYXRhLnBhcixcblx0XHRcdFx0XHRcdGNoZCA9IFtdLFxuXHRcdFx0XHRcdFx0ZHBjID0gW10sXG5cdFx0XHRcdFx0XHRhZGQgPSBbXSxcblx0XHRcdFx0XHRcdGRmID0gZGF0YS5kZixcblx0XHRcdFx0XHRcdHRfaWQgPSBkYXRhLnRfaWQsXG5cdFx0XHRcdFx0XHR0X2NudCA9IGRhdGEudF9jbnQsXG5cdFx0XHRcdFx0XHRtID0gZGF0YS5tLFxuXHRcdFx0XHRcdFx0cCA9IG1bcGFyXSxcblx0XHRcdFx0XHRcdHNlbCA9IGRhdGEuc2VsLFxuXHRcdFx0XHRcdFx0dG1wLCBpLCBqLCByc2x0LFxuXHRcdFx0XHRcdFx0cGFyc2VfZmxhdCA9IGZ1bmN0aW9uIChkLCBwLCBwcykge1xuXHRcdFx0XHRcdFx0XHRpZighcHMpIHsgcHMgPSBbXTsgfVxuXHRcdFx0XHRcdFx0XHRlbHNlIHsgcHMgPSBwcy5jb25jYXQoKTsgfVxuXHRcdFx0XHRcdFx0XHRpZihwKSB7IHBzLnVuc2hpZnQocCk7IH1cblx0XHRcdFx0XHRcdFx0dmFyIHRpZCA9IGQuaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0XHRpLCBqLCBjLCBlLFxuXHRcdFx0XHRcdFx0XHRcdHRtcCA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkXHRcdFx0OiB0aWQsXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0XHRcdDogZC50ZXh0IHx8ICcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvblx0XHQ6IGQuaWNvbiAhPT0gdW5kZWZpbmVkID8gZC5pY29uIDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudFx0XHQ6IHAsXG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnRzXHRcdDogcHMsXG5cdFx0XHRcdFx0XHRcdFx0XHRjaGlsZHJlblx0OiBkLmNoaWxkcmVuIHx8IFtdLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2hpbGRyZW5fZFx0OiBkLmNoaWxkcmVuX2QgfHwgW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhXHRcdDogZC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdFx0c3RhdGVcdFx0OiB7IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRsaV9hdHRyXHRcdDogeyBpZCA6IGZhbHNlIH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRhX2F0dHJcdFx0OiB7IGhyZWYgOiAnIycgfSxcblx0XHRcdFx0XHRcdFx0XHRcdG9yaWdpbmFsXHQ6IGZhbHNlXG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Zm9yKGkgaW4gZGYpIHtcblx0XHRcdFx0XHRcdFx0XHRpZihkZi5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZGZbaV07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgZC5kYXRhICYmIGQuZGF0YS5qc3RyZWUgJiYgZC5kYXRhLmpzdHJlZS5pY29uKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmljb24gPSBkLmRhdGEuanN0cmVlLmljb247XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYodG1wLmljb24gPT09IHVuZGVmaW5lZCB8fCB0bXAuaWNvbiA9PT0gbnVsbCB8fCB0bXAuaWNvbiA9PT0gXCJcIikge1xuXHRcdFx0XHRcdFx0XHRcdHRtcC5pY29uID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZihkICYmIGQuZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRtcC5kYXRhID0gZC5kYXRhO1xuXHRcdFx0XHRcdFx0XHRcdGlmKGQuZGF0YS5qc3RyZWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGZvcihpIGluIGQuZGF0YS5qc3RyZWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoZC5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5zdGF0ZVtpXSA9IGQuZGF0YS5qc3RyZWVbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiB0eXBlb2YgZC5zdGF0ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKGkgaW4gZC5zdGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoZC5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAuc3RhdGVbaV0gPSBkLnN0YXRlW2ldO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZihkICYmIHR5cGVvZiBkLmxpX2F0dHIgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChpIGluIGQubGlfYXR0cikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoZC5saV9hdHRyLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5saV9hdHRyW2ldID0gZC5saV9hdHRyW2ldO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZighdG1wLmxpX2F0dHIuaWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAubGlfYXR0ci5pZCA9IHRpZDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZihkICYmIHR5cGVvZiBkLmFfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKGkgaW4gZC5hX2F0dHIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmKGQuYV9hdHRyLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5hX2F0dHJbaV0gPSBkLmFfYXR0cltpXTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiBkLmNoaWxkcmVuICYmIGQuY2hpbGRyZW4gPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAuc3RhdGUubG9hZGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuID0gW107XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuX2QgPSBbXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRtW3RtcC5pZF0gPSB0bXA7XG5cdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRjID0gcGFyc2VfZmxhdChtW3RtcC5jaGlsZHJlbltpXV0sIHRtcC5pZCwgcHMpO1xuXHRcdFx0XHRcdFx0XHRcdGUgPSBtW2NdO1xuXHRcdFx0XHRcdFx0XHRcdHRtcC5jaGlsZHJlbl9kLnB1c2goYyk7XG5cdFx0XHRcdFx0XHRcdFx0aWYoZS5jaGlsZHJlbl9kLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuX2QgPSB0bXAuY2hpbGRyZW5fZC5jb25jYXQoZS5jaGlsZHJlbl9kKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGQuZGF0YTtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGQuY2hpbGRyZW47XG5cdFx0XHRcdFx0XHRcdG1bdG1wLmlkXS5vcmlnaW5hbCA9IGQ7XG5cdFx0XHRcdFx0XHRcdGlmKHRtcC5zdGF0ZS5zZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0XHRcdGFkZC5wdXNoKHRtcC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRtcC5pZDtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwYXJzZV9uZXN0ID0gZnVuY3Rpb24gKGQsIHAsIHBzKSB7XG5cdFx0XHRcdFx0XHRcdGlmKCFwcykgeyBwcyA9IFtdOyB9XG5cdFx0XHRcdFx0XHRcdGVsc2UgeyBwcyA9IHBzLmNvbmNhdCgpOyB9XG5cdFx0XHRcdFx0XHRcdGlmKHApIHsgcHMudW5zaGlmdChwKTsgfVxuXHRcdFx0XHRcdFx0XHR2YXIgdGlkID0gZmFsc2UsIGksIGosIGMsIGUsIHRtcDtcblx0XHRcdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0XHRcdHRpZCA9ICdqJyArIHRfaWQgKyAnXycgKyAoKyt0X2NudCk7XG5cdFx0XHRcdFx0XHRcdH0gd2hpbGUobVt0aWRdKTtcblxuXHRcdFx0XHRcdFx0XHR0bXAgPSB7XG5cdFx0XHRcdFx0XHRcdFx0aWRcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHRleHRcdFx0OiB0eXBlb2YgZCA9PT0gJ3N0cmluZycgPyBkIDogJycsXG5cdFx0XHRcdFx0XHRcdFx0aWNvblx0XHQ6IHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBkLmljb24gIT09IHVuZGVmaW5lZCA/IGQuaWNvbiA6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0cGFyZW50XHRcdDogcCxcblx0XHRcdFx0XHRcdFx0XHRwYXJlbnRzXHRcdDogcHMsXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGRyZW5cdDogW10sXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGRyZW5fZFx0OiBbXSxcblx0XHRcdFx0XHRcdFx0XHRkYXRhXHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZVx0XHQ6IHsgfSxcblx0XHRcdFx0XHRcdFx0XHRsaV9hdHRyXHRcdDogeyBpZCA6IGZhbHNlIH0sXG5cdFx0XHRcdFx0XHRcdFx0YV9hdHRyXHRcdDogeyBocmVmIDogJyMnIH0sXG5cdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxcdDogZmFsc2Vcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Zm9yKGkgaW4gZGYpIHtcblx0XHRcdFx0XHRcdFx0XHRpZihkZi5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZGZbaV07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgZC5pZCkgeyB0bXAuaWQgPSBkLmlkLnRvU3RyaW5nKCk7IH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiBkLnRleHQpIHsgdG1wLnRleHQgPSBkLnRleHQ7IH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiBkLmRhdGEgJiYgZC5kYXRhLmpzdHJlZSAmJiBkLmRhdGEuanN0cmVlLmljb24pIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAuaWNvbiA9IGQuZGF0YS5qc3RyZWUuaWNvbjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZih0bXAuaWNvbiA9PT0gdW5kZWZpbmVkIHx8IHRtcC5pY29uID09PSBudWxsIHx8IHRtcC5pY29uID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmljb24gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgZC5kYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmRhdGEgPSBkLmRhdGE7XG5cdFx0XHRcdFx0XHRcdFx0aWYoZC5kYXRhLmpzdHJlZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yKGkgaW4gZC5kYXRhLmpzdHJlZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihkLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZC5kYXRhLmpzdHJlZVtpXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZihkICYmIHR5cGVvZiBkLnN0YXRlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdFx0XHRcdGZvciAoaSBpbiBkLnN0YXRlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihkLnN0YXRlLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5zdGF0ZVtpXSA9IGQuc3RhdGVbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgdHlwZW9mIGQubGlfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IgKGkgaW4gZC5saV9hdHRyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihkLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dG1wLmxpX2F0dHJbaV0gPSBkLmxpX2F0dHJbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKHRtcC5saV9hdHRyLmlkICYmICF0bXAuaWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAuaWQgPSB0bXAubGlfYXR0ci5pZC50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKCF0bXAuaWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAuaWQgPSB0aWQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoIXRtcC5saV9hdHRyLmlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmxpX2F0dHIuaWQgPSB0bXAuaWQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiB0eXBlb2YgZC5hX2F0dHIgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChpIGluIGQuYV9hdHRyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihkLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAuYV9hdHRyW2ldID0gZC5hX2F0dHJbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgZC5jaGlsZHJlbiAmJiBkLmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IGQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjID0gcGFyc2VfbmVzdChkLmNoaWxkcmVuW2ldLCB0bXAuaWQsIHBzKTtcblx0XHRcdFx0XHRcdFx0XHRcdGUgPSBtW2NdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuLnB1c2goYyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihlLmNoaWxkcmVuX2QubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gdG1wLmNoaWxkcmVuX2QuY29uY2F0KGUuY2hpbGRyZW5fZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gdG1wLmNoaWxkcmVuX2QuY29uY2F0KHRtcC5jaGlsZHJlbik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoZCAmJiBkLmNoaWxkcmVuICYmIGQuY2hpbGRyZW4gPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0XHR0bXAuc3RhdGUubG9hZGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuID0gW107XG5cdFx0XHRcdFx0XHRcdFx0dG1wLmNoaWxkcmVuX2QgPSBbXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkZWxldGUgZC5kYXRhO1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgZC5jaGlsZHJlbjtcblx0XHRcdFx0XHRcdFx0dG1wLm9yaWdpbmFsID0gZDtcblx0XHRcdFx0XHRcdFx0bVt0bXAuaWRdID0gdG1wO1xuXHRcdFx0XHRcdFx0XHRpZih0bXAuc3RhdGUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRhZGQucHVzaCh0bXAuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0bXAuaWQ7XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0aWYoZGF0Lmxlbmd0aCAmJiBkYXRbMF0uaWQgIT09IHVuZGVmaW5lZCAmJiBkYXRbMF0ucGFyZW50ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdC8vIEZsYXQgSlNPTiBzdXBwb3J0IChmb3IgZWFzeSBpbXBvcnQgZnJvbSBEQik6XG5cdFx0XHRcdFx0XHQvLyAxKSBjb252ZXJ0IHRvIG9iamVjdCAoZm9yZWFjaClcblx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IGRhdC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0aWYoIWRhdFtpXS5jaGlsZHJlbikge1xuXHRcdFx0XHRcdFx0XHRcdGRhdFtpXS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdG1bZGF0W2ldLmlkLnRvU3RyaW5nKCldID0gZGF0W2ldO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gMikgcG9wdWxhdGUgY2hpbGRyZW4gKGZvcmVhY2gpXG5cdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBkYXQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdG1bZGF0W2ldLnBhcmVudC50b1N0cmluZygpXS5jaGlsZHJlbi5wdXNoKGRhdFtpXS5pZC50b1N0cmluZygpKTtcblx0XHRcdFx0XHRcdFx0Ly8gcG9wdWxhdGUgcGFyZW50LmNoaWxkcmVuX2Rcblx0XHRcdFx0XHRcdFx0cC5jaGlsZHJlbl9kLnB1c2goZGF0W2ldLmlkLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gMykgbm9ybWFsaXplICYmIHBvcHVsYXRlIHBhcmVudHMgYW5kIGNoaWxkcmVuX2Qgd2l0aCByZWN1cnNpb25cblx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHAuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdHRtcCA9IHBhcnNlX2ZsYXQobVtwLmNoaWxkcmVuW2ldXSwgcGFyLCBwLnBhcmVudHMuY29uY2F0KCkpO1xuXHRcdFx0XHRcdFx0XHRkcGMucHVzaCh0bXApO1xuXHRcdFx0XHRcdFx0XHRpZihtW3RtcF0uY2hpbGRyZW5fZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRkcGMgPSBkcGMuY29uY2F0KG1bdG1wXS5jaGlsZHJlbl9kKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gcC5wYXJlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRtW3AucGFyZW50c1tpXV0uY2hpbGRyZW5fZCA9IG1bcC5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kLmNvbmNhdChkcGMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gPykgdGhyZWVfc3RhdGUgc2VsZWN0aW9uIC0gcC5zdGF0ZS5zZWxlY3RlZCAmJiB0IC0gKGlmIHRocmVlX3N0YXRlIGZvcmVhY2goZGF0ID0+IGNoKSAtPiBmb3JlYWNoKHBhcmVudHMpIGlmKHBhcmVudC5zZWxlY3RlZCkgY2hpbGQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cnNsdCA9IHtcblx0XHRcdFx0XHRcdFx0J2NudCcgOiB0X2NudCxcblx0XHRcdFx0XHRcdFx0J21vZCcgOiBtLFxuXHRcdFx0XHRcdFx0XHQnc2VsJyA6IHNlbCxcblx0XHRcdFx0XHRcdFx0J3BhcicgOiBwYXIsXG5cdFx0XHRcdFx0XHRcdCdkcGMnIDogZHBjLFxuXHRcdFx0XHRcdFx0XHQnYWRkJyA6IGFkZFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBkYXQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdHRtcCA9IHBhcnNlX25lc3QoZGF0W2ldLCBwYXIsIHAucGFyZW50cy5jb25jYXQoKSk7XG5cdFx0XHRcdFx0XHRcdGlmKHRtcCkge1xuXHRcdFx0XHRcdFx0XHRcdGNoZC5wdXNoKHRtcCk7XG5cdFx0XHRcdFx0XHRcdFx0ZHBjLnB1c2godG1wKTtcblx0XHRcdFx0XHRcdFx0XHRpZihtW3RtcF0uY2hpbGRyZW5fZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRwYyA9IGRwYy5jb25jYXQobVt0bXBdLmNoaWxkcmVuX2QpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cC5jaGlsZHJlbiA9IGNoZDtcblx0XHRcdFx0XHRcdHAuY2hpbGRyZW5fZCA9IGRwYztcblx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHAucGFyZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0bVtwLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QgPSBtW3AucGFyZW50c1tpXV0uY2hpbGRyZW5fZC5jb25jYXQoZHBjKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJzbHQgPSB7XG5cdFx0XHRcdFx0XHRcdCdjbnQnIDogdF9jbnQsXG5cdFx0XHRcdFx0XHRcdCdtb2QnIDogbSxcblx0XHRcdFx0XHRcdFx0J3NlbCcgOiBzZWwsXG5cdFx0XHRcdFx0XHRcdCdwYXInIDogcGFyLFxuXHRcdFx0XHRcdFx0XHQnZHBjJyA6IGRwYyxcblx0XHRcdFx0XHRcdFx0J2FkZCcgOiBhZGRcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0XHRwb3N0TWVzc2FnZShyc2x0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcnNsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJzbHQgPSBmdW5jdGlvbiAocnNsdCwgd29ya2VyKSB7XG5cdFx0XHRcdFx0aWYodGhpcy5lbGVtZW50ID09PSBudWxsKSB7IHJldHVybjsgfVxuXHRcdFx0XHRcdHRoaXMuX2NudCA9IHJzbHQuY250O1xuXHRcdFx0XHRcdHZhciBpLCBtID0gdGhpcy5fbW9kZWwuZGF0YTtcblx0XHRcdFx0XHRmb3IgKGkgaW4gbSkge1xuXHRcdFx0XHRcdFx0aWYgKG0uaGFzT3duUHJvcGVydHkoaSkgJiYgbVtpXS5zdGF0ZSAmJiBtW2ldLnN0YXRlLmxvYWRpbmcgJiYgcnNsdC5tb2RbaV0pIHtcblx0XHRcdFx0XHRcdFx0cnNsdC5tb2RbaV0uc3RhdGUubG9hZGluZyA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuX21vZGVsLmRhdGEgPSByc2x0Lm1vZDsgLy8gYnJlYWtzIHRoZSByZWZlcmVuY2UgaW4gbG9hZF9ub2RlIC0gY2FyZWZ1bFxuXG5cdFx0XHRcdFx0aWYod29ya2VyKSB7XG5cdFx0XHRcdFx0XHR2YXIgaiwgYSA9IHJzbHQuYWRkLCByID0gcnNsdC5zZWwsIHMgPSB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuc2xpY2UoKTtcblx0XHRcdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhO1xuXHRcdFx0XHRcdFx0Ly8gaWYgc2VsZWN0aW9uIHdhcyBjaGFuZ2VkIHdoaWxlIGNhbGN1bGF0aW5nIGluIHdvcmtlclxuXHRcdFx0XHRcdFx0aWYoci5sZW5ndGggIT09IHMubGVuZ3RoIHx8ICQudmFrYXRhLmFycmF5X3VuaXF1ZShyLmNvbmNhdChzKSkubGVuZ3RoICE9PSByLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHQvLyBkZXNlbGVjdCBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgc2VsZWN0ZWRcblx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpZigkLmluQXJyYXkocltpXSwgYSkgPT09IC0xICYmICQuaW5BcnJheShyW2ldLCBzKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG1bcltpXV0uc3RhdGUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Ly8gc2VsZWN0IG5vZGVzIHRoYXQgd2VyZSBzZWxlY3RlZCBpbiB0aGUgbWVhbiB0aW1lXG5cdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYoJC5pbkFycmF5KHNbaV0sIHIpID09PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bVtzW2ldXS5zdGF0ZS5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHJzbHQuYWRkLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkID0gdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChyc2x0LmFkZCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyKCdtb2RlbCcsIHsgXCJub2Rlc1wiIDogcnNsdC5kcGMsICdwYXJlbnQnIDogcnNsdC5wYXIgfSk7XG5cblx0XHRcdFx0XHRpZihyc2x0LnBhciAhPT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fbm9kZV9jaGFuZ2VkKHJzbHQucGFyKTtcblx0XHRcdFx0XHRcdHRoaXMucmVkcmF3KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuY2hpbGRyZW4oJy5qc3RyZWUtaW5pdGlhbC1ub2RlJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlZHJhdyh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYocnNsdC5hZGQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7ICdhY3Rpb24nIDogJ21vZGVsJywgJ3NlbGVjdGVkJyA6IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2IuY2FsbCh0aGlzLCB0cnVlKTtcblx0XHRcdFx0fTtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29yZS53b3JrZXIgJiYgd2luZG93LkJsb2IgJiYgd2luZG93LlVSTCAmJiB3aW5kb3cuV29ya2VyKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aWYodGhpcy5fd3JrID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl93cmsgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChcblx0XHRcdFx0XHRcdFx0bmV3IHdpbmRvdy5CbG9iKFxuXHRcdFx0XHRcdFx0XHRcdFsnc2VsZi5vbm1lc3NhZ2UgPSAnICsgZnVuYy50b1N0cmluZygpXSxcblx0XHRcdFx0XHRcdFx0XHR7dHlwZTpcInRleHQvamF2YXNjcmlwdFwifVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZighdGhpcy5fZGF0YS5jb3JlLndvcmtpbmcgfHwgZm9yY2VfcHJvY2Vzc2luZykge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLndvcmtpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dyA9IG5ldyB3aW5kb3cuV29ya2VyKHRoaXMuX3dyayk7XG5cdFx0XHRcdFx0XHR3Lm9ubWVzc2FnZSA9ICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0cnNsdC5jYWxsKHRoaXMsIGUuZGF0YSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdHRyeSB7IHcudGVybWluYXRlKCk7IHcgPSBudWxsOyB9IGNhdGNoKGlnbm9yZSkgeyB9XG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLCB0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS53b3JraW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIHRoaXMpO1xuXHRcdFx0XHRcdFx0aWYoIWFyZ3MucGFyKSB7XG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLCB0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS53b3JraW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR3LnBvc3RNZXNzYWdlKGFyZ3MpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUucHVzaChbZG9tLCBkYXRhLCBjYiwgdHJ1ZV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaChlKSB7XG5cdFx0XHRcdFx0cnNsdC5jYWxsKHRoaXMsIGZ1bmMoYXJncyksIGZhbHNlKTtcblx0XHRcdFx0XHRpZih0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLCB0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS53b3JraW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cnNsdC5jYWxsKHRoaXMsIGZ1bmMoYXJncyksIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHBhcnNlcyBhIG5vZGUgZnJvbSBhIGpRdWVyeSBvYmplY3QgYW5kIGFwcGVuZHMgdGhlbSB0byB0aGUgaW4gbWVtb3J5IHRyZWUgbW9kZWwuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9wYXJzZV9tb2RlbF9mcm9tX2h0bWwoZCBbLCBwLCBwc10pXG5cdFx0ICogQHBhcmFtICB7alF1ZXJ5fSBkIHRoZSBqUXVlcnkgb2JqZWN0IHRvIHBhcnNlXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBwIHRoZSBwYXJlbnQgSURcblx0XHQgKiBAcGFyYW0gIHtBcnJheX0gcHMgbGlzdCBvZiBhbGwgcGFyZW50c1xuXHRcdCAqIEByZXR1cm4ge1N0cmluZ30gdGhlIElEIG9mIHRoZSBvYmplY3QgYWRkZWQgdG8gdGhlIG1vZGVsXG5cdFx0ICovXG5cdFx0X3BhcnNlX21vZGVsX2Zyb21faHRtbCA6IGZ1bmN0aW9uIChkLCBwLCBwcykge1xuXHRcdFx0aWYoIXBzKSB7IHBzID0gW107IH1cblx0XHRcdGVsc2UgeyBwcyA9IFtdLmNvbmNhdChwcyk7IH1cblx0XHRcdGlmKHApIHsgcHMudW5zaGlmdChwKTsgfVxuXHRcdFx0dmFyIGMsIGUsIG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRkYXRhID0ge1xuXHRcdFx0XHRcdGlkXHRcdFx0OiBmYWxzZSxcblx0XHRcdFx0XHR0ZXh0XHRcdDogZmFsc2UsXG5cdFx0XHRcdFx0aWNvblx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0cGFyZW50XHRcdDogcCxcblx0XHRcdFx0XHRwYXJlbnRzXHRcdDogcHMsXG5cdFx0XHRcdFx0Y2hpbGRyZW5cdDogW10sXG5cdFx0XHRcdFx0Y2hpbGRyZW5fZFx0OiBbXSxcblx0XHRcdFx0XHRkYXRhXHRcdDogbnVsbCxcblx0XHRcdFx0XHRzdGF0ZVx0XHQ6IHsgfSxcblx0XHRcdFx0XHRsaV9hdHRyXHRcdDogeyBpZCA6IGZhbHNlIH0sXG5cdFx0XHRcdFx0YV9hdHRyXHRcdDogeyBocmVmIDogJyMnIH0sXG5cdFx0XHRcdFx0b3JpZ2luYWxcdDogZmFsc2Vcblx0XHRcdFx0fSwgaSwgdG1wLCB0aWQ7XG5cdFx0XHRmb3IoaSBpbiB0aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlKSB7XG5cdFx0XHRcdGlmKHRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRkYXRhLnN0YXRlW2ldID0gdGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZVtpXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dG1wID0gJC52YWthdGEuYXR0cmlidXRlcyhkLCB0cnVlKTtcblx0XHRcdCQuZWFjaCh0bXAsIGZ1bmN0aW9uIChpLCB2KSB7XG5cdFx0XHRcdHYgPSAkLnRyaW0odik7XG5cdFx0XHRcdGlmKCF2Lmxlbmd0aCkgeyByZXR1cm4gdHJ1ZTsgfVxuXHRcdFx0XHRkYXRhLmxpX2F0dHJbaV0gPSB2O1xuXHRcdFx0XHRpZihpID09PSAnaWQnKSB7XG5cdFx0XHRcdFx0ZGF0YS5pZCA9IHYudG9TdHJpbmcoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHR0bXAgPSBkLmNoaWxkcmVuKCdhJykuZmlyc3QoKTtcblx0XHRcdGlmKHRtcC5sZW5ndGgpIHtcblx0XHRcdFx0dG1wID0gJC52YWthdGEuYXR0cmlidXRlcyh0bXAsIHRydWUpO1xuXHRcdFx0XHQkLmVhY2godG1wLCBmdW5jdGlvbiAoaSwgdikge1xuXHRcdFx0XHRcdHYgPSAkLnRyaW0odik7XG5cdFx0XHRcdFx0aWYodi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGRhdGEuYV9hdHRyW2ldID0gdjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0dG1wID0gZC5jaGlsZHJlbihcImFcIikuZmlyc3QoKS5sZW5ndGggPyBkLmNoaWxkcmVuKFwiYVwiKS5maXJzdCgpLmNsb25lKCkgOiBkLmNsb25lKCk7XG5cdFx0XHR0bXAuY2hpbGRyZW4oXCJpbnMsIGksIHVsXCIpLnJlbW92ZSgpO1xuXHRcdFx0dG1wID0gdG1wLmh0bWwoKTtcblx0XHRcdHRtcCA9ICQoJzxkaXYgLz4nKS5odG1sKHRtcCk7XG5cdFx0XHRkYXRhLnRleHQgPSB0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCA/IHRtcC50ZXh0KCkgOiB0bXAuaHRtbCgpO1xuXHRcdFx0dG1wID0gZC5kYXRhKCk7XG5cdFx0XHRkYXRhLmRhdGEgPSB0bXAgPyAkLmV4dGVuZCh0cnVlLCB7fSwgdG1wKSA6IG51bGw7XG5cdFx0XHRkYXRhLnN0YXRlLm9wZW5lZCA9IGQuaGFzQ2xhc3MoJ2pzdHJlZS1vcGVuJyk7XG5cdFx0XHRkYXRhLnN0YXRlLnNlbGVjdGVkID0gZC5jaGlsZHJlbignYScpLmhhc0NsYXNzKCdqc3RyZWUtY2xpY2tlZCcpO1xuXHRcdFx0ZGF0YS5zdGF0ZS5kaXNhYmxlZCA9IGQuY2hpbGRyZW4oJ2EnKS5oYXNDbGFzcygnanN0cmVlLWRpc2FibGVkJyk7XG5cdFx0XHRpZihkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmpzdHJlZSkge1xuXHRcdFx0XHRmb3IoaSBpbiBkYXRhLmRhdGEuanN0cmVlKSB7XG5cdFx0XHRcdFx0aWYoZGF0YS5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0ZGF0YS5zdGF0ZVtpXSA9IGRhdGEuZGF0YS5qc3RyZWVbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0bXAgPSBkLmNoaWxkcmVuKFwiYVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpO1xuXHRcdFx0aWYodG1wLmxlbmd0aCkge1xuXHRcdFx0XHRkYXRhLmljb24gPSB0bXAuaGFzQ2xhc3MoJ2pzdHJlZS10aGVtZWljb24taGlkZGVuJykgPyBmYWxzZSA6IHRtcC5hdHRyKCdyZWwnKTtcblx0XHRcdH1cblx0XHRcdGlmKGRhdGEuc3RhdGUuaWNvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGRhdGEuaWNvbiA9IGRhdGEuc3RhdGUuaWNvbjtcblx0XHRcdH1cblx0XHRcdGlmKGRhdGEuaWNvbiA9PT0gdW5kZWZpbmVkIHx8IGRhdGEuaWNvbiA9PT0gbnVsbCB8fCBkYXRhLmljb24gPT09IFwiXCIpIHtcblx0XHRcdFx0ZGF0YS5pY29uID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHRtcCA9IGQuY2hpbGRyZW4oXCJ1bFwiKS5jaGlsZHJlbihcImxpXCIpO1xuXHRcdFx0ZG8ge1xuXHRcdFx0XHR0aWQgPSAnaicgKyB0aGlzLl9pZCArICdfJyArICgrK3RoaXMuX2NudCk7XG5cdFx0XHR9IHdoaWxlKG1bdGlkXSk7XG5cdFx0XHRkYXRhLmlkID0gZGF0YS5saV9hdHRyLmlkID8gZGF0YS5saV9hdHRyLmlkLnRvU3RyaW5nKCkgOiB0aWQ7XG5cdFx0XHRpZih0bXAubGVuZ3RoKSB7XG5cdFx0XHRcdHRtcC5lYWNoKCQucHJveHkoZnVuY3Rpb24gKGksIHYpIHtcblx0XHRcdFx0XHRjID0gdGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKCQodiksIGRhdGEuaWQsIHBzKTtcblx0XHRcdFx0XHRlID0gdGhpcy5fbW9kZWwuZGF0YVtjXTtcblx0XHRcdFx0XHRkYXRhLmNoaWxkcmVuLnB1c2goYyk7XG5cdFx0XHRcdFx0aWYoZS5jaGlsZHJlbl9kLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0ZGF0YS5jaGlsZHJlbl9kID0gZGF0YS5jaGlsZHJlbl9kLmNvbmNhdChlLmNoaWxkcmVuX2QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0XHRkYXRhLmNoaWxkcmVuX2QgPSBkYXRhLmNoaWxkcmVuX2QuY29uY2F0KGRhdGEuY2hpbGRyZW4pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmKGQuaGFzQ2xhc3MoJ2pzdHJlZS1jbG9zZWQnKSkge1xuXHRcdFx0XHRcdGRhdGEuc3RhdGUubG9hZGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGRhdGEubGlfYXR0clsnY2xhc3MnXSkge1xuXHRcdFx0XHRkYXRhLmxpX2F0dHJbJ2NsYXNzJ10gPSBkYXRhLmxpX2F0dHJbJ2NsYXNzJ10ucmVwbGFjZSgnanN0cmVlLWNsb3NlZCcsJycpLnJlcGxhY2UoJ2pzdHJlZS1vcGVuJywnJyk7XG5cdFx0XHR9XG5cdFx0XHRpZihkYXRhLmFfYXR0clsnY2xhc3MnXSkge1xuXHRcdFx0XHRkYXRhLmFfYXR0clsnY2xhc3MnXSA9IGRhdGEuYV9hdHRyWydjbGFzcyddLnJlcGxhY2UoJ2pzdHJlZS1jbGlja2VkJywnJykucmVwbGFjZSgnanN0cmVlLWRpc2FibGVkJywnJyk7XG5cdFx0XHR9XG5cdFx0XHRtW2RhdGEuaWRdID0gZGF0YTtcblx0XHRcdGlmKGRhdGEuc3RhdGUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2goZGF0YS5pZCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGF0YS5pZDtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHBhcnNlcyBhIG5vZGUgZnJvbSBhIEpTT04gb2JqZWN0ICh1c2VkIHdoZW4gZGVhbGluZyB3aXRoIGZsYXQgZGF0YSwgd2hpY2ggaGFzIG5vIG5lc3Rpbmcgb2YgY2hpbGRyZW4sIGJ1dCBoYXMgaWQgYW5kIHBhcmVudCBwcm9wZXJ0aWVzKSBhbmQgYXBwZW5kcyBpdCB0byB0aGUgaW4gbWVtb3J5IHRyZWUgbW9kZWwuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbihkIFssIHAsIHBzXSlcblx0XHQgKiBAcGFyYW0gIHtPYmplY3R9IGQgdGhlIEpTT04gb2JqZWN0IHRvIHBhcnNlXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBwIHRoZSBwYXJlbnQgSURcblx0XHQgKiBAcGFyYW0gIHtBcnJheX0gcHMgbGlzdCBvZiBhbGwgcGFyZW50c1xuXHRcdCAqIEByZXR1cm4ge1N0cmluZ30gdGhlIElEIG9mIHRoZSBvYmplY3QgYWRkZWQgdG8gdGhlIG1vZGVsXG5cdFx0ICovXG5cdFx0X3BhcnNlX21vZGVsX2Zyb21fZmxhdF9qc29uIDogZnVuY3Rpb24gKGQsIHAsIHBzKSB7XG5cdFx0XHRpZighcHMpIHsgcHMgPSBbXTsgfVxuXHRcdFx0ZWxzZSB7IHBzID0gcHMuY29uY2F0KCk7IH1cblx0XHRcdGlmKHApIHsgcHMudW5zaGlmdChwKTsgfVxuXHRcdFx0dmFyIHRpZCA9IGQuaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0bSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdGRmID0gdGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxcblx0XHRcdFx0aSwgaiwgYywgZSxcblx0XHRcdFx0dG1wID0ge1xuXHRcdFx0XHRcdGlkXHRcdFx0OiB0aWQsXG5cdFx0XHRcdFx0dGV4dFx0XHQ6IGQudGV4dCB8fCAnJyxcblx0XHRcdFx0XHRpY29uXHRcdDogZC5pY29uICE9PSB1bmRlZmluZWQgPyBkLmljb24gOiB0cnVlLFxuXHRcdFx0XHRcdHBhcmVudFx0XHQ6IHAsXG5cdFx0XHRcdFx0cGFyZW50c1x0XHQ6IHBzLFxuXHRcdFx0XHRcdGNoaWxkcmVuXHQ6IGQuY2hpbGRyZW4gfHwgW10sXG5cdFx0XHRcdFx0Y2hpbGRyZW5fZFx0OiBkLmNoaWxkcmVuX2QgfHwgW10sXG5cdFx0XHRcdFx0ZGF0YVx0XHQ6IGQuZGF0YSxcblx0XHRcdFx0XHRzdGF0ZVx0XHQ6IHsgfSxcblx0XHRcdFx0XHRsaV9hdHRyXHRcdDogeyBpZCA6IGZhbHNlIH0sXG5cdFx0XHRcdFx0YV9hdHRyXHRcdDogeyBocmVmIDogJyMnIH0sXG5cdFx0XHRcdFx0b3JpZ2luYWxcdDogZmFsc2Vcblx0XHRcdFx0fTtcblx0XHRcdGZvcihpIGluIGRmKSB7XG5cdFx0XHRcdGlmKGRmLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZGZbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGQgJiYgZC5kYXRhICYmIGQuZGF0YS5qc3RyZWUgJiYgZC5kYXRhLmpzdHJlZS5pY29uKSB7XG5cdFx0XHRcdHRtcC5pY29uID0gZC5kYXRhLmpzdHJlZS5pY29uO1xuXHRcdFx0fVxuXHRcdFx0aWYodG1wLmljb24gPT09IHVuZGVmaW5lZCB8fCB0bXAuaWNvbiA9PT0gbnVsbCB8fCB0bXAuaWNvbiA9PT0gXCJcIikge1xuXHRcdFx0XHR0bXAuaWNvbiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZihkICYmIGQuZGF0YSkge1xuXHRcdFx0XHR0bXAuZGF0YSA9IGQuZGF0YTtcblx0XHRcdFx0aWYoZC5kYXRhLmpzdHJlZSkge1xuXHRcdFx0XHRcdGZvcihpIGluIGQuZGF0YS5qc3RyZWUpIHtcblx0XHRcdFx0XHRcdGlmKGQuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZC5kYXRhLmpzdHJlZVtpXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGQgJiYgdHlwZW9mIGQuc3RhdGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAoaSBpbiBkLnN0YXRlKSB7XG5cdFx0XHRcdFx0aWYoZC5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0dG1wLnN0YXRlW2ldID0gZC5zdGF0ZVtpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGQgJiYgdHlwZW9mIGQubGlfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yIChpIGluIGQubGlfYXR0cikge1xuXHRcdFx0XHRcdGlmKGQubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0dG1wLmxpX2F0dHJbaV0gPSBkLmxpX2F0dHJbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZighdG1wLmxpX2F0dHIuaWQpIHtcblx0XHRcdFx0dG1wLmxpX2F0dHIuaWQgPSB0aWQ7XG5cdFx0XHR9XG5cdFx0XHRpZihkICYmIHR5cGVvZiBkLmFfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yIChpIGluIGQuYV9hdHRyKSB7XG5cdFx0XHRcdFx0aWYoZC5hX2F0dHIuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdHRtcC5hX2F0dHJbaV0gPSBkLmFfYXR0cltpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGQgJiYgZC5jaGlsZHJlbiAmJiBkLmNoaWxkcmVuID09PSB0cnVlKSB7XG5cdFx0XHRcdHRtcC5zdGF0ZS5sb2FkZWQgPSBmYWxzZTtcblx0XHRcdFx0dG1wLmNoaWxkcmVuID0gW107XG5cdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gW107XG5cdFx0XHR9XG5cdFx0XHRtW3RtcC5pZF0gPSB0bXA7XG5cdFx0XHRmb3IoaSA9IDAsIGogPSB0bXAuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGMgPSB0aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbihtW3RtcC5jaGlsZHJlbltpXV0sIHRtcC5pZCwgcHMpO1xuXHRcdFx0XHRlID0gbVtjXTtcblx0XHRcdFx0dG1wLmNoaWxkcmVuX2QucHVzaChjKTtcblx0XHRcdFx0aWYoZS5jaGlsZHJlbl9kLmxlbmd0aCkge1xuXHRcdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gdG1wLmNoaWxkcmVuX2QuY29uY2F0KGUuY2hpbGRyZW5fZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGRlbGV0ZSBkLmRhdGE7XG5cdFx0XHRkZWxldGUgZC5jaGlsZHJlbjtcblx0XHRcdG1bdG1wLmlkXS5vcmlnaW5hbCA9IGQ7XG5cdFx0XHRpZih0bXAuc3RhdGUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2godG1wLmlkKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0bXAuaWQ7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBwYXJzZXMgYSBub2RlIGZyb20gYSBKU09OIG9iamVjdCBhbmQgYXBwZW5kcyBpdCB0byB0aGUgaW4gbWVtb3J5IHRyZWUgbW9kZWwuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIF9wYXJzZV9tb2RlbF9mcm9tX2pzb24oZCBbLCBwLCBwc10pXG5cdFx0ICogQHBhcmFtICB7T2JqZWN0fSBkIHRoZSBKU09OIG9iamVjdCB0byBwYXJzZVxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gcCB0aGUgcGFyZW50IElEXG5cdFx0ICogQHBhcmFtICB7QXJyYXl9IHBzIGxpc3Qgb2YgYWxsIHBhcmVudHNcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBJRCBvZiB0aGUgb2JqZWN0IGFkZGVkIHRvIHRoZSBtb2RlbFxuXHRcdCAqL1xuXHRcdF9wYXJzZV9tb2RlbF9mcm9tX2pzb24gOiBmdW5jdGlvbiAoZCwgcCwgcHMpIHtcblx0XHRcdGlmKCFwcykgeyBwcyA9IFtdOyB9XG5cdFx0XHRlbHNlIHsgcHMgPSBwcy5jb25jYXQoKTsgfVxuXHRcdFx0aWYocCkgeyBwcy51bnNoaWZ0KHApOyB9XG5cdFx0XHR2YXIgdGlkID0gZmFsc2UsIGksIGosIGMsIGUsIG0gPSB0aGlzLl9tb2RlbC5kYXRhLCBkZiA9IHRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUsIHRtcDtcblx0XHRcdGRvIHtcblx0XHRcdFx0dGlkID0gJ2onICsgdGhpcy5faWQgKyAnXycgKyAoKyt0aGlzLl9jbnQpO1xuXHRcdFx0fSB3aGlsZShtW3RpZF0pO1xuXG5cdFx0XHR0bXAgPSB7XG5cdFx0XHRcdGlkXHRcdFx0OiBmYWxzZSxcblx0XHRcdFx0dGV4dFx0XHQ6IHR5cGVvZiBkID09PSAnc3RyaW5nJyA/IGQgOiAnJyxcblx0XHRcdFx0aWNvblx0XHQ6IHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBkLmljb24gIT09IHVuZGVmaW5lZCA/IGQuaWNvbiA6IHRydWUsXG5cdFx0XHRcdHBhcmVudFx0XHQ6IHAsXG5cdFx0XHRcdHBhcmVudHNcdFx0OiBwcyxcblx0XHRcdFx0Y2hpbGRyZW5cdDogW10sXG5cdFx0XHRcdGNoaWxkcmVuX2RcdDogW10sXG5cdFx0XHRcdGRhdGFcdFx0OiBudWxsLFxuXHRcdFx0XHRzdGF0ZVx0XHQ6IHsgfSxcblx0XHRcdFx0bGlfYXR0clx0XHQ6IHsgaWQgOiBmYWxzZSB9LFxuXHRcdFx0XHRhX2F0dHJcdFx0OiB7IGhyZWYgOiAnIycgfSxcblx0XHRcdFx0b3JpZ2luYWxcdDogZmFsc2Vcblx0XHRcdH07XG5cdFx0XHRmb3IoaSBpbiBkZikge1xuXHRcdFx0XHRpZihkZi5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdHRtcC5zdGF0ZVtpXSA9IGRmW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihkICYmIGQuaWQpIHsgdG1wLmlkID0gZC5pZC50b1N0cmluZygpOyB9XG5cdFx0XHRpZihkICYmIGQudGV4dCkgeyB0bXAudGV4dCA9IGQudGV4dDsgfVxuXHRcdFx0aWYoZCAmJiBkLmRhdGEgJiYgZC5kYXRhLmpzdHJlZSAmJiBkLmRhdGEuanN0cmVlLmljb24pIHtcblx0XHRcdFx0dG1wLmljb24gPSBkLmRhdGEuanN0cmVlLmljb247XG5cdFx0XHR9XG5cdFx0XHRpZih0bXAuaWNvbiA9PT0gdW5kZWZpbmVkIHx8IHRtcC5pY29uID09PSBudWxsIHx8IHRtcC5pY29uID09PSBcIlwiKSB7XG5cdFx0XHRcdHRtcC5pY29uID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmKGQgJiYgZC5kYXRhKSB7XG5cdFx0XHRcdHRtcC5kYXRhID0gZC5kYXRhO1xuXHRcdFx0XHRpZihkLmRhdGEuanN0cmVlKSB7XG5cdFx0XHRcdFx0Zm9yKGkgaW4gZC5kYXRhLmpzdHJlZSkge1xuXHRcdFx0XHRcdFx0aWYoZC5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHR0bXAuc3RhdGVbaV0gPSBkLmRhdGEuanN0cmVlW2ldO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoZCAmJiB0eXBlb2YgZC5zdGF0ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yIChpIGluIGQuc3RhdGUpIHtcblx0XHRcdFx0XHRpZihkLnN0YXRlLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHR0bXAuc3RhdGVbaV0gPSBkLnN0YXRlW2ldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoZCAmJiB0eXBlb2YgZC5saV9hdHRyID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKGkgaW4gZC5saV9hdHRyKSB7XG5cdFx0XHRcdFx0aWYoZC5saV9hdHRyLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHR0bXAubGlfYXR0cltpXSA9IGQubGlfYXR0cltpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKHRtcC5saV9hdHRyLmlkICYmICF0bXAuaWQpIHtcblx0XHRcdFx0dG1wLmlkID0gdG1wLmxpX2F0dHIuaWQudG9TdHJpbmcoKTtcblx0XHRcdH1cblx0XHRcdGlmKCF0bXAuaWQpIHtcblx0XHRcdFx0dG1wLmlkID0gdGlkO1xuXHRcdFx0fVxuXHRcdFx0aWYoIXRtcC5saV9hdHRyLmlkKSB7XG5cdFx0XHRcdHRtcC5saV9hdHRyLmlkID0gdG1wLmlkO1xuXHRcdFx0fVxuXHRcdFx0aWYoZCAmJiB0eXBlb2YgZC5hX2F0dHIgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAoaSBpbiBkLmFfYXR0cikge1xuXHRcdFx0XHRcdGlmKGQuYV9hdHRyLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHR0bXAuYV9hdHRyW2ldID0gZC5hX2F0dHJbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihkICYmIGQuY2hpbGRyZW4gJiYgZC5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRjID0gdGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9qc29uKGQuY2hpbGRyZW5baV0sIHRtcC5pZCwgcHMpO1xuXHRcdFx0XHRcdGUgPSBtW2NdO1xuXHRcdFx0XHRcdHRtcC5jaGlsZHJlbi5wdXNoKGMpO1xuXHRcdFx0XHRcdGlmKGUuY2hpbGRyZW5fZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gdG1wLmNoaWxkcmVuX2QuY29uY2F0KGUuY2hpbGRyZW5fZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRtcC5jaGlsZHJlbl9kID0gdG1wLmNoaWxkcmVuX2QuY29uY2F0KHRtcC5jaGlsZHJlbik7XG5cdFx0XHR9XG5cdFx0XHRpZihkICYmIGQuY2hpbGRyZW4gJiYgZC5jaGlsZHJlbiA9PT0gdHJ1ZSkge1xuXHRcdFx0XHR0bXAuc3RhdGUubG9hZGVkID0gZmFsc2U7XG5cdFx0XHRcdHRtcC5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHR0bXAuY2hpbGRyZW5fZCA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0ZGVsZXRlIGQuZGF0YTtcblx0XHRcdGRlbGV0ZSBkLmNoaWxkcmVuO1xuXHRcdFx0dG1wLm9yaWdpbmFsID0gZDtcblx0XHRcdG1bdG1wLmlkXSA9IHRtcDtcblx0XHRcdGlmKHRtcC5zdGF0ZS5zZWxlY3RlZCkge1xuXHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaCh0bXAuaWQpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRtcC5pZDtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHJlZHJhd3MgYWxsIG5vZGVzIHRoYXQgbmVlZCB0byBiZSByZWRyYXduLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBfcmVkcmF3KClcblx0XHQgKiBAdHJpZ2dlciByZWRyYXcuanN0cmVlXG5cdFx0ICovXG5cdFx0X3JlZHJhdyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBub2RlcyA9IHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3ID8gdGhpcy5fbW9kZWwuZGF0YVskLmpzdHJlZS5yb290XS5jaGlsZHJlbi5jb25jYXQoW10pIDogdGhpcy5fbW9kZWwuY2hhbmdlZC5jb25jYXQoW10pLFxuXHRcdFx0XHRmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnVUwnKSwgdG1wLCBpLCBqLCBmZSA9IHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gbm9kZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdHRtcCA9IHRoaXMucmVkcmF3X25vZGUobm9kZXNbaV0sIHRydWUsIHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3KTtcblx0XHRcdFx0aWYodG1wICYmIHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3KSB7XG5cdFx0XHRcdFx0Zi5hcHBlbmRDaGlsZCh0bXApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdykge1xuXHRcdFx0XHRmLmNsYXNzTmFtZSA9IHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZTtcblx0XHRcdFx0Zi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCdncm91cCcpO1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZW1wdHkoKS5hcHBlbmQoZik7XG5cdFx0XHRcdC8vdGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uYXBwZW5kQ2hpbGQoZik7XG5cdFx0XHR9XG5cdFx0XHRpZihmZSAhPT0gbnVsbCkge1xuXHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKGZlLCB0cnVlKTtcblx0XHRcdFx0aWYodG1wICYmIHRtcC5sZW5ndGggJiYgdG1wLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpWzBdICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG5cdFx0XHRcdFx0dG1wLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmZvY3VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyA9IGZhbHNlO1xuXHRcdFx0dGhpcy5fbW9kZWwuY2hhbmdlZCA9IFtdO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgYWZ0ZXIgbm9kZXMgYXJlIHJlZHJhd25cblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgcmVkcmF3LmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHthcnJheX0gbm9kZXMgdGhlIHJlZHJhd24gbm9kZXNcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdyZWRyYXcnLCB7IFwibm9kZXNcIiA6IG5vZGVzIH0pO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogcmVkcmF3cyBhbGwgbm9kZXMgdGhhdCBuZWVkIHRvIGJlIHJlZHJhd24gb3Igb3B0aW9uYWxseSAtIHRoZSB3aG9sZSB0cmVlXG5cdFx0ICogQG5hbWUgcmVkcmF3KFtmdWxsXSlcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgaWYgc2V0IHRvIGB0cnVlYCBhbGwgbm9kZXMgYXJlIHJlZHJhd24uXG5cdFx0ICovXG5cdFx0cmVkcmF3IDogZnVuY3Rpb24gKGZ1bGwpIHtcblx0XHRcdGlmKGZ1bGwpIHtcblx0XHRcdFx0dGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXcgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Ly9pZih0aGlzLl9tb2RlbC5yZWRyYXdfdGltZW91dCkge1xuXHRcdFx0Ly9cdGNsZWFyVGltZW91dCh0aGlzLl9tb2RlbC5yZWRyYXdfdGltZW91dCk7XG5cdFx0XHQvL31cblx0XHRcdC8vdGhpcy5fbW9kZWwucmVkcmF3X3RpbWVvdXQgPSBzZXRUaW1lb3V0KCQucHJveHkodGhpcy5fcmVkcmF3LCB0aGlzKSwwKTtcblx0XHRcdHRoaXMuX3JlZHJhdygpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogcmVkcmF3cyBhIHNpbmdsZSBub2RlJ3MgY2hpbGRyZW4uIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGRyYXdfY2hpbGRyZW4obm9kZSlcblx0XHQgKiBAcGFyYW0ge21peGVkfSBub2RlIHRoZSBub2RlIHdob3NlIGNoaWxkcmVuIHdpbGwgYmUgcmVkcmF3blxuXHRcdCAqL1xuXHRcdGRyYXdfY2hpbGRyZW4gOiBmdW5jdGlvbiAobm9kZSkge1xuXHRcdFx0dmFyIG9iaiA9IHRoaXMuZ2V0X25vZGUobm9kZSksXG5cdFx0XHRcdGkgPSBmYWxzZSxcblx0XHRcdFx0aiA9IGZhbHNlLFxuXHRcdFx0XHRrID0gZmFsc2UsXG5cdFx0XHRcdGQgPSBkb2N1bWVudDtcblx0XHRcdGlmKCFvYmopIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHRpZihvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHsgcmV0dXJuIHRoaXMucmVkcmF3KHRydWUpOyB9XG5cdFx0XHRub2RlID0gdGhpcy5nZXRfbm9kZShub2RlLCB0cnVlKTtcblx0XHRcdGlmKCFub2RlIHx8ICFub2RlLmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gVE9ETzogcXVpY2sgdG9nZ2xlXG5cblx0XHRcdG5vZGUuY2hpbGRyZW4oJy5qc3RyZWUtY2hpbGRyZW4nKS5yZW1vdmUoKTtcblx0XHRcdG5vZGUgPSBub2RlWzBdO1xuXHRcdFx0aWYob2JqLmNoaWxkcmVuLmxlbmd0aCAmJiBvYmouc3RhdGUubG9hZGVkKSB7XG5cdFx0XHRcdGsgPSBkLmNyZWF0ZUVsZW1lbnQoJ1VMJyk7XG5cdFx0XHRcdGsuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2dyb3VwJyk7XG5cdFx0XHRcdGsuY2xhc3NOYW1lID0gJ2pzdHJlZS1jaGlsZHJlbic7XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRrLmFwcGVuZENoaWxkKHRoaXMucmVkcmF3X25vZGUob2JqLmNoaWxkcmVuW2ldLCB0cnVlLCB0cnVlKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bm9kZS5hcHBlbmRDaGlsZChrKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHJlZHJhd3MgYSBzaW5nbGUgbm9kZS4gVXNlZCBpbnRlcm5hbGx5LlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgcmVkcmF3X25vZGUobm9kZSwgZGVlcCwgaXNfY2FsbGJhY2ssIGZvcmNlX3JlbmRlcilcblx0XHQgKiBAcGFyYW0ge21peGVkfSBub2RlIHRoZSBub2RlIHRvIHJlZHJhd1xuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVlcCBzaG91bGQgY2hpbGQgbm9kZXMgYmUgcmVkcmF3biB0b29cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzX2NhbGxiYWNrIGlzIHRoaXMgYSByZWN1cnNpb24gY2FsbFxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2VfcmVuZGVyIHNob3VsZCBjaGlsZHJlbiBvZiBjbG9zZWQgcGFyZW50cyBiZSBkcmF3biBhbnl3YXlcblx0XHQgKi9cblx0XHRyZWRyYXdfbm9kZSA6IGZ1bmN0aW9uIChub2RlLCBkZWVwLCBpc19jYWxsYmFjaywgZm9yY2VfcmVuZGVyKSB7XG5cdFx0XHR2YXIgb2JqID0gdGhpcy5nZXRfbm9kZShub2RlKSxcblx0XHRcdFx0cGFyID0gZmFsc2UsXG5cdFx0XHRcdGluZCA9IGZhbHNlLFxuXHRcdFx0XHRvbGQgPSBmYWxzZSxcblx0XHRcdFx0aSA9IGZhbHNlLFxuXHRcdFx0XHRqID0gZmFsc2UsXG5cdFx0XHRcdGsgPSBmYWxzZSxcblx0XHRcdFx0YyA9ICcnLFxuXHRcdFx0XHRkID0gZG9jdW1lbnQsXG5cdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRmID0gZmFsc2UsXG5cdFx0XHRcdHMgPSBmYWxzZSxcblx0XHRcdFx0dG1wID0gbnVsbCxcblx0XHRcdFx0dCA9IDAsXG5cdFx0XHRcdGwgPSAwLFxuXHRcdFx0XHRoYXNfY2hpbGRyZW4gPSBmYWxzZSxcblx0XHRcdFx0bGFzdF9zaWJsaW5nID0gZmFsc2U7XG5cdFx0XHRpZighb2JqKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0aWYob2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7ICByZXR1cm4gdGhpcy5yZWRyYXcodHJ1ZSk7IH1cblx0XHRcdGRlZXAgPSBkZWVwIHx8IG9iai5jaGlsZHJlbi5sZW5ndGggPT09IDA7XG5cdFx0XHRub2RlID0gIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvYmouaWQpIDogdGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJyMnICsgKFwiMDEyMzQ1Njc4OVwiLmluZGV4T2Yob2JqLmlkWzBdKSAhPT0gLTEgPyAnXFxcXDMnICsgb2JqLmlkWzBdICsgJyAnICsgb2JqLmlkLnN1YnN0cigxKS5yZXBsYWNlKCQuanN0cmVlLmlkcmVnZXgsJ1xcXFwkJicpIDogb2JqLmlkLnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJykpICk7IC8vLCB0aGlzLmVsZW1lbnQpO1xuXHRcdFx0aWYoIW5vZGUpIHtcblx0XHRcdFx0ZGVlcCA9IHRydWU7XG5cdFx0XHRcdC8vbm9kZSA9IGQuY3JlYXRlRWxlbWVudCgnTEknKTtcblx0XHRcdFx0aWYoIWlzX2NhbGxiYWNrKSB7XG5cdFx0XHRcdFx0cGFyID0gb2JqLnBhcmVudCAhPT0gJC5qc3RyZWUucm9vdCA/ICQoJyMnICsgb2JqLnBhcmVudC5yZXBsYWNlKCQuanN0cmVlLmlkcmVnZXgsJ1xcXFwkJicpLCB0aGlzLmVsZW1lbnQpWzBdIDogbnVsbDtcblx0XHRcdFx0XHRpZihwYXIgIT09IG51bGwgJiYgKCFwYXIgfHwgIW1bb2JqLnBhcmVudF0uc3RhdGUub3BlbmVkKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpbmQgPSAkLmluQXJyYXkob2JqLmlkLCBwYXIgPT09IG51bGwgPyBtWyQuanN0cmVlLnJvb3RdLmNoaWxkcmVuIDogbVtvYmoucGFyZW50XS5jaGlsZHJlbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRub2RlID0gJChub2RlKTtcblx0XHRcdFx0aWYoIWlzX2NhbGxiYWNrKSB7XG5cdFx0XHRcdFx0cGFyID0gbm9kZS5wYXJlbnQoKS5wYXJlbnQoKVswXTtcblx0XHRcdFx0XHRpZihwYXIgPT09IHRoaXMuZWxlbWVudFswXSkge1xuXHRcdFx0XHRcdFx0cGFyID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aW5kID0gbm9kZS5pbmRleCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG1bb2JqLmlkXS5kYXRhID0gbm9kZS5kYXRhKCk7IC8vIHVzZSBvbmx5IG5vZGUncyBkYXRhLCBubyBuZWVkIHRvIHRvdWNoIGpxdWVyeSBzdG9yYWdlXG5cdFx0XHRcdGlmKCFkZWVwICYmIG9iai5jaGlsZHJlbi5sZW5ndGggJiYgIW5vZGUuY2hpbGRyZW4oJy5qc3RyZWUtY2hpbGRyZW4nKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRkZWVwID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighZGVlcCkge1xuXHRcdFx0XHRcdG9sZCA9IG5vZGUuY2hpbGRyZW4oJy5qc3RyZWUtY2hpbGRyZW4nKVswXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmID0gbm9kZS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKVswXSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHRcdFx0bm9kZS5yZW1vdmUoKTtcblx0XHRcdFx0Ly9ub2RlID0gZC5jcmVhdGVFbGVtZW50KCdMSScpO1xuXHRcdFx0XHQvL25vZGUgPSBub2RlWzBdO1xuXHRcdFx0fVxuXHRcdFx0bm9kZSA9IHRoaXMuX2RhdGEuY29yZS5ub2RlLmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdC8vIG5vZGUgaXMgRE9NLCBkZWVwIGlzIGJvb2xlYW5cblxuXHRcdFx0YyA9ICdqc3RyZWUtbm9kZSAnO1xuXHRcdFx0Zm9yKGkgaW4gb2JqLmxpX2F0dHIpIHtcblx0XHRcdFx0aWYob2JqLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRpZihpID09PSAnaWQnKSB7IGNvbnRpbnVlOyB9XG5cdFx0XHRcdFx0aWYoaSAhPT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUoaSwgb2JqLmxpX2F0dHJbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGMgKz0gb2JqLmxpX2F0dHJbaV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZighb2JqLmFfYXR0ci5pZCkge1xuXHRcdFx0XHRvYmouYV9hdHRyLmlkID0gb2JqLmlkICsgJ19hbmNob3InO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAhIW9iai5zdGF0ZS5zZWxlY3RlZCk7XG5cdFx0XHRub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcsIG9iai5wYXJlbnRzLmxlbmd0aCk7XG5cdFx0XHRub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5Jywgb2JqLmFfYXR0ci5pZCk7XG5cdFx0XHRpZihvYmouc3RhdGUuZGlzYWJsZWQpIHtcblx0XHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRpZighbVtvYmouY2hpbGRyZW5baV1dLnN0YXRlLmhpZGRlbikge1xuXHRcdFx0XHRcdGhhc19jaGlsZHJlbiA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKG9iai5wYXJlbnQgIT09IG51bGwgJiYgbVtvYmoucGFyZW50XSAmJiAhb2JqLnN0YXRlLmhpZGRlbikge1xuXHRcdFx0XHRpID0gJC5pbkFycmF5KG9iai5pZCwgbVtvYmoucGFyZW50XS5jaGlsZHJlbik7XG5cdFx0XHRcdGxhc3Rfc2libGluZyA9IG9iai5pZDtcblx0XHRcdFx0aWYoaSAhPT0gLTEpIHtcblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdFx0Zm9yKGogPSBtW29iai5wYXJlbnRdLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYoIW1bbVtvYmoucGFyZW50XS5jaGlsZHJlbltpXV0uc3RhdGUuaGlkZGVuKSB7XG5cdFx0XHRcdFx0XHRcdGxhc3Rfc2libGluZyA9IG1bb2JqLnBhcmVudF0uY2hpbGRyZW5baV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihsYXN0X3NpYmxpbmcgIT09IG9iai5pZCkge1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYob2JqLnN0YXRlLmhpZGRlbikge1xuXHRcdFx0XHRjICs9ICcganN0cmVlLWhpZGRlbic7XG5cdFx0XHR9XG5cdFx0XHRpZihvYmouc3RhdGUubG9hZGVkICYmICFoYXNfY2hpbGRyZW4pIHtcblx0XHRcdFx0YyArPSAnIGpzdHJlZS1sZWFmJztcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjICs9IG9iai5zdGF0ZS5vcGVuZWQgJiYgb2JqLnN0YXRlLmxvYWRlZCA/ICcganN0cmVlLW9wZW4nIDogJyBqc3RyZWUtY2xvc2VkJztcblx0XHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAob2JqLnN0YXRlLm9wZW5lZCAmJiBvYmouc3RhdGUubG9hZGVkKSApO1xuXHRcdFx0fVxuXHRcdFx0aWYobGFzdF9zaWJsaW5nID09PSBvYmouaWQpIHtcblx0XHRcdFx0YyArPSAnIGpzdHJlZS1sYXN0Jztcblx0XHRcdH1cblx0XHRcdG5vZGUuaWQgPSBvYmouaWQ7XG5cdFx0XHRub2RlLmNsYXNzTmFtZSA9IGM7XG5cdFx0XHRjID0gKCBvYmouc3RhdGUuc2VsZWN0ZWQgPyAnIGpzdHJlZS1jbGlja2VkJyA6ICcnKSArICggb2JqLnN0YXRlLmRpc2FibGVkID8gJyBqc3RyZWUtZGlzYWJsZWQnIDogJycpO1xuXHRcdFx0Zm9yKGogaW4gb2JqLmFfYXR0cikge1xuXHRcdFx0XHRpZihvYmouYV9hdHRyLmhhc093blByb3BlcnR5KGopKSB7XG5cdFx0XHRcdFx0aWYoaiA9PT0gJ2hyZWYnICYmIG9iai5hX2F0dHJbal0gPT09ICcjJykgeyBjb250aW51ZTsgfVxuXHRcdFx0XHRcdGlmKGogIT09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRcdG5vZGUuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoaiwgb2JqLmFfYXR0cltqXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0YyArPSAnICcgKyBvYmouYV9hdHRyW2pdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoYy5sZW5ndGgpIHtcblx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmNsYXNzTmFtZSA9ICdqc3RyZWUtYW5jaG9yICcgKyBjO1xuXHRcdFx0fVxuXHRcdFx0aWYoKG9iai5pY29uICYmIG9iai5pY29uICE9PSB0cnVlKSB8fCBvYmouaWNvbiA9PT0gZmFsc2UpIHtcblx0XHRcdFx0aWYob2JqLmljb24gPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lICs9ICcganN0cmVlLXRoZW1laWNvbi1oaWRkZW4nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYob2JqLmljb24uaW5kZXhPZignLycpID09PSAtMSAmJiBvYmouaWNvbi5pbmRleE9mKCcuJykgPT09IC0xKSB7XG5cdFx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lICs9ICcgJyArIG9iai5pY29uICsgJyBqc3RyZWUtdGhlbWVpY29uLWN1c3RvbSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybChcIicrb2JqLmljb24rJ1wiKSc7XG5cdFx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJ2NlbnRlciBjZW50ZXInO1xuXHRcdFx0XHRcdG5vZGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2F1dG8nO1xuXHRcdFx0XHRcdG5vZGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSArPSAnIGpzdHJlZS10aGVtZWljb24tY3VzdG9tJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCkge1xuXHRcdFx0XHRub2RlLmNoaWxkTm9kZXNbMV0uYXBwZW5kQ2hpbGQoZC5jcmVhdGVUZXh0Tm9kZShvYmoudGV4dCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdG5vZGUuY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwgKz0gb2JqLnRleHQ7XG5cdFx0XHR9XG5cblxuXHRcdFx0aWYoZGVlcCAmJiBvYmouY2hpbGRyZW4ubGVuZ3RoICYmIChvYmouc3RhdGUub3BlbmVkIHx8IGZvcmNlX3JlbmRlcikgJiYgb2JqLnN0YXRlLmxvYWRlZCkge1xuXHRcdFx0XHRrID0gZC5jcmVhdGVFbGVtZW50KCdVTCcpO1xuXHRcdFx0XHRrLnNldEF0dHJpYnV0ZSgncm9sZScsICdncm91cCcpO1xuXHRcdFx0XHRrLmNsYXNzTmFtZSA9ICdqc3RyZWUtY2hpbGRyZW4nO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0ay5hcHBlbmRDaGlsZCh0aGlzLnJlZHJhd19ub2RlKG9iai5jaGlsZHJlbltpXSwgZGVlcCwgdHJ1ZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5vZGUuYXBwZW5kQ2hpbGQoayk7XG5cdFx0XHR9XG5cdFx0XHRpZihvbGQpIHtcblx0XHRcdFx0bm9kZS5hcHBlbmRDaGlsZChvbGQpO1xuXHRcdFx0fVxuXHRcdFx0aWYoIWlzX2NhbGxiYWNrKSB7XG5cdFx0XHRcdC8vIGFwcGVuZCBiYWNrIHVzaW5nIHBhciAvIGluZFxuXHRcdFx0XHRpZighcGFyKSB7XG5cdFx0XHRcdFx0cGFyID0gdGhpcy5lbGVtZW50WzBdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IHBhci5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGlmKHBhci5jaGlsZE5vZGVzW2ldICYmIHBhci5jaGlsZE5vZGVzW2ldLmNsYXNzTmFtZSAmJiBwYXIuY2hpbGROb2Rlc1tpXS5jbGFzc05hbWUuaW5kZXhPZignanN0cmVlLWNoaWxkcmVuJykgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHR0bXAgPSBwYXIuY2hpbGROb2Rlc1tpXTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZighdG1wKSB7XG5cdFx0XHRcdFx0dG1wID0gZC5jcmVhdGVFbGVtZW50KCdVTCcpO1xuXHRcdFx0XHRcdHRtcC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZ3JvdXAnKTtcblx0XHRcdFx0XHR0bXAuY2xhc3NOYW1lID0gJ2pzdHJlZS1jaGlsZHJlbic7XG5cdFx0XHRcdFx0cGFyLmFwcGVuZENoaWxkKHRtcCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFyID0gdG1wO1xuXG5cdFx0XHRcdGlmKGluZCA8IHBhci5jaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHBhci5pbnNlcnRCZWZvcmUobm9kZSwgcGFyLmNoaWxkTm9kZXNbaW5kXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0cGFyLmFwcGVuZENoaWxkKG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGYpIHtcblx0XHRcdFx0XHR0ID0gdGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcDtcblx0XHRcdFx0XHRsID0gdGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQ7XG5cdFx0XHRcdFx0bm9kZS5jaGlsZE5vZGVzWzFdLmZvY3VzKCk7XG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCA9IHQ7XG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQgPSBsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihvYmouc3RhdGUub3BlbmVkICYmICFvYmouc3RhdGUubG9hZGVkKSB7XG5cdFx0XHRcdG9iai5zdGF0ZS5vcGVuZWQgPSBmYWxzZTtcblx0XHRcdFx0c2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLm9wZW5fbm9kZShvYmouaWQsIGZhbHNlLCAwKTtcblx0XHRcdFx0fSwgdGhpcyksIDApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBvcGVucyBhIG5vZGUsIHJldmFsaW5nIGl0cyBjaGlsZHJlbi4gSWYgdGhlIG5vZGUgaXMgbm90IGxvYWRlZCBpdCB3aWxsIGJlIGxvYWRlZCBhbmQgb3BlbmVkIG9uY2UgcmVhZHkuXG5cdFx0ICogQG5hbWUgb3Blbl9ub2RlKG9iaiBbLCBjYWxsYmFjaywgYW5pbWF0aW9uXSlcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmogdGhlIG5vZGUgdG8gb3BlblxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGEgZnVuY3Rpb24gdG8gZXhlY3V0ZSBvbmNlIHRoZSBub2RlIGlzIG9wZW5lZFxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBhbmltYXRpb24gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgd2hlbiBvcGVuaW5nIHRoZSBub2RlIChvdmVycmlkZXMgdGhlIGBjb3JlLmFuaW1hdGlvbmAgc2V0dGluZykuIFVzZSBgZmFsc2VgIGZvciBubyBhbmltYXRpb24uXG5cdFx0ICogQHRyaWdnZXIgb3Blbl9ub2RlLmpzdHJlZSwgYWZ0ZXJfb3Blbi5qc3RyZWUsIGJlZm9yZV9vcGVuLmpzdHJlZVxuXHRcdCAqL1xuXHRcdG9wZW5fbm9kZSA6IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrLCBhbmltYXRpb24pIHtcblx0XHRcdHZhciB0MSwgdDIsIGQsIHQ7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5vcGVuX25vZGUob2JqW3QxXSwgY2FsbGJhY2ssIGFuaW1hdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRhbmltYXRpb24gPSBhbmltYXRpb24gPT09IHVuZGVmaW5lZCA/IHRoaXMuc2V0dGluZ3MuY29yZS5hbmltYXRpb24gOiBhbmltYXRpb247XG5cdFx0XHRpZighdGhpcy5pc19jbG9zZWQob2JqKSkge1xuXHRcdFx0XHRpZihjYWxsYmFjaykge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgb2JqLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYoIXRoaXMuaXNfbG9hZGVkKG9iaikpIHtcblx0XHRcdFx0aWYodGhpcy5pc19sb2FkaW5nKG9iaikpIHtcblx0XHRcdFx0XHRyZXR1cm4gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHRoaXMub3Blbl9ub2RlKG9iaiwgY2FsbGJhY2ssIGFuaW1hdGlvbik7XG5cdFx0XHRcdFx0fSwgdGhpcyksIDUwMCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5sb2FkX25vZGUob2JqLCBmdW5jdGlvbiAobywgb2spIHtcblx0XHRcdFx0XHRyZXR1cm4gb2sgPyB0aGlzLm9wZW5fbm9kZShvLCBjYWxsYmFjaywgYW5pbWF0aW9uKSA6IChjYWxsYmFjayA/IGNhbGxiYWNrLmNhbGwodGhpcywgbywgZmFsc2UpIDogZmFsc2UpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0XHR0ID0gdGhpcztcblx0XHRcdFx0aWYoZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRpZihhbmltYXRpb24gJiYgZC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRkLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5zdG9wKHRydWUsIHRydWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihvYmouY2hpbGRyZW4ubGVuZ3RoICYmICF0aGlzLl9maXJzdENoaWxkKGQuY2hpbGRyZW4oJy5qc3RyZWUtY2hpbGRyZW4nKVswXSkpIHtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd19jaGlsZHJlbihvYmopO1xuXHRcdFx0XHRcdFx0Ly9kID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZighYW5pbWF0aW9uKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2JlZm9yZV9vcGVuJywgeyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHRcdFx0XHRcdGRbMF0uY2xhc3NOYW1lID0gZFswXS5jbGFzc05hbWUucmVwbGFjZSgnanN0cmVlLWNsb3NlZCcsICdqc3RyZWUtb3BlbicpO1xuXHRcdFx0XHRcdFx0ZFswXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIHRydWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMudHJpZ2dlcignYmVmb3JlX29wZW4nLCB7IFwibm9kZVwiIDogb2JqIH0pO1xuXHRcdFx0XHRcdFx0ZFxuXHRcdFx0XHRcdFx0XHQuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIikuZW5kKClcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKFwianN0cmVlLWNsb3NlZFwiKS5hZGRDbGFzcyhcImpzdHJlZS1vcGVuXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIHRydWUpXG5cdFx0XHRcdFx0XHRcdC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCh0cnVlLCB0cnVlKVxuXHRcdFx0XHRcdFx0XHRcdC5zbGlkZURvd24oYW5pbWF0aW9uLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHQuZWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0LnRyaWdnZXIoXCJhZnRlcl9vcGVuXCIsIHsgXCJub2RlXCIgOiBvYmogfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdG9iai5zdGF0ZS5vcGVuZWQgPSB0cnVlO1xuXHRcdFx0XHRpZihjYWxsYmFjaykge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgb2JqLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighZC5sZW5ndGgpIHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIG5vZGUgaXMgYWJvdXQgdG8gYmUgb3BlbmVkIChpZiB0aGUgbm9kZSBpcyBzdXBwb3NlZCB0byBiZSBpbiB0aGUgRE9NLCBpdCB3aWxsIGJlLCBidXQgaXQgd29uJ3QgYmUgdmlzaWJsZSB5ZXQpXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQG5hbWUgYmVmb3JlX29wZW4uanN0cmVlXG5cdFx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGUgdGhlIG9wZW5lZCBub2RlXG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyKCdiZWZvcmVfb3BlbicsIHsgXCJub2RlXCIgOiBvYmogfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGEgbm9kZSBpcyBvcGVuZWQgKGlmIHRoZXJlIGlzIGFuIGFuaW1hdGlvbiBpdCB3aWxsIG5vdCBiZSBjb21wbGV0ZWQgeWV0KVxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgb3Blbl9ub2RlLmpzdHJlZVxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgb3BlbmVkIG5vZGVcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignb3Blbl9ub2RlJywgeyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHRcdFx0aWYoIWFuaW1hdGlvbiB8fCAhZC5sZW5ndGgpIHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIG5vZGUgaXMgb3BlbmVkIGFuZCB0aGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQG5hbWUgYWZ0ZXJfb3Blbi5qc3RyZWVcblx0XHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgb3BlbmVkIG5vZGVcblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHR0aGlzLnRyaWdnZXIoXCJhZnRlcl9vcGVuXCIsIHsgXCJub2RlXCIgOiBvYmogfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBvcGVucyBldmVyeSBwYXJlbnQgb2YgYSBub2RlIChub2RlIHNob3VsZCBiZSBsb2FkZWQpXG5cdFx0ICogQG5hbWUgX29wZW5fdG8ob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byByZXZlYWxcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqL1xuXHRcdF9vcGVuX3RvIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGksIGosIHAgPSBvYmoucGFyZW50cztcblx0XHRcdGZvcihpID0gMCwgaiA9IHAubGVuZ3RoOyBpIDwgajsgaSs9MSkge1xuXHRcdFx0XHRpZihpICE9PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0dGhpcy5vcGVuX25vZGUocFtpXSwgZmFsc2UsIDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJCgnIycgKyBvYmouaWQucmVwbGFjZSgkLmpzdHJlZS5pZHJlZ2V4LCdcXFxcJCYnKSwgdGhpcy5lbGVtZW50KTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNsb3NlcyBhIG5vZGUsIGhpZGluZyBpdHMgY2hpbGRyZW5cblx0XHQgKiBAbmFtZSBjbG9zZV9ub2RlKG9iaiBbLCBhbmltYXRpb25dKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBjbG9zZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBhbmltYXRpb24gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgd2hlbiBjbG9zaW5nIHRoZSBub2RlIChvdmVycmlkZXMgdGhlIGBjb3JlLmFuaW1hdGlvbmAgc2V0dGluZykuIFVzZSBgZmFsc2VgIGZvciBubyBhbmltYXRpb24uXG5cdFx0ICogQHRyaWdnZXIgY2xvc2Vfbm9kZS5qc3RyZWUsIGFmdGVyX2Nsb3NlLmpzdHJlZVxuXHRcdCAqL1xuXHRcdGNsb3NlX25vZGUgOiBmdW5jdGlvbiAob2JqLCBhbmltYXRpb24pIHtcblx0XHRcdHZhciB0MSwgdDIsIHQsIGQ7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZV9ub2RlKG9ialt0MV0sIGFuaW1hdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLmlzX2Nsb3NlZChvYmopKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGFuaW1hdGlvbiA9IGFuaW1hdGlvbiA9PT0gdW5kZWZpbmVkID8gdGhpcy5zZXR0aW5ncy5jb3JlLmFuaW1hdGlvbiA6IGFuaW1hdGlvbjtcblx0XHRcdHQgPSB0aGlzO1xuXHRcdFx0ZCA9IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKTtcblxuXHRcdFx0b2JqLnN0YXRlLm9wZW5lZCA9IGZhbHNlO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIG5vZGUgaXMgY2xvc2VkIChpZiB0aGVyZSBpcyBhbiBhbmltYXRpb24gaXQgd2lsbCBub3QgYmUgY29tcGxldGUgeWV0KVxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBjbG9zZV9ub2RlLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGUgdGhlIGNsb3NlZCBub2RlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignY2xvc2Vfbm9kZScseyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHRcdGlmKCFkLmxlbmd0aCkge1xuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBub2RlIGlzIGNsb3NlZCBhbmQgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgYWZ0ZXJfY2xvc2UuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBjbG9zZWQgbm9kZVxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dGhpcy50cmlnZ2VyKFwiYWZ0ZXJfY2xvc2VcIiwgeyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZighYW5pbWF0aW9uKSB7XG5cdFx0XHRcdFx0ZFswXS5jbGFzc05hbWUgPSBkWzBdLmNsYXNzTmFtZS5yZXBsYWNlKCdqc3RyZWUtb3BlbicsICdqc3RyZWUtY2xvc2VkJyk7XG5cdFx0XHRcdFx0ZC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSkuY2hpbGRyZW4oJy5qc3RyZWUtY2hpbGRyZW4nKS5yZW1vdmUoKTtcblx0XHRcdFx0XHR0aGlzLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLCB7IFwibm9kZVwiIDogb2JqIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGRcblx0XHRcdFx0XHRcdC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuYXR0cihcInN0eWxlXCIsXCJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnRcIikuZW5kKClcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhcImpzdHJlZS1vcGVuXCIpLmFkZENsYXNzKFwianN0cmVlLWNsb3NlZFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSlcblx0XHRcdFx0XHRcdC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCh0cnVlLCB0cnVlKS5zbGlkZVVwKGFuaW1hdGlvbiwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0XHRcdFx0XHRkLmNoaWxkcmVuKCcuanN0cmVlLWNoaWxkcmVuJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdGlmICh0LmVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHR0LnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLCB7IFwibm9kZVwiIDogb2JqIH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogdG9nZ2xlcyBhIG5vZGUgLSBjbG9zaW5nIGl0IGlmIGl0IGlzIG9wZW4sIG9wZW5pbmcgaXQgaWYgaXQgaXMgY2xvc2VkXG5cdFx0ICogQG5hbWUgdG9nZ2xlX25vZGUob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byB0b2dnbGVcblx0XHQgKi9cblx0XHR0b2dnbGVfbm9kZSA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdHZhciB0MSwgdDI7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy50b2dnbGVfbm9kZShvYmpbdDFdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuaXNfY2xvc2VkKG9iaikpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMub3Blbl9ub2RlKG9iaik7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLmlzX29wZW4ob2JqKSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jbG9zZV9ub2RlKG9iaik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBvcGVucyBhbGwgbm9kZXMgd2l0aGluIGEgbm9kZSAob3IgdGhlIHRyZWUpLCByZXZhbGluZyB0aGVpciBjaGlsZHJlbi4gSWYgdGhlIG5vZGUgaXMgbm90IGxvYWRlZCBpdCB3aWxsIGJlIGxvYWRlZCBhbmQgb3BlbmVkIG9uY2UgcmVhZHkuXG5cdFx0ICogQG5hbWUgb3Blbl9hbGwoW29iaiwgYW5pbWF0aW9uLCBvcmlnaW5hbF9vYmpdKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBvcGVuIHJlY3Vyc2l2ZWx5LCBvbWl0IHRvIG9wZW4gYWxsIG5vZGVzIGluIHRoZSB0cmVlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGFuaW1hdGlvbiB0aGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyB3aGVuIG9wZW5pbmcgdGhlIG5vZGVzLCB0aGUgZGVmYXVsdCBpcyBubyBhbmltYXRpb25cblx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gcmVmZXJlbmNlIHRvIHRoZSBub2RlIHRoYXQgc3RhcnRlZCB0aGUgcHJvY2VzcyAoaW50ZXJuYWwgdXNlKVxuXHRcdCAqIEB0cmlnZ2VyIG9wZW5fYWxsLmpzdHJlZVxuXHRcdCAqL1xuXHRcdG9wZW5fYWxsIDogZnVuY3Rpb24gKG9iaiwgYW5pbWF0aW9uLCBvcmlnaW5hbF9vYmopIHtcblx0XHRcdGlmKCFvYmopIHsgb2JqID0gJC5qc3RyZWUucm9vdDsgfVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaikgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdHZhciBkb20gPSBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QgPyB0aGlzLmdldF9jb250YWluZXJfdWwoKSA6IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKSwgaSwgaiwgX3RoaXM7XG5cdFx0XHRpZighZG9tLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW5fZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRpZih0aGlzLmlzX2Nsb3NlZCh0aGlzLl9tb2RlbC5kYXRhW29iai5jaGlsZHJlbl9kW2ldXSkpIHtcblx0XHRcdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbb2JqLmNoaWxkcmVuX2RbaV1dLnN0YXRlLm9wZW5lZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzLnRyaWdnZXIoJ29wZW5fYWxsJywgeyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHRcdH1cblx0XHRcdG9yaWdpbmFsX29iaiA9IG9yaWdpbmFsX29iaiB8fCBkb207XG5cdFx0XHRfdGhpcyA9IHRoaXM7XG5cdFx0XHRkb20gPSB0aGlzLmlzX2Nsb3NlZChvYmopID8gZG9tLmZpbmQoJy5qc3RyZWUtY2xvc2VkJykuYWRkQmFjaygpIDogZG9tLmZpbmQoJy5qc3RyZWUtY2xvc2VkJyk7XG5cdFx0XHRkb20uZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdF90aGlzLm9wZW5fbm9kZShcblx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdGZ1bmN0aW9uKG5vZGUsIHN0YXR1cykgeyBpZihzdGF0dXMgJiYgdGhpcy5pc19wYXJlbnQobm9kZSkpIHsgdGhpcy5vcGVuX2FsbChub2RlLCBhbmltYXRpb24sIG9yaWdpbmFsX29iaik7IH0gfSxcblx0XHRcdFx0XHRhbmltYXRpb24gfHwgMFxuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cdFx0XHRpZihvcmlnaW5hbF9vYmouZmluZCgnLmpzdHJlZS1jbG9zZWQnKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGFuIGBvcGVuX2FsbGAgY2FsbCBjb21wbGV0ZXNcblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIG9wZW5fYWxsLmpzdHJlZVxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgb3BlbmVkIG5vZGVcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignb3Blbl9hbGwnLCB7IFwibm9kZVwiIDogdGhpcy5nZXRfbm9kZShvcmlnaW5hbF9vYmopIH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2xvc2VzIGFsbCBub2RlcyB3aXRoaW4gYSBub2RlIChvciB0aGUgdHJlZSksIHJldmFsaW5nIHRoZWlyIGNoaWxkcmVuXG5cdFx0ICogQG5hbWUgY2xvc2VfYWxsKFtvYmosIGFuaW1hdGlvbl0pXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGNsb3NlIHJlY3Vyc2l2ZWx5LCBvbWl0IHRvIGNsb3NlIGFsbCBub2RlcyBpbiB0aGUgdHJlZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBhbmltYXRpb24gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgd2hlbiBjbG9zaW5nIHRoZSBub2RlcywgdGhlIGRlZmF1bHQgaXMgbm8gYW5pbWF0aW9uXG5cdFx0ICogQHRyaWdnZXIgY2xvc2VfYWxsLmpzdHJlZVxuXHRcdCAqL1xuXHRcdGNsb3NlX2FsbCA6IGZ1bmN0aW9uIChvYmosIGFuaW1hdGlvbikge1xuXHRcdFx0aWYoIW9iaikgeyBvYmogPSAkLmpzdHJlZS5yb290OyB9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0dmFyIGRvbSA9IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCA/IHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpIDogdGhpcy5nZXRfbm9kZShvYmosIHRydWUpLFxuXHRcdFx0XHRfdGhpcyA9IHRoaXMsIGksIGo7XG5cdFx0XHRpZihkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdGRvbSA9IHRoaXMuaXNfb3BlbihvYmopID8gZG9tLmZpbmQoJy5qc3RyZWUtb3BlbicpLmFkZEJhY2soKSA6IGRvbS5maW5kKCcuanN0cmVlLW9wZW4nKTtcblx0XHRcdFx0JChkb20uZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uICgpIHsgX3RoaXMuY2xvc2Vfbm9kZSh0aGlzLCBhbmltYXRpb24gfHwgMCk7IH0pO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbb2JqLmNoaWxkcmVuX2RbaV1dLnN0YXRlLm9wZW5lZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBgY2xvc2VfYWxsYCBjYWxsIGNvbXBsZXRlc1xuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBjbG9zZV9hbGwuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgY2xvc2VkIG5vZGVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdjbG9zZV9hbGwnLCB7IFwibm9kZVwiIDogb2JqIH0pO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2hlY2tzIGlmIGEgbm9kZSBpcyBkaXNhYmxlZCAobm90IHNlbGVjdGFibGUpXG5cdFx0ICogQG5hbWUgaXNfZGlzYWJsZWQob2JqKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzX2Rpc2FibGVkIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0cmV0dXJuIG9iaiAmJiBvYmouc3RhdGUgJiYgb2JqLnN0YXRlLmRpc2FibGVkO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZW5hYmxlcyBhIG5vZGUgLSBzbyB0aGF0IGl0IGNhbiBiZSBzZWxlY3RlZFxuXHRcdCAqIEBuYW1lIGVuYWJsZV9ub2RlKG9iailcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmogdGhlIG5vZGUgdG8gZW5hYmxlXG5cdFx0ICogQHRyaWdnZXIgZW5hYmxlX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0ZW5hYmxlX25vZGUgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHR2YXIgdDEsIHQyO1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0b2JqID0gb2JqLnNsaWNlKCk7XG5cdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdHRoaXMuZW5hYmxlX25vZGUob2JqW3QxXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRvYmouc3RhdGUuZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdHRoaXMuZ2V0X25vZGUob2JqLHRydWUpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKCdqc3RyZWUtZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIGVuYWJsZWRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgZW5hYmxlX25vZGUuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgZW5hYmxlZCBub2RlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignZW5hYmxlX25vZGUnLCB7ICdub2RlJyA6IG9iaiB9KTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGRpc2FibGVzIGEgbm9kZSAtIHNvIHRoYXQgaXQgY2FuIG5vdCBiZSBzZWxlY3RlZFxuXHRcdCAqIEBuYW1lIGRpc2FibGVfbm9kZShvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGRpc2FibGVcblx0XHQgKiBAdHJpZ2dlciBkaXNhYmxlX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0ZGlzYWJsZV9ub2RlIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0dmFyIHQxLCB0Mjtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLmRpc2FibGVfbm9kZShvYmpbdDFdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgb2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdG9iai5zdGF0ZS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHR0aGlzLmdldF9ub2RlKG9iaix0cnVlKS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5hZGRDbGFzcygnanN0cmVlLWRpc2FibGVkJykuYXR0cignYXJpYS1kaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIGRpc2FibGVkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGRpc2FibGVfbm9kZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBkaXNhYmxlZCBub2RlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignZGlzYWJsZV9ub2RlJywgeyAnbm9kZScgOiBvYmogfSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBkZXRlcm1pbmVzIGlmIGEgbm9kZSBpcyBoaWRkZW5cblx0XHQgKiBAbmFtZSBpc19oaWRkZW4ob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZVxuXHRcdCAqL1xuXHRcdGlzX2hpZGRlbiA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdHJldHVybiBvYmouc3RhdGUuaGlkZGVuID09PSB0cnVlO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogaGlkZXMgYSBub2RlIC0gaXQgaXMgc3RpbGwgaW4gdGhlIHN0cnVjdHVyZSBidXQgd2lsbCBub3QgYmUgdmlzaWJsZVxuXHRcdCAqIEBuYW1lIGhpZGVfbm9kZShvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGhpZGVcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNraXBfcmVkcmF3IGludGVybmFsIHBhcmFtZXRlciBjb250cm9sbGluZyBpZiByZWRyYXcgaXMgY2FsbGVkXG5cdFx0ICogQHRyaWdnZXIgaGlkZV9ub2RlLmpzdHJlZVxuXHRcdCAqL1xuXHRcdGhpZGVfbm9kZSA6IGZ1bmN0aW9uIChvYmosIHNraXBfcmVkcmF3KSB7XG5cdFx0XHR2YXIgdDEsIHQyO1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0b2JqID0gb2JqLnNsaWNlKCk7XG5cdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdHRoaXMuaGlkZV9ub2RlKG9ialt0MV0sIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghc2tpcF9yZWRyYXcpIHtcblx0XHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYoIW9iai5zdGF0ZS5oaWRkZW4pIHtcblx0XHRcdFx0b2JqLnN0YXRlLmhpZGRlbiA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX25vZGVfY2hhbmdlZChvYmoucGFyZW50KTtcblx0XHRcdFx0aWYoIXNraXBfcmVkcmF3KSB7XG5cdFx0XHRcdFx0dGhpcy5yZWRyYXcoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYW4gbm9kZSBpcyBoaWRkZW5cblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIGhpZGVfbm9kZS5qc3RyZWVcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGUgdGhlIGhpZGRlbiBub2RlXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2hpZGVfbm9kZScsIHsgJ25vZGUnIDogb2JqIH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogc2hvd3MgYSBub2RlXG5cdFx0ICogQG5hbWUgc2hvd19ub2RlKG9iailcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmogdGhlIG5vZGUgdG8gc2hvd1xuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2tpcF9yZWRyYXcgaW50ZXJuYWwgcGFyYW1ldGVyIGNvbnRyb2xsaW5nIGlmIHJlZHJhdyBpcyBjYWxsZWRcblx0XHQgKiBAdHJpZ2dlciBzaG93X25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0c2hvd19ub2RlIDogZnVuY3Rpb24gKG9iaiwgc2tpcF9yZWRyYXcpIHtcblx0XHRcdHZhciB0MSwgdDI7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zaG93X25vZGUob2JqW3QxXSwgdHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFza2lwX3JlZHJhdykge1xuXHRcdFx0XHRcdHRoaXMucmVkcmF3KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihvYmouc3RhdGUuaGlkZGVuKSB7XG5cdFx0XHRcdG9iai5zdGF0ZS5oaWRkZW4gPSBmYWxzZTtcblx0XHRcdFx0dGhpcy5fbm9kZV9jaGFuZ2VkKG9iai5wYXJlbnQpO1xuXHRcdFx0XHRpZighc2tpcF9yZWRyYXcpIHtcblx0XHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIHNob3duXG5cdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHQgKiBAbmFtZSBzaG93X25vZGUuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBzaG93biBub2RlXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3Nob3dfbm9kZScsIHsgJ25vZGUnIDogb2JqIH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogaGlkZXMgYWxsIG5vZGVzXG5cdFx0ICogQG5hbWUgaGlkZV9hbGwoKVxuXHRcdCAqIEB0cmlnZ2VyIGhpZGVfYWxsLmpzdHJlZVxuXHRcdCAqL1xuXHRcdGhpZGVfYWxsIDogZnVuY3Rpb24gKHNraXBfcmVkcmF3KSB7XG5cdFx0XHR2YXIgaSwgbSA9IHRoaXMuX21vZGVsLmRhdGEsIGlkcyA9IFtdO1xuXHRcdFx0Zm9yKGkgaW4gbSkge1xuXHRcdFx0XHRpZihtLmhhc093blByb3BlcnR5KGkpICYmIGkgIT09ICQuanN0cmVlLnJvb3QgJiYgIW1baV0uc3RhdGUuaGlkZGVuKSB7XG5cdFx0XHRcdFx0bVtpXS5zdGF0ZS5oaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHRcdGlkcy5wdXNoKGkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyA9IHRydWU7XG5cdFx0XHRpZighc2tpcF9yZWRyYXcpIHtcblx0XHRcdFx0dGhpcy5yZWRyYXcoKTtcblx0XHRcdH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYWxsIG5vZGVzIGFyZSBoaWRkZW5cblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgaGlkZV9hbGwuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge0FycmF5fSBub2RlcyB0aGUgSURzIG9mIGFsbCBoaWRkZW4gbm9kZXNcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdoaWRlX2FsbCcsIHsgJ25vZGVzJyA6IGlkcyB9KTtcblx0XHRcdHJldHVybiBpZHM7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBzaG93cyBhbGwgbm9kZXNcblx0XHQgKiBAbmFtZSBzaG93X2FsbCgpXG5cdFx0ICogQHRyaWdnZXIgc2hvd19hbGwuanN0cmVlXG5cdFx0ICovXG5cdFx0c2hvd19hbGwgOiBmdW5jdGlvbiAoc2tpcF9yZWRyYXcpIHtcblx0XHRcdHZhciBpLCBtID0gdGhpcy5fbW9kZWwuZGF0YSwgaWRzID0gW107XG5cdFx0XHRmb3IoaSBpbiBtKSB7XG5cdFx0XHRcdGlmKG0uaGFzT3duUHJvcGVydHkoaSkgJiYgaSAhPT0gJC5qc3RyZWUucm9vdCAmJiBtW2ldLnN0YXRlLmhpZGRlbikge1xuXHRcdFx0XHRcdG1baV0uc3RhdGUuaGlkZGVuID0gZmFsc2U7XG5cdFx0XHRcdFx0aWRzLnB1c2goaSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3ID0gdHJ1ZTtcblx0XHRcdGlmKCFza2lwX3JlZHJhdykge1xuXHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0fVxuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbGwgbm9kZXMgYXJlIHNob3duXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIHNob3dfYWxsLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtBcnJheX0gbm9kZXMgdGhlIElEcyBvZiBhbGwgc2hvd24gbm9kZXNcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdzaG93X2FsbCcsIHsgJ25vZGVzJyA6IGlkcyB9KTtcblx0XHRcdHJldHVybiBpZHM7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjYWxsZWQgd2hlbiBhIG5vZGUgaXMgc2VsZWN0ZWQgYnkgdGhlIHVzZXIuIFVzZWQgaW50ZXJuYWxseS5cblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGFjdGl2YXRlX25vZGUob2JqLCBlKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBlIHRoZSByZWxhdGVkIGV2ZW50XG5cdFx0ICogQHRyaWdnZXIgYWN0aXZhdGVfbm9kZS5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0YWN0aXZhdGVfbm9kZSA6IGZ1bmN0aW9uIChvYmosIGUpIHtcblx0XHRcdGlmKHRoaXMuaXNfZGlzYWJsZWQob2JqKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZighZSB8fCB0eXBlb2YgZSAhPT0gJ29iamVjdCcpIHtcblx0XHRcdFx0ZSA9IHt9O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBlbnN1cmUgbGFzdF9jbGlja2VkIGlzIHN0aWxsIGluIHRoZSBET00sIG1ha2UgaXQgZnJlc2ggKG1heWJlIGl0IHdhcyBtb3ZlZD8pIGFuZCBtYWtlIHN1cmUgaXQgaXMgc3RpbGwgc2VsZWN0ZWQsIGlmIG5vdCAtIG1ha2UgbGFzdF9jbGlja2VkIHRoZSBsYXN0IHNlbGVjdGVkIG5vZGVcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQgPSB0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkICYmIHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQgIT09IHVuZGVmaW5lZCA/IHRoaXMuZ2V0X25vZGUodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5pZCkgOiBudWxsO1xuXHRcdFx0aWYodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCAmJiAhdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5zdGF0ZS5zZWxlY3RlZCkgeyB0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkID0gbnVsbDsgfVxuXHRcdFx0aWYoIXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQgJiYgdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCkgeyB0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkID0gdGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCAtIDFdKTsgfVxuXG5cdFx0XHRpZighdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlIHx8ICghZS5tZXRhS2V5ICYmICFlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHx8IChlLnNoaWZ0S2V5ICYmICghdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCB8fCAhdGhpcy5nZXRfcGFyZW50KG9iaikgfHwgdGhpcy5nZXRfcGFyZW50KG9iaikgIT09IHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQucGFyZW50ICkgKSkge1xuXHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlICYmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpICYmIHRoaXMuaXNfc2VsZWN0ZWQob2JqKSkge1xuXHRcdFx0XHRcdHRoaXMuZGVzZWxlY3Rfbm9kZShvYmosIGZhbHNlLCBlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmRlc2VsZWN0X2FsbCh0cnVlKTtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdF9ub2RlKG9iaiwgZmFsc2UsIGZhbHNlLCBlKTtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYoZS5zaGlmdEtleSkge1xuXHRcdFx0XHRcdHZhciBvID0gdGhpcy5nZXRfbm9kZShvYmopLmlkLFxuXHRcdFx0XHRcdFx0bCA9IHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQsXG5cdFx0XHRcdFx0XHRwID0gdGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnBhcmVudCkuY2hpbGRyZW4sXG5cdFx0XHRcdFx0XHRjID0gZmFsc2UsXG5cdFx0XHRcdFx0XHRpLCBqO1xuXHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHAubGVuZ3RoOyBpIDwgajsgaSArPSAxKSB7XG5cdFx0XHRcdFx0XHQvLyBzZXBhcmF0ZSBJRnMgd29yayB3aGVtIG8gYW5kIGwgYXJlIHRoZSBzYW1lXG5cdFx0XHRcdFx0XHRpZihwW2ldID09PSBvKSB7XG5cdFx0XHRcdFx0XHRcdGMgPSAhYztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHBbaV0gPT09IGwpIHtcblx0XHRcdFx0XHRcdFx0YyA9ICFjO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoIXRoaXMuaXNfZGlzYWJsZWQocFtpXSkgJiYgKGMgfHwgcFtpXSA9PT0gbyB8fCBwW2ldID09PSBsKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuaXNfaGlkZGVuKHBbaV0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3Rfbm9kZShwW2ldLCB0cnVlLCBmYWxzZSwgZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRlc2VsZWN0X25vZGUocFtpXSwgdHJ1ZSwgZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgJ2FjdGlvbicgOiAnc2VsZWN0X25vZGUnLCAnbm9kZScgOiB0aGlzLmdldF9ub2RlKG9iaiksICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsICdldmVudCcgOiBlIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGlmKCF0aGlzLmlzX3NlbGVjdGVkKG9iaikpIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0X25vZGUob2JqLCBmYWxzZSwgZmFsc2UsIGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuZGVzZWxlY3Rfbm9kZShvYmosIGZhbHNlLCBlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYW4gbm9kZSBpcyBjbGlja2VkIG9yIGludGVyY2F0ZWQgd2l0aCBieSB0aGUgdXNlclxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBhY3RpdmF0ZV9ub2RlLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCB0aGUgb29yaWdpbmFsIGV2ZW50IChpZiBhbnkpIHdoaWNoIHRyaWdnZXJlZCB0aGUgY2FsbCAobWF5IGJlIGFuIGVtcHR5IG9iamVjdClcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdhY3RpdmF0ZV9ub2RlJywgeyAnbm9kZScgOiB0aGlzLmdldF9ub2RlKG9iaiksICdldmVudCcgOiBlIH0pO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogYXBwbGllcyB0aGUgaG92ZXIgc3RhdGUgb24gYSBub2RlLCBjYWxsZWQgd2hlbiBhIG5vZGUgaXMgaG92ZXJlZCBieSB0aGUgdXNlci4gVXNlZCBpbnRlcm5hbGx5LlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgaG92ZXJfbm9kZShvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqXG5cdFx0ICogQHRyaWdnZXIgaG92ZXJfbm9kZS5qc3RyZWVcblx0XHQgKi9cblx0XHRob3Zlcl9ub2RlIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYoIW9iaiB8fCAhb2JqLmxlbmd0aCB8fCBvYmouY2hpbGRyZW4oJy5qc3RyZWUtaG92ZXJlZCcpLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgbyA9IHRoaXMuZWxlbWVudC5maW5kKCcuanN0cmVlLWhvdmVyZWQnKSwgdCA9IHRoaXMuZWxlbWVudDtcblx0XHRcdGlmKG8gJiYgby5sZW5ndGgpIHsgdGhpcy5kZWhvdmVyX25vZGUobyk7IH1cblxuXHRcdFx0b2JqLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmFkZENsYXNzKCdqc3RyZWUtaG92ZXJlZCcpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIGhvdmVyZWRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgaG92ZXJfbm9kZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignaG92ZXJfbm9kZScsIHsgJ25vZGUnIDogdGhpcy5nZXRfbm9kZShvYmopIH0pO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jywgb2JqWzBdLmlkKTsgfSwgMCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiByZW1vdmVzIHRoZSBob3ZlciBzdGF0ZSBmcm9tIGEgbm9kZWNhbGxlZCB3aGVuIGEgbm9kZSBpcyBubyBsb25nZXIgaG92ZXJlZCBieSB0aGUgdXNlci4gVXNlZCBpbnRlcm5hbGx5LlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgZGVob3Zlcl9ub2RlKG9iailcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmpcblx0XHQgKiBAdHJpZ2dlciBkZWhvdmVyX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0ZGVob3Zlcl9ub2RlIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYoIW9iaiB8fCAhb2JqLmxlbmd0aCB8fCAhb2JqLmNoaWxkcmVuKCcuanN0cmVlLWhvdmVyZWQnKS5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0b2JqLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKCdqc3RyZWUtaG92ZXJlZCcpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIG5vIGxvbmdlciBob3ZlcmVkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGRlaG92ZXJfbm9kZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignZGVob3Zlcl9ub2RlJywgeyAnbm9kZScgOiB0aGlzLmdldF9ub2RlKG9iaikgfSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBzZWxlY3QgYSBub2RlXG5cdFx0ICogQG5hbWUgc2VsZWN0X25vZGUob2JqIFssIHN1cHJlc3NfZXZlbnQsIHByZXZlbnRfb3Blbl0pXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIGFuIGFycmF5IGNhbiBiZSB1c2VkIHRvIHNlbGVjdCBtdWx0aXBsZSBub2Rlc1xuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc3VwcmVzc19ldmVudCBpZiBzZXQgdG8gYHRydWVgIHRoZSBgY2hhbmdlZC5qc3RyZWVgIGV2ZW50IHdvbid0IGJlIHRyaWdnZXJlZFxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJldmVudF9vcGVuIGlmIHNldCB0byBgdHJ1ZWAgcGFyZW50cyBvZiB0aGUgc2VsZWN0ZWQgbm9kZSB3b24ndCBiZSBvcGVuZWRcblx0XHQgKiBAdHJpZ2dlciBzZWxlY3Rfbm9kZS5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0c2VsZWN0X25vZGUgOiBmdW5jdGlvbiAob2JqLCBzdXByZXNzX2V2ZW50LCBwcmV2ZW50X29wZW4sIGUpIHtcblx0XHRcdHZhciBkb20sIHQxLCB0MiwgdGg7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3Rfbm9kZShvYmpbdDFdLCBzdXByZXNzX2V2ZW50LCBwcmV2ZW50X29wZW4sIGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYoIW9iai5zdGF0ZS5zZWxlY3RlZCkge1xuXHRcdFx0XHRvYmouc3RhdGUuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChvYmouaWQpO1xuXHRcdFx0XHRpZighcHJldmVudF9vcGVuKSB7XG5cdFx0XHRcdFx0ZG9tID0gdGhpcy5fb3Blbl90byhvYmopO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGRvbSAmJiBkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0ZG9tLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCB0cnVlKS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5hZGRDbGFzcygnanN0cmVlLWNsaWNrZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYW4gbm9kZSBpcyBzZWxlY3RlZFxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgc2VsZWN0X25vZGUuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgdGhlIGV2ZW50IChpZiBhbnkpIHRoYXQgdHJpZ2dlcmVkIHRoaXMgc2VsZWN0X25vZGVcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignc2VsZWN0X25vZGUnLCB7ICdub2RlJyA6IG9iaiwgJ3NlbGVjdGVkJyA6IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCwgJ2V2ZW50JyA6IGUgfSk7XG5cdFx0XHRcdGlmKCFzdXByZXNzX2V2ZW50KSB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gc2VsZWN0aW9uIGNoYW5nZXNcblx0XHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0XHQgKiBAbmFtZSBjaGFuZ2VkLmpzdHJlZVxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiB0aGUgYWN0aW9uIHRoYXQgY2F1c2VkIHRoZSBzZWxlY3Rpb24gdG8gY2hhbmdlXG5cdFx0XHRcdFx0ICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG5cdFx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IHRoZSBldmVudCAoaWYgYW55KSB0aGF0IHRyaWdnZXJlZCB0aGlzIGNoYW5nZWQgZXZlbnRcblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7ICdhY3Rpb24nIDogJ3NlbGVjdF9ub2RlJywgJ25vZGUnIDogb2JqLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLCAnZXZlbnQnIDogZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZGVzZWxlY3QgYSBub2RlXG5cdFx0ICogQG5hbWUgZGVzZWxlY3Rfbm9kZShvYmogWywgc3VwcmVzc19ldmVudF0pXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIGFuIGFycmF5IGNhbiBiZSB1c2VkIHRvIGRlc2VsZWN0IG11bHRpcGxlIG5vZGVzXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBzdXByZXNzX2V2ZW50IGlmIHNldCB0byBgdHJ1ZWAgdGhlIGBjaGFuZ2VkLmpzdHJlZWAgZXZlbnQgd29uJ3QgYmUgdHJpZ2dlcmVkXG5cdFx0ICogQHRyaWdnZXIgZGVzZWxlY3Rfbm9kZS5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0ZGVzZWxlY3Rfbm9kZSA6IGZ1bmN0aW9uIChvYmosIHN1cHJlc3NfZXZlbnQsIGUpIHtcblx0XHRcdHZhciB0MSwgdDIsIGRvbTtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLmRlc2VsZWN0X25vZGUob2JqW3QxXSwgc3VwcmVzc19ldmVudCwgZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRkb20gPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSk7XG5cdFx0XHRpZihvYmouc3RhdGUuc2VsZWN0ZWQpIHtcblx0XHRcdFx0b2JqLnN0YXRlLnNlbGVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCA9ICQudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCwgb2JqLmlkKTtcblx0XHRcdFx0aWYoZG9tLmxlbmd0aCkge1xuXHRcdFx0XHRcdGRvbS5hdHRyKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2xpY2tlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIGRlc2VsZWN0ZWRcblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIGRlc2VsZWN0X25vZGUuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgdGhlIGV2ZW50IChpZiBhbnkpIHRoYXQgdHJpZ2dlcmVkIHRoaXMgZGVzZWxlY3Rfbm9kZVxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dGhpcy50cmlnZ2VyKCdkZXNlbGVjdF9ub2RlJywgeyAnbm9kZScgOiBvYmosICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsICdldmVudCcgOiBlIH0pO1xuXHRcdFx0XHRpZighc3VwcmVzc19ldmVudCkge1xuXHRcdFx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgJ2FjdGlvbicgOiAnZGVzZWxlY3Rfbm9kZScsICdub2RlJyA6IG9iaiwgJ3NlbGVjdGVkJyA6IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCwgJ2V2ZW50JyA6IGUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHNlbGVjdCBhbGwgbm9kZXMgaW4gdGhlIHRyZWVcblx0XHQgKiBAbmFtZSBzZWxlY3RfYWxsKFtzdXByZXNzX2V2ZW50XSlcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IHN1cHJlc3NfZXZlbnQgaWYgc2V0IHRvIGB0cnVlYCB0aGUgYGNoYW5nZWQuanN0cmVlYCBldmVudCB3b24ndCBiZSB0cmlnZ2VyZWRcblx0XHQgKiBAdHJpZ2dlciBzZWxlY3RfYWxsLmpzdHJlZSwgY2hhbmdlZC5qc3RyZWVcblx0XHQgKi9cblx0XHRzZWxlY3RfYWxsIDogZnVuY3Rpb24gKHN1cHJlc3NfZXZlbnQpIHtcblx0XHRcdHZhciB0bXAgPSB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKSwgaSwgajtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCA9IHRoaXMuX21vZGVsLmRhdGFbJC5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZC5jb25jYXQoKTtcblx0XHRcdGZvcihpID0gMCwgaiA9IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dKSB7XG5cdFx0XHRcdFx0dGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dLnN0YXRlLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5yZWRyYXcodHJ1ZSk7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGFsbCBub2RlcyBhcmUgc2VsZWN0ZWRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgc2VsZWN0X2FsbC5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3NlbGVjdF9hbGwnLCB7ICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQgfSk7XG5cdFx0XHRpZighc3VwcmVzc19ldmVudCkge1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7ICdhY3Rpb24nIDogJ3NlbGVjdF9hbGwnLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLCAnb2xkX3NlbGVjdGlvbicgOiB0bXAgfSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBkZXNlbGVjdCBhbGwgc2VsZWN0ZWQgbm9kZXNcblx0XHQgKiBAbmFtZSBkZXNlbGVjdF9hbGwoW3N1cHJlc3NfZXZlbnRdKVxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc3VwcmVzc19ldmVudCBpZiBzZXQgdG8gYHRydWVgIHRoZSBgY2hhbmdlZC5qc3RyZWVgIGV2ZW50IHdvbid0IGJlIHRyaWdnZXJlZFxuXHRcdCAqIEB0cmlnZ2VyIGRlc2VsZWN0X2FsbC5qc3RyZWUsIGNoYW5nZWQuanN0cmVlXG5cdFx0ICovXG5cdFx0ZGVzZWxlY3RfYWxsIDogZnVuY3Rpb24gKHN1cHJlc3NfZXZlbnQpIHtcblx0XHRcdHZhciB0bXAgPSB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKSwgaSwgajtcblx0XHRcdGZvcihpID0gMCwgaiA9IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dKSB7XG5cdFx0XHRcdFx0dGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dLnN0YXRlLnNlbGVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCA9IFtdO1xuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoJy5qc3RyZWUtY2xpY2tlZCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2xpY2tlZCcpLnBhcmVudCgpLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGFsbCBub2RlcyBhcmUgZGVzZWxlY3RlZFxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBkZXNlbGVjdF9hbGwuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgcHJldmlvdXMgc2VsZWN0aW9uXG5cdFx0XHQgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZCB0aGUgY3VycmVudCBzZWxlY3Rpb25cblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdkZXNlbGVjdF9hbGwnLCB7ICdzZWxlY3RlZCcgOiB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsICdub2RlJyA6IHRtcCB9KTtcblx0XHRcdGlmKCFzdXByZXNzX2V2ZW50KSB7XG5cdFx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgJ2FjdGlvbicgOiAnZGVzZWxlY3RfYWxsJywgJ3NlbGVjdGVkJyA6IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCwgJ29sZF9zZWxlY3Rpb24nIDogdG1wIH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2hlY2tzIGlmIGEgbm9kZSBpcyBzZWxlY3RlZFxuXHRcdCAqIEBuYW1lIGlzX3NlbGVjdGVkKG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gIG9ialxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNfc2VsZWN0ZWQgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqLnN0YXRlLnNlbGVjdGVkO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IGFuIGFycmF5IG9mIGFsbCBzZWxlY3RlZCBub2Rlc1xuXHRcdCAqIEBuYW1lIGdldF9zZWxlY3RlZChbZnVsbF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9ICBmdWxsIGlmIHNldCB0byBgdHJ1ZWAgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29uc2lzdCBvZiB0aGUgZnVsbCBub2RlIG9iamVjdHMsIG90aGVyd2lzZSAtIG9ubHkgSURzIHdpbGwgYmUgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJuIHtBcnJheX1cblx0XHQgKi9cblx0XHRnZXRfc2VsZWN0ZWQgOiBmdW5jdGlvbiAoZnVsbCkge1xuXHRcdFx0cmV0dXJuIGZ1bGwgPyAkLm1hcCh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsICQucHJveHkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHRoaXMuZ2V0X25vZGUoaSk7IH0sIHRoaXMpKSA6IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IGFuIGFycmF5IG9mIGFsbCB0b3AgbGV2ZWwgc2VsZWN0ZWQgbm9kZXMgKGlnbm9yaW5nIGNoaWxkcmVuIG9mIHNlbGVjdGVkIG5vZGVzKVxuXHRcdCAqIEBuYW1lIGdldF90b3Bfc2VsZWN0ZWQoW2Z1bGxdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSAgZnVsbCBpZiBzZXQgdG8gYHRydWVgIHRoZSByZXR1cm5lZCBhcnJheSB3aWxsIGNvbnNpc3Qgb2YgdGhlIGZ1bGwgbm9kZSBvYmplY3RzLCBvdGhlcndpc2UgLSBvbmx5IElEcyB3aWxsIGJlIHJldHVybmVkXG5cdFx0ICogQHJldHVybiB7QXJyYXl9XG5cdFx0ICovXG5cdFx0Z2V0X3RvcF9zZWxlY3RlZCA6IGZ1bmN0aW9uIChmdWxsKSB7XG5cdFx0XHR2YXIgdG1wID0gdGhpcy5nZXRfc2VsZWN0ZWQodHJ1ZSksXG5cdFx0XHRcdG9iaiA9IHt9LCBpLCBqLCBrLCBsO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gdG1wLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRvYmpbdG1wW2ldLmlkXSA9IHRtcFtpXTtcblx0XHRcdH1cblx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0Zm9yKGsgPSAwLCBsID0gdG1wW2ldLmNoaWxkcmVuX2QubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0aWYob2JqW3RtcFtpXS5jaGlsZHJlbl9kW2tdXSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIG9ialt0bXBbaV0uY2hpbGRyZW5fZFtrXV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0bXAgPSBbXTtcblx0XHRcdGZvcihpIGluIG9iaikge1xuXHRcdFx0XHRpZihvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHR0bXAucHVzaChpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZ1bGwgPyAkLm1hcCh0bXAsICQucHJveHkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHRoaXMuZ2V0X25vZGUoaSk7IH0sIHRoaXMpKSA6IHRtcDtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldCBhbiBhcnJheSBvZiBhbGwgYm90dG9tIGxldmVsIHNlbGVjdGVkIG5vZGVzIChpZ25vcmluZyBzZWxlY3RlZCBwYXJlbnRzKVxuXHRcdCAqIEBuYW1lIGdldF9ib3R0b21fc2VsZWN0ZWQoW2Z1bGxdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSAgZnVsbCBpZiBzZXQgdG8gYHRydWVgIHRoZSByZXR1cm5lZCBhcnJheSB3aWxsIGNvbnNpc3Qgb2YgdGhlIGZ1bGwgbm9kZSBvYmplY3RzLCBvdGhlcndpc2UgLSBvbmx5IElEcyB3aWxsIGJlIHJldHVybmVkXG5cdFx0ICogQHJldHVybiB7QXJyYXl9XG5cdFx0ICovXG5cdFx0Z2V0X2JvdHRvbV9zZWxlY3RlZCA6IGZ1bmN0aW9uIChmdWxsKSB7XG5cdFx0XHR2YXIgdG1wID0gdGhpcy5nZXRfc2VsZWN0ZWQodHJ1ZSksXG5cdFx0XHRcdG9iaiA9IFtdLCBpLCBqO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gdG1wLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRpZighdG1wW2ldLmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdG9iai5wdXNoKHRtcFtpXS5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmdWxsID8gJC5tYXAob2JqLCAkLnByb3h5KGZ1bmN0aW9uIChpKSB7IHJldHVybiB0aGlzLmdldF9ub2RlKGkpOyB9LCB0aGlzKSkgOiBvYmo7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBnZXRzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB0cmVlIHNvIHRoYXQgaXQgY2FuIGJlIHJlc3RvcmVkIGxhdGVyIHdpdGggYHNldF9zdGF0ZShzdGF0ZSlgLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQG5hbWUgZ2V0X3N0YXRlKClcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEByZXR1cm4ge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXRfc3RhdGUgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgc3RhdGVcdD0ge1xuXHRcdFx0XHQnY29yZScgOiB7XG5cdFx0XHRcdFx0J29wZW4nIDogW10sXG5cdFx0XHRcdFx0J3Njcm9sbCcgOiB7XG5cdFx0XHRcdFx0XHQnbGVmdCcgOiB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0XHRcdFx0J3RvcCcgOiB0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wKClcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdC8qIVxuXHRcdFx0XHRcdCd0aGVtZXMnIDoge1xuXHRcdFx0XHRcdFx0J25hbWUnIDogdGhpcy5nZXRfdGhlbWUoKSxcblx0XHRcdFx0XHRcdCdpY29ucycgOiB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zLFxuXHRcdFx0XHRcdFx0J2RvdHMnIDogdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdCdzZWxlY3RlZCcgOiBbXVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBpO1xuXHRcdFx0Zm9yKGkgaW4gdGhpcy5fbW9kZWwuZGF0YSkge1xuXHRcdFx0XHRpZih0aGlzLl9tb2RlbC5kYXRhLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0aWYoaSAhPT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVtpXS5zdGF0ZS5vcGVuZWQpIHtcblx0XHRcdFx0XHRcdFx0c3RhdGUuY29yZS5vcGVuLnB1c2goaSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0aGlzLl9tb2RlbC5kYXRhW2ldLnN0YXRlLnNlbGVjdGVkKSB7XG5cdFx0XHRcdFx0XHRcdHN0YXRlLmNvcmUuc2VsZWN0ZWQucHVzaChpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHNldHMgdGhlIHN0YXRlIG9mIHRoZSB0cmVlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQG5hbWUgc2V0X3N0YXRlKHN0YXRlIFssIGNhbGxiYWNrXSlcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSB0aGUgc3RhdGUgdG8gcmVzdG9yZS4gS2VlcCBpbiBtaW5kIHRoaXMgb2JqZWN0IGlzIHBhc3NlZCBieSByZWZlcmVuY2UgYW5kIGpzdHJlZSB3aWxsIG1vZGlmeSBpdC5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBhbiBvcHRpb25hbCBmdW5jdGlvbiB0byBleGVjdXRlIG9uY2UgdGhlIHN0YXRlIGlzIHJlc3RvcmVkLlxuXHRcdCAqIEB0cmlnZ2VyIHNldF9zdGF0ZS5qc3RyZWVcblx0XHQgKi9cblx0XHRzZXRfc3RhdGUgOiBmdW5jdGlvbiAoc3RhdGUsIGNhbGxiYWNrKSB7XG5cdFx0XHRpZihzdGF0ZSkge1xuXHRcdFx0XHRpZihzdGF0ZS5jb3JlKSB7XG5cdFx0XHRcdFx0dmFyIHJlcywgbiwgdCwgX3RoaXMsIGk7XG5cdFx0XHRcdFx0aWYoc3RhdGUuY29yZS5vcGVuKSB7XG5cdFx0XHRcdFx0XHRpZighJC5pc0FycmF5KHN0YXRlLmNvcmUub3BlbikgfHwgIXN0YXRlLmNvcmUub3Blbi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHN0YXRlLmNvcmUub3Blbjtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXRfc3RhdGUoc3RhdGUsIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9sb2FkX25vZGVzKHN0YXRlLmNvcmUub3BlbiwgZnVuY3Rpb24gKG5vZGVzKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vcGVuX25vZGUobm9kZXMsIGZhbHNlLCAwKTtcblx0XHRcdFx0XHRcdFx0XHRkZWxldGUgc3RhdGUuY29yZS5vcGVuO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2V0X3N0YXRlKHN0YXRlLCBjYWxsYmFjayk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzdGF0ZS5jb3JlLnNjcm9sbCkge1xuXHRcdFx0XHRcdFx0aWYoc3RhdGUuY29yZS5zY3JvbGwgJiYgc3RhdGUuY29yZS5zY3JvbGwubGVmdCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KHN0YXRlLmNvcmUuc2Nyb2xsLmxlZnQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoc3RhdGUuY29yZS5zY3JvbGwgJiYgc3RhdGUuY29yZS5zY3JvbGwudG9wICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LnNjcm9sbFRvcChzdGF0ZS5jb3JlLnNjcm9sbC50b3ApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVsZXRlIHN0YXRlLmNvcmUuc2Nyb2xsO1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRfc3RhdGUoc3RhdGUsIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoc3RhdGUuY29yZS5zZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0X3RoaXMgPSB0aGlzO1xuXHRcdFx0XHRcdFx0dGhpcy5kZXNlbGVjdF9hbGwoKTtcblx0XHRcdFx0XHRcdCQuZWFjaChzdGF0ZS5jb3JlLnNlbGVjdGVkLCBmdW5jdGlvbiAoaSwgdikge1xuXHRcdFx0XHRcdFx0XHRfdGhpcy5zZWxlY3Rfbm9kZSh2LCBmYWxzZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBzdGF0ZS5jb3JlLnNlbGVjdGVkO1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRfc3RhdGUoc3RhdGUsIGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yKGkgaW4gc3RhdGUpIHtcblx0XHRcdFx0XHRcdGlmKHN0YXRlLmhhc093blByb3BlcnR5KGkpICYmIGkgIT09IFwiY29yZVwiICYmICQuaW5BcnJheShpLCB0aGlzLnNldHRpbmdzLnBsdWdpbnMpID09PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgc3RhdGVbaV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKCQuaXNFbXB0eU9iamVjdChzdGF0ZS5jb3JlKSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHN0YXRlLmNvcmU7XG5cdFx0XHRcdFx0XHR0aGlzLnNldF9zdGF0ZShzdGF0ZSwgY2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZigkLmlzRW1wdHlPYmplY3Qoc3RhdGUpKSB7XG5cdFx0XHRcdFx0c3RhdGUgPSBudWxsO1xuXHRcdFx0XHRcdGlmKGNhbGxiYWNrKSB7IGNhbGxiYWNrLmNhbGwodGhpcyk7IH1cblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIGBzZXRfc3RhdGVgIGNhbGwgY29tcGxldGVzXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQG5hbWUgc2V0X3N0YXRlLmpzdHJlZVxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdHRoaXMudHJpZ2dlcignc2V0X3N0YXRlJyk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogcmVmcmVzaGVzIHRoZSB0cmVlIC0gYWxsIG5vZGVzIGFyZSByZWxvYWRlZCB3aXRoIGNhbGxzIHRvIGBsb2FkX25vZGVgLlxuXHRcdCAqIEBuYW1lIHJlZnJlc2goKVxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2tpcF9sb2FkaW5nIGFuIG9wdGlvbiB0byBza2lwIHNob3dpbmcgdGhlIGxvYWRpbmcgaW5kaWNhdG9yXG5cdFx0ICogQHBhcmFtIHtNaXhlZH0gZm9yZ2V0X3N0YXRlIGlmIHNldCB0byBgdHJ1ZWAgc3RhdGUgd2lsbCBub3QgYmUgcmVhcHBsaWVkLCBpZiBzZXQgdG8gYSBmdW5jdGlvbiAocmVjZWl2aW5nIHRoZSBjdXJyZW50IHN0YXRlIGFzIGFyZ3VtZW50KSB0aGUgcmVzdWx0IG9mIHRoYXQgZnVuY3Rpb24gd2lsbCBiZSB1c2VkIGFzIHN0YXRlXG5cdFx0ICogQHRyaWdnZXIgcmVmcmVzaC5qc3RyZWVcblx0XHQgKi9cblx0XHRyZWZyZXNoIDogZnVuY3Rpb24gKHNraXBfbG9hZGluZywgZm9yZ2V0X3N0YXRlKSB7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUuc3RhdGUgPSBmb3JnZXRfc3RhdGUgPT09IHRydWUgPyB7fSA6IHRoaXMuZ2V0X3N0YXRlKCk7XG5cdFx0XHRpZihmb3JnZXRfc3RhdGUgJiYgJC5pc0Z1bmN0aW9uKGZvcmdldF9zdGF0ZSkpIHsgdGhpcy5fZGF0YS5jb3JlLnN0YXRlID0gZm9yZ2V0X3N0YXRlLmNhbGwodGhpcywgdGhpcy5fZGF0YS5jb3JlLnN0YXRlKTsgfVxuXHRcdFx0dGhpcy5fY250ID0gMDtcblx0XHRcdHRoaXMuX21vZGVsLmRhdGEgPSB7fTtcblx0XHRcdHRoaXMuX21vZGVsLmRhdGFbJC5qc3RyZWUucm9vdF0gPSB7XG5cdFx0XHRcdGlkIDogJC5qc3RyZWUucm9vdCxcblx0XHRcdFx0cGFyZW50IDogbnVsbCxcblx0XHRcdFx0cGFyZW50cyA6IFtdLFxuXHRcdFx0XHRjaGlsZHJlbiA6IFtdLFxuXHRcdFx0XHRjaGlsZHJlbl9kIDogW10sXG5cdFx0XHRcdHN0YXRlIDogeyBsb2FkZWQgOiBmYWxzZSB9XG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkID0gW107XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkID0gbnVsbDtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkID0gbnVsbDtcblxuXHRcdFx0dmFyIGMgPSB0aGlzLmdldF9jb250YWluZXJfdWwoKVswXS5jbGFzc05hbWU7XG5cdFx0XHRpZighc2tpcF9sb2FkaW5nKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5odG1sKFwiPFwiK1widWwgY2xhc3M9J1wiK2MrXCInIHJvbGU9J2dyb3VwJz48XCIrXCJsaSBjbGFzcz0nanN0cmVlLWluaXRpYWwtbm9kZSBqc3RyZWUtbG9hZGluZyBqc3RyZWUtbGVhZiBqc3RyZWUtbGFzdCcgcm9sZT0ndHJlZWl0ZW0nIGlkPSdqXCIrdGhpcy5faWQrXCJfbG9hZGluZyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS1vY2wnPjwvaT48XCIrXCJhIGNsYXNzPSdqc3RyZWUtYW5jaG9yJyBocmVmPScjJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLXRoZW1laWNvbi1oaWRkZW4nPjwvaT5cIiArIHRoaXMuZ2V0X3N0cmluZyhcIkxvYWRpbmcgLi4uXCIpICsgXCI8L2E+PC9saT48L3VsPlwiKTtcblx0XHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsJ2onK3RoaXMuX2lkKydfbG9hZGluZycpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5sb2FkX25vZGUoJC5qc3RyZWUucm9vdCwgZnVuY3Rpb24gKG8sIHMpIHtcblx0XHRcdFx0aWYocykge1xuXHRcdFx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZSA9IGM7XG5cdFx0XHRcdFx0aWYodGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkpIHtcblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLHRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZXRfc3RhdGUoJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuX2RhdGEuY29yZS5zdGF0ZSksIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBgcmVmcmVzaGAgY2FsbCBjb21wbGV0ZXNcblx0XHRcdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHRcdFx0ICogQG5hbWUgcmVmcmVzaC5qc3RyZWVcblx0XHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdFx0dGhpcy50cmlnZ2VyKCdyZWZyZXNoJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLnN0YXRlID0gbnVsbDtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogcmVmcmVzaGVzIGEgbm9kZSBpbiB0aGUgdHJlZSAocmVsb2FkIGl0cyBjaGlsZHJlbikgYWxsIG9wZW5lZCBub2RlcyBpbnNpZGUgdGhhdCBub2RlIGFyZSByZWxvYWRlZCB3aXRoIGNhbGxzIHRvIGBsb2FkX25vZGVgLlxuXHRcdCAqIEBuYW1lIHJlZnJlc2hfbm9kZShvYmopXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9iaiB0aGUgbm9kZVxuXHRcdCAqIEB0cmlnZ2VyIHJlZnJlc2hfbm9kZS5qc3RyZWVcblx0XHQgKi9cblx0XHRyZWZyZXNoX25vZGUgOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdHZhciBvcGVuZWQgPSBbXSwgdG9fbG9hZCA9IFtdLCBzID0gdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSk7XG5cdFx0XHR0b19sb2FkLnB1c2gob2JqLmlkKTtcblx0XHRcdGlmKG9iai5zdGF0ZS5vcGVuZWQgPT09IHRydWUpIHsgb3BlbmVkLnB1c2gob2JqLmlkKTsgfVxuXHRcdFx0dGhpcy5nZXRfbm9kZShvYmosIHRydWUpLmZpbmQoJy5qc3RyZWUtb3BlbicpLmVhY2goZnVuY3Rpb24oKSB7IHRvX2xvYWQucHVzaCh0aGlzLmlkKTsgb3BlbmVkLnB1c2godGhpcy5pZCk7IH0pO1xuXHRcdFx0dGhpcy5fbG9hZF9ub2Rlcyh0b19sb2FkLCAkLnByb3h5KGZ1bmN0aW9uIChub2Rlcykge1xuXHRcdFx0XHR0aGlzLm9wZW5fbm9kZShvcGVuZWQsIGZhbHNlLCAwKTtcblx0XHRcdFx0dGhpcy5zZWxlY3Rfbm9kZShzKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGEgbm9kZSBpcyByZWZyZXNoZWRcblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIHJlZnJlc2hfbm9kZS5qc3RyZWVcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGUgLSB0aGUgcmVmcmVzaGVkIG5vZGVcblx0XHRcdFx0ICogQHBhcmFtIHtBcnJheX0gbm9kZXMgLSBhbiBhcnJheSBvZiB0aGUgSURzIG9mIHRoZSBub2RlcyB0aGF0IHdlcmUgcmVsb2FkZWRcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcigncmVmcmVzaF9ub2RlJywgeyAnbm9kZScgOiBvYmosICdub2RlcycgOiBub2RlcyB9KTtcblx0XHRcdH0sIHRoaXMpLCBmYWxzZSwgdHJ1ZSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBzZXQgKGNoYW5nZSkgdGhlIElEIG9mIGEgbm9kZVxuXHRcdCAqIEBuYW1lIHNldF9pZChvYmosIGlkKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmogdGhlIG5vZGVcblx0XHQgKiBAcGFyYW0gIHtTdHJpbmd9IGlkIHRoZSBuZXcgSURcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqIEB0cmlnZ2VyIHNldF9pZC5qc3RyZWVcblx0XHQgKi9cblx0XHRzZXRfaWQgOiBmdW5jdGlvbiAob2JqLCBpZCkge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHR2YXIgaSwgaiwgbSA9IHRoaXMuX21vZGVsLmRhdGEsIG9sZCA9IG9iai5pZDtcblx0XHRcdGlkID0gaWQudG9TdHJpbmcoKTtcblx0XHRcdC8vIHVwZGF0ZSBwYXJlbnRzIChyZXBsYWNlIGN1cnJlbnQgSUQgd2l0aCBuZXcgb25lIGluIGNoaWxkcmVuIGFuZCBjaGlsZHJlbl9kKVxuXHRcdFx0bVtvYmoucGFyZW50XS5jaGlsZHJlblskLmluQXJyYXkob2JqLmlkLCBtW29iai5wYXJlbnRdLmNoaWxkcmVuKV0gPSBpZDtcblx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5wYXJlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRtW29iai5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kWyQuaW5BcnJheShvYmouaWQsIG1bb2JqLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QpXSA9IGlkO1xuXHRcdFx0fVxuXHRcdFx0Ly8gdXBkYXRlIGNoaWxkcmVuIChyZXBsYWNlIGN1cnJlbnQgSUQgd2l0aCBuZXcgb25lIGluIHBhcmVudCBhbmQgcGFyZW50cylcblx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0bVtvYmouY2hpbGRyZW5baV1dLnBhcmVudCA9IGlkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdG1bb2JqLmNoaWxkcmVuX2RbaV1dLnBhcmVudHNbJC5pbkFycmF5KG9iai5pZCwgbVtvYmouY2hpbGRyZW5fZFtpXV0ucGFyZW50cyldID0gaWQ7XG5cdFx0XHR9XG5cdFx0XHRpID0gJC5pbkFycmF5KG9iai5pZCwgdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkKTtcblx0XHRcdGlmKGkgIT09IC0xKSB7IHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXSA9IGlkOyB9XG5cdFx0XHQvLyB1cGRhdGUgbW9kZWwgYW5kIG9iaiBpdHNlbGYgKG9iai5pZCwgdGhpcy5fbW9kZWwuZGF0YVtLRVldKVxuXHRcdFx0aSA9IHRoaXMuZ2V0X25vZGUob2JqLmlkLCB0cnVlKTtcblx0XHRcdGlmKGkpIHtcblx0XHRcdFx0aS5hdHRyKCdpZCcsIGlkKTsgLy8uY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuYXR0cignaWQnLCBpZCArICdfYW5jaG9yJykuZW5kKCkuYXR0cignYXJpYS1sYWJlbGxlZGJ5JywgaWQgKyAnX2FuY2hvcicpO1xuXHRcdFx0XHRpZih0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JykgPT09IG9iai5pZCkge1xuXHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCBpZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGRlbGV0ZSBtW29iai5pZF07XG5cdFx0XHRvYmouaWQgPSBpZDtcblx0XHRcdG9iai5saV9hdHRyLmlkID0gaWQ7XG5cdFx0XHRtW2lkXSA9IG9iajtcblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBub2RlIGlkIHZhbHVlIGlzIGNoYW5nZWRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgc2V0X2lkLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBvbGQgdGhlIG9sZCBpZFxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3NldF9pZCcseyBcIm5vZGVcIiA6IG9iaiwgXCJuZXdcIiA6IG9iai5pZCwgXCJvbGRcIiA6IG9sZCB9KTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IHRoZSB0ZXh0IHZhbHVlIG9mIGEgbm9kZVxuXHRcdCAqIEBuYW1lIGdldF90ZXh0KG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIHRoZSBub2RlXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldF90ZXh0IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0cmV0dXJuICghb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgPyBmYWxzZSA6IG9iai50ZXh0O1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogc2V0IHRoZSB0ZXh0IHZhbHVlIG9mIGEgbm9kZS4gVXNlZCBpbnRlcm5hbGx5LCBwbGVhc2UgdXNlIGByZW5hbWVfbm9kZShvYmosIHZhbClgLlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgc2V0X3RleHQob2JqLCB2YWwpXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9iaiB0aGUgbm9kZSwgeW91IGNhbiBwYXNzIGFuIGFycmF5IHRvIHNldCB0aGUgdGV4dCBvbiBtdWx0aXBsZSBub2Rlc1xuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gdmFsIHRoZSBuZXcgdGV4dCB2YWx1ZVxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICogQHRyaWdnZXIgc2V0X3RleHQuanN0cmVlXG5cdFx0ICovXG5cdFx0c2V0X3RleHQgOiBmdW5jdGlvbiAob2JqLCB2YWwpIHtcblx0XHRcdHZhciB0MSwgdDI7XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRfdGV4dChvYmpbdDFdLCB2YWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHRvYmoudGV4dCA9IHZhbDtcblx0XHRcdGlmKHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKS5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5yZWRyYXdfbm9kZShvYmouaWQpO1xuXHRcdFx0fVxuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIG5vZGUgdGV4dCB2YWx1ZSBpcyBjaGFuZ2VkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIHNldF90ZXh0LmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHRcdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIG5ldyB2YWx1ZVxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3NldF90ZXh0Jyx7IFwib2JqXCIgOiBvYmosIFwidGV4dFwiIDogdmFsIH0pO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBnZXRzIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIG5vZGUgKG9yIHRoZSB3aG9sZSB0cmVlKVxuXHRcdCAqIEBuYW1lIGdldF9qc29uKFtvYmosIG9wdGlvbnNdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmpcblx0XHQgKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBvcHRpb25zLm5vX3N0YXRlIGRvIG5vdCByZXR1cm4gc3RhdGUgaW5mb3JtYXRpb25cblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBvcHRpb25zLm5vX2lkIGRvIG5vdCByZXR1cm4gSURcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBvcHRpb25zLm5vX2NoaWxkcmVuIGRvIG5vdCBpbmNsdWRlIGNoaWxkcmVuXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gb3B0aW9ucy5ub19kYXRhIGRvIG5vdCBpbmNsdWRlIG5vZGUgZGF0YVxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IG9wdGlvbnMubm9fbGlfYXR0ciBkbyBub3QgaW5jbHVkZSBMSSBhdHRyaWJ1dGVzXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gb3B0aW9ucy5ub19hX2F0dHIgZG8gbm90IGluY2x1ZGUgQSBhdHRyaWJ1dGVzXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gb3B0aW9ucy5mbGF0IHJldHVybiBmbGF0IEpTT04gaW5zdGVhZCBvZiBuZXN0ZWRcblx0XHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0Z2V0X2pzb24gOiBmdW5jdGlvbiAob2JqLCBvcHRpb25zLCBmbGF0KSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaiB8fCAkLmpzdHJlZS5yb290KTtcblx0XHRcdGlmKCFvYmopIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMuZmxhdCAmJiAhZmxhdCkgeyBmbGF0ID0gW107IH1cblx0XHRcdHZhciB0bXAgPSB7XG5cdFx0XHRcdCdpZCcgOiBvYmouaWQsXG5cdFx0XHRcdCd0ZXh0JyA6IG9iai50ZXh0LFxuXHRcdFx0XHQnaWNvbicgOiB0aGlzLmdldF9pY29uKG9iaiksXG5cdFx0XHRcdCdsaV9hdHRyJyA6ICQuZXh0ZW5kKHRydWUsIHt9LCBvYmoubGlfYXR0ciksXG5cdFx0XHRcdCdhX2F0dHInIDogJC5leHRlbmQodHJ1ZSwge30sIG9iai5hX2F0dHIpLFxuXHRcdFx0XHQnc3RhdGUnIDoge30sXG5cdFx0XHRcdCdkYXRhJyA6IG9wdGlvbnMgJiYgb3B0aW9ucy5ub19kYXRhID8gZmFsc2UgOiAkLmV4dGVuZCh0cnVlLCB7fSwgb2JqLmRhdGEpXG5cdFx0XHRcdC8vKCB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSkubGVuZ3RoID8gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpLmRhdGEoKSA6IG9iai5kYXRhICksXG5cdFx0XHR9LCBpLCBqO1xuXHRcdFx0aWYob3B0aW9ucyAmJiBvcHRpb25zLmZsYXQpIHtcblx0XHRcdFx0dG1wLnBhcmVudCA9IG9iai5wYXJlbnQ7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dG1wLmNoaWxkcmVuID0gW107XG5cdFx0XHR9XG5cdFx0XHRpZighb3B0aW9ucyB8fCAhb3B0aW9ucy5ub19zdGF0ZSkge1xuXHRcdFx0XHRmb3IoaSBpbiBvYmouc3RhdGUpIHtcblx0XHRcdFx0XHRpZihvYmouc3RhdGUuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdHRtcC5zdGF0ZVtpXSA9IG9iai5zdGF0ZVtpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSB0bXAuc3RhdGU7XG5cdFx0XHR9XG5cdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMubm9fbGlfYXR0cikge1xuXHRcdFx0XHRkZWxldGUgdG1wLmxpX2F0dHI7XG5cdFx0XHR9XG5cdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMubm9fYV9hdHRyKSB7XG5cdFx0XHRcdGRlbGV0ZSB0bXAuYV9hdHRyO1xuXHRcdFx0fVxuXHRcdFx0aWYob3B0aW9ucyAmJiBvcHRpb25zLm5vX2lkKSB7XG5cdFx0XHRcdGRlbGV0ZSB0bXAuaWQ7XG5cdFx0XHRcdGlmKHRtcC5saV9hdHRyICYmIHRtcC5saV9hdHRyLmlkKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIHRtcC5saV9hdHRyLmlkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHRtcC5hX2F0dHIgJiYgdG1wLmFfYXR0ci5pZCkge1xuXHRcdFx0XHRcdGRlbGV0ZSB0bXAuYV9hdHRyLmlkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMuZmxhdCAmJiBvYmouaWQgIT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0ZmxhdC5wdXNoKHRtcCk7XG5cdFx0XHR9XG5cdFx0XHRpZighb3B0aW9ucyB8fCAhb3B0aW9ucy5ub19jaGlsZHJlbikge1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0aWYob3B0aW9ucyAmJiBvcHRpb25zLmZsYXQpIHtcblx0XHRcdFx0XHRcdHRoaXMuZ2V0X2pzb24ob2JqLmNoaWxkcmVuW2ldLCBvcHRpb25zLCBmbGF0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHR0bXAuY2hpbGRyZW4ucHVzaCh0aGlzLmdldF9qc29uKG9iai5jaGlsZHJlbltpXSwgb3B0aW9ucykpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5mbGF0ID8gZmxhdCA6IChvYmouaWQgPT09ICQuanN0cmVlLnJvb3QgPyB0bXAuY2hpbGRyZW4gOiB0bXApO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY3JlYXRlIGEgbmV3IG5vZGUgKGRvIG5vdCBjb25mdXNlIHdpdGggbG9hZF9ub2RlKVxuXHRcdCAqIEBuYW1lIGNyZWF0ZV9ub2RlKFtwYXIsIG5vZGUsIHBvcywgY2FsbGJhY2ssIGlzX2xvYWRlZF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9ICAgcGFyICAgICAgIHRoZSBwYXJlbnQgbm9kZSAodG8gY3JlYXRlIGEgcm9vdCBub2RlIHVzZSBlaXRoZXIgXCIjXCIgKHN0cmluZykgb3IgYG51bGxgKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSAgIG5vZGUgICAgICB0aGUgZGF0YSBmb3IgdGhlIG5ldyBub2RlIChhIHZhbGlkIEpTT04gb2JqZWN0LCBvciBhIHNpbXBsZSBzdHJpbmcgd2l0aCB0aGUgbmFtZSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gICBwb3MgICAgICAgdGhlIGluZGV4IGF0IHdoaWNoIHRvIGluc2VydCB0aGUgbm9kZSwgXCJmaXJzdFwiIGFuZCBcImxhc3RcIiBhcmUgYWxzbyBzdXBwb3J0ZWQsIGRlZmF1bHQgaXMgXCJsYXN0XCJcblx0XHQgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb25jZSB0aGUgbm9kZSBpcyBjcmVhdGVkXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gaXNfbG9hZGVkIGludGVybmFsIGFyZ3VtZW50IGluZGljYXRpbmcgaWYgdGhlIHBhcmVudCBub2RlIHdhcyBzdWNjZXNmdWxseSBsb2FkZWRcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgdGhlIElEIG9mIHRoZSBuZXdseSBjcmVhdGUgbm9kZVxuXHRcdCAqIEB0cmlnZ2VyIG1vZGVsLmpzdHJlZSwgY3JlYXRlX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0Y3JlYXRlX25vZGUgOiBmdW5jdGlvbiAocGFyLCBub2RlLCBwb3MsIGNhbGxiYWNrLCBpc19sb2FkZWQpIHtcblx0XHRcdGlmKHBhciA9PT0gbnVsbCkgeyBwYXIgPSAkLmpzdHJlZS5yb290OyB9XG5cdFx0XHRwYXIgPSB0aGlzLmdldF9ub2RlKHBhcik7XG5cdFx0XHRpZighcGFyKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0cG9zID0gcG9zID09PSB1bmRlZmluZWQgPyBcImxhc3RcIiA6IHBvcztcblx0XHRcdGlmKCFwb3MudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pICYmICFpc19sb2FkZWQgJiYgIXRoaXMuaXNfbG9hZGVkKHBhcikpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMubG9hZF9ub2RlKHBhciwgZnVuY3Rpb24gKCkgeyB0aGlzLmNyZWF0ZV9ub2RlKHBhciwgbm9kZSwgcG9zLCBjYWxsYmFjaywgdHJ1ZSk7IH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYoIW5vZGUpIHsgbm9kZSA9IHsgXCJ0ZXh0XCIgOiB0aGlzLmdldF9zdHJpbmcoJ05ldyBub2RlJykgfTsgfVxuXHRcdFx0aWYodHlwZW9mIG5vZGUgPT09IFwic3RyaW5nXCIpIHsgbm9kZSA9IHsgXCJ0ZXh0XCIgOiBub2RlIH07IH1cblx0XHRcdGlmKG5vZGUudGV4dCA9PT0gdW5kZWZpbmVkKSB7IG5vZGUudGV4dCA9IHRoaXMuZ2V0X3N0cmluZygnTmV3IG5vZGUnKTsgfVxuXHRcdFx0dmFyIHRtcCwgZHBjLCBpLCBqO1xuXG5cdFx0XHRpZihwYXIuaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0aWYocG9zID09PSBcImJlZm9yZVwiKSB7IHBvcyA9IFwiZmlyc3RcIjsgfVxuXHRcdFx0XHRpZihwb3MgPT09IFwiYWZ0ZXJcIikgeyBwb3MgPSBcImxhc3RcIjsgfVxuXHRcdFx0fVxuXHRcdFx0c3dpdGNoKHBvcykge1xuXHRcdFx0XHRjYXNlIFwiYmVmb3JlXCI6XG5cdFx0XHRcdFx0dG1wID0gdGhpcy5nZXRfbm9kZShwYXIucGFyZW50KTtcblx0XHRcdFx0XHRwb3MgPSAkLmluQXJyYXkocGFyLmlkLCB0bXAuY2hpbGRyZW4pO1xuXHRcdFx0XHRcdHBhciA9IHRtcDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImFmdGVyXCIgOlxuXHRcdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X25vZGUocGFyLnBhcmVudCk7XG5cdFx0XHRcdFx0cG9zID0gJC5pbkFycmF5KHBhci5pZCwgdG1wLmNoaWxkcmVuKSArIDE7XG5cdFx0XHRcdFx0cGFyID0gdG1wO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiaW5zaWRlXCI6XG5cdFx0XHRcdGNhc2UgXCJmaXJzdFwiOlxuXHRcdFx0XHRcdHBvcyA9IDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJsYXN0XCI6XG5cdFx0XHRcdFx0cG9zID0gcGFyLmNoaWxkcmVuLmxlbmd0aDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRpZighcG9zKSB7IHBvcyA9IDA7IH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmKHBvcyA+IHBhci5jaGlsZHJlbi5sZW5ndGgpIHsgcG9zID0gcGFyLmNoaWxkcmVuLmxlbmd0aDsgfVxuXHRcdFx0aWYoIW5vZGUuaWQpIHsgbm9kZS5pZCA9IHRydWU7IH1cblx0XHRcdGlmKCF0aGlzLmNoZWNrKFwiY3JlYXRlX25vZGVcIiwgbm9kZSwgcGFyLCBwb3MpKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYobm9kZS5pZCA9PT0gdHJ1ZSkgeyBkZWxldGUgbm9kZS5pZDsgfVxuXHRcdFx0bm9kZSA9IHRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbihub2RlLCBwYXIuaWQsIHBhci5wYXJlbnRzLmNvbmNhdCgpKTtcblx0XHRcdGlmKCFub2RlKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0dG1wID0gdGhpcy5nZXRfbm9kZShub2RlKTtcblx0XHRcdGRwYyA9IFtdO1xuXHRcdFx0ZHBjLnB1c2gobm9kZSk7XG5cdFx0XHRkcGMgPSBkcGMuY29uY2F0KHRtcC5jaGlsZHJlbl9kKTtcblx0XHRcdHRoaXMudHJpZ2dlcignbW9kZWwnLCB7IFwibm9kZXNcIiA6IGRwYywgXCJwYXJlbnRcIiA6IHBhci5pZCB9KTtcblxuXHRcdFx0cGFyLmNoaWxkcmVuX2QgPSBwYXIuY2hpbGRyZW5fZC5jb25jYXQoZHBjKTtcblx0XHRcdGZvcihpID0gMCwgaiA9IHBhci5wYXJlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9tb2RlbC5kYXRhW3Bhci5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kID0gdGhpcy5fbW9kZWwuZGF0YVtwYXIucGFyZW50c1tpXV0uY2hpbGRyZW5fZC5jb25jYXQoZHBjKTtcblx0XHRcdH1cblx0XHRcdG5vZGUgPSB0bXA7XG5cdFx0XHR0bXAgPSBbXTtcblx0XHRcdGZvcihpID0gMCwgaiA9IHBhci5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0dG1wW2kgPj0gcG9zID8gaSsxIDogaV0gPSBwYXIuY2hpbGRyZW5baV07XG5cdFx0XHR9XG5cdFx0XHR0bXBbcG9zXSA9IG5vZGUuaWQ7XG5cdFx0XHRwYXIuY2hpbGRyZW4gPSB0bXA7XG5cblx0XHRcdHRoaXMucmVkcmF3X25vZGUocGFyLCB0cnVlKTtcblx0XHRcdGlmKGNhbGxiYWNrKSB7IGNhbGxiYWNrLmNhbGwodGhpcywgdGhpcy5nZXRfbm9kZShub2RlKSk7IH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBub2RlIGlzIGNyZWF0ZWRcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgY3JlYXRlX25vZGUuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZVxuXHRcdFx0ICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudCB0aGUgcGFyZW50J3MgSURcblx0XHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiB0aGUgcG9zaXRpb24gb2YgdGhlIG5ldyBub2RlIGFtb25nIHRoZSBwYXJlbnQncyBjaGlsZHJlblxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2NyZWF0ZV9ub2RlJywgeyBcIm5vZGVcIiA6IHRoaXMuZ2V0X25vZGUobm9kZSksIFwicGFyZW50XCIgOiBwYXIuaWQsIFwicG9zaXRpb25cIiA6IHBvcyB9KTtcblx0XHRcdHJldHVybiBub2RlLmlkO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogc2V0IHRoZSB0ZXh0IHZhbHVlIG9mIGEgbm9kZVxuXHRcdCAqIEBuYW1lIHJlbmFtZV9ub2RlKG9iaiwgdmFsKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmogdGhlIG5vZGUsIHlvdSBjYW4gcGFzcyBhbiBhcnJheSB0byByZW5hbWUgbXVsdGlwbGUgbm9kZXMgdG8gdGhlIHNhbWUgbmFtZVxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gdmFsIHRoZSBuZXcgdGV4dCB2YWx1ZVxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICogQHRyaWdnZXIgcmVuYW1lX25vZGUuanN0cmVlXG5cdFx0ICovXG5cdFx0cmVuYW1lX25vZGUgOiBmdW5jdGlvbiAob2JqLCB2YWwpIHtcblx0XHRcdHZhciB0MSwgdDIsIG9sZDtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLnJlbmFtZV9ub2RlKG9ialt0MV0sIHZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdG9sZCA9IG9iai50ZXh0O1xuXHRcdFx0aWYoIXRoaXMuY2hlY2soXCJyZW5hbWVfbm9kZVwiLCBvYmosIHRoaXMuZ2V0X3BhcmVudChvYmopLCB2YWwpKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5zZXRfdGV4dChvYmosIHZhbCk7IC8vIC5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhIG5vZGUgaXMgcmVuYW1lZFxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSByZW5hbWVfbm9kZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgbmV3IHZhbHVlXG5cdFx0XHQgKiBAcGFyYW0ge1N0cmluZ30gb2xkIHRoZSBvbGQgdmFsdWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdyZW5hbWVfbm9kZScsIHsgXCJub2RlXCIgOiBvYmosIFwidGV4dFwiIDogdmFsLCBcIm9sZFwiIDogb2xkIH0pO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiByZW1vdmUgYSBub2RlXG5cdFx0ICogQG5hbWUgZGVsZXRlX25vZGUob2JqKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmogdGhlIG5vZGUsIHlvdSBjYW4gcGFzcyBhbiBhcnJheSB0byBkZWxldGUgbXVsdGlwbGUgbm9kZXNcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqIEB0cmlnZ2VyIGRlbGV0ZV9ub2RlLmpzdHJlZSwgY2hhbmdlZC5qc3RyZWVcblx0XHQgKi9cblx0XHRkZWxldGVfbm9kZSA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdHZhciB0MSwgdDIsIHBhciwgcG9zLCB0bXAsIGksIGosIGssIGwsIGMsIHRvcCwgbGZ0O1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0b2JqID0gb2JqLnNsaWNlKCk7XG5cdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdHRoaXMuZGVsZXRlX25vZGUob2JqW3QxXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdHBhciA9IHRoaXMuZ2V0X25vZGUob2JqLnBhcmVudCk7XG5cdFx0XHRwb3MgPSAkLmluQXJyYXkob2JqLmlkLCBwYXIuY2hpbGRyZW4pO1xuXHRcdFx0YyA9IGZhbHNlO1xuXHRcdFx0aWYoIXRoaXMuY2hlY2soXCJkZWxldGVfbm9kZVwiLCBvYmosIHBhciwgcG9zKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLCB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmKHBvcyAhPT0gLTEpIHtcblx0XHRcdFx0cGFyLmNoaWxkcmVuID0gJC52YWthdGEuYXJyYXlfcmVtb3ZlKHBhci5jaGlsZHJlbiwgcG9zKTtcblx0XHRcdH1cblx0XHRcdHRtcCA9IG9iai5jaGlsZHJlbl9kLmNvbmNhdChbXSk7XG5cdFx0XHR0bXAucHVzaChvYmouaWQpO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLnBhcmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbb2JqLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QgPSAkLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fbW9kZWwuZGF0YVtvYmoucGFyZW50c1tpXV0uY2hpbGRyZW5fZCwgZnVuY3Rpb24gKHYpIHtcblx0XHRcdFx0XHRyZXR1cm4gJC5pbkFycmF5KHYsIHRtcCkgPT09IC0xO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGZvcihrID0gMCwgbCA9IHRtcC5sZW5ndGg7IGsgPCBsOyBrKyspIHtcblx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVt0bXBba11dLnN0YXRlLnNlbGVjdGVkKSB7XG5cdFx0XHRcdFx0YyA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChjKSB7XG5cdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCA9ICQudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsIGZ1bmN0aW9uICh2KSB7XG5cdFx0XHRcdFx0cmV0dXJuICQuaW5BcnJheSh2LCB0bXApID09PSAtMTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGEgbm9kZSBpcyBkZWxldGVkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGRlbGV0ZV9ub2RlLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnQgdGhlIHBhcmVudCdzIElEXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignZGVsZXRlX25vZGUnLCB7IFwibm9kZVwiIDogb2JqLCBcInBhcmVudFwiIDogcGFyLmlkIH0pO1xuXHRcdFx0aWYoYykge1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7ICdhY3Rpb24nIDogJ2RlbGV0ZV9ub2RlJywgJ25vZGUnIDogb2JqLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLCAncGFyZW50JyA6IHBhci5pZCB9KTtcblx0XHRcdH1cblx0XHRcdGZvcihrID0gMCwgbCA9IHRtcC5sZW5ndGg7IGsgPCBsOyBrKyspIHtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuX21vZGVsLmRhdGFbdG1wW2tdXTtcblx0XHRcdH1cblx0XHRcdGlmKCQuaW5BcnJheSh0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCwgdG1wKSAhPT0gLTEpIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgPSBudWxsO1xuXHRcdFx0XHR0b3AgPSB0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wO1xuXHRcdFx0XHRsZnQgPSB0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdDtcblx0XHRcdFx0aWYocGFyLmlkID09PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX21vZGVsLmRhdGFbJC5qc3RyZWUucm9vdF0uY2hpbGRyZW5bMF0pIHtcblx0XHRcdFx0XHRcdHRoaXMuZ2V0X25vZGUodGhpcy5fbW9kZWwuZGF0YVskLmpzdHJlZS5yb290XS5jaGlsZHJlblswXSwgdHJ1ZSkuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuZm9jdXMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5nZXRfbm9kZShwYXIsIHRydWUpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmZvY3VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCAgPSB0b3A7XG5cdFx0XHRcdHRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0ID0gbGZ0O1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5yZWRyYXdfbm9kZShwYXIsIHRydWUpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjaGVjayBpZiBhbiBvcGVyYXRpb24gaXMgcHJlbWl0dGVkIG9uIHRoZSB0cmVlLiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBjaGVjayhjaGssIG9iaiwgcGFyLCBwb3MpXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nfSBjaGsgdGhlIG9wZXJhdGlvbiB0byBjaGVjaywgY2FuIGJlIFwiY3JlYXRlX25vZGVcIiwgXCJyZW5hbWVfbm9kZVwiLCBcImRlbGV0ZV9ub2RlXCIsIFwiY29weV9ub2RlXCIgb3IgXCJtb3ZlX25vZGVcIlxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmogdGhlIG5vZGVcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gcGFyIHRoZSBwYXJlbnRcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gcG9zIHRoZSBwb3NpdGlvbiB0byBpbnNlcnQgYXQsIG9yIGlmIFwicmVuYW1lX25vZGVcIiAtIHRoZSBuZXcgbmFtZVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBtb3JlIHNvbWUgdmFyaW91cyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBmb3IgZXhhbXBsZSBpZiBhIFwibW92ZV9ub2RlXCIgb3BlcmF0aW9ucyBpcyB0cmlnZ2VyZWQgYnkgRE5EIHRoaXMgd2lsbCBiZSB0aGUgaG92ZXJlZCBub2RlXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRjaGVjayA6IGZ1bmN0aW9uIChjaGssIG9iaiwgcGFyLCBwb3MsIG1vcmUpIHtcblx0XHRcdG9iaiA9IG9iaiAmJiBvYmouaWQgPyBvYmogOiB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRwYXIgPSBwYXIgJiYgcGFyLmlkID8gcGFyIDogdGhpcy5nZXRfbm9kZShwYXIpO1xuXHRcdFx0dmFyIHRtcCA9IGNoay5tYXRjaCgvXm1vdmVfbm9kZXxjb3B5X25vZGV8Y3JlYXRlX25vZGUkL2kpID8gcGFyIDogb2JqLFxuXHRcdFx0XHRjaGMgPSB0aGlzLnNldHRpbmdzLmNvcmUuY2hlY2tfY2FsbGJhY2s7XG5cdFx0XHRpZihjaGsgPT09IFwibW92ZV9ub2RlXCIgfHwgY2hrID09PSBcImNvcHlfbm9kZVwiKSB7XG5cdFx0XHRcdGlmKCghbW9yZSB8fCAhbW9yZS5pc19tdWx0aSkgJiYgKG9iai5pZCA9PT0gcGFyLmlkIHx8IChjaGsgPT09IFwibW92ZV9ub2RlXCIgJiYgJC5pbkFycmF5KG9iai5pZCwgcGFyLmNoaWxkcmVuKSA9PT0gcG9zKSB8fCAkLmluQXJyYXkocGFyLmlkLCBvYmouY2hpbGRyZW5fZCkgIT09IC0xKSkge1xuXHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yID0geyAnZXJyb3InIDogJ2NoZWNrJywgJ3BsdWdpbicgOiAnY29yZScsICdpZCcgOiAnY29yZV8wMScsICdyZWFzb24nIDogJ01vdmluZyBwYXJlbnQgaW5zaWRlIGNoaWxkJywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnY2hrJyA6IGNoaywgJ3BvcycgOiBwb3MsICdvYmonIDogb2JqICYmIG9iai5pZCA/IG9iai5pZCA6IGZhbHNlLCAncGFyJyA6IHBhciAmJiBwYXIuaWQgPyBwYXIuaWQgOiBmYWxzZSB9KSB9O1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYodG1wICYmIHRtcC5kYXRhKSB7IHRtcCA9IHRtcC5kYXRhOyB9XG5cdFx0XHRpZih0bXAgJiYgdG1wLmZ1bmN0aW9ucyAmJiAodG1wLmZ1bmN0aW9uc1tjaGtdID09PSBmYWxzZSB8fCB0bXAuZnVuY3Rpb25zW2Noa10gPT09IHRydWUpKSB7XG5cdFx0XHRcdGlmKHRtcC5mdW5jdGlvbnNbY2hrXSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciA9IHsgJ2Vycm9yJyA6ICdjaGVjaycsICdwbHVnaW4nIDogJ2NvcmUnLCAnaWQnIDogJ2NvcmVfMDInLCAncmVhc29uJyA6ICdOb2RlIGRhdGEgcHJldmVudHMgZnVuY3Rpb246ICcgKyBjaGssICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2NoaycgOiBjaGssICdwb3MnIDogcG9zLCAnb2JqJyA6IG9iaiAmJiBvYmouaWQgPyBvYmouaWQgOiBmYWxzZSwgJ3BhcicgOiBwYXIgJiYgcGFyLmlkID8gcGFyLmlkIDogZmFsc2UgfSkgfTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdG1wLmZ1bmN0aW9uc1tjaGtdO1xuXHRcdFx0fVxuXHRcdFx0aWYoY2hjID09PSBmYWxzZSB8fCAoJC5pc0Z1bmN0aW9uKGNoYykgJiYgY2hjLmNhbGwodGhpcywgY2hrLCBvYmosIHBhciwgcG9zLCBtb3JlKSA9PT0gZmFsc2UpIHx8IChjaGMgJiYgY2hjW2Noa10gPT09IGZhbHNlKSkge1xuXHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciA9IHsgJ2Vycm9yJyA6ICdjaGVjaycsICdwbHVnaW4nIDogJ2NvcmUnLCAnaWQnIDogJ2NvcmVfMDMnLCAncmVhc29uJyA6ICdVc2VyIGNvbmZpZyBmb3IgY29yZS5jaGVja19jYWxsYmFjayBwcmV2ZW50cyBmdW5jdGlvbjogJyArIGNoaywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnY2hrJyA6IGNoaywgJ3BvcycgOiBwb3MsICdvYmonIDogb2JqICYmIG9iai5pZCA/IG9iai5pZCA6IGZhbHNlLCAncGFyJyA6IHBhciAmJiBwYXIuaWQgPyBwYXIuaWQgOiBmYWxzZSB9KSB9O1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldCB0aGUgbGFzdCBlcnJvclxuXHRcdCAqIEBuYW1lIGxhc3RfZXJyb3IoKVxuXHRcdCAqIEByZXR1cm4ge09iamVjdH1cblx0XHQgKi9cblx0XHRsYXN0X2Vycm9yIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogbW92ZSBhIG5vZGUgdG8gYSBuZXcgcGFyZW50XG5cdFx0ICogQG5hbWUgbW92ZV9ub2RlKG9iaiwgcGFyIFssIHBvcywgY2FsbGJhY2ssIGlzX2xvYWRlZF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBtb3ZlLCBwYXNzIGFuIGFycmF5IHRvIG1vdmUgbXVsdGlwbGUgbm9kZXNcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gcGFyIHRoZSBuZXcgcGFyZW50XG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IHBvcyB0aGUgcG9zaXRpb24gdG8gaW5zZXJ0IGF0IChiZXNpZGVzIGludGVnZXIgdmFsdWVzLCBcImZpcnN0XCIgYW5kIFwibGFzdFwiIGFyZSBzdXBwb3J0ZWQsIGFzIHdlbGwgYXMgXCJiZWZvcmVcIiBhbmQgXCJhZnRlclwiKSwgZGVmYXVsdHMgdG8gaW50ZWdlciBgMGBcblx0XHQgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBjYWxsIG9uY2UgdGhlIG1vdmUgaXMgY29tcGxldGVkLCByZWNlaXZlcyAzIGFyZ3VtZW50cyAtIHRoZSBub2RlLCB0aGUgbmV3IHBhcmVudCBhbmQgdGhlIHBvc2l0aW9uXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gaXNfbG9hZGVkIGludGVybmFsIHBhcmFtZXRlciBpbmRpY2F0aW5nIGlmIHRoZSBwYXJlbnQgbm9kZSBoYXMgYmVlbiBsb2FkZWRcblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwX3JlZHJhdyBpbnRlcm5hbCBwYXJhbWV0ZXIgaW5kaWNhdGluZyBpZiB0aGUgdHJlZSBzaG91bGQgYmUgcmVkcmF3blxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGluc3RhbmNlIGludGVybmFsIHBhcmFtZXRlciBpbmRpY2F0aW5nIGlmIHRoZSBub2RlIGNvbWVzIGZyb20gYW5vdGhlciBpbnN0YW5jZVxuXHRcdCAqIEB0cmlnZ2VyIG1vdmVfbm9kZS5qc3RyZWVcblx0XHQgKi9cblx0XHRtb3ZlX25vZGUgOiBmdW5jdGlvbiAob2JqLCBwYXIsIHBvcywgY2FsbGJhY2ssIGlzX2xvYWRlZCwgc2tpcF9yZWRyYXcsIG9yaWdpbikge1xuXHRcdFx0dmFyIHQxLCB0Miwgb2xkX3Bhciwgb2xkX3BvcywgbmV3X3Bhciwgb2xkX2lucywgaXNfbXVsdGksIGRwYywgdG1wLCBpLCBqLCBrLCBsLCBwO1xuXG5cdFx0XHRwYXIgPSB0aGlzLmdldF9ub2RlKHBhcik7XG5cdFx0XHRwb3MgPSBwb3MgPT09IHVuZGVmaW5lZCA/IDAgOiBwb3M7XG5cdFx0XHRpZighcGFyKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0aWYoIXBvcy50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykgJiYgIWlzX2xvYWRlZCAmJiAhdGhpcy5pc19sb2FkZWQocGFyKSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5sb2FkX25vZGUocGFyLCBmdW5jdGlvbiAoKSB7IHRoaXMubW92ZV9ub2RlKG9iaiwgcGFyLCBwb3MsIGNhbGxiYWNrLCB0cnVlLCBmYWxzZSwgb3JpZ2luKTsgfSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdGlmKG9iai5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHRvYmogPSBvYmpbMF07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9vYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHRcdGlmKCh0bXAgPSB0aGlzLm1vdmVfbm9kZShvYmpbdDFdLCBwYXIsIHBvcywgY2FsbGJhY2ssIGlzX2xvYWRlZCwgZmFsc2UsIG9yaWdpbikpKSB7XG5cdFx0XHRcdFx0XHRcdHBhciA9IHRtcDtcblx0XHRcdFx0XHRcdFx0cG9zID0gXCJhZnRlclwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvYmogPSBvYmogJiYgb2JqLmlkID8gb2JqIDogdGhpcy5nZXRfbm9kZShvYmopO1xuXG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRcdFx0b2xkX3BhciA9IChvYmoucGFyZW50IHx8ICQuanN0cmVlLnJvb3QpLnRvU3RyaW5nKCk7XG5cdFx0XHRuZXdfcGFyID0gKCFwb3MudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pIHx8IHBhci5pZCA9PT0gJC5qc3RyZWUucm9vdCkgPyBwYXIgOiB0aGlzLmdldF9ub2RlKHBhci5wYXJlbnQpO1xuXHRcdFx0b2xkX2lucyA9IG9yaWdpbiA/IG9yaWdpbiA6ICh0aGlzLl9tb2RlbC5kYXRhW29iai5pZF0gPyB0aGlzIDogJC5qc3RyZWUucmVmZXJlbmNlKG9iai5pZCkpO1xuXHRcdFx0aXNfbXVsdGkgPSAhb2xkX2lucyB8fCAhb2xkX2lucy5faWQgfHwgKHRoaXMuX2lkICE9PSBvbGRfaW5zLl9pZCk7XG5cdFx0XHRvbGRfcG9zID0gb2xkX2lucyAmJiBvbGRfaW5zLl9pZCAmJiBvbGRfcGFyICYmIG9sZF9pbnMuX21vZGVsLmRhdGFbb2xkX3Bhcl0gJiYgb2xkX2lucy5fbW9kZWwuZGF0YVtvbGRfcGFyXS5jaGlsZHJlbiA/ICQuaW5BcnJheShvYmouaWQsIG9sZF9pbnMuX21vZGVsLmRhdGFbb2xkX3Bhcl0uY2hpbGRyZW4pIDogLTE7XG5cdFx0XHRpZihvbGRfaW5zICYmIG9sZF9pbnMuX2lkKSB7XG5cdFx0XHRcdG9iaiA9IG9sZF9pbnMuX21vZGVsLmRhdGFbb2JqLmlkXTtcblx0XHRcdH1cblxuXHRcdFx0aWYoaXNfbXVsdGkpIHtcblx0XHRcdFx0aWYoKHRtcCA9IHRoaXMuY29weV9ub2RlKG9iaiwgcGFyLCBwb3MsIGNhbGxiYWNrLCBpc19sb2FkZWQsIGZhbHNlLCBvcmlnaW4pKSkge1xuXHRcdFx0XHRcdGlmKG9sZF9pbnMpIHsgb2xkX2lucy5kZWxldGVfbm9kZShvYmopOyB9XG5cdFx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvL3ZhciBtID0gdGhpcy5fbW9kZWwuZGF0YTtcblx0XHRcdGlmKHBhci5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRpZihwb3MgPT09IFwiYmVmb3JlXCIpIHsgcG9zID0gXCJmaXJzdFwiOyB9XG5cdFx0XHRcdGlmKHBvcyA9PT0gXCJhZnRlclwiKSB7IHBvcyA9IFwibGFzdFwiOyB9XG5cdFx0XHR9XG5cdFx0XHRzd2l0Y2gocG9zKSB7XG5cdFx0XHRcdGNhc2UgXCJiZWZvcmVcIjpcblx0XHRcdFx0XHRwb3MgPSAkLmluQXJyYXkocGFyLmlkLCBuZXdfcGFyLmNoaWxkcmVuKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImFmdGVyXCIgOlxuXHRcdFx0XHRcdHBvcyA9ICQuaW5BcnJheShwYXIuaWQsIG5ld19wYXIuY2hpbGRyZW4pICsgMTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImluc2lkZVwiOlxuXHRcdFx0XHRjYXNlIFwiZmlyc3RcIjpcblx0XHRcdFx0XHRwb3MgPSAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwibGFzdFwiOlxuXHRcdFx0XHRcdHBvcyA9IG5ld19wYXIuY2hpbGRyZW4ubGVuZ3RoO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGlmKCFwb3MpIHsgcG9zID0gMDsgfVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYocG9zID4gbmV3X3Bhci5jaGlsZHJlbi5sZW5ndGgpIHsgcG9zID0gbmV3X3Bhci5jaGlsZHJlbi5sZW5ndGg7IH1cblx0XHRcdGlmKCF0aGlzLmNoZWNrKFwibW92ZV9ub2RlXCIsIG9iaiwgbmV3X3BhciwgcG9zLCB7ICdjb3JlJyA6IHRydWUsICdvcmlnaW4nIDogb3JpZ2luLCAnaXNfbXVsdGknIDogKG9sZF9pbnMgJiYgb2xkX2lucy5faWQgJiYgb2xkX2lucy5faWQgIT09IHRoaXMuX2lkKSwgJ2lzX2ZvcmVpZ24nIDogKCFvbGRfaW5zIHx8ICFvbGRfaW5zLl9pZCkgfSkpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcywgdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihvYmoucGFyZW50ID09PSBuZXdfcGFyLmlkKSB7XG5cdFx0XHRcdGRwYyA9IG5ld19wYXIuY2hpbGRyZW4uY29uY2F0KCk7XG5cdFx0XHRcdHRtcCA9ICQuaW5BcnJheShvYmouaWQsIGRwYyk7XG5cdFx0XHRcdGlmKHRtcCAhPT0gLTEpIHtcblx0XHRcdFx0XHRkcGMgPSAkLnZha2F0YS5hcnJheV9yZW1vdmUoZHBjLCB0bXApO1xuXHRcdFx0XHRcdGlmKHBvcyA+IHRtcCkgeyBwb3MtLTsgfVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRtcCA9IFtdO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBkcGMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0dG1wW2kgPj0gcG9zID8gaSsxIDogaV0gPSBkcGNbaV07XG5cdFx0XHRcdH1cblx0XHRcdFx0dG1wW3Bvc10gPSBvYmouaWQ7XG5cdFx0XHRcdG5ld19wYXIuY2hpbGRyZW4gPSB0bXA7XG5cdFx0XHRcdHRoaXMuX25vZGVfY2hhbmdlZChuZXdfcGFyLmlkKTtcblx0XHRcdFx0dGhpcy5yZWRyYXcobmV3X3Bhci5pZCA9PT0gJC5qc3RyZWUucm9vdCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Ly8gY2xlYW4gb2xkIHBhcmVudCBhbmQgdXBcblx0XHRcdFx0dG1wID0gb2JqLmNoaWxkcmVuX2QuY29uY2F0KCk7XG5cdFx0XHRcdHRtcC5wdXNoKG9iai5pZCk7XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5wYXJlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGRwYyA9IFtdO1xuXHRcdFx0XHRcdHAgPSBvbGRfaW5zLl9tb2RlbC5kYXRhW29iai5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kO1xuXHRcdFx0XHRcdGZvcihrID0gMCwgbCA9IHAubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0XHRpZigkLmluQXJyYXkocFtrXSwgdG1wKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0ZHBjLnB1c2gocFtrXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG9sZF9pbnMuX21vZGVsLmRhdGFbb2JqLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QgPSBkcGM7XG5cdFx0XHRcdH1cblx0XHRcdFx0b2xkX2lucy5fbW9kZWwuZGF0YVtvbGRfcGFyXS5jaGlsZHJlbiA9ICQudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKG9sZF9pbnMuX21vZGVsLmRhdGFbb2xkX3Bhcl0uY2hpbGRyZW4sIG9iai5pZCk7XG5cblx0XHRcdFx0Ly8gaW5zZXJ0IGludG8gbmV3IHBhcmVudCBhbmQgdXBcblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gbmV3X3Bhci5wYXJlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbbmV3X3Bhci5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kID0gdGhpcy5fbW9kZWwuZGF0YVtuZXdfcGFyLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QuY29uY2F0KHRtcCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZHBjID0gW107XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IG5ld19wYXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0ZHBjW2kgPj0gcG9zID8gaSsxIDogaV0gPSBuZXdfcGFyLmNoaWxkcmVuW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRwY1twb3NdID0gb2JqLmlkO1xuXHRcdFx0XHRuZXdfcGFyLmNoaWxkcmVuID0gZHBjO1xuXHRcdFx0XHRuZXdfcGFyLmNoaWxkcmVuX2QucHVzaChvYmouaWQpO1xuXHRcdFx0XHRuZXdfcGFyLmNoaWxkcmVuX2QgPSBuZXdfcGFyLmNoaWxkcmVuX2QuY29uY2F0KG9iai5jaGlsZHJlbl9kKTtcblxuXHRcdFx0XHQvLyB1cGRhdGUgb2JqZWN0XG5cdFx0XHRcdG9iai5wYXJlbnQgPSBuZXdfcGFyLmlkO1xuXHRcdFx0XHR0bXAgPSBuZXdfcGFyLnBhcmVudHMuY29uY2F0KCk7XG5cdFx0XHRcdHRtcC51bnNoaWZ0KG5ld19wYXIuaWQpO1xuXHRcdFx0XHRwID0gb2JqLnBhcmVudHMubGVuZ3RoO1xuXHRcdFx0XHRvYmoucGFyZW50cyA9IHRtcDtcblxuXHRcdFx0XHQvLyB1cGRhdGUgb2JqZWN0IGNoaWxkcmVuXG5cdFx0XHRcdHRtcCA9IHRtcC5jb25jYXQoKTtcblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5fbW9kZWwuZGF0YVtvYmouY2hpbGRyZW5fZFtpXV0ucGFyZW50cyA9IHRoaXMuX21vZGVsLmRhdGFbb2JqLmNoaWxkcmVuX2RbaV1dLnBhcmVudHMuc2xpY2UoMCxwKi0xKTtcblx0XHRcdFx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLl9tb2RlbC5kYXRhW29iai5jaGlsZHJlbl9kW2ldXS5wYXJlbnRzLCB0bXApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYob2xkX3BhciA9PT0gJC5qc3RyZWUucm9vdCB8fCBuZXdfcGFyLmlkID09PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0dGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXcgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCF0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdykge1xuXHRcdFx0XHRcdHRoaXMuX25vZGVfY2hhbmdlZChvbGRfcGFyKTtcblx0XHRcdFx0XHR0aGlzLl9ub2RlX2NoYW5nZWQobmV3X3Bhci5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIXNraXBfcmVkcmF3KSB7XG5cdFx0XHRcdFx0dGhpcy5yZWRyYXcoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoY2FsbGJhY2spIHsgY2FsbGJhY2suY2FsbCh0aGlzLCBvYmosIG5ld19wYXIsIHBvcyk7IH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBub2RlIGlzIG1vdmVkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIG1vdmVfbm9kZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlXG5cdFx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcGFyZW50IHRoZSBwYXJlbnQncyBJRFxuXHRcdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIHRoZSBwb3NpdGlvbiBvZiB0aGUgbm9kZSBhbW9uZyB0aGUgcGFyZW50J3MgY2hpbGRyZW5cblx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBvbGRfcGFyZW50IHRoZSBvbGQgcGFyZW50IG9mIHRoZSBub2RlXG5cdFx0XHQgKiBAcGFyYW0ge051bWJlcn0gb2xkX3Bvc2l0aW9uIHRoZSBvbGQgcG9zaXRpb24gb2YgdGhlIG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNfbXVsdGkgZG8gdGhlIG5vZGUgYW5kIG5ldyBwYXJlbnQgYmVsb25nIHRvIGRpZmZlcmVudCBpbnN0YW5jZXNcblx0XHRcdCAqIEBwYXJhbSB7anNUcmVlfSBvbGRfaW5zdGFuY2UgdGhlIGluc3RhbmNlIHRoZSBub2RlIGNhbWUgZnJvbVxuXHRcdFx0ICogQHBhcmFtIHtqc1RyZWV9IG5ld19pbnN0YW5jZSB0aGUgaW5zdGFuY2Ugb2YgdGhlIG5ldyBwYXJlbnRcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdtb3ZlX25vZGUnLCB7IFwibm9kZVwiIDogb2JqLCBcInBhcmVudFwiIDogbmV3X3Bhci5pZCwgXCJwb3NpdGlvblwiIDogcG9zLCBcIm9sZF9wYXJlbnRcIiA6IG9sZF9wYXIsIFwib2xkX3Bvc2l0aW9uXCIgOiBvbGRfcG9zLCAnaXNfbXVsdGknIDogKG9sZF9pbnMgJiYgb2xkX2lucy5faWQgJiYgb2xkX2lucy5faWQgIT09IHRoaXMuX2lkKSwgJ2lzX2ZvcmVpZ24nIDogKCFvbGRfaW5zIHx8ICFvbGRfaW5zLl9pZCksICdvbGRfaW5zdGFuY2UnIDogb2xkX2lucywgJ25ld19pbnN0YW5jZScgOiB0aGlzIH0pO1xuXHRcdFx0cmV0dXJuIG9iai5pZDtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNvcHkgYSBub2RlIHRvIGEgbmV3IHBhcmVudFxuXHRcdCAqIEBuYW1lIGNvcHlfbm9kZShvYmosIHBhciBbLCBwb3MsIGNhbGxiYWNrLCBpc19sb2FkZWRdKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBvYmogdGhlIG5vZGUgdG8gY29weSwgcGFzcyBhbiBhcnJheSB0byBjb3B5IG11bHRpcGxlIG5vZGVzXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IHBhciB0aGUgbmV3IHBhcmVudFxuXHRcdCAqIEBwYXJhbSAge21peGVkfSBwb3MgdGhlIHBvc2l0aW9uIHRvIGluc2VydCBhdCAoYmVzaWRlcyBpbnRlZ2VyIHZhbHVlcywgXCJmaXJzdFwiIGFuZCBcImxhc3RcIiBhcmUgc3VwcG9ydGVkLCBhcyB3ZWxsIGFzIFwiYmVmb3JlXCIgYW5kIFwiYWZ0ZXJcIiksIGRlZmF1bHRzIHRvIGludGVnZXIgYDBgXG5cdFx0ICogQHBhcmFtICB7ZnVuY3Rpb259IGNhbGxiYWNrIGEgZnVuY3Rpb24gdG8gY2FsbCBvbmNlIHRoZSBtb3ZlIGlzIGNvbXBsZXRlZCwgcmVjZWl2ZXMgMyBhcmd1bWVudHMgLSB0aGUgbm9kZSwgdGhlIG5ldyBwYXJlbnQgYW5kIHRoZSBwb3NpdGlvblxuXHRcdCAqIEBwYXJhbSAge0Jvb2xlYW59IGlzX2xvYWRlZCBpbnRlcm5hbCBwYXJhbWV0ZXIgaW5kaWNhdGluZyBpZiB0aGUgcGFyZW50IG5vZGUgaGFzIGJlZW4gbG9hZGVkXG5cdFx0ICogQHBhcmFtICB7Qm9vbGVhbn0gc2tpcF9yZWRyYXcgaW50ZXJuYWwgcGFyYW1ldGVyIGluZGljYXRpbmcgaWYgdGhlIHRyZWUgc2hvdWxkIGJlIHJlZHJhd25cblx0XHQgKiBAcGFyYW0gIHtCb29sZWFufSBpbnN0YW5jZSBpbnRlcm5hbCBwYXJhbWV0ZXIgaW5kaWNhdGluZyBpZiB0aGUgbm9kZSBjb21lcyBmcm9tIGFub3RoZXIgaW5zdGFuY2Vcblx0XHQgKiBAdHJpZ2dlciBtb2RlbC5qc3RyZWUgY29weV9ub2RlLmpzdHJlZVxuXHRcdCAqL1xuXHRcdGNvcHlfbm9kZSA6IGZ1bmN0aW9uIChvYmosIHBhciwgcG9zLCBjYWxsYmFjaywgaXNfbG9hZGVkLCBza2lwX3JlZHJhdywgb3JpZ2luKSB7XG5cdFx0XHR2YXIgdDEsIHQyLCBkcGMsIHRtcCwgaSwgaiwgbm9kZSwgb2xkX3BhciwgbmV3X3Bhciwgb2xkX2lucywgaXNfbXVsdGk7XG5cblx0XHRcdHBhciA9IHRoaXMuZ2V0X25vZGUocGFyKTtcblx0XHRcdHBvcyA9IHBvcyA9PT0gdW5kZWZpbmVkID8gMCA6IHBvcztcblx0XHRcdGlmKCFwYXIpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHRpZighcG9zLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSAmJiAhaXNfbG9hZGVkICYmICF0aGlzLmlzX2xvYWRlZChwYXIpKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmxvYWRfbm9kZShwYXIsIGZ1bmN0aW9uICgpIHsgdGhpcy5jb3B5X25vZGUob2JqLCBwYXIsIHBvcywgY2FsbGJhY2ssIHRydWUsIGZhbHNlLCBvcmlnaW4pOyB9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0aWYob2JqLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdG9iaiA9IG9ialswXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL29iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdFx0aWYoKHRtcCA9IHRoaXMuY29weV9ub2RlKG9ialt0MV0sIHBhciwgcG9zLCBjYWxsYmFjaywgaXNfbG9hZGVkLCB0cnVlLCBvcmlnaW4pKSkge1xuXHRcdFx0XHRcdFx0XHRwYXIgPSB0bXA7XG5cdFx0XHRcdFx0XHRcdHBvcyA9IFwiYWZ0ZXJcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5yZWRyYXcoKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b2JqID0gb2JqICYmIG9iai5pZCA/IG9iaiA6IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgb2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdFx0XHRvbGRfcGFyID0gKG9iai5wYXJlbnQgfHwgJC5qc3RyZWUucm9vdCkudG9TdHJpbmcoKTtcblx0XHRcdG5ld19wYXIgPSAoIXBvcy50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykgfHwgcGFyLmlkID09PSAkLmpzdHJlZS5yb290KSA/IHBhciA6IHRoaXMuZ2V0X25vZGUocGFyLnBhcmVudCk7XG5cdFx0XHRvbGRfaW5zID0gb3JpZ2luID8gb3JpZ2luIDogKHRoaXMuX21vZGVsLmRhdGFbb2JqLmlkXSA/IHRoaXMgOiAkLmpzdHJlZS5yZWZlcmVuY2Uob2JqLmlkKSk7XG5cdFx0XHRpc19tdWx0aSA9ICFvbGRfaW5zIHx8ICFvbGRfaW5zLl9pZCB8fCAodGhpcy5faWQgIT09IG9sZF9pbnMuX2lkKTtcblxuXHRcdFx0aWYob2xkX2lucyAmJiBvbGRfaW5zLl9pZCkge1xuXHRcdFx0XHRvYmogPSBvbGRfaW5zLl9tb2RlbC5kYXRhW29iai5pZF07XG5cdFx0XHR9XG5cblx0XHRcdGlmKHBhci5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRpZihwb3MgPT09IFwiYmVmb3JlXCIpIHsgcG9zID0gXCJmaXJzdFwiOyB9XG5cdFx0XHRcdGlmKHBvcyA9PT0gXCJhZnRlclwiKSB7IHBvcyA9IFwibGFzdFwiOyB9XG5cdFx0XHR9XG5cdFx0XHRzd2l0Y2gocG9zKSB7XG5cdFx0XHRcdGNhc2UgXCJiZWZvcmVcIjpcblx0XHRcdFx0XHRwb3MgPSAkLmluQXJyYXkocGFyLmlkLCBuZXdfcGFyLmNoaWxkcmVuKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImFmdGVyXCIgOlxuXHRcdFx0XHRcdHBvcyA9ICQuaW5BcnJheShwYXIuaWQsIG5ld19wYXIuY2hpbGRyZW4pICsgMTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImluc2lkZVwiOlxuXHRcdFx0XHRjYXNlIFwiZmlyc3RcIjpcblx0XHRcdFx0XHRwb3MgPSAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwibGFzdFwiOlxuXHRcdFx0XHRcdHBvcyA9IG5ld19wYXIuY2hpbGRyZW4ubGVuZ3RoO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGlmKCFwb3MpIHsgcG9zID0gMDsgfVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYocG9zID4gbmV3X3Bhci5jaGlsZHJlbi5sZW5ndGgpIHsgcG9zID0gbmV3X3Bhci5jaGlsZHJlbi5sZW5ndGg7IH1cblx0XHRcdGlmKCF0aGlzLmNoZWNrKFwiY29weV9ub2RlXCIsIG9iaiwgbmV3X3BhciwgcG9zLCB7ICdjb3JlJyA6IHRydWUsICdvcmlnaW4nIDogb3JpZ2luLCAnaXNfbXVsdGknIDogKG9sZF9pbnMgJiYgb2xkX2lucy5faWQgJiYgb2xkX2lucy5faWQgIT09IHRoaXMuX2lkKSwgJ2lzX2ZvcmVpZ24nIDogKCFvbGRfaW5zIHx8ICFvbGRfaW5zLl9pZCkgfSkpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcywgdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRub2RlID0gb2xkX2lucyA/IG9sZF9pbnMuZ2V0X2pzb24ob2JqLCB7IG5vX2lkIDogdHJ1ZSwgbm9fZGF0YSA6IHRydWUsIG5vX3N0YXRlIDogdHJ1ZSB9KSA6IG9iajtcblx0XHRcdGlmKCFub2RlKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0aWYobm9kZS5pZCA9PT0gdHJ1ZSkgeyBkZWxldGUgbm9kZS5pZDsgfVxuXHRcdFx0bm9kZSA9IHRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbihub2RlLCBuZXdfcGFyLmlkLCBuZXdfcGFyLnBhcmVudHMuY29uY2F0KCkpO1xuXHRcdFx0aWYoIW5vZGUpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKG5vZGUpO1xuXHRcdFx0aWYob2JqICYmIG9iai5zdGF0ZSAmJiBvYmouc3RhdGUubG9hZGVkID09PSBmYWxzZSkgeyB0bXAuc3RhdGUubG9hZGVkID0gZmFsc2U7IH1cblx0XHRcdGRwYyA9IFtdO1xuXHRcdFx0ZHBjLnB1c2gobm9kZSk7XG5cdFx0XHRkcGMgPSBkcGMuY29uY2F0KHRtcC5jaGlsZHJlbl9kKTtcblx0XHRcdHRoaXMudHJpZ2dlcignbW9kZWwnLCB7IFwibm9kZXNcIiA6IGRwYywgXCJwYXJlbnRcIiA6IG5ld19wYXIuaWQgfSk7XG5cblx0XHRcdC8vIGluc2VydCBpbnRvIG5ldyBwYXJlbnQgYW5kIHVwXG5cdFx0XHRmb3IoaSA9IDAsIGogPSBuZXdfcGFyLnBhcmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbbmV3X3Bhci5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kID0gdGhpcy5fbW9kZWwuZGF0YVtuZXdfcGFyLnBhcmVudHNbaV1dLmNoaWxkcmVuX2QuY29uY2F0KGRwYyk7XG5cdFx0XHR9XG5cdFx0XHRkcGMgPSBbXTtcblx0XHRcdGZvcihpID0gMCwgaiA9IG5ld19wYXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGRwY1tpID49IHBvcyA/IGkrMSA6IGldID0gbmV3X3Bhci5jaGlsZHJlbltpXTtcblx0XHRcdH1cblx0XHRcdGRwY1twb3NdID0gdG1wLmlkO1xuXHRcdFx0bmV3X3Bhci5jaGlsZHJlbiA9IGRwYztcblx0XHRcdG5ld19wYXIuY2hpbGRyZW5fZC5wdXNoKHRtcC5pZCk7XG5cdFx0XHRuZXdfcGFyLmNoaWxkcmVuX2QgPSBuZXdfcGFyLmNoaWxkcmVuX2QuY29uY2F0KHRtcC5jaGlsZHJlbl9kKTtcblxuXHRcdFx0aWYobmV3X3Bhci5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHR0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZighdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXcpIHtcblx0XHRcdFx0dGhpcy5fbm9kZV9jaGFuZ2VkKG5ld19wYXIuaWQpO1xuXHRcdFx0fVxuXHRcdFx0aWYoIXNraXBfcmVkcmF3KSB7XG5cdFx0XHRcdHRoaXMucmVkcmF3KG5ld19wYXIuaWQgPT09ICQuanN0cmVlLnJvb3QpO1xuXHRcdFx0fVxuXHRcdFx0aWYoY2FsbGJhY2spIHsgY2FsbGJhY2suY2FsbCh0aGlzLCB0bXAsIG5ld19wYXIsIHBvcyk7IH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYSBub2RlIGlzIGNvcGllZFxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBjb3B5X25vZGUuanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZSB0aGUgY29waWVkIG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcmlnaW5hbCB0aGUgb3JpZ2luYWwgbm9kZVxuXHRcdFx0ICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudCB0aGUgcGFyZW50J3MgSURcblx0XHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiB0aGUgcG9zaXRpb24gb2YgdGhlIG5vZGUgYW1vbmcgdGhlIHBhcmVudCdzIGNoaWxkcmVuXG5cdFx0XHQgKiBAcGFyYW0ge1N0cmluZ30gb2xkX3BhcmVudCB0aGUgb2xkIHBhcmVudCBvZiB0aGUgbm9kZVxuXHRcdFx0ICogQHBhcmFtIHtOdW1iZXJ9IG9sZF9wb3NpdGlvbiB0aGUgcG9zaXRpb24gb2YgdGhlIG9yaWdpbmFsIG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNfbXVsdGkgZG8gdGhlIG5vZGUgYW5kIG5ldyBwYXJlbnQgYmVsb25nIHRvIGRpZmZlcmVudCBpbnN0YW5jZXNcblx0XHRcdCAqIEBwYXJhbSB7anNUcmVlfSBvbGRfaW5zdGFuY2UgdGhlIGluc3RhbmNlIHRoZSBub2RlIGNhbWUgZnJvbVxuXHRcdFx0ICogQHBhcmFtIHtqc1RyZWV9IG5ld19pbnN0YW5jZSB0aGUgaW5zdGFuY2Ugb2YgdGhlIG5ldyBwYXJlbnRcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdjb3B5X25vZGUnLCB7IFwibm9kZVwiIDogdG1wLCBcIm9yaWdpbmFsXCIgOiBvYmosIFwicGFyZW50XCIgOiBuZXdfcGFyLmlkLCBcInBvc2l0aW9uXCIgOiBwb3MsIFwib2xkX3BhcmVudFwiIDogb2xkX3BhciwgXCJvbGRfcG9zaXRpb25cIiA6IG9sZF9pbnMgJiYgb2xkX2lucy5faWQgJiYgb2xkX3BhciAmJiBvbGRfaW5zLl9tb2RlbC5kYXRhW29sZF9wYXJdICYmIG9sZF9pbnMuX21vZGVsLmRhdGFbb2xkX3Bhcl0uY2hpbGRyZW4gPyAkLmluQXJyYXkob2JqLmlkLCBvbGRfaW5zLl9tb2RlbC5kYXRhW29sZF9wYXJdLmNoaWxkcmVuKSA6IC0xLCdpc19tdWx0aScgOiAob2xkX2lucyAmJiBvbGRfaW5zLl9pZCAmJiBvbGRfaW5zLl9pZCAhPT0gdGhpcy5faWQpLCAnaXNfZm9yZWlnbicgOiAoIW9sZF9pbnMgfHwgIW9sZF9pbnMuX2lkKSwgJ29sZF9pbnN0YW5jZScgOiBvbGRfaW5zLCAnbmV3X2luc3RhbmNlJyA6IHRoaXMgfSk7XG5cdFx0XHRyZXR1cm4gdG1wLmlkO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY3V0IGEgbm9kZSAoYSBsYXRlciBjYWxsIHRvIGBwYXN0ZShvYmopYCB3b3VsZCBtb3ZlIHRoZSBub2RlKVxuXHRcdCAqIEBuYW1lIGN1dChvYmopXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9iaiBtdWx0aXBsZSBvYmplY3RzIGNhbiBiZSBwYXNzZWQgdXNpbmcgYW4gYXJyYXlcblx0XHQgKiBAdHJpZ2dlciBjdXQuanN0cmVlXG5cdFx0ICovXG5cdFx0Y3V0IDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0aWYoIW9iaikgeyBvYmogPSB0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KCk7IH1cblx0XHRcdGlmKCEkLmlzQXJyYXkob2JqKSkgeyBvYmogPSBbb2JqXTsgfVxuXHRcdFx0aWYoIW9iai5sZW5ndGgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHR2YXIgdG1wID0gW10sIG8sIHQxLCB0Mjtcblx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRvID0gdGhpcy5nZXRfbm9kZShvYmpbdDFdKTtcblx0XHRcdFx0aWYobyAmJiBvLmlkICYmIG8uaWQgIT09ICQuanN0cmVlLnJvb3QpIHsgdG1wLnB1c2gobyk7IH1cblx0XHRcdH1cblx0XHRcdGlmKCF0bXAubGVuZ3RoKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0Y2NwX25vZGUgPSB0bXA7XG5cdFx0XHRjY3BfaW5zdCA9IHRoaXM7XG5cdFx0XHRjY3BfbW9kZSA9ICdtb3ZlX25vZGUnO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBub2RlcyBhcmUgYWRkZWQgdG8gdGhlIGJ1ZmZlciBmb3IgbW92aW5nXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGN1dC5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IG5vZGVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdjdXQnLCB7IFwibm9kZVwiIDogb2JqIH0pO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY29weSBhIG5vZGUgKGEgbGF0ZXIgY2FsbCB0byBgcGFzdGUob2JqKWAgd291bGQgY29weSB0aGUgbm9kZSlcblx0XHQgKiBAbmFtZSBjb3B5KG9iailcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIG11bHRpcGxlIG9iamVjdHMgY2FuIGJlIHBhc3NlZCB1c2luZyBhbiBhcnJheVxuXHRcdCAqIEB0cmlnZ2VyIGNvcHkuanN0cmVlXG5cdFx0ICovXG5cdFx0Y29weSA6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdGlmKCFvYmopIHsgb2JqID0gdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdCgpOyB9XG5cdFx0XHRpZighJC5pc0FycmF5KG9iaikpIHsgb2JqID0gW29ial07IH1cblx0XHRcdGlmKCFvYmoubGVuZ3RoKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0dmFyIHRtcCA9IFtdLCBvLCB0MSwgdDI7XG5cdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0byA9IHRoaXMuZ2V0X25vZGUob2JqW3QxXSk7XG5cdFx0XHRcdGlmKG8gJiYgby5pZCAmJiBvLmlkICE9PSAkLmpzdHJlZS5yb290KSB7IHRtcC5wdXNoKG8pOyB9XG5cdFx0XHR9XG5cdFx0XHRpZighdG1wLmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdGNjcF9ub2RlID0gdG1wO1xuXHRcdFx0Y2NwX2luc3QgPSB0aGlzO1xuXHRcdFx0Y2NwX21vZGUgPSAnY29weV9ub2RlJztcblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gbm9kZXMgYXJlIGFkZGVkIHRvIHRoZSBidWZmZXIgZm9yIGNvcHlpbmdcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgY29weS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IG5vZGVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdjb3B5JywgeyBcIm5vZGVcIiA6IG9iaiB9KTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldCB0aGUgY3VycmVudCBidWZmZXIgKGFueSBub2RlcyB0aGF0IGFyZSB3YWl0aW5nIGZvciBhIHBhc3RlIG9wZXJhdGlvbilcblx0XHQgKiBAbmFtZSBnZXRfYnVmZmVyKClcblx0XHQgKiBAcmV0dXJuIHtPYmplY3R9IGFuIG9iamVjdCBjb25zaXN0aW5nIG9mIGBtb2RlYCAoXCJjb3B5X25vZGVcIiBvciBcIm1vdmVfbm9kZVwiKSwgYG5vZGVgIChhbiBhcnJheSBvZiBvYmplY3RzKSBhbmQgYGluc3RgICh0aGUgaW5zdGFuY2UpXG5cdFx0ICovXG5cdFx0Z2V0X2J1ZmZlciA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB7ICdtb2RlJyA6IGNjcF9tb2RlLCAnbm9kZScgOiBjY3Bfbm9kZSwgJ2luc3QnIDogY2NwX2luc3QgfTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHRvIHBhc3RlXG5cdFx0ICogQG5hbWUgY2FuX3Bhc3RlKClcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGNhbl9wYXN0ZSA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjY3BfbW9kZSAhPT0gZmFsc2UgJiYgY2NwX25vZGUgIT09IGZhbHNlOyAvLyAmJiBjY3BfaW5zdC5fbW9kZWwuZGF0YVtjY3Bfbm9kZV07XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBjb3B5IG9yIG1vdmUgdGhlIHByZXZpb3VzbHkgY3V0IG9yIGNvcGllZCBub2RlcyB0byBhIG5ldyBwYXJlbnRcblx0XHQgKiBAbmFtZSBwYXN0ZShvYmogWywgcG9zXSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIHRoZSBuZXcgcGFyZW50XG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IHBvcyB0aGUgcG9zaXRpb24gdG8gaW5zZXJ0IGF0IChiZXNpZGVzIGludGVnZXIsIFwiZmlyc3RcIiBhbmQgXCJsYXN0XCIgYXJlIHN1cHBvcnRlZCksIGRlZmF1bHRzIHRvIGludGVnZXIgYDBgXG5cdFx0ICogQHRyaWdnZXIgcGFzdGUuanN0cmVlXG5cdFx0ICovXG5cdFx0cGFzdGUgOiBmdW5jdGlvbiAob2JqLCBwb3MpIHtcblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgIWNjcF9tb2RlIHx8ICFjY3BfbW9kZS5tYXRjaCgvXihjb3B5X25vZGV8bW92ZV9ub2RlKSQvKSB8fCAhY2NwX25vZGUpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHRpZih0aGlzW2NjcF9tb2RlXShjY3Bfbm9kZSwgb2JqLCBwb3MsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGNjcF9pbnN0KSkge1xuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gcGFzdGUgaXMgaW52b2tlZFxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgcGFzdGUuanN0cmVlXG5cdFx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnQgdGhlIElEIG9mIHRoZSByZWNlaXZpbmcgbm9kZVxuXHRcdFx0XHQgKiBAcGFyYW0ge0FycmF5fSBub2RlIHRoZSBub2RlcyBpbiB0aGUgYnVmZmVyXG5cdFx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBtb2RlIHRoZSBwZXJmb3JtZWQgb3BlcmF0aW9uIC0gXCJjb3B5X25vZGVcIiBvciBcIm1vdmVfbm9kZVwiXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3Bhc3RlJywgeyBcInBhcmVudFwiIDogb2JqLmlkLCBcIm5vZGVcIiA6IGNjcF9ub2RlLCBcIm1vZGVcIiA6IGNjcF9tb2RlIH0pO1xuXHRcdFx0fVxuXHRcdFx0Y2NwX25vZGUgPSBmYWxzZTtcblx0XHRcdGNjcF9tb2RlID0gZmFsc2U7XG5cdFx0XHRjY3BfaW5zdCA9IGZhbHNlO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2xlYXIgdGhlIGJ1ZmZlciBvZiBwcmV2aW91c2x5IGNvcGllZCBvciBjdXQgbm9kZXNcblx0XHQgKiBAbmFtZSBjbGVhcl9idWZmZXIoKVxuXHRcdCAqIEB0cmlnZ2VyIGNsZWFyX2J1ZmZlci5qc3RyZWVcblx0XHQgKi9cblx0XHRjbGVhcl9idWZmZXIgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjY3Bfbm9kZSA9IGZhbHNlO1xuXHRcdFx0Y2NwX21vZGUgPSBmYWxzZTtcblx0XHRcdGNjcF9pbnN0ID0gZmFsc2U7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIHRoZSBjb3B5IC8gY3V0IGJ1ZmZlciBpcyBjbGVhcmVkXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGNsZWFyX2J1ZmZlci5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdjbGVhcl9idWZmZXInKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHB1dCBhIG5vZGUgaW4gZWRpdCBtb2RlIChpbnB1dCBmaWVsZCB0byByZW5hbWUgdGhlIG5vZGUpXG5cdFx0ICogQG5hbWUgZWRpdChvYmogWywgZGVmYXVsdF90ZXh0LCBjYWxsYmFja10pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9ialxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ30gZGVmYXVsdF90ZXh0IHRoZSB0ZXh0IHRvIHBvcHVsYXRlIHRoZSBpbnB1dCB3aXRoIChpZiBvbWl0dGVkIG9yIHNldCB0byBhIG5vbi1zdHJpbmcgdmFsdWUgdGhlIG5vZGUncyB0ZXh0IHZhbHVlIGlzIHVzZWQpXG5cdFx0ICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uY2UgdGhlIHRleHQgYm94IGlzIGJsdXJyZWQsIGl0IGlzIGNhbGxlZCBpbiB0aGUgaW5zdGFuY2UncyBzY29wZSBhbmQgcmVjZWl2ZXMgdGhlIG5vZGUsIGEgc3RhdHVzIHBhcmFtZXRlciAodHJ1ZSBpZiB0aGUgcmVuYW1lIGlzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZSkgYW5kIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSB1c2VyIGNhbmNlbGxlZCB0aGUgZWRpdC4gWW91IGNhbiBhY2Nlc3MgdGhlIG5vZGUncyB0aXRsZSB1c2luZyAudGV4dFxuXHRcdCAqL1xuXHRcdGVkaXQgOiBmdW5jdGlvbiAob2JqLCBkZWZhdWx0X3RleHQsIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgcnRsLCB3LCBhLCBzLCB0LCBoMSwgaDIsIGZuLCB0bXAsIGNhbmNlbCA9IGZhbHNlO1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaikgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29yZS5jaGVja19jYWxsYmFjayA9PT0gZmFsc2UpIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnY2hlY2snLCAncGx1Z2luJyA6ICdjb3JlJywgJ2lkJyA6ICdjb3JlXzA3JywgJ3JlYXNvbicgOiAnQ291bGQgbm90IGVkaXQgbm9kZSBiZWNhdXNlIG9mIGNoZWNrX2NhbGxiYWNrJyB9O1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLCB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHRtcCA9IG9iajtcblx0XHRcdGRlZmF1bHRfdGV4dCA9IHR5cGVvZiBkZWZhdWx0X3RleHQgPT09ICdzdHJpbmcnID8gZGVmYXVsdF90ZXh0IDogb2JqLnRleHQ7XG5cdFx0XHR0aGlzLnNldF90ZXh0KG9iaiwgXCJcIik7XG5cdFx0XHRvYmogPSB0aGlzLl9vcGVuX3RvKG9iaik7XG5cdFx0XHR0bXAudGV4dCA9IGRlZmF1bHRfdGV4dDtcblxuXHRcdFx0cnRsID0gdGhpcy5fZGF0YS5jb3JlLnJ0bDtcblx0XHRcdHcgID0gdGhpcy5lbGVtZW50LndpZHRoKCk7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCA9IHRtcC5pZDtcblx0XHRcdGEgID0gb2JqLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmZvY3VzKCk7XG5cdFx0XHRzICA9ICQoJzxzcGFuPicpO1xuXHRcdFx0LyohXG5cdFx0XHRvaSA9IG9iai5jaGlsZHJlbihcImk6dmlzaWJsZVwiKSxcblx0XHRcdGFpID0gYS5jaGlsZHJlbihcImk6dmlzaWJsZVwiKSxcblx0XHRcdHcxID0gb2kud2lkdGgoKSAqIG9pLmxlbmd0aCxcblx0XHRcdHcyID0gYWkud2lkdGgoKSAqIGFpLmxlbmd0aCxcblx0XHRcdCovXG5cdFx0XHR0ICA9IGRlZmF1bHRfdGV4dDtcblx0XHRcdGgxID0gJChcIjxcIitcImRpdiAvPlwiLCB7IGNzcyA6IHsgXCJwb3NpdGlvblwiIDogXCJhYnNvbHV0ZVwiLCBcInRvcFwiIDogXCItMjAwcHhcIiwgXCJsZWZ0XCIgOiAocnRsID8gXCIwcHhcIiA6IFwiLTEwMDBweFwiKSwgXCJ2aXNpYmlsaXR5XCIgOiBcImhpZGRlblwiIH0gfSkuYXBwZW5kVG8oXCJib2R5XCIpO1xuXHRcdFx0aDIgPSAkKFwiPFwiK1wiaW5wdXQgLz5cIiwge1xuXHRcdFx0XHRcdFx0XCJ2YWx1ZVwiIDogdCxcblx0XHRcdFx0XHRcdFwiY2xhc3NcIiA6IFwianN0cmVlLXJlbmFtZS1pbnB1dFwiLFxuXHRcdFx0XHRcdFx0Ly8gXCJzaXplXCIgOiB0Lmxlbmd0aCxcblx0XHRcdFx0XHRcdFwiY3NzXCIgOiB7XG5cdFx0XHRcdFx0XHRcdFwicGFkZGluZ1wiIDogXCIwXCIsXG5cdFx0XHRcdFx0XHRcdFwiYm9yZGVyXCIgOiBcIjFweCBzb2xpZCBzaWx2ZXJcIixcblx0XHRcdFx0XHRcdFx0XCJib3gtc2l6aW5nXCIgOiBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRcdFx0XCJkaXNwbGF5XCIgOiBcImlubGluZS1ibG9ja1wiLFxuXHRcdFx0XHRcdFx0XHRcImhlaWdodFwiIDogKHRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQpICsgXCJweFwiLFxuXHRcdFx0XHRcdFx0XHRcImxpbmVIZWlnaHRcIiA6ICh0aGlzLl9kYXRhLmNvcmUubGlfaGVpZ2h0KSArIFwicHhcIixcblx0XHRcdFx0XHRcdFx0XCJ3aWR0aFwiIDogXCIxNTBweFwiIC8vIHdpbGwgYmUgc2V0IGEgYml0IGZ1cnRoZXIgZG93blxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwiYmx1clwiIDogJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdHZhciBpID0gcy5jaGlsZHJlbihcIi5qc3RyZWUtcmVuYW1lLWlucHV0XCIpLFxuXHRcdFx0XHRcdFx0XHRcdHYgPSBpLnZhbCgpLFxuXHRcdFx0XHRcdFx0XHRcdGYgPSB0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCxcblx0XHRcdFx0XHRcdFx0XHRudjtcblx0XHRcdFx0XHRcdFx0aWYodiA9PT0gXCJcIikgeyB2ID0gdDsgfVxuXHRcdFx0XHRcdFx0XHRoMS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0cy5yZXBsYWNlV2l0aChhKTtcblx0XHRcdFx0XHRcdFx0cy5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0dCA9IGYgPyB0IDogJCgnPGRpdj48L2Rpdj4nKS5hcHBlbmQoJC5wYXJzZUhUTUwodCkpLmh0bWwoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXRfdGV4dChvYmosIHQpO1xuXHRcdFx0XHRcdFx0XHRudiA9ICEhdGhpcy5yZW5hbWVfbm9kZShvYmosIGYgPyAkKCc8ZGl2PjwvZGl2PicpLnRleHQodikudGV4dCgpIDogJCgnPGRpdj48L2Rpdj4nKS5hcHBlbmQoJC5wYXJzZUhUTUwodikpLmh0bWwoKSk7XG5cdFx0XHRcdFx0XHRcdGlmKCFudikge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2V0X3RleHQob2JqLCB0KTsgLy8gbW92ZSB0aGlzIHVwPyBhbmQgZml4ICM0ODNcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCA9IHRtcC5pZDtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbm9kZSA9IHRoaXMuZ2V0X25vZGUodG1wLmlkLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRpZihub2RlLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgPSB0bXAuaWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRub2RlLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LCB0aGlzKSwgMCk7XG5cdFx0XHRcdFx0XHRcdGlmKGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCh0aGlzLCB0bXAsIG52LCBjYW5jZWwpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGgyID0gbnVsbDtcblx0XHRcdFx0XHRcdH0sIHRoaXMpLFxuXHRcdFx0XHRcdFx0XCJrZXlkb3duXCIgOiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHR2YXIga2V5ID0gZS53aGljaDtcblx0XHRcdFx0XHRcdFx0aWYoa2V5ID09PSAyNykge1xuXHRcdFx0XHRcdFx0XHRcdGNhbmNlbCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy52YWx1ZSA9IHQ7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoa2V5ID09PSAyNyB8fCBrZXkgPT09IDEzIHx8IGtleSA9PT0gMzcgfHwga2V5ID09PSAzOCB8fCBrZXkgPT09IDM5IHx8IGtleSA9PT0gNDAgfHwga2V5ID09PSAzMikge1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYoa2V5ID09PSAyNyB8fCBrZXkgPT09IDEzKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJjbGlja1wiIDogZnVuY3Rpb24gKGUpIHsgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsgfSxcblx0XHRcdFx0XHRcdFwibW91c2Vkb3duXCIgOiBmdW5jdGlvbiAoZSkgeyBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOyB9LFxuXHRcdFx0XHRcdFx0XCJrZXl1cFwiIDogZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0aDIud2lkdGgoTWF0aC5taW4oaDEudGV4dChcInBXXCIgKyB0aGlzLnZhbHVlKS53aWR0aCgpLHcpKTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcImtleXByZXNzXCIgOiBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0XHRcdGlmKGUud2hpY2ggPT09IDEzKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRmbiA9IHtcblx0XHRcdFx0XHRcdGZvbnRGYW1pbHlcdFx0OiBhLmNzcygnZm9udEZhbWlseScpXHRcdHx8ICcnLFxuXHRcdFx0XHRcdFx0Zm9udFNpemVcdFx0OiBhLmNzcygnZm9udFNpemUnKVx0XHRcdHx8ICcnLFxuXHRcdFx0XHRcdFx0Zm9udFdlaWdodFx0XHQ6IGEuY3NzKCdmb250V2VpZ2h0JylcdFx0fHwgJycsXG5cdFx0XHRcdFx0XHRmb250U3R5bGVcdFx0OiBhLmNzcygnZm9udFN0eWxlJylcdFx0fHwgJycsXG5cdFx0XHRcdFx0XHRmb250U3RyZXRjaFx0XHQ6IGEuY3NzKCdmb250U3RyZXRjaCcpXHRcdHx8ICcnLFxuXHRcdFx0XHRcdFx0Zm9udFZhcmlhbnRcdFx0OiBhLmNzcygnZm9udFZhcmlhbnQnKVx0XHR8fCAnJyxcblx0XHRcdFx0XHRcdGxldHRlclNwYWNpbmdcdDogYS5jc3MoJ2xldHRlclNwYWNpbmcnKVx0fHwgJycsXG5cdFx0XHRcdFx0XHR3b3JkU3BhY2luZ1x0XHQ6IGEuY3NzKCd3b3JkU3BhY2luZycpXHRcdHx8ICcnXG5cdFx0XHRcdH07XG5cdFx0XHRzLmF0dHIoJ2NsYXNzJywgYS5hdHRyKCdjbGFzcycpKS5hcHBlbmQoYS5jb250ZW50cygpLmNsb25lKCkpLmFwcGVuZChoMik7XG5cdFx0XHRhLnJlcGxhY2VXaXRoKHMpO1xuXHRcdFx0aDEuY3NzKGZuKTtcblx0XHRcdGgyLmNzcyhmbikud2lkdGgoTWF0aC5taW4oaDEudGV4dChcInBXXCIgKyBoMlswXS52YWx1ZSkud2lkdGgoKSx3KSlbMF0uc2VsZWN0KCk7XG5cdFx0XHQkKGRvY3VtZW50KS5vbmUoJ21vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWUgZG5kX3N0YXJ0LnZha2F0YScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdGlmIChoMiAmJiBlLnRhcmdldCAhPT0gaDIpIHtcblx0XHRcdFx0XHQkKGgyKS5ibHVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIGNoYW5nZXMgdGhlIHRoZW1lXG5cdFx0ICogQG5hbWUgc2V0X3RoZW1lKHRoZW1lX25hbWUgWywgdGhlbWVfdXJsXSlcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGhlbWVfbmFtZSB0aGUgbmFtZSBvZiB0aGUgbmV3IHRoZW1lIHRvIGFwcGx5XG5cdFx0ICogQHBhcmFtIHttaXhlZH0gdGhlbWVfdXJsICB0aGUgbG9jYXRpb24gb2YgdGhlIENTUyBmaWxlIGZvciB0aGlzIHRoZW1lLiBPbWl0IG9yIHNldCB0byBgZmFsc2VgIGlmIHlvdSBtYW51YWxseSBpbmNsdWRlZCB0aGUgZmlsZS4gU2V0IHRvIGB0cnVlYCB0byBhdXRvbG9hZCBmcm9tIHRoZSBgY29yZS50aGVtZXMuZGlyYCBkaXJlY3RvcnkuXG5cdFx0ICogQHRyaWdnZXIgc2V0X3RoZW1lLmpzdHJlZVxuXHRcdCAqL1xuXHRcdHNldF90aGVtZSA6IGZ1bmN0aW9uICh0aGVtZV9uYW1lLCB0aGVtZV91cmwpIHtcblx0XHRcdGlmKCF0aGVtZV9uYW1lKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0aWYodGhlbWVfdXJsID09PSB0cnVlKSB7XG5cdFx0XHRcdHZhciBkaXIgPSB0aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzLmRpcjtcblx0XHRcdFx0aWYoIWRpcikgeyBkaXIgPSAkLmpzdHJlZS5wYXRoICsgJy90aGVtZXMnOyB9XG5cdFx0XHRcdHRoZW1lX3VybCA9IGRpciArICcvJyArIHRoZW1lX25hbWUgKyAnL3N0eWxlLmNzcyc7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGVtZV91cmwgJiYgJC5pbkFycmF5KHRoZW1lX3VybCwgdGhlbWVzX2xvYWRlZCkgPT09IC0xKSB7XG5cdFx0XHRcdCQoJ2hlYWQnKS5hcHBlbmQoJzwnKydsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiJyArIHRoZW1lX3VybCArICdcIiB0eXBlPVwidGV4dC9jc3NcIiAvPicpO1xuXHRcdFx0XHR0aGVtZXNfbG9hZGVkLnB1c2godGhlbWVfdXJsKTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2pzdHJlZS0nICsgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSA9IHRoZW1lX25hbWU7XG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoJ2pzdHJlZS0nICsgdGhlbWVfbmFtZSk7XG5cdFx0XHR0aGlzLmVsZW1lbnRbdGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcycgXSgnanN0cmVlLScgKyB0aGVtZV9uYW1lICsgJy1yZXNwb25zaXZlJyk7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGEgdGhlbWUgaXMgc2V0XG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIHNldF90aGVtZS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB0aGVtZSB0aGUgbmV3IHRoZW1lXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignc2V0X3RoZW1lJywgeyAndGhlbWUnIDogdGhlbWVfbmFtZSB9KTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGdldHMgdGhlIG5hbWUgb2YgdGhlIGN1cnJlbnRseSBhcHBsaWVkIHRoZW1lIG5hbWVcblx0XHQgKiBAbmFtZSBnZXRfdGhlbWUoKVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRnZXRfdGhlbWUgOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWU7IH0sXG5cdFx0LyoqXG5cdFx0ICogY2hhbmdlcyB0aGUgdGhlbWUgdmFyaWFudCAoaWYgdGhlIHRoZW1lIGhhcyB2YXJpYW50cylcblx0XHQgKiBAbmFtZSBzZXRfdGhlbWVfdmFyaWFudCh2YXJpYW50X25hbWUpXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd8Qm9vbGVhbn0gdmFyaWFudF9uYW1lIHRoZSB2YXJpYW50IHRvIGFwcGx5IChpZiBgZmFsc2VgIGlzIHVzZWQgdGhlIGN1cnJlbnQgdmFyaWFudCBpcyByZW1vdmVkKVxuXHRcdCAqL1xuXHRcdHNldF90aGVtZV92YXJpYW50IDogZnVuY3Rpb24gKHZhcmlhbnRfbmFtZSkge1xuXHRcdFx0aWYodGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50KSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygnanN0cmVlLScgKyB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUgKyAnLScgKyB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50ID0gdmFyaWFudF9uYW1lO1xuXHRcdFx0aWYodmFyaWFudF9uYW1lKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcygnanN0cmVlLScgKyB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUgKyAnLScgKyB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0cyB0aGUgbmFtZSBvZiB0aGUgY3VycmVudGx5IGFwcGxpZWQgdGhlbWUgdmFyaWFudFxuXHRcdCAqIEBuYW1lIGdldF90aGVtZSgpXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldF90aGVtZV92YXJpYW50IDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50OyB9LFxuXHRcdC8qKlxuXHRcdCAqIHNob3dzIGEgc3RyaXBlZCBiYWNrZ3JvdW5kIG9uIHRoZSBjb250YWluZXIgKGlmIHRoZSB0aGVtZSBzdXBwb3J0cyBpdClcblx0XHQgKiBAbmFtZSBzaG93X3N0cmlwZXMoKVxuXHRcdCAqL1xuXHRcdHNob3dfc3RyaXBlcyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcyA9IHRydWU7XG5cdFx0XHR0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1zdHJpcGVkXCIpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBzdHJpcGVzIGFyZSBzaG93blxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBzaG93X3N0cmlwZXMuanN0cmVlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignc2hvd19zdHJpcGVzJyk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBoaWRlcyB0aGUgc3RyaXBlZCBiYWNrZ3JvdW5kIG9uIHRoZSBjb250YWluZXJcblx0XHQgKiBAbmFtZSBoaWRlX3N0cmlwZXMoKVxuXHRcdCAqL1xuXHRcdGhpZGVfc3RyaXBlcyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcyA9IGZhbHNlO1xuXHRcdFx0dGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtc3RyaXBlZFwiKTtcblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gc3RyaXBlcyBhcmUgaGlkZGVuXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGhpZGVfc3RyaXBlcy5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdoaWRlX3N0cmlwZXMnKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHRvZ2dsZXMgdGhlIHN0cmlwZWQgYmFja2dyb3VuZCBvbiB0aGUgY29udGFpbmVyXG5cdFx0ICogQG5hbWUgdG9nZ2xlX3N0cmlwZXMoKVxuXHRcdCAqL1xuXHRcdHRvZ2dsZV9zdHJpcGVzIDogZnVuY3Rpb24gKCkgeyBpZih0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXMpIHsgdGhpcy5oaWRlX3N0cmlwZXMoKTsgfSBlbHNlIHsgdGhpcy5zaG93X3N0cmlwZXMoKTsgfSB9LFxuXHRcdC8qKlxuXHRcdCAqIHNob3dzIHRoZSBjb25uZWN0aW5nIGRvdHMgKGlmIHRoZSB0aGVtZSBzdXBwb3J0cyBpdClcblx0XHQgKiBAbmFtZSBzaG93X2RvdHMoKVxuXHRcdCAqL1xuXHRcdHNob3dfZG90cyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cyA9IHRydWU7XG5cdFx0XHR0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1kb3RzXCIpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBkb3RzIGFyZSBzaG93blxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBzaG93X2RvdHMuanN0cmVlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignc2hvd19kb3RzJyk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBoaWRlcyB0aGUgY29ubmVjdGluZyBkb3RzXG5cdFx0ICogQG5hbWUgaGlkZV9kb3RzKClcblx0XHQgKi9cblx0XHRoaWRlX2RvdHMgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHMgPSBmYWxzZTtcblx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWRvdHNcIik7XG5cdFx0XHQvKipcblx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGRvdHMgYXJlIGhpZGRlblxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBoaWRlX2RvdHMuanN0cmVlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignaGlkZV9kb3RzJyk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiB0b2dnbGVzIHRoZSBjb25uZWN0aW5nIGRvdHNcblx0XHQgKiBAbmFtZSB0b2dnbGVfZG90cygpXG5cdFx0ICovXG5cdFx0dG9nZ2xlX2RvdHMgOiBmdW5jdGlvbiAoKSB7IGlmKHRoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cykgeyB0aGlzLmhpZGVfZG90cygpOyB9IGVsc2UgeyB0aGlzLnNob3dfZG90cygpOyB9IH0sXG5cdFx0LyoqXG5cdFx0ICogc2hvdyB0aGUgbm9kZSBpY29uc1xuXHRcdCAqIEBuYW1lIHNob3dfaWNvbnMoKVxuXHRcdCAqL1xuXHRcdHNob3dfaWNvbnMgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zID0gdHJ1ZTtcblx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW5vLWljb25zXCIpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBpY29ucyBhcmUgc2hvd25cblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgc2hvd19pY29ucy5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdzaG93X2ljb25zJyk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBoaWRlIHRoZSBub2RlIGljb25zXG5cdFx0ICogQG5hbWUgaGlkZV9pY29ucygpXG5cdFx0ICovXG5cdFx0aGlkZV9pY29ucyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnMgPSBmYWxzZTtcblx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWljb25zXCIpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBpY29ucyBhcmUgaGlkZGVuXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIGhpZGVfaWNvbnMuanN0cmVlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignaGlkZV9pY29ucycpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogdG9nZ2xlIHRoZSBub2RlIGljb25zXG5cdFx0ICogQG5hbWUgdG9nZ2xlX2ljb25zKClcblx0XHQgKi9cblx0XHR0b2dnbGVfaWNvbnMgOiBmdW5jdGlvbiAoKSB7IGlmKHRoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnMpIHsgdGhpcy5oaWRlX2ljb25zKCk7IH0gZWxzZSB7IHRoaXMuc2hvd19pY29ucygpOyB9IH0sXG5cdFx0LyoqXG5cdFx0ICogc2hvdyB0aGUgbm9kZSBlbGxpcHNpc1xuXHRcdCAqIEBuYW1lIHNob3dfaWNvbnMoKVxuXHRcdCAqL1xuXHRcdHNob3dfZWxsaXBzaXMgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzID0gdHJ1ZTtcblx0XHRcdHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLWVsbGlwc2lzXCIpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBlbGxpc2lzIGlzIHNob3duXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIHNob3dfZWxsaXBzaXMuanN0cmVlXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignc2hvd19lbGxpcHNpcycpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogaGlkZSB0aGUgbm9kZSBlbGxpcHNpc1xuXHRcdCAqIEBuYW1lIGhpZGVfZWxsaXBzaXMoKVxuXHRcdCAqL1xuXHRcdGhpZGVfZWxsaXBzaXMgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzID0gZmFsc2U7XG5cdFx0XHR0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lbGxpcHNpc1wiKTtcblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gZWxsaXNpcyBpcyBoaWRkZW5cblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgaGlkZV9lbGxpcHNpcy5qc3RyZWVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdoaWRlX2VsbGlwc2lzJyk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiB0b2dnbGUgdGhlIG5vZGUgZWxsaXBzaXNcblx0XHQgKiBAbmFtZSB0b2dnbGVfaWNvbnMoKVxuXHRcdCAqL1xuXHRcdHRvZ2dsZV9lbGxpcHNpcyA6IGZ1bmN0aW9uICgpIHsgaWYodGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcykgeyB0aGlzLmhpZGVfZWxsaXBzaXMoKTsgfSBlbHNlIHsgdGhpcy5zaG93X2VsbGlwc2lzKCk7IH0gfSxcblx0XHQvKipcblx0XHQgKiBzZXQgdGhlIG5vZGUgaWNvbiBmb3IgYSBub2RlXG5cdFx0ICogQG5hbWUgc2V0X2ljb24ob2JqLCBpY29uKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9ialxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBpY29uIHRoZSBuZXcgaWNvbiAtIGNhbiBiZSBhIHBhdGggdG8gYW4gaWNvbiBvciBhIGNsYXNzTmFtZSwgaWYgdXNpbmcgYW4gaW1hZ2UgdGhhdCBpcyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkgdXNlIGEgYC4vYCBwcmVmaXgsIG90aGVyd2lzZSBpdCB3aWxsIGJlIGRldGVjdGVkIGFzIGEgY2xhc3Ncblx0XHQgKi9cblx0XHRzZXRfaWNvbiA6IGZ1bmN0aW9uIChvYmosIGljb24pIHtcblx0XHRcdHZhciB0MSwgdDIsIGRvbSwgb2xkO1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0b2JqID0gb2JqLnNsaWNlKCk7XG5cdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdHRoaXMuc2V0X2ljb24ob2JqW3QxXSwgaWNvbik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdG9sZCA9IG9iai5pY29uO1xuXHRcdFx0b2JqLmljb24gPSBpY29uID09PSB0cnVlIHx8IGljb24gPT09IG51bGwgfHwgaWNvbiA9PT0gdW5kZWZpbmVkIHx8IGljb24gPT09ICcnID8gdHJ1ZSA6IGljb247XG5cdFx0XHRkb20gPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpO1xuXHRcdFx0aWYoaWNvbiA9PT0gZmFsc2UpIHtcblx0XHRcdFx0dGhpcy5oaWRlX2ljb24ob2JqKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoaWNvbiA9PT0gdHJ1ZSB8fCBpY29uID09PSBudWxsIHx8IGljb24gPT09IHVuZGVmaW5lZCB8fCBpY29uID09PSAnJykge1xuXHRcdFx0XHRkb20ucmVtb3ZlQ2xhc3MoJ2pzdHJlZS10aGVtZWljb24tY3VzdG9tICcgKyBvbGQpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKS5yZW1vdmVBdHRyKFwicmVsXCIpO1xuXHRcdFx0XHRpZihvbGQgPT09IGZhbHNlKSB7IHRoaXMuc2hvd19pY29uKG9iaik7IH1cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoaWNvbi5pbmRleE9mKFwiL1wiKSA9PT0gLTEgJiYgaWNvbi5pbmRleE9mKFwiLlwiKSA9PT0gLTEpIHtcblx0XHRcdFx0ZG9tLnJlbW92ZUNsYXNzKG9sZCkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpO1xuXHRcdFx0XHRkb20uYWRkQ2xhc3MoaWNvbiArICcganN0cmVlLXRoZW1laWNvbi1jdXN0b20nKS5hdHRyKFwicmVsXCIsaWNvbik7XG5cdFx0XHRcdGlmKG9sZCA9PT0gZmFsc2UpIHsgdGhpcy5zaG93X2ljb24ob2JqKTsgfVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRvbS5yZW1vdmVDbGFzcyhvbGQpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKTtcblx0XHRcdFx0ZG9tLmFkZENsYXNzKCdqc3RyZWUtdGhlbWVpY29uLWN1c3RvbScpLmNzcyhcImJhY2tncm91bmRcIiwgXCJ1cmwoJ1wiICsgaWNvbiArIFwiJykgY2VudGVyIGNlbnRlciBuby1yZXBlYXRcIikuYXR0cihcInJlbFwiLGljb24pO1xuXHRcdFx0XHRpZihvbGQgPT09IGZhbHNlKSB7IHRoaXMuc2hvd19pY29uKG9iaik7IH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogZ2V0IHRoZSBub2RlIGljb24gZm9yIGEgbm9kZVxuXHRcdCAqIEBuYW1lIGdldF9pY29uKG9iailcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmpcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0X2ljb24gOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRyZXR1cm4gKCFvYmogfHwgb2JqLmlkID09PSAkLmpzdHJlZS5yb290KSA/IGZhbHNlIDogb2JqLmljb247XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBoaWRlIHRoZSBpY29uIG9uIGFuIGluZGl2aWR1YWwgbm9kZVxuXHRcdCAqIEBuYW1lIGhpZGVfaWNvbihvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqXG5cdFx0ICovXG5cdFx0aGlkZV9pY29uIDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0dmFyIHQxLCB0Mjtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLmhpZGVfaWNvbihvYmpbdDFdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgb2JqID09PSAkLmpzdHJlZS5yb290KSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0b2JqLmljb24gPSBmYWxzZTtcblx0XHRcdHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYWRkQ2xhc3MoJ2pzdHJlZS10aGVtZWljb24taGlkZGVuJyk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIHNob3cgdGhlIGljb24gb24gYW4gaW5kaXZpZHVhbCBub2RlXG5cdFx0ICogQG5hbWUgc2hvd19pY29uKG9iailcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmpcblx0XHQgKi9cblx0XHRzaG93X2ljb24gOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHR2YXIgdDEsIHQyLCBkb207XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zaG93X2ljb24ob2JqW3QxXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iaiA9PT0gJC5qc3RyZWUucm9vdCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdGRvbSA9IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKTtcblx0XHRcdG9iai5pY29uID0gZG9tLmxlbmd0aCA/IGRvbS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYXR0cigncmVsJykgOiB0cnVlO1xuXHRcdFx0aWYoIW9iai5pY29uKSB7IG9iai5pY29uID0gdHJ1ZTsgfVxuXHRcdFx0ZG9tLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKS5yZW1vdmVDbGFzcygnanN0cmVlLXRoZW1laWNvbi1oaWRkZW4nKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fTtcblxuXHQvLyBoZWxwZXJzXG5cdCQudmFrYXRhID0ge307XG5cdC8vIGNvbGxlY3QgYXR0cmlidXRlc1xuXHQkLnZha2F0YS5hdHRyaWJ1dGVzID0gZnVuY3Rpb24obm9kZSwgd2l0aF92YWx1ZXMpIHtcblx0XHRub2RlID0gJChub2RlKVswXTtcblx0XHR2YXIgYXR0ciA9IHdpdGhfdmFsdWVzID8ge30gOiBbXTtcblx0XHRpZihub2RlICYmIG5vZGUuYXR0cmlidXRlcykge1xuXHRcdFx0JC5lYWNoKG5vZGUuYXR0cmlidXRlcywgZnVuY3Rpb24gKGksIHYpIHtcblx0XHRcdFx0aWYoJC5pbkFycmF5KHYubmFtZS50b0xvd2VyQ2FzZSgpLFsnc3R5bGUnLCdjb250ZW50ZWRpdGFibGUnLCdoYXNmb2N1cycsJ3RhYmluZGV4J10pICE9PSAtMSkgeyByZXR1cm47IH1cblx0XHRcdFx0aWYodi52YWx1ZSAhPT0gbnVsbCAmJiAkLnRyaW0odi52YWx1ZSkgIT09ICcnKSB7XG5cdFx0XHRcdFx0aWYod2l0aF92YWx1ZXMpIHsgYXR0clt2Lm5hbWVdID0gdi52YWx1ZTsgfVxuXHRcdFx0XHRcdGVsc2UgeyBhdHRyLnB1c2godi5uYW1lKTsgfVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGF0dHI7XG5cdH07XG5cdCQudmFrYXRhLmFycmF5X3VuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdFx0dmFyIGEgPSBbXSwgaSwgaiwgbCwgbyA9IHt9O1xuXHRcdGZvcihpID0gMCwgbCA9IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0aWYob1thcnJheVtpXV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRhLnB1c2goYXJyYXlbaV0pO1xuXHRcdFx0XHRvW2FycmF5W2ldXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBhO1xuXHR9O1xuXHQvLyByZW1vdmUgaXRlbSBmcm9tIGFycmF5XG5cdCQudmFrYXRhLmFycmF5X3JlbW92ZSA9IGZ1bmN0aW9uKGFycmF5LCBmcm9tKSB7XG5cdFx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xuXHRcdHJldHVybiBhcnJheTtcblx0XHQvL3ZhciByZXN0ID0gYXJyYXkuc2xpY2UoKHRvIHx8IGZyb20pICsgMSB8fCBhcnJheS5sZW5ndGgpO1xuXHRcdC8vYXJyYXkubGVuZ3RoID0gZnJvbSA8IDAgPyBhcnJheS5sZW5ndGggKyBmcm9tIDogZnJvbTtcblx0XHQvL2FycmF5LnB1c2guYXBwbHkoYXJyYXksIHJlc3QpO1xuXHRcdC8vcmV0dXJuIGFycmF5O1xuXHR9O1xuXHQvLyByZW1vdmUgaXRlbSBmcm9tIGFycmF5XG5cdCQudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtID0gZnVuY3Rpb24oYXJyYXksIGl0ZW0pIHtcblx0XHR2YXIgdG1wID0gJC5pbkFycmF5KGl0ZW0sIGFycmF5KTtcblx0XHRyZXR1cm4gdG1wICE9PSAtMSA/ICQudmFrYXRhLmFycmF5X3JlbW92ZShhcnJheSwgdG1wKSA6IGFycmF5O1xuXHR9O1xuXHQkLnZha2F0YS5hcnJheV9maWx0ZXIgPSBmdW5jdGlvbihjLGEsYixkLGUpIHtcblx0XHRpZiAoYy5maWx0ZXIpIHtcblx0XHRcdHJldHVybiBjLmZpbHRlcihhLCBiKTtcblx0XHR9XG5cdFx0ZD1bXTtcblx0XHRmb3IgKGUgaW4gYykge1xuXHRcdFx0aWYgKH5+ZSsnJz09PWUrJycgJiYgZT49MCAmJiBhLmNhbGwoYixjW2VdLCtlLGMpKSB7XG5cdFx0XHRcdGQucHVzaChjW2VdKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGQ7XG5cdH07XG5cblxuLyoqXG4gKiAjIyMgQ2hhbmdlZCBwbHVnaW5cbiAqXG4gKiBUaGlzIHBsdWdpbiBhZGRzIG1vcmUgaW5mb3JtYXRpb24gdG8gdGhlIGBjaGFuZ2VkLmpzdHJlZWAgZXZlbnQuIFRoZSBuZXcgZGF0YSBpcyBjb250YWluZWQgaW4gdGhlIGBjaGFuZ2VkYCBldmVudCBkYXRhIHByb3BlcnR5LCBhbmQgY29udGFpbnMgYSBsaXN0cyBvZiBgc2VsZWN0ZWRgIGFuZCBgZGVzZWxlY3RlZGAgbm9kZXMuXG4gKi9cblxuXHQkLmpzdHJlZS5wbHVnaW5zLmNoYW5nZWQgPSBmdW5jdGlvbiAob3B0aW9ucywgcGFyZW50KSB7XG5cdFx0dmFyIGxhc3QgPSBbXTtcblx0XHR0aGlzLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXYsIGRhdGEpIHtcblx0XHRcdHZhciBpLCBqO1xuXHRcdFx0aWYoIWRhdGEpIHtcblx0XHRcdFx0ZGF0YSA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0aWYoZXYucmVwbGFjZSgnLmpzdHJlZScsJycpID09PSAnY2hhbmdlZCcpIHtcblx0XHRcdFx0ZGF0YS5jaGFuZ2VkID0geyBzZWxlY3RlZCA6IFtdLCBkZXNlbGVjdGVkIDogW10gfTtcblx0XHRcdFx0dmFyIHRtcCA9IHt9O1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBsYXN0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdHRtcFtsYXN0W2ldXSA9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZGF0YS5zZWxlY3RlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRpZighdG1wW2RhdGEuc2VsZWN0ZWRbaV1dKSB7XG5cdFx0XHRcdFx0XHRkYXRhLmNoYW5nZWQuc2VsZWN0ZWQucHVzaChkYXRhLnNlbGVjdGVkW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHR0bXBbZGF0YS5zZWxlY3RlZFtpXV0gPSAyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBsYXN0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGlmKHRtcFtsYXN0W2ldXSA9PT0gMSkge1xuXHRcdFx0XHRcdFx0ZGF0YS5jaGFuZ2VkLmRlc2VsZWN0ZWQucHVzaChsYXN0W2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0bGFzdCA9IGRhdGEuc2VsZWN0ZWQuc2xpY2UoKTtcblx0XHRcdH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gc2VsZWN0aW9uIGNoYW5nZXMgKHRoZSBcImNoYW5nZWRcIiBwbHVnaW4gZW5oYW5jZXMgdGhlIG9yaWdpbmFsIGV2ZW50IHdpdGggbW9yZSBkYXRhKVxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBjaGFuZ2VkLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gdGhlIGFjdGlvbiB0aGF0IGNhdXNlZCB0aGUgc2VsZWN0aW9uIHRvIGNoYW5nZVxuXHRcdFx0ICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG5cdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gY2hhbmdlZCBhbiBvYmplY3QgY29udGFpbmluZyB0d28gcHJvcGVydGllcyBgc2VsZWN0ZWRgIGFuZCBgZGVzZWxlY3RlZGAgLSBib3RoIGFycmF5cyBvZiBub2RlIElEcywgd2hpY2ggd2VyZSBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIHNpbmNlIHRoZSBsYXN0IGNoYW5nZWQgZXZlbnRcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCB0aGUgZXZlbnQgKGlmIGFueSkgdGhhdCB0cmlnZ2VyZWQgdGhpcyBjaGFuZ2VkIGV2ZW50XG5cdFx0XHQgKiBAcGx1Z2luIGNoYW5nZWRcblx0XHRcdCAqL1xuXHRcdFx0cGFyZW50LnRyaWdnZXIuY2FsbCh0aGlzLCBldiwgZGF0YSk7XG5cdFx0fTtcblx0XHR0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbiAoc2tpcF9sb2FkaW5nLCBmb3JnZXRfc3RhdGUpIHtcblx0XHRcdGxhc3QgPSBbXTtcblx0XHRcdHJldHVybiBwYXJlbnQucmVmcmVzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH07XG5cdH07XG5cbi8qKlxuICogIyMjIENoZWNrYm94IHBsdWdpblxuICpcbiAqIFRoaXMgcGx1Z2luIHJlbmRlcnMgY2hlY2tib3ggaWNvbnMgaW4gZnJvbnQgb2YgZWFjaCBub2RlLCBtYWtpbmcgbXVsdGlwbGUgc2VsZWN0aW9uIG11Y2ggZWFzaWVyLlxuICogSXQgYWxzbyBzdXBwb3J0cyB0cmktc3RhdGUgYmVoYXZpb3IsIG1lYW5pbmcgdGhhdCBpZiBhIG5vZGUgaGFzIGEgZmV3IG9mIGl0cyBjaGlsZHJlbiBjaGVja2VkIGl0IHdpbGwgYmUgcmVuZGVyZWQgYXMgdW5kZXRlcm1pbmVkLCBhbmQgc3RhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHVwLlxuICovXG5cblx0dmFyIF9pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnSScpO1xuXHRfaS5jbGFzc05hbWUgPSAnanN0cmVlLWljb24ganN0cmVlLWNoZWNrYm94Jztcblx0X2kuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3ByZXNlbnRhdGlvbicpO1xuXHQvKipcblx0ICogc3RvcmVzIGFsbCBkZWZhdWx0cyBmb3IgdGhlIGNoZWNrYm94IHBsdWdpblxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jaGVja2JveFxuXHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdCAqL1xuXHQkLmpzdHJlZS5kZWZhdWx0cy5jaGVja2JveCA9IHtcblx0XHQvKipcblx0XHQgKiBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBjaGVja2JveGVzIHNob3VsZCBiZSB2aXNpYmxlIChjYW4gYmUgY2hhbmdlZCBhdCBhIGxhdGVyIHRpbWUgdXNpbmcgYHNob3dfY2hlY2tib3hlcygpYCBhbmQgYGhpZGVfY2hlY2tib3hlc2ApLiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY2hlY2tib3gudmlzaWJsZVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR2aXNpYmxlXHRcdFx0XHQ6IHRydWUsXG5cdFx0LyoqXG5cdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgY2hlY2tib3hlcyBzaG91bGQgY2FzY2FkZSBkb3duIGFuZCBoYXZlIGFuIHVuZGV0ZXJtaW5lZCBzdGF0ZS4gRGVmYXVsdHMgdG8gYHRydWVgLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNoZWNrYm94LnRocmVlX3N0YXRlXG5cdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdCAqL1xuXHRcdHRocmVlX3N0YXRlXHRcdFx0OiB0cnVlLFxuXHRcdC8qKlxuXHRcdCAqIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGNsaWNraW5nIGFueXdoZXJlIG9uIHRoZSBub2RlIHNob3VsZCBhY3QgYXMgY2xpY2tpbmcgb24gdGhlIGNoZWNrYm94LiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY2hlY2tib3gud2hvbGVfbm9kZVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR3aG9sZV9ub2RlXHRcdFx0OiB0cnVlLFxuXHRcdC8qKlxuXHRcdCAqIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBzZWxlY3RlZCBzdHlsZSBvZiBhIG5vZGUgc2hvdWxkIGJlIGtlcHQsIG9yIHJlbW92ZWQuIERlZmF1bHRzIHRvIGB0cnVlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jaGVja2JveC5rZWVwX3NlbGVjdGVkX3N0eWxlXG5cdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdCAqL1xuXHRcdGtlZXBfc2VsZWN0ZWRfc3R5bGVcdDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBUaGlzIHNldHRpbmcgY29udHJvbHMgaG93IGNhc2NhZGluZyBhbmQgdW5kZXRlcm1pbmVkIG5vZGVzIGFyZSBhcHBsaWVkLlxuXHRcdCAqIElmICd1cCcgaXMgaW4gdGhlIHN0cmluZyAtIGNhc2NhZGluZyB1cCBpcyBlbmFibGVkLCBpZiAnZG93bicgaXMgaW4gdGhlIHN0cmluZyAtIGNhc2NhZGluZyBkb3duIGlzIGVuYWJsZWQsIGlmICd1bmRldGVybWluZWQnIGlzIGluIHRoZSBzdHJpbmcgLSB1bmRldGVybWluZWQgbm9kZXMgd2lsbCBiZSB1c2VkLlxuXHRcdCAqIElmIGB0aHJlZV9zdGF0ZWAgaXMgc2V0IHRvIGB0cnVlYCB0aGlzIHNldHRpbmcgaXMgYXV0b21hdGljYWxseSBzZXQgdG8gJ3VwK2Rvd24rdW5kZXRlcm1pbmVkJy4gRGVmYXVsdHMgdG8gJycuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY2hlY2tib3guY2FzY2FkZVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHRjYXNjYWRlXHRcdFx0XHQ6ICcnLFxuXHRcdC8qKlxuXHRcdCAqIFRoaXMgc2V0dGluZyBjb250cm9scyBpZiBjaGVja2JveCBhcmUgYm91bmQgdG8gdGhlIGdlbmVyYWwgdHJlZSBzZWxlY3Rpb24gb3IgdG8gYW4gaW50ZXJuYWwgYXJyYXkgbWFpbnRhaW5lZCBieSB0aGUgY2hlY2tib3ggcGx1Z2luLiBEZWZhdWx0cyB0byBgdHJ1ZWAsIG9ubHkgc2V0IHRvIGBmYWxzZWAgaWYgeW91IGtub3cgZXhhY3RseSB3aGF0IHlvdSBhcmUgZG9pbmcuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuY2hlY2tib3gudGllX3NlbGVjdGlvblxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR0aWVfc2VsZWN0aW9uXHRcdDogdHJ1ZVxuXHR9O1xuXHQkLmpzdHJlZS5wbHVnaW5zLmNoZWNrYm94ID0gZnVuY3Rpb24gKG9wdGlvbnMsIHBhcmVudCkge1xuXHRcdHRoaXMuYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHBhcmVudC5iaW5kLmNhbGwodGhpcyk7XG5cdFx0XHR0aGlzLl9kYXRhLmNoZWNrYm94LnV0byA9IGZhbHNlO1xuXHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCA9IFtdO1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aHJlZV9zdGF0ZSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUgPSAndXArZG93bit1bmRldGVybWluZWQnO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdC5vbihcImluaXQuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC52aXNpYmxlID0gdGhpcy5zZXR0aW5ncy5jaGVja2JveC52aXNpYmxlO1xuXHRcdFx0XHRcdFx0aWYoIXRoaXMuc2V0dGluZ3MuY2hlY2tib3gua2VlcF9zZWxlY3RlZF9zdHlsZSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoJ2pzdHJlZS1jaGVja2JveC1uby1jbGlja2VkJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCdqc3RyZWUtY2hlY2tib3gtc2VsZWN0aW9uJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcImxvYWRpbmcuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhpc1sgdGhpcy5fZGF0YS5jaGVja2JveC52aXNpYmxlID8gJ3Nob3dfY2hlY2tib3hlcycgOiAnaGlkZV9jaGVja2JveGVzJyBdKCk7XG5cdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoJ3VuZGV0ZXJtaW5lZCcpICE9PSAtMSkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0XHQub24oJ2NoYW5nZWQuanN0cmVlIHVuY2hlY2tfbm9kZS5qc3RyZWUgY2hlY2tfbm9kZS5qc3RyZWUgdW5jaGVja19hbGwuanN0cmVlIGNoZWNrX2FsbC5qc3RyZWUgbW92ZV9ub2RlLmpzdHJlZSBjb3B5X25vZGUuanN0cmVlIHJlZHJhdy5qc3RyZWUgb3Blbl9ub2RlLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHQvLyBvbmx5IGlmIHVuZGV0ZXJtaW5lZCBpcyBpbiBzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMuX2RhdGEuY2hlY2tib3gudXRvKSB7IGNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byk7IH1cblx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC51dG8gPSBzZXRUaW1lb3V0KCQucHJveHkodGhpcy5fdW5kZXRlcm1pbmVkLCB0aGlzKSwgNTApO1xuXHRcdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0fVxuXHRcdFx0aWYoIXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbikge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0XHQub24oJ21vZGVsLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdHZhciBtID0gdGhpcy5fbW9kZWwuZGF0YSxcblx0XHRcdFx0XHRcdFx0cCA9IG1bZGF0YS5wYXJlbnRdLFxuXHRcdFx0XHRcdFx0XHRkcGMgPSBkYXRhLm5vZGVzLFxuXHRcdFx0XHRcdFx0XHRpLCBqO1xuXHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZHBjLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRtW2RwY1tpXV0uc3RhdGUuY2hlY2tlZCA9IG1bZHBjW2ldXS5zdGF0ZS5jaGVja2VkIHx8IChtW2RwY1tpXV0ub3JpZ2luYWwgJiYgbVtkcGNbaV1dLm9yaWdpbmFsLnN0YXRlICYmIG1bZHBjW2ldXS5vcmlnaW5hbC5zdGF0ZS5jaGVja2VkKTtcblx0XHRcdFx0XHRcdFx0aWYobVtkcGNbaV1dLnN0YXRlLmNoZWNrZWQpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2goZHBjW2ldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKCd1cCcpICE9PSAtMSB8fCB0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZignZG93bicpICE9PSAtMSkge1xuXHRcdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0XHQub24oJ21vZGVsLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0dmFyIG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdHAgPSBtW2RhdGEucGFyZW50XSxcblx0XHRcdFx0XHRcdFx0XHRkcGMgPSBkYXRhLm5vZGVzLFxuXHRcdFx0XHRcdFx0XHRcdGNoZCA9IFtdLFxuXHRcdFx0XHRcdFx0XHRcdGMsIGksIGosIGssIGwsIHRtcCwgcyA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSwgdCA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjtcblxuXHRcdFx0XHRcdFx0XHRpZihzLmluZGV4T2YoJ2Rvd24nKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBhcHBseSBkb3duXG5cdFx0XHRcdFx0XHRcdFx0aWYocC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZHBjLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtW2RwY1tpXV0uc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZCA9IHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQuY29uY2F0KGRwYyk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZHBjLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihtW2RwY1tpXV0uc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IoayA9IDAsIGwgPSBtW2RwY1tpXV0uY2hpbGRyZW5fZC5sZW5ndGg7IGsgPCBsOyBrKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1bbVtkcGNbaV1dLmNoaWxkcmVuX2Rba11dLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZCA9IHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQuY29uY2F0KG1bZHBjW2ldXS5jaGlsZHJlbl9kKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmKHMuaW5kZXhPZigndXAnKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBhcHBseSB1cFxuXHRcdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IHAuY2hpbGRyZW5fZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmKCFtW3AuY2hpbGRyZW5fZFtpXV0uY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNoZC5wdXNoKG1bcC5jaGlsZHJlbl9kW2ldXS5wYXJlbnQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRjaGQgPSAkLnZha2F0YS5hcnJheV91bmlxdWUoY2hkKTtcblx0XHRcdFx0XHRcdFx0XHRmb3IoayA9IDAsIGwgPSBjaGQubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwID0gbVtjaGRba11dO1xuXHRcdFx0XHRcdFx0XHRcdFx0d2hpbGUocCAmJiBwLmlkICE9PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGMgPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBwLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGMgKz0gbVtwLmNoaWxkcmVuW2ldXS5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihjID09PSBqKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZC5wdXNoKHAuaWQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X25vZGUocCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5hdHRyKCdhcmlhLXNlbGVjdGVkJywgdHJ1ZSkuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuYWRkQ2xhc3MoIHQgPyAnanN0cmVlLWNsaWNrZWQnIDogJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHAgPSB0aGlzLmdldF9ub2RlKHAucGFyZW50KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhWyB0ID8gJ2NvcmUnIDogJ2NoZWNrYm94JyBdLnNlbGVjdGVkID0gJC52YWthdGEuYXJyYXlfdW5pcXVlKHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQpO1xuXHRcdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdFx0Lm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiA/ICdzZWxlY3Rfbm9kZS5qc3RyZWUnIDogJ2NoZWNrX25vZGUuanN0cmVlJywgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgb2JqID0gZGF0YS5ub2RlLFxuXHRcdFx0XHRcdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdHBhciA9IHRoaXMuZ2V0X25vZGUob2JqLnBhcmVudCksXG5cdFx0XHRcdFx0XHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpLFxuXHRcdFx0XHRcdFx0XHRcdGksIGosIGMsIHRtcCwgcyA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSwgdCA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixcblx0XHRcdFx0XHRcdFx0XHRzZWwgPSB7fSwgY3VyID0gdGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZDtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKGkgPSAwLCBqID0gY3VyLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdHNlbFtjdXJbaV1dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQvLyBhcHBseSBkb3duXG5cdFx0XHRcdFx0XHRcdGlmKHMuaW5kZXhPZignZG93bicpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vdGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZCA9ICQudmFrYXRhLmFycmF5X3VuaXF1ZSh0aGlzLl9kYXRhWyB0ID8gJ2NvcmUnIDogJ2NoZWNrYm94JyBdLnNlbGVjdGVkLmNvbmNhdChvYmouY2hpbGRyZW5fZCkpO1xuXHRcdFx0XHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5jaGlsZHJlbl9kLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsW29iai5jaGlsZHJlbl9kW2ldXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSBtW29iai5jaGlsZHJlbl9kW2ldXTtcblx0XHRcdFx0XHRcdFx0XHRcdHRtcC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgdG1wLm9yaWdpbmFsICYmIHRtcC5vcmlnaW5hbC5zdGF0ZSAmJiB0bXAub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBhcHBseSB1cFxuXHRcdFx0XHRcdFx0XHRpZihzLmluZGV4T2YoJ3VwJykgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUocGFyICYmIHBhci5pZCAhPT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YyA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBwYXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGMgKz0gbVtwYXIuY2hpbGRyZW5baV1dLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoYyA9PT0gaikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXIuc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxbcGFyLmlkXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vdGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZC5wdXNoKHBhci5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X25vZGUocGFyLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAuYXR0cignYXJpYS1zZWxlY3RlZCcsIHRydWUpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmFkZENsYXNzKHQgPyAnanN0cmVlLWNsaWNrZWQnIDogJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHBhciA9IHRoaXMuZ2V0X25vZGUocGFyLnBhcmVudCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Y3VyID0gW107XG5cdFx0XHRcdFx0XHRcdGZvciAoaSBpbiBzZWwpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXIucHVzaChpKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZCA9IGN1cjtcblxuXHRcdFx0XHRcdFx0XHQvLyBhcHBseSBkb3duIChwcm9jZXNzIC5jaGlsZHJlbiBzZXBhcmF0ZWx5Pylcblx0XHRcdFx0XHRcdFx0aWYocy5pbmRleE9mKCdkb3duJykgIT09IC0xICYmIGRvbS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRkb20uZmluZCgnLmpzdHJlZS1hbmNob3InKS5hZGRDbGFzcyh0ID8gJ2pzdHJlZS1jbGlja2VkJyA6ICdqc3RyZWUtY2hlY2tlZCcpLnBhcmVudCgpLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdFx0Lm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiA/ICdkZXNlbGVjdF9hbGwuanN0cmVlJyA6ICd1bmNoZWNrX2FsbC5qc3RyZWUnLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBvYmogPSB0aGlzLmdldF9ub2RlKCQuanN0cmVlLnJvb3QpLFxuXHRcdFx0XHRcdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdGksIGosIHRtcDtcblx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG1wID0gbVtvYmouY2hpbGRyZW5fZFtpXV07XG5cdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5vcmlnaW5hbCAmJiB0bXAub3JpZ2luYWwuc3RhdGUgJiYgdG1wLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdFx0Lm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiA/ICdkZXNlbGVjdF9ub2RlLmpzdHJlZScgOiAndW5jaGVja19ub2RlLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0dmFyIG9iaiA9IGRhdGEubm9kZSxcblx0XHRcdFx0XHRcdFx0XHRkb20gPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSksXG5cdFx0XHRcdFx0XHRcdFx0aSwgaiwgdG1wLCBzID0gdGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLCB0ID0gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdGN1ciA9IHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQsIHNlbCA9IHt9O1xuXHRcdFx0XHRcdFx0XHRpZihvYmogJiYgb2JqLm9yaWdpbmFsICYmIG9iai5vcmlnaW5hbC5zdGF0ZSAmJiBvYmoub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0b2JqLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gYXBwbHkgZG93blxuXHRcdFx0XHRcdFx0XHRpZihzLmluZGV4T2YoJ2Rvd24nKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW5fZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRtcCA9IHRoaXMuX21vZGVsLmRhdGFbb2JqLmNoaWxkcmVuX2RbaV1dO1xuXHRcdFx0XHRcdFx0XHRcdFx0dG1wLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgdG1wLm9yaWdpbmFsICYmIHRtcC5vcmlnaW5hbC5zdGF0ZSAmJiB0bXAub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyBhcHBseSB1cFxuXHRcdFx0XHRcdFx0XHRpZihzLmluZGV4T2YoJ3VwJykgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLnBhcmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLl9tb2RlbC5kYXRhW29iai5wYXJlbnRzW2ldXTtcblx0XHRcdFx0XHRcdFx0XHRcdHRtcC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5vcmlnaW5hbCAmJiB0bXAub3JpZ2luYWwuc3RhdGUgJiYgdG1wLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKG9iai5wYXJlbnRzW2ldLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmKHRtcCAmJiB0bXAubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5hdHRyKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKHQgPyAnanN0cmVlLWNsaWNrZWQnIDogJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHNlbCA9IHt9O1xuXHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBjdXIubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gYXBwbHkgZG93biArIGFwcGx5IHVwXG5cdFx0XHRcdFx0XHRcdFx0aWYoXG5cdFx0XHRcdFx0XHRcdFx0XHQocy5pbmRleE9mKCdkb3duJykgPT09IC0xIHx8ICQuaW5BcnJheShjdXJbaV0sIG9iai5jaGlsZHJlbl9kKSA9PT0gLTEpICYmXG5cdFx0XHRcdFx0XHRcdFx0XHQocy5pbmRleE9mKCd1cCcpID09PSAtMSB8fCAkLmluQXJyYXkoY3VyW2ldLCBvYmoucGFyZW50cykgPT09IC0xKVxuXHRcdFx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsW2N1cltpXV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjdXIgPSBbXTtcblx0XHRcdFx0XHRcdFx0Zm9yIChpIGluIHNlbCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWwuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1ci5wdXNoKGkpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhWyB0ID8gJ2NvcmUnIDogJ2NoZWNrYm94JyBdLnNlbGVjdGVkID0gY3VyO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gYXBwbHkgZG93biAocHJvY2VzcyAuY2hpbGRyZW4gc2VwYXJhdGVseT8pXG5cdFx0XHRcdFx0XHRcdGlmKHMuaW5kZXhPZignZG93bicpICE9PSAtMSAmJiBkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZG9tLmZpbmQoJy5qc3RyZWUtYW5jaG9yJykucmVtb3ZlQ2xhc3ModCA/ICdqc3RyZWUtY2xpY2tlZCcgOiAnanN0cmVlLWNoZWNrZWQnKS5wYXJlbnQoKS5hdHRyKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHR9XG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZigndXAnKSAhPT0gLTEpIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdFx0Lm9uKCdkZWxldGVfbm9kZS5qc3RyZWUnLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGFwcGx5IHVwICh3aG9sZSBoYW5kbGVyKVxuXHRcdFx0XHRcdFx0XHR2YXIgcCA9IHRoaXMuZ2V0X25vZGUoZGF0YS5wYXJlbnQpLFxuXHRcdFx0XHRcdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdGksIGosIGMsIHRtcCwgdCA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjtcblx0XHRcdFx0XHRcdFx0d2hpbGUocCAmJiBwLmlkICE9PSAkLmpzdHJlZS5yb290ICYmICFwLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdKSB7XG5cdFx0XHRcdFx0XHRcdFx0YyA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gcC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdGMgKz0gbVtwLmNoaWxkcmVuW2ldXS5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYoaiA+IDAgJiYgYyA9PT0gaikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhWyB0ID8gJ2NvcmUnIDogJ2NoZWNrYm94JyBdLnNlbGVjdGVkLnB1c2gocC5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKHAsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dG1wLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCB0cnVlKS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5hZGRDbGFzcyh0ID8gJ2pzdHJlZS1jbGlja2VkJyA6ICdqc3RyZWUtY2hlY2tlZCcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRwID0gdGhpcy5nZXRfbm9kZShwLnBhcmVudCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHRcdC5vbignbW92ZV9ub2RlLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0Ly8gYXBwbHkgdXAgKHdob2xlIGhhbmRsZXIpXG5cdFx0XHRcdFx0XHRcdHZhciBpc19tdWx0aSA9IGRhdGEuaXNfbXVsdGksXG5cdFx0XHRcdFx0XHRcdFx0b2xkX3BhciA9IGRhdGEub2xkX3BhcmVudCxcblx0XHRcdFx0XHRcdFx0XHRuZXdfcGFyID0gdGhpcy5nZXRfbm9kZShkYXRhLnBhcmVudCksXG5cdFx0XHRcdFx0XHRcdFx0bSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0cCwgYywgaSwgaiwgdG1wLCB0ID0gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uO1xuXHRcdFx0XHRcdFx0XHRpZighaXNfbXVsdGkpIHtcblx0XHRcdFx0XHRcdFx0XHRwID0gdGhpcy5nZXRfbm9kZShvbGRfcGFyKTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZShwICYmIHAuaWQgIT09ICQuanN0cmVlLnJvb3QgJiYgIXAuc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdGMgPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gcC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YyArPSBtW3AuY2hpbGRyZW5baV1dLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoaiA+IDAgJiYgYyA9PT0gaikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZC5wdXNoKHAuaWQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKHAsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgdG1wLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5hdHRyKCdhcmlhLXNlbGVjdGVkJywgdHJ1ZSkuY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuYWRkQ2xhc3ModCA/ICdqc3RyZWUtY2xpY2tlZCcgOiAnanN0cmVlLWNoZWNrZWQnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cCA9IHRoaXMuZ2V0X25vZGUocC5wYXJlbnQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRwID0gbmV3X3Bhcjtcblx0XHRcdFx0XHRcdFx0d2hpbGUocCAmJiBwLmlkICE9PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdFx0XHRcdFx0YyA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gcC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdGMgKz0gbVtwLmNoaWxkcmVuW2ldXS5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYoYyA9PT0gaikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIXAuc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cC5zdGF0ZVsgdCA/ICdzZWxlY3RlZCcgOiAnY2hlY2tlZCcgXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQucHVzaChwLmlkKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dG1wID0gdGhpcy5nZXRfbm9kZShwLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYodG1wICYmIHRtcC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAuYXR0cignYXJpYS1zZWxlY3RlZCcsIHRydWUpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmFkZENsYXNzKHQgPyAnanN0cmVlLWNsaWNrZWQnIDogJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihwLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHAuc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YVsgdCA/ICdjb3JlJyA6ICdjaGVja2JveCcgXS5zZWxlY3RlZCA9ICQudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQsIHAuaWQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKHAsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgdG1wLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRtcC5hdHRyKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKHQgPyAnanN0cmVlLWNsaWNrZWQnIDogJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cCA9IHRoaXMuZ2V0X25vZGUocC5wYXJlbnQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiBzZXQgdGhlIHVuZGV0ZXJtaW5lZCBzdGF0ZSB3aGVyZSBhbmQgaWYgbmVjZXNzYXJ5LiBVc2VkIGludGVybmFsbHkuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBfdW5kZXRlcm1pbmVkKClcblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5fdW5kZXRlcm1pbmVkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYodGhpcy5lbGVtZW50ID09PSBudWxsKSB7IHJldHVybjsgfVxuXHRcdFx0dmFyIGksIGosIGssIGwsIG8gPSB7fSwgbSA9IHRoaXMuX21vZGVsLmRhdGEsIHQgPSB0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sIHMgPSB0aGlzLl9kYXRhWyB0ID8gJ2NvcmUnIDogJ2NoZWNrYm94JyBdLnNlbGVjdGVkLCBwID0gW10sIHR0ID0gdGhpcztcblx0XHRcdGZvcihpID0gMCwgaiA9IHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGlmKG1bc1tpXV0gJiYgbVtzW2ldXS5wYXJlbnRzKSB7XG5cdFx0XHRcdFx0Zm9yKGsgPSAwLCBsID0gbVtzW2ldXS5wYXJlbnRzLmxlbmd0aDsgayA8IGw7IGsrKykge1xuXHRcdFx0XHRcdFx0aWYob1ttW3NbaV1dLnBhcmVudHNba11dICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihtW3NbaV1dLnBhcmVudHNba10gIT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRcdFx0b1ttW3NbaV1dLnBhcmVudHNba11dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0cC5wdXNoKG1bc1tpXV0ucGFyZW50c1trXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBhdHRlbXB0IGZvciBzZXJ2ZXIgc2lkZSB1bmRldGVybWluZWQgc3RhdGVcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCcuanN0cmVlLWNsb3NlZCcpLm5vdCgnOmhhcyguanN0cmVlLWNoaWxkcmVuKScpXG5cdFx0XHRcdC5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgdG1wID0gdHQuZ2V0X25vZGUodGhpcyksIHRtcDI7XG5cdFx0XHRcdFx0aWYoIXRtcC5zdGF0ZS5sb2FkZWQpIHtcblx0XHRcdFx0XHRcdGlmKHRtcC5vcmlnaW5hbCAmJiB0bXAub3JpZ2luYWwuc3RhdGUgJiYgdG1wLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCAmJiB0bXAub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdGlmKG9bdG1wLmlkXSA9PT0gdW5kZWZpbmVkICYmIHRtcC5pZCAhPT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRcdFx0XHRcdG9bdG1wLmlkXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0cC5wdXNoKHRtcC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Zm9yKGsgPSAwLCBsID0gdG1wLnBhcmVudHMubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYob1t0bXAucGFyZW50c1trXV0gPT09IHVuZGVmaW5lZCAmJiB0bXAucGFyZW50c1trXSAhPT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0b1t0bXAucGFyZW50c1trXV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0cC5wdXNoKHRtcC5wYXJlbnRzW2tdKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSB0bXAuY2hpbGRyZW5fZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0dG1wMiA9IG1bdG1wLmNoaWxkcmVuX2RbaV1dO1xuXHRcdFx0XHRcdFx0XHRpZighdG1wMi5zdGF0ZS5sb2FkZWQgJiYgdG1wMi5vcmlnaW5hbCAmJiB0bXAyLm9yaWdpbmFsLnN0YXRlICYmIHRtcDIub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkICYmIHRtcDIub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYob1t0bXAyLmlkXSA9PT0gdW5kZWZpbmVkICYmIHRtcDIuaWQgIT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG9bdG1wMi5pZF0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0cC5wdXNoKHRtcDIuaWQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRmb3IoayA9IDAsIGwgPSB0bXAyLnBhcmVudHMubGVuZ3RoOyBrIDwgbDsgaysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihvW3RtcDIucGFyZW50c1trXV0gPT09IHVuZGVmaW5lZCAmJiB0bXAyLnBhcmVudHNba10gIT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b1t0bXAyLnBhcmVudHNba11dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cC5wdXNoKHRtcDIucGFyZW50c1trXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoJy5qc3RyZWUtdW5kZXRlcm1pbmVkJykucmVtb3ZlQ2xhc3MoJ2pzdHJlZS11bmRldGVybWluZWQnKTtcblx0XHRcdGZvcihpID0gMCwgaiA9IHAubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGlmKCFtW3BbaV1dLnN0YXRlWyB0ID8gJ3NlbGVjdGVkJyA6ICdjaGVja2VkJyBdKSB7XG5cdFx0XHRcdFx0cyA9IHRoaXMuZ2V0X25vZGUocFtpXSwgdHJ1ZSk7XG5cdFx0XHRcdFx0aWYocyAmJiBzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0cy5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5jaGlsZHJlbignLmpzdHJlZS1jaGVja2JveCcpLmFkZENsYXNzKCdqc3RyZWUtdW5kZXRlcm1pbmVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHR0aGlzLnJlZHJhd19ub2RlID0gZnVuY3Rpb24ob2JqLCBkZWVwLCBpc19jYWxsYmFjaywgZm9yY2VfcmVuZGVyKSB7XG5cdFx0XHRvYmogPSBwYXJlbnQucmVkcmF3X25vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdGlmKG9iaikge1xuXHRcdFx0XHR2YXIgaSwgaiwgdG1wID0gbnVsbCwgaWNvbiA9IG51bGw7XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGlmKG9iai5jaGlsZE5vZGVzW2ldICYmIG9iai5jaGlsZE5vZGVzW2ldLmNsYXNzTmFtZSAmJiBvYmouY2hpbGROb2Rlc1tpXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHR0bXAgPSBvYmouY2hpbGROb2Rlc1tpXTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZih0bXApIHtcblx0XHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uICYmIHRoaXMuX21vZGVsLmRhdGFbb2JqLmlkXS5zdGF0ZS5jaGVja2VkKSB7IHRtcC5jbGFzc05hbWUgKz0gJyBqc3RyZWUtY2hlY2tlZCc7IH1cblx0XHRcdFx0XHRpY29uID0gX2kuY2xvbmVOb2RlKGZhbHNlKTtcblx0XHRcdFx0XHRpZih0aGlzLl9tb2RlbC5kYXRhW29iai5pZF0uc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQpIHsgaWNvbi5jbGFzc05hbWUgKz0gJyBqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWQnOyB9XG5cdFx0XHRcdFx0dG1wLmluc2VydEJlZm9yZShpY29uLCB0bXAuY2hpbGROb2Rlc1swXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKCFpc19jYWxsYmFjayAmJiB0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZigndW5kZXRlcm1pbmVkJykgIT09IC0xKSB7XG5cdFx0XHRcdGlmKHRoaXMuX2RhdGEuY2hlY2tib3gudXRvKSB7IGNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byk7IH1cblx0XHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC51dG8gPSBzZXRUaW1lb3V0KCQucHJveHkodGhpcy5fdW5kZXRlcm1pbmVkLCB0aGlzKSwgNTApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIHNob3cgdGhlIG5vZGUgY2hlY2tib3ggaWNvbnNcblx0XHQgKiBAbmFtZSBzaG93X2NoZWNrYm94ZXMoKVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR0aGlzLnNob3dfY2hlY2tib3hlcyA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzID0gdHJ1ZTsgdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbm8tY2hlY2tib3hlc1wiKTsgfTtcblx0XHQvKipcblx0XHQgKiBoaWRlIHRoZSBub2RlIGNoZWNrYm94IGljb25zXG5cdFx0ICogQG5hbWUgaGlkZV9jaGVja2JveGVzKClcblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5oaWRlX2NoZWNrYm94ZXMgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX2RhdGEuY29yZS50aGVtZXMuY2hlY2tib3hlcyA9IGZhbHNlOyB0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1jaGVja2JveGVzXCIpOyB9O1xuXHRcdC8qKlxuXHRcdCAqIHRvZ2dsZSB0aGUgbm9kZSBpY29uc1xuXHRcdCAqIEBuYW1lIHRvZ2dsZV9jaGVja2JveGVzKClcblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy50b2dnbGVfY2hlY2tib3hlcyA9IGZ1bmN0aW9uICgpIHsgaWYodGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzKSB7IHRoaXMuaGlkZV9jaGVja2JveGVzKCk7IH0gZWxzZSB7IHRoaXMuc2hvd19jaGVja2JveGVzKCk7IH0gfTtcblx0XHQvKipcblx0XHQgKiBjaGVja3MgaWYgYSBub2RlIGlzIGluIGFuIHVuZGV0ZXJtaW5lZCBzdGF0ZVxuXHRcdCAqIEBuYW1lIGlzX3VuZGV0ZXJtaW5lZChvYmopXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9IG9ialxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0dGhpcy5pc191bmRldGVybWluZWQgPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHR2YXIgcyA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSwgaSwgaiwgdCA9IHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiwgZCA9IHRoaXMuX2RhdGFbIHQgPyAnY29yZScgOiAnY2hlY2tib3gnIF0uc2VsZWN0ZWQsIG0gPSB0aGlzLl9tb2RlbC5kYXRhO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouc3RhdGVbIHQgPyAnc2VsZWN0ZWQnIDogJ2NoZWNrZWQnIF0gPT09IHRydWUgfHwgcy5pbmRleE9mKCd1bmRldGVybWluZWQnKSA9PT0gLTEgfHwgKHMuaW5kZXhPZignZG93bicpID09PSAtMSAmJiBzLmluZGV4T2YoJ3VwJykgPT09IC0xKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZighb2JqLnN0YXRlLmxvYWRlZCAmJiBvYmoub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkID09PSB0cnVlKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkcmVuX2QubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGlmKCQuaW5BcnJheShvYmouY2hpbGRyZW5fZFtpXSwgZCkgIT09IC0xIHx8ICghbVtvYmouY2hpbGRyZW5fZFtpXV0uc3RhdGUubG9hZGVkICYmIG1bb2JqLmNoaWxkcmVuX2RbaV1dLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogZGlzYWJsZSBhIG5vZGUncyBjaGVja2JveFxuXHRcdCAqIEBuYW1lIGRpc2FibGVfY2hlY2tib3gob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiBhbiBhcnJheSBjYW4gYmUgdXNlZCB0b29cblx0XHQgKiBAdHJpZ2dlciBkaXNhYmxlX2NoZWNrYm94LmpzdHJlZVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR0aGlzLmRpc2FibGVfY2hlY2tib3ggPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHR2YXIgdDEsIHQyLCBkb207XG5cdFx0XHRpZigkLmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRvYmogPSBvYmouc2xpY2UoKTtcblx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBvYmoubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5kaXNhYmxlX2NoZWNrYm94KG9ialt0MV0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYoIW9iai5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCkge1xuXHRcdFx0XHRvYmouc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRpZihkb20gJiYgZG9tLmxlbmd0aCkge1xuXHRcdFx0XHRcdGRvbS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5jaGlsZHJlbignLmpzdHJlZS1jaGVja2JveCcpLmFkZENsYXNzKCdqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYW4gbm9kZSdzIGNoZWNrYm94IGlzIGRpc2FibGVkXG5cdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHQgKiBAbmFtZSBkaXNhYmxlX2NoZWNrYm94LmpzdHJlZVxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZVxuXHRcdFx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ2Rpc2FibGVfY2hlY2tib3gnLCB7ICdub2RlJyA6IG9iaiB9KTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIGVuYWJsZSBhIG5vZGUncyBjaGVja2JveFxuXHRcdCAqIEBuYW1lIGRpc2FibGVfY2hlY2tib3gob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiBhbiBhcnJheSBjYW4gYmUgdXNlZCB0b29cblx0XHQgKiBAdHJpZ2dlciBlbmFibGVfY2hlY2tib3guanN0cmVlXG5cdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdCAqL1xuXHRcdHRoaXMuZW5hYmxlX2NoZWNrYm94ID0gZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0dmFyIHQxLCB0MiwgZG9tO1xuXHRcdFx0aWYoJC5pc0FycmF5KG9iaikpIHtcblx0XHRcdFx0b2JqID0gb2JqLnNsaWNlKCk7XG5cdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gb2JqLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdHRoaXMuZW5hYmxlX2NoZWNrYm94KG9ialt0MV0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpO1xuXHRcdFx0aWYob2JqLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkKSB7XG5cdFx0XHRcdG9iai5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihkb20gJiYgZG9tLmxlbmd0aCkge1xuXHRcdFx0XHRcdGRvbS5jaGlsZHJlbignLmpzdHJlZS1hbmNob3InKS5jaGlsZHJlbignLmpzdHJlZS1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gYW4gbm9kZSdzIGNoZWNrYm94IGlzIGVuYWJsZWRcblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIGVuYWJsZV9jaGVja2JveC5qc3RyZWVcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dGhpcy50cmlnZ2VyKCdlbmFibGVfY2hlY2tib3gnLCB7ICdub2RlJyA6IG9iaiB9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dGhpcy5hY3RpdmF0ZV9ub2RlID0gZnVuY3Rpb24gKG9iaiwgZSkge1xuXHRcdFx0aWYoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2pzdHJlZS1jaGVja2JveC1kaXNhYmxlZCcpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiAmJiAodGhpcy5zZXR0aW5ncy5jaGVja2JveC53aG9sZV9ub2RlIHx8ICQoZS50YXJnZXQpLmhhc0NsYXNzKCdqc3RyZWUtY2hlY2tib3gnKSkpIHtcblx0XHRcdFx0ZS5jdHJsS2V5ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbiB8fCAoIXRoaXMuc2V0dGluZ3MuY2hlY2tib3gud2hvbGVfbm9kZSAmJiAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2pzdHJlZS1jaGVja2JveCcpKSkge1xuXHRcdFx0XHRyZXR1cm4gcGFyZW50LmFjdGl2YXRlX25vZGUuY2FsbCh0aGlzLCBvYmosIGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYodGhpcy5pc19kaXNhYmxlZChvYmopKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuaXNfY2hlY2tlZChvYmopKSB7XG5cdFx0XHRcdHRoaXMudW5jaGVja19ub2RlKG9iaiwgZSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGhpcy5jaGVja19ub2RlKG9iaiwgZSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2FjdGl2YXRlX25vZGUnLCB7ICdub2RlJyA6IHRoaXMuZ2V0X25vZGUob2JqKSB9KTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogY2hlY2sgYSBub2RlIChvbmx5IGlmIHRpZV9zZWxlY3Rpb24gaW4gY2hlY2tib3ggc2V0dGluZ3MgaXMgZmFsc2UsIG90aGVyd2lzZSBzZWxlY3Rfbm9kZSB3aWxsIGJlIGNhbGxlZCBpbnRlcm5hbGx5KVxuXHRcdCAqIEBuYW1lIGNoZWNrX25vZGUob2JqKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiBhbiBhcnJheSBjYW4gYmUgdXNlZCB0byBjaGVjayBtdWx0aXBsZSBub2Rlc1xuXHRcdCAqIEB0cmlnZ2VyIGNoZWNrX25vZGUuanN0cmVlXG5cdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdCAqL1xuXHRcdHRoaXMuY2hlY2tfbm9kZSA9IGZ1bmN0aW9uIChvYmosIGUpIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbikgeyByZXR1cm4gdGhpcy5zZWxlY3Rfbm9kZShvYmosIGZhbHNlLCB0cnVlLCBlKTsgfVxuXHRcdFx0dmFyIGRvbSwgdDEsIHQyLCB0aDtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLmNoZWNrX25vZGUob2JqW3QxXSwgZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqIHx8IG9iai5pZCA9PT0gJC5qc3RyZWUucm9vdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRkb20gPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSk7XG5cdFx0XHRpZighb2JqLnN0YXRlLmNoZWNrZWQpIHtcblx0XHRcdFx0b2JqLnN0YXRlLmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2gob2JqLmlkKTtcblx0XHRcdFx0aWYoZG9tICYmIGRvbS5sZW5ndGgpIHtcblx0XHRcdFx0XHRkb20uY2hpbGRyZW4oJy5qc3RyZWUtYW5jaG9yJykuYWRkQ2xhc3MoJ2pzdHJlZS1jaGVja2VkJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIHRyaWdnZXJlZCB3aGVuIGFuIG5vZGUgaXMgY2hlY2tlZCAob25seSBpZiB0aWVfc2VsZWN0aW9uIGluIGNoZWNrYm94IHNldHRpbmdzIGlzIGZhbHNlKVxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgY2hlY2tfbm9kZS5qc3RyZWVcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IG5vZGVcblx0XHRcdFx0ICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG5cdFx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCB0aGUgZXZlbnQgKGlmIGFueSkgdGhhdCB0cmlnZ2VyZWQgdGhpcyBjaGVja19ub2RlXG5cdFx0XHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHRcdFx0ICovXG5cdFx0XHRcdHRoaXMudHJpZ2dlcignY2hlY2tfbm9kZScsIHsgJ25vZGUnIDogb2JqLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCwgJ2V2ZW50JyA6IGUgfSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiB1bmNoZWNrIGEgbm9kZSAob25seSBpZiB0aWVfc2VsZWN0aW9uIGluIGNoZWNrYm94IHNldHRpbmdzIGlzIGZhbHNlLCBvdGhlcndpc2UgZGVzZWxlY3Rfbm9kZSB3aWxsIGJlIGNhbGxlZCBpbnRlcm5hbGx5KVxuXHRcdCAqIEBuYW1lIHVuY2hlY2tfbm9kZShvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIGFuIGFycmF5IGNhbiBiZSB1c2VkIHRvIHVuY2hlY2sgbXVsdGlwbGUgbm9kZXNcblx0XHQgKiBAdHJpZ2dlciB1bmNoZWNrX25vZGUuanN0cmVlXG5cdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdCAqL1xuXHRcdHRoaXMudW5jaGVja19ub2RlID0gZnVuY3Rpb24gKG9iaiwgZSkge1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7IHJldHVybiB0aGlzLmRlc2VsZWN0X25vZGUob2JqLCBmYWxzZSwgZSk7IH1cblx0XHRcdHZhciB0MSwgdDIsIGRvbTtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLnVuY2hlY2tfbm9kZShvYmpbdDFdLCBlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgb2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGRvbSA9IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKTtcblx0XHRcdGlmKG9iai5zdGF0ZS5jaGVja2VkKSB7XG5cdFx0XHRcdG9iai5zdGF0ZS5jaGVja2VkID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQgPSAkLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLCBvYmouaWQpO1xuXHRcdFx0XHRpZihkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0ZG9tLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2hlY2tlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbiBub2RlIGlzIHVuY2hlY2tlZCAob25seSBpZiB0aWVfc2VsZWN0aW9uIGluIGNoZWNrYm94IHNldHRpbmdzIGlzIGZhbHNlKVxuXHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0ICogQG5hbWUgdW5jaGVja19ub2RlLmpzdHJlZVxuXHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gbm9kZVxuXHRcdFx0XHQgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZCB0aGUgY3VycmVudCBzZWxlY3Rpb25cblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IHRoZSBldmVudCAoaWYgYW55KSB0aGF0IHRyaWdnZXJlZCB0aGlzIHVuY2hlY2tfbm9kZVxuXHRcdFx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3VuY2hlY2tfbm9kZScsIHsgJ25vZGUnIDogb2JqLCAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCwgJ2V2ZW50JyA6IGUgfSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiBjaGVja3MgYWxsIG5vZGVzIGluIHRoZSB0cmVlIChvbmx5IGlmIHRpZV9zZWxlY3Rpb24gaW4gY2hlY2tib3ggc2V0dGluZ3MgaXMgZmFsc2UsIG90aGVyd2lzZSBzZWxlY3RfYWxsIHdpbGwgYmUgY2FsbGVkIGludGVybmFsbHkpXG5cdFx0ICogQG5hbWUgY2hlY2tfYWxsKClcblx0XHQgKiBAdHJpZ2dlciBjaGVja19hbGwuanN0cmVlLCBjaGFuZ2VkLmpzdHJlZVxuXHRcdCAqIEBwbHVnaW4gY2hlY2tib3hcblx0XHQgKi9cblx0XHR0aGlzLmNoZWNrX2FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbikgeyByZXR1cm4gdGhpcy5zZWxlY3RfYWxsKCk7IH1cblx0XHRcdHZhciB0bXAgPSB0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmNvbmNhdChbXSksIGksIGo7XG5cdFx0XHR0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkID0gdGhpcy5fbW9kZWwuZGF0YVskLmpzdHJlZS5yb290XS5jaGlsZHJlbl9kLmNvbmNhdCgpO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW2ldXSkge1xuXHRcdFx0XHRcdHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFtpXV0uc3RhdGUuY2hlY2tlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMucmVkcmF3KHRydWUpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbGwgbm9kZXMgYXJlIGNoZWNrZWQgKG9ubHkgaWYgdGllX3NlbGVjdGlvbiBpbiBjaGVja2JveCBzZXR0aW5ncyBpcyBmYWxzZSlcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgY2hlY2tfYWxsLmpzdHJlZVxuXHRcdFx0ICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG5cdFx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignY2hlY2tfYWxsJywgeyAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCB9KTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIHVuY2hlY2sgYWxsIGNoZWNrZWQgbm9kZXMgKG9ubHkgaWYgdGllX3NlbGVjdGlvbiBpbiBjaGVja2JveCBzZXR0aW5ncyBpcyBmYWxzZSwgb3RoZXJ3aXNlIGRlc2VsZWN0X2FsbCB3aWxsIGJlIGNhbGxlZCBpbnRlcm5hbGx5KVxuXHRcdCAqIEBuYW1lIHVuY2hlY2tfYWxsKClcblx0XHQgKiBAdHJpZ2dlciB1bmNoZWNrX2FsbC5qc3RyZWVcblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy51bmNoZWNrX2FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbikgeyByZXR1cm4gdGhpcy5kZXNlbGVjdF9hbGwoKTsgfVxuXHRcdFx0dmFyIHRtcCA9IHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuY29uY2F0KFtdKSwgaSwgajtcblx0XHRcdGZvcihpID0gMCwgaiA9IHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFtpXV0pIHtcblx0XHRcdFx0XHR0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbaV1dLnN0YXRlLmNoZWNrZWQgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCA9IFtdO1xuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoJy5qc3RyZWUtY2hlY2tlZCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtY2hlY2tlZCcpO1xuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiBhbGwgbm9kZXMgYXJlIHVuY2hlY2tlZCAob25seSBpZiB0aWVfc2VsZWN0aW9uIGluIGNoZWNrYm94IHNldHRpbmdzIGlzIGZhbHNlKVxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSB1bmNoZWNrX2FsbC5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBwcmV2aW91cyBzZWxlY3Rpb25cblx0XHRcdCAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuXHRcdFx0ICogQHBsdWdpbiBjaGVja2JveFxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3VuY2hlY2tfYWxsJywgeyAnc2VsZWN0ZWQnIDogdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCwgJ25vZGUnIDogdG1wIH0pO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogY2hlY2tzIGlmIGEgbm9kZSBpcyBjaGVja2VkIChpZiB0aWVfc2VsZWN0aW9uIGlzIG9uIGluIHRoZSBzZXR0aW5ncyB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lIGFzIGlzX3NlbGVjdGVkKVxuXHRcdCAqIEBuYW1lIGlzX2NoZWNrZWQob2JqKVxuXHRcdCAqIEBwYXJhbSAge21peGVkfSAgb2JqXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5pc19jaGVja2VkID0gZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7IHJldHVybiB0aGlzLmlzX3NlbGVjdGVkKG9iaik7IH1cblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdGlmKCFvYmogfHwgb2JqLmlkID09PSAkLmpzdHJlZS5yb290KSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0cmV0dXJuIG9iai5zdGF0ZS5jaGVja2VkO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogZ2V0IGFuIGFycmF5IG9mIGFsbCBjaGVja2VkIG5vZGVzIChpZiB0aWVfc2VsZWN0aW9uIGlzIG9uIGluIHRoZSBzZXR0aW5ncyB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lIGFzIGdldF9zZWxlY3RlZClcblx0XHQgKiBAbmFtZSBnZXRfY2hlY2tlZChbZnVsbF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9ICBmdWxsIGlmIHNldCB0byBgdHJ1ZWAgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29uc2lzdCBvZiB0aGUgZnVsbCBub2RlIG9iamVjdHMsIG90aGVyd2lzZSAtIG9ubHkgSURzIHdpbGwgYmUgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJuIHtBcnJheX1cblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5nZXRfY2hlY2tlZCA9IGZ1bmN0aW9uIChmdWxsKSB7XG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pIHsgcmV0dXJuIHRoaXMuZ2V0X3NlbGVjdGVkKGZ1bGwpOyB9XG5cdFx0XHRyZXR1cm4gZnVsbCA/ICQubWFwKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsICQucHJveHkoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHRoaXMuZ2V0X25vZGUoaSk7IH0sIHRoaXMpKSA6IHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ7XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiBnZXQgYW4gYXJyYXkgb2YgYWxsIHRvcCBsZXZlbCBjaGVja2VkIG5vZGVzIChpZ25vcmluZyBjaGlsZHJlbiBvZiBjaGVja2VkIG5vZGVzKSAoaWYgdGllX3NlbGVjdGlvbiBpcyBvbiBpbiB0aGUgc2V0dGluZ3MgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc2FtZSBhcyBnZXRfdG9wX3NlbGVjdGVkKVxuXHRcdCAqIEBuYW1lIGdldF90b3BfY2hlY2tlZChbZnVsbF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9ICBmdWxsIGlmIHNldCB0byBgdHJ1ZWAgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29uc2lzdCBvZiB0aGUgZnVsbCBub2RlIG9iamVjdHMsIG90aGVyd2lzZSAtIG9ubHkgSURzIHdpbGwgYmUgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJuIHtBcnJheX1cblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5nZXRfdG9wX2NoZWNrZWQgPSBmdW5jdGlvbiAoZnVsbCkge1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7IHJldHVybiB0aGlzLmdldF90b3Bfc2VsZWN0ZWQoZnVsbCk7IH1cblx0XHRcdHZhciB0bXAgPSB0aGlzLmdldF9jaGVja2VkKHRydWUpLFxuXHRcdFx0XHRvYmogPSB7fSwgaSwgaiwgaywgbDtcblx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0b2JqW3RtcFtpXS5pZF0gPSB0bXBbaV07XG5cdFx0XHR9XG5cdFx0XHRmb3IoaSA9IDAsIGogPSB0bXAubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdGZvcihrID0gMCwgbCA9IHRtcFtpXS5jaGlsZHJlbl9kLmxlbmd0aDsgayA8IGw7IGsrKykge1xuXHRcdFx0XHRcdGlmKG9ialt0bXBbaV0uY2hpbGRyZW5fZFtrXV0pIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSBvYmpbdG1wW2ldLmNoaWxkcmVuX2Rba11dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dG1wID0gW107XG5cdFx0XHRmb3IoaSBpbiBvYmopIHtcblx0XHRcdFx0aWYob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0dG1wLnB1c2goaSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmdWxsID8gJC5tYXAodG1wLCAkLnByb3h5KGZ1bmN0aW9uIChpKSB7IHJldHVybiB0aGlzLmdldF9ub2RlKGkpOyB9LCB0aGlzKSkgOiB0bXA7XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiBnZXQgYW4gYXJyYXkgb2YgYWxsIGJvdHRvbSBsZXZlbCBjaGVja2VkIG5vZGVzIChpZ25vcmluZyBzZWxlY3RlZCBwYXJlbnRzKSAoaWYgdGllX3NlbGVjdGlvbiBpcyBvbiBpbiB0aGUgc2V0dGluZ3MgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc2FtZSBhcyBnZXRfYm90dG9tX3NlbGVjdGVkKVxuXHRcdCAqIEBuYW1lIGdldF9ib3R0b21fY2hlY2tlZChbZnVsbF0pXG5cdFx0ICogQHBhcmFtICB7bWl4ZWR9ICBmdWxsIGlmIHNldCB0byBgdHJ1ZWAgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29uc2lzdCBvZiB0aGUgZnVsbCBub2RlIG9iamVjdHMsIG90aGVyd2lzZSAtIG9ubHkgSURzIHdpbGwgYmUgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJuIHtBcnJheX1cblx0XHQgKiBAcGx1Z2luIGNoZWNrYm94XG5cdFx0ICovXG5cdFx0dGhpcy5nZXRfYm90dG9tX2NoZWNrZWQgPSBmdW5jdGlvbiAoZnVsbCkge1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7IHJldHVybiB0aGlzLmdldF9ib3R0b21fc2VsZWN0ZWQoZnVsbCk7IH1cblx0XHRcdHZhciB0bXAgPSB0aGlzLmdldF9jaGVja2VkKHRydWUpLFxuXHRcdFx0XHRvYmogPSBbXSwgaSwgajtcblx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0aWYoIXRtcFtpXS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHRvYmoucHVzaCh0bXBbaV0uaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZnVsbCA/ICQubWFwKG9iaiwgJC5wcm94eShmdW5jdGlvbiAoaSkgeyByZXR1cm4gdGhpcy5nZXRfbm9kZShpKTsgfSwgdGhpcykpIDogb2JqO1xuXHRcdH07XG5cdFx0dGhpcy5sb2FkX25vZGUgPSBmdW5jdGlvbiAob2JqLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGssIGwsIGksIGosIGMsIHRtcDtcblx0XHRcdGlmKCEkLmlzQXJyYXkob2JqKSAmJiAhdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7XG5cdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdFx0aWYodG1wICYmIHRtcC5zdGF0ZS5sb2FkZWQpIHtcblx0XHRcdFx0XHRmb3IoayA9IDAsIGwgPSB0bXAuY2hpbGRyZW5fZC5sZW5ndGg7IGsgPCBsOyBrKyspIHtcblx0XHRcdFx0XHRcdGlmKHRoaXMuX21vZGVsLmRhdGFbdG1wLmNoaWxkcmVuX2Rba11dLnN0YXRlLmNoZWNrZWQpIHtcblx0XHRcdFx0XHRcdFx0YyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQgPSAkLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLCB0bXAuY2hpbGRyZW5fZFtrXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcGFyZW50LmxvYWRfbm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH07XG5cdFx0dGhpcy5nZXRfc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgc3RhdGUgPSBwYXJlbnQuZ2V0X3N0YXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pIHsgcmV0dXJuIHN0YXRlOyB9XG5cdFx0XHRzdGF0ZS5jaGVja2JveCA9IHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuc2xpY2UoKTtcblx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHR9O1xuXHRcdHRoaXMuc2V0X3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIHJlcyA9IHBhcmVudC5zZXRfc3RhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdGlmKHJlcyAmJiBzdGF0ZS5jaGVja2JveCkge1xuXHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKSB7XG5cdFx0XHRcdFx0dGhpcy51bmNoZWNrX2FsbCgpO1xuXHRcdFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0XHRcdFx0JC5lYWNoKHN0YXRlLmNoZWNrYm94LCBmdW5jdGlvbiAoaSwgdikge1xuXHRcdFx0XHRcdFx0X3RoaXMuY2hlY2tfbm9kZSh2KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGUgc3RhdGUuY2hlY2tib3g7XG5cdFx0XHRcdHRoaXMuc2V0X3N0YXRlKHN0YXRlLCBjYWxsYmFjayk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXM7XG5cdFx0fTtcblx0XHR0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbiAoc2tpcF9sb2FkaW5nLCBmb3JnZXRfc3RhdGUpIHtcblx0XHRcdGlmKCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHBhcmVudC5yZWZyZXNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0fTtcblx0fTtcblxuXHQvLyBpbmNsdWRlIHRoZSBjaGVja2JveCBwbHVnaW4gYnkgZGVmYXVsdFxuXHQvLyAkLmpzdHJlZS5kZWZhdWx0cy5wbHVnaW5zLnB1c2goXCJjaGVja2JveFwiKTtcblxuLyoqXG4gKiAjIyMgQ29uZGl0aW9uYWxzZWxlY3QgcGx1Z2luXG4gKlxuICogVGhpcyBwbHVnaW4gYWxsb3dzIGRlZmluaW5nIGEgY2FsbGJhY2sgdG8gYWxsb3cgb3IgZGVueSBub2RlIHNlbGVjdGlvbiBieSB1c2VyIGlucHV0IChhY3RpdmF0ZSBub2RlIG1ldGhvZCkuXG4gKi9cblxuXHQvKipcblx0ICogYSBjYWxsYmFjayAoZnVuY3Rpb24pIHdoaWNoIGlzIGludm9rZWQgaW4gdGhlIGluc3RhbmNlJ3Mgc2NvcGUgYW5kIHJlY2VpdmVzIHR3byBhcmd1bWVudHMgLSB0aGUgbm9kZSBhbmQgdGhlIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSBgYWN0aXZhdGVfbm9kZWAgY2FsbC4gUmV0dXJuaW5nIGZhbHNlIHByZXZlbnRzIHdvcmtpbmcgd2l0aCB0aGUgbm9kZSwgcmV0dXJuaW5nIHRydWUgYWxsb3dzIGludm9raW5nIGFjdGl2YXRlX25vZGUuIERlZmF1bHRzIHRvIHJldHVybmluZyBgdHJ1ZWAuXG5cdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNoZWNrYm94LnZpc2libGVcblx0ICogQHBsdWdpbiBjaGVja2JveFxuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMuY29uZGl0aW9uYWxzZWxlY3QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuXHQkLmpzdHJlZS5wbHVnaW5zLmNvbmRpdGlvbmFsc2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMsIHBhcmVudCkge1xuXHRcdC8vIG93biBmdW5jdGlvblxuXHRcdHRoaXMuYWN0aXZhdGVfbm9kZSA9IGZ1bmN0aW9uIChvYmosIGUpIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29uZGl0aW9uYWxzZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmdldF9ub2RlKG9iaiksIGUpKSB7XG5cdFx0XHRcdHBhcmVudC5hY3RpdmF0ZV9ub2RlLmNhbGwodGhpcywgb2JqLCBlKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9O1xuXG5cbi8qKlxuICogIyMjIENvbnRleHRtZW51IHBsdWdpblxuICpcbiAqIFNob3dzIGEgY29udGV4dCBtZW51IHdoZW4gYSBub2RlIGlzIHJpZ2h0LWNsaWNrZWQuXG4gKi9cblxuXHQvKipcblx0ICogc3RvcmVzIGFsbCBkZWZhdWx0cyBmb3IgdGhlIGNvbnRleHRtZW51IHBsdWdpblxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb250ZXh0bWVudVxuXHQgKiBAcGx1Z2luIGNvbnRleHRtZW51XG5cdCAqL1xuXHQkLmpzdHJlZS5kZWZhdWx0cy5jb250ZXh0bWVudSA9IHtcblx0XHQvKipcblx0XHQgKiBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgbm9kZSBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiB0aGUgY29udGV4dCBtZW51IGlzIGludm9rZWQgb24gaXQuIERlZmF1bHRzIHRvIGB0cnVlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5jb250ZXh0bWVudS5zZWxlY3Rfbm9kZVxuXHRcdCAqIEBwbHVnaW4gY29udGV4dG1lbnVcblx0XHQgKi9cblx0XHRzZWxlY3Rfbm9kZSA6IHRydWUsXG5cdFx0LyoqXG5cdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIG1lbnUgc2hvdWxkIGJlIHNob3duIGFsaWduZWQgd2l0aCB0aGUgbm9kZS4gRGVmYXVsdHMgdG8gYHRydWVgLCBvdGhlcndpc2UgdGhlIG1vdXNlIGNvb3JkaW5hdGVzIGFyZSB1c2VkLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvbnRleHRtZW51LnNob3dfYXRfbm9kZVxuXHRcdCAqIEBwbHVnaW4gY29udGV4dG1lbnVcblx0XHQgKi9cblx0XHRzaG93X2F0X25vZGUgOiB0cnVlLFxuXHRcdC8qKlxuXHRcdCAqIGFuIG9iamVjdCBvZiBhY3Rpb25zLCBvciBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBhIG5vZGUgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb24gYW5kIGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGFuIG9iamVjdCBvZiBhY3Rpb25zIGF2YWlsYWJsZSBmb3IgdGhhdCBub2RlICh5b3UgY2FuIGFsc28gcmV0dXJuIHRoZSBpdGVtcyB0b28pLlxuXHRcdCAqXG5cdFx0ICogRWFjaCBhY3Rpb24gY29uc2lzdHMgb2YgYSBrZXkgKGEgdW5pcXVlIG5hbWUpIGFuZCBhIHZhbHVlIHdoaWNoIGlzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyAob25seSBsYWJlbCBhbmQgYWN0aW9uIGFyZSByZXF1aXJlZCkuIE9uY2UgYSBtZW51IGl0ZW0gaXMgYWN0aXZhdGVkIHRoZSBgYWN0aW9uYCBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2l0aCBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGtleXM6IGl0ZW0gLSB0aGUgY29udGV4dG1lbnUgaXRlbSBkZWZpbml0aW9uIGFzIHNlZW4gYmVsb3csIHJlZmVyZW5jZSAtIHRoZSBET00gbm9kZSB0aGF0IHdhcyB1c2VkICh0aGUgdHJlZSBub2RlKSwgZWxlbWVudCAtIHRoZSBjb250ZXh0bWVudSBET00gZWxlbWVudCwgcG9zaXRpb24gLSBhbiBvYmplY3Qgd2l0aCB4L3kgcHJvcGVydGllcyBpbmRpY2F0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgbWVudS5cblx0XHQgKlxuXHRcdCAqICogYHNlcGFyYXRvcl9iZWZvcmVgIC0gYSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlcmUgc2hvdWxkIGJlIGEgc2VwYXJhdG9yIGJlZm9yZSB0aGlzIGl0ZW1cblx0XHQgKiAqIGBzZXBhcmF0b3JfYWZ0ZXJgIC0gYSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlcmUgc2hvdWxkIGJlIGEgc2VwYXJhdG9yIGFmdGVyIHRoaXMgaXRlbVxuXHRcdCAqICogYF9kaXNhYmxlZGAgLSBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGlzIGFjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWRcblx0XHQgKiAqIGBsYWJlbGAgLSBhIHN0cmluZyAtIHRoZSBuYW1lIG9mIHRoZSBhY3Rpb24gKGNvdWxkIGJlIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgc3RyaW5nKVxuXHRcdCAqICogYHRpdGxlYCAtIGEgc3RyaW5nIC0gYW4gb3B0aW9uYWwgdG9vbHRpcCBmb3IgdGhlIGl0ZW1cblx0XHQgKiAqIGBhY3Rpb25gIC0gYSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBpZiB0aGlzIGl0ZW0gaXMgY2hvc2VuLCB0aGUgZnVuY3Rpb24gd2lsbCByZWNlaXZlIFxuXHRcdCAqICogYGljb25gIC0gYSBzdHJpbmcsIGNhbiBiZSBhIHBhdGggdG8gYW4gaWNvbiBvciBhIGNsYXNzTmFtZSwgaWYgdXNpbmcgYW4gaW1hZ2UgdGhhdCBpcyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkgdXNlIGEgYC4vYCBwcmVmaXgsIG90aGVyd2lzZSBpdCB3aWxsIGJlIGRldGVjdGVkIGFzIGEgY2xhc3Ncblx0XHQgKiAqIGBzaG9ydGN1dGAgLSBrZXlDb2RlIHdoaWNoIHdpbGwgdHJpZ2dlciB0aGUgYWN0aW9uIGlmIHRoZSBtZW51IGlzIG9wZW4gKGZvciBleGFtcGxlIGAxMTNgIGZvciByZW5hbWUsIHdoaWNoIGVxdWFscyBGMilcblx0XHQgKiAqIGBzaG9ydGN1dF9sYWJlbGAgLSBzaG9ydGN1dCBsYWJlbCAobGlrZSBmb3IgZXhhbXBsZSBgRjJgIGZvciByZW5hbWUpXG5cdFx0ICogKiBgc3VibWVudWAgLSBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzdHJ1Y3R1cmUgYXMgJC5qc3RyZWUuZGVmYXVsdHMuY29udGV4dG1lbnUuaXRlbXMgd2hpY2ggY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGEgc3VibWVudSAtIGVhY2gga2V5IHdpbGwgYmUgcmVuZGVyZWQgYXMgYSBzZXBhcmF0ZSBvcHRpb24gaW4gYSBzdWJtZW51IHRoYXQgd2lsbCBhcHBlYXIgb25jZSB0aGUgY3VycmVudCBpdGVtIGlzIGhvdmVyZWRcblx0XHQgKlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmNvbnRleHRtZW51Lml0ZW1zXG5cdFx0ICogQHBsdWdpbiBjb250ZXh0bWVudVxuXHRcdCAqL1xuXHRcdGl0ZW1zIDogZnVuY3Rpb24gKG8sIGNiKSB7IC8vIENvdWxkIGJlIGFuIG9iamVjdCBkaXJlY3RseVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XCJjcmVhdGVcIiA6IHtcblx0XHRcdFx0XHRcInNlcGFyYXRvcl9iZWZvcmVcIlx0OiBmYWxzZSxcblx0XHRcdFx0XHRcInNlcGFyYXRvcl9hZnRlclwiXHQ6IHRydWUsXG5cdFx0XHRcdFx0XCJfZGlzYWJsZWRcIlx0XHRcdDogZmFsc2UsIC8vKHRoaXMuY2hlY2soXCJjcmVhdGVfbm9kZVwiLCBkYXRhLnJlZmVyZW5jZSwge30sIFwibGFzdFwiKSksXG5cdFx0XHRcdFx0XCJsYWJlbFwiXHRcdFx0XHQ6IFwiQ3JlYXRlXCIsXG5cdFx0XHRcdFx0XCJhY3Rpb25cIlx0XHRcdDogZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdHZhciBpbnN0ID0gJC5qc3RyZWUucmVmZXJlbmNlKGRhdGEucmVmZXJlbmNlKSxcblx0XHRcdFx0XHRcdFx0b2JqID0gaW5zdC5nZXRfbm9kZShkYXRhLnJlZmVyZW5jZSk7XG5cdFx0XHRcdFx0XHRpbnN0LmNyZWF0ZV9ub2RlKG9iaiwge30sIFwibGFzdFwiLCBmdW5jdGlvbiAobmV3X25vZGUpIHtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGluc3QuZWRpdChuZXdfbm9kZSk7IH0sMCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwicmVuYW1lXCIgOiB7XG5cdFx0XHRcdFx0XCJzZXBhcmF0b3JfYmVmb3JlXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XCJzZXBhcmF0b3JfYWZ0ZXJcIlx0OiBmYWxzZSxcblx0XHRcdFx0XHRcIl9kaXNhYmxlZFwiXHRcdFx0OiBmYWxzZSwgLy8odGhpcy5jaGVjayhcInJlbmFtZV9ub2RlXCIsIGRhdGEucmVmZXJlbmNlLCB0aGlzLmdldF9wYXJlbnQoZGF0YS5yZWZlcmVuY2UpLCBcIlwiKSksXG5cdFx0XHRcdFx0XCJsYWJlbFwiXHRcdFx0XHQ6IFwiUmVuYW1lXCIsXG5cdFx0XHRcdFx0LyohXG5cdFx0XHRcdFx0XCJzaG9ydGN1dFwiXHRcdFx0OiAxMTMsXG5cdFx0XHRcdFx0XCJzaG9ydGN1dF9sYWJlbFwiXHQ6ICdGMicsXG5cdFx0XHRcdFx0XCJpY29uXCJcdFx0XHRcdDogXCJnbHlwaGljb24gZ2x5cGhpY29uLWxlYWZcIixcblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFwiYWN0aW9uXCJcdFx0XHQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHR2YXIgaW5zdCA9ICQuanN0cmVlLnJlZmVyZW5jZShkYXRhLnJlZmVyZW5jZSksXG5cdFx0XHRcdFx0XHRcdG9iaiA9IGluc3QuZ2V0X25vZGUoZGF0YS5yZWZlcmVuY2UpO1xuXHRcdFx0XHRcdFx0aW5zdC5lZGl0KG9iaik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInJlbW92ZVwiIDoge1xuXHRcdFx0XHRcdFwic2VwYXJhdG9yX2JlZm9yZVwiXHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFwiaWNvblwiXHRcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFwic2VwYXJhdG9yX2FmdGVyXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XCJfZGlzYWJsZWRcIlx0XHRcdDogZmFsc2UsIC8vKHRoaXMuY2hlY2soXCJkZWxldGVfbm9kZVwiLCBkYXRhLnJlZmVyZW5jZSwgdGhpcy5nZXRfcGFyZW50KGRhdGEucmVmZXJlbmNlKSwgXCJcIikpLFxuXHRcdFx0XHRcdFwibGFiZWxcIlx0XHRcdFx0OiBcIkRlbGV0ZVwiLFxuXHRcdFx0XHRcdFwiYWN0aW9uXCJcdFx0XHQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHR2YXIgaW5zdCA9ICQuanN0cmVlLnJlZmVyZW5jZShkYXRhLnJlZmVyZW5jZSksXG5cdFx0XHRcdFx0XHRcdG9iaiA9IGluc3QuZ2V0X25vZGUoZGF0YS5yZWZlcmVuY2UpO1xuXHRcdFx0XHRcdFx0aWYoaW5zdC5pc19zZWxlY3RlZChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdGluc3QuZGVsZXRlX25vZGUoaW5zdC5nZXRfc2VsZWN0ZWQoKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0aW5zdC5kZWxldGVfbm9kZShvYmopO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJjY3BcIiA6IHtcblx0XHRcdFx0XHRcInNlcGFyYXRvcl9iZWZvcmVcIlx0OiB0cnVlLFxuXHRcdFx0XHRcdFwiaWNvblwiXHRcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFwic2VwYXJhdG9yX2FmdGVyXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XCJsYWJlbFwiXHRcdFx0XHQ6IFwiRWRpdFwiLFxuXHRcdFx0XHRcdFwiYWN0aW9uXCJcdFx0XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFwic3VibWVudVwiIDoge1xuXHRcdFx0XHRcdFx0XCJjdXRcIiA6IHtcblx0XHRcdFx0XHRcdFx0XCJzZXBhcmF0b3JfYmVmb3JlXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFwic2VwYXJhdG9yX2FmdGVyXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFwibGFiZWxcIlx0XHRcdFx0OiBcIkN1dFwiLFxuXHRcdFx0XHRcdFx0XHRcImFjdGlvblwiXHRcdFx0OiBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBpbnN0ID0gJC5qc3RyZWUucmVmZXJlbmNlKGRhdGEucmVmZXJlbmNlKSxcblx0XHRcdFx0XHRcdFx0XHRcdG9iaiA9IGluc3QuZ2V0X25vZGUoZGF0YS5yZWZlcmVuY2UpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKGluc3QuaXNfc2VsZWN0ZWQob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW5zdC5jdXQoaW5zdC5nZXRfdG9wX3NlbGVjdGVkKCkpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGluc3QuY3V0KG9iaik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJjb3B5XCIgOiB7XG5cdFx0XHRcdFx0XHRcdFwic2VwYXJhdG9yX2JlZm9yZVwiXHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcImljb25cIlx0XHRcdFx0OiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XCJzZXBhcmF0b3JfYWZ0ZXJcIlx0OiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XCJsYWJlbFwiXHRcdFx0XHQ6IFwiQ29weVwiLFxuXHRcdFx0XHRcdFx0XHRcImFjdGlvblwiXHRcdFx0OiBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBpbnN0ID0gJC5qc3RyZWUucmVmZXJlbmNlKGRhdGEucmVmZXJlbmNlKSxcblx0XHRcdFx0XHRcdFx0XHRcdG9iaiA9IGluc3QuZ2V0X25vZGUoZGF0YS5yZWZlcmVuY2UpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKGluc3QuaXNfc2VsZWN0ZWQob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW5zdC5jb3B5KGluc3QuZ2V0X3RvcF9zZWxlY3RlZCgpKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnN0LmNvcHkob2JqKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcInBhc3RlXCIgOiB7XG5cdFx0XHRcdFx0XHRcdFwic2VwYXJhdG9yX2JlZm9yZVwiXHQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcImljb25cIlx0XHRcdFx0OiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XCJfZGlzYWJsZWRcIlx0XHRcdDogZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gISQuanN0cmVlLnJlZmVyZW5jZShkYXRhLnJlZmVyZW5jZSkuY2FuX3Bhc3RlKCk7XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFwic2VwYXJhdG9yX2FmdGVyXCJcdDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFwibGFiZWxcIlx0XHRcdFx0OiBcIlBhc3RlXCIsXG5cdFx0XHRcdFx0XHRcdFwiYWN0aW9uXCJcdFx0XHQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGluc3QgPSAkLmpzdHJlZS5yZWZlcmVuY2UoZGF0YS5yZWZlcmVuY2UpLFxuXHRcdFx0XHRcdFx0XHRcdFx0b2JqID0gaW5zdC5nZXRfbm9kZShkYXRhLnJlZmVyZW5jZSk7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdC5wYXN0ZShvYmopO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fTtcblxuXHQkLmpzdHJlZS5wbHVnaW5zLmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKG9wdGlvbnMsIHBhcmVudCkge1xuXHRcdHRoaXMuYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHBhcmVudC5iaW5kLmNhbGwodGhpcyk7XG5cblx0XHRcdHZhciBsYXN0X3RzID0gMCwgY3RvID0gbnVsbCwgZXgsIGV5O1xuXHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdC5vbihcImNvbnRleHRtZW51LmpzdHJlZVwiLCBcIi5qc3RyZWUtYW5jaG9yXCIsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmIChlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0bGFzdF90cyA9IGUuY3RybEtleSA/ICtuZXcgRGF0ZSgpIDogMDtcblx0XHRcdFx0XHRcdGlmKGRhdGEgfHwgY3RvKSB7XG5cdFx0XHRcdFx0XHRcdGxhc3RfdHMgPSAoK25ldyBEYXRlKCkpICsgMTAwMDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihjdG8pIHtcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KGN0byk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZighdGhpcy5pc19sb2FkaW5nKGUuY3VycmVudFRhcmdldCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93X2NvbnRleHRtZW51KGUuY3VycmVudFRhcmdldCwgZS5wYWdlWCwgZS5wYWdlWSwgZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcImNsaWNrLmpzdHJlZVwiLCBcIi5qc3RyZWUtYW5jaG9yXCIsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGlmKHRoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZSAmJiAoIWxhc3RfdHMgfHwgKCtuZXcgRGF0ZSgpKSAtIGxhc3RfdHMgPiAyNTApKSB7IC8vIHdvcmsgYXJvdW5kIHNhZmFyaSAmIG1hY09TIGN0cmwrY2xpY2tcblx0XHRcdFx0XHRcdFx0JC52YWthdGEuY29udGV4dC5oaWRlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRsYXN0X3RzID0gMDtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwidG91Y2hzdGFydC5qc3RyZWVcIiwgXCIuanN0cmVlLWFuY2hvclwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0aWYoIWUub3JpZ2luYWxFdmVudCB8fCAhZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzIHx8ICFlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZXggPSBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcblx0XHRcdFx0XHRcdGV5ID0gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XG5cdFx0XHRcdFx0XHRjdG8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0JChlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoJ2NvbnRleHRtZW51JywgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9LCA3NTApO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdC5vbigndG91Y2htb3ZlLnZha2F0YS5qc3RyZWUnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0aWYoY3RvICYmIGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMgJiYgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdICYmIChNYXRoLmFicyhleCAtIGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYKSA+IDUwIHx8IE1hdGguYWJzKGV5IC0gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpID4gNTApKSB7XG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChjdG8pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdC5vbigndG91Y2hlbmQudmFrYXRhLmpzdHJlZScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRpZihjdG8pIHtcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KGN0byk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdC8qIVxuXHRcdFx0aWYoISgnb25jb250ZXh0bWVudScgaW4gZG9jdW1lbnQuYm9keSkgJiYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmJvZHkpKSB7XG5cdFx0XHRcdHZhciBlbCA9IG51bGwsIHRtID0gbnVsbDtcblx0XHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdFx0Lm9uKFwidG91Y2hzdGFydFwiLCBcIi5qc3RyZWUtYW5jaG9yXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRlbCA9IGUuY3VycmVudFRhcmdldDtcblx0XHRcdFx0XHRcdHRtID0gK25ldyBEYXRlKCk7XG5cdFx0XHRcdFx0XHQkKGRvY3VtZW50KS5vbmUoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHRlLnRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSB3aW5kb3cucGFnZVhPZmZzZXQsIGUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0KTtcblx0XHRcdFx0XHRcdFx0ZS5jdXJyZW50VGFyZ2V0ID0gZS50YXJnZXQ7XG5cdFx0XHRcdFx0XHRcdHRtID0gKCgrKG5ldyBEYXRlKCkpKSAtIHRtKTtcblx0XHRcdFx0XHRcdFx0aWYoZS50YXJnZXQgPT09IGVsICYmIHRtID4gNjAwICYmIHRtIDwgMTAwMCkge1xuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHQkKGVsKS50cmlnZ2VyKCdjb250ZXh0bWVudScsIGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0dG0gPSBudWxsO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQqL1xuXHRcdFx0JChkb2N1bWVudCkub24oXCJjb250ZXh0X2hpZGUudmFrYXRhLmpzdHJlZVwiLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdHRoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0XHQkKGRhdGEucmVmZXJlbmNlKS5yZW1vdmVDbGFzcygnanN0cmVlLWNvbnRleHQnKTtcblx0XHRcdH0sIHRoaXMpKTtcblx0XHR9O1xuXHRcdHRoaXMudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZih0aGlzLl9kYXRhLmNvbnRleHRtZW51LnZpc2libGUpIHtcblx0XHRcdFx0JC52YWthdGEuY29udGV4dC5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHRwYXJlbnQudGVhcmRvd24uY2FsbCh0aGlzKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogcHJlcGFyZSBhbmQgc2hvdyB0aGUgY29udGV4dCBtZW51IGZvciBhIG5vZGVcblx0XHQgKiBAbmFtZSBzaG93X2NvbnRleHRtZW51KG9iaiBbLCB4LCB5XSlcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmogdGhlIG5vZGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlIHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudCB0byBzaG93IHRoZSBtZW51IGF0XG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZSByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQgdG8gc2hvdyB0aGUgbWVudSBhdFxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBlIHRoZSBldmVudCBpZiBhdmFpbGFibGUgdGhhdCB0cmlnZ2VyZWQgdGhlIGNvbnRleHRtZW51XG5cdFx0ICogQHBsdWdpbiBjb250ZXh0bWVudVxuXHRcdCAqIEB0cmlnZ2VyIHNob3dfY29udGV4dG1lbnUuanN0cmVlXG5cdFx0ICovXG5cdFx0dGhpcy5zaG93X2NvbnRleHRtZW51ID0gZnVuY3Rpb24gKG9iaiwgeCwgeSwgZSkge1xuXHRcdFx0b2JqID0gdGhpcy5nZXRfbm9kZShvYmopO1xuXHRcdFx0aWYoIW9iaiB8fCBvYmouaWQgPT09ICQuanN0cmVlLnJvb3QpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0XHR2YXIgcyA9IHRoaXMuc2V0dGluZ3MuY29udGV4dG1lbnUsXG5cdFx0XHRcdGQgPSB0aGlzLmdldF9ub2RlKG9iaiwgdHJ1ZSksXG5cdFx0XHRcdGEgPSBkLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIiksXG5cdFx0XHRcdG8gPSBmYWxzZSxcblx0XHRcdFx0aSA9IGZhbHNlO1xuXHRcdFx0aWYocy5zaG93X2F0X25vZGUgfHwgeCA9PT0gdW5kZWZpbmVkIHx8IHkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRvID0gYS5vZmZzZXQoKTtcblx0XHRcdFx0eCA9IG8ubGVmdDtcblx0XHRcdFx0eSA9IG8udG9wICsgdGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodDtcblx0XHRcdH1cblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29udGV4dG1lbnUuc2VsZWN0X25vZGUgJiYgIXRoaXMuaXNfc2VsZWN0ZWQob2JqKSkge1xuXHRcdFx0XHR0aGlzLmFjdGl2YXRlX25vZGUob2JqLCBlKTtcblx0XHRcdH1cblxuXHRcdFx0aSA9IHMuaXRlbXM7XG5cdFx0XHRpZigkLmlzRnVuY3Rpb24oaSkpIHtcblx0XHRcdFx0aSA9IGkuY2FsbCh0aGlzLCBvYmosICQucHJveHkoZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0XHR0aGlzLl9zaG93X2NvbnRleHRtZW51KG9iaiwgeCwgeSwgaSk7XG5cdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdH1cblx0XHRcdGlmKCQuaXNQbGFpbk9iamVjdChpKSkge1xuXHRcdFx0XHR0aGlzLl9zaG93X2NvbnRleHRtZW51KG9iaiwgeCwgeSwgaSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiBzaG93IHRoZSBwcmVwYXJlZCBjb250ZXh0IG1lbnUgZm9yIGEgbm9kZVxuXHRcdCAqIEBuYW1lIF9zaG93X2NvbnRleHRtZW51KG9iaiwgeCwgeSwgaSlcblx0XHQgKiBAcGFyYW0ge21peGVkfSBvYmogdGhlIG5vZGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlIHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudCB0byBzaG93IHRoZSBtZW51IGF0XG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZSByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQgdG8gc2hvdyB0aGUgbWVudSBhdFxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBpIHRoZSBvYmplY3Qgb2YgaXRlbXMgdG8gc2hvd1xuXHRcdCAqIEBwbHVnaW4gY29udGV4dG1lbnVcblx0XHQgKiBAdHJpZ2dlciBzaG93X2NvbnRleHRtZW51LmpzdHJlZVxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0dGhpcy5fc2hvd19jb250ZXh0bWVudSA9IGZ1bmN0aW9uIChvYmosIHgsIHksIGkpIHtcblx0XHRcdHZhciBkID0gdGhpcy5nZXRfbm9kZShvYmosIHRydWUpLFxuXHRcdFx0XHRhID0gZC5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpO1xuXHRcdFx0JChkb2N1bWVudCkub25lKFwiY29udGV4dF9zaG93LnZha2F0YS5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHR2YXIgY2xzID0gJ2pzdHJlZS1jb250ZXh0bWVudSBqc3RyZWUtJyArIHRoaXMuZ2V0X3RoZW1lKCkgKyAnLWNvbnRleHRtZW51Jztcblx0XHRcdFx0JChkYXRhLmVsZW1lbnQpLmFkZENsYXNzKGNscyk7XG5cdFx0XHRcdGEuYWRkQ2xhc3MoJ2pzdHJlZS1jb250ZXh0Jyk7XG5cdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHR0aGlzLl9kYXRhLmNvbnRleHRtZW51LnZpc2libGUgPSB0cnVlO1xuXHRcdFx0JC52YWthdGEuY29udGV4dC5zaG93KGEsIHsgJ3gnIDogeCwgJ3knIDogeSB9LCBpKTtcblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIHdoZW4gdGhlIGNvbnRleHRtZW51IGlzIHNob3duIGZvciBhIG5vZGVcblx0XHRcdCAqIEBldmVudFxuXHRcdFx0ICogQG5hbWUgc2hvd19jb250ZXh0bWVudS5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIHRoZSBub2RlXG5cdFx0XHQgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlIG9mIHRoZSBtZW51IHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudFxuXHRcdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgbWVudSByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnRcblx0XHRcdCAqIEBwbHVnaW4gY29udGV4dG1lbnVcblx0XHRcdCAqL1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdzaG93X2NvbnRleHRtZW51JywgeyBcIm5vZGVcIiA6IG9iaiwgXCJ4XCIgOiB4LCBcInlcIiA6IHkgfSk7XG5cdFx0fTtcblx0fTtcblxuXHQvLyBjb250ZXh0bWVudSBoZWxwZXJcblx0KGZ1bmN0aW9uICgkKSB7XG5cdFx0dmFyIHJpZ2h0X3RvX2xlZnQgPSBmYWxzZSxcblx0XHRcdHZha2F0YV9jb250ZXh0ID0ge1xuXHRcdFx0XHRlbGVtZW50XHRcdDogZmFsc2UsXG5cdFx0XHRcdHJlZmVyZW5jZVx0OiBmYWxzZSxcblx0XHRcdFx0cG9zaXRpb25feFx0OiAwLFxuXHRcdFx0XHRwb3NpdGlvbl95XHQ6IDAsXG5cdFx0XHRcdGl0ZW1zXHRcdDogW10sXG5cdFx0XHRcdGh0bWxcdFx0OiBcIlwiLFxuXHRcdFx0XHRpc192aXNpYmxlXHQ6IGZhbHNlXG5cdFx0XHR9O1xuXG5cdFx0JC52YWthdGEuY29udGV4dCA9IHtcblx0XHRcdHNldHRpbmdzIDoge1xuXHRcdFx0XHRoaWRlX29ubW91c2VsZWF2ZVx0OiAwLFxuXHRcdFx0XHRpY29uc1x0XHRcdFx0OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0X3RyaWdnZXIgOiBmdW5jdGlvbiAoZXZlbnRfbmFtZSkge1xuXHRcdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VySGFuZGxlcihcImNvbnRleHRfXCIgKyBldmVudF9uYW1lICsgXCIudmFrYXRhXCIsIHtcblx0XHRcdFx0XHRcInJlZmVyZW5jZVwiXHQ6IHZha2F0YV9jb250ZXh0LnJlZmVyZW5jZSxcblx0XHRcdFx0XHRcImVsZW1lbnRcIlx0OiB2YWthdGFfY29udGV4dC5lbGVtZW50LFxuXHRcdFx0XHRcdFwicG9zaXRpb25cIlx0OiB7XG5cdFx0XHRcdFx0XHRcInhcIiA6IHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3gsXG5cdFx0XHRcdFx0XHRcInlcIiA6IHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3lcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdF9leGVjdXRlIDogZnVuY3Rpb24gKGkpIHtcblx0XHRcdFx0aSA9IHZha2F0YV9jb250ZXh0Lml0ZW1zW2ldO1xuXHRcdFx0XHRyZXR1cm4gaSAmJiAoIWkuX2Rpc2FibGVkIHx8ICgkLmlzRnVuY3Rpb24oaS5fZGlzYWJsZWQpICYmICFpLl9kaXNhYmxlZCh7IFwiaXRlbVwiIDogaSwgXCJyZWZlcmVuY2VcIiA6IHZha2F0YV9jb250ZXh0LnJlZmVyZW5jZSwgXCJlbGVtZW50XCIgOiB2YWthdGFfY29udGV4dC5lbGVtZW50IH0pKSkgJiYgaS5hY3Rpb24gPyBpLmFjdGlvbi5jYWxsKG51bGwsIHtcblx0XHRcdFx0XHRcdFx0XCJpdGVtXCJcdFx0OiBpLFxuXHRcdFx0XHRcdFx0XHRcInJlZmVyZW5jZVwiXHQ6IHZha2F0YV9jb250ZXh0LnJlZmVyZW5jZSxcblx0XHRcdFx0XHRcdFx0XCJlbGVtZW50XCJcdDogdmFrYXRhX2NvbnRleHQuZWxlbWVudCxcblx0XHRcdFx0XHRcdFx0XCJwb3NpdGlvblwiXHQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcInhcIiA6IHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3gsXG5cdFx0XHRcdFx0XHRcdFx0XCJ5XCIgOiB2YWthdGFfY29udGV4dC5wb3NpdGlvbl95XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pIDogZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0X3BhcnNlIDogZnVuY3Rpb24gKG8sIGlzX2NhbGxiYWNrKSB7XG5cdFx0XHRcdGlmKCFvKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0XHRpZighaXNfY2FsbGJhY2spIHtcblx0XHRcdFx0XHR2YWthdGFfY29udGV4dC5odG1sXHRcdD0gXCJcIjtcblx0XHRcdFx0XHR2YWthdGFfY29udGV4dC5pdGVtc1x0PSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgc3RyID0gXCJcIixcblx0XHRcdFx0XHRzZXAgPSBmYWxzZSxcblx0XHRcdFx0XHR0bXA7XG5cblx0XHRcdFx0aWYoaXNfY2FsbGJhY2spIHsgc3RyICs9IFwiPFwiK1widWw+XCI7IH1cblx0XHRcdFx0JC5lYWNoKG8sIGZ1bmN0aW9uIChpLCB2YWwpIHtcblx0XHRcdFx0XHRpZighdmFsKSB7IHJldHVybiB0cnVlOyB9XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuaXRlbXMucHVzaCh2YWwpO1xuXHRcdFx0XHRcdGlmKCFzZXAgJiYgdmFsLnNlcGFyYXRvcl9iZWZvcmUpIHtcblx0XHRcdFx0XHRcdHN0ciArPSBcIjxcIitcImxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxcIitcImEgaHJlZj0nIycgXCIgKyAoJC52YWthdGEuY29udGV4dC5zZXR0aW5ncy5pY29ucyA/ICcnIDogJ3N0eWxlPVwibWFyZ2luLWxlZnQ6MHB4O1wiJykgKyBcIj4mIzE2MDs8XCIrXCIvYT48XCIrXCIvbGk+XCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlcCA9IGZhbHNlO1xuXHRcdFx0XHRcdHN0ciArPSBcIjxcIitcImxpIGNsYXNzPSdcIiArICh2YWwuX2NsYXNzIHx8IFwiXCIpICsgKHZhbC5fZGlzYWJsZWQgPT09IHRydWUgfHwgKCQuaXNGdW5jdGlvbih2YWwuX2Rpc2FibGVkKSAmJiB2YWwuX2Rpc2FibGVkKHsgXCJpdGVtXCIgOiB2YWwsIFwicmVmZXJlbmNlXCIgOiB2YWthdGFfY29udGV4dC5yZWZlcmVuY2UsIFwiZWxlbWVudFwiIDogdmFrYXRhX2NvbnRleHQuZWxlbWVudCB9KSkgPyBcIiB2YWthdGEtY29udGV4dG1lbnUtZGlzYWJsZWQgXCIgOiBcIlwiKSArIFwiJyBcIisodmFsLnNob3J0Y3V0P1wiIGRhdGEtc2hvcnRjdXQ9J1wiK3ZhbC5zaG9ydGN1dCtcIicgXCI6JycpK1wiPlwiO1xuXHRcdFx0XHRcdHN0ciArPSBcIjxcIitcImEgaHJlZj0nIycgcmVsPSdcIiArICh2YWthdGFfY29udGV4dC5pdGVtcy5sZW5ndGggLSAxKSArIFwiJyBcIiArICh2YWwudGl0bGUgPyBcInRpdGxlPSdcIiArIHZhbC50aXRsZSArIFwiJ1wiIDogXCJcIikgKyBcIj5cIjtcblx0XHRcdFx0XHRpZigkLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zKSB7XG5cdFx0XHRcdFx0XHRzdHIgKz0gXCI8XCIrXCJpIFwiO1xuXHRcdFx0XHRcdFx0aWYodmFsLmljb24pIHtcblx0XHRcdFx0XHRcdFx0aWYodmFsLmljb24uaW5kZXhPZihcIi9cIikgIT09IC0xIHx8IHZhbC5pY29uLmluZGV4T2YoXCIuXCIpICE9PSAtMSkgeyBzdHIgKz0gXCIgc3R5bGU9J2JhY2tncm91bmQ6dXJsKFxcXCJcIiArIHZhbC5pY29uICsgXCJcXFwiKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCcgXCI7IH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7IHN0ciArPSBcIiBjbGFzcz0nXCIgKyB2YWwuaWNvbiArIFwiJyBcIjsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c3RyICs9IFwiPjxcIitcIi9pPjxcIitcInNwYW4gY2xhc3M9J3Zha2F0YS1jb250ZXh0bWVudS1zZXAnPiYjMTYwOzxcIitcIi9zcGFuPlwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdHIgKz0gKCQuaXNGdW5jdGlvbih2YWwubGFiZWwpID8gdmFsLmxhYmVsKHsgXCJpdGVtXCIgOiBpLCBcInJlZmVyZW5jZVwiIDogdmFrYXRhX2NvbnRleHQucmVmZXJlbmNlLCBcImVsZW1lbnRcIiA6IHZha2F0YV9jb250ZXh0LmVsZW1lbnQgfSkgOiB2YWwubGFiZWwpICsgKHZhbC5zaG9ydGN1dD8nIDxzcGFuIGNsYXNzPVwidmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0IHZha2F0YS1jb250ZXh0bWVudS1zaG9ydGN1dC0nK3ZhbC5zaG9ydGN1dCsnXCI+JysgKHZhbC5zaG9ydGN1dF9sYWJlbCB8fCAnJykgKyc8L3NwYW4+JzonJykgKyBcIjxcIitcIi9hPlwiO1xuXHRcdFx0XHRcdGlmKHZhbC5zdWJtZW51KSB7XG5cdFx0XHRcdFx0XHR0bXAgPSAkLnZha2F0YS5jb250ZXh0Ll9wYXJzZSh2YWwuc3VibWVudSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRpZih0bXApIHsgc3RyICs9IHRtcDsgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdHIgKz0gXCI8XCIrXCIvbGk+XCI7XG5cdFx0XHRcdFx0aWYodmFsLnNlcGFyYXRvcl9hZnRlcikge1xuXHRcdFx0XHRcdFx0c3RyICs9IFwiPFwiK1wibGkgY2xhc3M9J3Zha2F0YS1jb250ZXh0LXNlcGFyYXRvcic+PFwiK1wiYSBocmVmPScjJyBcIiArICgkLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zID8gJycgOiAnc3R5bGU9XCJtYXJnaW4tbGVmdDowcHg7XCInKSArIFwiPiYjMTYwOzxcIitcIi9hPjxcIitcIi9saT5cIjtcblx0XHRcdFx0XHRcdHNlcCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RyICA9IHN0ci5yZXBsYWNlKC88bGkgY2xhc3NcXD0ndmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yJ1xcPjxcXC9saVxcPiQvLFwiXCIpO1xuXHRcdFx0XHRpZihpc19jYWxsYmFjaykgeyBzdHIgKz0gXCI8L3VsPlwiOyB9XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgb24gdGhlIGRvY3VtZW50IHdoZW4gdGhlIGNvbnRleHRtZW51IGlzIHBhcnNlZCAoSFRNTCBpcyBidWlsdClcblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBwbHVnaW4gY29udGV4dG1lbnVcblx0XHRcdFx0ICogQG5hbWUgY29udGV4dF9wYXJzZS52YWthdGFcblx0XHRcdFx0ICogQHBhcmFtIHtqUXVlcnl9IHJlZmVyZW5jZSB0aGUgZWxlbWVudCB0aGF0IHdhcyByaWdodCBjbGlja2VkXG5cdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBlbGVtZW50IHRoZSBET00gZWxlbWVudCBvZiB0aGUgbWVudSBpdHNlbGZcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IHBvc2l0aW9uIHRoZSB4ICYgeSBjb29yZGluYXRlcyBvZiB0aGUgbWVudVxuXHRcdFx0XHQgKi9cblx0XHRcdFx0aWYoIWlzX2NhbGxiYWNrKSB7IHZha2F0YV9jb250ZXh0Lmh0bWwgPSBzdHI7ICQudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJwYXJzZVwiKTsgfVxuXHRcdFx0XHRyZXR1cm4gc3RyLmxlbmd0aCA+IDEwID8gc3RyIDogZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0X3Nob3dfc3VibWVudSA6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdG8gPSAkKG8pO1xuXHRcdFx0XHRpZighby5sZW5ndGggfHwgIW8uY2hpbGRyZW4oXCJ1bFwiKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG5cdFx0XHRcdHZhciBlID0gby5jaGlsZHJlbihcInVsXCIpLFxuXHRcdFx0XHRcdHhsID0gby5vZmZzZXQoKS5sZWZ0LFxuXHRcdFx0XHRcdHggPSB4bCArIG8ub3V0ZXJXaWR0aCgpLFxuXHRcdFx0XHRcdHkgPSBvLm9mZnNldCgpLnRvcCxcblx0XHRcdFx0XHR3ID0gZS53aWR0aCgpLFxuXHRcdFx0XHRcdGggPSBlLmhlaWdodCgpLFxuXHRcdFx0XHRcdGR3ID0gJCh3aW5kb3cpLndpZHRoKCkgKyAkKHdpbmRvdykuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0XHRcdGRoID0gJCh3aW5kb3cpLmhlaWdodCgpICsgJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXHRcdFx0XHQvLyDQvNC+0LbQtSDQtNCwINGB0LUg0YHQv9C10YHRgtC4INC1INC10LTQvdCwINC/0YDQvtCy0LXRgNC60LAgLSDQtNCw0LvQuCDQvdGP0LzQsCDQvdGP0LrQvtC5INC+0YIg0LrQu9Cw0YHQvtCy0LXRgtC1INCy0LXRh9C1INC90LDQs9C+0YDQtVxuXHRcdFx0XHRpZihyaWdodF90b19sZWZ0KSB7XG5cdFx0XHRcdFx0b1t4IC0gKHcgKyAxMCArIG8ub3V0ZXJXaWR0aCgpKSA8IDAgPyBcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCJdKFwidmFrYXRhLWNvbnRleHQtbGVmdFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRvW3ggKyB3ID4gZHcgICYmIHhsID4gZHcgLSB4ID8gXCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiXShcInZha2F0YS1jb250ZXh0LXJpZ2h0XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHkgKyBoICsgMTAgPiBkaCkge1xuXHRcdFx0XHRcdGUuY3NzKFwiYm90dG9tXCIsXCItMXB4XCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9pZiBkb2VzIG5vdCBmaXQgLSBzdGljayBpdCB0byB0aGUgc2lkZVxuXHRcdFx0XHRpZiAoby5oYXNDbGFzcygndmFrYXRhLWNvbnRleHQtcmlnaHQnKSkge1xuXHRcdFx0XHRcdGlmICh4bCA8IHcpIHtcblx0XHRcdFx0XHRcdGUuY3NzKFwibWFyZ2luLXJpZ2h0XCIsIHhsIC0gdyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChkdyAtIHggPCB3KSB7XG5cdFx0XHRcdFx0XHRlLmNzcyhcIm1hcmdpbi1sZWZ0XCIsIGR3IC0geCAtIHcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGUuc2hvdygpO1xuXHRcdFx0fSxcblx0XHRcdHNob3cgOiBmdW5jdGlvbiAocmVmZXJlbmNlLCBwb3NpdGlvbiwgZGF0YSkge1xuXHRcdFx0XHR2YXIgbywgZSwgeCwgeSwgdywgaCwgZHcsIGRoLCBjb25kID0gdHJ1ZTtcblx0XHRcdFx0aWYodmFrYXRhX2NvbnRleHQuZWxlbWVudCAmJiB2YWthdGFfY29udGV4dC5lbGVtZW50Lmxlbmd0aCkge1xuXHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LmVsZW1lbnQud2lkdGgoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN3aXRjaChjb25kKSB7XG5cdFx0XHRcdFx0Y2FzZSAoIXBvc2l0aW9uICYmICFyZWZlcmVuY2UpOlxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdGNhc2UgKCEhcG9zaXRpb24gJiYgISFyZWZlcmVuY2UpOlxuXHRcdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQucmVmZXJlbmNlXHQ9IHJlZmVyZW5jZTtcblx0XHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3hcdD0gcG9zaXRpb24ueDtcblx0XHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3lcdD0gcG9zaXRpb24ueTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgKCFwb3NpdGlvbiAmJiAhIXJlZmVyZW5jZSk6XG5cdFx0XHRcdFx0XHR2YWthdGFfY29udGV4dC5yZWZlcmVuY2VcdD0gcmVmZXJlbmNlO1xuXHRcdFx0XHRcdFx0byA9IHJlZmVyZW5jZS5vZmZzZXQoKTtcblx0XHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3hcdD0gby5sZWZ0ICsgcmVmZXJlbmNlLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRcdFx0XHR2YWthdGFfY29udGV4dC5wb3NpdGlvbl95XHQ9IG8udG9wO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAoISFwb3NpdGlvbiAmJiAhcmVmZXJlbmNlKTpcblx0XHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3hcdD0gcG9zaXRpb24ueDtcblx0XHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3lcdD0gcG9zaXRpb24ueTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCEhcmVmZXJlbmNlICYmICFkYXRhICYmICQocmVmZXJlbmNlKS5kYXRhKCd2YWthdGFfY29udGV4dG1lbnUnKSkge1xuXHRcdFx0XHRcdGRhdGEgPSAkKHJlZmVyZW5jZSkuZGF0YSgndmFrYXRhX2NvbnRleHRtZW51Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoJC52YWthdGEuY29udGV4dC5fcGFyc2UoZGF0YSkpIHtcblx0XHRcdFx0XHR2YWthdGFfY29udGV4dC5lbGVtZW50Lmh0bWwodmFrYXRhX2NvbnRleHQuaHRtbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodmFrYXRhX2NvbnRleHQuaXRlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5hcHBlbmRUbyhcImJvZHlcIik7XG5cdFx0XHRcdFx0ZSA9IHZha2F0YV9jb250ZXh0LmVsZW1lbnQ7XG5cdFx0XHRcdFx0eCA9IHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3g7XG5cdFx0XHRcdFx0eSA9IHZha2F0YV9jb250ZXh0LnBvc2l0aW9uX3k7XG5cdFx0XHRcdFx0dyA9IGUud2lkdGgoKTtcblx0XHRcdFx0XHRoID0gZS5oZWlnaHQoKTtcblx0XHRcdFx0XHRkdyA9ICQod2luZG93KS53aWR0aCgpICsgJCh3aW5kb3cpLnNjcm9sbExlZnQoKTtcblx0XHRcdFx0XHRkaCA9ICQod2luZG93KS5oZWlnaHQoKSArICQod2luZG93KS5zY3JvbGxUb3AoKTtcblx0XHRcdFx0XHRpZihyaWdodF90b19sZWZ0KSB7XG5cdFx0XHRcdFx0XHR4IC09IChlLm91dGVyV2lkdGgoKSAtICQocmVmZXJlbmNlKS5vdXRlcldpZHRoKCkpO1xuXHRcdFx0XHRcdFx0aWYoeCA8ICQod2luZG93KS5zY3JvbGxMZWZ0KCkgKyAyMCkge1xuXHRcdFx0XHRcdFx0XHR4ID0gJCh3aW5kb3cpLnNjcm9sbExlZnQoKSArIDIwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih4ICsgdyArIDIwID4gZHcpIHtcblx0XHRcdFx0XHRcdHggPSBkdyAtICh3ICsgMjApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih5ICsgaCArIDIwID4gZGgpIHtcblx0XHRcdFx0XHRcdHkgPSBkaCAtIChoICsgMjApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LmVsZW1lbnRcblx0XHRcdFx0XHRcdC5jc3MoeyBcImxlZnRcIiA6IHgsIFwidG9wXCIgOiB5IH0pXG5cdFx0XHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdFx0XHQuZmluZCgnYScpLmZpcnN0KCkuZm9jdXMoKS5wYXJlbnQoKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpO1xuXHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LmlzX3Zpc2libGUgPSB0cnVlO1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIHRyaWdnZXJlZCBvbiB0aGUgZG9jdW1lbnQgd2hlbiB0aGUgY29udGV4dG1lbnUgaXMgc2hvd25cblx0XHRcdFx0XHQgKiBAZXZlbnRcblx0XHRcdFx0XHQgKiBAcGx1Z2luIGNvbnRleHRtZW51XG5cdFx0XHRcdFx0ICogQG5hbWUgY29udGV4dF9zaG93LnZha2F0YVxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSByZWZlcmVuY2UgdGhlIGVsZW1lbnQgdGhhdCB3YXMgcmlnaHQgY2xpY2tlZFxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBlbGVtZW50IHRoZSBET00gZWxlbWVudCBvZiB0aGUgbWVudSBpdHNlbGZcblx0XHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gcG9zaXRpb24gdGhlIHggJiB5IGNvb3JkaW5hdGVzIG9mIHRoZSBtZW51XG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0JC52YWthdGEuY29udGV4dC5fdHJpZ2dlcihcInNob3dcIik7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRoaWRlIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZih2YWthdGFfY29udGV4dC5pc192aXNpYmxlKSB7XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5oaWRlKCkuZmluZChcInVsXCIpLmhpZGUoKS5lbmQoKS5maW5kKCc6Zm9jdXMnKS5ibHVyKCkuZW5kKCkuZGV0YWNoKCk7XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuaXNfdmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIHRyaWdnZXJlZCBvbiB0aGUgZG9jdW1lbnQgd2hlbiB0aGUgY29udGV4dG1lbnUgaXMgaGlkZGVuXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQHBsdWdpbiBjb250ZXh0bWVudVxuXHRcdFx0XHRcdCAqIEBuYW1lIGNvbnRleHRfaGlkZS52YWthdGFcblx0XHRcdFx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gcmVmZXJlbmNlIHRoZSBlbGVtZW50IHRoYXQgd2FzIHJpZ2h0IGNsaWNrZWRcblx0XHRcdFx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gZWxlbWVudCB0aGUgRE9NIGVsZW1lbnQgb2YgdGhlIG1lbnUgaXRzZWxmXG5cdFx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IHBvc2l0aW9uIHRoZSB4ICYgeSBjb29yZGluYXRlcyBvZiB0aGUgbWVudVxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdCQudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJoaWRlXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQkKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJpZ2h0X3RvX2xlZnQgPSAkKFwiYm9keVwiKS5jc3MoXCJkaXJlY3Rpb25cIikgPT09IFwicnRsXCI7XG5cdFx0XHR2YXIgdG8gPSBmYWxzZTtcblxuXHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudCA9ICQoXCI8dWwgY2xhc3M9J3Zha2F0YS1jb250ZXh0Jz48L3VsPlwiKTtcblx0XHRcdHZha2F0YV9jb250ZXh0LmVsZW1lbnRcblx0XHRcdFx0Lm9uKFwibW91c2VlbnRlclwiLCBcImxpXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0XHRcdGlmKCQuY29udGFpbnModGhpcywgZS5yZWxhdGVkVGFyZ2V0KSkge1xuXHRcdFx0XHRcdFx0Ly8g0L/RgNC10LzQsNGF0L3QsNGC0L4g0LfQsNGA0LDQtNC4IGRlbGVnYXRlIG1vdXNlbGVhdmUg0L/Qvi3QtNC+0LvRg1xuXHRcdFx0XHRcdFx0Ly8gJCh0aGlzKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYodG8pIHsgY2xlYXJUaW1lb3V0KHRvKTsgfVxuXHRcdFx0XHRcdHZha2F0YV9jb250ZXh0LmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmVuZCgpO1xuXG5cdFx0XHRcdFx0JCh0aGlzKVxuXHRcdFx0XHRcdFx0LnNpYmxpbmdzKCkuZmluZChcInVsXCIpLmhpZGUoKS5lbmQoKS5lbmQoKVxuXHRcdFx0XHRcdFx0LnBhcmVudHNVbnRpbChcIi52YWthdGEtY29udGV4dFwiLCBcImxpXCIpLmFkZEJhY2soKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpO1xuXHRcdFx0XHRcdCQudmFrYXRhLmNvbnRleHQuX3Nob3dfc3VibWVudSh0aGlzKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0Ly8g0YLQtdGB0YLQvtCy0L4gLSDQtNCw0LvQuCDQvdC1INC90LDRgtC+0LLQsNGA0LLQsD9cblx0XHRcdFx0Lm9uKFwibW91c2VsZWF2ZVwiLCBcImxpXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0aWYoJC5jb250YWlucyh0aGlzLCBlLnJlbGF0ZWRUYXJnZXQpKSB7IHJldHVybjsgfVxuXHRcdFx0XHRcdCQodGhpcykuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5hZGRCYWNrKCkucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0Lm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdCQodGhpcykuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpO1xuXHRcdFx0XHRcdGlmKCQudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaGlkZV9vbm1vdXNlbGVhdmUpIHtcblx0XHRcdFx0XHRcdHRvID0gc2V0VGltZW91dChcblx0XHRcdFx0XHRcdFx0KGZ1bmN0aW9uICh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHsgJC52YWthdGEuY29udGV4dC5oaWRlKCk7IH07XG5cdFx0XHRcdFx0XHRcdH0odGhpcykpLCAkLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmhpZGVfb25tb3VzZWxlYXZlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5vbihcImNsaWNrXCIsIFwiYVwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0Ly99KVxuXHRcdFx0XHQvLy5vbihcIm1vdXNldXBcIiwgXCJhXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0aWYoISQodGhpcykuYmx1cigpLnBhcmVudCgpLmhhc0NsYXNzKFwidmFrYXRhLWNvbnRleHQtZGlzYWJsZWRcIikgJiYgJC52YWthdGEuY29udGV4dC5fZXhlY3V0ZSgkKHRoaXMpLmF0dHIoXCJyZWxcIikpICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0JC52YWthdGEuY29udGV4dC5oaWRlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQub24oJ2tleWRvd24nLCAnYScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHR2YXIgbyA9IG51bGw7XG5cdFx0XHRcdFx0XHRzd2l0Y2goZS53aGljaCkge1xuXHRcdFx0XHRcdFx0XHRjYXNlIDEzOlxuXHRcdFx0XHRcdFx0XHRjYXNlIDMyOlxuXHRcdFx0XHRcdFx0XHRcdGUudHlwZSA9IFwiY2xpY2tcIjtcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0JChlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgMzc6XG5cdFx0XHRcdFx0XHRcdFx0aWYodmFrYXRhX2NvbnRleHQuaXNfdmlzaWJsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmxhc3QoKS5jbG9zZXN0KFwibGlcIikuZmlyc3QoKS5maW5kKFwidWxcIikuaGlkZSgpLmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5lbmQoKS5lbmQoKS5jaGlsZHJlbignYScpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSAzODpcblx0XHRcdFx0XHRcdFx0XHRpZih2YWthdGFfY29udGV4dC5pc192aXNpYmxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvID0gdmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikucHJldkFsbChcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIW8ubGVuZ3RoKSB7IG8gPSB2YWthdGFfY29udGV4dC5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikubGFzdCgpOyB9XG5cdFx0XHRcdFx0XHRcdFx0XHRvLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuY2hpbGRyZW4oJ2EnKS5mb2N1cygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgMzk6XG5cdFx0XHRcdFx0XHRcdFx0aWYodmFrYXRhX2NvbnRleHQuaXNfdmlzaWJsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmxhc3QoKS5jaGlsZHJlbihcInVsXCIpLnNob3coKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbignYScpLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSA0MDpcblx0XHRcdFx0XHRcdFx0XHRpZih2YWthdGFfY29udGV4dC5pc192aXNpYmxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvID0gdmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikubmV4dEFsbChcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIW8ubGVuZ3RoKSB7IG8gPSB2YWthdGFfY29udGV4dC5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikuZmlyc3QoKTsgfVxuXHRcdFx0XHRcdFx0XHRcdFx0by5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmNoaWxkcmVuKCdhJykuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIDI3OlxuXHRcdFx0XHRcdFx0XHRcdCQudmFrYXRhLmNvbnRleHQuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGUud2hpY2gpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHZhciBhID0gdmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKCcudmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0LScgKyBlLndoaWNoKS5wYXJlbnQoKTtcblx0XHRcdFx0XHRpZihhLnBhcmVudCgpLm5vdCgnLnZha2F0YS1jb250ZXh0LWRpc2FibGVkJykpIHtcblx0XHRcdFx0XHRcdGEuY2xpY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KVxuXHRcdFx0XHQub24oXCJtb3VzZWRvd24udmFrYXRhLmpzdHJlZVwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGlmKHZha2F0YV9jb250ZXh0LmlzX3Zpc2libGUgJiYgISQuY29udGFpbnModmFrYXRhX2NvbnRleHQuZWxlbWVudFswXSwgZS50YXJnZXQpKSB7XG5cdFx0XHRcdFx0XHQkLnZha2F0YS5jb250ZXh0LmhpZGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5vbihcImNvbnRleHRfc2hvdy52YWthdGEuanN0cmVlXCIsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwibGk6aGFzKHVsKVwiKS5jaGlsZHJlbihcImFcIikuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1wYXJlbnRcIik7XG5cdFx0XHRcdFx0aWYocmlnaHRfdG9fbGVmdCkge1xuXHRcdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LXJ0bFwiKS5jc3MoXCJkaXJlY3Rpb25cIiwgXCJydGxcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGFsc28gYXBwbHkgYSBSVEwgY2xhc3M/XG5cdFx0XHRcdFx0dmFrYXRhX2NvbnRleHQuZWxlbWVudC5maW5kKFwidWxcIikuaGlkZSgpLmVuZCgpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fSgkKSk7XG5cdC8vICQuanN0cmVlLmRlZmF1bHRzLnBsdWdpbnMucHVzaChcImNvbnRleHRtZW51XCIpO1xuXG5cbi8qKlxuICogIyMjIERyYWcnbidkcm9wIHBsdWdpblxuICpcbiAqIEVuYWJsZXMgZHJhZ2dpbmcgYW5kIGRyb3BwaW5nIG9mIG5vZGVzIGluIHRoZSB0cmVlLCByZXN1bHRpbmcgaW4gYSBtb3ZlIG9yIGNvcHkgb3BlcmF0aW9ucy5cbiAqL1xuXG5cdC8qKlxuXHQgKiBzdG9yZXMgYWxsIGRlZmF1bHRzIGZvciB0aGUgZHJhZyduJ2Ryb3AgcGx1Z2luXG5cdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmRuZFxuXHQgKiBAcGx1Z2luIGRuZFxuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMuZG5kID0ge1xuXHRcdC8qKlxuXHRcdCAqIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGEgY29weSBzaG91bGQgYmUgcG9zc2libGUgd2hpbGUgZHJhZ2dpbmcgKGJ5IHByZXNzaW50IHRoZSBtZXRhIGtleSBvciBDdHJsKS4gRGVmYXVsdHMgdG8gYHRydWVgLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmRuZC5jb3B5XG5cdFx0ICogQHBsdWdpbiBkbmRcblx0XHQgKi9cblx0XHRjb3B5IDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBhIG51bWJlciBpbmRpY2F0aW5nIGhvdyBsb25nIGEgbm9kZSBzaG91bGQgcmVtYWluIGhvdmVyZWQgd2hpbGUgZHJhZ2dpbmcgdG8gYmUgb3BlbmVkLiBEZWZhdWx0cyB0byBgNTAwYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQub3Blbl90aW1lb3V0XG5cdFx0ICogQHBsdWdpbiBkbmRcblx0XHQgKi9cblx0XHRvcGVuX3RpbWVvdXQgOiA1MDAsXG5cdFx0LyoqXG5cdFx0ICogYSBmdW5jdGlvbiBpbnZva2VkIGVhY2ggdGltZSBhIG5vZGUgaXMgYWJvdXQgdG8gYmUgZHJhZ2dlZCwgaW52b2tlZCBpbiB0aGUgdHJlZSdzIHNjb3BlIGFuZCByZWNlaXZlcyB0aGUgbm9kZXMgYWJvdXQgdG8gYmUgZHJhZ2dlZCBhcyBhbiBhcmd1bWVudCAoYXJyYXkpIGFuZCB0aGUgZXZlbnQgdGhhdCBzdGFydGVkIHRoZSBkcmFnIC0gcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCBkcmFnZ2luZ1xuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmRuZC5pc19kcmFnZ2FibGVcblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdGlzX2RyYWdnYWJsZSA6IHRydWUsXG5cdFx0LyoqXG5cdFx0ICogYSBib29sZWFuIGluZGljYXRpbmcgaWYgY2hlY2tzIHNob3VsZCBjb25zdGFudGx5IGJlIG1hZGUgd2hpbGUgdGhlIHVzZXIgaXMgZHJhZ2dpbmcgdGhlIG5vZGUgKGFzIG9wcG9zZWQgdG8gY2hlY2tpbmcgb25seSBvbiBkcm9wKSwgZGVmYXVsdCBpcyBgdHJ1ZWBcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQuY2hlY2tfd2hpbGVfZHJhZ2dpbmdcblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdGNoZWNrX3doaWxlX2RyYWdnaW5nIDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiBub2RlcyBmcm9tIHRoaXMgdHJlZSBzaG91bGQgb25seSBiZSBjb3BpZWQgd2l0aCBkbmQgKGFzIG9wcG9zZWQgdG8gbW92ZWQpLCBkZWZhdWx0IGlzIGBmYWxzZWBcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQuYWx3YXlzX2NvcHlcblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdGFsd2F5c19jb3B5IDogZmFsc2UsXG5cdFx0LyoqXG5cdFx0ICogd2hlbiBkcm9wcGluZyBhIG5vZGUgXCJpbnNpZGVcIiwgdGhpcyBzZXR0aW5nIGluZGljYXRlcyB0aGUgcG9zaXRpb24gdGhlIG5vZGUgc2hvdWxkIGdvIHRvIC0gaXQgY2FuIGJlIGFuIGludGVnZXIgb3IgYSBzdHJpbmc6IFwiZmlyc3RcIiAoc2FtZSBhcyAwKSBvciBcImxhc3RcIiwgZGVmYXVsdCBpcyBgMGBcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQuaW5zaWRlX3Bvc1xuXHRcdCAqIEBwbHVnaW4gZG5kXG5cdFx0ICovXG5cdFx0aW5zaWRlX3BvcyA6IDAsXG5cdFx0LyoqXG5cdFx0ICogd2hlbiBzdGFydGluZyB0aGUgZHJhZyBvbiBhIG5vZGUgdGhhdCBpcyBzZWxlY3RlZCB0aGlzIHNldHRpbmcgY29udHJvbHMgaWYgYWxsIHNlbGVjdGVkIG5vZGVzIGFyZSBkcmFnZ2VkIG9yIG9ubHkgdGhlIHNpbmdsZSBub2RlLCBkZWZhdWx0IGlzIGB0cnVlYCwgd2hpY2ggbWVhbnMgYWxsIHNlbGVjdGVkIG5vZGVzIGFyZSBkcmFnZ2VkIHdoZW4gdGhlIGRyYWcgaXMgc3RhcnRlZCBvbiBhIHNlbGVjdGVkIG5vZGVcblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQuZHJhZ19zZWxlY3Rpb25cblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdGRyYWdfc2VsZWN0aW9uIDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBjb250cm9scyB3aGV0aGVyIGRuZCB3b3JrcyBvbiB0b3VjaCBkZXZpY2VzLiBJZiBsZWZ0IGFzIGJvb2xlYW4gdHJ1ZSBkbmQgd2lsbCB3b3JrIHRoZSBzYW1lIGFzIGluIGRlc2t0b3AgYnJvd3NlcnMsIHdoaWNoIGluIHNvbWUgY2FzZXMgbWF5IGltcGFpciBzY3JvbGxpbmcuIElmIHNldCB0byBib29sZWFuIGZhbHNlIGRuZCB3aWxsIG5vdCB3b3JrIG9uIHRvdWNoIGRldmljZXMuIFRoZXJlIGlzIGEgc3BlY2lhbCB0aGlyZCBvcHRpb24gLSBzdHJpbmcgXCJzZWxlY3RlZFwiIHdoaWNoIG1lYW5zIG9ubHkgc2VsZWN0ZWQgbm9kZXMgY2FuIGJlIGRyYWdnZWQgb24gdG91Y2ggZGV2aWNlcy5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5kbmQudG91Y2hcblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdHRvdWNoIDogdHJ1ZSxcblx0XHQvKipcblx0XHQgKiBjb250cm9scyB3aGV0aGVyIGl0ZW1zIGNhbiBiZSBkcm9wcGVkIGFueXdoZXJlIG9uIHRoZSBub2RlLCBub3QganVzdCBvbiB0aGUgYW5jaG9yLCBieSBkZWZhdWx0IG9ubHkgdGhlIG5vZGUgYW5jaG9yIGlzIGEgdmFsaWQgZHJvcCB0YXJnZXQuIFdvcmtzIGJlc3Qgd2l0aCB0aGUgd2hvbGVyb3cgcGx1Z2luLiBJZiBlbmFibGVkIG9uIG1vYmlsZSBkZXBlbmRpbmcgb24gdGhlIGludGVyZmFjZSBpdCBtaWdodCBiZSBoYXJkIGZvciB0aGUgdXNlciB0byBjYW5jZWwgdGhlIGRyb3AsIHNpbmNlIHRoZSB3aG9sZSB0cmVlIGNvbnRhaW5lciB3aWxsIGJlIGEgdmFsaWQgZHJvcCB0YXJnZXQuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuZG5kLmxhcmdlX2Ryb3BfdGFyZ2V0XG5cdFx0ICogQHBsdWdpbiBkbmRcblx0XHQgKi9cblx0XHRsYXJnZV9kcm9wX3RhcmdldCA6IGZhbHNlLFxuXHRcdC8qKlxuXHRcdCAqIGNvbnRyb2xzIHdoZXRoZXIgYSBkcmFnIGNhbiBiZSBpbml0aWF0ZWQgZnJvbSBhbnkgcGFydCBvZiB0aGUgbm9kZSBhbmQgbm90IGp1c3QgdGhlIHRleHQvaWNvbiBwYXJ0LCB3b3JrcyBiZXN0IHdpdGggdGhlIHdob2xlcm93IHBsdWdpbi4gS2VlcCBpbiBtaW5kIGl0IGNhbiBjYXVzZSBwcm9ibGVtcyB3aXRoIHRyZWUgc2Nyb2xsaW5nIG9uIG1vYmlsZSBkZXBlbmRpbmcgb24gdGhlIGludGVyZmFjZSAtIGluIHRoYXQgY2FzZSBzZXQgdGhlIHRvdWNoIG9wdGlvbiB0byBcInNlbGVjdGVkXCIuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0XG5cdFx0ICogQHBsdWdpbiBkbmRcblx0XHQgKi9cblx0XHRsYXJnZV9kcmFnX3RhcmdldCA6IGZhbHNlLFxuXHRcdC8qKlxuXHRcdCAqIGNvbnRyb2xzIHdoZXRoZXIgdXNlIEhUTUw1IGRuZCBhcGkgaW5zdGVhZCBvZiBjbGFzc2ljYWwuIFRoYXQgd2lsbCBhbGxvdyBiZXR0ZXIgaW50ZWdyYXRpb24gb2YgZG5kIGV2ZW50cyB3aXRoIG90aGVyIEhUTUw1IGNvbnRyb2xzLlxuXHRcdCAqIEByZWZlcmVuY2UgaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWRyYWduZHJvcFxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLmRuZC51c2VfaHRtbDVcblx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdCAqL1xuXHRcdHVzZV9odG1sNTogZmFsc2Vcblx0fTtcblx0dmFyIGRyZywgZWxtO1xuXHQvLyBUT0RPOiBub3cgY2hlY2sgd29ya3MgYnkgY2hlY2tpbmcgZm9yIGVhY2ggbm9kZSBpbmRpdmlkdWFsbHksIGhvdyBhYm91dCBtYXhfY2hpbGRyZW4sIHVuaXF1ZSwgZXRjP1xuXHQkLmpzdHJlZS5wbHVnaW5zLmRuZCA9IGZ1bmN0aW9uIChvcHRpb25zLCBwYXJlbnQpIHtcblx0XHR0aGlzLmluaXQgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcblx0XHRcdHBhcmVudC5pbml0LmNhbGwodGhpcywgZWwsIG9wdGlvbnMpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1ID0gdGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1ICYmICgnZHJhZ2dhYmxlJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykpO1xuXHRcdH07XG5cdFx0dGhpcy5iaW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cGFyZW50LmJpbmQuY2FsbCh0aGlzKTtcblxuXHRcdFx0dGhpcy5lbGVtZW50XG5cdFx0XHRcdC5vbih0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDUgPyAnZHJhZ3N0YXJ0LmpzdHJlZScgOiAnbW91c2Vkb3duLmpzdHJlZSB0b3VjaHN0YXJ0LmpzdHJlZScsIHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0ID8gJy5qc3RyZWUtbm9kZScgOiAnLmpzdHJlZS1hbmNob3InLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRpZih0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldCAmJiAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuanN0cmVlLW5vZGUnKVswXSAhPT0gZS5jdXJyZW50VGFyZ2V0KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoZS50eXBlID09PSBcInRvdWNoc3RhcnRcIiAmJiAoIXRoaXMuc2V0dGluZ3MuZG5kLnRvdWNoIHx8ICh0aGlzLnNldHRpbmdzLmRuZC50b3VjaCA9PT0gJ3NlbGVjdGVkJyAmJiAhJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5qc3RyZWUtbm9kZScpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpLmhhc0NsYXNzKCdqc3RyZWUtY2xpY2tlZCcpKSkpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2YXIgb2JqID0gdGhpcy5nZXRfbm9kZShlLnRhcmdldCksXG5cdFx0XHRcdFx0XHRcdG1sdCA9IHRoaXMuaXNfc2VsZWN0ZWQob2JqKSAmJiB0aGlzLnNldHRpbmdzLmRuZC5kcmFnX3NlbGVjdGlvbiA/IHRoaXMuZ2V0X3RvcF9zZWxlY3RlZCgpLmxlbmd0aCA6IDEsXG5cdFx0XHRcdFx0XHRcdHR4dCA9IChtbHQgPiAxID8gbWx0ICsgJyAnICsgdGhpcy5nZXRfc3RyaW5nKCdub2RlcycpIDogdGhpcy5nZXRfdGV4dChlLmN1cnJlbnRUYXJnZXQpKTtcblx0XHRcdFx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0KSB7XG5cdFx0XHRcdFx0XHRcdHR4dCA9ICQudmFrYXRhLmh0bWwuZXNjYXBlKHR4dCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihvYmogJiYgb2JqLmlkICYmIG9iai5pZCAhPT0gJC5qc3RyZWUucm9vdCAmJiAoZS53aGljaCA9PT0gMSB8fCBlLnR5cGUgPT09IFwidG91Y2hzdGFydFwiIHx8IGUudHlwZSA9PT0gXCJkcmFnc3RhcnRcIikgJiZcblx0XHRcdFx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZG5kLmlzX2RyYWdnYWJsZSA9PT0gdHJ1ZSB8fCAoJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuZG5kLmlzX2RyYWdnYWJsZSkgJiYgdGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlLmNhbGwodGhpcywgKG1sdCA+IDEgPyB0aGlzLmdldF90b3Bfc2VsZWN0ZWQodHJ1ZSkgOiBbb2JqXSksIGUpKSlcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRkcmcgPSB7ICdqc3RyZWUnIDogdHJ1ZSwgJ29yaWdpbicgOiB0aGlzLCAnb2JqJyA6IHRoaXMuZ2V0X25vZGUob2JqLHRydWUpLCAnbm9kZXMnIDogbWx0ID4gMSA/IHRoaXMuZ2V0X3RvcF9zZWxlY3RlZCgpIDogW29iai5pZF0gfTtcblx0XHRcdFx0XHRcdFx0ZWxtID0gZS5jdXJyZW50VGFyZ2V0O1xuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1KSB7XG5cdFx0XHRcdFx0XHRcdFx0JC52YWthdGEuZG5kLl90cmlnZ2VyKCdzdGFydCcsIGUsIHsgJ2hlbHBlcic6ICQoKSwgJ2VsZW1lbnQnOiBlbG0sICdkYXRhJzogZHJnIH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCdtb3VzZWRvd24uanN0cmVlJyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuICQudmFrYXRhLmRuZC5zdGFydChlLCBkcmcsICc8ZGl2IGlkPVwianN0cmVlLWRuZFwiIGNsYXNzPVwianN0cmVlLScgKyB0aGlzLmdldF90aGVtZSgpICsgJyBqc3RyZWUtJyArIHRoaXMuZ2V0X3RoZW1lKCkgKyAnLScgKyB0aGlzLmdldF90aGVtZV92YXJpYW50KCkgKyAnICcgKyAoIHRoaXMuc2V0dGluZ3MuY29yZS50aGVtZXMucmVzcG9uc2l2ZSA/ICcganN0cmVlLWRuZC1yZXNwb25zaXZlJyA6ICcnICkgKyAnXCI+PGkgY2xhc3M9XCJqc3RyZWUtaWNvbiBqc3RyZWUtZXJcIj48L2k+JyArIHR4dCArICc8aW5zIGNsYXNzPVwianN0cmVlLWNvcHlcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj4rPC9pbnM+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1KSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0XHRcdC5vbignZHJhZ292ZXIuanN0cmVlJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHQkLnZha2F0YS5kbmQuX3RyaWdnZXIoJ21vdmUnLCBlLCB7ICdoZWxwZXInOiAkKCksICdlbGVtZW50JzogZWxtLCAnZGF0YSc6IGRyZyB9KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQvLy5vbignZHJhZ2VudGVyLmpzdHJlZScsIHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2Ryb3BfdGFyZ2V0ID8gJy5qc3RyZWUtbm9kZScgOiAnLmpzdHJlZS1hbmNob3InLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0Ly9cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdC8vXHRcdCQudmFrYXRhLmRuZC5fdHJpZ2dlcignbW92ZScsIGUsIHsgJ2hlbHBlcic6ICQoKSwgJ2VsZW1lbnQnOiBlbG0sICdkYXRhJzogZHJnIH0pO1xuXHRcdFx0XHRcdC8vXHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHQvL1x0fSwgdGhpcykpXG5cdFx0XHRcdFx0Lm9uKCdkcm9wLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHQkLnZha2F0YS5kbmQuX3RyaWdnZXIoJ3N0b3AnLCBlLCB7ICdoZWxwZXInOiAkKCksICdlbGVtZW50JzogZWxtLCAnZGF0YSc6IGRyZyB9KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0dGhpcy5yZWRyYXdfbm9kZSA9IGZ1bmN0aW9uKG9iaiwgZGVlcCwgY2FsbGJhY2ssIGZvcmNlX3JlbmRlcikge1xuXHRcdFx0b2JqID0gcGFyZW50LnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRpZiAob2JqICYmIHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSkge1xuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kbmQubGFyZ2VfZHJhZ190YXJnZXQpIHtcblx0XHRcdFx0XHRvYmouc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCB0cnVlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgaSwgaiwgdG1wID0gbnVsbDtcblx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmKG9iai5jaGlsZE5vZGVzW2ldICYmIG9iai5jaGlsZE5vZGVzW2ldLmNsYXNzTmFtZSAmJiBvYmouY2hpbGROb2Rlc1tpXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRcdHRtcCA9IG9iai5jaGlsZE5vZGVzW2ldO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYodG1wKSB7XG5cdFx0XHRcdFx0XHR0bXAuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fTtcblx0fTtcblxuXHQkKGZ1bmN0aW9uKCkge1xuXHRcdC8vIGJpbmQgb25seSBvbmNlIGZvciBhbGwgaW5zdGFuY2VzXG5cdFx0dmFyIGxhc3RtdiA9IGZhbHNlLFxuXHRcdFx0bGFzdGVyID0gZmFsc2UsXG5cdFx0XHRsYXN0ZXYgPSBmYWxzZSxcblx0XHRcdG9wZW50byA9IGZhbHNlLFxuXHRcdFx0bWFya2VyID0gJCgnPGRpdiBpZD1cImpzdHJlZS1tYXJrZXJcIj4mIzE2MDs8L2Rpdj4nKS5oaWRlKCk7IC8vLmFwcGVuZFRvKCdib2R5Jyk7XG5cblx0XHQkKGRvY3VtZW50KVxuXHRcdFx0Lm9uKCdkbmRfc3RhcnQudmFrYXRhLmpzdHJlZScsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdGxhc3RtdiA9IGZhbHNlO1xuXHRcdFx0XHRsYXN0ZXYgPSBmYWxzZTtcblx0XHRcdFx0aWYoIWRhdGEgfHwgIWRhdGEuZGF0YSB8fCAhZGF0YS5kYXRhLmpzdHJlZSkgeyByZXR1cm47IH1cblx0XHRcdFx0bWFya2VyLmFwcGVuZFRvKCdib2R5Jyk7IC8vLnNob3coKTtcblx0XHRcdH0pXG5cdFx0XHQub24oJ2RuZF9tb3ZlLnZha2F0YS5qc3RyZWUnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRpZihvcGVudG8pIHtcblx0XHRcdFx0XHRpZiAoIWRhdGEuZXZlbnQgfHwgZGF0YS5ldmVudC50eXBlICE9PSAnZHJhZ292ZXInIHx8IGRhdGEuZXZlbnQudGFyZ2V0ICE9PSBsYXN0ZXYudGFyZ2V0KSB7XG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQob3BlbnRvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIWRhdGEgfHwgIWRhdGEuZGF0YSB8fCAhZGF0YS5kYXRhLmpzdHJlZSkgeyByZXR1cm47IH1cblxuXHRcdFx0XHQvLyBpZiB3ZSBhcmUgaG92ZXJpbmcgdGhlIG1hcmtlciBpbWFnZSBkbyBub3RoaW5nIChjYW4gaGFwcGVuIG9uIFwiaW5zaWRlXCIgZHJhZ3MpXG5cdFx0XHRcdGlmKGRhdGEuZXZlbnQudGFyZ2V0LmlkICYmIGRhdGEuZXZlbnQudGFyZ2V0LmlkID09PSAnanN0cmVlLW1hcmtlcicpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0bGFzdGV2ID0gZGF0YS5ldmVudDtcblxuXHRcdFx0XHR2YXIgaW5zID0gJC5qc3RyZWUucmVmZXJlbmNlKGRhdGEuZXZlbnQudGFyZ2V0KSxcblx0XHRcdFx0XHRyZWYgPSBmYWxzZSxcblx0XHRcdFx0XHRvZmYgPSBmYWxzZSxcblx0XHRcdFx0XHRyZWwgPSBmYWxzZSxcblx0XHRcdFx0XHR0bXAsIGwsIHQsIGgsIHAsIGksIG8sIG9rLCB0MSwgdDIsIG9wLCBwcywgcHIsIGlwLCB0bSwgaXNfY29weSwgcG47XG5cdFx0XHRcdC8vIGlmIHdlIGFyZSBvdmVyIGFuIGluc3RhbmNlXG5cdFx0XHRcdGlmKGlucyAmJiBpbnMuX2RhdGEgJiYgaW5zLl9kYXRhLmRuZCkge1xuXHRcdFx0XHRcdG1hcmtlci5hdHRyKCdjbGFzcycsICdqc3RyZWUtJyArIGlucy5nZXRfdGhlbWUoKSArICggaW5zLnNldHRpbmdzLmNvcmUudGhlbWVzLnJlc3BvbnNpdmUgPyAnIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZScgOiAnJyApKTtcblx0XHRcdFx0XHRpc19jb3B5ID0gZGF0YS5kYXRhLm9yaWdpbiAmJiAoZGF0YS5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHkgfHwgKGRhdGEuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkgJiYgKGRhdGEuZXZlbnQubWV0YUtleSB8fCBkYXRhLmV2ZW50LmN0cmxLZXkpKSk7XG5cdFx0XHRcdFx0ZGF0YS5oZWxwZXJcblx0XHRcdFx0XHRcdC5jaGlsZHJlbigpLmF0dHIoJ2NsYXNzJywgJ2pzdHJlZS0nICsgaW5zLmdldF90aGVtZSgpICsgJyBqc3RyZWUtJyArIGlucy5nZXRfdGhlbWUoKSArICctJyArIGlucy5nZXRfdGhlbWVfdmFyaWFudCgpICsgJyAnICsgKCBpbnMuc2V0dGluZ3MuY29yZS50aGVtZXMucmVzcG9uc2l2ZSA/ICcganN0cmVlLWRuZC1yZXNwb25zaXZlJyA6ICcnICkpXG5cdFx0XHRcdFx0XHQuZmluZCgnLmpzdHJlZS1jb3B5JykuZmlyc3QoKVsgaXNfY29weSA/ICdzaG93JyA6ICdoaWRlJyBdKCk7XG5cblx0XHRcdFx0XHQvLyBpZiBhcmUgaG92ZXJpbmcgdGhlIGNvbnRhaW5lciBpdHNlbGYgYWRkIGEgbmV3IHJvb3Qgbm9kZVxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coZGF0YS5ldmVudCk7XG5cdFx0XHRcdFx0aWYoIChkYXRhLmV2ZW50LnRhcmdldCA9PT0gaW5zLmVsZW1lbnRbMF0gfHwgZGF0YS5ldmVudC50YXJnZXQgPT09IGlucy5nZXRfY29udGFpbmVyX3VsKClbMF0pICYmIGlucy5nZXRfY29udGFpbmVyX3VsKCkuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdG9rID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZvcih0MSA9IDAsIHQyID0gZGF0YS5kYXRhLm5vZGVzLmxlbmd0aDsgdDEgPCB0MjsgdDErKykge1xuXHRcdFx0XHRcdFx0XHRvayA9IG9rICYmIGlucy5jaGVjayggKGRhdGEuZGF0YS5vcmlnaW4gJiYgKGRhdGEuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5IHx8IChkYXRhLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5ICYmIChkYXRhLmV2ZW50Lm1ldGFLZXkgfHwgZGF0YS5ldmVudC5jdHJsS2V5KSkgKSA/IFwiY29weV9ub2RlXCIgOiBcIm1vdmVfbm9kZVwiKSwgKGRhdGEuZGF0YS5vcmlnaW4gJiYgZGF0YS5kYXRhLm9yaWdpbiAhPT0gaW5zID8gZGF0YS5kYXRhLm9yaWdpbi5nZXRfbm9kZShkYXRhLmRhdGEubm9kZXNbdDFdKSA6IGRhdGEuZGF0YS5ub2Rlc1t0MV0pLCAkLmpzdHJlZS5yb290LCAnbGFzdCcsIHsgJ2RuZCcgOiB0cnVlLCAncmVmJyA6IGlucy5nZXRfbm9kZSgkLmpzdHJlZS5yb290KSwgJ3BvcycgOiAnaScsICdvcmlnaW4nIDogZGF0YS5kYXRhLm9yaWdpbiwgJ2lzX211bHRpJyA6IChkYXRhLmRhdGEub3JpZ2luICYmIGRhdGEuZGF0YS5vcmlnaW4gIT09IGlucyksICdpc19mb3JlaWduJyA6ICghZGF0YS5kYXRhLm9yaWdpbikgfSk7XG5cdFx0XHRcdFx0XHRcdGlmKCFvaykgeyBicmVhazsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYob2spIHtcblx0XHRcdFx0XHRcdFx0bGFzdG12ID0geyAnaW5zJyA6IGlucywgJ3BhcicgOiAkLmpzdHJlZS5yb290LCAncG9zJyA6ICdsYXN0JyB9O1xuXHRcdFx0XHRcdFx0XHRtYXJrZXIuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHRkYXRhLmhlbHBlci5maW5kKCcuanN0cmVlLWljb24nKS5maXJzdCgpLnJlbW92ZUNsYXNzKCdqc3RyZWUtZXInKS5hZGRDbGFzcygnanN0cmVlLW9rJyk7XG5cdFx0XHRcdFx0XHRcdGlmIChkYXRhLmV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZGF0YS5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlcikge1xuXHRcdFx0XHRcdFx0XHRcdGRhdGEuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IGlzX2NvcHkgPyAnY29weScgOiAnbW92ZSc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGlmIHdlIGFyZSBob3ZlcmluZyBhIHRyZWUgbm9kZVxuXHRcdFx0XHRcdFx0cmVmID0gaW5zLnNldHRpbmdzLmRuZC5sYXJnZV9kcm9wX3RhcmdldCA/ICQoZGF0YS5ldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5qc3RyZWUtbm9kZScpLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpIDogJChkYXRhLmV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLmpzdHJlZS1hbmNob3InKTtcblx0XHRcdFx0XHRcdGlmKHJlZiAmJiByZWYubGVuZ3RoICYmIHJlZi5wYXJlbnQoKS5pcygnLmpzdHJlZS1jbG9zZWQsIC5qc3RyZWUtb3BlbiwgLmpzdHJlZS1sZWFmJykpIHtcblx0XHRcdFx0XHRcdFx0b2ZmID0gcmVmLm9mZnNldCgpO1xuXHRcdFx0XHRcdFx0XHRyZWwgPSAoZGF0YS5ldmVudC5wYWdlWSAhPT0gdW5kZWZpbmVkID8gZGF0YS5ldmVudC5wYWdlWSA6IGRhdGEuZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWSkgLSBvZmYudG9wO1xuXHRcdFx0XHRcdFx0XHRoID0gcmVmLm91dGVySGVpZ2h0KCk7XG5cdFx0XHRcdFx0XHRcdGlmKHJlbCA8IGggLyAzKSB7XG5cdFx0XHRcdFx0XHRcdFx0byA9IFsnYicsICdpJywgJ2EnXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmKHJlbCA+IGggLSBoIC8gMykge1xuXHRcdFx0XHRcdFx0XHRcdG8gPSBbJ2EnLCAnaScsICdiJ107XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0byA9IHJlbCA+IGggLyAyID8gWydpJywgJ2EnLCAnYiddIDogWydpJywgJ2InLCAnYSddO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdCQuZWFjaChvLCBmdW5jdGlvbiAoaiwgdikge1xuXHRcdFx0XHRcdFx0XHRcdHN3aXRjaCh2KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bCA9IG9mZi5sZWZ0IC0gNjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dCA9IG9mZi50b3A7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHAgPSBpbnMuZ2V0X3BhcmVudChyZWYpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpID0gcmVmLnBhcmVudCgpLmluZGV4KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnaSc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlwID0gaW5zLnNldHRpbmdzLmRuZC5pbnNpZGVfcG9zO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0bSA9IGlucy5nZXRfbm9kZShyZWYucGFyZW50KCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsID0gb2ZmLmxlZnQgLSAyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ID0gb2ZmLnRvcCArIGggLyAyICsgMTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cCA9IHRtLmlkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpID0gaXAgPT09ICdmaXJzdCcgPyAwIDogKGlwID09PSAnbGFzdCcgPyB0bS5jaGlsZHJlbi5sZW5ndGggOiBNYXRoLm1pbihpcCwgdG0uY2hpbGRyZW4ubGVuZ3RoKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnYSc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGwgPSBvZmYubGVmdCAtIDY7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHQgPSBvZmYudG9wICsgaDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cCA9IGlucy5nZXRfcGFyZW50KHJlZik7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGkgPSByZWYucGFyZW50KCkuaW5kZXgoKSArIDE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRvayA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKHQxID0gMCwgdDIgPSBkYXRhLmRhdGEubm9kZXMubGVuZ3RoOyB0MSA8IHQyOyB0MSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcCA9IGRhdGEuZGF0YS5vcmlnaW4gJiYgKGRhdGEuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5IHx8IChkYXRhLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5ICYmIChkYXRhLmV2ZW50Lm1ldGFLZXkgfHwgZGF0YS5ldmVudC5jdHJsS2V5KSkpID8gXCJjb3B5X25vZGVcIiA6IFwibW92ZV9ub2RlXCI7XG5cdFx0XHRcdFx0XHRcdFx0XHRwcyA9IGk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihvcCA9PT0gXCJtb3ZlX25vZGVcIiAmJiB2ID09PSAnYScgJiYgKGRhdGEuZGF0YS5vcmlnaW4gJiYgZGF0YS5kYXRhLm9yaWdpbiA9PT0gaW5zKSAmJiBwID09PSBpbnMuZ2V0X3BhcmVudChkYXRhLmRhdGEubm9kZXNbdDFdKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwciA9IGlucy5nZXRfbm9kZShwKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYocHMgPiAkLmluQXJyYXkoZGF0YS5kYXRhLm5vZGVzW3QxXSwgcHIuY2hpbGRyZW4pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cHMgLT0gMTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0b2sgPSBvayAmJiAoIChpbnMgJiYgaW5zLnNldHRpbmdzICYmIGlucy5zZXR0aW5ncy5kbmQgJiYgaW5zLnNldHRpbmdzLmRuZC5jaGVja193aGlsZV9kcmFnZ2luZyA9PT0gZmFsc2UpIHx8IGlucy5jaGVjayhvcCwgKGRhdGEuZGF0YS5vcmlnaW4gJiYgZGF0YS5kYXRhLm9yaWdpbiAhPT0gaW5zID8gZGF0YS5kYXRhLm9yaWdpbi5nZXRfbm9kZShkYXRhLmRhdGEubm9kZXNbdDFdKSA6IGRhdGEuZGF0YS5ub2Rlc1t0MV0pLCBwLCBwcywgeyAnZG5kJyA6IHRydWUsICdyZWYnIDogaW5zLmdldF9ub2RlKHJlZi5wYXJlbnQoKSksICdwb3MnIDogdiwgJ29yaWdpbicgOiBkYXRhLmRhdGEub3JpZ2luLCAnaXNfbXVsdGknIDogKGRhdGEuZGF0YS5vcmlnaW4gJiYgZGF0YS5kYXRhLm9yaWdpbiAhPT0gaW5zKSwgJ2lzX2ZvcmVpZ24nIDogKCFkYXRhLmRhdGEub3JpZ2luKSB9KSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoIW9rKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKGlucyAmJiBpbnMubGFzdF9lcnJvcikgeyBsYXN0ZXIgPSBpbnMubGFzdF9lcnJvcigpOyB9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZih2ID09PSAnaScgJiYgcmVmLnBhcmVudCgpLmlzKCcuanN0cmVlLWNsb3NlZCcpICYmIGlucy5zZXR0aW5ncy5kbmQub3Blbl90aW1lb3V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcGVudG8gPSBzZXRUaW1lb3V0KChmdW5jdGlvbiAoeCwgeikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB4Lm9wZW5fbm9kZSh6KTsgfTsgfShpbnMsIHJlZikpLCBpbnMuc2V0dGluZ3MuZG5kLm9wZW5fdGltZW91dCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmKG9rKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwbiA9IGlucy5nZXRfbm9kZShwLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghcG4uaGFzQ2xhc3MoJy5qc3RyZWUtZG5kLXBhcmVudCcpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCQoJy5qc3RyZWUtZG5kLXBhcmVudCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtZG5kLXBhcmVudCcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwbi5hZGRDbGFzcygnanN0cmVlLWRuZC1wYXJlbnQnKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGxhc3RtdiA9IHsgJ2lucycgOiBpbnMsICdwYXInIDogcCwgJ3BvcycgOiB2ID09PSAnaScgJiYgaXAgPT09ICdsYXN0JyAmJiBpID09PSAwICYmICFpbnMuaXNfbG9hZGVkKHRtKSA/ICdsYXN0JyA6IGkgfTtcblx0XHRcdFx0XHRcdFx0XHRcdG1hcmtlci5jc3MoeyAnbGVmdCcgOiBsICsgJ3B4JywgJ3RvcCcgOiB0ICsgJ3B4JyB9KS5zaG93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhLmhlbHBlci5maW5kKCcuanN0cmVlLWljb24nKS5maXJzdCgpLnJlbW92ZUNsYXNzKCdqc3RyZWUtZXInKS5hZGRDbGFzcygnanN0cmVlLW9rJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5ldmVudC5vcmlnaW5hbEV2ZW50ICYmIGRhdGEuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gaXNfY29weSA/ICdjb3B5JyA6ICdtb3ZlJztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGxhc3RlciA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdFx0byA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0aWYobyA9PT0gdHJ1ZSkgeyByZXR1cm47IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0JCgnLmpzdHJlZS1kbmQtcGFyZW50JykucmVtb3ZlQ2xhc3MoJ2pzdHJlZS1kbmQtcGFyZW50Jyk7XG5cdFx0XHRcdGxhc3RtdiA9IGZhbHNlO1xuXHRcdFx0XHRkYXRhLmhlbHBlci5maW5kKCcuanN0cmVlLWljb24nKS5yZW1vdmVDbGFzcygnanN0cmVlLW9rJykuYWRkQ2xhc3MoJ2pzdHJlZS1lcicpO1xuXHRcdFx0XHRpZiAoZGF0YS5ldmVudC5vcmlnaW5hbEV2ZW50ICYmIGRhdGEuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIpIHtcblx0XHRcdFx0XHRkYXRhLmV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWFya2VyLmhpZGUoKTtcblx0XHRcdH0pXG5cdFx0XHQub24oJ2RuZF9zY3JvbGwudmFrYXRhLmpzdHJlZScsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdGlmKCFkYXRhIHx8ICFkYXRhLmRhdGEgfHwgIWRhdGEuZGF0YS5qc3RyZWUpIHsgcmV0dXJuOyB9XG5cdFx0XHRcdG1hcmtlci5oaWRlKCk7XG5cdFx0XHRcdGxhc3RtdiA9IGZhbHNlO1xuXHRcdFx0XHRsYXN0ZXYgPSBmYWxzZTtcblx0XHRcdFx0ZGF0YS5oZWxwZXIuZmluZCgnLmpzdHJlZS1pY29uJykuZmlyc3QoKS5yZW1vdmVDbGFzcygnanN0cmVlLW9rJykuYWRkQ2xhc3MoJ2pzdHJlZS1lcicpO1xuXHRcdFx0fSlcblx0XHRcdC5vbignZG5kX3N0b3AudmFrYXRhLmpzdHJlZScsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdCQoJy5qc3RyZWUtZG5kLXBhcmVudCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtZG5kLXBhcmVudCcpO1xuXHRcdFx0XHRpZihvcGVudG8pIHsgY2xlYXJUaW1lb3V0KG9wZW50byk7IH1cblx0XHRcdFx0aWYoIWRhdGEgfHwgIWRhdGEuZGF0YSB8fCAhZGF0YS5kYXRhLmpzdHJlZSkgeyByZXR1cm47IH1cblx0XHRcdFx0bWFya2VyLmhpZGUoKS5kZXRhY2goKTtcblx0XHRcdFx0dmFyIGksIGosIG5vZGVzID0gW107XG5cdFx0XHRcdGlmKGxhc3Rtdikge1xuXHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IGRhdGEuZGF0YS5ub2Rlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdG5vZGVzW2ldID0gZGF0YS5kYXRhLm9yaWdpbiA/IGRhdGEuZGF0YS5vcmlnaW4uZ2V0X25vZGUoZGF0YS5kYXRhLm5vZGVzW2ldKSA6IGRhdGEuZGF0YS5ub2Rlc1tpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGFzdG12Lmluc1sgZGF0YS5kYXRhLm9yaWdpbiAmJiAoZGF0YS5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHkgfHwgKGRhdGEuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkgJiYgKGRhdGEuZXZlbnQubWV0YUtleSB8fCBkYXRhLmV2ZW50LmN0cmxLZXkpKSkgPyAnY29weV9ub2RlJyA6ICdtb3ZlX25vZGUnIF0obm9kZXMsIGxhc3Rtdi5wYXIsIGxhc3Rtdi5wb3MsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGRhdGEuZGF0YS5vcmlnaW4pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGkgPSAkKGRhdGEuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCcuanN0cmVlJyk7XG5cdFx0XHRcdFx0aWYoaS5sZW5ndGggJiYgbGFzdGVyICYmIGxhc3Rlci5lcnJvciAmJiBsYXN0ZXIuZXJyb3IgPT09ICdjaGVjaycpIHtcblx0XHRcdFx0XHRcdGkgPSBpLmpzdHJlZSh0cnVlKTtcblx0XHRcdFx0XHRcdGlmKGkpIHtcblx0XHRcdFx0XHRcdFx0aS5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcywgbGFzdGVyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0bGFzdGV2ID0gZmFsc2U7XG5cdFx0XHRcdGxhc3RtdiA9IGZhbHNlO1xuXHRcdFx0fSlcblx0XHRcdC5vbigna2V5dXAuanN0cmVlIGtleWRvd24uanN0cmVlJywgZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0ZGF0YSA9ICQudmFrYXRhLmRuZC5fZ2V0KCk7XG5cdFx0XHRcdGlmKGRhdGEgJiYgZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5qc3RyZWUpIHtcblx0XHRcdFx0XHRpZiAoZS50eXBlID09PSBcImtleXVwXCIgJiYgZS53aGljaCA9PT0gMjcpIHtcblx0XHRcdFx0XHRcdGlmIChvcGVudG8pIHsgY2xlYXJUaW1lb3V0KG9wZW50byk7IH1cblx0XHRcdFx0XHRcdGxhc3RtdiA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0bGFzdGVyID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRsYXN0ZXYgPSBmYWxzZTtcblx0XHRcdFx0XHRcdG9wZW50byA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0bWFya2VyLmhpZGUoKS5kZXRhY2goKTtcblx0XHRcdFx0XHRcdCQudmFrYXRhLmRuZC5fY2xlYW4oKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZGF0YS5oZWxwZXIuZmluZCgnLmpzdHJlZS1jb3B5JykuZmlyc3QoKVsgZGF0YS5kYXRhLm9yaWdpbiAmJiAoZGF0YS5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHkgfHwgKGRhdGEuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSkgPyAnc2hvdycgOiAnaGlkZScgXSgpO1xuXHRcdFx0XHRcdFx0aWYobGFzdGV2KSB7XG5cdFx0XHRcdFx0XHRcdGxhc3Rldi5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuXHRcdFx0XHRcdFx0XHRsYXN0ZXYuY3RybEtleSA9IGUuY3RybEtleTtcblx0XHRcdFx0XHRcdFx0JC52YWthdGEuZG5kLl90cmlnZ2VyKCdtb3ZlJywgbGFzdGV2KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9KTtcblxuXHQvLyBoZWxwZXJzXG5cdChmdW5jdGlvbiAoJCkge1xuXHRcdCQudmFrYXRhLmh0bWwgPSB7XG5cdFx0XHRkaXYgOiAkKCc8ZGl2IC8+JyksXG5cdFx0XHRlc2NhcGUgOiBmdW5jdGlvbiAoc3RyKSB7XG5cdFx0XHRcdHJldHVybiAkLnZha2F0YS5odG1sLmRpdi50ZXh0KHN0cikuaHRtbCgpO1xuXHRcdFx0fSxcblx0XHRcdHN0cmlwIDogZnVuY3Rpb24gKHN0cikge1xuXHRcdFx0XHRyZXR1cm4gJC52YWthdGEuaHRtbC5kaXYuZW1wdHkoKS5hcHBlbmQoJC5wYXJzZUhUTUwoc3RyKSkudGV4dCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Ly8gcHJpdmF0ZSB2YXJpYWJsZVxuXHRcdHZhciB2YWthdGFfZG5kID0ge1xuXHRcdFx0ZWxlbWVudFx0OiBmYWxzZSxcblx0XHRcdHRhcmdldFx0OiBmYWxzZSxcblx0XHRcdGlzX2Rvd25cdDogZmFsc2UsXG5cdFx0XHRpc19kcmFnXHQ6IGZhbHNlLFxuXHRcdFx0aGVscGVyXHQ6IGZhbHNlLFxuXHRcdFx0aGVscGVyX3c6IDAsXG5cdFx0XHRkYXRhXHQ6IGZhbHNlLFxuXHRcdFx0aW5pdF94XHQ6IDAsXG5cdFx0XHRpbml0X3lcdDogMCxcblx0XHRcdHNjcm9sbF9sOiAwLFxuXHRcdFx0c2Nyb2xsX3Q6IDAsXG5cdFx0XHRzY3JvbGxfZTogZmFsc2UsXG5cdFx0XHRzY3JvbGxfaTogZmFsc2UsXG5cdFx0XHRpc190b3VjaDogZmFsc2Vcblx0XHR9O1xuXHRcdCQudmFrYXRhLmRuZCA9IHtcblx0XHRcdHNldHRpbmdzIDoge1xuXHRcdFx0XHRzY3JvbGxfc3BlZWRcdFx0OiAxMCxcblx0XHRcdFx0c2Nyb2xsX3Byb3hpbWl0eVx0OiAyMCxcblx0XHRcdFx0aGVscGVyX2xlZnRcdFx0XHQ6IDUsXG5cdFx0XHRcdGhlbHBlcl90b3BcdFx0XHQ6IDEwLFxuXHRcdFx0XHR0aHJlc2hvbGRcdFx0XHQ6IDUsXG5cdFx0XHRcdHRocmVzaG9sZF90b3VjaFx0XHQ6IDUwXG5cdFx0XHR9LFxuXHRcdFx0X3RyaWdnZXIgOiBmdW5jdGlvbiAoZXZlbnRfbmFtZSwgZSwgZGF0YSkge1xuXHRcdFx0XHRpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ZGF0YSA9ICQudmFrYXRhLmRuZC5fZ2V0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YS5ldmVudCA9IGU7XG5cdFx0XHRcdCQoZG9jdW1lbnQpLnRyaWdnZXJIYW5kbGVyKFwiZG5kX1wiICsgZXZlbnRfbmFtZSArIFwiLnZha2F0YVwiLCBkYXRhKTtcblx0XHRcdH0sXG5cdFx0XHRfZ2V0IDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFwiZGF0YVwiXHRcdDogdmFrYXRhX2RuZC5kYXRhLFxuXHRcdFx0XHRcdFwiZWxlbWVudFwiXHQ6IHZha2F0YV9kbmQuZWxlbWVudCxcblx0XHRcdFx0XHRcImhlbHBlclwiXHQ6IHZha2F0YV9kbmQuaGVscGVyXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0X2NsZWFuIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZih2YWthdGFfZG5kLmhlbHBlcikgeyB2YWthdGFfZG5kLmhlbHBlci5yZW1vdmUoKTsgfVxuXHRcdFx0XHRpZih2YWthdGFfZG5kLnNjcm9sbF9pKSB7IGNsZWFySW50ZXJ2YWwodmFrYXRhX2RuZC5zY3JvbGxfaSk7IHZha2F0YV9kbmQuc2Nyb2xsX2kgPSBmYWxzZTsgfVxuXHRcdFx0XHR2YWthdGFfZG5kID0ge1xuXHRcdFx0XHRcdGVsZW1lbnRcdDogZmFsc2UsXG5cdFx0XHRcdFx0dGFyZ2V0XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdGlzX2Rvd25cdDogZmFsc2UsXG5cdFx0XHRcdFx0aXNfZHJhZ1x0OiBmYWxzZSxcblx0XHRcdFx0XHRoZWxwZXJcdDogZmFsc2UsXG5cdFx0XHRcdFx0aGVscGVyX3c6IDAsXG5cdFx0XHRcdFx0ZGF0YVx0OiBmYWxzZSxcblx0XHRcdFx0XHRpbml0X3hcdDogMCxcblx0XHRcdFx0XHRpbml0X3lcdDogMCxcblx0XHRcdFx0XHRzY3JvbGxfbDogMCxcblx0XHRcdFx0XHRzY3JvbGxfdDogMCxcblx0XHRcdFx0XHRzY3JvbGxfZTogZmFsc2UsXG5cdFx0XHRcdFx0c2Nyb2xsX2k6IGZhbHNlLFxuXHRcdFx0XHRcdGlzX3RvdWNoOiBmYWxzZVxuXHRcdFx0XHR9O1xuXHRcdFx0XHQkKGRvY3VtZW50KS5vZmYoXCJtb3VzZW1vdmUudmFrYXRhLmpzdHJlZSB0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLCAkLnZha2F0YS5kbmQuZHJhZyk7XG5cdFx0XHRcdCQoZG9jdW1lbnQpLm9mZihcIm1vdXNldXAudmFrYXRhLmpzdHJlZSB0b3VjaGVuZC52YWthdGEuanN0cmVlXCIsICQudmFrYXRhLmRuZC5zdG9wKTtcblx0XHRcdH0sXG5cdFx0XHRfc2Nyb2xsIDogZnVuY3Rpb24gKGluaXRfb25seSkge1xuXHRcdFx0XHRpZighdmFrYXRhX2RuZC5zY3JvbGxfZSB8fCAoIXZha2F0YV9kbmQuc2Nyb2xsX2wgJiYgIXZha2F0YV9kbmQuc2Nyb2xsX3QpKSB7XG5cdFx0XHRcdFx0aWYodmFrYXRhX2RuZC5zY3JvbGxfaSkgeyBjbGVhckludGVydmFsKHZha2F0YV9kbmQuc2Nyb2xsX2kpOyB2YWthdGFfZG5kLnNjcm9sbF9pID0gZmFsc2U7IH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIXZha2F0YV9kbmQuc2Nyb2xsX2kpIHtcblx0XHRcdFx0XHR2YWthdGFfZG5kLnNjcm9sbF9pID0gc2V0SW50ZXJ2YWwoJC52YWthdGEuZG5kLl9zY3JvbGwsIDEwMCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGluaXRfb25seSA9PT0gdHJ1ZSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRcdFx0XHR2YXIgaSA9IHZha2F0YV9kbmQuc2Nyb2xsX2Uuc2Nyb2xsVG9wKCksXG5cdFx0XHRcdFx0aiA9IHZha2F0YV9kbmQuc2Nyb2xsX2Uuc2Nyb2xsTGVmdCgpO1xuXHRcdFx0XHR2YWthdGFfZG5kLnNjcm9sbF9lLnNjcm9sbFRvcChpICsgdmFrYXRhX2RuZC5zY3JvbGxfdCAqICQudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfc3BlZWQpO1xuXHRcdFx0XHR2YWthdGFfZG5kLnNjcm9sbF9lLnNjcm9sbExlZnQoaiArIHZha2F0YV9kbmQuc2Nyb2xsX2wgKiAkLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3NwZWVkKTtcblx0XHRcdFx0aWYoaSAhPT0gdmFrYXRhX2RuZC5zY3JvbGxfZS5zY3JvbGxUb3AoKSB8fCBqICE9PSB2YWthdGFfZG5kLnNjcm9sbF9lLnNjcm9sbExlZnQoKSkge1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIHRyaWdnZXJlZCBvbiB0aGUgZG9jdW1lbnQgd2hlbiBhIGRyYWcgY2F1c2VzIGFuIGVsZW1lbnQgdG8gc2Nyb2xsXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQHBsdWdpbiBkbmRcblx0XHRcdFx0XHQgKiBAbmFtZSBkbmRfc2Nyb2xsLnZha2F0YVxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7TWl4ZWR9IGRhdGEgYW55IGRhdGEgc3VwcGxpZWQgd2l0aCB0aGUgY2FsbCB0byAkLnZha2F0YS5kbmQuc3RhcnRcblx0XHRcdFx0XHQgKiBAcGFyYW0ge0RPTX0gZWxlbWVudCB0aGUgRE9NIGVsZW1lbnQgYmVpbmcgZHJhZ2dlZFxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBoZWxwZXIgdGhlIGhlbHBlciBzaG93biBuZXh0IHRvIHRoZSBtb3VzZVxuXHRcdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCB0aGUgZWxlbWVudCB0aGF0IGlzIHNjcm9sbGluZ1xuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdCQudmFrYXRhLmRuZC5fdHJpZ2dlcihcInNjcm9sbFwiLCB2YWthdGFfZG5kLnNjcm9sbF9lKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHN0YXJ0IDogZnVuY3Rpb24gKGUsIGRhdGEsIGh0bWwpIHtcblx0XHRcdFx0aWYoZS50eXBlID09PSBcInRvdWNoc3RhcnRcIiAmJiBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzICYmIGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSkge1xuXHRcdFx0XHRcdGUucGFnZVggPSBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG5cdFx0XHRcdFx0ZS5wYWdlWSA9IGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcblx0XHRcdFx0XHRlLnRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIC0gd2luZG93LnBhZ2VYT2Zmc2V0LCBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkgLSB3aW5kb3cucGFnZVlPZmZzZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHZha2F0YV9kbmQuaXNfZHJhZykgeyAkLnZha2F0YS5kbmQuc3RvcCh7fSk7IH1cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRlLmN1cnJlbnRUYXJnZXQudW5zZWxlY3RhYmxlID0gXCJvblwiO1xuXHRcdFx0XHRcdGUuY3VycmVudFRhcmdldC5vbnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcblx0XHRcdFx0XHRpZihlLmN1cnJlbnRUYXJnZXQuc3R5bGUpIHtcblx0XHRcdFx0XHRcdGUuY3VycmVudFRhcmdldC5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuXHRcdFx0XHRcdFx0ZS5jdXJyZW50VGFyZ2V0LnN0eWxlLm1zVG91Y2hBY3Rpb24gPSBcIm5vbmVcIjtcblx0XHRcdFx0XHRcdGUuY3VycmVudFRhcmdldC5zdHlsZS5Nb3pVc2VyU2VsZWN0ID0gXCJub25lXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoKGlnbm9yZSkgeyB9XG5cdFx0XHRcdHZha2F0YV9kbmQuaW5pdF94XHQ9IGUucGFnZVg7XG5cdFx0XHRcdHZha2F0YV9kbmQuaW5pdF95XHQ9IGUucGFnZVk7XG5cdFx0XHRcdHZha2F0YV9kbmQuZGF0YVx0XHQ9IGRhdGE7XG5cdFx0XHRcdHZha2F0YV9kbmQuaXNfZG93blx0PSB0cnVlO1xuXHRcdFx0XHR2YWthdGFfZG5kLmVsZW1lbnRcdD0gZS5jdXJyZW50VGFyZ2V0O1xuXHRcdFx0XHR2YWthdGFfZG5kLnRhcmdldFx0PSBlLnRhcmdldDtcblx0XHRcdFx0dmFrYXRhX2RuZC5pc190b3VjaFx0PSBlLnR5cGUgPT09IFwidG91Y2hzdGFydFwiO1xuXHRcdFx0XHRpZihodG1sICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdHZha2F0YV9kbmQuaGVscGVyID0gJChcIjxkaXYgaWQ9J3Zha2F0YS1kbmQnPjwvZGl2PlwiKS5odG1sKGh0bWwpLmNzcyh7XG5cdFx0XHRcdFx0XHRcImRpc3BsYXlcIlx0XHQ6IFwiYmxvY2tcIixcblx0XHRcdFx0XHRcdFwibWFyZ2luXCJcdFx0OiBcIjBcIixcblx0XHRcdFx0XHRcdFwicGFkZGluZ1wiXHRcdDogXCIwXCIsXG5cdFx0XHRcdFx0XHRcInBvc2l0aW9uXCJcdFx0OiBcImFic29sdXRlXCIsXG5cdFx0XHRcdFx0XHRcInRvcFwiXHRcdFx0OiBcIi0yMDAwcHhcIixcblx0XHRcdFx0XHRcdFwibGluZUhlaWdodFwiXHQ6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XCJ6SW5kZXhcIlx0XHQ6IFwiMTAwMDBcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQoZG9jdW1lbnQpLm9uKFwibW91c2Vtb3ZlLnZha2F0YS5qc3RyZWUgdG91Y2htb3ZlLnZha2F0YS5qc3RyZWVcIiwgJC52YWthdGEuZG5kLmRyYWcpO1xuXHRcdFx0XHQkKGRvY3VtZW50KS5vbihcIm1vdXNldXAudmFrYXRhLmpzdHJlZSB0b3VjaGVuZC52YWthdGEuanN0cmVlXCIsICQudmFrYXRhLmRuZC5zdG9wKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSxcblx0XHRcdGRyYWcgOiBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRpZihlLnR5cGUgPT09IFwidG91Y2htb3ZlXCIgJiYgZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyAmJiBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pIHtcblx0XHRcdFx0XHRlLnBhZ2VYID0gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuXHRcdFx0XHRcdGUucGFnZVkgPSBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG5cdFx0XHRcdFx0ZS50YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCAtIHdpbmRvdy5wYWdlWE9mZnNldCwgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighdmFrYXRhX2RuZC5pc19kb3duKSB7IHJldHVybjsgfVxuXHRcdFx0XHRpZighdmFrYXRhX2RuZC5pc19kcmFnKSB7XG5cdFx0XHRcdFx0aWYoXG5cdFx0XHRcdFx0XHRNYXRoLmFicyhlLnBhZ2VYIC0gdmFrYXRhX2RuZC5pbml0X3gpID4gKHZha2F0YV9kbmQuaXNfdG91Y2ggPyAkLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkX3RvdWNoIDogJC52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZCkgfHxcblx0XHRcdFx0XHRcdE1hdGguYWJzKGUucGFnZVkgLSB2YWthdGFfZG5kLmluaXRfeSkgPiAodmFrYXRhX2RuZC5pc190b3VjaCA/ICQudmFrYXRhLmRuZC5zZXR0aW5ncy50aHJlc2hvbGRfdG91Y2ggOiAkLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0aWYodmFrYXRhX2RuZC5oZWxwZXIpIHtcblx0XHRcdFx0XHRcdFx0dmFrYXRhX2RuZC5oZWxwZXIuYXBwZW5kVG8oXCJib2R5XCIpO1xuXHRcdFx0XHRcdFx0XHR2YWthdGFfZG5kLmhlbHBlcl93ID0gdmFrYXRhX2RuZC5oZWxwZXIub3V0ZXJXaWR0aCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFrYXRhX2RuZC5pc19kcmFnID0gdHJ1ZTtcblx0XHRcdFx0XHRcdCQodmFrYXRhX2RuZC50YXJnZXQpLm9uZSgnY2xpY2sudmFrYXRhJywgZmFsc2UpO1xuXHRcdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgb24gdGhlIGRvY3VtZW50IHdoZW4gYSBkcmFnIHN0YXJ0c1xuXHRcdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdFx0XHRcdFx0ICogQG5hbWUgZG5kX3N0YXJ0LnZha2F0YVxuXHRcdFx0XHRcdFx0ICogQHBhcmFtIHtNaXhlZH0gZGF0YSBhbnkgZGF0YSBzdXBwbGllZCB3aXRoIHRoZSBjYWxsIHRvICQudmFrYXRhLmRuZC5zdGFydFxuXHRcdFx0XHRcdFx0ICogQHBhcmFtIHtET019IGVsZW1lbnQgdGhlIERPTSBlbGVtZW50IGJlaW5nIGRyYWdnZWRcblx0XHRcdFx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBoZWxwZXIgdGhlIGhlbHBlciBzaG93biBuZXh0IHRvIHRoZSBtb3VzZVxuXHRcdFx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IHRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGUgc3RhcnQgKHByb2JhYmx5IG1vdXNlbW92ZSlcblx0XHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdFx0JC52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RhcnRcIiwgZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgeyByZXR1cm47IH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBkICA9IGZhbHNlLCB3ICA9IGZhbHNlLFxuXHRcdFx0XHRcdGRoID0gZmFsc2UsIHdoID0gZmFsc2UsXG5cdFx0XHRcdFx0ZHcgPSBmYWxzZSwgd3cgPSBmYWxzZSxcblx0XHRcdFx0XHRkdCA9IGZhbHNlLCBkbCA9IGZhbHNlLFxuXHRcdFx0XHRcdGh0ID0gZmFsc2UsIGhsID0gZmFsc2U7XG5cblx0XHRcdFx0dmFrYXRhX2RuZC5zY3JvbGxfdCA9IDA7XG5cdFx0XHRcdHZha2F0YV9kbmQuc2Nyb2xsX2wgPSAwO1xuXHRcdFx0XHR2YWthdGFfZG5kLnNjcm9sbF9lID0gZmFsc2U7XG5cdFx0XHRcdCQoJChlLnRhcmdldCkucGFyZW50c1VudGlsKFwiYm9keVwiKS5hZGRCYWNrKCkuZ2V0KCkucmV2ZXJzZSgpKVxuXHRcdFx0XHRcdC5maWx0ZXIoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuXHQoL15hdXRvfHNjcm9sbCQvKS50ZXN0KCQodGhpcykuY3NzKFwib3ZlcmZsb3dcIikpICYmXG5cdFx0XHRcdFx0XHRcdFx0KHRoaXMuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5vZmZzZXRIZWlnaHQgfHwgdGhpcy5zY3JvbGxXaWR0aCA+IHRoaXMub2Zmc2V0V2lkdGgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dmFyIHQgPSAkKHRoaXMpLCBvID0gdC5vZmZzZXQoKTtcblx0XHRcdFx0XHRcdGlmKHRoaXMuc2Nyb2xsSGVpZ2h0ID4gdGhpcy5vZmZzZXRIZWlnaHQpIHtcblx0XHRcdFx0XHRcdFx0aWYoby50b3AgKyB0LmhlaWdodCgpIC0gZS5wYWdlWSA8ICQudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5KVx0eyB2YWthdGFfZG5kLnNjcm9sbF90ID0gMTsgfVxuXHRcdFx0XHRcdFx0XHRpZihlLnBhZ2VZIC0gby50b3AgPCAkLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSlcdFx0XHRcdHsgdmFrYXRhX2RuZC5zY3JvbGxfdCA9IC0xOyB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0aGlzLnNjcm9sbFdpZHRoID4gdGhpcy5vZmZzZXRXaWR0aCkge1xuXHRcdFx0XHRcdFx0XHRpZihvLmxlZnQgKyB0LndpZHRoKCkgLSBlLnBhZ2VYIDwgJC52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkpXHR7IHZha2F0YV9kbmQuc2Nyb2xsX2wgPSAxOyB9XG5cdFx0XHRcdFx0XHRcdGlmKGUucGFnZVggLSBvLmxlZnQgPCAkLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSlcdFx0XHRcdHsgdmFrYXRhX2RuZC5zY3JvbGxfbCA9IC0xOyB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih2YWthdGFfZG5kLnNjcm9sbF90IHx8IHZha2F0YV9kbmQuc2Nyb2xsX2wpIHtcblx0XHRcdFx0XHRcdFx0dmFrYXRhX2RuZC5zY3JvbGxfZSA9ICQodGhpcyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZighdmFrYXRhX2RuZC5zY3JvbGxfZSkge1xuXHRcdFx0XHRcdGQgID0gJChkb2N1bWVudCk7IHcgPSAkKHdpbmRvdyk7XG5cdFx0XHRcdFx0ZGggPSBkLmhlaWdodCgpOyB3aCA9IHcuaGVpZ2h0KCk7XG5cdFx0XHRcdFx0ZHcgPSBkLndpZHRoKCk7IHd3ID0gdy53aWR0aCgpO1xuXHRcdFx0XHRcdGR0ID0gZC5zY3JvbGxUb3AoKTsgZGwgPSBkLnNjcm9sbExlZnQoKTtcblx0XHRcdFx0XHRpZihkaCA+IHdoICYmIGUucGFnZVkgLSBkdCA8ICQudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5KVx0XHR7IHZha2F0YV9kbmQuc2Nyb2xsX3QgPSAtMTsgIH1cblx0XHRcdFx0XHRpZihkaCA+IHdoICYmIHdoIC0gKGUucGFnZVkgLSBkdCkgPCAkLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSlcdHsgdmFrYXRhX2RuZC5zY3JvbGxfdCA9IDE7IH1cblx0XHRcdFx0XHRpZihkdyA+IHd3ICYmIGUucGFnZVggLSBkbCA8ICQudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5KVx0XHR7IHZha2F0YV9kbmQuc2Nyb2xsX2wgPSAtMTsgfVxuXHRcdFx0XHRcdGlmKGR3ID4gd3cgJiYgd3cgLSAoZS5wYWdlWCAtIGRsKSA8ICQudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5KVx0eyB2YWthdGFfZG5kLnNjcm9sbF9sID0gMTsgfVxuXHRcdFx0XHRcdGlmKHZha2F0YV9kbmQuc2Nyb2xsX3QgfHwgdmFrYXRhX2RuZC5zY3JvbGxfbCkge1xuXHRcdFx0XHRcdFx0dmFrYXRhX2RuZC5zY3JvbGxfZSA9IGQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHZha2F0YV9kbmQuc2Nyb2xsX2UpIHsgJC52YWthdGEuZG5kLl9zY3JvbGwodHJ1ZSk7IH1cblxuXHRcdFx0XHRpZih2YWthdGFfZG5kLmhlbHBlcikge1xuXHRcdFx0XHRcdGh0ID0gcGFyc2VJbnQoZS5wYWdlWSArICQudmFrYXRhLmRuZC5zZXR0aW5ncy5oZWxwZXJfdG9wLCAxMCk7XG5cdFx0XHRcdFx0aGwgPSBwYXJzZUludChlLnBhZ2VYICsgJC52YWthdGEuZG5kLnNldHRpbmdzLmhlbHBlcl9sZWZ0LCAxMCk7XG5cdFx0XHRcdFx0aWYoZGggJiYgaHQgKyAyNSA+IGRoKSB7IGh0ID0gZGggLSA1MDsgfVxuXHRcdFx0XHRcdGlmKGR3ICYmIGhsICsgdmFrYXRhX2RuZC5oZWxwZXJfdyA+IGR3KSB7IGhsID0gZHcgLSAodmFrYXRhX2RuZC5oZWxwZXJfdyArIDIpOyB9XG5cdFx0XHRcdFx0dmFrYXRhX2RuZC5oZWxwZXIuY3NzKHtcblx0XHRcdFx0XHRcdGxlZnRcdDogaGwgKyBcInB4XCIsXG5cdFx0XHRcdFx0XHR0b3BcdFx0OiBodCArIFwicHhcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgb24gdGhlIGRvY3VtZW50IHdoZW4gYSBkcmFnIGlzIGluIHByb2dyZXNzXG5cdFx0XHRcdCAqIEBldmVudFxuXHRcdFx0XHQgKiBAcGx1Z2luIGRuZFxuXHRcdFx0XHQgKiBAbmFtZSBkbmRfbW92ZS52YWthdGFcblx0XHRcdFx0ICogQHBhcmFtIHtNaXhlZH0gZGF0YSBhbnkgZGF0YSBzdXBwbGllZCB3aXRoIHRoZSBjYWxsIHRvICQudmFrYXRhLmRuZC5zdGFydFxuXHRcdFx0XHQgKiBAcGFyYW0ge0RPTX0gZWxlbWVudCB0aGUgRE9NIGVsZW1lbnQgYmVpbmcgZHJhZ2dlZFxuXHRcdFx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gaGVscGVyIHRoZSBoZWxwZXIgc2hvd24gbmV4dCB0byB0aGUgbW91c2Vcblx0XHRcdFx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IHRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIHRvIHRyaWdnZXIgKG1vc3QgbGlrZWx5IG1vdXNlbW92ZSlcblx0XHRcdFx0ICovXG5cdFx0XHRcdCQudmFrYXRhLmRuZC5fdHJpZ2dlcihcIm1vdmVcIiwgZSk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHRzdG9wIDogZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0aWYoZS50eXBlID09PSBcInRvdWNoZW5kXCIgJiYgZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyAmJiBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pIHtcblx0XHRcdFx0XHRlLnBhZ2VYID0gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuXHRcdFx0XHRcdGUucGFnZVkgPSBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG5cdFx0XHRcdFx0ZS50YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCAtIHdpbmRvdy5wYWdlWE9mZnNldCwgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZih2YWthdGFfZG5kLmlzX2RyYWcpIHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiB0cmlnZ2VyZWQgb24gdGhlIGRvY3VtZW50IHdoZW4gYSBkcmFnIHN0b3BzICh0aGUgZHJhZ2dlZCBlbGVtZW50IGlzIGRyb3BwZWQpXG5cdFx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdFx0ICogQHBsdWdpbiBkbmRcblx0XHRcdFx0XHQgKiBAbmFtZSBkbmRfc3RvcC52YWthdGFcblx0XHRcdFx0XHQgKiBAcGFyYW0ge01peGVkfSBkYXRhIGFueSBkYXRhIHN1cHBsaWVkIHdpdGggdGhlIGNhbGwgdG8gJC52YWthdGEuZG5kLnN0YXJ0XG5cdFx0XHRcdFx0ICogQHBhcmFtIHtET019IGVsZW1lbnQgdGhlIERPTSBlbGVtZW50IGJlaW5nIGRyYWdnZWRcblx0XHRcdFx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gaGVscGVyIHRoZSBoZWxwZXIgc2hvd24gbmV4dCB0byB0aGUgbW91c2Vcblx0XHRcdFx0XHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgdGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoZSBzdG9wXG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0aWYgKGUudGFyZ2V0ICE9PSB2YWthdGFfZG5kLnRhcmdldCkge1xuXHRcdFx0XHRcdFx0JCh2YWthdGFfZG5kLnRhcmdldCkub2ZmKCdjbGljay52YWthdGEnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JC52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RvcFwiLCBlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRpZihlLnR5cGUgPT09IFwidG91Y2hlbmRcIiAmJiBlLnRhcmdldCA9PT0gdmFrYXRhX2RuZC50YXJnZXQpIHtcblx0XHRcdFx0XHRcdHZhciB0byA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyAkKGUudGFyZ2V0KS5jbGljaygpOyB9LCAxMDApO1xuXHRcdFx0XHRcdFx0JChlLnRhcmdldCkub25lKCdjbGljaycsIGZ1bmN0aW9uKCkgeyBpZih0bykgeyBjbGVhclRpbWVvdXQodG8pOyB9IH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQkLnZha2F0YS5kbmQuX2NsZWFuKCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KCQpKTtcblxuXHQvLyBpbmNsdWRlIHRoZSBkbmQgcGx1Z2luIGJ5IGRlZmF1bHRcblx0Ly8gJC5qc3RyZWUuZGVmYXVsdHMucGx1Z2lucy5wdXNoKFwiZG5kXCIpO1xuXG5cbi8qKlxuICogIyMjIE1hc3Nsb2FkIHBsdWdpblxuICpcbiAqIEFkZHMgbWFzc2xvYWQgZnVuY3Rpb25hbGl0eSB0byBqc1RyZWUsIHNvIHRoYXQgbXVsdGlwbGUgbm9kZXMgY2FuIGJlIGxvYWRlZCBpbiBhIHNpbmdsZSByZXF1ZXN0IChvbmx5IHVzZWZ1bCB3aXRoIGxhenkgbG9hZGluZykuXG4gKi9cblxuXHQvKipcblx0ICogbWFzc2xvYWQgY29uZmlndXJhdGlvblxuXHQgKlxuXHQgKiBJdCBpcyBwb3NzaWJsZSB0byBzZXQgdGhpcyB0byBhIHN0YW5kYXJkIGpRdWVyeS1saWtlIEFKQVggY29uZmlnLlxuXHQgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhbmRhcmQgalF1ZXJ5IGFqYXggb3B0aW9ucyBoZXJlIHlvdSBjYW4gc3VwcGx5IGZ1bmN0aW9ucyBmb3IgYGRhdGFgIGFuZCBgdXJsYCwgdGhlIGZ1bmN0aW9ucyB3aWxsIGJlIHJ1biBpbiB0aGUgY3VycmVudCBpbnN0YW5jZSdzIHNjb3BlIGFuZCBhIHBhcmFtIHdpbGwgYmUgcGFzc2VkIGluZGljYXRpbmcgd2hpY2ggbm9kZSBJRHMgbmVlZCB0byBiZSBsb2FkZWQsIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhvc2UgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZC5cblx0ICpcblx0ICogWW91IGNhbiBhbHNvIHNldCB0aGlzIHRvIGEgZnVuY3Rpb24sIHRoYXQgZnVuY3Rpb24gd2lsbCByZWNlaXZlIHRoZSBub2RlIElEcyBiZWluZyBsb2FkZWQgYXMgYXJndW1lbnQgYW5kIGEgc2Vjb25kIHBhcmFtIHdoaWNoIGlzIGEgZnVuY3Rpb24gKGNhbGxiYWNrKSB3aGljaCBzaG91bGQgYmUgY2FsbGVkIHdpdGggdGhlIHJlc3VsdC5cblx0ICpcblx0ICogQm90aCB0aGUgQUpBWCBhbmQgdGhlIGZ1bmN0aW9uIGFwcHJvYWNoIHJlbHkgb24gdGhlIHNhbWUgcmV0dXJuIHZhbHVlIC0gYW4gb2JqZWN0IHdoZXJlIHRoZSBrZXlzIGFyZSB0aGUgbm9kZSBJRHMsIGFuZCB0aGUgdmFsdWUgaXMgdGhlIGNoaWxkcmVuIG9mIHRoYXQgbm9kZSBhcyBhbiBhcnJheS5cblx0ICpcblx0ICpcdHtcblx0ICpcdFx0XCJpZDFcIiA6IFt7IFwidGV4dFwiIDogXCJDaGlsZCBvZiBJRDFcIiwgXCJpZFwiIDogXCJjMVwiIH0sIHsgXCJ0ZXh0XCIgOiBcIkFub3RoZXIgY2hpbGQgb2YgSUQxXCIsIFwiaWRcIiA6IFwiYzJcIiB9XSxcblx0ICpcdFx0XCJpZDJcIiA6IFt7IFwidGV4dFwiIDogXCJDaGlsZCBvZiBJRDJcIiwgXCJpZFwiIDogXCJjM1wiIH1dXG5cdCAqXHR9XG5cdCAqIFxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5tYXNzbG9hZFxuXHQgKiBAcGx1Z2luIG1hc3Nsb2FkXG5cdCAqL1xuXHQkLmpzdHJlZS5kZWZhdWx0cy5tYXNzbG9hZCA9IG51bGw7XG5cdCQuanN0cmVlLnBsdWdpbnMubWFzc2xvYWQgPSBmdW5jdGlvbiAob3B0aW9ucywgcGFyZW50KSB7XG5cdFx0dGhpcy5pbml0ID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG5cdFx0XHR0aGlzLl9kYXRhLm1hc3Nsb2FkID0ge307XG5cdFx0XHRwYXJlbnQuaW5pdC5jYWxsKHRoaXMsIGVsLCBvcHRpb25zKTtcblx0XHR9O1xuXHRcdHRoaXMuX2xvYWRfbm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIGNhbGxiYWNrLCBpc19jYWxsYmFjaywgZm9yY2VfcmVsb2FkKSB7XG5cdFx0XHR2YXIgcyA9IHRoaXMuc2V0dGluZ3MubWFzc2xvYWQsXG5cdFx0XHRcdG5vZGVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkobm9kZXMpLFxuXHRcdFx0XHR0b0xvYWQgPSBbXSxcblx0XHRcdFx0bSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdGksIGosIGRvbTtcblx0XHRcdGlmICghaXNfY2FsbGJhY2spIHtcblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gbm9kZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0aWYoIW1bbm9kZXNbaV1dIHx8ICggKCFtW25vZGVzW2ldXS5zdGF0ZS5sb2FkZWQgJiYgIW1bbm9kZXNbaV1dLnN0YXRlLmZhaWxlZCkgfHwgZm9yY2VfcmVsb2FkKSApIHtcblx0XHRcdFx0XHRcdHRvTG9hZC5wdXNoKG5vZGVzW2ldKTtcblx0XHRcdFx0XHRcdGRvbSA9IHRoaXMuZ2V0X25vZGUobm9kZXNbaV0sIHRydWUpO1xuXHRcdFx0XHRcdFx0aWYgKGRvbSAmJiBkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGRvbS5hZGRDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoJ2FyaWEtYnVzeScsdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX2RhdGEubWFzc2xvYWQgPSB7fTtcblx0XHRcdFx0aWYgKHRvTG9hZC5sZW5ndGgpIHtcblx0XHRcdFx0XHRpZigkLmlzRnVuY3Rpb24ocykpIHtcblx0XHRcdFx0XHRcdHJldHVybiBzLmNhbGwodGhpcywgdG9Mb2FkLCAkLnByb3h5KGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBpLCBqO1xuXHRcdFx0XHRcdFx0XHRpZihkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yKGkgaW4gZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLm1hc3Nsb2FkW2ldID0gZGF0YVtpXTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gbm9kZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShub2Rlc1tpXSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGRvbSAmJiBkb20ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkb20ucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKCdhcmlhLWJ1c3knLGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cGFyZW50Ll9sb2FkX25vZGVzLmNhbGwodGhpcywgbm9kZXMsIGNhbGxiYWNrLCBpc19jYWxsYmFjaywgZm9yY2VfcmVsb2FkKTtcblx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYodHlwZW9mIHMgPT09ICdvYmplY3QnICYmIHMgJiYgcy51cmwpIHtcblx0XHRcdFx0XHRcdHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgcyk7XG5cdFx0XHRcdFx0XHRpZigkLmlzRnVuY3Rpb24ocy51cmwpKSB7XG5cdFx0XHRcdFx0XHRcdHMudXJsID0gcy51cmwuY2FsbCh0aGlzLCB0b0xvYWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoJC5pc0Z1bmN0aW9uKHMuZGF0YSkpIHtcblx0XHRcdFx0XHRcdFx0cy5kYXRhID0gcy5kYXRhLmNhbGwodGhpcywgdG9Mb2FkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiAkLmFqYXgocylcblx0XHRcdFx0XHRcdFx0LmRvbmUoJC5wcm94eShmdW5jdGlvbiAoZGF0YSx0LHgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBpLCBqO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IoaSBpbiBkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoZGF0YS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5tYXNzbG9hZFtpXSA9IGRhdGFbaV07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBub2Rlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShub2Rlc1tpXSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkb20gJiYgZG9tLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRvbS5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoJ2FyaWEtYnVzeScsZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLCBub2RlcywgY2FsbGJhY2ssIGlzX2NhbGxiYWNrLCBmb3JjZV9yZWxvYWQpO1xuXHRcdFx0XHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHRcdFx0XHQuZmFpbCgkLnByb3h5KGZ1bmN0aW9uIChmKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLCBub2RlcywgY2FsbGJhY2ssIGlzX2NhbGxiYWNrLCBmb3JjZV9yZWxvYWQpO1xuXHRcdFx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBwYXJlbnQuX2xvYWRfbm9kZXMuY2FsbCh0aGlzLCBub2RlcywgY2FsbGJhY2ssIGlzX2NhbGxiYWNrLCBmb3JjZV9yZWxvYWQpO1xuXHRcdH07XG5cdFx0dGhpcy5fbG9hZF9ub2RlID0gZnVuY3Rpb24gKG9iaiwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBkYXRhID0gdGhpcy5fZGF0YS5tYXNzbG9hZFtvYmouaWRdLFxuXHRcdFx0XHRyc2x0ID0gbnVsbCwgZG9tO1xuXHRcdFx0aWYoZGF0YSkge1xuXHRcdFx0XHRyc2x0ID0gdGhpc1t0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyAnX2FwcGVuZF9odG1sX2RhdGEnIDogJ19hcHBlbmRfanNvbl9kYXRhJ10oXG5cdFx0XHRcdFx0b2JqLFxuXHRcdFx0XHRcdHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/ICQoJC5wYXJzZUhUTUwoZGF0YSkpLmZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm5vZGVUeXBlICE9PSAzOyB9KSA6IGRhdGEsXG5cdFx0XHRcdFx0ZnVuY3Rpb24gKHN0YXR1cykgeyBjYWxsYmFjay5jYWxsKHRoaXMsIHN0YXR1cyk7IH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9tID0gdGhpcy5nZXRfbm9kZShvYmouaWQsIHRydWUpO1xuXHRcdFx0XHRpZiAoZG9tICYmIGRvbS5sZW5ndGgpIHtcblx0XHRcdFx0XHRkb20ucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKCdhcmlhLWJ1c3knLGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGUgdGhpcy5fZGF0YS5tYXNzbG9hZFtvYmouaWRdO1xuXHRcdFx0XHRyZXR1cm4gcnNsdDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwYXJlbnQuX2xvYWRfbm9kZS5jYWxsKHRoaXMsIG9iaiwgY2FsbGJhY2spO1xuXHRcdH07XG5cdH07XG5cbi8qKlxuICogIyMjIFNlYXJjaCBwbHVnaW5cbiAqXG4gKiBBZGRzIHNlYXJjaCBmdW5jdGlvbmFsaXR5IHRvIGpzVHJlZS5cbiAqL1xuXG5cdC8qKlxuXHQgKiBzdG9yZXMgYWxsIGRlZmF1bHRzIGZvciB0aGUgc2VhcmNoIHBsdWdpblxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zZWFyY2hcblx0ICogQHBsdWdpbiBzZWFyY2hcblx0ICovXG5cdCQuanN0cmVlLmRlZmF1bHRzLnNlYXJjaCA9IHtcblx0XHQvKipcblx0XHQgKiBhIGpRdWVyeS1saWtlIEFKQVggY29uZmlnLCB3aGljaCBqc3RyZWUgdXNlcyBpZiBhIHNlcnZlciBzaG91bGQgYmUgcXVlcmllZCBmb3IgcmVzdWx0cy5cblx0XHQgKlxuXHRcdCAqIEEgYHN0cmAgKHdoaWNoIGlzIHRoZSBzZWFyY2ggc3RyaW5nKSBwYXJhbWV0ZXIgd2lsbCBiZSBhZGRlZCB3aXRoIHRoZSByZXF1ZXN0LCBhbiBvcHRpb25hbCBgaW5zaWRlYCBwYXJhbWV0ZXIgd2lsbCBiZSBhZGRlZCBpZiB0aGUgc2VhcmNoIGlzIGxpbWl0ZWQgdG8gYSBub2RlIGlkLiBUaGUgZXhwZWN0ZWQgcmVzdWx0IGlzIGEgSlNPTiBhcnJheSB3aXRoIG5vZGVzIHRoYXQgbmVlZCB0byBiZSBvcGVuZWQgc28gdGhhdCBtYXRjaGluZyBub2RlcyB3aWxsIGJlIHJldmVhbGVkLlxuXHRcdCAqIExlYXZlIHRoaXMgc2V0dGluZyBhcyBgZmFsc2VgIHRvIG5vdCBxdWVyeSB0aGUgc2VydmVyLiBZb3UgY2FuIGFsc28gc2V0IHRoaXMgdG8gYSBmdW5jdGlvbiwgd2hpY2ggd2lsbCBiZSBpbnZva2VkIGluIHRoZSBpbnN0YW5jZSdzIHNjb3BlIGFuZCByZWNlaXZlIDMgcGFyYW1ldGVycyAtIHRoZSBzZWFyY2ggc3RyaW5nLCB0aGUgY2FsbGJhY2sgdG8gY2FsbCB3aXRoIHRoZSBhcnJheSBvZiBub2RlcyB0byBsb2FkLCBhbmQgdGhlIG9wdGlvbmFsIG5vZGUgSUQgdG8gbGltaXQgdGhlIHNlYXJjaCB0b1xuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLnNlYXJjaC5hamF4XG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRhamF4IDogZmFsc2UsXG5cdFx0LyoqXG5cdFx0ICogSW5kaWNhdGVzIGlmIHRoZSBzZWFyY2ggc2hvdWxkIGJlIGZ1enp5IG9yIG5vdCAoc2hvdWxkIGBjaG5kM2AgbWF0Y2ggYGNoaWxkIG5vZGUgM2ApLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuc2VhcmNoLmZ1enp5XG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRmdXp6eSA6IGZhbHNlLFxuXHRcdC8qKlxuXHRcdCAqIEluZGljYXRlcyBpZiB0aGUgc2VhcmNoIHNob3VsZCBiZSBjYXNlIHNlbnNpdGl2ZS4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLnNlYXJjaC5jYXNlX3NlbnNpdGl2ZVxuXHRcdCAqIEBwbHVnaW4gc2VhcmNoXG5cdFx0ICovXG5cdFx0Y2FzZV9zZW5zaXRpdmUgOiBmYWxzZSxcblx0XHQvKipcblx0XHQgKiBJbmRpY2F0ZXMgaWYgdGhlIHRyZWUgc2hvdWxkIGJlIGZpbHRlcmVkIChieSBkZWZhdWx0KSB0byBzaG93IG9ubHkgbWF0Y2hpbmcgbm9kZXMgKGtlZXAgaW4gbWluZCB0aGlzIGNhbiBiZSBhIGhlYXZ5IG9uIGxhcmdlIHRyZWVzIGluIG9sZCBicm93c2VycykuXG5cdFx0ICogVGhpcyBzZXR0aW5nIGNhbiBiZSBjaGFuZ2VkIGF0IHJ1bnRpbWUgd2hlbiBjYWxsaW5nIHRoZSBzZWFyY2ggbWV0aG9kLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuc2VhcmNoLnNob3dfb25seV9tYXRjaGVzXG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRzaG93X29ubHlfbWF0Y2hlcyA6IGZhbHNlLFxuXHRcdC8qKlxuXHRcdCAqIEluZGljYXRlcyBpZiB0aGUgY2hpbGRyZW4gb2YgbWF0Y2hlZCBlbGVtZW50IGFyZSBzaG93biAod2hlbiBzaG93X29ubHlfbWF0Y2hlcyBpcyB0cnVlKVxuXHRcdCAqIFRoaXMgc2V0dGluZyBjYW4gYmUgY2hhbmdlZCBhdCBydW50aW1lIHdoZW4gY2FsbGluZyB0aGUgc2VhcmNoIG1ldGhvZC4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLnNlYXJjaC5zaG93X29ubHlfbWF0Y2hlc19jaGlsZHJlblxuXHRcdCAqIEBwbHVnaW4gc2VhcmNoXG5cdFx0ICovXG5cdFx0c2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4gOiBmYWxzZSxcblx0XHQvKipcblx0XHQgKiBJbmRpY2F0ZXMgaWYgYWxsIG5vZGVzIG9wZW5lZCB0byByZXZlYWwgdGhlIHNlYXJjaCByZXN1bHQsIHNob3VsZCBiZSBjbG9zZWQgd2hlbiB0aGUgc2VhcmNoIGlzIGNsZWFyZWQgb3IgYSBuZXcgc2VhcmNoIGlzIHBlcmZvcm1lZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuc2VhcmNoLmNsb3NlX29wZW5lZF9vbmNsZWFyXG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRjbG9zZV9vcGVuZWRfb25jbGVhciA6IHRydWUsXG5cdFx0LyoqXG5cdFx0ICogSW5kaWNhdGVzIGlmIG9ubHkgbGVhZiBub2RlcyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gc2VhcmNoIHJlc3VsdHMuIERlZmF1bHQgaXMgYGZhbHNlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zZWFyY2guc2VhcmNoX2xlYXZlc19vbmx5XG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRzZWFyY2hfbGVhdmVzX29ubHkgOiBmYWxzZSxcblx0XHQvKipcblx0XHQgKiBJZiBzZXQgdG8gYSBmdW5jdGlvbiBpdCB3aWwgYmUgY2FsbGVkIGluIHRoZSBpbnN0YW5jZSdzIHNjb3BlIHdpdGggdHdvIGFyZ3VtZW50cyAtIHNlYXJjaCBzdHJpbmcgYW5kIG5vZGUgKHdoZXJlIG5vZGUgd2lsbCBiZSBldmVyeSBub2RlIGluIHRoZSBzdHJ1Y3R1cmUsIHNvIHVzZSB3aXRoIGNhdXRpb24pLlxuXHRcdCAqIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBub2RlIHdpbGwgYmUgY29uc2lkZXJlZCBhIG1hdGNoIChpdCBtaWdodCBub3QgYmUgZGlzcGxheWVkIGlmIHNlYXJjaF9vbmx5X2xlYXZlcyBpcyBzZXQgdG8gdHJ1ZSBhbmQgdGhlIG5vZGUgaXMgbm90IGEgbGVhZikuIERlZmF1bHQgaXMgYGZhbHNlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zZWFyY2guc2VhcmNoX2NhbGxiYWNrXG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKi9cblx0XHRzZWFyY2hfY2FsbGJhY2sgOiBmYWxzZVxuXHR9O1xuXG5cdCQuanN0cmVlLnBsdWdpbnMuc2VhcmNoID0gZnVuY3Rpb24gKG9wdGlvbnMsIHBhcmVudCkge1xuXHRcdHRoaXMuYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHBhcmVudC5iaW5kLmNhbGwodGhpcyk7XG5cblx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLnN0ciA9IFwiXCI7XG5cdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5kb20gPSAkKCk7XG5cdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5yZXMgPSBbXTtcblx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLm9wbiA9IFtdO1xuXHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guc29tID0gZmFsc2U7XG5cdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5zbWMgPSBmYWxzZTtcblx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLmhkbiA9IFtdO1xuXG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0Lm9uKFwic2VhcmNoLmpzdHJlZVwiLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHRpZih0aGlzLl9kYXRhLnNlYXJjaC5zb20gJiYgZGF0YS5yZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBtID0gdGhpcy5fbW9kZWwuZGF0YSwgaSwgaiwgcCA9IFtdLCBrLCBsO1xuXHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBkYXRhLnJlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRpZihtW2RhdGEucmVzW2ldXSAmJiAhbVtkYXRhLnJlc1tpXV0uc3RhdGUuaGlkZGVuKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwLnB1c2goZGF0YS5yZXNbaV0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0cCA9IHAuY29uY2F0KG1bZGF0YS5yZXNbaV1dLnBhcmVudHMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYodGhpcy5fZGF0YS5zZWFyY2guc21jKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAoayA9IDAsIGwgPSBtW2RhdGEucmVzW2ldXS5jaGlsZHJlbl9kLmxlbmd0aDsgayA8IGw7IGsrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChtW21bZGF0YS5yZXNbaV1dLmNoaWxkcmVuX2Rba11dICYmICFtW21bZGF0YS5yZXNbaV1dLmNoaWxkcmVuX2Rba11dLnN0YXRlLmhpZGRlbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cC5wdXNoKG1bZGF0YS5yZXNbaV1dLmNoaWxkcmVuX2Rba10pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRwID0gJC52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0oJC52YWthdGEuYXJyYXlfdW5pcXVlKHApLCAkLmpzdHJlZS5yb290KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guaGRuID0gdGhpcy5oaWRlX2FsbCh0cnVlKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93X25vZGUocCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVkcmF3KHRydWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oXCJjbGVhcl9zZWFyY2guanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmKHRoaXMuX2RhdGEuc2VhcmNoLnNvbSAmJiBkYXRhLnJlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93X25vZGUodGhpcy5fZGF0YS5zZWFyY2guaGRuLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZWRyYXcodHJ1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogdXNlZCB0byBzZWFyY2ggdGhlIHRyZWUgbm9kZXMgZm9yIGEgZ2l2ZW4gc3RyaW5nXG5cdFx0ICogQG5hbWUgc2VhcmNoKHN0ciBbLCBza2lwX2FzeW5jXSlcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzZWFyY2ggc3RyaW5nXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBza2lwX2FzeW5jIGlmIHNldCB0byB0cnVlIHNlcnZlciB3aWxsIG5vdCBiZSBxdWVyaWVkIGV2ZW4gaWYgY29uZmlndXJlZFxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd19vbmx5X21hdGNoZXMgaWYgc2V0IHRvIHRydWUgb25seSBtYXRjaGluZyBub2RlcyB3aWxsIGJlIHNob3duIChrZWVwIGluIG1pbmQgdGhpcyBjYW4gYmUgdmVyeSBzbG93IG9uIGxhcmdlIHRyZWVzIG9yIG9sZCBicm93c2Vycylcblx0XHQgKiBAcGFyYW0ge21peGVkfSBpbnNpZGUgYW4gb3B0aW9uYWwgbm9kZSB0byB3aG9zZSBjaGlsZHJlbiB0byBsaW1pdCB0aGUgc2VhcmNoXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmQgaWYgc2V0IHRvIHRydWUgdGhlIHJlc3VsdHMgb2YgdGhpcyBzZWFyY2ggYXJlIGFwcGVuZGVkIHRvIHRoZSBwcmV2aW91cyBzZWFyY2hcblx0XHQgKiBAcGx1Z2luIHNlYXJjaFxuXHRcdCAqIEB0cmlnZ2VyIHNlYXJjaC5qc3RyZWVcblx0XHQgKi9cblx0XHR0aGlzLnNlYXJjaCA9IGZ1bmN0aW9uIChzdHIsIHNraXBfYXN5bmMsIHNob3dfb25seV9tYXRjaGVzLCBpbnNpZGUsIGFwcGVuZCwgc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4pIHtcblx0XHRcdGlmKHN0ciA9PT0gZmFsc2UgfHwgJC50cmltKHN0ci50b1N0cmluZygpKSA9PT0gXCJcIikge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jbGVhcl9zZWFyY2goKTtcblx0XHRcdH1cblx0XHRcdGluc2lkZSA9IHRoaXMuZ2V0X25vZGUoaW5zaWRlKTtcblx0XHRcdGluc2lkZSA9IGluc2lkZSAmJiBpbnNpZGUuaWQgPyBpbnNpZGUuaWQgOiBudWxsO1xuXHRcdFx0c3RyID0gc3RyLnRvU3RyaW5nKCk7XG5cdFx0XHR2YXIgcyA9IHRoaXMuc2V0dGluZ3Muc2VhcmNoLFxuXHRcdFx0XHRhID0gcy5hamF4ID8gcy5hamF4IDogZmFsc2UsXG5cdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLFxuXHRcdFx0XHRmID0gbnVsbCxcblx0XHRcdFx0ciA9IFtdLFxuXHRcdFx0XHRwID0gW10sIGksIGo7XG5cdFx0XHRpZih0aGlzLl9kYXRhLnNlYXJjaC5yZXMubGVuZ3RoICYmICFhcHBlbmQpIHtcblx0XHRcdFx0dGhpcy5jbGVhcl9zZWFyY2goKTtcblx0XHRcdH1cblx0XHRcdGlmKHNob3dfb25seV9tYXRjaGVzID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0c2hvd19vbmx5X21hdGNoZXMgPSBzLnNob3dfb25seV9tYXRjaGVzO1xuXHRcdFx0fVxuXHRcdFx0aWYoc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRzaG93X29ubHlfbWF0Y2hlc19jaGlsZHJlbiA9IHMuc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW47XG5cdFx0XHR9XG5cdFx0XHRpZighc2tpcF9hc3luYyAmJiBhICE9PSBmYWxzZSkge1xuXHRcdFx0XHRpZigkLmlzRnVuY3Rpb24oYSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gYS5jYWxsKHRoaXMsIHN0ciwgJC5wcm94eShmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRpZihkICYmIGQuZCkgeyBkID0gZC5kOyB9XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2xvYWRfbm9kZXMoISQuaXNBcnJheShkKSA/IFtdIDogJC52YWthdGEuYXJyYXlfdW5pcXVlKGQpLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZWFyY2goc3RyLCB0cnVlLCBzaG93X29ubHlfbWF0Y2hlcywgaW5zaWRlLCBhcHBlbmQsIHNob3dfb25seV9tYXRjaGVzX2NoaWxkcmVuKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9LCB0aGlzKSwgaW5zaWRlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRhID0gJC5leHRlbmQoe30sIGEpO1xuXHRcdFx0XHRcdGlmKCFhLmRhdGEpIHsgYS5kYXRhID0ge307IH1cblx0XHRcdFx0XHRhLmRhdGEuc3RyID0gc3RyO1xuXHRcdFx0XHRcdGlmKGluc2lkZSkge1xuXHRcdFx0XHRcdFx0YS5kYXRhLmluc2lkZSA9IGluc2lkZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0KSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdC5hYm9ydCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdCA9ICQuYWpheChhKVxuXHRcdFx0XHRcdFx0LmZhaWwoJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yID0geyAnZXJyb3InIDogJ2FqYXgnLCAncGx1Z2luJyA6ICdzZWFyY2gnLCAnaWQnIDogJ3NlYXJjaF8wMScsICdyZWFzb24nIDogJ0NvdWxkIG5vdCBsb2FkIHNlYXJjaCBwYXJlbnRzJywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoYSkgfTtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcywgdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpO1xuXHRcdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdFx0XHQuZG9uZSgkLnByb3h5KGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRcdGlmKGQgJiYgZC5kKSB7IGQgPSBkLmQ7IH1cblx0XHRcdFx0XHRcdFx0dGhpcy5fbG9hZF9ub2RlcyghJC5pc0FycmF5KGQpID8gW10gOiAkLnZha2F0YS5hcnJheV91bmlxdWUoZCksIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlYXJjaChzdHIsIHRydWUsIHNob3dfb25seV9tYXRjaGVzLCBpbnNpZGUsIGFwcGVuZCwgc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fZGF0YS5zZWFyY2gubGFzdFJlcXVlc3Q7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKCFhcHBlbmQpIHtcblx0XHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guc3RyID0gc3RyO1xuXHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5kb20gPSAkKCk7XG5cdFx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLnJlcyA9IFtdO1xuXHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5vcG4gPSBbXTtcblx0XHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guc29tID0gc2hvd19vbmx5X21hdGNoZXM7XG5cdFx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLnNtYyA9IHNob3dfb25seV9tYXRjaGVzX2NoaWxkcmVuO1xuXHRcdFx0fVxuXG5cdFx0XHRmID0gbmV3ICQudmFrYXRhLnNlYXJjaChzdHIsIHRydWUsIHsgY2FzZVNlbnNpdGl2ZSA6IHMuY2FzZV9zZW5zaXRpdmUsIGZ1enp5IDogcy5mdXp6eSB9KTtcblx0XHRcdCQuZWFjaChtW2luc2lkZSA/IGluc2lkZSA6ICQuanN0cmVlLnJvb3RdLmNoaWxkcmVuX2QsIGZ1bmN0aW9uIChpaSwgaSkge1xuXHRcdFx0XHR2YXIgdiA9IG1baV07XG5cdFx0XHRcdGlmKHYudGV4dCAmJiAhdi5zdGF0ZS5oaWRkZW4gJiYgKCFzLnNlYXJjaF9sZWF2ZXNfb25seSB8fCAodi5zdGF0ZS5sb2FkZWQgJiYgdi5jaGlsZHJlbi5sZW5ndGggPT09IDApKSAmJiAoIChzLnNlYXJjaF9jYWxsYmFjayAmJiBzLnNlYXJjaF9jYWxsYmFjay5jYWxsKHRoaXMsIHN0ciwgdikpIHx8ICghcy5zZWFyY2hfY2FsbGJhY2sgJiYgZi5zZWFyY2godi50ZXh0KS5pc01hdGNoKSApICkge1xuXHRcdFx0XHRcdHIucHVzaChpKTtcblx0XHRcdFx0XHRwID0gcC5jb25jYXQodi5wYXJlbnRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZihyLmxlbmd0aCkge1xuXHRcdFx0XHRwID0gJC52YWthdGEuYXJyYXlfdW5pcXVlKHApO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGogPSBwLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGlmKHBbaV0gIT09ICQuanN0cmVlLnJvb3QgJiYgbVtwW2ldXSAmJiB0aGlzLm9wZW5fbm9kZShwW2ldLCBudWxsLCAwKSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5zZWFyY2gub3BuLnB1c2gocFtpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCFhcHBlbmQpIHtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5kb20gPSAkKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCcjJyArICQubWFwKHIsIGZ1bmN0aW9uICh2KSB7IHJldHVybiBcIjAxMjM0NTY3ODlcIi5pbmRleE9mKHZbMF0pICE9PSAtMSA/ICdcXFxcMycgKyB2WzBdICsgJyAnICsgdi5zdWJzdHIoMSkucmVwbGFjZSgkLmpzdHJlZS5pZHJlZ2V4LCdcXFxcJCYnKSA6IHYucmVwbGFjZSgkLmpzdHJlZS5pZHJlZ2V4LCdcXFxcJCYnKTsgfSkuam9pbignLCAjJykpKTtcblx0XHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5yZXMgPSByO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLmRvbSA9IHRoaXMuX2RhdGEuc2VhcmNoLmRvbS5hZGQoJCh0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnIycgKyAkLm1hcChyLCBmdW5jdGlvbiAodikgeyByZXR1cm4gXCIwMTIzNDU2Nzg5XCIuaW5kZXhPZih2WzBdKSAhPT0gLTEgPyAnXFxcXDMnICsgdlswXSArICcgJyArIHYuc3Vic3RyKDEpLnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJykgOiB2LnJlcGxhY2UoJC5qc3RyZWUuaWRyZWdleCwnXFxcXCQmJyk7IH0pLmpvaW4oJywgIycpKSkpO1xuXHRcdFx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLnJlcyA9ICQudmFrYXRhLmFycmF5X3VuaXF1ZSh0aGlzLl9kYXRhLnNlYXJjaC5yZXMuY29uY2F0KHIpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5kb20uY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcygnanN0cmVlLXNlYXJjaCcpO1xuXHRcdFx0fVxuXHRcdFx0LyoqXG5cdFx0XHQgKiB0cmlnZ2VyZWQgYWZ0ZXIgc2VhcmNoIGlzIGNvbXBsZXRlXG5cdFx0XHQgKiBAZXZlbnRcblx0XHRcdCAqIEBuYW1lIHNlYXJjaC5qc3RyZWVcblx0XHRcdCAqIEBwYXJhbSB7alF1ZXJ5fSBub2RlcyBhIGpRdWVyeSBjb2xsZWN0aW9uIG9mIG1hdGNoaW5nIG5vZGVzXG5cdFx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzZWFyY2ggc3RyaW5nXG5cdFx0XHQgKiBAcGFyYW0ge0FycmF5fSByZXMgYSBjb2xsZWN0aW9uIG9mIG9iamVjdHMgcmVwcmVzZWluZyB0aGUgbWF0Y2hpbmcgbm9kZXNcblx0XHRcdCAqIEBwbHVnaW4gc2VhcmNoXG5cdFx0XHQgKi9cblx0XHRcdHRoaXMudHJpZ2dlcignc2VhcmNoJywgeyBub2RlcyA6IHRoaXMuX2RhdGEuc2VhcmNoLmRvbSwgc3RyIDogc3RyLCByZXMgOiB0aGlzLl9kYXRhLnNlYXJjaC5yZXMsIHNob3dfb25seV9tYXRjaGVzIDogc2hvd19vbmx5X21hdGNoZXMgfSk7XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiB1c2VkIHRvIGNsZWFyIHRoZSBsYXN0IHNlYXJjaCAocmVtb3ZlcyBjbGFzc2VzIGFuZCBzaG93cyBhbGwgbm9kZXMgaWYgZmlsdGVyaW5nIGlzIG9uKVxuXHRcdCAqIEBuYW1lIGNsZWFyX3NlYXJjaCgpXG5cdFx0ICogQHBsdWdpbiBzZWFyY2hcblx0XHQgKiBAdHJpZ2dlciBjbGVhcl9zZWFyY2guanN0cmVlXG5cdFx0ICovXG5cdFx0dGhpcy5jbGVhcl9zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLnNlYXJjaC5jbG9zZV9vcGVuZWRfb25jbGVhcikge1xuXHRcdFx0XHR0aGlzLmNsb3NlX25vZGUodGhpcy5fZGF0YS5zZWFyY2gub3BuLCAwKTtcblx0XHRcdH1cblx0XHRcdC8qKlxuXHRcdFx0ICogdHJpZ2dlcmVkIGFmdGVyIHNlYXJjaCBpcyBjb21wbGV0ZVxuXHRcdFx0ICogQGV2ZW50XG5cdFx0XHQgKiBAbmFtZSBjbGVhcl9zZWFyY2guanN0cmVlXG5cdFx0XHQgKiBAcGFyYW0ge2pRdWVyeX0gbm9kZXMgYSBqUXVlcnkgY29sbGVjdGlvbiBvZiBtYXRjaGluZyBub2RlcyAodGhlIHJlc3VsdCBmcm9tIHRoZSBsYXN0IHNlYXJjaClcblx0XHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgdGhlIHNlYXJjaCBzdHJpbmcgKHRoZSBsYXN0IHNlYXJjaCBzdHJpbmcpXG5cdFx0XHQgKiBAcGFyYW0ge0FycmF5fSByZXMgYSBjb2xsZWN0aW9uIG9mIG9iamVjdHMgcmVwcmVzZWluZyB0aGUgbWF0Y2hpbmcgbm9kZXMgKHRoZSByZXN1bHQgZnJvbSB0aGUgbGFzdCBzZWFyY2gpXG5cdFx0XHQgKiBAcGx1Z2luIHNlYXJjaFxuXHRcdFx0ICovXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2NsZWFyX3NlYXJjaCcsIHsgJ25vZGVzJyA6IHRoaXMuX2RhdGEuc2VhcmNoLmRvbSwgc3RyIDogdGhpcy5fZGF0YS5zZWFyY2guc3RyLCByZXMgOiB0aGlzLl9kYXRhLnNlYXJjaC5yZXMgfSk7XG5cdFx0XHRpZih0aGlzLl9kYXRhLnNlYXJjaC5yZXMubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLmRvbSA9ICQodGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoJyMnICsgJC5tYXAodGhpcy5fZGF0YS5zZWFyY2gucmVzLCBmdW5jdGlvbiAodikge1xuXHRcdFx0XHRcdHJldHVybiBcIjAxMjM0NTY3ODlcIi5pbmRleE9mKHZbMF0pICE9PSAtMSA/ICdcXFxcMycgKyB2WzBdICsgJyAnICsgdi5zdWJzdHIoMSkucmVwbGFjZSgkLmpzdHJlZS5pZHJlZ2V4LCdcXFxcJCYnKSA6IHYucmVwbGFjZSgkLmpzdHJlZS5pZHJlZ2V4LCdcXFxcJCYnKTtcblx0XHRcdFx0fSkuam9pbignLCAjJykpKTtcblx0XHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guZG9tLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtc2VhcmNoXCIpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fZGF0YS5zZWFyY2guc3RyID0gXCJcIjtcblx0XHRcdHRoaXMuX2RhdGEuc2VhcmNoLnJlcyA9IFtdO1xuXHRcdFx0dGhpcy5fZGF0YS5zZWFyY2gub3BuID0gW107XG5cdFx0XHR0aGlzLl9kYXRhLnNlYXJjaC5kb20gPSAkKCk7XG5cdFx0fTtcblxuXHRcdHRoaXMucmVkcmF3X25vZGUgPSBmdW5jdGlvbihvYmosIGRlZXAsIGNhbGxiYWNrLCBmb3JjZV9yZW5kZXIpIHtcblx0XHRcdG9iaiA9IHBhcmVudC5yZWRyYXdfbm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0aWYob2JqKSB7XG5cdFx0XHRcdGlmKCQuaW5BcnJheShvYmouaWQsIHRoaXMuX2RhdGEuc2VhcmNoLnJlcykgIT09IC0xKSB7XG5cdFx0XHRcdFx0dmFyIGksIGosIHRtcCA9IG51bGw7XG5cdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gb2JqLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZihvYmouY2hpbGROb2Rlc1tpXSAmJiBvYmouY2hpbGROb2Rlc1tpXS5jbGFzc05hbWUgJiYgb2JqLmNoaWxkTm9kZXNbaV0uY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtYW5jaG9yXCIpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0XHR0bXAgPSBvYmouY2hpbGROb2Rlc1tpXTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHRtcCkge1xuXHRcdFx0XHRcdFx0dG1wLmNsYXNzTmFtZSArPSAnIGpzdHJlZS1zZWFyY2gnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9O1xuXHR9O1xuXG5cdC8vIGhlbHBlcnNcblx0KGZ1bmN0aW9uICgkKSB7XG5cdFx0Ly8gZnJvbSBodHRwOi8va2lyby5tZS9wcm9qZWN0cy9mdXNlLmh0bWxcblx0XHQkLnZha2F0YS5zZWFyY2ggPSBmdW5jdGlvbihwYXR0ZXJuLCB0eHQsIG9wdGlvbnMpIHtcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLnZha2F0YS5zZWFyY2guZGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcdFx0aWYob3B0aW9ucy5mdXp6eSAhPT0gZmFsc2UpIHtcblx0XHRcdFx0b3B0aW9ucy5mdXp6eSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRwYXR0ZXJuID0gb3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gcGF0dGVybiA6IHBhdHRlcm4udG9Mb3dlckNhc2UoKTtcblx0XHRcdHZhciBNQVRDSF9MT0NBVElPTlx0PSBvcHRpb25zLmxvY2F0aW9uLFxuXHRcdFx0XHRNQVRDSF9ESVNUQU5DRVx0PSBvcHRpb25zLmRpc3RhbmNlLFxuXHRcdFx0XHRNQVRDSF9USFJFU0hPTERcdD0gb3B0aW9ucy50aHJlc2hvbGQsXG5cdFx0XHRcdHBhdHRlcm5MZW4gPSBwYXR0ZXJuLmxlbmd0aCxcblx0XHRcdFx0bWF0Y2htYXNrLCBwYXR0ZXJuX2FscGhhYmV0LCBtYXRjaF9iaXRhcFNjb3JlLCBzZWFyY2g7XG5cdFx0XHRpZihwYXR0ZXJuTGVuID4gMzIpIHtcblx0XHRcdFx0b3B0aW9ucy5mdXp6eSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYob3B0aW9ucy5mdXp6eSkge1xuXHRcdFx0XHRtYXRjaG1hc2sgPSAxIDw8IChwYXR0ZXJuTGVuIC0gMSk7XG5cdFx0XHRcdHBhdHRlcm5fYWxwaGFiZXQgPSAoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHZhciBtYXNrID0ge30sXG5cdFx0XHRcdFx0XHRpID0gMDtcblx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcGF0dGVybkxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0XHRtYXNrW3BhdHRlcm4uY2hhckF0KGkpXSA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBwYXR0ZXJuTGVuOyBpKyspIHtcblx0XHRcdFx0XHRcdG1hc2tbcGF0dGVybi5jaGFyQXQoaSldIHw9IDEgPDwgKHBhdHRlcm5MZW4gLSBpIC0gMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXNrO1xuXHRcdFx0XHR9KCkpO1xuXHRcdFx0XHRtYXRjaF9iaXRhcFNjb3JlID0gZnVuY3Rpb24gKGUsIHgpIHtcblx0XHRcdFx0XHR2YXIgYWNjdXJhY3kgPSBlIC8gcGF0dGVybkxlbixcblx0XHRcdFx0XHRcdHByb3hpbWl0eSA9IE1hdGguYWJzKE1BVENIX0xPQ0FUSU9OIC0geCk7XG5cdFx0XHRcdFx0aWYoIU1BVENIX0RJU1RBTkNFKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHJveGltaXR5ID8gMS4wIDogYWNjdXJhY3k7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBhY2N1cmFjeSArIChwcm94aW1pdHkgLyBNQVRDSF9ESVNUQU5DRSk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRzZWFyY2ggPSBmdW5jdGlvbiAodGV4dCkge1xuXHRcdFx0XHR0ZXh0ID0gb3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gdGV4dCA6IHRleHQudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0aWYocGF0dGVybiA9PT0gdGV4dCB8fCB0ZXh0LmluZGV4T2YocGF0dGVybikgIT09IC0xKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGlzTWF0Y2g6IHRydWUsXG5cdFx0XHRcdFx0XHRzY29yZTogMFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIW9wdGlvbnMuZnV6enkpIHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0aXNNYXRjaDogZmFsc2UsXG5cdFx0XHRcdFx0XHRzY29yZTogMVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGksIGosXG5cdFx0XHRcdFx0dGV4dExlbiA9IHRleHQubGVuZ3RoLFxuXHRcdFx0XHRcdHNjb3JlVGhyZXNob2xkID0gTUFUQ0hfVEhSRVNIT0xELFxuXHRcdFx0XHRcdGJlc3RMb2MgPSB0ZXh0LmluZGV4T2YocGF0dGVybiwgTUFUQ0hfTE9DQVRJT04pLFxuXHRcdFx0XHRcdGJpbk1pbiwgYmluTWlkLFxuXHRcdFx0XHRcdGJpbk1heCA9IHBhdHRlcm5MZW4gKyB0ZXh0TGVuLFxuXHRcdFx0XHRcdGxhc3RSZCwgc3RhcnQsIGZpbmlzaCwgcmQsIGNoYXJNYXRjaCxcblx0XHRcdFx0XHRzY29yZSA9IDEsXG5cdFx0XHRcdFx0bG9jYXRpb25zID0gW107XG5cdFx0XHRcdGlmIChiZXN0TG9jICE9PSAtMSkge1xuXHRcdFx0XHRcdHNjb3JlVGhyZXNob2xkID0gTWF0aC5taW4obWF0Y2hfYml0YXBTY29yZSgwLCBiZXN0TG9jKSwgc2NvcmVUaHJlc2hvbGQpO1xuXHRcdFx0XHRcdGJlc3RMb2MgPSB0ZXh0Lmxhc3RJbmRleE9mKHBhdHRlcm4sIE1BVENIX0xPQ0FUSU9OICsgcGF0dGVybkxlbik7XG5cdFx0XHRcdFx0aWYgKGJlc3RMb2MgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRzY29yZVRocmVzaG9sZCA9IE1hdGgubWluKG1hdGNoX2JpdGFwU2NvcmUoMCwgYmVzdExvYyksIHNjb3JlVGhyZXNob2xkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0YmVzdExvYyA9IC0xO1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcGF0dGVybkxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0YmluTWluID0gMDtcblx0XHRcdFx0XHRiaW5NaWQgPSBiaW5NYXg7XG5cdFx0XHRcdFx0d2hpbGUgKGJpbk1pbiA8IGJpbk1pZCkge1xuXHRcdFx0XHRcdFx0aWYgKG1hdGNoX2JpdGFwU2NvcmUoaSwgTUFUQ0hfTE9DQVRJT04gKyBiaW5NaWQpIDw9IHNjb3JlVGhyZXNob2xkKSB7XG5cdFx0XHRcdFx0XHRcdGJpbk1pbiA9IGJpbk1pZDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGJpbk1heCA9IGJpbk1pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJpbk1pZCA9IE1hdGguZmxvb3IoKGJpbk1heCAtIGJpbk1pbikgLyAyICsgYmluTWluKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YmluTWF4ID0gYmluTWlkO1xuXHRcdFx0XHRcdHN0YXJ0ID0gTWF0aC5tYXgoMSwgTUFUQ0hfTE9DQVRJT04gLSBiaW5NaWQgKyAxKTtcblx0XHRcdFx0XHRmaW5pc2ggPSBNYXRoLm1pbihNQVRDSF9MT0NBVElPTiArIGJpbk1pZCwgdGV4dExlbikgKyBwYXR0ZXJuTGVuO1xuXHRcdFx0XHRcdHJkID0gbmV3IEFycmF5KGZpbmlzaCArIDIpO1xuXHRcdFx0XHRcdHJkW2ZpbmlzaCArIDFdID0gKDEgPDwgaSkgLSAxO1xuXHRcdFx0XHRcdGZvciAoaiA9IGZpbmlzaDsgaiA+PSBzdGFydDsgai0tKSB7XG5cdFx0XHRcdFx0XHRjaGFyTWF0Y2ggPSBwYXR0ZXJuX2FscGhhYmV0W3RleHQuY2hhckF0KGogLSAxKV07XG5cdFx0XHRcdFx0XHRpZiAoaSA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRyZFtqXSA9ICgocmRbaiArIDFdIDw8IDEpIHwgMSkgJiBjaGFyTWF0Y2g7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZFtqXSA9ICgocmRbaiArIDFdIDw8IDEpIHwgMSkgJiBjaGFyTWF0Y2ggfCAoKChsYXN0UmRbaiArIDFdIHwgbGFzdFJkW2pdKSA8PCAxKSB8IDEpIHwgbGFzdFJkW2ogKyAxXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChyZFtqXSAmIG1hdGNobWFzaykge1xuXHRcdFx0XHRcdFx0XHRzY29yZSA9IG1hdGNoX2JpdGFwU2NvcmUoaSwgaiAtIDEpO1xuXHRcdFx0XHRcdFx0XHRpZiAoc2NvcmUgPD0gc2NvcmVUaHJlc2hvbGQpIHtcblx0XHRcdFx0XHRcdFx0XHRzY29yZVRocmVzaG9sZCA9IHNjb3JlO1xuXHRcdFx0XHRcdFx0XHRcdGJlc3RMb2MgPSBqIC0gMTtcblx0XHRcdFx0XHRcdFx0XHRsb2NhdGlvbnMucHVzaChiZXN0TG9jKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYmVzdExvYyA+IE1BVENIX0xPQ0FUSU9OKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IE1hdGgubWF4KDEsIDIgKiBNQVRDSF9MT0NBVElPTiAtIGJlc3RMb2MpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG1hdGNoX2JpdGFwU2NvcmUoaSArIDEsIE1BVENIX0xPQ0FUSU9OKSA+IHNjb3JlVGhyZXNob2xkKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGFzdFJkID0gcmQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRpc01hdGNoOiBiZXN0TG9jID49IDAsXG5cdFx0XHRcdFx0c2NvcmU6IHNjb3JlXG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHR4dCA9PT0gdHJ1ZSA/IHsgJ3NlYXJjaCcgOiBzZWFyY2ggfSA6IHNlYXJjaCh0eHQpO1xuXHRcdH07XG5cdFx0JC52YWthdGEuc2VhcmNoLmRlZmF1bHRzID0ge1xuXHRcdFx0bG9jYXRpb24gOiAwLFxuXHRcdFx0ZGlzdGFuY2UgOiAxMDAsXG5cdFx0XHR0aHJlc2hvbGQgOiAwLjYsXG5cdFx0XHRmdXp6eSA6IGZhbHNlLFxuXHRcdFx0Y2FzZVNlbnNpdGl2ZSA6IGZhbHNlXG5cdFx0fTtcblx0fSgkKSk7XG5cblx0Ly8gaW5jbHVkZSB0aGUgc2VhcmNoIHBsdWdpbiBieSBkZWZhdWx0XG5cdC8vICQuanN0cmVlLmRlZmF1bHRzLnBsdWdpbnMucHVzaChcInNlYXJjaFwiKTtcblxuXG4vKipcbiAqICMjIyBTb3J0IHBsdWdpblxuICpcbiAqIEF1dG9tYXRpY2FsbHkgc29ydHMgYWxsIHNpYmxpbmdzIGluIHRoZSB0cmVlIGFjY29yZGluZyB0byBhIHNvcnRpbmcgZnVuY3Rpb24uXG4gKi9cblxuXHQvKipcblx0ICogdGhlIHNldHRpbmdzIGZ1bmN0aW9uIHVzZWQgdG8gc29ydCB0aGUgbm9kZXMuXG5cdCAqIEl0IGlzIGV4ZWN1dGVkIGluIHRoZSB0cmVlJ3MgY29udGV4dCwgYWNjZXB0cyB0d28gbm9kZXMgYXMgYXJndW1lbnRzIGFuZCBzaG91bGQgcmV0dXJuIGAxYCBvciBgLTFgLlxuXHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zb3J0XG5cdCAqIEBwbHVnaW4gc29ydFxuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMuc29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0Ly9yZXR1cm4gdGhpcy5nZXRfdHlwZShhKSA9PT0gdGhpcy5nZXRfdHlwZShiKSA/ICh0aGlzLmdldF90ZXh0KGEpID4gdGhpcy5nZXRfdGV4dChiKSA/IDEgOiAtMSkgOiB0aGlzLmdldF90eXBlKGEpID49IHRoaXMuZ2V0X3R5cGUoYik7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0X3RleHQoYSkgPiB0aGlzLmdldF90ZXh0KGIpID8gMSA6IC0xO1xuXHR9O1xuXHQkLmpzdHJlZS5wbHVnaW5zLnNvcnQgPSBmdW5jdGlvbiAob3B0aW9ucywgcGFyZW50KSB7XG5cdFx0dGhpcy5iaW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cGFyZW50LmJpbmQuY2FsbCh0aGlzKTtcblx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0XHQub24oXCJtb2RlbC5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0dGhpcy5zb3J0KGRhdGEucGFyZW50LCB0cnVlKTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwicmVuYW1lX25vZGUuanN0cmVlIGNyZWF0ZV9ub2RlLmpzdHJlZVwiLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNvcnQoZGF0YS5wYXJlbnQgfHwgZGF0YS5ub2RlLnBhcmVudCwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWRyYXdfbm9kZShkYXRhLnBhcmVudCB8fCBkYXRhLm5vZGUucGFyZW50LCB0cnVlKTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwibW92ZV9ub2RlLmpzdHJlZSBjb3B5X25vZGUuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKGUsIGRhdGEpIHtcblx0XHRcdFx0XHRcdHRoaXMuc29ydChkYXRhLnBhcmVudCwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWRyYXdfbm9kZShkYXRhLnBhcmVudCwgdHJ1ZSk7XG5cdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogdXNlZCB0byBzb3J0IGEgbm9kZSdzIGNoaWxkcmVuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBzb3J0KG9iaiBbLCBkZWVwXSlcblx0XHQgKiBAcGFyYW0gIHttaXhlZH0gb2JqIHRoZSBub2RlXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBkZWVwIGlmIHNldCB0byBgdHJ1ZWAgbm9kZXMgYXJlIHNvcnRlZCByZWN1cnNpdmVseS5cblx0XHQgKiBAcGx1Z2luIHNvcnRcblx0XHQgKiBAdHJpZ2dlciBzZWFyY2guanN0cmVlXG5cdFx0ICovXG5cdFx0dGhpcy5zb3J0ID0gZnVuY3Rpb24gKG9iaiwgZGVlcCkge1xuXHRcdFx0dmFyIGksIGo7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZihvYmogJiYgb2JqLmNoaWxkcmVuICYmIG9iai5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0b2JqLmNoaWxkcmVuLnNvcnQoJC5wcm94eSh0aGlzLnNldHRpbmdzLnNvcnQsIHRoaXMpKTtcblx0XHRcdFx0aWYoZGVlcCkge1xuXHRcdFx0XHRcdGZvcihpID0gMCwgaiA9IG9iai5jaGlsZHJlbl9kLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0dGhpcy5zb3J0KG9iai5jaGlsZHJlbl9kW2ldLCBmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fTtcblxuXHQvLyBpbmNsdWRlIHRoZSBzb3J0IHBsdWdpbiBieSBkZWZhdWx0XG5cdC8vICQuanN0cmVlLmRlZmF1bHRzLnBsdWdpbnMucHVzaChcInNvcnRcIik7XG5cbi8qKlxuICogIyMjIFN0YXRlIHBsdWdpblxuICpcbiAqIFNhdmVzIHRoZSBzdGF0ZSBvZiB0aGUgdHJlZSAoc2VsZWN0ZWQgbm9kZXMsIG9wZW5lZCBub2Rlcykgb24gdGhlIHVzZXIncyBjb21wdXRlciB1c2luZyBhdmFpbGFibGUgb3B0aW9ucyAobG9jYWxTdG9yYWdlLCBjb29raWVzLCBldGMpXG4gKi9cblxuXHR2YXIgdG8gPSBmYWxzZTtcblx0LyoqXG5cdCAqIHN0b3JlcyBhbGwgZGVmYXVsdHMgZm9yIHRoZSBzdGF0ZSBwbHVnaW5cblx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuc3RhdGVcblx0ICogQHBsdWdpbiBzdGF0ZVxuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMuc3RhdGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgZm9yIHRoZSBrZXkgdG8gdXNlIHdoZW4gc2F2aW5nIHRoZSBjdXJyZW50IHRyZWUgKGNoYW5nZSBpZiB1c2luZyBtdWx0aXBsZSB0cmVlcyBpbiB5b3VyIHByb2plY3QpLiBEZWZhdWx0cyB0byBganN0cmVlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zdGF0ZS5rZXlcblx0XHQgKiBAcGx1Z2luIHN0YXRlXG5cdFx0ICovXG5cdFx0a2V5XHRcdDogJ2pzdHJlZScsXG5cdFx0LyoqXG5cdFx0ICogQSBzcGFjZSBzZXBhcmF0ZWQgbGlzdCBvZiBldmVudHMgdGhhdCB0cmlnZ2VyIGEgc3RhdGUgc2F2ZS4gRGVmYXVsdHMgdG8gYGNoYW5nZWQuanN0cmVlIG9wZW5fbm9kZS5qc3RyZWUgY2xvc2Vfbm9kZS5qc3RyZWVgLlxuXHRcdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLnN0YXRlLmV2ZW50c1xuXHRcdCAqIEBwbHVnaW4gc3RhdGVcblx0XHQgKi9cblx0XHRldmVudHNcdDogJ2NoYW5nZWQuanN0cmVlIG9wZW5fbm9kZS5qc3RyZWUgY2xvc2Vfbm9kZS5qc3RyZWUgY2hlY2tfbm9kZS5qc3RyZWUgdW5jaGVja19ub2RlLmpzdHJlZScsXG5cdFx0LyoqXG5cdFx0ICogVGltZSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgd2hpY2ggdGhlIHN0YXRlIHdpbGwgZXhwaXJlLiBEZWZhdWx0cyB0byAnZmFsc2UnIG1lYW5pbmcgLSBubyBleHBpcmUuXG5cdFx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMuc3RhdGUudHRsXG5cdFx0ICogQHBsdWdpbiBzdGF0ZVxuXHRcdCAqL1xuXHRcdHR0bFx0XHQ6IGZhbHNlLFxuXHRcdC8qKlxuXHRcdCAqIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHByaW9yIHRvIHJlc3RvcmluZyBzdGF0ZSB3aXRoIG9uZSBhcmd1bWVudCAtIHRoZSBzdGF0ZSBvYmplY3QuIENhbiBiZSB1c2VkIHRvIGNsZWFyIHVud2FudGVkIHBhcnRzIG9mIHRoZSBzdGF0ZS5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy5zdGF0ZS5maWx0ZXJcblx0XHQgKiBAcGx1Z2luIHN0YXRlXG5cdFx0ICovXG5cdFx0ZmlsdGVyXHQ6IGZhbHNlXG5cdH07XG5cdCQuanN0cmVlLnBsdWdpbnMuc3RhdGUgPSBmdW5jdGlvbiAob3B0aW9ucywgcGFyZW50KSB7XG5cdFx0dGhpcy5iaW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cGFyZW50LmJpbmQuY2FsbCh0aGlzKTtcblx0XHRcdHZhciBiaW5kID0gJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5vbih0aGlzLnNldHRpbmdzLnN0YXRlLmV2ZW50cywgJC5wcm94eShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0aWYodG8pIHsgY2xlYXJUaW1lb3V0KHRvKTsgfVxuXHRcdFx0XHRcdHRvID0gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHsgdGhpcy5zYXZlX3N0YXRlKCk7IH0sIHRoaXMpLCAxMDApO1xuXHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQgKiB0cmlnZ2VyZWQgd2hlbiB0aGUgc3RhdGUgcGx1Z2luIGlzIGZpbmlzaGVkIHJlc3RvcmluZyB0aGUgc3RhdGUgKGFuZCBpbW1lZGlhdGVseSBhZnRlciByZWFkeSBpZiB0aGVyZSBpcyBubyBzdGF0ZSB0byByZXN0b3JlKS5cblx0XHRcdFx0ICogQGV2ZW50XG5cdFx0XHRcdCAqIEBuYW1lIHN0YXRlX3JlYWR5LmpzdHJlZVxuXHRcdFx0XHQgKiBAcGx1Z2luIHN0YXRlXG5cdFx0XHRcdCAqL1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3N0YXRlX3JlYWR5Jyk7XG5cdFx0XHR9LCB0aGlzKTtcblx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdFx0XHQub24oXCJyZWFkeS5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50Lm9uZShcInJlc3RvcmVfc3RhdGUuanN0cmVlXCIsIGJpbmQpO1xuXHRcdFx0XHRcdFx0aWYoIXRoaXMucmVzdG9yZV9zdGF0ZSgpKSB7IGJpbmQoKTsgfVxuXHRcdFx0XHRcdH0sIHRoaXMpKTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIHNhdmUgdGhlIHN0YXRlXG5cdFx0ICogQG5hbWUgc2F2ZV9zdGF0ZSgpXG5cdFx0ICogQHBsdWdpbiBzdGF0ZVxuXHRcdCAqL1xuXHRcdHRoaXMuc2F2ZV9zdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBzdCA9IHsgJ3N0YXRlJyA6IHRoaXMuZ2V0X3N0YXRlKCksICd0dGwnIDogdGhpcy5zZXR0aW5ncy5zdGF0ZS50dGwsICdzZWMnIDogKyhuZXcgRGF0ZSgpKSB9O1xuXHRcdFx0JC52YWthdGEuc3RvcmFnZS5zZXQodGhpcy5zZXR0aW5ncy5zdGF0ZS5rZXksIEpTT04uc3RyaW5naWZ5KHN0KSk7XG5cdFx0fTtcblx0XHQvKipcblx0XHQgKiByZXN0b3JlIHRoZSBzdGF0ZSBmcm9tIHRoZSB1c2VyJ3MgY29tcHV0ZXJcblx0XHQgKiBAbmFtZSByZXN0b3JlX3N0YXRlKClcblx0XHQgKiBAcGx1Z2luIHN0YXRlXG5cdFx0ICovXG5cdFx0dGhpcy5yZXN0b3JlX3N0YXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGsgPSAkLnZha2F0YS5zdG9yYWdlLmdldCh0aGlzLnNldHRpbmdzLnN0YXRlLmtleSk7XG5cdFx0XHRpZighIWspIHsgdHJ5IHsgayA9IEpTT04ucGFyc2Uoayk7IH0gY2F0Y2goZXgpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblx0XHRcdGlmKCEhayAmJiBrLnR0bCAmJiBrLnNlYyAmJiArKG5ldyBEYXRlKCkpIC0gay5zZWMgPiBrLnR0bCkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdGlmKCEhayAmJiBrLnN0YXRlKSB7IGsgPSBrLnN0YXRlOyB9XG5cdFx0XHRpZighIWsgJiYgJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3Muc3RhdGUuZmlsdGVyKSkgeyBrID0gdGhpcy5zZXR0aW5ncy5zdGF0ZS5maWx0ZXIuY2FsbCh0aGlzLCBrKTsgfVxuXHRcdFx0aWYoISFrKSB7XG5cdFx0XHRcdHRoaXMuZWxlbWVudC5vbmUoXCJzZXRfc3RhdGUuanN0cmVlXCIsIGZ1bmN0aW9uIChlLCBkYXRhKSB7IGRhdGEuaW5zdGFuY2UudHJpZ2dlcigncmVzdG9yZV9zdGF0ZScsIHsgJ3N0YXRlJyA6ICQuZXh0ZW5kKHRydWUsIHt9LCBrKSB9KTsgfSk7XG5cdFx0XHRcdHRoaXMuc2V0X3N0YXRlKGspO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIGNsZWFyIHRoZSBzdGF0ZSBvbiB0aGUgdXNlcidzIGNvbXB1dGVyXG5cdFx0ICogQG5hbWUgY2xlYXJfc3RhdGUoKVxuXHRcdCAqIEBwbHVnaW4gc3RhdGVcblx0XHQgKi9cblx0XHR0aGlzLmNsZWFyX3N0YXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuICQudmFrYXRhLnN0b3JhZ2UuZGVsKHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5KTtcblx0XHR9O1xuXHR9O1xuXG5cdChmdW5jdGlvbiAoJCwgdW5kZWZpbmVkKSB7XG5cdFx0JC52YWthdGEuc3RvcmFnZSA9IHtcblx0XHRcdC8vIHNpbXBseSBzcGVjaWZ5aW5nIHRoZSBmdW5jdGlvbnMgaW4gRkYgdGhyb3dzIGFuIGVycm9yXG5cdFx0XHRzZXQgOiBmdW5jdGlvbiAoa2V5LCB2YWwpIHsgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbCk7IH0sXG5cdFx0XHRnZXQgOiBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsgfSxcblx0XHRcdGRlbCA6IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOyB9XG5cdFx0fTtcblx0fSgkKSk7XG5cblx0Ly8gaW5jbHVkZSB0aGUgc3RhdGUgcGx1Z2luIGJ5IGRlZmF1bHRcblx0Ly8gJC5qc3RyZWUuZGVmYXVsdHMucGx1Z2lucy5wdXNoKFwic3RhdGVcIik7XG5cbi8qKlxuICogIyMjIFR5cGVzIHBsdWdpblxuICpcbiAqIE1ha2VzIGl0IHBvc3NpYmxlIHRvIGFkZCBwcmVkZWZpbmVkIHR5cGVzIGZvciBncm91cHMgb2Ygbm9kZXMsIHdoaWNoIG1ha2UgaXQgcG9zc2libGUgdG8gZWFzaWx5IGNvbnRyb2wgbmVzdGluZyBydWxlcyBhbmQgaWNvbiBmb3IgZWFjaCBncm91cC5cbiAqL1xuXG5cdC8qKlxuXHQgKiBBbiBvYmplY3Qgc3RvcmluZyBhbGwgdHlwZXMgYXMga2V5IHZhbHVlIHBhaXJzLCB3aGVyZSB0aGUga2V5IGlzIHRoZSB0eXBlIG5hbWUgYW5kIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QgdGhhdCBjb3VsZCBjb250YWluIGZvbGxvd2luZyBrZXlzIChhbGwgb3B0aW9uYWwpLlxuXHQgKlxuXHQgKiAqIGBtYXhfY2hpbGRyZW5gIHRoZSBtYXhpbXVtIG51bWJlciBvZiBpbW1lZGlhdGUgY2hpbGRyZW4gdGhpcyBub2RlIHR5cGUgY2FuIGhhdmUuIERvIG5vdCBzcGVjaWZ5IG9yIHNldCB0byBgLTFgIGZvciB1bmxpbWl0ZWQuXG5cdCAqICogYG1heF9kZXB0aGAgdGhlIG1heGltdW0gbnVtYmVyIG9mIG5lc3RpbmcgdGhpcyBub2RlIHR5cGUgY2FuIGhhdmUuIEEgdmFsdWUgb2YgYDFgIHdvdWxkIG1lYW4gdGhhdCB0aGUgbm9kZSBjYW4gaGF2ZSBjaGlsZHJlbiwgYnV0IG5vIGdyYW5kY2hpbGRyZW4uIERvIG5vdCBzcGVjaWZ5IG9yIHNldCB0byBgLTFgIGZvciB1bmxpbWl0ZWQuXG5cdCAqICogYHZhbGlkX2NoaWxkcmVuYCBhbiBhcnJheSBvZiBub2RlIHR5cGUgc3RyaW5ncywgdGhhdCBub2RlcyBvZiB0aGlzIHR5cGUgY2FuIGhhdmUgYXMgY2hpbGRyZW4uIERvIG5vdCBzcGVjaWZ5IG9yIHNldCB0byBgLTFgIGZvciBubyBsaW1pdHMuXG5cdCAqICogYGljb25gIGEgc3RyaW5nIC0gY2FuIGJlIGEgcGF0aCB0byBhbiBpY29uIG9yIGEgY2xhc3NOYW1lLCBpZiB1c2luZyBhbiBpbWFnZSB0aGF0IGlzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeSB1c2UgYSBgLi9gIHByZWZpeCwgb3RoZXJ3aXNlIGl0IHdpbGwgYmUgZGV0ZWN0ZWQgYXMgYSBjbGFzcy4gT21pdCB0byB1c2UgdGhlIGRlZmF1bHQgaWNvbiBmcm9tIHlvdXIgdGhlbWUuXG5cdCAqICogYGxpX2F0dHJgIGFuIG9iamVjdCBvZiB2YWx1ZXMgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGFkZCBIVE1MIGF0dHJpYnV0ZXMgb24gdGhlIHJlc3VsdGluZyBMSSBET00gbm9kZSAobWVyZ2VkIHdpdGggdGhlIG5vZGUncyBvd24gZGF0YSlcblx0ICogKiBgYV9hdHRyYCBhbiBvYmplY3Qgb2YgdmFsdWVzIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBhZGQgSFRNTCBhdHRyaWJ1dGVzIG9uIHRoZSByZXN1bHRpbmcgQSBET00gbm9kZSAobWVyZ2VkIHdpdGggdGhlIG5vZGUncyBvd24gZGF0YSlcblx0ICpcblx0ICogVGhlcmUgYXJlIHR3byBwcmVkZWZpbmVkIHR5cGVzOlxuXHQgKlxuXHQgKiAqIGAjYCByZXByZXNlbnRzIHRoZSByb290IG9mIHRoZSB0cmVlLCBmb3IgZXhhbXBsZSBgbWF4X2NoaWxkcmVuYCB3b3VsZCBjb250cm9sIHRoZSBtYXhpbXVtIG51bWJlciBvZiByb290IG5vZGVzLlxuXHQgKiAqIGBkZWZhdWx0YCByZXByZXNlbnRzIHRoZSBkZWZhdWx0IG5vZGUgLSBhbnkgc2V0dGluZ3MgaGVyZSB3aWxsIGJlIGFwcGxpZWQgdG8gYWxsIG5vZGVzIHRoYXQgZG8gbm90IGhhdmUgYSB0eXBlIHNwZWNpZmllZC5cblx0ICpcblx0ICogQG5hbWUgJC5qc3RyZWUuZGVmYXVsdHMudHlwZXNcblx0ICogQHBsdWdpbiB0eXBlc1xuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMudHlwZXMgPSB7XG5cdFx0J2RlZmF1bHQnIDoge31cblx0fTtcblx0JC5qc3RyZWUuZGVmYXVsdHMudHlwZXNbJC5qc3RyZWUucm9vdF0gPSB7fTtcblxuXHQkLmpzdHJlZS5wbHVnaW5zLnR5cGVzID0gZnVuY3Rpb24gKG9wdGlvbnMsIHBhcmVudCkge1xuXHRcdHRoaXMuaW5pdCA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXHRcdFx0dmFyIGksIGo7XG5cdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMudHlwZXMgJiYgb3B0aW9ucy50eXBlc1snZGVmYXVsdCddKSB7XG5cdFx0XHRcdGZvcihpIGluIG9wdGlvbnMudHlwZXMpIHtcblx0XHRcdFx0XHRpZihpICE9PSBcImRlZmF1bHRcIiAmJiBpICE9PSAkLmpzdHJlZS5yb290ICYmIG9wdGlvbnMudHlwZXMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdGZvcihqIGluIG9wdGlvbnMudHlwZXNbJ2RlZmF1bHQnXSkge1xuXHRcdFx0XHRcdFx0XHRpZihvcHRpb25zLnR5cGVzWydkZWZhdWx0J10uaGFzT3duUHJvcGVydHkoaikgJiYgb3B0aW9ucy50eXBlc1tpXVtqXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy50eXBlc1tpXVtqXSA9IG9wdGlvbnMudHlwZXNbJ2RlZmF1bHQnXVtqXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cGFyZW50LmluaXQuY2FsbCh0aGlzLCBlbCwgb3B0aW9ucyk7XG5cdFx0XHR0aGlzLl9tb2RlbC5kYXRhWyQuanN0cmVlLnJvb3RdLnR5cGUgPSAkLmpzdHJlZS5yb290O1xuXHRcdH07XG5cdFx0dGhpcy5yZWZyZXNoID0gZnVuY3Rpb24gKHNraXBfbG9hZGluZywgZm9yZ2V0X3N0YXRlKSB7XG5cdFx0XHRwYXJlbnQucmVmcmVzaC5jYWxsKHRoaXMsIHNraXBfbG9hZGluZywgZm9yZ2V0X3N0YXRlKTtcblx0XHRcdHRoaXMuX21vZGVsLmRhdGFbJC5qc3RyZWUucm9vdF0udHlwZSA9ICQuanN0cmVlLnJvb3Q7XG5cdFx0fTtcblx0XHR0aGlzLmJpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0Lm9uKCdtb2RlbC5qc3RyZWUnLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHR2YXIgbSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdFx0XHRcdGRwYyA9IGRhdGEubm9kZXMsXG5cdFx0XHRcdFx0XHRcdHQgPSB0aGlzLnNldHRpbmdzLnR5cGVzLFxuXHRcdFx0XHRcdFx0XHRpLCBqLCBjID0gJ2RlZmF1bHQnLCBrO1xuXHRcdFx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gZHBjLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRjID0gJ2RlZmF1bHQnO1xuXHRcdFx0XHRcdFx0XHRpZihtW2RwY1tpXV0ub3JpZ2luYWwgJiYgbVtkcGNbaV1dLm9yaWdpbmFsLnR5cGUgJiYgdFttW2RwY1tpXV0ub3JpZ2luYWwudHlwZV0pIHtcblx0XHRcdFx0XHRcdFx0XHRjID0gbVtkcGNbaV1dLm9yaWdpbmFsLnR5cGU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYobVtkcGNbaV1dLmRhdGEgJiYgbVtkcGNbaV1dLmRhdGEuanN0cmVlICYmIG1bZHBjW2ldXS5kYXRhLmpzdHJlZS50eXBlICYmIHRbbVtkcGNbaV1dLmRhdGEuanN0cmVlLnR5cGVdKSB7XG5cdFx0XHRcdFx0XHRcdFx0YyA9IG1bZHBjW2ldXS5kYXRhLmpzdHJlZS50eXBlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdG1bZHBjW2ldXS50eXBlID0gYztcblx0XHRcdFx0XHRcdFx0aWYobVtkcGNbaV1dLmljb24gPT09IHRydWUgJiYgdFtjXS5pY29uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRtW2RwY1tpXV0uaWNvbiA9IHRbY10uaWNvbjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZih0W2NdLmxpX2F0dHIgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdFtjXS5saV9hdHRyID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdFx0XHRcdGZvciAoayBpbiB0W2NdLmxpX2F0dHIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0W2NdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGsgPT09ICdpZCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChtW2RwY1tpXV0ubGlfYXR0cltrXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bVtkcGNbaV1dLmxpX2F0dHJba10gPSB0W2NdLmxpX2F0dHJba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoayA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1bZHBjW2ldXS5saV9hdHRyWydjbGFzcyddID0gdFtjXS5saV9hdHRyWydjbGFzcyddICsgJyAnICsgbVtkcGNbaV1dLmxpX2F0dHJbJ2NsYXNzJ107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYodFtjXS5hX2F0dHIgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdFtjXS5hX2F0dHIgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChrIGluIHRbY10uYV9hdHRyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodFtjXS5hX2F0dHIuaGFzT3duUHJvcGVydHkoaykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGsgPT09ICdpZCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChtW2RwY1tpXV0uYV9hdHRyW2tdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtW2RwY1tpXV0uYV9hdHRyW2tdID0gdFtjXS5hX2F0dHJba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoayA9PT0gJ2hyZWYnICYmIG1bZHBjW2ldXS5hX2F0dHJba10gPT09ICcjJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1bZHBjW2ldXS5hX2F0dHJbJ2hyZWYnXSA9IHRbY10uYV9hdHRyWydocmVmJ107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoayA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1bZHBjW2ldXS5hX2F0dHJbJ2NsYXNzJ10gPSB0W2NdLmFfYXR0clsnY2xhc3MnXSArICcgJyArIG1bZHBjW2ldXS5hX2F0dHJbJ2NsYXNzJ107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1bJC5qc3RyZWUucm9vdF0udHlwZSA9ICQuanN0cmVlLnJvb3Q7XG5cdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0cGFyZW50LmJpbmQuY2FsbCh0aGlzKTtcblx0XHR9O1xuXHRcdHRoaXMuZ2V0X2pzb24gPSBmdW5jdGlvbiAob2JqLCBvcHRpb25zLCBmbGF0KSB7XG5cdFx0XHR2YXIgaSwgaixcblx0XHRcdFx0bSA9IHRoaXMuX21vZGVsLmRhdGEsXG5cdFx0XHRcdG9wdCA9IG9wdGlvbnMgPyAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucywge25vX2lkOmZhbHNlfSkgOiB7fSxcblx0XHRcdFx0dG1wID0gcGFyZW50LmdldF9qc29uLmNhbGwodGhpcywgb2JqLCBvcHQsIGZsYXQpO1xuXHRcdFx0aWYodG1wID09PSBmYWxzZSkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdGlmKCQuaXNBcnJheSh0bXApKSB7XG5cdFx0XHRcdGZvcihpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHR0bXBbaV0udHlwZSA9IHRtcFtpXS5pZCAmJiBtW3RtcFtpXS5pZF0gJiYgbVt0bXBbaV0uaWRdLnR5cGUgPyBtW3RtcFtpXS5pZF0udHlwZSA6IFwiZGVmYXVsdFwiO1xuXHRcdFx0XHRcdGlmKG9wdGlvbnMgJiYgb3B0aW9ucy5ub19pZCkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRtcFtpXS5pZDtcblx0XHRcdFx0XHRcdGlmKHRtcFtpXS5saV9hdHRyICYmIHRtcFtpXS5saV9hdHRyLmlkKSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0bXBbaV0ubGlfYXR0ci5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHRtcFtpXS5hX2F0dHIgJiYgdG1wW2ldLmFfYXR0ci5pZCkge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgdG1wW2ldLmFfYXR0ci5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0bXAudHlwZSA9IHRtcC5pZCAmJiBtW3RtcC5pZF0gJiYgbVt0bXAuaWRdLnR5cGUgPyBtW3RtcC5pZF0udHlwZSA6IFwiZGVmYXVsdFwiO1xuXHRcdFx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMubm9faWQpIHtcblx0XHRcdFx0XHR0bXAgPSB0aGlzLl9kZWxldGVfaWRzKHRtcCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0bXA7XG5cdFx0fTtcblx0XHR0aGlzLl9kZWxldGVfaWRzID0gZnVuY3Rpb24gKHRtcCkge1xuXHRcdFx0aWYoJC5pc0FycmF5KHRtcCkpIHtcblx0XHRcdFx0Zm9yKHZhciBpID0gMCwgaiA9IHRtcC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHR0bXBbaV0gPSB0aGlzLl9kZWxldGVfaWRzKHRtcFtpXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdGRlbGV0ZSB0bXAuaWQ7XG5cdFx0XHRpZih0bXAubGlfYXR0ciAmJiB0bXAubGlfYXR0ci5pZCkge1xuXHRcdFx0XHRkZWxldGUgdG1wLmxpX2F0dHIuaWQ7XG5cdFx0XHR9XG5cdFx0XHRpZih0bXAuYV9hdHRyICYmIHRtcC5hX2F0dHIuaWQpIHtcblx0XHRcdFx0ZGVsZXRlIHRtcC5hX2F0dHIuaWQ7XG5cdFx0XHR9XG5cdFx0XHRpZih0bXAuY2hpbGRyZW4gJiYgJC5pc0FycmF5KHRtcC5jaGlsZHJlbikpIHtcblx0XHRcdFx0dG1wLmNoaWxkcmVuID0gdGhpcy5fZGVsZXRlX2lkcyh0bXAuY2hpbGRyZW4pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRtcDtcblx0XHR9O1xuXHRcdHRoaXMuY2hlY2sgPSBmdW5jdGlvbiAoY2hrLCBvYmosIHBhciwgcG9zLCBtb3JlKSB7XG5cdFx0XHRpZihwYXJlbnQuY2hlY2suY2FsbCh0aGlzLCBjaGssIG9iaiwgcGFyLCBwb3MsIG1vcmUpID09PSBmYWxzZSkgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRcdG9iaiA9IG9iaiAmJiBvYmouaWQgPyBvYmogOiB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRwYXIgPSBwYXIgJiYgcGFyLmlkID8gcGFyIDogdGhpcy5nZXRfbm9kZShwYXIpO1xuXHRcdFx0dmFyIG0gPSBvYmogJiYgb2JqLmlkID8gKG1vcmUgJiYgbW9yZS5vcmlnaW4gPyBtb3JlLm9yaWdpbiA6ICQuanN0cmVlLnJlZmVyZW5jZShvYmouaWQpKSA6IG51bGwsIHRtcCwgZCwgaSwgajtcblx0XHRcdG0gPSBtICYmIG0uX21vZGVsICYmIG0uX21vZGVsLmRhdGEgPyBtLl9tb2RlbC5kYXRhIDogbnVsbDtcblx0XHRcdHN3aXRjaChjaGspIHtcblx0XHRcdFx0Y2FzZSBcImNyZWF0ZV9ub2RlXCI6XG5cdFx0XHRcdGNhc2UgXCJtb3ZlX25vZGVcIjpcblx0XHRcdFx0Y2FzZSBcImNvcHlfbm9kZVwiOlxuXHRcdFx0XHRcdGlmKGNoayAhPT0gJ21vdmVfbm9kZScgfHwgJC5pbkFycmF5KG9iai5pZCwgcGFyLmNoaWxkcmVuKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRoaXMuZ2V0X3J1bGVzKHBhcik7XG5cdFx0XHRcdFx0XHRpZih0bXAubWF4X2NoaWxkcmVuICE9PSB1bmRlZmluZWQgJiYgdG1wLm1heF9jaGlsZHJlbiAhPT0gLTEgJiYgdG1wLm1heF9jaGlsZHJlbiA9PT0gcGFyLmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciA9IHsgJ2Vycm9yJyA6ICdjaGVjaycsICdwbHVnaW4nIDogJ3R5cGVzJywgJ2lkJyA6ICd0eXBlc18wMScsICdyZWFzb24nIDogJ21heF9jaGlsZHJlbiBwcmV2ZW50cyBmdW5jdGlvbjogJyArIGNoaywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnY2hrJyA6IGNoaywgJ3BvcycgOiBwb3MsICdvYmonIDogb2JqICYmIG9iai5pZCA/IG9iai5pZCA6IGZhbHNlLCAncGFyJyA6IHBhciAmJiBwYXIuaWQgPyBwYXIuaWQgOiBmYWxzZSB9KSB9O1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZih0bXAudmFsaWRfY2hpbGRyZW4gIT09IHVuZGVmaW5lZCAmJiB0bXAudmFsaWRfY2hpbGRyZW4gIT09IC0xICYmICQuaW5BcnJheSgob2JqLnR5cGUgfHwgJ2RlZmF1bHQnKSwgdG1wLnZhbGlkX2NoaWxkcmVuKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnY2hlY2snLCAncGx1Z2luJyA6ICd0eXBlcycsICdpZCcgOiAndHlwZXNfMDInLCAncmVhc29uJyA6ICd2YWxpZF9jaGlsZHJlbiBwcmV2ZW50cyBmdW5jdGlvbjogJyArIGNoaywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnY2hrJyA6IGNoaywgJ3BvcycgOiBwb3MsICdvYmonIDogb2JqICYmIG9iai5pZCA/IG9iai5pZCA6IGZhbHNlLCAncGFyJyA6IHBhciAmJiBwYXIuaWQgPyBwYXIuaWQgOiBmYWxzZSB9KSB9O1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihtICYmIG9iai5jaGlsZHJlbl9kICYmIG9iai5wYXJlbnRzKSB7XG5cdFx0XHRcdFx0XHRcdGQgPSAwO1xuXHRcdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBvYmouY2hpbGRyZW5fZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRkID0gTWF0aC5tYXgoZCwgbVtvYmouY2hpbGRyZW5fZFtpXV0ucGFyZW50cy5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGQgPSBkIC0gb2JqLnBhcmVudHMubGVuZ3RoICsgMTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKGQgPD0gMCB8fCBkID09PSB1bmRlZmluZWQpIHsgZCA9IDE7IH1cblx0XHRcdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRcdFx0aWYodG1wLm1heF9kZXB0aCAhPT0gdW5kZWZpbmVkICYmIHRtcC5tYXhfZGVwdGggIT09IC0xICYmIHRtcC5tYXhfZGVwdGggPCBkKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnY2hlY2snLCAncGx1Z2luJyA6ICd0eXBlcycsICdpZCcgOiAndHlwZXNfMDMnLCAncmVhc29uJyA6ICdtYXhfZGVwdGggcHJldmVudHMgZnVuY3Rpb246ICcgKyBjaGssICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2NoaycgOiBjaGssICdwb3MnIDogcG9zLCAnb2JqJyA6IG9iaiAmJiBvYmouaWQgPyBvYmouaWQgOiBmYWxzZSwgJ3BhcicgOiBwYXIgJiYgcGFyLmlkID8gcGFyLmlkIDogZmFsc2UgfSkgfTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cGFyID0gdGhpcy5nZXRfbm9kZShwYXIucGFyZW50KTtcblx0XHRcdFx0XHRcdFx0dG1wID0gdGhpcy5nZXRfcnVsZXMocGFyKTtcblx0XHRcdFx0XHRcdFx0ZCsrO1xuXHRcdFx0XHRcdFx0fSB3aGlsZShwYXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogdXNlZCB0byByZXRyaWV2ZSB0aGUgdHlwZSBzZXR0aW5ncyBvYmplY3QgZm9yIGEgbm9kZVxuXHRcdCAqIEBuYW1lIGdldF9ydWxlcyhvYmopXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGZpbmQgdGhlIHJ1bGVzIGZvclxuXHRcdCAqIEByZXR1cm4ge09iamVjdH1cblx0XHQgKiBAcGx1Z2luIHR5cGVzXG5cdFx0ICovXG5cdFx0dGhpcy5nZXRfcnVsZXMgPSBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighb2JqKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0dmFyIHRtcCA9IHRoaXMuZ2V0X3R5cGUob2JqLCB0cnVlKTtcblx0XHRcdGlmKHRtcC5tYXhfZGVwdGggPT09IHVuZGVmaW5lZCkgeyB0bXAubWF4X2RlcHRoID0gLTE7IH1cblx0XHRcdGlmKHRtcC5tYXhfY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkgeyB0bXAubWF4X2NoaWxkcmVuID0gLTE7IH1cblx0XHRcdGlmKHRtcC52YWxpZF9jaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSB7IHRtcC52YWxpZF9jaGlsZHJlbiA9IC0xOyB9XG5cdFx0XHRyZXR1cm4gdG1wO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0ICogdXNlZCB0byByZXRyaWV2ZSB0aGUgdHlwZSBzdHJpbmcgb3Igc2V0dGluZ3Mgb2JqZWN0IGZvciBhIG5vZGVcblx0XHQgKiBAbmFtZSBnZXRfdHlwZShvYmogWywgcnVsZXNdKVxuXHRcdCAqIEBwYXJhbSB7bWl4ZWR9IG9iaiB0aGUgbm9kZSB0byBmaW5kIHRoZSBydWxlcyBmb3Jcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJ1bGVzIGlmIHNldCB0byBgdHJ1ZWAgaW5zdGVhZCBvZiBhIHN0cmluZyB0aGUgc2V0dGluZ3Mgb2JqZWN0IHdpbGwgYmUgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd8T2JqZWN0fVxuXHRcdCAqIEBwbHVnaW4gdHlwZXNcblx0XHQgKi9cblx0XHR0aGlzLmdldF90eXBlID0gZnVuY3Rpb24gKG9iaiwgcnVsZXMpIHtcblx0XHRcdG9iaiA9IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdHJldHVybiAoIW9iaikgPyBmYWxzZSA6ICggcnVsZXMgPyAkLmV4dGVuZCh7ICd0eXBlJyA6IG9iai50eXBlIH0sIHRoaXMuc2V0dGluZ3MudHlwZXNbb2JqLnR5cGVdKSA6IG9iai50eXBlKTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCAqIHVzZWQgdG8gY2hhbmdlIGEgbm9kZSdzIHR5cGVcblx0XHQgKiBAbmFtZSBzZXRfdHlwZShvYmosIHR5cGUpXG5cdFx0ICogQHBhcmFtIHttaXhlZH0gb2JqIHRoZSBub2RlIHRvIGNoYW5nZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSBuZXcgdHlwZVxuXHRcdCAqIEBwbHVnaW4gdHlwZXNcblx0XHQgKi9cblx0XHR0aGlzLnNldF90eXBlID0gZnVuY3Rpb24gKG9iaiwgdHlwZSkge1xuXHRcdFx0dmFyIG0gPSB0aGlzLl9tb2RlbC5kYXRhLCB0LCB0MSwgdDIsIG9sZF90eXBlLCBvbGRfaWNvbiwgaywgZCwgYTtcblx0XHRcdGlmKCQuaXNBcnJheShvYmopKSB7XG5cdFx0XHRcdG9iaiA9IG9iai5zbGljZSgpO1xuXHRcdFx0XHRmb3IodDEgPSAwLCB0MiA9IG9iai5sZW5ndGg7IHQxIDwgdDI7IHQxKyspIHtcblx0XHRcdFx0XHR0aGlzLnNldF90eXBlKG9ialt0MV0sIHR5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0dCA9IHRoaXMuc2V0dGluZ3MudHlwZXM7XG5cdFx0XHRvYmogPSB0aGlzLmdldF9ub2RlKG9iaik7XG5cdFx0XHRpZighdFt0eXBlXSB8fCAhb2JqKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0ZCA9IHRoaXMuZ2V0X25vZGUob2JqLCB0cnVlKTtcblx0XHRcdGlmIChkICYmIGQubGVuZ3RoKSB7XG5cdFx0XHRcdGEgPSBkLmNoaWxkcmVuKCcuanN0cmVlLWFuY2hvcicpO1xuXHRcdFx0fVxuXHRcdFx0b2xkX3R5cGUgPSBvYmoudHlwZTtcblx0XHRcdG9sZF9pY29uID0gdGhpcy5nZXRfaWNvbihvYmopO1xuXHRcdFx0b2JqLnR5cGUgPSB0eXBlO1xuXHRcdFx0aWYob2xkX2ljb24gPT09IHRydWUgfHwgIXRbb2xkX3R5cGVdIHx8ICh0W29sZF90eXBlXS5pY29uICE9PSB1bmRlZmluZWQgJiYgb2xkX2ljb24gPT09IHRbb2xkX3R5cGVdLmljb24pKSB7XG5cdFx0XHRcdHRoaXMuc2V0X2ljb24ob2JqLCB0W3R5cGVdLmljb24gIT09IHVuZGVmaW5lZCA/IHRbdHlwZV0uaWNvbiA6IHRydWUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyByZW1vdmUgb2xkIHR5cGUgcHJvcHNcblx0XHRcdGlmKHRbb2xkX3R5cGVdICYmIHRbb2xkX3R5cGVdLmxpX2F0dHIgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdFtvbGRfdHlwZV0ubGlfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yIChrIGluIHRbb2xkX3R5cGVdLmxpX2F0dHIpIHtcblx0XHRcdFx0XHRpZiAodFtvbGRfdHlwZV0ubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShrKSkge1xuXHRcdFx0XHRcdFx0aWYgKGsgPT09ICdpZCcpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChrID09PSAnY2xhc3MnKSB7XG5cdFx0XHRcdFx0XHRcdG1bb2JqLmlkXS5saV9hdHRyWydjbGFzcyddID0gKG1bb2JqLmlkXS5saV9hdHRyWydjbGFzcyddIHx8ICcnKS5yZXBsYWNlKHRbb2xkX3R5cGVdLmxpX2F0dHJba10sICcnKTtcblx0XHRcdFx0XHRcdFx0aWYgKGQpIHsgZC5yZW1vdmVDbGFzcyh0W29sZF90eXBlXS5saV9hdHRyW2tdKTsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAobVtvYmouaWRdLmxpX2F0dHJba10gPT09IHRbb2xkX3R5cGVdLmxpX2F0dHJba10pIHtcblx0XHRcdFx0XHRcdFx0bVtvYmouaWRdLmxpX2F0dHJba10gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRpZiAoZCkgeyBkLnJlbW92ZUF0dHIoayk7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKHRbb2xkX3R5cGVdICYmIHRbb2xkX3R5cGVdLmFfYXR0ciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0W29sZF90eXBlXS5hX2F0dHIgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAoayBpbiB0W29sZF90eXBlXS5hX2F0dHIpIHtcblx0XHRcdFx0XHRpZiAodFtvbGRfdHlwZV0uYV9hdHRyLmhhc093blByb3BlcnR5KGspKSB7XG5cdFx0XHRcdFx0XHRpZiAoayA9PT0gJ2lkJykge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKGsgPT09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRcdFx0bVtvYmouaWRdLmFfYXR0clsnY2xhc3MnXSA9IChtW29iai5pZF0uYV9hdHRyWydjbGFzcyddIHx8ICcnKS5yZXBsYWNlKHRbb2xkX3R5cGVdLmFfYXR0cltrXSwgJycpO1xuXHRcdFx0XHRcdFx0XHRpZiAoYSkgeyBhLnJlbW92ZUNsYXNzKHRbb2xkX3R5cGVdLmFfYXR0cltrXSk7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKG1bb2JqLmlkXS5hX2F0dHJba10gPT09IHRbb2xkX3R5cGVdLmFfYXR0cltrXSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoayA9PT0gJ2hyZWYnKSB7XG5cdFx0XHRcdFx0XHRcdFx0bVtvYmouaWRdLmFfYXR0cltrXSA9ICcjJztcblx0XHRcdFx0XHRcdFx0XHRpZiAoYSkgeyBhLmF0dHIoJ2hyZWYnLCAnIycpOyB9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1bb2JqLmlkXS5hX2F0dHJba107XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGEpIHsgYS5yZW1vdmVBdHRyKGspOyB9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYWRkIG5ldyBwcm9wc1xuXHRcdFx0aWYodFt0eXBlXS5saV9hdHRyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRbdHlwZV0ubGlfYXR0ciA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yIChrIGluIHRbdHlwZV0ubGlfYXR0cikge1xuXHRcdFx0XHRcdGlmICh0W3R5cGVdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaykpIHtcblx0XHRcdFx0XHRcdGlmIChrID09PSAnaWQnKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAobVtvYmouaWRdLmxpX2F0dHJba10gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRtW29iai5pZF0ubGlfYXR0cltrXSA9IHRbdHlwZV0ubGlfYXR0cltrXTtcblx0XHRcdFx0XHRcdFx0aWYgKGQpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoayA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZC5hZGRDbGFzcyh0W3R5cGVdLmxpX2F0dHJba10pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGQuYXR0cihrLCB0W3R5cGVdLmxpX2F0dHJba10pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoayA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0XHRtW29iai5pZF0ubGlfYXR0clsnY2xhc3MnXSA9IHRbdHlwZV0ubGlfYXR0cltrXSArICcgJyArIG1bb2JqLmlkXS5saV9hdHRyWydjbGFzcyddO1xuXHRcdFx0XHRcdFx0XHRpZiAoZCkgeyBkLmFkZENsYXNzKHRbdHlwZV0ubGlfYXR0cltrXSk7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKHRbdHlwZV0uYV9hdHRyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRbdHlwZV0uYV9hdHRyID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKGsgaW4gdFt0eXBlXS5hX2F0dHIpIHtcblx0XHRcdFx0XHRpZiAodFt0eXBlXS5hX2F0dHIuaGFzT3duUHJvcGVydHkoaykpIHtcblx0XHRcdFx0XHRcdGlmIChrID09PSAnaWQnKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAobVtvYmouaWRdLmFfYXR0cltrXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdG1bb2JqLmlkXS5hX2F0dHJba10gPSB0W3R5cGVdLmFfYXR0cltrXTtcblx0XHRcdFx0XHRcdFx0aWYgKGEpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoayA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0YS5hZGRDbGFzcyh0W3R5cGVdLmFfYXR0cltrXSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0YS5hdHRyKGssIHRbdHlwZV0uYV9hdHRyW2tdKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKGsgPT09ICdocmVmJyAmJiBtW29iai5pZF0uYV9hdHRyW2tdID09PSAnIycpIHtcblx0XHRcdFx0XHRcdFx0bVtvYmouaWRdLmFfYXR0clsnaHJlZiddID0gdFt0eXBlXS5hX2F0dHJbJ2hyZWYnXTtcblx0XHRcdFx0XHRcdFx0aWYgKGEpIHsgYS5hdHRyKCdocmVmJywgdFt0eXBlXS5hX2F0dHJbJ2hyZWYnXSk7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKGsgPT09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRcdFx0bVtvYmouaWRdLmFfYXR0clsnY2xhc3MnXSA9IHRbdHlwZV0uYV9hdHRyWydjbGFzcyddICsgJyAnICsgbVtvYmouaWRdLmFfYXR0clsnY2xhc3MnXTtcblx0XHRcdFx0XHRcdFx0aWYgKGEpIHsgYS5hZGRDbGFzcyh0W3R5cGVdLmFfYXR0cltrXSk7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblx0fTtcblx0Ly8gaW5jbHVkZSB0aGUgdHlwZXMgcGx1Z2luIGJ5IGRlZmF1bHRcblx0Ly8gJC5qc3RyZWUuZGVmYXVsdHMucGx1Z2lucy5wdXNoKFwidHlwZXNcIik7XG5cblxuLyoqXG4gKiAjIyMgVW5pcXVlIHBsdWdpblxuICpcbiAqIEVuZm9yY2VzIHRoYXQgbm8gbm9kZXMgd2l0aCB0aGUgc2FtZSBuYW1lIGNhbiBjb2V4aXN0IGFzIHNpYmxpbmdzLlxuICovXG5cblx0LyoqXG5cdCAqIHN0b3JlcyBhbGwgZGVmYXVsdHMgZm9yIHRoZSB1bmlxdWUgcGx1Z2luXG5cdCAqIEBuYW1lICQuanN0cmVlLmRlZmF1bHRzLnVuaXF1ZVxuXHQgKiBAcGx1Z2luIHVuaXF1ZVxuXHQgKi9cblx0JC5qc3RyZWUuZGVmYXVsdHMudW5pcXVlID0ge1xuXHRcdC8qKlxuXHRcdCAqIEluZGljYXRlcyBpZiB0aGUgY29tcGFyaXNvbiBzaG91bGQgYmUgY2FzZSBzZW5zaXRpdmUuIERlZmF1bHQgaXMgYGZhbHNlYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy51bmlxdWUuY2FzZV9zZW5zaXRpdmVcblx0XHQgKiBAcGx1Z2luIHVuaXF1ZVxuXHRcdCAqL1xuXHRcdGNhc2Vfc2Vuc2l0aXZlIDogZmFsc2UsXG5cdFx0LyoqXG5cdFx0ICogQSBjYWxsYmFjayBleGVjdXRlZCBpbiB0aGUgaW5zdGFuY2UncyBzY29wZSB3aGVuIGEgbmV3IG5vZGUgaXMgY3JlYXRlZCBhbmQgdGhlIG5hbWUgaXMgYWxyZWFkeSB0YWtlbiwgdGhlIHR3byBhcmd1bWVudHMgYXJlIHRoZSBjb25mbGljdGluZyBuYW1lIGFuZCB0aGUgY291bnRlci4gVGhlIGRlZmF1bHQgd2lsbCBwcm9kdWNlIHJlc3VsdHMgbGlrZSBgTmV3IG5vZGUgKDIpYC5cblx0XHQgKiBAbmFtZSAkLmpzdHJlZS5kZWZhdWx0cy51bmlxdWUuZHVwbGljYXRlXG5cdFx0ICogQHBsdWdpbiB1bmlxdWVcblx0XHQgKi9cblx0XHRkdXBsaWNhdGUgOiBmdW5jdGlvbiAobmFtZSwgY291bnRlcikge1xuXHRcdFx0cmV0dXJuIG5hbWUgKyAnICgnICsgY291bnRlciArICcpJztcblx0XHR9XG5cdH07XG5cblx0JC5qc3RyZWUucGx1Z2lucy51bmlxdWUgPSBmdW5jdGlvbiAob3B0aW9ucywgcGFyZW50KSB7XG5cdFx0dGhpcy5jaGVjayA9IGZ1bmN0aW9uIChjaGssIG9iaiwgcGFyLCBwb3MsIG1vcmUpIHtcblx0XHRcdGlmKHBhcmVudC5jaGVjay5jYWxsKHRoaXMsIGNoaywgb2JqLCBwYXIsIHBvcywgbW9yZSkgPT09IGZhbHNlKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0b2JqID0gb2JqICYmIG9iai5pZCA/IG9iaiA6IHRoaXMuZ2V0X25vZGUob2JqKTtcblx0XHRcdHBhciA9IHBhciAmJiBwYXIuaWQgPyBwYXIgOiB0aGlzLmdldF9ub2RlKHBhcik7XG5cdFx0XHRpZighcGFyIHx8ICFwYXIuY2hpbGRyZW4pIHsgcmV0dXJuIHRydWU7IH1cblx0XHRcdHZhciBuID0gY2hrID09PSBcInJlbmFtZV9ub2RlXCIgPyBwb3MgOiBvYmoudGV4dCxcblx0XHRcdFx0YyA9IFtdLFxuXHRcdFx0XHRzID0gdGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUsXG5cdFx0XHRcdG0gPSB0aGlzLl9tb2RlbC5kYXRhLCBpLCBqO1xuXHRcdFx0Zm9yKGkgPSAwLCBqID0gcGFyLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRjLnB1c2gocyA/IG1bcGFyLmNoaWxkcmVuW2ldXS50ZXh0IDogbVtwYXIuY2hpbGRyZW5baV1dLnRleHQudG9Mb3dlckNhc2UoKSk7XG5cdFx0XHR9XG5cdFx0XHRpZighcykgeyBuID0gbi50b0xvd2VyQ2FzZSgpOyB9XG5cdFx0XHRzd2l0Y2goY2hrKSB7XG5cdFx0XHRcdGNhc2UgXCJkZWxldGVfbm9kZVwiOlxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRjYXNlIFwicmVuYW1lX25vZGVcIjpcblx0XHRcdFx0XHRpID0gKCQuaW5BcnJheShuLCBjKSA9PT0gLTEgfHwgKG9iai50ZXh0ICYmIG9iai50ZXh0WyBzID8gJ3RvU3RyaW5nJyA6ICd0b0xvd2VyQ2FzZSddKCkgPT09IG4pKTtcblx0XHRcdFx0XHRpZighaSkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnY2hlY2snLCAncGx1Z2luJyA6ICd1bmlxdWUnLCAnaWQnIDogJ3VuaXF1ZV8wMScsICdyZWFzb24nIDogJ0NoaWxkIHdpdGggbmFtZSAnICsgbiArICcgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6ICcgKyBjaGssICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2NoaycgOiBjaGssICdwb3MnIDogcG9zLCAnb2JqJyA6IG9iaiAmJiBvYmouaWQgPyBvYmouaWQgOiBmYWxzZSwgJ3BhcicgOiBwYXIgJiYgcGFyLmlkID8gcGFyLmlkIDogZmFsc2UgfSkgfTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHRcdGNhc2UgXCJjcmVhdGVfbm9kZVwiOlxuXHRcdFx0XHRcdGkgPSAoJC5pbkFycmF5KG4sIGMpID09PSAtMSk7XG5cdFx0XHRcdFx0aWYoIWkpIHtcblx0XHRcdFx0XHRcdHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yID0geyAnZXJyb3InIDogJ2NoZWNrJywgJ3BsdWdpbicgOiAndW5pcXVlJywgJ2lkJyA6ICd1bmlxdWVfMDQnLCAncmVhc29uJyA6ICdDaGlsZCB3aXRoIG5hbWUgJyArIG4gKyAnIGFscmVhZHkgZXhpc3RzLiBQcmV2ZW50aW5nOiAnICsgY2hrLCAnZGF0YScgOiBKU09OLnN0cmluZ2lmeSh7ICdjaGsnIDogY2hrLCAncG9zJyA6IHBvcywgJ29iaicgOiBvYmogJiYgb2JqLmlkID8gb2JqLmlkIDogZmFsc2UsICdwYXInIDogcGFyICYmIHBhci5pZCA/IHBhci5pZCA6IGZhbHNlIH0pIH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0XHRjYXNlIFwiY29weV9ub2RlXCI6XG5cdFx0XHRcdFx0aSA9ICgkLmluQXJyYXkobiwgYykgPT09IC0xKTtcblx0XHRcdFx0XHRpZighaSkge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IgPSB7ICdlcnJvcicgOiAnY2hlY2snLCAncGx1Z2luJyA6ICd1bmlxdWUnLCAnaWQnIDogJ3VuaXF1ZV8wMicsICdyZWFzb24nIDogJ0NoaWxkIHdpdGggbmFtZSAnICsgbiArICcgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6ICcgKyBjaGssICdkYXRhJyA6IEpTT04uc3RyaW5naWZ5KHsgJ2NoaycgOiBjaGssICdwb3MnIDogcG9zLCAnb2JqJyA6IG9iaiAmJiBvYmouaWQgPyBvYmouaWQgOiBmYWxzZSwgJ3BhcicgOiBwYXIgJiYgcGFyLmlkID8gcGFyLmlkIDogZmFsc2UgfSkgfTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHRcdGNhc2UgXCJtb3ZlX25vZGVcIjpcblx0XHRcdFx0XHRpID0gKCAob2JqLnBhcmVudCA9PT0gcGFyLmlkICYmICghbW9yZSB8fCAhbW9yZS5pc19tdWx0aSkpIHx8ICQuaW5BcnJheShuLCBjKSA9PT0gLTEpO1xuXHRcdFx0XHRcdGlmKCFpKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciA9IHsgJ2Vycm9yJyA6ICdjaGVjaycsICdwbHVnaW4nIDogJ3VuaXF1ZScsICdpZCcgOiAndW5pcXVlXzAzJywgJ3JlYXNvbicgOiAnQ2hpbGQgd2l0aCBuYW1lICcgKyBuICsgJyBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogJyArIGNoaywgJ2RhdGEnIDogSlNPTi5zdHJpbmdpZnkoeyAnY2hrJyA6IGNoaywgJ3BvcycgOiBwb3MsICdvYmonIDogb2JqICYmIG9iai5pZCA/IG9iai5pZCA6IGZhbHNlLCAncGFyJyA6IHBhciAmJiBwYXIuaWQgPyBwYXIuaWQgOiBmYWxzZSB9KSB9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH07XG5cdFx0dGhpcy5jcmVhdGVfbm9kZSA9IGZ1bmN0aW9uIChwYXIsIG5vZGUsIHBvcywgY2FsbGJhY2ssIGlzX2xvYWRlZCkge1xuXHRcdFx0aWYoIW5vZGUgfHwgbm9kZS50ZXh0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYocGFyID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cGFyID0gJC5qc3RyZWUucm9vdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRwYXIgPSB0aGlzLmdldF9ub2RlKHBhcik7XG5cdFx0XHRcdGlmKCFwYXIpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGFyZW50LmNyZWF0ZV9ub2RlLmNhbGwodGhpcywgcGFyLCBub2RlLCBwb3MsIGNhbGxiYWNrLCBpc19sb2FkZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBvcyA9IHBvcyA9PT0gdW5kZWZpbmVkID8gXCJsYXN0XCIgOiBwb3M7XG5cdFx0XHRcdGlmKCFwb3MudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pICYmICFpc19sb2FkZWQgJiYgIXRoaXMuaXNfbG9hZGVkKHBhcikpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGFyZW50LmNyZWF0ZV9ub2RlLmNhbGwodGhpcywgcGFyLCBub2RlLCBwb3MsIGNhbGxiYWNrLCBpc19sb2FkZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCFub2RlKSB7IG5vZGUgPSB7fTsgfVxuXHRcdFx0XHR2YXIgdG1wLCBuLCBkcGMsIGksIGosIG0gPSB0aGlzLl9tb2RlbC5kYXRhLCBzID0gdGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUsIGNiID0gdGhpcy5zZXR0aW5ncy51bmlxdWUuZHVwbGljYXRlO1xuXHRcdFx0XHRuID0gdG1wID0gdGhpcy5nZXRfc3RyaW5nKCdOZXcgbm9kZScpO1xuXHRcdFx0XHRkcGMgPSBbXTtcblx0XHRcdFx0Zm9yKGkgPSAwLCBqID0gcGFyLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdGRwYy5wdXNoKHMgPyBtW3Bhci5jaGlsZHJlbltpXV0udGV4dCA6IG1bcGFyLmNoaWxkcmVuW2ldXS50ZXh0LnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGkgPSAxO1xuXHRcdFx0XHR3aGlsZSgkLmluQXJyYXkocyA/IG4gOiBuLnRvTG93ZXJDYXNlKCksIGRwYykgIT09IC0xKSB7XG5cdFx0XHRcdFx0biA9IGNiLmNhbGwodGhpcywgdG1wLCAoKytpKSkudG9TdHJpbmcoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRub2RlLnRleHQgPSBuO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHBhcmVudC5jcmVhdGVfbm9kZS5jYWxsKHRoaXMsIHBhciwgbm9kZSwgcG9zLCBjYWxsYmFjaywgaXNfbG9hZGVkKTtcblx0XHR9O1xuXHR9O1xuXG5cdC8vIGluY2x1ZGUgdGhlIHVuaXF1ZSBwbHVnaW4gYnkgZGVmYXVsdFxuXHQvLyAkLmpzdHJlZS5kZWZhdWx0cy5wbHVnaW5zLnB1c2goXCJ1bmlxdWVcIik7XG5cblxuLyoqXG4gKiAjIyMgV2hvbGVyb3cgcGx1Z2luXG4gKlxuICogTWFrZXMgZWFjaCBub2RlIGFwcGVhciBibG9jayBsZXZlbC4gTWFraW5nIHNlbGVjdGlvbiBlYXNpZXIuIE1heSBjYXVzZSBzbG93IGRvd24gZm9yIGxhcmdlIHRyZWVzIGluIG9sZCBicm93c2Vycy5cbiAqL1xuXG5cdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcblx0ZGl2LnNldEF0dHJpYnV0ZSgndW5zZWxlY3RhYmxlJywnb24nKTtcblx0ZGl2LnNldEF0dHJpYnV0ZSgncm9sZScsJ3ByZXNlbnRhdGlvbicpO1xuXHRkaXYuY2xhc3NOYW1lID0gJ2pzdHJlZS13aG9sZXJvdyc7XG5cdGRpdi5pbm5lckhUTUwgPSAnJiMxNjA7Jztcblx0JC5qc3RyZWUucGx1Z2lucy53aG9sZXJvdyA9IGZ1bmN0aW9uIChvcHRpb25zLCBwYXJlbnQpIHtcblx0XHR0aGlzLmJpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRwYXJlbnQuYmluZC5jYWxsKHRoaXMpO1xuXG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0Lm9uKCdyZWFkeS5qc3RyZWUgc2V0X3N0YXRlLmpzdHJlZScsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhpcy5oaWRlX2RvdHMoKTtcblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0Lm9uKFwiaW5pdC5qc3RyZWUgbG9hZGluZy5qc3RyZWUgcmVhZHkuanN0cmVlXCIsICQucHJveHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly9kaXYuc3R5bGUuaGVpZ2h0ID0gdGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCArICdweCc7XG5cdFx0XHRcdFx0XHR0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcygnanN0cmVlLXdob2xlcm93LXVsJyk7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcImRlc2VsZWN0X2FsbC5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoJy5qc3RyZWUtd2hvbGVyb3ctY2xpY2tlZCcpLnJlbW92ZUNsYXNzKCdqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZCcpO1xuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oXCJjaGFuZ2VkLmpzdHJlZVwiLCAkLnByb3h5KGZ1bmN0aW9uIChlLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCgnLmpzdHJlZS13aG9sZXJvdy1jbGlja2VkJykucmVtb3ZlQ2xhc3MoJ2pzdHJlZS13aG9sZXJvdy1jbGlja2VkJyk7XG5cdFx0XHRcdFx0XHR2YXIgdG1wID0gZmFsc2UsIGksIGo7XG5cdFx0XHRcdFx0XHRmb3IoaSA9IDAsIGogPSBkYXRhLnNlbGVjdGVkLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHRcdFx0XHRcdFx0XHR0bXAgPSB0aGlzLmdldF9ub2RlKGRhdGEuc2VsZWN0ZWRbaV0sIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRpZih0bXAgJiYgdG1wLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdHRtcC5jaGlsZHJlbignLmpzdHJlZS13aG9sZXJvdycpLmFkZENsYXNzKCdqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZCcpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcIm9wZW5fbm9kZS5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0dGhpcy5nZXRfbm9kZShkYXRhLm5vZGUsIHRydWUpLmZpbmQoJy5qc3RyZWUtY2xpY2tlZCcpLnBhcmVudCgpLmNoaWxkcmVuKCcuanN0cmVlLXdob2xlcm93JykuYWRkQ2xhc3MoJ2pzdHJlZS13aG9sZXJvdy1jbGlja2VkJyk7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcImhvdmVyX25vZGUuanN0cmVlIGRlaG92ZXJfbm9kZS5qc3RyZWVcIiwgJC5wcm94eShmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0XHRcdFx0aWYoZS50eXBlID09PSBcImhvdmVyX25vZGVcIiAmJiB0aGlzLmlzX2Rpc2FibGVkKGRhdGEubm9kZSkpIHsgcmV0dXJuOyB9XG5cdFx0XHRcdFx0XHR0aGlzLmdldF9ub2RlKGRhdGEubm9kZSwgdHJ1ZSkuY2hpbGRyZW4oJy5qc3RyZWUtd2hvbGVyb3cnKVtlLnR5cGUgPT09IFwiaG92ZXJfbm9kZVwiP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKCdqc3RyZWUtd2hvbGVyb3ctaG92ZXJlZCcpO1xuXHRcdFx0XHRcdH0sIHRoaXMpKVxuXHRcdFx0XHQub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIiwgXCIuanN0cmVlLXdob2xlcm93XCIsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLl9kYXRhLmNvbnRleHRtZW51KSB7XG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0dmFyIHRtcCA9ICQuRXZlbnQoJ2NvbnRleHRtZW51JywgeyBtZXRhS2V5IDogZS5tZXRhS2V5LCBjdHJsS2V5IDogZS5jdHJsS2V5LCBhbHRLZXkgOiBlLmFsdEtleSwgc2hpZnRLZXkgOiBlLnNoaWZ0S2V5LCBwYWdlWCA6IGUucGFnZVgsIHBhZ2VZIDogZS5wYWdlWSB9KTtcblx0XHRcdFx0XHRcdFx0JChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maXJzdCgpLnRyaWdnZXIodG1wKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0aGlzKSlcblx0XHRcdFx0LyohXG5cdFx0XHRcdC5vbihcIm1vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWVcIiwgXCIuanN0cmVlLXdob2xlcm93XCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRpZihlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG5cdFx0XHRcdFx0XHRcdHZhciBhID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTtcblx0XHRcdFx0XHRcdFx0ZS50YXJnZXQgPSBhWzBdO1xuXHRcdFx0XHRcdFx0XHRhLnRyaWdnZXIoZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0Ki9cblx0XHRcdFx0Lm9uKFwiY2xpY2suanN0cmVlXCIsIFwiLmpzdHJlZS13aG9sZXJvd1wiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdHZhciB0bXAgPSAkLkV2ZW50KCdjbGljaycsIHsgbWV0YUtleSA6IGUubWV0YUtleSwgY3RybEtleSA6IGUuY3RybEtleSwgYWx0S2V5IDogZS5hbHRLZXksIHNoaWZ0S2V5IDogZS5zaGlmdEtleSB9KTtcblx0XHRcdFx0XHRcdCQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKHRtcCkuZm9jdXMoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQub24oXCJkYmxjbGljay5qc3RyZWVcIiwgXCIuanN0cmVlLXdob2xlcm93XCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0dmFyIHRtcCA9ICQuRXZlbnQoJ2RibGNsaWNrJywgeyBtZXRhS2V5IDogZS5tZXRhS2V5LCBjdHJsS2V5IDogZS5jdHJsS2V5LCBhbHRLZXkgOiBlLmFsdEtleSwgc2hpZnRLZXkgOiBlLnNoaWZ0S2V5IH0pO1xuXHRcdFx0XHRcdFx0JChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maXJzdCgpLnRyaWdnZXIodG1wKS5mb2N1cygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdC5vbihcImNsaWNrLmpzdHJlZVwiLCBcIi5qc3RyZWUtbGVhZiA+IC5qc3RyZWUtb2NsXCIsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR2YXIgdG1wID0gJC5FdmVudCgnY2xpY2snLCB7IG1ldGFLZXkgOiBlLm1ldGFLZXksIGN0cmxLZXkgOiBlLmN0cmxLZXksIGFsdEtleSA6IGUuYWx0S2V5LCBzaGlmdEtleSA6IGUuc2hpZnRLZXkgfSk7XG5cdFx0XHRcdFx0XHQkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0bXApLmZvY3VzKCk7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcIm1vdXNlb3Zlci5qc3RyZWVcIiwgXCIuanN0cmVlLXdob2xlcm93LCAuanN0cmVlLWljb25cIiwgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGlmKCF0aGlzLmlzX2Rpc2FibGVkKGUuY3VycmVudFRhcmdldCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5ob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsIFwiLmpzdHJlZS1ub2RlXCIsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGVob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCk7XG5cdFx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdH07XG5cdFx0dGhpcy50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3Mud2hvbGVyb3cpIHtcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXdob2xlcm93XCIpLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0cGFyZW50LnRlYXJkb3duLmNhbGwodGhpcyk7XG5cdFx0fTtcblx0XHR0aGlzLnJlZHJhd19ub2RlID0gZnVuY3Rpb24ob2JqLCBkZWVwLCBjYWxsYmFjaywgZm9yY2VfcmVuZGVyKSB7XG5cdFx0XHRvYmogPSBwYXJlbnQucmVkcmF3X25vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdGlmKG9iaikge1xuXHRcdFx0XHR2YXIgdG1wID0gZGl2LmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdFx0Ly90bXAuc3R5bGUuaGVpZ2h0ID0gdGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCArICdweCc7XG5cdFx0XHRcdGlmKCQuaW5BcnJheShvYmouaWQsIHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCkgIT09IC0xKSB7IHRtcC5jbGFzc05hbWUgKz0gJyBqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZCc7IH1cblx0XHRcdFx0aWYodGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgJiYgdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQgPT09IG9iai5pZCkgeyB0bXAuY2xhc3NOYW1lICs9ICcganN0cmVlLXdob2xlcm93LWhvdmVyZWQnOyB9XG5cdFx0XHRcdG9iai5pbnNlcnRCZWZvcmUodG1wLCBvYmouY2hpbGROb2Rlc1swXSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH07XG5cdH07XG5cdC8vIGluY2x1ZGUgdGhlIHdob2xlcm93IHBsdWdpbiBieSBkZWZhdWx0XG5cdC8vICQuanN0cmVlLmRlZmF1bHRzLnBsdWdpbnMucHVzaChcIndob2xlcm93XCIpO1xuXHRpZihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQgJiYgT2JqZWN0ICYmIE9iamVjdC5jcmVhdGUpIHtcblx0XHR2YXIgcHJvdG8gPSBPYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSk7XG5cdFx0cHJvdG8uY3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGMgPSB7IGNvcmUgOiB7fSwgcGx1Z2lucyA6IFtdIH0sIGk7XG5cdFx0XHRmb3IoaSBpbiAkLmpzdHJlZS5wbHVnaW5zKSB7XG5cdFx0XHRcdGlmKCQuanN0cmVlLnBsdWdpbnMuaGFzT3duUHJvcGVydHkoaSkgJiYgdGhpcy5hdHRyaWJ1dGVzW2ldKSB7XG5cdFx0XHRcdFx0Yy5wbHVnaW5zLnB1c2goaSk7XG5cdFx0XHRcdFx0aWYodGhpcy5nZXRBdHRyaWJ1dGUoaSkgJiYgSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZShpKSkpIHtcblx0XHRcdFx0XHRcdGNbaV0gPSBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKGkpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvcihpIGluICQuanN0cmVlLmRlZmF1bHRzLmNvcmUpIHtcblx0XHRcdFx0aWYoJC5qc3RyZWUuZGVmYXVsdHMuY29yZS5oYXNPd25Qcm9wZXJ0eShpKSAmJiB0aGlzLmF0dHJpYnV0ZXNbaV0pIHtcblx0XHRcdFx0XHRjLmNvcmVbaV0gPSBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKGkpKSB8fCB0aGlzLmdldEF0dHJpYnV0ZShpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0JCh0aGlzKS5qc3RyZWUoYyk7XG5cdFx0fTtcblx0XHQvLyBwcm90by5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiAobmFtZSwgcHJldmlvdXMsIHZhbHVlKSB7IH07XG5cdFx0dHJ5IHtcblx0XHRcdGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudChcInZha2F0YS1qc3RyZWVcIiwgeyBwcm90b3R5cGU6IHByb3RvIH0pO1xuXHRcdH0gY2F0Y2goaWdub3JlKSB7IH1cblx0fVxuXG59KSk7IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLypcblx0UmFjdGl2ZS5qcyB2MC43LjNcblx0U2F0IEFwciAyNSAyMDE1IDEzOjUyOjM4IEdNVC0wNDAwIChFRFQpIC0gY29tbWl0IGRhNDBmODFjNjYwYmEyZjA5YzQ1YTA5YTljMjBmZGQzNGVlMzZkODBcblxuXHRodHRwOi8vcmFjdGl2ZWpzLm9yZ1xuXHRodHRwOi8vdHdpdHRlci5jb20vUmFjdGl2ZUpTXG5cblx0UmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICBnbG9iYWwuUmFjdGl2ZSA9IGZhY3RvcnkoKVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgVEVNUExBVEVfVkVSU0lPTiA9IDM7XG5cbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXG4gIFx0Ly8gcmVuZGVyIHBsYWNlbWVudDpcbiAgXHRlbDogdm9pZCAwLFxuICBcdGFwcGVuZDogZmFsc2UsXG5cbiAgXHQvLyB0ZW1wbGF0ZTpcbiAgXHR0ZW1wbGF0ZTogeyB2OiBURU1QTEFURV9WRVJTSU9OLCB0OiBbXSB9LFxuXG4gIFx0Ly8gcGFyc2U6ICAgICAvLyBUT0RPIHN0YXRpYyBkZWxpbWl0ZXJzP1xuICBcdHByZXNlcnZlV2hpdGVzcGFjZTogZmFsc2UsXG4gIFx0c2FuaXRpemU6IGZhbHNlLFxuICBcdHN0cmlwQ29tbWVudHM6IHRydWUsXG4gIFx0ZGVsaW1pdGVyczogW1wie3tcIiwgXCJ9fVwiXSxcbiAgXHR0cmlwbGVEZWxpbWl0ZXJzOiBbXCJ7e3tcIiwgXCJ9fX1cIl0sXG4gIFx0aW50ZXJwb2xhdGU6IGZhbHNlLFxuXG4gIFx0Ly8gZGF0YSAmIGJpbmRpbmc6XG4gIFx0ZGF0YToge30sXG4gIFx0Y29tcHV0ZWQ6IHt9LFxuICBcdG1hZ2ljOiBmYWxzZSxcbiAgXHRtb2RpZnlBcnJheXM6IHRydWUsXG4gIFx0YWRhcHQ6IFtdLFxuICBcdGlzb2xhdGVkOiBmYWxzZSxcbiAgXHR0d293YXk6IHRydWUsXG4gIFx0bGF6eTogZmFsc2UsXG5cbiAgXHQvLyB0cmFuc2l0aW9uczpcbiAgXHRub0ludHJvOiBmYWxzZSxcbiAgXHR0cmFuc2l0aW9uc0VuYWJsZWQ6IHRydWUsXG4gIFx0Y29tcGxldGU6IHZvaWQgMCxcblxuICBcdC8vIGNzczpcbiAgXHRjc3M6IG51bGwsXG4gIFx0bm9Dc3NUcmFuc2Zvcm06IGZhbHNlXG4gIH07XG5cbiAgdmFyIGNvbmZpZ19kZWZhdWx0cyA9IGRlZmF1bHRPcHRpb25zO1xuXG4gIC8vIFRoZXNlIGFyZSBhIHN1YnNldCBvZiB0aGUgZWFzaW5nIGVxdWF0aW9ucyBmb3VuZCBhdFxuICAvLyBodHRwczovL3Jhdy5naXRodWIuY29tL2RhbnJvL2Vhc2luZy1qcyAtIGxpY2Vuc2UgaW5mb1xuICAvLyBmb2xsb3dzOlxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIGVhc2luZy5qcyB2MC41LjRcbiAgLy8gR2VuZXJpYyBzZXQgb2YgZWFzaW5nIGZ1bmN0aW9ucyB3aXRoIEFNRCBzdXBwb3J0XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5yby9lYXNpbmctanNcbiAgLy8gVGhpcyBjb2RlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gIC8vIGh0dHA6Ly9kYW5yby5taXQtbGljZW5zZS5vcmcvXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEFsbCBmdW5jdGlvbnMgYWRhcHRlZCBmcm9tIFRob21hcyBGdWNocyAmIEplcmVteSBLYWhuXG4gIC8vIEVhc2luZyBFcXVhdGlvbnMgKGMpIDIwMDMgUm9iZXJ0IFBlbm5lciwgQlNEIGxpY2Vuc2VcbiAgLy8gaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9kYW5yby9lYXNpbmctanMvbWFzdGVyL0xJQ0VOU0VcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBJbiB0aGF0IGxpYnJhcnksIHRoZSBmdW5jdGlvbnMgbmFtZWQgZWFzZUluLCBlYXNlT3V0LCBhbmRcbiAgLy8gZWFzZUluT3V0IGJlbG93IGFyZSBuYW1lZCBlYXNlSW5DdWJpYywgZWFzZU91dEN1YmljLCBhbmRcbiAgLy8gKHlvdSBndWVzc2VkIGl0KSBlYXNlSW5PdXRDdWJpYy5cbiAgLy9cbiAgLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBlYXNpbmcgZnVuY3Rpb25zIHRvIHRoaXMgbGlzdCwgYW5kIHRoZXlcbiAgLy8gd2lsbCBiZSBnbG9iYWxseSBhdmFpbGFibGUuXG5cbiAgdmFyIHN0YXRpY19lYXNpbmcgPSB7XG4gIFx0bGluZWFyOiBmdW5jdGlvbiAocG9zKSB7XG4gIFx0XHRyZXR1cm4gcG9zO1xuICBcdH0sXG4gIFx0ZWFzZUluOiBmdW5jdGlvbiAocG9zKSB7XG4gIFx0XHRyZXR1cm4gTWF0aC5wb3cocG9zLCAzKTtcbiAgXHR9LFxuICBcdGVhc2VPdXQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgXHRcdHJldHVybiBNYXRoLnBvdyhwb3MgLSAxLCAzKSArIDE7XG4gIFx0fSxcbiAgXHRlYXNlSW5PdXQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgXHRcdGlmICgocG9zIC89IDAuNSkgPCAxKSB7XG4gIFx0XHRcdHJldHVybiAwLjUgKiBNYXRoLnBvdyhwb3MsIDMpO1xuICBcdFx0fVxuICBcdFx0cmV0dXJuIDAuNSAqIChNYXRoLnBvdyhwb3MgLSAyLCAzKSArIDIpO1xuICBcdH1cbiAgfTtcblxuICAvKmdsb2JhbCBjb25zb2xlLCBuYXZpZ2F0b3IgKi9cbiAgdmFyIGlzQ2xpZW50LCBpc0pzZG9tLCBoYXNDb25zb2xlLCBlbnZpcm9ubWVudF9fbWFnaWMsIG5hbWVzcGFjZXMsIHN2ZywgdmVuZG9ycztcblxuICBpc0NsaWVudCA9IHR5cGVvZiBkb2N1bWVudCA9PT0gXCJvYmplY3RcIjtcblxuICBpc0pzZG9tID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvanNEb20vLnRlc3QobmF2aWdhdG9yLmFwcE5hbWUpO1xuXG4gIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgY29uc29sZS53YXJuID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGNvbnNvbGUud2Fybi5hcHBseSA9PT0gXCJmdW5jdGlvblwiO1xuXG4gIHRyeSB7XG4gIFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInRlc3RcIiwgeyB2YWx1ZTogMCB9KTtcbiAgXHRlbnZpcm9ubWVudF9fbWFnaWMgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gIFx0ZW52aXJvbm1lbnRfX21hZ2ljID0gZmFsc2U7XG4gIH1cblxuICBuYW1lc3BhY2VzID0ge1xuICBcdGh0bWw6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFxuICBcdG1hdGhtbDogXCJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MXCIsXG4gIFx0c3ZnOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gIFx0eGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICBcdHhtbDogXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIixcbiAgXHR4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG4gIH07XG5cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICBcdHN2ZyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICBcdHN2ZyA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0Jhc2ljU3RydWN0dXJlXCIsIFwiMS4xXCIpO1xuICB9XG5cbiAgdmVuZG9ycyA9IFtcIm9cIiwgXCJtc1wiLCBcIm1velwiLCBcIndlYmtpdFwiXTtcblxuICB2YXIgY3JlYXRlRWxlbWVudCwgbWF0Y2hlcywgZG9tX19kaXYsIG1ldGhvZE5hbWVzLCB1bnByZWZpeGVkLCBwcmVmaXhlZCwgZG9tX19pLCBqLCBtYWtlRnVuY3Rpb247XG5cbiAgLy8gVGVzdCBmb3IgU1ZHIHN1cHBvcnRcbiAgaWYgKCFzdmcpIHtcbiAgXHRjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIG5zKSB7XG4gIFx0XHRpZiAobnMgJiYgbnMgIT09IG5hbWVzcGFjZXMuaHRtbCkge1xuICBcdFx0XHR0aHJvdyBcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3RoZXIgdGhhbiBodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sLiBUaGUgbW9zdCBsaWtlbHkgY2F1c2Ugb2YgdGhpcyBlcnJvciBpcyB0aGF0IHlvdSdyZSB0cnlpbmcgdG8gcmVuZGVyIFNWRyBpbiBhbiBvbGRlciBicm93c2VyLiBTZWUgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZy9sYXRlc3Qvc3ZnLWFuZC1vbGRlci1icm93c2VycyBmb3IgbW9yZSBpbmZvcm1hdGlvblwiO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgXHR9O1xuICB9IGVsc2Uge1xuICBcdGNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAodHlwZSwgbnMpIHtcbiAgXHRcdGlmICghbnMgfHwgbnMgPT09IG5hbWVzcGFjZXMuaHRtbCkge1xuICBcdFx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdHlwZSk7XG4gIFx0fTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEVsZW1lbnQoaW5wdXQpIHtcbiAgXHR2YXIgb3V0cHV0O1xuXG4gIFx0aWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgPT09IFwiYm9vbGVhblwiKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIWRvY3VtZW50IHx8ICFpbnB1dCkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0Ly8gV2UgYWxyZWFkeSBoYXZlIGEgRE9NIG5vZGUgLSBubyB3b3JrIHRvIGRvLiAoRHVjayB0eXBpbmcgYWxlcnQhKVxuICBcdGlmIChpbnB1dC5ub2RlVHlwZSkge1xuICBcdFx0cmV0dXJuIGlucHV0O1xuICBcdH1cblxuICBcdC8vIEdldCBub2RlIGZyb20gc3RyaW5nXG4gIFx0aWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0Ly8gdHJ5IElEIGZpcnN0XG4gIFx0XHRvdXRwdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dCk7XG5cbiAgXHRcdC8vIHRoZW4gYXMgc2VsZWN0b3IsIGlmIHBvc3NpYmxlXG4gIFx0XHRpZiAoIW91dHB1dCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG4gIFx0XHRcdG91dHB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXQpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBkaWQgaXQgd29yaz9cbiAgXHRcdGlmIChvdXRwdXQgJiYgb3V0cHV0Lm5vZGVUeXBlKSB7XG4gIFx0XHRcdHJldHVybiBvdXRwdXQ7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gSWYgd2UndmUgYmVlbiBnaXZlbiBhIGNvbGxlY3Rpb24gKGpRdWVyeSwgWmVwdG8gZXRjKSwgZXh0cmFjdCB0aGUgZmlyc3QgaXRlbVxuICBcdGlmIChpbnB1dFswXSAmJiBpbnB1dFswXS5ub2RlVHlwZSkge1xuICBcdFx0cmV0dXJuIGlucHV0WzBdO1xuICBcdH1cblxuICBcdHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKCFpc0NsaWVudCkge1xuICBcdG1hdGNoZXMgPSBudWxsO1xuICB9IGVsc2Uge1xuICBcdGRvbV9fZGl2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgXHRtZXRob2ROYW1lcyA9IFtcIm1hdGNoZXNcIiwgXCJtYXRjaGVzU2VsZWN0b3JcIl07XG5cbiAgXHRtYWtlRnVuY3Rpb24gPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICBcdFx0cmV0dXJuIGZ1bmN0aW9uIChub2RlLCBzZWxlY3Rvcikge1xuICBcdFx0XHRyZXR1cm4gbm9kZVttZXRob2ROYW1lXShzZWxlY3Rvcik7XG4gIFx0XHR9O1xuICBcdH07XG5cbiAgXHRkb21fX2kgPSBtZXRob2ROYW1lcy5sZW5ndGg7XG5cbiAgXHR3aGlsZSAoZG9tX19pLS0gJiYgIW1hdGNoZXMpIHtcbiAgXHRcdHVucHJlZml4ZWQgPSBtZXRob2ROYW1lc1tkb21fX2ldO1xuXG4gIFx0XHRpZiAoZG9tX19kaXZbdW5wcmVmaXhlZF0pIHtcbiAgXHRcdFx0bWF0Y2hlcyA9IG1ha2VGdW5jdGlvbih1bnByZWZpeGVkKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGogPSB2ZW5kb3JzLmxlbmd0aDtcbiAgXHRcdFx0d2hpbGUgKGotLSkge1xuICBcdFx0XHRcdHByZWZpeGVkID0gdmVuZG9yc1tkb21fX2ldICsgdW5wcmVmaXhlZC5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArIHVucHJlZml4ZWQuc3Vic3RyaW5nKDEpO1xuXG4gIFx0XHRcdFx0aWYgKGRvbV9fZGl2W3ByZWZpeGVkXSkge1xuICBcdFx0XHRcdFx0bWF0Y2hlcyA9IG1ha2VGdW5jdGlvbihwcmVmaXhlZCk7XG4gIFx0XHRcdFx0XHRicmVhaztcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBJRTguLi5cbiAgXHRpZiAoIW1hdGNoZXMpIHtcbiAgXHRcdG1hdGNoZXMgPSBmdW5jdGlvbiAobm9kZSwgc2VsZWN0b3IpIHtcbiAgXHRcdFx0dmFyIG5vZGVzLCBwYXJlbnROb2RlLCBpO1xuXG4gIFx0XHRcdHBhcmVudE5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cbiAgXHRcdFx0aWYgKCFwYXJlbnROb2RlKSB7XG4gIFx0XHRcdFx0Ly8gZW1wdHkgZHVtbXkgPGRpdj5cbiAgXHRcdFx0XHRkb21fX2Rpdi5pbm5lckhUTUwgPSBcIlwiO1xuXG4gIFx0XHRcdFx0cGFyZW50Tm9kZSA9IGRvbV9fZGl2O1xuICBcdFx0XHRcdG5vZGUgPSBub2RlLmNsb25lTm9kZSgpO1xuXG4gIFx0XHRcdFx0ZG9tX19kaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRub2RlcyA9IHBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbiAgXHRcdFx0aSA9IG5vZGVzLmxlbmd0aDtcbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdGlmIChub2Rlc1tpXSA9PT0gbm9kZSkge1xuICBcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG5cbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0fTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBkZXRhY2hOb2RlKG5vZGUpIHtcbiAgXHRpZiAobm9kZSAmJiB0eXBlb2Ygbm9kZS5wYXJlbnROb2RlICE9PSBcInVua25vd25cIiAmJiBub2RlLnBhcmVudE5vZGUpIHtcbiAgXHRcdG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNhZmVUb1N0cmluZ1ZhbHVlKHZhbHVlKSB7XG4gIFx0cmV0dXJuIHZhbHVlID09IG51bGwgfHwgIXZhbHVlLnRvU3RyaW5nID8gXCJcIiA6IHZhbHVlO1xuICB9XG5cbiAgdmFyIGxlZ2FjeSA9IG51bGw7XG5cbiAgdmFyIGNyZWF0ZSwgZGVmaW5lUHJvcGVydHksIGRlZmluZVByb3BlcnRpZXM7XG5cbiAgdHJ5IHtcbiAgXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwidGVzdFwiLCB7IHZhbHVlOiAwIH0pO1xuXG4gIFx0aWYgKGlzQ2xpZW50KSB7XG4gIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgXCJ0ZXN0XCIsIHsgdmFsdWU6IDAgfSk7XG4gIFx0fVxuXG4gIFx0ZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gIH0gY2F0Y2ggKGVycikge1xuICBcdC8vIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBkb2Vzbid0IGV4aXN0LCBvciB3ZSdyZSBpbiBJRTggd2hlcmUgeW91IGNhblxuICBcdC8vIG9ubHkgdXNlIGl0IHdpdGggRE9NIG9iamVjdHMgKHdoYXQgd2VyZSB5b3Ugc21va2luZywgTVNGVD8pXG4gIFx0ZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqLCBwcm9wLCBkZXNjKSB7XG4gIFx0XHRvYmpbcHJvcF0gPSBkZXNjLnZhbHVlO1xuICBcdH07XG4gIH1cblxuICB0cnkge1xuICBcdHRyeSB7XG4gIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgeyB0ZXN0OiB7IHZhbHVlOiAwIH0gfSk7XG4gIFx0fSBjYXRjaCAoZXJyKSB7XG4gIFx0XHQvLyBUT0RPIGhvdyBkbyB3ZSBhY2NvdW50IGZvciB0aGlzPyBub01hZ2ljID0gdHJ1ZTtcbiAgXHRcdHRocm93IGVycjtcbiAgXHR9XG5cbiAgXHRpZiAoaXNDbGllbnQpIHtcbiAgXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIHsgdGVzdDogeyB2YWx1ZTogMCB9IH0pO1xuICBcdH1cblxuICBcdGRlZmluZVByb3BlcnRpZXMgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gIFx0ZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmosIHByb3BzKSB7XG4gIFx0XHR2YXIgcHJvcDtcblxuICBcdFx0Zm9yIChwcm9wIGluIHByb3BzKSB7XG4gIFx0XHRcdGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICBcdFx0XHRcdGRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgcHJvcHNbcHJvcF0pO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fTtcbiAgfVxuXG4gIHRyeSB7XG4gIFx0T2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBcdGNyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG4gIH0gY2F0Y2ggKGVycikge1xuICBcdC8vIHNpZ2hcbiAgXHRjcmVhdGUgPSAoZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIEYgPSBmdW5jdGlvbiAoKSB7fTtcblxuICBcdFx0cmV0dXJuIGZ1bmN0aW9uIChwcm90bywgcHJvcHMpIHtcbiAgXHRcdFx0dmFyIG9iajtcblxuICBcdFx0XHRpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgXHRcdFx0XHRyZXR1cm4ge307XG4gIFx0XHRcdH1cblxuICBcdFx0XHRGLnByb3RvdHlwZSA9IHByb3RvO1xuICBcdFx0XHRvYmogPSBuZXcgRigpO1xuXG4gIFx0XHRcdGlmIChwcm9wcykge1xuICBcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgcHJvcHMpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0cmV0dXJuIG9iajtcbiAgXHRcdH07XG4gIFx0fSkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHV0aWxzX29iamVjdF9fZXh0ZW5kKHRhcmdldCkge1xuICBcdGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzb3VyY2VzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICBcdFx0c291cmNlc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIFx0fVxuXG4gIFx0dmFyIHByb3AsIHNvdXJjZTtcblxuICBcdHdoaWxlIChzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCkpIHtcbiAgXHRcdGZvciAocHJvcCBpbiBzb3VyY2UpIHtcbiAgXHRcdFx0aWYgKGhhc093bi5jYWxsKHNvdXJjZSwgcHJvcCkpIHtcbiAgXHRcdFx0XHR0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZnVuY3Rpb24gZmlsbEdhcHModGFyZ2V0KSB7XG4gIFx0Zm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gIFx0XHRzb3VyY2VzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgXHR9XG5cbiAgXHRzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgXHRcdGZvciAodmFyIGtleSBpbiBzKSB7XG4gIFx0XHRcdGlmIChzLmhhc093blByb3BlcnR5KGtleSkgJiYgIShrZXkgaW4gdGFyZ2V0KSkge1xuICBcdFx0XHRcdHRhcmdldFtrZXldID0gc1trZXldO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgXHRyZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gdGhhbmtzLCBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS9pbnN0YW5jZW9mLWNvbnNpZGVyZWQtaGFybWZ1bC1vci1ob3ctdG8td3JpdGUtYS1yb2J1c3QtaXNhcnJheS9cbiAgdmFyIGlzX190b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgICBhcnJheUxpa2VQYXR0ZXJuID0gL15cXFtvYmplY3QgKD86QXJyYXl8RmlsZUxpc3QpXFxdJC87XG4gIGZ1bmN0aW9uIGlzQXJyYXkodGhpbmcpIHtcbiAgXHRyZXR1cm4gaXNfX3RvU3RyaW5nLmNhbGwodGhpbmcpID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5TGlrZShvYmopIHtcbiAgXHRyZXR1cm4gYXJyYXlMaWtlUGF0dGVybi50ZXN0KGlzX190b1N0cmluZy5jYWxsKG9iaikpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFcXVhbChhLCBiKSB7XG4gIFx0aWYgKGEgPT09IG51bGwgJiYgYiA9PT0gbnVsbCkge1xuICBcdFx0cmV0dXJuIHRydWU7XG4gIFx0fVxuXG4gIFx0aWYgKHR5cGVvZiBhID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBiID09PSBcIm9iamVjdFwiKSB7XG4gIFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGEgPT09IGI7XG4gIH1cblxuICBmdW5jdGlvbiBpc19faXNOdW1lcmljKHRoaW5nKSB7XG4gIFx0cmV0dXJuICFpc05hTihwYXJzZUZsb2F0KHRoaW5nKSkgJiYgaXNGaW5pdGUodGhpbmcpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcbiAgXHRyZXR1cm4gdGhpbmcgJiYgaXNfX3RvU3RyaW5nLmNhbGwodGhpbmcpID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xuICB9XG5cbiAgdmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7fTtcblxuICAvKiBnbG9iYWwgY29uc29sZSAqL1xuICB2YXIgYWxyZWFkeVdhcm5lZCA9IHt9LFxuICAgICAgbG9nLFxuICAgICAgcHJpbnRXYXJuaW5nLFxuICAgICAgd2VsY29tZTtcblxuICBpZiAoaGFzQ29uc29sZSkge1xuICBcdChmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgd2VsY29tZUludHJvID0gW1wiJWNSYWN0aXZlLmpzICVjMC43LjMgJWNpbiBkZWJ1ZyBtb2RlLCAlY21vcmUuLi5cIiwgXCJjb2xvcjogcmdiKDExNCwgMTU3LCA1Mik7IGZvbnQtd2VpZ2h0OiBub3JtYWw7XCIsIFwiY29sb3I6IHJnYig4NSwgODUsIDg1KTsgZm9udC13ZWlnaHQ6IG5vcm1hbDtcIiwgXCJjb2xvcjogcmdiKDg1LCA4NSwgODUpOyBmb250LXdlaWdodDogbm9ybWFsO1wiLCBcImNvbG9yOiByZ2IoODIsIDE0MCwgMjI0KTsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XCJdO1xuICBcdFx0dmFyIHdlbGNvbWVNZXNzYWdlID0gXCJZb3UncmUgcnVubmluZyBSYWN0aXZlIDAuNy4zIGluIGRlYnVnIG1vZGUgLSBtZXNzYWdlcyB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUgdG8gaGVscCB5b3UgZml4IHByb2JsZW1zIGFuZCBvcHRpbWlzZSB5b3VyIGFwcGxpY2F0aW9uLlxcblxcblRvIGRpc2FibGUgZGVidWcgbW9kZSwgYWRkIHRoaXMgbGluZSBhdCB0aGUgc3RhcnQgb2YgeW91ciBhcHA6XFxuICBSYWN0aXZlLkRFQlVHID0gZmFsc2U7XFxuXFxuVG8gZGlzYWJsZSBkZWJ1ZyBtb2RlIHdoZW4geW91ciBhcHAgaXMgbWluaWZpZWQsIGFkZCB0aGlzIHNuaXBwZXQ6XFxuICBSYWN0aXZlLkRFQlVHID0gL3VubWluaWZpZWQvLnRlc3QoZnVuY3Rpb24oKXsvKnVubWluaWZpZWQqL30pO1xcblxcbkdldCBoZWxwIGFuZCBzdXBwb3J0OlxcbiAgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZ1xcbiAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy90YWdnZWQvcmFjdGl2ZWpzXFxuICBodHRwOi8vZ3JvdXBzLmdvb2dsZS5jb20vZm9ydW0vIyFmb3J1bS9yYWN0aXZlLWpzXFxuICBodHRwOi8vdHdpdHRlci5jb20vcmFjdGl2ZWpzXFxuXFxuRm91bmQgYSBidWc/IFJhaXNlIGFuIGlzc3VlOlxcbiAgaHR0cHM6Ly9naXRodWIuY29tL3JhY3RpdmVqcy9yYWN0aXZlL2lzc3Vlc1xcblxcblwiO1xuXG4gIFx0XHR3ZWxjb21lID0gZnVuY3Rpb24gKCkge1xuICBcdFx0XHR2YXIgaGFzR3JvdXAgPSAhIWNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQ7XG4gIFx0XHRcdGNvbnNvbGVbaGFzR3JvdXAgPyBcImdyb3VwQ29sbGFwc2VkXCIgOiBcImxvZ1wiXS5hcHBseShjb25zb2xlLCB3ZWxjb21lSW50cm8pO1xuICBcdFx0XHRjb25zb2xlLmxvZyh3ZWxjb21lTWVzc2FnZSk7XG4gIFx0XHRcdGlmIChoYXNHcm91cCkge1xuICBcdFx0XHRcdGNvbnNvbGUuZ3JvdXBFbmQod2VsY29tZUludHJvKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHdlbGNvbWUgPSBub29wO1xuICBcdFx0fTtcblxuICBcdFx0cHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGFyZ3MpIHtcbiAgXHRcdFx0d2VsY29tZSgpO1xuXG4gIFx0XHRcdC8vIGV4dHJhY3QgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGluc3RhbmNlIHRoaXMgbWVzc2FnZSBwZXJ0YWlucyB0bywgaWYgYXBwbGljYWJsZVxuICBcdFx0XHRpZiAodHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gXCJvYmplY3RcIikge1xuICBcdFx0XHRcdHZhciBvcHRpb25zID0gYXJncy5wb3AoKTtcbiAgXHRcdFx0XHR2YXIgcmFjdGl2ZSA9IG9wdGlvbnMgPyBvcHRpb25zLnJhY3RpdmUgOiBudWxsO1xuXG4gIFx0XHRcdFx0aWYgKHJhY3RpdmUpIHtcbiAgXHRcdFx0XHRcdC8vIGlmIHRoaXMgaXMgYW4gaW5zdGFuY2Ugb2YgYSBjb21wb25lbnQgdGhhdCB3ZSBrbm93IHRoZSBuYW1lIG9mLCBhZGRcbiAgXHRcdFx0XHRcdC8vIGl0IHRvIHRoZSBtZXNzYWdlXG4gIFx0XHRcdFx0XHR2YXIgX25hbWUgPSB1bmRlZmluZWQ7XG4gIFx0XHRcdFx0XHRpZiAocmFjdGl2ZS5jb21wb25lbnQgJiYgKF9uYW1lID0gcmFjdGl2ZS5jb21wb25lbnQubmFtZSkpIHtcbiAgXHRcdFx0XHRcdFx0bWVzc2FnZSA9IFwiPFwiICsgX25hbWUgKyBcIj4gXCIgKyBtZXNzYWdlO1xuICBcdFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0XHR2YXIgbm9kZSA9IHVuZGVmaW5lZDtcbiAgXHRcdFx0XHRcdGlmIChub2RlID0gb3B0aW9ucy5ub2RlIHx8IHJhY3RpdmUuZnJhZ21lbnQgJiYgcmFjdGl2ZS5mcmFnbWVudC5yZW5kZXJlZCAmJiByYWN0aXZlLmZpbmQoXCIqXCIpKSB7XG4gIFx0XHRcdFx0XHRcdGFyZ3MucHVzaChub2RlKTtcbiAgXHRcdFx0XHRcdH1cbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cblxuICBcdFx0XHRjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgW1wiJWNSYWN0aXZlLmpzOiAlY1wiICsgbWVzc2FnZSwgXCJjb2xvcjogcmdiKDExNCwgMTU3LCA1Mik7XCIsIFwiY29sb3I6IHJnYig4NSwgODUsIDg1KTtcIl0uY29uY2F0KGFyZ3MpKTtcbiAgXHRcdH07XG5cbiAgXHRcdGxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0Y29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgXHRcdH07XG4gIFx0fSkoKTtcbiAgfSBlbHNlIHtcbiAgXHRwcmludFdhcm5pbmcgPSBsb2cgPSB3ZWxjb21lID0gbm9vcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdChtZXNzYWdlLCBhcmdzKSB7XG4gIFx0cmV0dXJuIG1lc3NhZ2UucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIGFyZ3Muc2hpZnQoKTtcbiAgXHR9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZhdGFsKG1lc3NhZ2UpIHtcbiAgXHRmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgXHRcdGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICBcdH1cblxuICBcdG1lc3NhZ2UgPSBmb3JtYXQobWVzc2FnZSwgYXJncyk7XG4gIFx0dGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nSWZEZWJ1ZygpIHtcbiAgXHRpZiAoX1JhY3RpdmUuREVCVUcpIHtcbiAgXHRcdGxvZy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdhcm4obWVzc2FnZSkge1xuICBcdGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICBcdFx0YXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIFx0fVxuXG4gIFx0bWVzc2FnZSA9IGZvcm1hdChtZXNzYWdlLCBhcmdzKTtcbiAgXHRwcmludFdhcm5pbmcobWVzc2FnZSwgYXJncyk7XG4gIH1cblxuICBmdW5jdGlvbiB3YXJuT25jZShtZXNzYWdlKSB7XG4gIFx0Zm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gIFx0XHRhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgXHR9XG5cbiAgXHRtZXNzYWdlID0gZm9ybWF0KG1lc3NhZ2UsIGFyZ3MpO1xuXG4gIFx0aWYgKGFscmVhZHlXYXJuZWRbbWVzc2FnZV0pIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRhbHJlYWR5V2FybmVkW21lc3NhZ2VdID0gdHJ1ZTtcbiAgXHRwcmludFdhcm5pbmcobWVzc2FnZSwgYXJncyk7XG4gIH1cblxuICBmdW5jdGlvbiB3YXJuSWZEZWJ1ZygpIHtcbiAgXHRpZiAoX1JhY3RpdmUuREVCVUcpIHtcbiAgXHRcdHdhcm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiB3YXJuT25jZUlmRGVidWcoKSB7XG4gIFx0aWYgKF9SYWN0aXZlLkRFQlVHKSB7XG4gIFx0XHR3YXJuT25jZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICBcdH1cbiAgfVxuXG4gIC8vIEVycm9yIG1lc3NhZ2VzIHRoYXQgYXJlIHVzZWQgKG9yIGNvdWxkIGJlKSBpbiBtdWx0aXBsZSBwbGFjZXNcbiAgdmFyIGJhZEFyZ3VtZW50cyA9IFwiQmFkIGFyZ3VtZW50c1wiO1xuICB2YXIgbm9SZWdpc3RyeUZ1bmN0aW9uUmV0dXJuID0gXCJBIGZ1bmN0aW9uIHdhcyBzcGVjaWZpZWQgZm9yIFxcXCIlc1xcXCIgJXMsIGJ1dCBubyAlcyB3YXMgcmV0dXJuZWRcIjtcbiAgdmFyIG1pc3NpbmdQbHVnaW4gPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgIHJldHVybiBcIk1pc3NpbmcgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBcIiArIHR5cGUgKyBcIiBwbHVnaW4uIFlvdSBtYXkgbmVlZCB0byBkb3dubG9hZCBhIHBsdWdpbiB2aWEgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZy9sYXRlc3QvcGx1Z2lucyNcIiArIHR5cGUgKyBcInNcIjtcbiAgfTtcblxuICBmdW5jdGlvbiBmaW5kSW5WaWV3SGllcmFyY2h5KHJlZ2lzdHJ5TmFtZSwgcmFjdGl2ZSwgbmFtZSkge1xuICBcdHZhciBpbnN0YW5jZSA9IGZpbmRJbnN0YW5jZShyZWdpc3RyeU5hbWUsIHJhY3RpdmUsIG5hbWUpO1xuICBcdHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlW3JlZ2lzdHJ5TmFtZV1bbmFtZV0gOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZEluc3RhbmNlKHJlZ2lzdHJ5TmFtZSwgcmFjdGl2ZSwgbmFtZSkge1xuICBcdHdoaWxlIChyYWN0aXZlKSB7XG4gIFx0XHRpZiAobmFtZSBpbiByYWN0aXZlW3JlZ2lzdHJ5TmFtZV0pIHtcbiAgXHRcdFx0cmV0dXJuIHJhY3RpdmU7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChyYWN0aXZlLmlzb2xhdGVkKSB7XG4gIFx0XHRcdHJldHVybiBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRyYWN0aXZlID0gcmFjdGl2ZS5wYXJlbnQ7XG4gIFx0fVxuICB9XG5cbiAgdmFyIGludGVycG9sYXRlID0gZnVuY3Rpb24gKGZyb20sIHRvLCByYWN0aXZlLCB0eXBlKSB7XG4gIFx0aWYgKGZyb20gPT09IHRvKSB7XG4gIFx0XHRyZXR1cm4gc25hcCh0byk7XG4gIFx0fVxuXG4gIFx0aWYgKHR5cGUpIHtcblxuICBcdFx0dmFyIGludGVycG9sID0gZmluZEluVmlld0hpZXJhcmNoeShcImludGVycG9sYXRvcnNcIiwgcmFjdGl2ZSwgdHlwZSk7XG4gIFx0XHRpZiAoaW50ZXJwb2wpIHtcbiAgXHRcdFx0cmV0dXJuIGludGVycG9sKGZyb20sIHRvKSB8fCBzbmFwKHRvKTtcbiAgXHRcdH1cblxuICBcdFx0ZmF0YWwobWlzc2luZ1BsdWdpbih0eXBlLCBcImludGVycG9sYXRvclwiKSk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHN0YXRpY19pbnRlcnBvbGF0b3JzLm51bWJlcihmcm9tLCB0bykgfHwgc3RhdGljX2ludGVycG9sYXRvcnMuYXJyYXkoZnJvbSwgdG8pIHx8IHN0YXRpY19pbnRlcnBvbGF0b3JzLm9iamVjdChmcm9tLCB0bykgfHwgc25hcCh0byk7XG4gIH07XG5cbiAgdmFyIHNoYXJlZF9pbnRlcnBvbGF0ZSA9IGludGVycG9sYXRlO1xuXG4gIGZ1bmN0aW9uIHNuYXAodG8pIHtcbiAgXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRvO1xuICBcdH07XG4gIH1cblxuICB2YXIgaW50ZXJwb2xhdG9ycyA9IHtcbiAgXHRudW1iZXI6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICBcdFx0dmFyIGRlbHRhO1xuXG4gIFx0XHRpZiAoIWlzX19pc051bWVyaWMoZnJvbSkgfHwgIWlzX19pc051bWVyaWModG8pKSB7XG4gIFx0XHRcdHJldHVybiBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRmcm9tID0gK2Zyb207XG4gIFx0XHR0byA9ICt0bztcblxuICBcdFx0ZGVsdGEgPSB0byAtIGZyb207XG5cbiAgXHRcdGlmICghZGVsdGEpIHtcbiAgXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHRyZXR1cm4gZnJvbTtcbiAgXHRcdFx0fTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gIFx0XHRcdHJldHVybiBmcm9tICsgdCAqIGRlbHRhO1xuICBcdFx0fTtcbiAgXHR9LFxuXG4gIFx0YXJyYXk6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICBcdFx0dmFyIGludGVybWVkaWF0ZSwgaW50ZXJwb2xhdG9ycywgbGVuLCBpO1xuXG4gIFx0XHRpZiAoIWlzQXJyYXkoZnJvbSkgfHwgIWlzQXJyYXkodG8pKSB7XG4gIFx0XHRcdHJldHVybiBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRpbnRlcm1lZGlhdGUgPSBbXTtcbiAgXHRcdGludGVycG9sYXRvcnMgPSBbXTtcblxuICBcdFx0aSA9IGxlbiA9IE1hdGgubWluKGZyb20ubGVuZ3RoLCB0by5sZW5ndGgpO1xuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRpbnRlcnBvbGF0b3JzW2ldID0gc2hhcmVkX2ludGVycG9sYXRlKGZyb21baV0sIHRvW2ldKTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gc3VycGx1cyB2YWx1ZXMgLSBkb24ndCBpbnRlcnBvbGF0ZSwgYnV0IGRvbid0IGV4Y2x1ZGUgdGhlbSBlaXRoZXJcbiAgXHRcdGZvciAoaSA9IGxlbjsgaSA8IGZyb20ubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdFx0aW50ZXJtZWRpYXRlW2ldID0gZnJvbVtpXTtcbiAgXHRcdH1cblxuICBcdFx0Zm9yIChpID0gbGVuOyBpIDwgdG8ubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdFx0aW50ZXJtZWRpYXRlW2ldID0gdG9baV07XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBmdW5jdGlvbiAodCkge1xuICBcdFx0XHR2YXIgaSA9IGxlbjtcblxuICBcdFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdFx0aW50ZXJtZWRpYXRlW2ldID0gaW50ZXJwb2xhdG9yc1tpXSh0KTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybiBpbnRlcm1lZGlhdGU7XG4gIFx0XHR9O1xuICBcdH0sXG5cbiAgXHRvYmplY3Q6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICBcdFx0dmFyIHByb3BlcnRpZXMsIGxlbiwgaW50ZXJwb2xhdG9ycywgaW50ZXJtZWRpYXRlLCBwcm9wO1xuXG4gIFx0XHRpZiAoIWlzT2JqZWN0KGZyb20pIHx8ICFpc09iamVjdCh0bykpIHtcbiAgXHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHR9XG5cbiAgXHRcdHByb3BlcnRpZXMgPSBbXTtcbiAgXHRcdGludGVybWVkaWF0ZSA9IHt9O1xuICBcdFx0aW50ZXJwb2xhdG9ycyA9IHt9O1xuXG4gIFx0XHRmb3IgKHByb3AgaW4gZnJvbSkge1xuICBcdFx0XHRpZiAoaGFzT3duLmNhbGwoZnJvbSwgcHJvcCkpIHtcbiAgXHRcdFx0XHRpZiAoaGFzT3duLmNhbGwodG8sIHByb3ApKSB7XG4gIFx0XHRcdFx0XHRwcm9wZXJ0aWVzLnB1c2gocHJvcCk7XG4gIFx0XHRcdFx0XHRpbnRlcnBvbGF0b3JzW3Byb3BdID0gc2hhcmVkX2ludGVycG9sYXRlKGZyb21bcHJvcF0sIHRvW3Byb3BdKTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0aW50ZXJtZWRpYXRlW3Byb3BdID0gZnJvbVtwcm9wXTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0Zm9yIChwcm9wIGluIHRvKSB7XG4gIFx0XHRcdGlmIChoYXNPd24uY2FsbCh0bywgcHJvcCkgJiYgIWhhc093bi5jYWxsKGZyb20sIHByb3ApKSB7XG4gIFx0XHRcdFx0aW50ZXJtZWRpYXRlW3Byb3BdID0gdG9bcHJvcF07XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0bGVuID0gcHJvcGVydGllcy5sZW5ndGg7XG5cbiAgXHRcdHJldHVybiBmdW5jdGlvbiAodCkge1xuICBcdFx0XHR2YXIgaSA9IGxlbixcbiAgXHRcdFx0ICAgIHByb3A7XG5cbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdHByb3AgPSBwcm9wZXJ0aWVzW2ldO1xuXG4gIFx0XHRcdFx0aW50ZXJtZWRpYXRlW3Byb3BdID0gaW50ZXJwb2xhdG9yc1twcm9wXSh0KTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybiBpbnRlcm1lZGlhdGU7XG4gIFx0XHR9O1xuICBcdH1cbiAgfTtcblxuICB2YXIgc3RhdGljX2ludGVycG9sYXRvcnMgPSBpbnRlcnBvbGF0b3JzO1xuXG4gIC8vIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBrZXlwYXRoIHN1Y2ggYXMgJ2Zvby5iYXIuYmF6JywgYW5kIHJldHVybnNcbiAgLy8gYWxsIHRoZSB2YXJpYW50cyBvZiB0aGF0IGtleXBhdGggdGhhdCBpbmNsdWRlIGEgd2lsZGNhcmQgaW4gcGxhY2VcbiAgLy8gb2YgYSBrZXksIHN1Y2ggYXMgJ2Zvby5iYXIuKicsICdmb28uKi5iYXonLCAnZm9vLiouKicgYW5kIHNvIG9uLlxuICAvLyBUaGVzZSBhcmUgdGhlbiBjaGVja2VkIGFnYWluc3QgdGhlIGRlcGVuZGFudHMgbWFwIChyYWN0aXZlLnZpZXdtb2RlbC5kZXBzTWFwKVxuICAvLyB0byBzZWUgaWYgYW55IHBhdHRlcm4gb2JzZXJ2ZXJzIGFyZSBkb3duc3RyZWFtIG9mIG9uZSBvciBtb3JlIG9mXG4gIC8vIHRoZXNlIHdpbGRjYXJkIGtleXBhdGhzIChlLmcuICdmb28uYmFyLiouc3RhdHVzJylcbiAgdmFyIHV0aWxzX2dldFBvdGVudGlhbFdpbGRjYXJkTWF0Y2hlcyA9IGdldFBvdGVudGlhbFdpbGRjYXJkTWF0Y2hlcztcblxuICB2YXIgc3Rhck1hcHMgPSB7fTtcbiAgZnVuY3Rpb24gZ2V0UG90ZW50aWFsV2lsZGNhcmRNYXRjaGVzKGtleXBhdGgpIHtcbiAgXHR2YXIga2V5cywgc3Rhck1hcCwgbWFwcGVyLCBpLCByZXN1bHQsIHdpbGRjYXJkS2V5cGF0aDtcblxuICBcdGtleXMgPSBrZXlwYXRoLnNwbGl0KFwiLlwiKTtcbiAgXHRpZiAoIShzdGFyTWFwID0gc3Rhck1hcHNba2V5cy5sZW5ndGhdKSkge1xuICBcdFx0c3Rhck1hcCA9IGdldFN0YXJNYXAoa2V5cy5sZW5ndGgpO1xuICBcdH1cblxuICBcdHJlc3VsdCA9IFtdO1xuXG4gIFx0bWFwcGVyID0gZnVuY3Rpb24gKHN0YXIsIGkpIHtcbiAgXHRcdHJldHVybiBzdGFyID8gXCIqXCIgOiBrZXlzW2ldO1xuICBcdH07XG5cbiAgXHRpID0gc3Rhck1hcC5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0d2lsZGNhcmRLZXlwYXRoID0gc3Rhck1hcFtpXS5tYXAobWFwcGVyKS5qb2luKFwiLlwiKTtcblxuICBcdFx0aWYgKCFyZXN1bHQuaGFzT3duUHJvcGVydHkod2lsZGNhcmRLZXlwYXRoKSkge1xuICBcdFx0XHRyZXN1bHQucHVzaCh3aWxkY2FyZEtleXBhdGgpO1xuICBcdFx0XHRyZXN1bHRbd2lsZGNhcmRLZXlwYXRoXSA9IHRydWU7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhbGwgdGhlIHBvc3NpYmxlIHRydWUvZmFsc2UgY29tYmluYXRpb25zIGZvclxuICAvLyBhIGdpdmVuIG51bWJlciAtIGUuZy4gZm9yIHR3bywgdGhlIHBvc3NpYmxlIGNvbWJpbmF0aW9ucyBhcmVcbiAgLy8gWyB0cnVlLCB0cnVlIF0sIFsgdHJ1ZSwgZmFsc2UgXSwgWyBmYWxzZSwgdHJ1ZSBdLCBbIGZhbHNlLCBmYWxzZSBdLlxuICAvLyBJdCBkb2VzIHNvIGJ5IGdldHRpbmcgYWxsIHRoZSBiaW5hcnkgdmFsdWVzIGJldHdlZW4gMCBhbmQgZS5nLiAxMVxuICBmdW5jdGlvbiBnZXRTdGFyTWFwKG51bSkge1xuICBcdHZhciBvbmVzID0gXCJcIixcbiAgXHQgICAgbWF4LFxuICBcdCAgICBiaW5hcnksXG4gIFx0ICAgIHN0YXJNYXAsXG4gIFx0ICAgIG1hcHBlcixcbiAgXHQgICAgaSxcbiAgXHQgICAgaixcbiAgXHQgICAgbCxcbiAgXHQgICAgbWFwO1xuXG4gIFx0aWYgKCFzdGFyTWFwc1tudW1dKSB7XG4gIFx0XHRzdGFyTWFwID0gW107XG5cbiAgXHRcdHdoaWxlIChvbmVzLmxlbmd0aCA8IG51bSkge1xuICBcdFx0XHRvbmVzICs9IDE7XG4gIFx0XHR9XG5cbiAgXHRcdG1heCA9IHBhcnNlSW50KG9uZXMsIDIpO1xuXG4gIFx0XHRtYXBwZXIgPSBmdW5jdGlvbiAoZGlnaXQpIHtcbiAgXHRcdFx0cmV0dXJuIGRpZ2l0ID09PSBcIjFcIjtcbiAgXHRcdH07XG5cbiAgXHRcdGZvciAoaSA9IDA7IGkgPD0gbWF4OyBpICs9IDEpIHtcbiAgXHRcdFx0YmluYXJ5ID0gaS50b1N0cmluZygyKTtcbiAgXHRcdFx0d2hpbGUgKGJpbmFyeS5sZW5ndGggPCBudW0pIHtcbiAgXHRcdFx0XHRiaW5hcnkgPSBcIjBcIiArIGJpbmFyeTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdG1hcCA9IFtdO1xuICBcdFx0XHRsID0gYmluYXJ5Lmxlbmd0aDtcbiAgXHRcdFx0Zm9yIChqID0gMDsgaiA8IGw7IGorKykge1xuICBcdFx0XHRcdG1hcC5wdXNoKG1hcHBlcihiaW5hcnlbal0pKTtcbiAgXHRcdFx0fVxuICBcdFx0XHRzdGFyTWFwW2ldID0gbWFwO1xuICBcdFx0fVxuXG4gIFx0XHRzdGFyTWFwc1tudW1dID0gc3Rhck1hcDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gc3Rhck1hcHNbbnVtXTtcbiAgfVxuXG4gIHZhciByZWZQYXR0ZXJuID0gL1xcW1xccyooXFwqfFswLTldfFsxLTldWzAtOV0rKVxccypcXF0vZztcbiAgdmFyIHBhdHRlcm5QYXR0ZXJuID0gL1xcKi87XG4gIHZhciBrZXlwYXRoQ2FjaGUgPSB7fTtcblxuICB2YXIgS2V5cGF0aCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgXHR2YXIga2V5cyA9IHN0ci5zcGxpdChcIi5cIik7XG5cbiAgXHR0aGlzLnN0ciA9IHN0cjtcblxuICBcdGlmIChzdHJbMF0gPT09IFwiQFwiKSB7XG4gIFx0XHR0aGlzLmlzU3BlY2lhbCA9IHRydWU7XG4gIFx0XHR0aGlzLnZhbHVlID0gZGVjb2RlS2V5cGF0aChzdHIpO1xuICBcdH1cblxuICBcdHRoaXMuZmlyc3RLZXkgPSBrZXlzWzBdO1xuICBcdHRoaXMubGFzdEtleSA9IGtleXMucG9wKCk7XG5cbiAgXHR0aGlzLmlzUGF0dGVybiA9IHBhdHRlcm5QYXR0ZXJuLnRlc3Qoc3RyKTtcblxuICBcdHRoaXMucGFyZW50ID0gc3RyID09PSBcIlwiID8gbnVsbCA6IGdldEtleXBhdGgoa2V5cy5qb2luKFwiLlwiKSk7XG4gIFx0dGhpcy5pc1Jvb3QgPSAhc3RyO1xuICB9O1xuXG4gIEtleXBhdGgucHJvdG90eXBlID0ge1xuICBcdGVxdWFsc09yU3RhcnRzV2l0aDogZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdHJldHVybiBrZXlwYXRoID09PSB0aGlzIHx8IHRoaXMuc3RhcnRzV2l0aChrZXlwYXRoKTtcbiAgXHR9LFxuXG4gIFx0am9pbjogZnVuY3Rpb24gKHN0cikge1xuICBcdFx0cmV0dXJuIGdldEtleXBhdGgodGhpcy5pc1Jvb3QgPyBTdHJpbmcoc3RyKSA6IHRoaXMuc3RyICsgXCIuXCIgKyBzdHIpO1xuICBcdH0sXG5cbiAgXHRyZXBsYWNlOiBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdFx0aWYgKHRoaXMgPT09IG9sZEtleXBhdGgpIHtcbiAgXHRcdFx0cmV0dXJuIG5ld0tleXBhdGg7XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh0aGlzLnN0YXJ0c1dpdGgob2xkS2V5cGF0aCkpIHtcbiAgXHRcdFx0cmV0dXJuIG5ld0tleXBhdGggPT09IG51bGwgPyBuZXdLZXlwYXRoIDogZ2V0S2V5cGF0aCh0aGlzLnN0ci5yZXBsYWNlKG9sZEtleXBhdGguc3RyICsgXCIuXCIsIG5ld0tleXBhdGguc3RyICsgXCIuXCIpKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0c3RhcnRzV2l0aDogZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdGlmICgha2V5cGF0aCkge1xuICBcdFx0XHQvLyBUT0RPIHVuZGVyIHdoYXQgY2lyY3Vtc3RhbmNlcyBkb2VzIHRoaXMgaGFwcGVuP1xuICBcdFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBrZXlwYXRoICYmIHRoaXMuc3RyLnN1YnN0cigwLCBrZXlwYXRoLnN0ci5sZW5ndGggKyAxKSA9PT0ga2V5cGF0aC5zdHIgKyBcIi5cIjtcbiAgXHR9LFxuXG4gIFx0dG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRocm93IG5ldyBFcnJvcihcIkJhZCBjb2VyY2lvblwiKTtcbiAgXHR9LFxuXG4gIFx0dmFsdWVPZjogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQmFkIGNvZXJjaW9uXCIpO1xuICBcdH0sXG5cbiAgXHR3aWxkY2FyZE1hdGNoZXM6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLl93aWxkY2FyZE1hdGNoZXMgfHwgKHRoaXMuX3dpbGRjYXJkTWF0Y2hlcyA9IHV0aWxzX2dldFBvdGVudGlhbFdpbGRjYXJkTWF0Y2hlcyh0aGlzLnN0cikpO1xuICBcdH1cbiAgfTtcbiAgZnVuY3Rpb24gYXNzaWduTmV3S2V5cGF0aCh0YXJnZXQsIHByb3BlcnR5LCBvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0dmFyIGV4aXN0aW5nS2V5cGF0aCA9IHRhcmdldFtwcm9wZXJ0eV07XG5cbiAgXHRpZiAoZXhpc3RpbmdLZXlwYXRoICYmIChleGlzdGluZ0tleXBhdGguZXF1YWxzT3JTdGFydHNXaXRoKG5ld0tleXBhdGgpIHx8ICFleGlzdGluZ0tleXBhdGguZXF1YWxzT3JTdGFydHNXaXRoKG9sZEtleXBhdGgpKSkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdHRhcmdldFtwcm9wZXJ0eV0gPSBleGlzdGluZ0tleXBhdGggPyBleGlzdGluZ0tleXBhdGgucmVwbGFjZShvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSA6IG5ld0tleXBhdGg7XG4gIFx0cmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGVLZXlwYXRoKGtleXBhdGgpIHtcbiAgXHR2YXIgdmFsdWUgPSBrZXlwYXRoLnNsaWNlKDIpO1xuXG4gIFx0aWYgKGtleXBhdGhbMV0gPT09IFwiaVwiKSB7XG4gIFx0XHRyZXR1cm4gaXNfX2lzTnVtZXJpYyh2YWx1ZSkgPyArdmFsdWUgOiB2YWx1ZTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0cmV0dXJuIHZhbHVlO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEtleXBhdGgoc3RyKSB7XG4gIFx0aWYgKHN0ciA9PSBudWxsKSB7XG4gIFx0XHRyZXR1cm4gc3RyO1xuICBcdH1cblxuICBcdC8vIFRPRE8gaXQgKm1heSogYmUgd29ydGggaGF2aW5nIHR3byB2ZXJzaW9ucyBvZiB0aGlzIGZ1bmN0aW9uIC0gb25lIHdoZXJlXG4gIFx0Ly8ga2V5cGF0aENhY2hlIGluaGVyaXRzIGZyb20gbnVsbCwgYW5kIG9uZSBmb3IgSUU4LiBEZXBlbmRzIG9uIGhvd1xuICBcdC8vIG11Y2ggb2YgYW4gb3ZlcmhlYWQgaGFzT3duUHJvcGVydHkgaXMgLSBwcm9iYWJseSBuZWdsaWdpYmxlXG4gIFx0aWYgKCFrZXlwYXRoQ2FjaGUuaGFzT3duUHJvcGVydHkoc3RyKSkge1xuICBcdFx0a2V5cGF0aENhY2hlW3N0cl0gPSBuZXcgS2V5cGF0aChzdHIpO1xuICBcdH1cblxuICBcdHJldHVybiBrZXlwYXRoQ2FjaGVbc3RyXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1hdGNoaW5nS2V5cGF0aHMocmFjdGl2ZSwga2V5cGF0aCkge1xuICBcdHZhciBrZXlzLCBrZXksIG1hdGNoaW5nS2V5cGF0aHM7XG5cbiAgXHRrZXlzID0ga2V5cGF0aC5zdHIuc3BsaXQoXCIuXCIpO1xuICBcdG1hdGNoaW5nS2V5cGF0aHMgPSBbcm9vdEtleXBhdGhdO1xuXG4gIFx0d2hpbGUgKGtleSA9IGtleXMuc2hpZnQoKSkge1xuICBcdFx0aWYgKGtleSA9PT0gXCIqXCIpIHtcbiAgXHRcdFx0Ly8gZXhwYW5kIHRvIGZpbmQgYWxsIHZhbGlkIGNoaWxkIGtleXBhdGhzXG4gIFx0XHRcdG1hdGNoaW5nS2V5cGF0aHMgPSBtYXRjaGluZ0tleXBhdGhzLnJlZHVjZShleHBhbmQsIFtdKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGlmIChtYXRjaGluZ0tleXBhdGhzWzBdID09PSByb290S2V5cGF0aCkge1xuICBcdFx0XHRcdC8vIGZpcnN0IGtleVxuICBcdFx0XHRcdG1hdGNoaW5nS2V5cGF0aHNbMF0gPSBnZXRLZXlwYXRoKGtleSk7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0bWF0Y2hpbmdLZXlwYXRocyA9IG1hdGNoaW5nS2V5cGF0aHMubWFwKGNvbmNhdGVuYXRlKGtleSkpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG1hdGNoaW5nS2V5cGF0aHM7XG5cbiAgXHRmdW5jdGlvbiBleHBhbmQobWF0Y2hpbmdLZXlwYXRocywga2V5cGF0aCkge1xuICBcdFx0dmFyIHdyYXBwZXIsIHZhbHVlLCBrZXlzO1xuXG4gIFx0XHRpZiAoa2V5cGF0aC5pc1Jvb3QpIHtcbiAgXHRcdFx0a2V5cyA9IFtdLmNvbmNhdChPYmplY3Qua2V5cyhyYWN0aXZlLnZpZXdtb2RlbC5kYXRhKSwgT2JqZWN0LmtleXMocmFjdGl2ZS52aWV3bW9kZWwubWFwcGluZ3MpLCBPYmplY3Qua2V5cyhyYWN0aXZlLnZpZXdtb2RlbC5jb21wdXRhdGlvbnMpKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHdyYXBwZXIgPSByYWN0aXZlLnZpZXdtb2RlbC53cmFwcGVkW2tleXBhdGguc3RyXTtcbiAgXHRcdFx0dmFsdWUgPSB3cmFwcGVyID8gd3JhcHBlci5nZXQoKSA6IHJhY3RpdmUudmlld21vZGVsLmdldChrZXlwYXRoKTtcblxuICBcdFx0XHRrZXlzID0gdmFsdWUgPyBPYmplY3Qua2V5cyh2YWx1ZSkgOiBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoa2V5cykge1xuICBcdFx0XHRrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICBcdFx0XHRcdGlmIChrZXkgIT09IFwiX3JhY3RpdmVcIiB8fCAhaXNBcnJheSh2YWx1ZSkpIHtcbiAgXHRcdFx0XHRcdG1hdGNoaW5nS2V5cGF0aHMucHVzaChrZXlwYXRoLmpvaW4oa2V5KSk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9KTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIG1hdGNoaW5nS2V5cGF0aHM7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gY29uY2F0ZW5hdGUoa2V5KSB7XG4gIFx0cmV0dXJuIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRyZXR1cm4ga2V5cGF0aC5qb2luKGtleSk7XG4gIFx0fTtcbiAgfVxuICBmdW5jdGlvbiBub3JtYWxpc2UocmVmKSB7XG4gIFx0cmV0dXJuIHJlZiA/IHJlZi5yZXBsYWNlKHJlZlBhdHRlcm4sIFwiLiQxXCIpIDogXCJcIjtcbiAgfVxuXG4gIHZhciByb290S2V5cGF0aCA9IGdldEtleXBhdGgoXCJcIik7XG5cbiAgdmFyIHNoYXJlZF9hZGQgPSBhZGQ7XG4gIHZhciBzaGFyZWRfYWRkX19lcnJvck1lc3NhZ2UgPSBcIkNhbm5vdCBhZGQgdG8gYSBub24tbnVtZXJpYyB2YWx1ZVwiO1xuICBmdW5jdGlvbiBhZGQocm9vdCwga2V5cGF0aCwgZCkge1xuICBcdGlmICh0eXBlb2Yga2V5cGF0aCAhPT0gXCJzdHJpbmdcIiB8fCAhaXNfX2lzTnVtZXJpYyhkKSkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQmFkIGFyZ3VtZW50c1wiKTtcbiAgXHR9XG5cbiAgXHR2YXIgdmFsdWUgPSB1bmRlZmluZWQsXG4gIFx0ICAgIGNoYW5nZXMgPSB1bmRlZmluZWQ7XG5cbiAgXHRpZiAoL1xcKi8udGVzdChrZXlwYXRoKSkge1xuICBcdFx0Y2hhbmdlcyA9IHt9O1xuXG4gIFx0XHRnZXRNYXRjaGluZ0tleXBhdGhzKHJvb3QsIGdldEtleXBhdGgobm9ybWFsaXNlKGtleXBhdGgpKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0XHR2YXIgdmFsdWUgPSByb290LnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG5cbiAgXHRcdFx0aWYgKCFpc19faXNOdW1lcmljKHZhbHVlKSkge1xuICBcdFx0XHRcdHRocm93IG5ldyBFcnJvcihzaGFyZWRfYWRkX19lcnJvck1lc3NhZ2UpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0Y2hhbmdlc1trZXlwYXRoLnN0cl0gPSB2YWx1ZSArIGQ7XG4gIFx0XHR9KTtcblxuICBcdFx0cmV0dXJuIHJvb3Quc2V0KGNoYW5nZXMpO1xuICBcdH1cblxuICBcdHZhbHVlID0gcm9vdC5nZXQoa2V5cGF0aCk7XG5cbiAgXHRpZiAoIWlzX19pc051bWVyaWModmFsdWUpKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3Ioc2hhcmVkX2FkZF9fZXJyb3JNZXNzYWdlKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcm9vdC5zZXQoa2V5cGF0aCwgK3ZhbHVlICsgZCk7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2FkZCA9IFJhY3RpdmUkYWRkO1xuICBmdW5jdGlvbiBSYWN0aXZlJGFkZChrZXlwYXRoLCBkKSB7XG4gIFx0cmV0dXJuIHNoYXJlZF9hZGQodGhpcywga2V5cGF0aCwgZCA9PT0gdW5kZWZpbmVkID8gMSA6ICtkKTtcbiAgfVxuXG4gIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbiAgLy8gSWYgd2luZG93IGRvZXNuJ3QgZXhpc3QsIHdlIGRvbid0IG5lZWQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgXHQvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvMTU3OTY3MVxuICBcdChmdW5jdGlvbiAodmVuZG9ycywgbGFzdFRpbWUsIHdpbmRvdykge1xuXG4gIFx0XHR2YXIgeCwgc2V0VGltZW91dDtcblxuICBcdFx0aWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHRmb3IgKHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICBcdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0gKyBcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gIFx0XHRcdHNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dDtcblxuICBcdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIFx0XHRcdFx0dmFyIGN1cnJUaW1lLCB0aW1lVG9DYWxsLCBpZDtcblxuICBcdFx0XHRcdGN1cnJUaW1lID0gRGF0ZS5ub3coKTtcbiAgXHRcdFx0XHR0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICBcdFx0XHRcdGlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0XHRjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICBcdFx0XHRcdH0sIHRpbWVUb0NhbGwpO1xuXG4gIFx0XHRcdFx0bGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gIFx0XHRcdFx0cmV0dXJuIGlkO1xuICBcdFx0XHR9O1xuICBcdFx0fVxuICBcdH0pKHZlbmRvcnMsIDAsIHdpbmRvdyk7XG5cbiAgXHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICB9XG5cbiAgdmFyIHJBRiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuICB2YXIgZ2V0VGltZTtcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cucGVyZm9ybWFuY2UgJiYgdHlwZW9mIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdGdldFRpbWUgPSBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICBcdH07XG4gIH0gZWxzZSB7XG4gIFx0Z2V0VGltZSA9IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiBEYXRlLm5vdygpO1xuICBcdH07XG4gIH1cblxuICB2YXIgdXRpbHNfZ2V0VGltZSA9IGdldFRpbWU7XG5cbiAgdmFyIGRlcHJlY2F0aW9ucyA9IHtcbiAgXHRjb25zdHJ1Y3Q6IHtcbiAgXHRcdGRlcHJlY2F0ZWQ6IFwiYmVmb3JlSW5pdFwiLFxuICBcdFx0cmVwbGFjZW1lbnQ6IFwib25jb25zdHJ1Y3RcIlxuICBcdH0sXG4gIFx0cmVuZGVyOiB7XG4gIFx0XHRkZXByZWNhdGVkOiBcImluaXRcIixcbiAgXHRcdG1lc3NhZ2U6IFwiVGhlIFxcXCJpbml0XFxcIiBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCBcIiArIFwiYW5kIHdpbGwgbGlrZWx5IGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gXCIgKyBcIllvdSBjYW4gZWl0aGVyIHVzZSB0aGUgXFxcIm9uaW5pdFxcXCIgbWV0aG9kIHdoaWNoIHdpbGwgZmlyZSBcIiArIFwib25seSBvbmNlIHByaW9yIHRvLCBhbmQgcmVnYXJkbGVzcyBvZiwgYW55IGV2ZW50dWFsIHJhY3RpdmUgXCIgKyBcImluc3RhbmNlIGJlaW5nIHJlbmRlcmVkLCBvciBpZiB5b3UgbmVlZCB0byBhY2Nlc3MgdGhlIFwiICsgXCJyZW5kZXJlZCBET00sIHVzZSBcXFwib25yZW5kZXJcXFwiIGluc3RlYWQuIFwiICsgXCJTZWUgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZy9sYXRlc3QvbWlncmF0aW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLlwiXG4gIFx0fSxcbiAgXHRjb21wbGV0ZToge1xuICBcdFx0ZGVwcmVjYXRlZDogXCJjb21wbGV0ZVwiLFxuICBcdFx0cmVwbGFjZW1lbnQ6IFwib25jb21wbGV0ZVwiXG4gIFx0fVxuICB9O1xuXG4gIGZ1bmN0aW9uIEhvb2soZXZlbnQpIHtcbiAgXHR0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gIFx0dGhpcy5tZXRob2QgPSBcIm9uXCIgKyBldmVudDtcbiAgXHR0aGlzLmRlcHJlY2F0ZSA9IGRlcHJlY2F0aW9uc1tldmVudF07XG4gIH1cblxuICBIb29rLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKHJhY3RpdmUsIGFyZykge1xuICBcdGZ1bmN0aW9uIGNhbGwobWV0aG9kKSB7XG4gIFx0XHRpZiAocmFjdGl2ZVttZXRob2RdKSB7XG4gIFx0XHRcdGFyZyA/IHJhY3RpdmVbbWV0aG9kXShhcmcpIDogcmFjdGl2ZVttZXRob2RdKCk7XG4gIFx0XHRcdHJldHVybiB0cnVlO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGNhbGwodGhpcy5tZXRob2QpO1xuXG4gIFx0aWYgKCFyYWN0aXZlW3RoaXMubWV0aG9kXSAmJiB0aGlzLmRlcHJlY2F0ZSAmJiBjYWxsKHRoaXMuZGVwcmVjYXRlLmRlcHJlY2F0ZWQpKSB7XG4gIFx0XHRpZiAodGhpcy5kZXByZWNhdGUubWVzc2FnZSkge1xuICBcdFx0XHR3YXJuSWZEZWJ1Zyh0aGlzLmRlcHJlY2F0ZS5tZXNzYWdlKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHdhcm5JZkRlYnVnKFwiVGhlIG1ldGhvZCBcXFwiJXNcXFwiIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgXFxcIiVzXFxcIiBhbmQgd2lsbCBsaWtlbHkgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLiBTZWUgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZy9sYXRlc3QvbWlncmF0aW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLlwiLCB0aGlzLmRlcHJlY2F0ZS5kZXByZWNhdGVkLCB0aGlzLmRlcHJlY2F0ZS5yZXBsYWNlbWVudCk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0YXJnID8gcmFjdGl2ZS5maXJlKHRoaXMuZXZlbnQsIGFyZykgOiByYWN0aXZlLmZpcmUodGhpcy5ldmVudCk7XG4gIH07XG5cbiAgdmFyIGhvb2tzX0hvb2sgPSBIb29rO1xuXG4gIGZ1bmN0aW9uIGFkZFRvQXJyYXkoYXJyYXksIHZhbHVlKSB7XG4gIFx0dmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG5cbiAgXHRpZiAoaW5kZXggPT09IC0xKSB7XG4gIFx0XHRhcnJheS5wdXNoKHZhbHVlKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBhcnJheUNvbnRhaW5zKGFycmF5LCB2YWx1ZSkge1xuICBcdGZvciAodmFyIGkgPSAwLCBjID0gYXJyYXkubGVuZ3RoOyBpIDwgYzsgaSsrKSB7XG4gIFx0XHRpZiAoYXJyYXlbaV0gPT0gdmFsdWUpIHtcbiAgXHRcdFx0cmV0dXJuIHRydWU7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlDb250ZW50c01hdGNoKGEsIGIpIHtcbiAgXHR2YXIgaTtcblxuICBcdGlmICghaXNBcnJheShhKSB8fCAhaXNBcnJheShiKSkge1xuICBcdFx0cmV0dXJuIGZhbHNlO1xuICBcdH1cblxuICBcdGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgXHRcdHJldHVybiBmYWxzZTtcbiAgXHR9XG5cbiAgXHRpID0gYS5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0aWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5zdXJlQXJyYXkoeCkge1xuICBcdGlmICh0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0cmV0dXJuIFt4XTtcbiAgXHR9XG5cbiAgXHRpZiAoeCA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRyZXR1cm4gW107XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHg7XG4gIH1cblxuICBmdW5jdGlvbiBsYXN0SXRlbShhcnJheSkge1xuICBcdHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUZyb21BcnJheShhcnJheSwgbWVtYmVyKSB7XG4gIFx0dmFyIGluZGV4ID0gYXJyYXkuaW5kZXhPZihtZW1iZXIpO1xuXG4gIFx0aWYgKGluZGV4ICE9PSAtMSkge1xuICBcdFx0YXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiB0b0FycmF5KGFycmF5TGlrZSkge1xuICBcdHZhciBhcnJheSA9IFtdLFxuICBcdCAgICBpID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgXHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRhcnJheVtpXSA9IGFycmF5TGlrZVtpXTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gYXJyYXk7XG4gIH1cblxuICB2YXIgX1Byb21pc2UsXG4gICAgICBQRU5ESU5HID0ge30sXG4gICAgICBGVUxGSUxMRUQgPSB7fSxcbiAgICAgIFJFSkVDVEVEID0ge307XG5cbiAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHQvLyB1c2UgbmF0aXZlIFByb21pc2VcbiAgXHRfUHJvbWlzZSA9IFByb21pc2U7XG4gIH0gZWxzZSB7XG4gIFx0X1Byb21pc2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgXHRcdHZhciBmdWxmaWxsZWRIYW5kbGVycyA9IFtdLFxuICBcdFx0ICAgIHJlamVjdGVkSGFuZGxlcnMgPSBbXSxcbiAgXHRcdCAgICBzdGF0ZSA9IFBFTkRJTkcsXG4gIFx0XHQgICAgcmVzdWx0LFxuICBcdFx0ICAgIGRpc3BhdGNoSGFuZGxlcnMsXG4gIFx0XHQgICAgbWFrZVJlc29sdmVyLFxuICBcdFx0ICAgIGZ1bGZpbCxcbiAgXHRcdCAgICByZWplY3QsXG4gIFx0XHQgICAgcHJvbWlzZTtcblxuICBcdFx0bWFrZVJlc29sdmVyID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XG4gIFx0XHRcdHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgXHRcdFx0XHRpZiAoc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgXHRcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRyZXN1bHQgPSB2YWx1ZTtcbiAgXHRcdFx0XHRzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gIFx0XHRcdFx0ZGlzcGF0Y2hIYW5kbGVycyA9IG1ha2VEaXNwYXRjaGVyKHN0YXRlID09PSBGVUxGSUxMRUQgPyBmdWxmaWxsZWRIYW5kbGVycyA6IHJlamVjdGVkSGFuZGxlcnMsIHJlc3VsdCk7XG5cbiAgXHRcdFx0XHQvLyBkaXNwYXRjaCBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBoYW5kbGVycyBhc3luY2hyb25vdXNseVxuICBcdFx0XHRcdHdhaXQoZGlzcGF0Y2hIYW5kbGVycyk7XG4gIFx0XHRcdH07XG4gIFx0XHR9O1xuXG4gIFx0XHRmdWxmaWwgPSBtYWtlUmVzb2x2ZXIoRlVMRklMTEVEKTtcbiAgXHRcdHJlamVjdCA9IG1ha2VSZXNvbHZlcihSRUpFQ1RFRCk7XG5cbiAgXHRcdHRyeSB7XG4gIFx0XHRcdGNhbGxiYWNrKGZ1bGZpbCwgcmVqZWN0KTtcbiAgXHRcdH0gY2F0Y2ggKGVycikge1xuICBcdFx0XHRyZWplY3QoZXJyKTtcbiAgXHRcdH1cblxuICBcdFx0cHJvbWlzZSA9IHtcbiAgXHRcdFx0Ly8gYHRoZW4oKWAgcmV0dXJucyBhIFByb21pc2UgLSAyLjIuN1xuICBcdFx0XHR0aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgXHRcdFx0XHR2YXIgcHJvbWlzZTIgPSBuZXcgX1Byb21pc2UoZnVuY3Rpb24gKGZ1bGZpbCwgcmVqZWN0KSB7XG5cbiAgXHRcdFx0XHRcdHZhciBwcm9jZXNzUmVzb2x1dGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlciwgaGFuZGxlcnMsIGZvcndhcmQpIHtcblxuICBcdFx0XHRcdFx0XHQvLyAyLjIuMS4xXG4gIFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRcdFx0XHRcdFx0aGFuZGxlcnMucHVzaChmdW5jdGlvbiAocDFyZXN1bHQpIHtcbiAgXHRcdFx0XHRcdFx0XHRcdHZhciB4O1xuXG4gIFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuICBcdFx0XHRcdFx0XHRcdFx0XHR4ID0gaGFuZGxlcihwMXJlc3VsdCk7XG4gIFx0XHRcdFx0XHRcdFx0XHRcdHV0aWxzX1Byb21pc2VfX3Jlc29sdmUocHJvbWlzZTIsIHgsIGZ1bGZpbCwgcmVqZWN0KTtcbiAgXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuICBcdFx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyKTtcbiAgXHRcdFx0XHRcdFx0XHRcdH1cbiAgXHRcdFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdFx0XHQvLyBGb3J3YXJkIHRoZSByZXN1bHQgb2YgcHJvbWlzZTEgdG8gcHJvbWlzZTIsIGlmIHJlc29sdXRpb24gaGFuZGxlcnNcbiAgXHRcdFx0XHRcdFx0XHQvLyBhcmUgbm90IGdpdmVuXG4gIFx0XHRcdFx0XHRcdFx0aGFuZGxlcnMucHVzaChmb3J3YXJkKTtcbiAgXHRcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0fTtcblxuICBcdFx0XHRcdFx0Ly8gMi4yXG4gIFx0XHRcdFx0XHRwcm9jZXNzUmVzb2x1dGlvbkhhbmRsZXIob25GdWxmaWxsZWQsIGZ1bGZpbGxlZEhhbmRsZXJzLCBmdWxmaWwpO1xuICBcdFx0XHRcdFx0cHJvY2Vzc1Jlc29sdXRpb25IYW5kbGVyKG9uUmVqZWN0ZWQsIHJlamVjdGVkSGFuZGxlcnMsIHJlamVjdCk7XG5cbiAgXHRcdFx0XHRcdGlmIChzdGF0ZSAhPT0gUEVORElORykge1xuICBcdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJvbWlzZSBoYXMgcmVzb2x2ZWQgYWxyZWFkeSwgZGlzcGF0Y2ggdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXJzIGFzeW5jaHJvbm91c2x5XG4gIFx0XHRcdFx0XHRcdHdhaXQoZGlzcGF0Y2hIYW5kbGVycyk7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fSk7XG5cbiAgXHRcdFx0XHRyZXR1cm4gcHJvbWlzZTI7XG4gIFx0XHRcdH1cbiAgXHRcdH07XG5cbiAgXHRcdHByb21pc2VbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG4gIFx0XHR9O1xuXG4gIFx0XHRyZXR1cm4gcHJvbWlzZTtcbiAgXHR9O1xuXG4gIFx0X1Byb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gIFx0XHRyZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChmdWxmaWwsIHJlamVjdCkge1xuICBcdFx0XHR2YXIgcmVzdWx0ID0gW10sXG4gIFx0XHRcdCAgICBwZW5kaW5nLFxuICBcdFx0XHQgICAgaSxcbiAgXHRcdFx0ICAgIHByb2Nlc3NQcm9taXNlO1xuXG4gIFx0XHRcdGlmICghcHJvbWlzZXMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0ZnVsZmlsKHJlc3VsdCk7XG4gIFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0cHJvY2Vzc1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICBcdFx0XHRcdGlmIChwcm9taXNlICYmIHR5cGVvZiBwcm9taXNlLnRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRcdFx0cHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICBcdFx0XHRcdFx0XHRyZXN1bHRbaV0gPSB2YWx1ZTtcbiAgXHRcdFx0XHRcdFx0LS1wZW5kaW5nIHx8IGZ1bGZpbChyZXN1bHQpO1xuICBcdFx0XHRcdFx0fSwgcmVqZWN0KTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0cmVzdWx0W2ldID0gcHJvbWlzZTtcbiAgXHRcdFx0XHRcdC0tcGVuZGluZyB8fCBmdWxmaWwocmVzdWx0KTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH07XG5cbiAgXHRcdFx0cGVuZGluZyA9IGkgPSBwcm9taXNlcy5sZW5ndGg7XG4gIFx0XHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0XHRwcm9jZXNzUHJvbWlzZShwcm9taXNlc1tpXSwgaSk7XG4gIFx0XHRcdH1cbiAgXHRcdH0pO1xuICBcdH07XG5cbiAgXHRfUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIFx0XHRyZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChmdWxmaWwpIHtcbiAgXHRcdFx0ZnVsZmlsKHZhbHVlKTtcbiAgXHRcdH0pO1xuICBcdH07XG5cbiAgXHRfUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gIFx0XHRyZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChmdWxmaWwsIHJlamVjdCkge1xuICBcdFx0XHRyZWplY3QocmVhc29uKTtcbiAgXHRcdH0pO1xuICBcdH07XG4gIH1cblxuICB2YXIgdXRpbHNfUHJvbWlzZSA9IF9Qcm9taXNlO1xuXG4gIC8vIFRPRE8gdXNlIE11dGF0aW9uT2JzZXJ2ZXJzIG9yIHNvbWV0aGluZyB0byBzaW11bGF0ZSBzZXRJbW1lZGlhdGVcbiAgZnVuY3Rpb24gd2FpdChjYWxsYmFjaykge1xuICBcdHNldFRpbWVvdXQoY2FsbGJhY2ssIDApO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZURpc3BhdGNoZXIoaGFuZGxlcnMsIHJlc3VsdCkge1xuICBcdHJldHVybiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgaGFuZGxlcjtcblxuICBcdFx0d2hpbGUgKGhhbmRsZXIgPSBoYW5kbGVycy5zaGlmdCgpKSB7XG4gIFx0XHRcdGhhbmRsZXIocmVzdWx0KTtcbiAgXHRcdH1cbiAgXHR9O1xuICB9XG5cbiAgZnVuY3Rpb24gdXRpbHNfUHJvbWlzZV9fcmVzb2x2ZShwcm9taXNlLCB4LCBmdWxmaWwsIHJlamVjdCkge1xuICBcdC8vIFByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmVcbiAgXHR2YXIgdGhlbjtcblxuICBcdC8vIDIuMy4xXG4gIFx0aWYgKHggPT09IHByb21pc2UpIHtcbiAgXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2UncyBmdWxmaWxsbWVudCBoYW5kbGVyIGNhbm5vdCByZXR1cm4gdGhlIHNhbWUgcHJvbWlzZVwiKTtcbiAgXHR9XG5cbiAgXHQvLyAyLjMuMlxuICBcdGlmICh4IGluc3RhbmNlb2YgX1Byb21pc2UpIHtcbiAgXHRcdHgudGhlbihmdWxmaWwsIHJlamVjdCk7XG4gIFx0fVxuXG4gIFx0Ly8gMi4zLjNcbiAgXHRlbHNlIGlmICh4ICYmICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICBcdFx0dHJ5IHtcbiAgXHRcdFx0dGhlbiA9IHgudGhlbjsgLy8gMi4zLjMuMVxuICBcdFx0fSBjYXRjaCAoZSkge1xuICBcdFx0XHRyZWplY3QoZSk7IC8vIDIuMy4zLjJcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHQvLyAyLjMuMy4zXG4gIFx0XHRpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHR2YXIgY2FsbGVkLCByZXNvbHZlUHJvbWlzZSwgcmVqZWN0UHJvbWlzZTtcblxuICBcdFx0XHRyZXNvbHZlUHJvbWlzZSA9IGZ1bmN0aW9uICh5KSB7XG4gIFx0XHRcdFx0aWYgKGNhbGxlZCkge1xuICBcdFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuICBcdFx0XHRcdHV0aWxzX1Byb21pc2VfX3Jlc29sdmUocHJvbWlzZSwgeSwgZnVsZmlsLCByZWplY3QpO1xuICBcdFx0XHR9O1xuXG4gIFx0XHRcdHJlamVjdFByb21pc2UgPSBmdW5jdGlvbiAocikge1xuICBcdFx0XHRcdGlmIChjYWxsZWQpIHtcbiAgXHRcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcbiAgXHRcdFx0XHRyZWplY3Qocik7XG4gIFx0XHRcdH07XG5cbiAgXHRcdFx0dHJ5IHtcbiAgXHRcdFx0XHR0aGVuLmNhbGwoeCwgcmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2UpO1xuICBcdFx0XHR9IGNhdGNoIChlKSB7XG4gIFx0XHRcdFx0aWYgKCFjYWxsZWQpIHtcbiAgXHRcdFx0XHRcdC8vIDIuMy4zLjMuNC4xXG4gIFx0XHRcdFx0XHRyZWplY3QoZSk7IC8vIDIuMy4zLjMuNC4yXG4gIFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuICBcdFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0ZnVsZmlsKHgpO1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHRmdWxmaWwoeCk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIGdldElubmVyQ29udGV4dCA9IGZ1bmN0aW9uIChmcmFnbWVudCkge1xuICBcdGRvIHtcbiAgXHRcdGlmIChmcmFnbWVudC5jb250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0cmV0dXJuIGZyYWdtZW50LmNvbnRleHQ7XG4gIFx0XHR9XG4gIFx0fSB3aGlsZSAoZnJhZ21lbnQgPSBmcmFnbWVudC5wYXJlbnQpO1xuXG4gIFx0cmV0dXJuIHJvb3RLZXlwYXRoO1xuICB9O1xuXG4gIHZhciBzaGFyZWRfcmVzb2x2ZVJlZiA9IHJlc29sdmVSZWY7XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZVJlZihyYWN0aXZlLCByZWYsIGZyYWdtZW50KSB7XG4gIFx0dmFyIGtleXBhdGg7XG5cbiAgXHRyZWYgPSBub3JtYWxpc2UocmVmKTtcblxuICBcdC8vIElmIGEgcmVmZXJlbmNlIGJlZ2lucyAnfi8nLCBpdCdzIGEgdG9wLWxldmVsIHJlZmVyZW5jZVxuICBcdGlmIChyZWYuc3Vic3RyKDAsIDIpID09PSBcIn4vXCIpIHtcbiAgXHRcdGtleXBhdGggPSBnZXRLZXlwYXRoKHJlZi5zdWJzdHJpbmcoMikpO1xuICBcdFx0Y3JlYXRlTWFwcGluZ0lmTmVjZXNzYXJ5KHJhY3RpdmUsIGtleXBhdGguZmlyc3RLZXksIGZyYWdtZW50KTtcbiAgXHR9XG5cbiAgXHQvLyBJZiBhIHJlZmVyZW5jZSBiZWdpbnMgd2l0aCAnLicsIGl0J3MgZWl0aGVyIGEgcmVzdHJpY3RlZCByZWZlcmVuY2Ugb3JcbiAgXHQvLyBhbiBhbmNlc3RvciByZWZlcmVuY2UuLi5cbiAgXHRlbHNlIGlmIChyZWZbMF0gPT09IFwiLlwiKSB7XG4gIFx0XHRrZXlwYXRoID0gcmVzb2x2ZUFuY2VzdG9yUmVmKGdldElubmVyQ29udGV4dChmcmFnbWVudCksIHJlZik7XG5cbiAgXHRcdGlmIChrZXlwYXRoKSB7XG4gIFx0XHRcdGNyZWF0ZU1hcHBpbmdJZk5lY2Vzc2FyeShyYWN0aXZlLCBrZXlwYXRoLmZpcnN0S2V5LCBmcmFnbWVudCk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gLi4ub3RoZXJ3aXNlIHdlIG5lZWQgdG8gZmlndXJlIG91dCB0aGUga2V5cGF0aCBiYXNlZCBvbiBjb250ZXh0XG4gIFx0ZWxzZSB7XG4gIFx0XHRrZXlwYXRoID0gcmVzb2x2ZUFtYmlndW91c1JlZmVyZW5jZShyYWN0aXZlLCBnZXRLZXlwYXRoKHJlZiksIGZyYWdtZW50KTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4ga2V5cGF0aDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVBbmNlc3RvclJlZihiYXNlQ29udGV4dCwgcmVmKSB7XG4gIFx0dmFyIGNvbnRleHRLZXlzO1xuXG4gIFx0Ly8gVE9ETy4uLlxuICBcdGlmIChiYXNlQ29udGV4dCAhPSB1bmRlZmluZWQgJiYgdHlwZW9mIGJhc2VDb250ZXh0ICE9PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRiYXNlQ29udGV4dCA9IGJhc2VDb250ZXh0LnN0cjtcbiAgXHR9XG5cbiAgXHQvLyB7ey59fSBtZWFucyAnY3VycmVudCBjb250ZXh0J1xuICBcdGlmIChyZWYgPT09IFwiLlwiKSByZXR1cm4gZ2V0S2V5cGF0aChiYXNlQ29udGV4dCk7XG5cbiAgXHRjb250ZXh0S2V5cyA9IGJhc2VDb250ZXh0ID8gYmFzZUNvbnRleHQuc3BsaXQoXCIuXCIpIDogW107XG5cbiAgXHQvLyBhbmNlc3RvciByZWZlcmVuY2VzIChzdGFydGluZyBcIi4uL1wiKSBnbyB1cCB0aGUgdHJlZVxuICBcdGlmIChyZWYuc3Vic3RyKDAsIDMpID09PSBcIi4uL1wiKSB7XG4gIFx0XHR3aGlsZSAocmVmLnN1YnN0cigwLCAzKSA9PT0gXCIuLi9cIikge1xuICBcdFx0XHRpZiAoIWNvbnRleHRLZXlzLmxlbmd0aCkge1xuICBcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCByZXNvbHZlIHJlZmVyZW5jZSAtIHRvbyBtYW55IFxcXCIuLi9cXFwiIHByZWZpeGVzXCIpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0Y29udGV4dEtleXMucG9wKCk7XG4gIFx0XHRcdHJlZiA9IHJlZi5zdWJzdHJpbmcoMyk7XG4gIFx0XHR9XG5cbiAgXHRcdGNvbnRleHRLZXlzLnB1c2gocmVmKTtcbiAgXHRcdHJldHVybiBnZXRLZXlwYXRoKGNvbnRleHRLZXlzLmpvaW4oXCIuXCIpKTtcbiAgXHR9XG5cbiAgXHQvLyBub3QgYW4gYW5jZXN0b3IgcmVmZXJlbmNlIC0gbXVzdCBiZSBhIHJlc3RyaWN0ZWQgcmVmZXJlbmNlIChwcmVwZW5kZWQgd2l0aCBcIi5cIiBvciBcIi4vXCIpXG4gIFx0aWYgKCFiYXNlQ29udGV4dCkge1xuICBcdFx0cmV0dXJuIGdldEtleXBhdGgocmVmLnJlcGxhY2UoL15cXC5cXC8/LywgXCJcIikpO1xuICBcdH1cblxuICBcdHJldHVybiBnZXRLZXlwYXRoKGJhc2VDb250ZXh0ICsgcmVmLnJlcGxhY2UoL15cXC5cXC8vLCBcIi5cIikpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUFtYmlndW91c1JlZmVyZW5jZShyYWN0aXZlLCByZWYsIGZyYWdtZW50LCBpc1BhcmVudExvb2t1cCkge1xuICBcdHZhciBjb250ZXh0LCBrZXksIHBhcmVudFZhbHVlLCBoYXNDb250ZXh0Q2hhaW4sIHBhcmVudEtleXBhdGg7XG5cbiAgXHRpZiAocmVmLmlzUm9vdCkge1xuICBcdFx0cmV0dXJuIHJlZjtcbiAgXHR9XG5cbiAgXHRrZXkgPSByZWYuZmlyc3RLZXk7XG5cbiAgXHR3aGlsZSAoZnJhZ21lbnQpIHtcbiAgXHRcdGNvbnRleHQgPSBmcmFnbWVudC5jb250ZXh0O1xuICBcdFx0ZnJhZ21lbnQgPSBmcmFnbWVudC5wYXJlbnQ7XG5cbiAgXHRcdGlmICghY29udGV4dCkge1xuICBcdFx0XHRjb250aW51ZTtcbiAgXHRcdH1cblxuICBcdFx0aGFzQ29udGV4dENoYWluID0gdHJ1ZTtcbiAgXHRcdHBhcmVudFZhbHVlID0gcmFjdGl2ZS52aWV3bW9kZWwuZ2V0KGNvbnRleHQpO1xuXG4gIFx0XHRpZiAocGFyZW50VmFsdWUgJiYgKHR5cGVvZiBwYXJlbnRWYWx1ZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgcGFyZW50VmFsdWUgPT09IFwiZnVuY3Rpb25cIikgJiYga2V5IGluIHBhcmVudFZhbHVlKSB7XG4gIFx0XHRcdHJldHVybiBjb250ZXh0LmpvaW4ocmVmLnN0cik7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gUm9vdC9jb21wdXRlZC9tYXBwZWQgcHJvcGVydHk/XG4gIFx0aWYgKGlzUm9vdFByb3BlcnR5KHJhY3RpdmUudmlld21vZGVsLCBrZXkpKSB7XG4gIFx0XHRyZXR1cm4gcmVmO1xuICBcdH1cblxuICBcdC8vIElmIHRoaXMgaXMgYW4gaW5saW5lIGNvbXBvbmVudCwgYW5kIGl0J3Mgbm90IGlzb2xhdGVkLCB3ZVxuICBcdC8vIGNhbiB0cnkgZ29pbmcgdXAgdGhlIHNjb3BlIGNoYWluXG4gIFx0aWYgKHJhY3RpdmUucGFyZW50ICYmICFyYWN0aXZlLmlzb2xhdGVkKSB7XG4gIFx0XHRoYXNDb250ZXh0Q2hhaW4gPSB0cnVlO1xuICBcdFx0ZnJhZ21lbnQgPSByYWN0aXZlLmNvbXBvbmVudC5wYXJlbnRGcmFnbWVudDtcblxuICBcdFx0a2V5ID0gZ2V0S2V5cGF0aChrZXkpO1xuXG4gIFx0XHRpZiAocGFyZW50S2V5cGF0aCA9IHJlc29sdmVBbWJpZ3VvdXNSZWZlcmVuY2UocmFjdGl2ZS5wYXJlbnQsIGtleSwgZnJhZ21lbnQsIHRydWUpKSB7XG4gIFx0XHRcdC8vIFdlIG5lZWQgdG8gY3JlYXRlIGFuIGludGVyLWNvbXBvbmVudCBiaW5kaW5nXG4gIFx0XHRcdHJhY3RpdmUudmlld21vZGVsLm1hcChrZXksIHtcbiAgXHRcdFx0XHRvcmlnaW46IHJhY3RpdmUucGFyZW50LnZpZXdtb2RlbCxcbiAgXHRcdFx0XHRrZXlwYXRoOiBwYXJlbnRLZXlwYXRoXG4gIFx0XHRcdH0pO1xuXG4gIFx0XHRcdHJldHVybiByZWY7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gSWYgdGhlcmUncyBubyBjb250ZXh0IGNoYWluLCBhbmQgdGhlIGluc3RhbmNlIGlzIGVpdGhlciBhKSBpc29sYXRlZCBvclxuICBcdC8vIGIpIGFuIG9ycGhhbiwgdGhlbiB3ZSBrbm93IHRoYXQgdGhlIGtleXBhdGggaXMgaWRlbnRpY2FsIHRvIHRoZSByZWZlcmVuY2VcbiAgXHRpZiAoIWlzUGFyZW50TG9va3VwICYmICFoYXNDb250ZXh0Q2hhaW4pIHtcbiAgXHRcdC8vIHRoZSBkYXRhIG9iamVjdCBuZWVkcyB0byBoYXZlIGEgcHJvcGVydHkgYnkgdGhpcyBuYW1lLFxuICBcdFx0Ly8gdG8gcHJldmVudCBmdXR1cmUgZmFpbGVkIGxvb2t1cHNcbiAgXHRcdHJhY3RpdmUudmlld21vZGVsLnNldChyZWYsIHVuZGVmaW5lZCk7XG4gIFx0XHRyZXR1cm4gcmVmO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZU1hcHBpbmdJZk5lY2Vzc2FyeShyYWN0aXZlLCBrZXkpIHtcbiAgXHR2YXIgcGFyZW50S2V5cGF0aDtcblxuICBcdGlmICghcmFjdGl2ZS5wYXJlbnQgfHwgcmFjdGl2ZS5pc29sYXRlZCB8fCBpc1Jvb3RQcm9wZXJ0eShyYWN0aXZlLnZpZXdtb2RlbCwga2V5KSkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdGtleSA9IGdldEtleXBhdGgoa2V5KTtcblxuICBcdGlmIChwYXJlbnRLZXlwYXRoID0gcmVzb2x2ZUFtYmlndW91c1JlZmVyZW5jZShyYWN0aXZlLnBhcmVudCwga2V5LCByYWN0aXZlLmNvbXBvbmVudC5wYXJlbnRGcmFnbWVudCwgdHJ1ZSkpIHtcbiAgXHRcdHJhY3RpdmUudmlld21vZGVsLm1hcChrZXksIHtcbiAgXHRcdFx0b3JpZ2luOiByYWN0aXZlLnBhcmVudC52aWV3bW9kZWwsXG4gIFx0XHRcdGtleXBhdGg6IHBhcmVudEtleXBhdGhcbiAgXHRcdH0pO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUm9vdFByb3BlcnR5KHZpZXdtb2RlbCwga2V5KSB7XG4gIFx0Ly8gc3BlY2lhbCBjYXNlIGZvciByZWZlcmVuY2UgdG8gcm9vdFxuICBcdHJldHVybiBrZXkgPT09IFwiXCIgfHwga2V5IGluIHZpZXdtb2RlbC5kYXRhIHx8IGtleSBpbiB2aWV3bW9kZWwuY29tcHV0YXRpb25zIHx8IGtleSBpbiB2aWV3bW9kZWwubWFwcGluZ3M7XG4gIH1cblxuICBmdW5jdGlvbiB0ZWFyZG93bih4KSB7XG4gICAgeC50ZWFyZG93bigpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWV0aG9kQ2FsbGVyc19fdW5iaW5kKHgpIHtcbiAgICB4LnVuYmluZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWV0aG9kQ2FsbGVyc19fdW5yZW5kZXIoeCkge1xuICAgIHgudW5yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCh4KSB7XG4gICAgeC5jYW5jZWwoKTtcbiAgfVxuXG4gIHZhciBUcmFuc2l0aW9uTWFuYWdlciA9IGZ1bmN0aW9uIChjYWxsYmFjaywgcGFyZW50KSB7XG4gIFx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICBcdHRoaXMucGFyZW50ID0gcGFyZW50O1xuXG4gIFx0dGhpcy5pbnRyb3MgPSBbXTtcbiAgXHR0aGlzLm91dHJvcyA9IFtdO1xuXG4gIFx0dGhpcy5jaGlsZHJlbiA9IFtdO1xuICBcdHRoaXMudG90YWxDaGlsZHJlbiA9IHRoaXMub3V0cm9DaGlsZHJlbiA9IDA7XG5cbiAgXHR0aGlzLmRldGFjaFF1ZXVlID0gW107XG4gIFx0dGhpcy5kZWNvcmF0b3JRdWV1ZSA9IFtdO1xuICBcdHRoaXMub3V0cm9zQ29tcGxldGUgPSBmYWxzZTtcblxuICBcdGlmIChwYXJlbnQpIHtcbiAgXHRcdHBhcmVudC5hZGRDaGlsZCh0aGlzKTtcbiAgXHR9XG4gIH07XG5cbiAgVHJhbnNpdGlvbk1hbmFnZXIucHJvdG90eXBlID0ge1xuICBcdGFkZENoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgXHRcdHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG5cbiAgXHRcdHRoaXMudG90YWxDaGlsZHJlbiArPSAxO1xuICBcdFx0dGhpcy5vdXRyb0NoaWxkcmVuICs9IDE7XG4gIFx0fSxcblxuICBcdGRlY3JlbWVudE91dHJvczogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5vdXRyb0NoaWxkcmVuIC09IDE7XG4gIFx0XHRjaGVjayh0aGlzKTtcbiAgXHR9LFxuXG4gIFx0ZGVjcmVtZW50VG90YWw6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRoaXMudG90YWxDaGlsZHJlbiAtPSAxO1xuICBcdFx0Y2hlY2sodGhpcyk7XG4gIFx0fSxcblxuICBcdGFkZDogZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgXHRcdHZhciBsaXN0ID0gdHJhbnNpdGlvbi5pc0ludHJvID8gdGhpcy5pbnRyb3MgOiB0aGlzLm91dHJvcztcbiAgXHRcdGxpc3QucHVzaCh0cmFuc2l0aW9uKTtcbiAgXHR9LFxuXG4gIFx0YWRkRGVjb3JhdG9yOiBmdW5jdGlvbiAoZGVjb3JhdG9yKSB7XG4gIFx0XHR0aGlzLmRlY29yYXRvclF1ZXVlLnB1c2goZGVjb3JhdG9yKTtcbiAgXHR9LFxuXG4gIFx0cmVtb3ZlOiBmdW5jdGlvbiAodHJhbnNpdGlvbikge1xuICBcdFx0dmFyIGxpc3QgPSB0cmFuc2l0aW9uLmlzSW50cm8gPyB0aGlzLmludHJvcyA6IHRoaXMub3V0cm9zO1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KGxpc3QsIHRyYW5zaXRpb24pO1xuICBcdFx0Y2hlY2sodGhpcyk7XG4gIFx0fSxcblxuICBcdGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRoaXMucmVhZHkgPSB0cnVlO1xuICBcdFx0Y2hlY2sodGhpcyk7XG4gIFx0fSxcblxuICBcdGRldGFjaE5vZGVzOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmRlY29yYXRvclF1ZXVlLmZvckVhY2godGVhcmRvd24pO1xuICBcdFx0dGhpcy5kZXRhY2hRdWV1ZS5mb3JFYWNoKGRldGFjaCk7XG4gIFx0XHR0aGlzLmNoaWxkcmVuLmZvckVhY2goZGV0YWNoTm9kZXMpO1xuICBcdH1cbiAgfTtcblxuICBmdW5jdGlvbiBkZXRhY2goZWxlbWVudCkge1xuICBcdGVsZW1lbnQuZGV0YWNoKCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXRhY2hOb2Rlcyh0bSkge1xuICBcdHRtLmRldGFjaE5vZGVzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVjayh0bSkge1xuICBcdGlmICghdG0ucmVhZHkgfHwgdG0ub3V0cm9zLmxlbmd0aCB8fCB0bS5vdXRyb0NoaWxkcmVuKSByZXR1cm47XG5cbiAgXHQvLyBJZiBhbGwgb3V0cm9zIGFyZSBjb21wbGV0ZSwgYW5kIHdlIGhhdmVuJ3QgYWxyZWFkeSBkb25lIHRoaXMsXG4gIFx0Ly8gd2Ugbm90aWZ5IHRoZSBwYXJlbnQgaWYgdGhlcmUgaXMgb25lLCBvdGhlcndpc2VcbiAgXHQvLyBzdGFydCBkZXRhY2hpbmcgbm9kZXNcbiAgXHRpZiAoIXRtLm91dHJvc0NvbXBsZXRlKSB7XG4gIFx0XHRpZiAodG0ucGFyZW50KSB7XG4gIFx0XHRcdHRtLnBhcmVudC5kZWNyZW1lbnRPdXRyb3ModG0pO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dG0uZGV0YWNoTm9kZXMoKTtcbiAgXHRcdH1cblxuICBcdFx0dG0ub3V0cm9zQ29tcGxldGUgPSB0cnVlO1xuICBcdH1cblxuICBcdC8vIE9uY2UgZXZlcnl0aGluZyBpcyBkb25lLCB3ZSBjYW4gbm90aWZ5IHBhcmVudCB0cmFuc2l0aW9uXG4gIFx0Ly8gbWFuYWdlciBhbmQgY2FsbCB0aGUgY2FsbGJhY2tcbiAgXHRpZiAoIXRtLmludHJvcy5sZW5ndGggJiYgIXRtLnRvdGFsQ2hpbGRyZW4pIHtcbiAgXHRcdGlmICh0eXBlb2YgdG0uY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHR0bS5jYWxsYmFjaygpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodG0ucGFyZW50KSB7XG4gIFx0XHRcdHRtLnBhcmVudC5kZWNyZW1lbnRUb3RhbCgpO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIHZhciBnbG9iYWxfVHJhbnNpdGlvbk1hbmFnZXIgPSBUcmFuc2l0aW9uTWFuYWdlcjtcblxuICB2YXIgYmF0Y2gsXG4gICAgICBydW5sb29wLFxuICAgICAgdW5yZXNvbHZlZCA9IFtdLFxuICAgICAgY2hhbmdlSG9vayA9IG5ldyBob29rc19Ib29rKFwiY2hhbmdlXCIpO1xuXG4gIHJ1bmxvb3AgPSB7XG4gIFx0c3RhcnQ6IGZ1bmN0aW9uIChpbnN0YW5jZSwgcmV0dXJuUHJvbWlzZSkge1xuICBcdFx0dmFyIHByb21pc2UsIGZ1bGZpbFByb21pc2U7XG5cbiAgXHRcdGlmIChyZXR1cm5Qcm9taXNlKSB7XG4gIFx0XHRcdHByb21pc2UgPSBuZXcgdXRpbHNfUHJvbWlzZShmdW5jdGlvbiAoZikge1xuICBcdFx0XHRcdHJldHVybiBmdWxmaWxQcm9taXNlID0gZjtcbiAgXHRcdFx0fSk7XG4gIFx0XHR9XG5cbiAgXHRcdGJhdGNoID0ge1xuICBcdFx0XHRwcmV2aW91c0JhdGNoOiBiYXRjaCxcbiAgXHRcdFx0dHJhbnNpdGlvbk1hbmFnZXI6IG5ldyBnbG9iYWxfVHJhbnNpdGlvbk1hbmFnZXIoZnVsZmlsUHJvbWlzZSwgYmF0Y2ggJiYgYmF0Y2gudHJhbnNpdGlvbk1hbmFnZXIpLFxuICBcdFx0XHR2aWV3czogW10sXG4gIFx0XHRcdHRhc2tzOiBbXSxcbiAgXHRcdFx0cmFjdGl2ZXM6IFtdLFxuICBcdFx0XHRpbnN0YW5jZTogaW5zdGFuY2VcbiAgXHRcdH07XG5cbiAgXHRcdGlmIChpbnN0YW5jZSkge1xuICBcdFx0XHRiYXRjaC5yYWN0aXZlcy5wdXNoKGluc3RhbmNlKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHByb21pc2U7XG4gIFx0fSxcblxuICBcdGVuZDogZnVuY3Rpb24gKCkge1xuICBcdFx0Zmx1c2hDaGFuZ2VzKCk7XG5cbiAgXHRcdGJhdGNoLnRyYW5zaXRpb25NYW5hZ2VyLmluaXQoKTtcbiAgXHRcdGlmICghYmF0Y2gucHJldmlvdXNCYXRjaCAmJiAhIWJhdGNoLmluc3RhbmNlKSBiYXRjaC5pbnN0YW5jZS52aWV3bW9kZWwuY2hhbmdlcyA9IFtdO1xuICBcdFx0YmF0Y2ggPSBiYXRjaC5wcmV2aW91c0JhdGNoO1xuICBcdH0sXG5cbiAgXHRhZGRSYWN0aXZlOiBmdW5jdGlvbiAocmFjdGl2ZSkge1xuICBcdFx0aWYgKGJhdGNoKSB7XG4gIFx0XHRcdGFkZFRvQXJyYXkoYmF0Y2gucmFjdGl2ZXMsIHJhY3RpdmUpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRyZWdpc3RlclRyYW5zaXRpb246IGZ1bmN0aW9uICh0cmFuc2l0aW9uKSB7XG4gIFx0XHR0cmFuc2l0aW9uLl9tYW5hZ2VyID0gYmF0Y2gudHJhbnNpdGlvbk1hbmFnZXI7XG4gIFx0XHRiYXRjaC50cmFuc2l0aW9uTWFuYWdlci5hZGQodHJhbnNpdGlvbik7XG4gIFx0fSxcblxuICBcdHJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbiAoZGVjb3JhdG9yKSB7XG4gIFx0XHRiYXRjaC50cmFuc2l0aW9uTWFuYWdlci5hZGREZWNvcmF0b3IoZGVjb3JhdG9yKTtcbiAgXHR9LFxuXG4gIFx0YWRkVmlldzogZnVuY3Rpb24gKHZpZXcpIHtcbiAgXHRcdGJhdGNoLnZpZXdzLnB1c2godmlldyk7XG4gIFx0fSxcblxuICBcdGFkZFVucmVzb2x2ZWQ6IGZ1bmN0aW9uICh0aGluZykge1xuICBcdFx0dW5yZXNvbHZlZC5wdXNoKHRoaW5nKTtcbiAgXHR9LFxuXG4gIFx0cmVtb3ZlVW5yZXNvbHZlZDogZnVuY3Rpb24gKHRoaW5nKSB7XG4gIFx0XHRyZW1vdmVGcm9tQXJyYXkodW5yZXNvbHZlZCwgdGhpbmcpO1xuICBcdH0sXG5cbiAgXHQvLyBzeW5jaHJvbmlzZSBub2RlIGRldGFjaG1lbnRzIHdpdGggdHJhbnNpdGlvbiBlbmRzXG4gIFx0ZGV0YWNoV2hlblJlYWR5OiBmdW5jdGlvbiAodGhpbmcpIHtcbiAgXHRcdGJhdGNoLnRyYW5zaXRpb25NYW5hZ2VyLmRldGFjaFF1ZXVlLnB1c2godGhpbmcpO1xuICBcdH0sXG5cbiAgXHRzY2hlZHVsZVRhc2s6IGZ1bmN0aW9uICh0YXNrLCBwb3N0UmVuZGVyKSB7XG4gIFx0XHR2YXIgX2JhdGNoO1xuXG4gIFx0XHRpZiAoIWJhdGNoKSB7XG4gIFx0XHRcdHRhc2soKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdF9iYXRjaCA9IGJhdGNoO1xuICBcdFx0XHR3aGlsZSAocG9zdFJlbmRlciAmJiBfYmF0Y2gucHJldmlvdXNCYXRjaCkge1xuICBcdFx0XHRcdC8vIHRoaXMgY2FuJ3QgaGFwcGVuIHVudGlsIHRoZSBET00gaGFzIGJlZW4gZnVsbHkgdXBkYXRlZFxuICBcdFx0XHRcdC8vIG90aGVyd2lzZSBpbiBzb21lIHNpdHVhdGlvbnMgKHdpdGggY29tcG9uZW50cyBpbnNpZGUgZWxlbWVudHMpXG4gIFx0XHRcdFx0Ly8gdHJhbnNpdGlvbnMgYW5kIGRlY29yYXRvcnMgd2lsbCBpbml0aWFsaXNlIHByZW1hdHVyZWx5XG4gIFx0XHRcdFx0X2JhdGNoID0gX2JhdGNoLnByZXZpb3VzQmF0Y2g7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRfYmF0Y2gudGFza3MucHVzaCh0YXNrKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgdmFyIGdsb2JhbF9ydW5sb29wID0gcnVubG9vcDtcblxuICBmdW5jdGlvbiBmbHVzaENoYW5nZXMoKSB7XG4gIFx0dmFyIGksIHRoaW5nLCBjaGFuZ2VIYXNoO1xuXG4gIFx0d2hpbGUgKGJhdGNoLnJhY3RpdmVzLmxlbmd0aCkge1xuICBcdFx0dGhpbmcgPSBiYXRjaC5yYWN0aXZlcy5wb3AoKTtcbiAgXHRcdGNoYW5nZUhhc2ggPSB0aGluZy52aWV3bW9kZWwuYXBwbHlDaGFuZ2VzKCk7XG5cbiAgXHRcdGlmIChjaGFuZ2VIYXNoKSB7XG4gIFx0XHRcdGNoYW5nZUhvb2suZmlyZSh0aGluZywgY2hhbmdlSGFzaCk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0YXR0ZW1wdEtleXBhdGhSZXNvbHV0aW9uKCk7XG5cbiAgXHQvLyBOb3cgdGhhdCBjaGFuZ2VzIGhhdmUgYmVlbiBmdWxseSBwcm9wYWdhdGVkLCB3ZSBjYW4gdXBkYXRlIHRoZSBET01cbiAgXHQvLyBhbmQgY29tcGxldGUgb3RoZXIgdGFza3NcbiAgXHRmb3IgKGkgPSAwOyBpIDwgYmF0Y2gudmlld3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdGJhdGNoLnZpZXdzW2ldLnVwZGF0ZSgpO1xuICBcdH1cbiAgXHRiYXRjaC52aWV3cy5sZW5ndGggPSAwO1xuXG4gIFx0Zm9yIChpID0gMDsgaSA8IGJhdGNoLnRhc2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gIFx0XHRiYXRjaC50YXNrc1tpXSgpO1xuICBcdH1cbiAgXHRiYXRjaC50YXNrcy5sZW5ndGggPSAwO1xuXG4gIFx0Ly8gSWYgdXBkYXRpbmcgdGhlIHZpZXcgY2F1c2VkIHNvbWUgbW9kZWwgYmxvd2JhY2sgLSBlLmcuIGEgdHJpcGxlXG4gIFx0Ly8gY29udGFpbmluZyA8b3B0aW9uPiBlbGVtZW50cyBjYXVzZWQgdGhlIGJpbmRpbmcgb24gdGhlIDxzZWxlY3Q+XG4gIFx0Ly8gdG8gdXBkYXRlIC0gdGhlbiB3ZSBzdGFydCBvdmVyXG4gIFx0aWYgKGJhdGNoLnJhY3RpdmVzLmxlbmd0aCkgcmV0dXJuIGZsdXNoQ2hhbmdlcygpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXR0ZW1wdEtleXBhdGhSZXNvbHV0aW9uKCkge1xuICBcdHZhciBpLCBpdGVtLCBrZXlwYXRoLCByZXNvbHZlZDtcblxuICBcdGkgPSB1bnJlc29sdmVkLmxlbmd0aDtcblxuICBcdC8vIHNlZSBpZiB3ZSBjYW4gcmVzb2x2ZSBhbnkgdW5yZXNvbHZlZCByZWZlcmVuY2VzXG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0aXRlbSA9IHVucmVzb2x2ZWRbaV07XG5cbiAgXHRcdGlmIChpdGVtLmtleXBhdGgpIHtcbiAgXHRcdFx0Ly8gaXQgcmVzb2x2ZWQgc29tZSBvdGhlciB3YXkuIFRPRE8gaG93PyB0d28td2F5IGJpbmRpbmc/IFNlZW1zXG4gIFx0XHRcdC8vIHdlaXJkIHRoYXQgd2UnZCBzdGlsbCBlbmQgdXAgaGVyZVxuICBcdFx0XHR1bnJlc29sdmVkLnNwbGljZShpLCAxKTtcbiAgXHRcdFx0Y29udGludWU7IC8vIGF2b2lkIHJlbW92aW5nIHRoZSB3cm9uZyB0aGluZyBzaG91bGQgdGhlIG5leHQgY29uZGl0aW9uIGJlIHRydWVcbiAgXHRcdH1cblxuICBcdFx0aWYgKGtleXBhdGggPSBzaGFyZWRfcmVzb2x2ZVJlZihpdGVtLnJvb3QsIGl0ZW0ucmVmLCBpdGVtLnBhcmVudEZyYWdtZW50KSkge1xuICBcdFx0XHQocmVzb2x2ZWQgfHwgKHJlc29sdmVkID0gW10pKS5wdXNoKHtcbiAgXHRcdFx0XHRpdGVtOiBpdGVtLFxuICBcdFx0XHRcdGtleXBhdGg6IGtleXBhdGhcbiAgXHRcdFx0fSk7XG5cbiAgXHRcdFx0dW5yZXNvbHZlZC5zcGxpY2UoaSwgMSk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0aWYgKHJlc29sdmVkKSB7XG4gIFx0XHRyZXNvbHZlZC5mb3JFYWNoKGdsb2JhbF9ydW5sb29wX19yZXNvbHZlKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBnbG9iYWxfcnVubG9vcF9fcmVzb2x2ZShyZXNvbHZlZCkge1xuICBcdHJlc29sdmVkLml0ZW0ucmVzb2x2ZShyZXNvbHZlZC5rZXlwYXRoKTtcbiAgfVxuXG4gIHZhciBxdWV1ZSA9IFtdO1xuXG4gIHZhciBhbmltYXRpb25zID0ge1xuICBcdHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBpLCBhbmltYXRpb24sIG5vdztcblxuICBcdFx0bm93ID0gdXRpbHNfZ2V0VGltZSgpO1xuXG4gIFx0XHRnbG9iYWxfcnVubG9vcC5zdGFydCgpO1xuXG4gIFx0XHRmb3IgKGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdFx0YW5pbWF0aW9uID0gcXVldWVbaV07XG5cbiAgXHRcdFx0aWYgKCFhbmltYXRpb24udGljayhub3cpKSB7XG4gIFx0XHRcdFx0Ly8gYW5pbWF0aW9uIGlzIGNvbXBsZXRlLCByZW1vdmUgaXQgZnJvbSB0aGUgc3RhY2ssIGFuZCBkZWNyZW1lbnQgaSBzbyB3ZSBkb24ndCBtaXNzIG9uZVxuICBcdFx0XHRcdHF1ZXVlLnNwbGljZShpLS0sIDEpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdGdsb2JhbF9ydW5sb29wLmVuZCgpO1xuXG4gIFx0XHRpZiAocXVldWUubGVuZ3RoKSB7XG4gIFx0XHRcdHJBRihhbmltYXRpb25zLnRpY2spO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0YW5pbWF0aW9ucy5ydW5uaW5nID0gZmFsc2U7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdGFkZDogZnVuY3Rpb24gKGFuaW1hdGlvbikge1xuICBcdFx0cXVldWUucHVzaChhbmltYXRpb24pO1xuXG4gIFx0XHRpZiAoIWFuaW1hdGlvbnMucnVubmluZykge1xuICBcdFx0XHRhbmltYXRpb25zLnJ1bm5pbmcgPSB0cnVlO1xuICBcdFx0XHRyQUYoYW5pbWF0aW9ucy50aWNrKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0Ly8gVE9ETyBvcHRpbWlzZSB0aGlzXG4gIFx0YWJvcnQ6IGZ1bmN0aW9uIChrZXlwYXRoLCByb290KSB7XG4gIFx0XHR2YXIgaSA9IHF1ZXVlLmxlbmd0aCxcbiAgXHRcdCAgICBhbmltYXRpb247XG5cbiAgXHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0YW5pbWF0aW9uID0gcXVldWVbaV07XG5cbiAgXHRcdFx0aWYgKGFuaW1hdGlvbi5yb290ID09PSByb290ICYmIGFuaW1hdGlvbi5rZXlwYXRoID09PSBrZXlwYXRoKSB7XG4gIFx0XHRcdFx0YW5pbWF0aW9uLnN0b3AoKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cbiAgfTtcblxuICB2YXIgc2hhcmVkX2FuaW1hdGlvbnMgPSBhbmltYXRpb25zO1xuXG4gIHZhciBBbmltYXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHZhciBrZXk7XG5cbiAgXHR0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgXHQvLyBmcm9tIGFuZCB0b1xuICBcdGZvciAoa2V5IGluIG9wdGlvbnMpIHtcbiAgXHRcdGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgXHRcdFx0dGhpc1trZXldID0gb3B0aW9uc1trZXldO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHRoaXMuaW50ZXJwb2xhdG9yID0gc2hhcmVkX2ludGVycG9sYXRlKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5yb290LCB0aGlzLmludGVycG9sYXRvcik7XG4gIFx0dGhpcy5ydW5uaW5nID0gdHJ1ZTtcblxuICBcdHRoaXMudGljaygpO1xuICB9O1xuXG4gIEFuaW1hdGlvbi5wcm90b3R5cGUgPSB7XG4gIFx0dGljazogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIGVsYXBzZWQsIHQsIHZhbHVlLCB0aW1lTm93LCBpbmRleCwga2V5cGF0aDtcblxuICBcdFx0a2V5cGF0aCA9IHRoaXMua2V5cGF0aDtcblxuICBcdFx0aWYgKHRoaXMucnVubmluZykge1xuICBcdFx0XHR0aW1lTm93ID0gRGF0ZS5ub3coKTtcbiAgXHRcdFx0ZWxhcHNlZCA9IHRpbWVOb3cgLSB0aGlzLnN0YXJ0VGltZTtcblxuICBcdFx0XHRpZiAoZWxhcHNlZCA+PSB0aGlzLmR1cmF0aW9uKSB7XG4gIFx0XHRcdFx0aWYgKGtleXBhdGggIT09IG51bGwpIHtcbiAgXHRcdFx0XHRcdGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMucm9vdCk7XG4gIFx0XHRcdFx0XHR0aGlzLnJvb3Qudmlld21vZGVsLnNldChrZXlwYXRoLCB0aGlzLnRvKTtcbiAgXHRcdFx0XHRcdGdsb2JhbF9ydW5sb29wLmVuZCgpO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdGlmICh0aGlzLnN0ZXApIHtcbiAgXHRcdFx0XHRcdHRoaXMuc3RlcCgxLCB0aGlzLnRvKTtcbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHR0aGlzLmNvbXBsZXRlKHRoaXMudG8pO1xuXG4gIFx0XHRcdFx0aW5kZXggPSB0aGlzLnJvb3QuX2FuaW1hdGlvbnMuaW5kZXhPZih0aGlzKTtcblxuICBcdFx0XHRcdC8vIFRPRE8gaW52ZXN0aWdhdGUgd2h5IHRoaXMgaGFwcGVuc1xuICBcdFx0XHRcdGlmIChpbmRleCA9PT0gLTEpIHtcbiAgXHRcdFx0XHRcdHdhcm5JZkRlYnVnKFwiQW5pbWF0aW9uIHdhcyBub3QgZm91bmRcIik7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0dGhpcy5yb290Ll9hbmltYXRpb25zLnNwbGljZShpbmRleCwgMSk7XG5cbiAgXHRcdFx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIHJlbW92ZSBmcm9tIHRoZSBzdGFja1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0dCA9IHRoaXMuZWFzaW5nID8gdGhpcy5lYXNpbmcoZWxhcHNlZCAvIHRoaXMuZHVyYXRpb24pIDogZWxhcHNlZCAvIHRoaXMuZHVyYXRpb247XG5cbiAgXHRcdFx0aWYgKGtleXBhdGggIT09IG51bGwpIHtcbiAgXHRcdFx0XHR2YWx1ZSA9IHRoaXMuaW50ZXJwb2xhdG9yKHQpO1xuICBcdFx0XHRcdGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMucm9vdCk7XG4gIFx0XHRcdFx0dGhpcy5yb290LnZpZXdtb2RlbC5zZXQoa2V5cGF0aCwgdmFsdWUpO1xuICBcdFx0XHRcdGdsb2JhbF9ydW5sb29wLmVuZCgpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0aWYgKHRoaXMuc3RlcCkge1xuICBcdFx0XHRcdHRoaXMuc3RlcCh0LCB2YWx1ZSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRyZXR1cm4gdHJ1ZTsgLy8ga2VlcCBpbiB0aGUgc3RhY2tcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGZhbHNlOyAvLyByZW1vdmUgZnJvbSB0aGUgc3RhY2tcbiAgXHR9LFxuXG4gIFx0c3RvcDogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIGluZGV4O1xuXG4gIFx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcblxuICBcdFx0aW5kZXggPSB0aGlzLnJvb3QuX2FuaW1hdGlvbnMuaW5kZXhPZih0aGlzKTtcblxuICBcdFx0Ly8gVE9ETyBpbnZlc3RpZ2F0ZSB3aHkgdGhpcyBoYXBwZW5zXG4gIFx0XHRpZiAoaW5kZXggPT09IC0xKSB7XG4gIFx0XHRcdHdhcm5JZkRlYnVnKFwiQW5pbWF0aW9uIHdhcyBub3QgZm91bmRcIik7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMucm9vdC5fYW5pbWF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICBcdH1cbiAgfTtcblxuICB2YXIgYW5pbWF0ZV9BbmltYXRpb24gPSBBbmltYXRpb247XG5cbiAgdmFyIHByb3RvdHlwZV9hbmltYXRlID0gUmFjdGl2ZSRhbmltYXRlO1xuXG4gIHZhciBub0FuaW1hdGlvbiA9IHsgc3RvcDogbm9vcCB9O1xuICBmdW5jdGlvbiBSYWN0aXZlJGFuaW1hdGUoa2V5cGF0aCwgdG8sIG9wdGlvbnMpIHtcbiAgXHR2YXIgcHJvbWlzZSwgZnVsZmlsUHJvbWlzZSwgaywgYW5pbWF0aW9uLCBhbmltYXRpb25zLCBlYXNpbmcsIGR1cmF0aW9uLCBzdGVwLCBjb21wbGV0ZSwgbWFrZVZhbHVlQ29sbGVjdG9yLCBjdXJyZW50VmFsdWVzLCBjb2xsZWN0VmFsdWUsIGR1bW15LCBkdW1teU9wdGlvbnM7XG5cbiAgXHRwcm9taXNlID0gbmV3IHV0aWxzX1Byb21pc2UoZnVuY3Rpb24gKGZ1bGZpbCkge1xuICBcdFx0cmV0dXJuIGZ1bGZpbFByb21pc2UgPSBmdWxmaWw7XG4gIFx0fSk7XG5cbiAgXHQvLyBhbmltYXRlIG11bHRpcGxlIGtleXBhdGhzXG4gIFx0aWYgKHR5cGVvZiBrZXlwYXRoID09PSBcIm9iamVjdFwiKSB7XG4gIFx0XHRvcHRpb25zID0gdG8gfHwge307XG4gIFx0XHRlYXNpbmcgPSBvcHRpb25zLmVhc2luZztcbiAgXHRcdGR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbjtcblxuICBcdFx0YW5pbWF0aW9ucyA9IFtdO1xuXG4gIFx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIHBhc3MgdGhlIGBzdGVwYCBhbmQgYGNvbXBsZXRlYCBoYW5kbGVycywgYXMgdGhleSB3aWxsXG4gIFx0XHQvLyBydW4gZm9yIGVhY2ggYW5pbWF0aW9uISBTbyBpbnN0ZWFkIHdlJ2xsIHN0b3JlIHRoZSBoYW5kbGVycyBhbmQgY3JlYXRlXG4gIFx0XHQvLyBvdXIgb3duLi4uXG4gIFx0XHRzdGVwID0gb3B0aW9ucy5zdGVwO1xuICBcdFx0Y29tcGxldGUgPSBvcHRpb25zLmNvbXBsZXRlO1xuXG4gIFx0XHRpZiAoc3RlcCB8fCBjb21wbGV0ZSkge1xuICBcdFx0XHRjdXJyZW50VmFsdWVzID0ge307XG5cbiAgXHRcdFx0b3B0aW9ucy5zdGVwID0gbnVsbDtcbiAgXHRcdFx0b3B0aW9ucy5jb21wbGV0ZSA9IG51bGw7XG5cbiAgXHRcdFx0bWFrZVZhbHVlQ29sbGVjdG9yID0gZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHQsIHZhbHVlKSB7XG4gIFx0XHRcdFx0XHRjdXJyZW50VmFsdWVzW2tleXBhdGhdID0gdmFsdWU7XG4gIFx0XHRcdFx0fTtcbiAgXHRcdFx0fTtcbiAgXHRcdH1cblxuICBcdFx0Zm9yIChrIGluIGtleXBhdGgpIHtcbiAgXHRcdFx0aWYgKGtleXBhdGguaGFzT3duUHJvcGVydHkoaykpIHtcbiAgXHRcdFx0XHRpZiAoc3RlcCB8fCBjb21wbGV0ZSkge1xuICBcdFx0XHRcdFx0Y29sbGVjdFZhbHVlID0gbWFrZVZhbHVlQ29sbGVjdG9yKGspO1xuICBcdFx0XHRcdFx0b3B0aW9ucyA9IHsgZWFzaW5nOiBlYXNpbmcsIGR1cmF0aW9uOiBkdXJhdGlvbiB9O1xuXG4gIFx0XHRcdFx0XHRpZiAoc3RlcCkge1xuICBcdFx0XHRcdFx0XHRvcHRpb25zLnN0ZXAgPSBjb2xsZWN0VmFsdWU7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0b3B0aW9ucy5jb21wbGV0ZSA9IGNvbXBsZXRlID8gY29sbGVjdFZhbHVlIDogbm9vcDtcbiAgXHRcdFx0XHRhbmltYXRpb25zLnB1c2goYW5pbWF0ZSh0aGlzLCBrLCBrZXlwYXRoW2tdLCBvcHRpb25zKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0Ly8gQ3JlYXRlIGEgZHVtbXkgYW5pbWF0aW9uLCB0byBmYWNpbGl0YXRlIHN0ZXAvY29tcGxldGVcbiAgXHRcdC8vIGNhbGxiYWNrcywgYW5kIFByb21pc2UgZnVsZmlsbWVudFxuICBcdFx0ZHVtbXlPcHRpb25zID0geyBlYXNpbmc6IGVhc2luZywgZHVyYXRpb246IGR1cmF0aW9uIH07XG5cbiAgXHRcdGlmIChzdGVwKSB7XG4gIFx0XHRcdGR1bW15T3B0aW9ucy5zdGVwID0gZnVuY3Rpb24gKHQpIHtcbiAgXHRcdFx0XHRyZXR1cm4gc3RlcCh0LCBjdXJyZW50VmFsdWVzKTtcbiAgXHRcdFx0fTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKGNvbXBsZXRlKSB7XG4gIFx0XHRcdHByb21pc2UudGhlbihmdW5jdGlvbiAodCkge1xuICBcdFx0XHRcdHJldHVybiBjb21wbGV0ZSh0LCBjdXJyZW50VmFsdWVzKTtcbiAgXHRcdFx0fSk7XG4gIFx0XHR9XG5cbiAgXHRcdGR1bW15T3B0aW9ucy5jb21wbGV0ZSA9IGZ1bGZpbFByb21pc2U7XG5cbiAgXHRcdGR1bW15ID0gYW5pbWF0ZSh0aGlzLCBudWxsLCBudWxsLCBkdW1teU9wdGlvbnMpO1xuICBcdFx0YW5pbWF0aW9ucy5wdXNoKGR1bW15KTtcblxuICBcdFx0cHJvbWlzZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICBcdFx0XHR2YXIgYW5pbWF0aW9uO1xuXG4gIFx0XHRcdHdoaWxlIChhbmltYXRpb24gPSBhbmltYXRpb25zLnBvcCgpKSB7XG4gIFx0XHRcdFx0YW5pbWF0aW9uLnN0b3AoKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmIChkdW1teSkge1xuICBcdFx0XHRcdGR1bW15LnN0b3AoKTtcbiAgXHRcdFx0fVxuICBcdFx0fTtcblxuICBcdFx0cmV0dXJuIHByb21pc2U7XG4gIFx0fVxuXG4gIFx0Ly8gYW5pbWF0ZSBhIHNpbmdsZSBrZXlwYXRoXG4gIFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgXHRpZiAob3B0aW9ucy5jb21wbGV0ZSkge1xuICBcdFx0cHJvbWlzZS50aGVuKG9wdGlvbnMuY29tcGxldGUpO1xuICBcdH1cblxuICBcdG9wdGlvbnMuY29tcGxldGUgPSBmdWxmaWxQcm9taXNlO1xuICBcdGFuaW1hdGlvbiA9IGFuaW1hdGUodGhpcywga2V5cGF0aCwgdG8sIG9wdGlvbnMpO1xuXG4gIFx0cHJvbWlzZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIGFuaW1hdGlvbi5zdG9wKCk7XG4gIFx0fTtcbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFuaW1hdGUocm9vdCwga2V5cGF0aCwgdG8sIG9wdGlvbnMpIHtcbiAgXHR2YXIgZWFzaW5nLCBkdXJhdGlvbiwgYW5pbWF0aW9uLCBmcm9tO1xuXG4gIFx0aWYgKGtleXBhdGgpIHtcbiAgXHRcdGtleXBhdGggPSBnZXRLZXlwYXRoKG5vcm1hbGlzZShrZXlwYXRoKSk7XG4gIFx0fVxuXG4gIFx0aWYgKGtleXBhdGggIT09IG51bGwpIHtcbiAgXHRcdGZyb20gPSByb290LnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG4gIFx0fVxuXG4gIFx0Ly8gY2FuY2VsIGFueSBleGlzdGluZyBhbmltYXRpb25cbiAgXHQvLyBUT0RPIHdoYXQgYWJvdXQgdXBzdHJlYW0vZG93bnN0cmVhbSBrZXlwYXRocz9cbiAgXHRzaGFyZWRfYW5pbWF0aW9ucy5hYm9ydChrZXlwYXRoLCByb290KTtcblxuICBcdC8vIGRvbid0IGJvdGhlciBhbmltYXRpbmcgdmFsdWVzIHRoYXQgc3RheSB0aGUgc2FtZVxuICBcdGlmIChpc0VxdWFsKGZyb20sIHRvKSkge1xuICBcdFx0aWYgKG9wdGlvbnMuY29tcGxldGUpIHtcbiAgXHRcdFx0b3B0aW9ucy5jb21wbGV0ZShvcHRpb25zLnRvKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIG5vQW5pbWF0aW9uO1xuICBcdH1cblxuICBcdC8vIGVhc2luZyBmdW5jdGlvblxuICBcdGlmIChvcHRpb25zLmVhc2luZykge1xuICBcdFx0aWYgKHR5cGVvZiBvcHRpb25zLmVhc2luZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRcdGVhc2luZyA9IG9wdGlvbnMuZWFzaW5nO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0ZWFzaW5nID0gcm9vdC5lYXNpbmdbb3B0aW9ucy5lYXNpbmddO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodHlwZW9mIGVhc2luZyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRcdGVhc2luZyA9IG51bGw7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gZHVyYXRpb25cbiAgXHRkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gPT09IHVuZGVmaW5lZCA/IDQwMCA6IG9wdGlvbnMuZHVyYXRpb247XG5cbiAgXHQvLyBUT0RPIHN0b3JlIGtleXMsIHVzZSBhbiBpbnRlcm5hbCBzZXQgbWV0aG9kXG4gIFx0YW5pbWF0aW9uID0gbmV3IGFuaW1hdGVfQW5pbWF0aW9uKHtcbiAgXHRcdGtleXBhdGg6IGtleXBhdGgsXG4gIFx0XHRmcm9tOiBmcm9tLFxuICBcdFx0dG86IHRvLFxuICBcdFx0cm9vdDogcm9vdCxcbiAgXHRcdGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgXHRcdGVhc2luZzogZWFzaW5nLFxuICBcdFx0aW50ZXJwb2xhdG9yOiBvcHRpb25zLmludGVycG9sYXRvcixcblxuICBcdFx0Ly8gVE9ETyB3cmFwIGNhbGxiYWNrcyBpZiBuZWNlc3NhcnksIHRvIHVzZSBpbnN0YW5jZSBhcyBjb250ZXh0XG4gIFx0XHRzdGVwOiBvcHRpb25zLnN0ZXAsXG4gIFx0XHRjb21wbGV0ZTogb3B0aW9ucy5jb21wbGV0ZVxuICBcdH0pO1xuXG4gIFx0c2hhcmVkX2FuaW1hdGlvbnMuYWRkKGFuaW1hdGlvbik7XG4gIFx0cm9vdC5fYW5pbWF0aW9ucy5wdXNoKGFuaW1hdGlvbik7XG5cbiAgXHRyZXR1cm4gYW5pbWF0aW9uO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9kZXRhY2ggPSBSYWN0aXZlJGRldGFjaDtcbiAgdmFyIHByb3RvdHlwZV9kZXRhY2hfX2RldGFjaEhvb2sgPSBuZXcgaG9va3NfSG9vayhcImRldGFjaFwiKTtcbiAgZnVuY3Rpb24gUmFjdGl2ZSRkZXRhY2goKSB7XG4gIFx0aWYgKHRoaXMuZGV0YWNoZWQpIHtcbiAgXHRcdHJldHVybiB0aGlzLmRldGFjaGVkO1xuICBcdH1cblxuICBcdGlmICh0aGlzLmVsKSB7XG4gIFx0XHRyZW1vdmVGcm9tQXJyYXkodGhpcy5lbC5fX3JhY3RpdmVfaW5zdGFuY2VzX18sIHRoaXMpO1xuICBcdH1cbiAgXHR0aGlzLmRldGFjaGVkID0gdGhpcy5mcmFnbWVudC5kZXRhY2goKTtcbiAgXHRwcm90b3R5cGVfZGV0YWNoX19kZXRhY2hIb29rLmZpcmUodGhpcyk7XG4gIFx0cmV0dXJuIHRoaXMuZGV0YWNoZWQ7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2ZpbmQgPSBSYWN0aXZlJGZpbmQ7XG5cbiAgZnVuY3Rpb24gUmFjdGl2ZSRmaW5kKHNlbGVjdG9yKSB7XG4gIFx0aWYgKCF0aGlzLmVsKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdGhpcy5mcmFnbWVudC5maW5kKHNlbGVjdG9yKTtcbiAgfVxuXG4gIHZhciB0ZXN0ID0gUXVlcnkkdGVzdDtcbiAgZnVuY3Rpb24gUXVlcnkkdGVzdChpdGVtLCBub0RpcnR5KSB7XG4gIFx0dmFyIGl0ZW1NYXRjaGVzO1xuXG4gIFx0aWYgKHRoaXMuX2lzQ29tcG9uZW50UXVlcnkpIHtcbiAgXHRcdGl0ZW1NYXRjaGVzID0gIXRoaXMuc2VsZWN0b3IgfHwgaXRlbS5uYW1lID09PSB0aGlzLnNlbGVjdG9yO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRpdGVtTWF0Y2hlcyA9IGl0ZW0ubm9kZSA/IG1hdGNoZXMoaXRlbS5ub2RlLCB0aGlzLnNlbGVjdG9yKSA6IG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKGl0ZW1NYXRjaGVzKSB7XG4gIFx0XHR0aGlzLnB1c2goaXRlbS5ub2RlIHx8IGl0ZW0uaW5zdGFuY2UpO1xuXG4gIFx0XHRpZiAoIW5vRGlydHkpIHtcbiAgXHRcdFx0dGhpcy5fbWFrZURpcnR5KCk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB0cnVlO1xuICBcdH1cbiAgfVxuXG4gIHZhciBtYWtlUXVlcnlfY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICBcdHZhciBsaXZlUXVlcmllcywgc2VsZWN0b3IsIGluZGV4O1xuXG4gIFx0bGl2ZVF1ZXJpZXMgPSB0aGlzLl9yb290W3RoaXMuX2lzQ29tcG9uZW50UXVlcnkgPyBcImxpdmVDb21wb25lbnRRdWVyaWVzXCIgOiBcImxpdmVRdWVyaWVzXCJdO1xuICBcdHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcjtcblxuICBcdGluZGV4ID0gbGl2ZVF1ZXJpZXMuaW5kZXhPZihzZWxlY3Rvcik7XG5cbiAgXHRpZiAoaW5kZXggIT09IC0xKSB7XG4gIFx0XHRsaXZlUXVlcmllcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBcdFx0bGl2ZVF1ZXJpZXNbc2VsZWN0b3JdID0gbnVsbDtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIHNvcnRCeUl0ZW1Qb3NpdGlvbiA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIFx0dmFyIGFuY2VzdHJ5QSwgYW5jZXN0cnlCLCBvbGRlc3RBLCBvbGRlc3RCLCBtdXR1YWxBbmNlc3RvciwgaW5kZXhBLCBpbmRleEIsIGZyYWdtZW50cywgZnJhZ21lbnRBLCBmcmFnbWVudEI7XG5cbiAgXHRhbmNlc3RyeUEgPSBnZXRBbmNlc3RyeShhLmNvbXBvbmVudCB8fCBhLl9yYWN0aXZlLnByb3h5KTtcbiAgXHRhbmNlc3RyeUIgPSBnZXRBbmNlc3RyeShiLmNvbXBvbmVudCB8fCBiLl9yYWN0aXZlLnByb3h5KTtcblxuICBcdG9sZGVzdEEgPSBsYXN0SXRlbShhbmNlc3RyeUEpO1xuICBcdG9sZGVzdEIgPSBsYXN0SXRlbShhbmNlc3RyeUIpO1xuXG4gIFx0Ly8gcmVtb3ZlIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiBib3RoIGFuY2VzdHJpZXMgYXMgbG9uZyBhcyB0aGV5IGFyZSBpZGVudGljYWxcbiAgXHQvLyAtIHRoZSBmaW5hbCBvbmUgcmVtb3ZlZCBpcyB0aGUgY2xvc2VzdCBtdXR1YWwgYW5jZXN0b3JcbiAgXHR3aGlsZSAob2xkZXN0QSAmJiBvbGRlc3RBID09PSBvbGRlc3RCKSB7XG4gIFx0XHRhbmNlc3RyeUEucG9wKCk7XG4gIFx0XHRhbmNlc3RyeUIucG9wKCk7XG5cbiAgXHRcdG11dHVhbEFuY2VzdG9yID0gb2xkZXN0QTtcblxuICBcdFx0b2xkZXN0QSA9IGxhc3RJdGVtKGFuY2VzdHJ5QSk7XG4gIFx0XHRvbGRlc3RCID0gbGFzdEl0ZW0oYW5jZXN0cnlCKTtcbiAgXHR9XG5cbiAgXHQvLyBub3cgdGhhdCB3ZSBoYXZlIHRoZSBtdXR1YWwgYW5jZXN0b3IsIHdlIGNhbiBmaW5kIHdoaWNoIGlzIGVhcmxpZXN0XG4gIFx0b2xkZXN0QSA9IG9sZGVzdEEuY29tcG9uZW50IHx8IG9sZGVzdEE7XG4gIFx0b2xkZXN0QiA9IG9sZGVzdEIuY29tcG9uZW50IHx8IG9sZGVzdEI7XG5cbiAgXHRmcmFnbWVudEEgPSBvbGRlc3RBLnBhcmVudEZyYWdtZW50O1xuICBcdGZyYWdtZW50QiA9IG9sZGVzdEIucGFyZW50RnJhZ21lbnQ7XG5cbiAgXHQvLyBpZiBib3RoIGl0ZW1zIHNoYXJlIGEgcGFyZW50IGZyYWdtZW50LCBvdXIgam9iIGlzIGVhc3lcbiAgXHRpZiAoZnJhZ21lbnRBID09PSBmcmFnbWVudEIpIHtcbiAgXHRcdGluZGV4QSA9IGZyYWdtZW50QS5pdGVtcy5pbmRleE9mKG9sZGVzdEEpO1xuICBcdFx0aW5kZXhCID0gZnJhZ21lbnRCLml0ZW1zLmluZGV4T2Yob2xkZXN0Qik7XG5cbiAgXHRcdC8vIGlmIGl0J3MgdGhlIHNhbWUgaW5kZXgsIGl0IG1lYW5zIG9uZSBjb250YWlucyB0aGUgb3RoZXIsXG4gIFx0XHQvLyBzbyB3ZSBzZWUgd2hpY2ggaGFzIHRoZSBsb25nZXN0IGFuY2VzdHJ5XG4gIFx0XHRyZXR1cm4gaW5kZXhBIC0gaW5kZXhCIHx8IGFuY2VzdHJ5QS5sZW5ndGggLSBhbmNlc3RyeUIubGVuZ3RoO1xuICBcdH1cblxuICBcdC8vIGlmIG11dHVhbCBhbmNlc3RvciBpcyBhIHNlY3Rpb24sIHdlIGZpcnN0IHRlc3QgdG8gc2VlIHdoaWNoIHNlY3Rpb25cbiAgXHQvLyBmcmFnbWVudCBjb21lcyBmaXJzdFxuICBcdGlmIChmcmFnbWVudHMgPSBtdXR1YWxBbmNlc3Rvci5mcmFnbWVudHMpIHtcbiAgXHRcdGluZGV4QSA9IGZyYWdtZW50cy5pbmRleE9mKGZyYWdtZW50QSk7XG4gIFx0XHRpbmRleEIgPSBmcmFnbWVudHMuaW5kZXhPZihmcmFnbWVudEIpO1xuXG4gIFx0XHRyZXR1cm4gaW5kZXhBIC0gaW5kZXhCIHx8IGFuY2VzdHJ5QS5sZW5ndGggLSBhbmNlc3RyeUIubGVuZ3RoO1xuICBcdH1cblxuICBcdHRocm93IG5ldyBFcnJvcihcIkFuIHVuZXhwZWN0ZWQgY29uZGl0aW9uIHdhcyBtZXQgd2hpbGUgY29tcGFyaW5nIHRoZSBwb3NpdGlvbiBvZiB0d28gY29tcG9uZW50cy4gUGxlYXNlIGZpbGUgYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL1JhY3RpdmVKUy9SYWN0aXZlL2lzc3VlcyAtIHRoYW5rcyFcIik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0UGFyZW50KGl0ZW0pIHtcbiAgXHR2YXIgcGFyZW50RnJhZ21lbnQ7XG5cbiAgXHRpZiAocGFyZW50RnJhZ21lbnQgPSBpdGVtLnBhcmVudEZyYWdtZW50KSB7XG4gIFx0XHRyZXR1cm4gcGFyZW50RnJhZ21lbnQub3duZXI7XG4gIFx0fVxuXG4gIFx0aWYgKGl0ZW0uY29tcG9uZW50ICYmIChwYXJlbnRGcmFnbWVudCA9IGl0ZW0uY29tcG9uZW50LnBhcmVudEZyYWdtZW50KSkge1xuICBcdFx0cmV0dXJuIHBhcmVudEZyYWdtZW50Lm93bmVyO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFuY2VzdHJ5KGl0ZW0pIHtcbiAgXHR2YXIgYW5jZXN0cnksIGFuY2VzdG9yO1xuXG4gIFx0YW5jZXN0cnkgPSBbaXRlbV07XG5cbiAgXHRhbmNlc3RvciA9IGdldFBhcmVudChpdGVtKTtcblxuICBcdHdoaWxlIChhbmNlc3Rvcikge1xuICBcdFx0YW5jZXN0cnkucHVzaChhbmNlc3Rvcik7XG4gIFx0XHRhbmNlc3RvciA9IGdldFBhcmVudChhbmNlc3Rvcik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGFuY2VzdHJ5O1xuICB9XG5cbiAgdmFyIHNvcnRCeURvY3VtZW50UG9zaXRpb24gPSBmdW5jdGlvbiAobm9kZSwgb3RoZXJOb2RlKSB7XG4gIFx0dmFyIGJpdG1hc2s7XG5cbiAgXHRpZiAobm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikge1xuICBcdFx0Yml0bWFzayA9IG5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ob3RoZXJOb2RlKTtcbiAgXHRcdHJldHVybiBiaXRtYXNrICYgMiA/IDEgOiAtMTtcbiAgXHR9XG5cbiAgXHQvLyBJbiBvbGQgSUUsIHdlIGNhbiBwaWdneSBiYWNrIG9uIHRoZSBtZWNoYW5pc20gZm9yXG4gIFx0Ly8gY29tcGFyaW5nIGNvbXBvbmVudCBwb3NpdGlvbnNcbiAgXHRyZXR1cm4gc29ydEJ5SXRlbVBvc2l0aW9uKG5vZGUsIG90aGVyTm9kZSk7XG4gIH07XG5cbiAgdmFyIHNvcnQgPSBmdW5jdGlvbiAoKSB7XG4gIFx0dGhpcy5zb3J0KHRoaXMuX2lzQ29tcG9uZW50UXVlcnkgPyBzb3J0QnlJdGVtUG9zaXRpb24gOiBzb3J0QnlEb2N1bWVudFBvc2l0aW9uKTtcbiAgXHR0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICB9O1xuXG4gIHZhciBtYWtlUXVlcnlfZGlydHkgPSBmdW5jdGlvbiAoKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdGlmICghdGhpcy5fZGlydHkpIHtcbiAgXHRcdHRoaXMuX2RpcnR5ID0gdHJ1ZTtcblxuICBcdFx0Ly8gT25jZSB0aGUgRE9NIGhhcyBiZWVuIHVwZGF0ZWQsIGVuc3VyZSB0aGUgcXVlcnlcbiAgXHRcdC8vIGlzIGNvcnJlY3RseSBvcmRlcmVkXG4gIFx0XHRnbG9iYWxfcnVubG9vcC5zY2hlZHVsZVRhc2soZnVuY3Rpb24gKCkge1xuICBcdFx0XHRfdGhpcy5fc29ydCgpO1xuICBcdFx0fSk7XG4gIFx0fVxuICB9O1xuXG4gIHZhciByZW1vdmUgPSBmdW5jdGlvbiAobm9kZU9yQ29tcG9uZW50KSB7XG4gIFx0dmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKHRoaXMuX2lzQ29tcG9uZW50UXVlcnkgPyBub2RlT3JDb21wb25lbnQuaW5zdGFuY2UgOiBub2RlT3JDb21wb25lbnQpO1xuXG4gIFx0aWYgKGluZGV4ICE9PSAtMSkge1xuICBcdFx0dGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBcdH1cbiAgfTtcblxuICB2YXIgX21ha2VRdWVyeSA9IG1ha2VRdWVyeTtcbiAgZnVuY3Rpb24gbWFrZVF1ZXJ5KHJhY3RpdmUsIHNlbGVjdG9yLCBsaXZlLCBpc0NvbXBvbmVudFF1ZXJ5KSB7XG4gIFx0dmFyIHF1ZXJ5ID0gW107XG5cbiAgXHRkZWZpbmVQcm9wZXJ0aWVzKHF1ZXJ5LCB7XG4gIFx0XHRzZWxlY3RvcjogeyB2YWx1ZTogc2VsZWN0b3IgfSxcbiAgXHRcdGxpdmU6IHsgdmFsdWU6IGxpdmUgfSxcblxuICBcdFx0X2lzQ29tcG9uZW50UXVlcnk6IHsgdmFsdWU6IGlzQ29tcG9uZW50UXVlcnkgfSxcbiAgXHRcdF90ZXN0OiB7IHZhbHVlOiB0ZXN0IH1cbiAgXHR9KTtcblxuICBcdGlmICghbGl2ZSkge1xuICBcdFx0cmV0dXJuIHF1ZXJ5O1xuICBcdH1cblxuICBcdGRlZmluZVByb3BlcnRpZXMocXVlcnksIHtcbiAgXHRcdGNhbmNlbDogeyB2YWx1ZTogbWFrZVF1ZXJ5X2NhbmNlbCB9LFxuXG4gIFx0XHRfcm9vdDogeyB2YWx1ZTogcmFjdGl2ZSB9LFxuICBcdFx0X3NvcnQ6IHsgdmFsdWU6IHNvcnQgfSxcbiAgXHRcdF9tYWtlRGlydHk6IHsgdmFsdWU6IG1ha2VRdWVyeV9kaXJ0eSB9LFxuICBcdFx0X3JlbW92ZTogeyB2YWx1ZTogcmVtb3ZlIH0sXG5cbiAgXHRcdF9kaXJ0eTogeyB2YWx1ZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlIH1cbiAgXHR9KTtcblxuICBcdHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGVfZmluZEFsbCA9IFJhY3RpdmUkZmluZEFsbDtcbiAgZnVuY3Rpb24gUmFjdGl2ZSRmaW5kQWxsKHNlbGVjdG9yLCBvcHRpb25zKSB7XG4gIFx0dmFyIGxpdmVRdWVyaWVzLCBxdWVyeTtcblxuICBcdGlmICghdGhpcy5lbCkge1xuICBcdFx0cmV0dXJuIFtdO1xuICBcdH1cblxuICBcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBcdGxpdmVRdWVyaWVzID0gdGhpcy5fbGl2ZVF1ZXJpZXM7XG5cbiAgXHQvLyBTaG9ydGN1dDogaWYgd2UncmUgbWFpbnRhaW5pbmcgYSBsaXZlIHF1ZXJ5IHdpdGggdGhpc1xuICBcdC8vIHNlbGVjdG9yLCB3ZSBkb24ndCBuZWVkIHRvIHRyYXZlcnNlIHRoZSBwYXJhbGxlbCBET01cbiAgXHRpZiAocXVlcnkgPSBsaXZlUXVlcmllc1tzZWxlY3Rvcl0pIHtcblxuICBcdFx0Ly8gRWl0aGVyIHJldHVybiB0aGUgZXhhY3Qgc2FtZSBxdWVyeSwgb3IgKGlmIG5vdCBsaXZlKSBhIHNuYXBzaG90XG4gIFx0XHRyZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLmxpdmUgPyBxdWVyeSA6IHF1ZXJ5LnNsaWNlKCk7XG4gIFx0fVxuXG4gIFx0cXVlcnkgPSBfbWFrZVF1ZXJ5KHRoaXMsIHNlbGVjdG9yLCAhIW9wdGlvbnMubGl2ZSwgZmFsc2UpO1xuXG4gIFx0Ly8gQWRkIHRoaXMgdG8gdGhlIGxpc3Qgb2YgbGl2ZSBxdWVyaWVzIFJhY3RpdmUgbmVlZHMgdG8gbWFpbnRhaW4sXG4gIFx0Ly8gaWYgYXBwbGljYWJsZVxuICBcdGlmIChxdWVyeS5saXZlKSB7XG4gIFx0XHRsaXZlUXVlcmllcy5wdXNoKHNlbGVjdG9yKTtcbiAgXHRcdGxpdmVRdWVyaWVzW1wiX1wiICsgc2VsZWN0b3JdID0gcXVlcnk7XG4gIFx0fVxuXG4gIFx0dGhpcy5mcmFnbWVudC5maW5kQWxsKHNlbGVjdG9yLCBxdWVyeSk7XG4gIFx0cmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9maW5kQWxsQ29tcG9uZW50cyA9IFJhY3RpdmUkZmluZEFsbENvbXBvbmVudHM7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkZmluZEFsbENvbXBvbmVudHMoc2VsZWN0b3IsIG9wdGlvbnMpIHtcbiAgXHR2YXIgbGl2ZVF1ZXJpZXMsIHF1ZXJ5O1xuXG4gIFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIFx0bGl2ZVF1ZXJpZXMgPSB0aGlzLl9saXZlQ29tcG9uZW50UXVlcmllcztcblxuICBcdC8vIFNob3J0Y3V0OiBpZiB3ZSdyZSBtYWludGFpbmluZyBhIGxpdmUgcXVlcnkgd2l0aCB0aGlzXG4gIFx0Ly8gc2VsZWN0b3IsIHdlIGRvbid0IG5lZWQgdG8gdHJhdmVyc2UgdGhlIHBhcmFsbGVsIERPTVxuICBcdGlmIChxdWVyeSA9IGxpdmVRdWVyaWVzW3NlbGVjdG9yXSkge1xuXG4gIFx0XHQvLyBFaXRoZXIgcmV0dXJuIHRoZSBleGFjdCBzYW1lIHF1ZXJ5LCBvciAoaWYgbm90IGxpdmUpIGEgc25hcHNob3RcbiAgXHRcdHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMubGl2ZSA/IHF1ZXJ5IDogcXVlcnkuc2xpY2UoKTtcbiAgXHR9XG5cbiAgXHRxdWVyeSA9IF9tYWtlUXVlcnkodGhpcywgc2VsZWN0b3IsICEhb3B0aW9ucy5saXZlLCB0cnVlKTtcblxuICBcdC8vIEFkZCB0aGlzIHRvIHRoZSBsaXN0IG9mIGxpdmUgcXVlcmllcyBSYWN0aXZlIG5lZWRzIHRvIG1haW50YWluLFxuICBcdC8vIGlmIGFwcGxpY2FibGVcbiAgXHRpZiAocXVlcnkubGl2ZSkge1xuICBcdFx0bGl2ZVF1ZXJpZXMucHVzaChzZWxlY3Rvcik7XG4gIFx0XHRsaXZlUXVlcmllc1tcIl9cIiArIHNlbGVjdG9yXSA9IHF1ZXJ5O1xuICBcdH1cblxuICBcdHRoaXMuZnJhZ21lbnQuZmluZEFsbENvbXBvbmVudHMoc2VsZWN0b3IsIHF1ZXJ5KTtcbiAgXHRyZXR1cm4gcXVlcnk7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2ZpbmRDb21wb25lbnQgPSBSYWN0aXZlJGZpbmRDb21wb25lbnQ7XG5cbiAgZnVuY3Rpb24gUmFjdGl2ZSRmaW5kQ29tcG9uZW50KHNlbGVjdG9yKSB7XG4gIFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmluZENvbXBvbmVudChzZWxlY3Rvcik7XG4gIH1cblxuICB2YXIgZmluZENvbnRhaW5lciA9IFJhY3RpdmUkZmluZENvbnRhaW5lcjtcblxuICBmdW5jdGlvbiBSYWN0aXZlJGZpbmRDb250YWluZXIoc2VsZWN0b3IpIHtcbiAgXHRpZiAodGhpcy5jb250YWluZXIpIHtcbiAgXHRcdGlmICh0aGlzLmNvbnRhaW5lci5jb21wb25lbnQgJiYgdGhpcy5jb250YWluZXIuY29tcG9uZW50Lm5hbWUgPT09IHNlbGVjdG9yKSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5lci5maW5kQ29udGFpbmVyKHNlbGVjdG9yKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBmaW5kUGFyZW50ID0gUmFjdGl2ZSRmaW5kUGFyZW50O1xuXG4gIGZ1bmN0aW9uIFJhY3RpdmUkZmluZFBhcmVudChzZWxlY3Rvcikge1xuXG4gIFx0aWYgKHRoaXMucGFyZW50KSB7XG4gIFx0XHRpZiAodGhpcy5wYXJlbnQuY29tcG9uZW50ICYmIHRoaXMucGFyZW50LmNvbXBvbmVudC5uYW1lID09PSBzZWxlY3Rvcikge1xuICBcdFx0XHRyZXR1cm4gdGhpcy5wYXJlbnQ7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRyZXR1cm4gdGhpcy5wYXJlbnQuZmluZFBhcmVudChzZWxlY3Rvcik7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZXZlbnRTdGFjayA9IHtcbiAgXHRlbnF1ZXVlOiBmdW5jdGlvbiAocmFjdGl2ZSwgZXZlbnQpIHtcbiAgXHRcdGlmIChyYWN0aXZlLmV2ZW50KSB7XG4gIFx0XHRcdHJhY3RpdmUuX2V2ZW50UXVldWUgPSByYWN0aXZlLl9ldmVudFF1ZXVlIHx8IFtdO1xuICBcdFx0XHRyYWN0aXZlLl9ldmVudFF1ZXVlLnB1c2gocmFjdGl2ZS5ldmVudCk7XG4gIFx0XHR9XG4gIFx0XHRyYWN0aXZlLmV2ZW50ID0gZXZlbnQ7XG4gIFx0fSxcbiAgXHRkZXF1ZXVlOiBmdW5jdGlvbiAocmFjdGl2ZSkge1xuICBcdFx0aWYgKHJhY3RpdmUuX2V2ZW50UXVldWUgJiYgcmFjdGl2ZS5fZXZlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgXHRcdFx0cmFjdGl2ZS5ldmVudCA9IHJhY3RpdmUuX2V2ZW50UXVldWUucG9wKCk7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRkZWxldGUgcmFjdGl2ZS5ldmVudDtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgdmFyIHNoYXJlZF9ldmVudFN0YWNrID0gZXZlbnRTdGFjaztcblxuICB2YXIgc2hhcmVkX2ZpcmVFdmVudCA9IGZpcmVFdmVudDtcblxuICBmdW5jdGlvbiBmaXJlRXZlbnQocmFjdGl2ZSwgZXZlbnROYW1lKSB7XG4gIFx0dmFyIG9wdGlvbnMgPSBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzJdO1xuXG4gIFx0aWYgKCFldmVudE5hbWUpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRpZiAoIW9wdGlvbnMuZXZlbnQpIHtcbiAgXHRcdG9wdGlvbnMuZXZlbnQgPSB7XG4gIFx0XHRcdG5hbWU6IGV2ZW50TmFtZSxcbiAgXHRcdFx0Ly8gdW50aWwgZXZlbnQgbm90IGluY2x1ZGVkIGFzIGFyZ3VtZW50IGRlZmF1bHRcbiAgXHRcdFx0X25vQXJnOiB0cnVlXG4gIFx0XHR9O1xuICBcdH0gZWxzZSB7XG4gIFx0XHRvcHRpb25zLmV2ZW50Lm5hbWUgPSBldmVudE5hbWU7XG4gIFx0fVxuXG4gIFx0dmFyIGV2ZW50TmFtZXMgPSBnZXRLZXlwYXRoKGV2ZW50TmFtZSkud2lsZGNhcmRNYXRjaGVzKCk7XG4gIFx0ZmlyZUV2ZW50QXMocmFjdGl2ZSwgZXZlbnROYW1lcywgb3B0aW9ucy5ldmVudCwgb3B0aW9ucy5hcmdzLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVFdmVudEFzKHJhY3RpdmUsIGV2ZW50TmFtZXMsIGV2ZW50LCBhcmdzKSB7XG4gIFx0dmFyIGluaXRpYWxGaXJlID0gYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1s0XTtcblxuICBcdHZhciBzdWJzY3JpYmVycyxcbiAgXHQgICAgaSxcbiAgXHQgICAgYnViYmxlID0gdHJ1ZTtcblxuICBcdHNoYXJlZF9ldmVudFN0YWNrLmVucXVldWUocmFjdGl2ZSwgZXZlbnQpO1xuXG4gIFx0Zm9yIChpID0gZXZlbnROYW1lcy5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gIFx0XHRzdWJzY3JpYmVycyA9IHJhY3RpdmUuX3N1YnNbZXZlbnROYW1lc1tpXV07XG5cbiAgXHRcdGlmIChzdWJzY3JpYmVycykge1xuICBcdFx0XHRidWJibGUgPSBub3RpZnlTdWJzY3JpYmVycyhyYWN0aXZlLCBzdWJzY3JpYmVycywgZXZlbnQsIGFyZ3MpICYmIGJ1YmJsZTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRzaGFyZWRfZXZlbnRTdGFjay5kZXF1ZXVlKHJhY3RpdmUpO1xuXG4gIFx0aWYgKHJhY3RpdmUucGFyZW50ICYmIGJ1YmJsZSkge1xuXG4gIFx0XHRpZiAoaW5pdGlhbEZpcmUgJiYgcmFjdGl2ZS5jb21wb25lbnQpIHtcbiAgXHRcdFx0dmFyIGZ1bGxOYW1lID0gcmFjdGl2ZS5jb21wb25lbnQubmFtZSArIFwiLlwiICsgZXZlbnROYW1lc1tldmVudE5hbWVzLmxlbmd0aCAtIDFdO1xuICBcdFx0XHRldmVudE5hbWVzID0gZ2V0S2V5cGF0aChmdWxsTmFtZSkud2lsZGNhcmRNYXRjaGVzKCk7XG5cbiAgXHRcdFx0aWYgKGV2ZW50KSB7XG4gIFx0XHRcdFx0ZXZlbnQuY29tcG9uZW50ID0gcmFjdGl2ZTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRmaXJlRXZlbnRBcyhyYWN0aXZlLnBhcmVudCwgZXZlbnROYW1lcywgZXZlbnQsIGFyZ3MpO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeVN1YnNjcmliZXJzKHJhY3RpdmUsIHN1YnNjcmliZXJzLCBldmVudCwgYXJncykge1xuICBcdHZhciBvcmlnaW5hbEV2ZW50ID0gbnVsbCxcbiAgXHQgICAgc3RvcEV2ZW50ID0gZmFsc2U7XG5cbiAgXHRpZiAoZXZlbnQgJiYgIWV2ZW50Ll9ub0FyZykge1xuICBcdFx0YXJncyA9IFtldmVudF0uY29uY2F0KGFyZ3MpO1xuICBcdH1cblxuICBcdC8vIHN1YnNjcmliZXJzIGNhbiBiZSBtb2RpZmllZCBpbmZsaWdodCwgZS5nLiBcIm9uY2VcIiBmdW5jdGlvbmFsaXR5XG4gIFx0Ly8gc28gd2UgbmVlZCB0byBjb3B5IHRvIG1ha2Ugc3VyZSBldmVyeW9uZSBnZXRzIGNhbGxlZFxuICBcdHN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnMuc2xpY2UoKTtcblxuICBcdGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdWJzY3JpYmVycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0aWYgKHN1YnNjcmliZXJzW2ldLmFwcGx5KHJhY3RpdmUsIGFyZ3MpID09PSBmYWxzZSkge1xuICBcdFx0XHRzdG9wRXZlbnQgPSB0cnVlO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChldmVudCAmJiAhZXZlbnQuX25vQXJnICYmIHN0b3BFdmVudCAmJiAob3JpZ2luYWxFdmVudCA9IGV2ZW50Lm9yaWdpbmFsKSkge1xuICBcdFx0b3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCAmJiBvcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHRvcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbiAmJiBvcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICBcdH1cblxuICBcdHJldHVybiAhc3RvcEV2ZW50O1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9maXJlID0gUmFjdGl2ZSRmaXJlO1xuICBmdW5jdGlvbiBSYWN0aXZlJGZpcmUoZXZlbnROYW1lKSB7XG5cbiAgXHR2YXIgb3B0aW9ucyA9IHtcbiAgXHRcdGFyZ3M6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcbiAgXHR9O1xuXG4gIFx0c2hhcmVkX2ZpcmVFdmVudCh0aGlzLCBldmVudE5hbWUsIG9wdGlvbnMpO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9nZXQgPSBSYWN0aXZlJGdldDtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gIFx0Y2FwdHVyZTogdHJ1ZSwgLy8gdG9wLWxldmVsIGNhbGxzIHNob3VsZCBiZSBpbnRlcmNlcHRlZFxuICBcdG5vVW53cmFwOiB0cnVlLCAvLyB3cmFwcGVkIHZhbHVlcyBzaG91bGQgTk9UIGJlIHVud3JhcHBlZFxuICBcdGZ1bGxSb290R2V0OiB0cnVlIC8vIHJvb3QgZ2V0IHNob3VsZCByZXR1cm4gbWFwcGluZ3NcbiAgfTtcbiAgZnVuY3Rpb24gUmFjdGl2ZSRnZXQoa2V5cGF0aCkge1xuICBcdHZhciB2YWx1ZTtcblxuICBcdGtleXBhdGggPSBnZXRLZXlwYXRoKG5vcm1hbGlzZShrZXlwYXRoKSk7XG4gIFx0dmFsdWUgPSB0aGlzLnZpZXdtb2RlbC5nZXQoa2V5cGF0aCwgb3B0aW9ucyk7XG5cbiAgXHQvLyBDcmVhdGUgaW50ZXItY29tcG9uZW50IGJpbmRpbmcsIGlmIG5lY2Vzc2FyeVxuICBcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIHRoaXMucGFyZW50ICYmICF0aGlzLmlzb2xhdGVkKSB7XG4gIFx0XHRpZiAoc2hhcmVkX3Jlc29sdmVSZWYodGhpcywga2V5cGF0aC5zdHIsIHRoaXMuY29tcG9uZW50LnBhcmVudEZyYWdtZW50KSkge1xuICBcdFx0XHQvLyBjcmVhdGVzIGJpbmRpbmcgYXMgc2lkZS1lZmZlY3QsIGlmIGFwcHJvcHJpYXRlXG4gIFx0XHRcdHZhbHVlID0gdGhpcy52aWV3bW9kZWwuZ2V0KGtleXBhdGgpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHZhciBpbnNlcnQgPSBSYWN0aXZlJGluc2VydDtcblxuICB2YXIgaW5zZXJ0SG9vayA9IG5ldyBob29rc19Ib29rKFwiaW5zZXJ0XCIpO1xuICBmdW5jdGlvbiBSYWN0aXZlJGluc2VydCh0YXJnZXQsIGFuY2hvcikge1xuICBcdGlmICghdGhpcy5mcmFnbWVudC5yZW5kZXJlZCkge1xuICBcdFx0Ly8gVE9ETyBjcmVhdGUsIGFuZCBsaW5rIHRvLCBkb2N1bWVudGF0aW9uIGV4cGxhaW5pbmcgdGhpc1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGhlIEFQSSBoYXMgY2hhbmdlZCAtIHlvdSBtdXN0IGNhbGwgYHJhY3RpdmUucmVuZGVyKHRhcmdldFssIGFuY2hvcl0pYCB0byByZW5kZXIgeW91ciBSYWN0aXZlIGluc3RhbmNlLiBPbmNlIHJlbmRlcmVkIHlvdSBjYW4gdXNlIGByYWN0aXZlLmluc2VydCgpYC5cIik7XG4gIFx0fVxuXG4gIFx0dGFyZ2V0ID0gZ2V0RWxlbWVudCh0YXJnZXQpO1xuICBcdGFuY2hvciA9IGdldEVsZW1lbnQoYW5jaG9yKSB8fCBudWxsO1xuXG4gIFx0aWYgKCF0YXJnZXQpIHtcbiAgXHRcdHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHNwZWNpZnkgYSB2YWxpZCB0YXJnZXQgdG8gaW5zZXJ0IGludG9cIik7XG4gIFx0fVxuXG4gIFx0dGFyZ2V0Lmluc2VydEJlZm9yZSh0aGlzLmRldGFjaCgpLCBhbmNob3IpO1xuICBcdHRoaXMuZWwgPSB0YXJnZXQ7XG5cbiAgXHQodGFyZ2V0Ll9fcmFjdGl2ZV9pbnN0YW5jZXNfXyB8fCAodGFyZ2V0Ll9fcmFjdGl2ZV9pbnN0YW5jZXNfXyA9IFtdKSkucHVzaCh0aGlzKTtcbiAgXHR0aGlzLmRldGFjaGVkID0gbnVsbDtcblxuICBcdGZpcmVJbnNlcnRIb29rKHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZUluc2VydEhvb2socmFjdGl2ZSkge1xuICBcdGluc2VydEhvb2suZmlyZShyYWN0aXZlKTtcblxuICBcdHJhY3RpdmUuZmluZEFsbENvbXBvbmVudHMoXCIqXCIpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gIFx0XHRmaXJlSW5zZXJ0SG9vayhjaGlsZC5pbnN0YW5jZSk7XG4gIFx0fSk7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX21lcmdlID0gUmFjdGl2ZSRtZXJnZTtcbiAgZnVuY3Rpb24gUmFjdGl2ZSRtZXJnZShrZXlwYXRoLCBhcnJheSwgb3B0aW9ucykge1xuICBcdHZhciBjdXJyZW50QXJyYXksIHByb21pc2U7XG5cbiAgXHRrZXlwYXRoID0gZ2V0S2V5cGF0aChub3JtYWxpc2Uoa2V5cGF0aCkpO1xuICBcdGN1cnJlbnRBcnJheSA9IHRoaXMudmlld21vZGVsLmdldChrZXlwYXRoKTtcblxuICBcdC8vIElmIGVpdGhlciB0aGUgZXhpc3RpbmcgdmFsdWUgb3IgdGhlIG5ldyB2YWx1ZSBpc24ndCBhblxuICBcdC8vIGFycmF5LCBqdXN0IGRvIGEgcmVndWxhciBzZXRcbiAgXHRpZiAoIWlzQXJyYXkoY3VycmVudEFycmF5KSB8fCAhaXNBcnJheShhcnJheSkpIHtcbiAgXHRcdHJldHVybiB0aGlzLnNldChrZXlwYXRoLCBhcnJheSwgb3B0aW9ucyAmJiBvcHRpb25zLmNvbXBsZXRlKTtcbiAgXHR9XG5cbiAgXHQvLyBNYW5hZ2UgdHJhbnNpdGlvbnNcbiAgXHRwcm9taXNlID0gZ2xvYmFsX3J1bmxvb3Auc3RhcnQodGhpcywgdHJ1ZSk7XG4gIFx0dGhpcy52aWV3bW9kZWwubWVyZ2Uoa2V5cGF0aCwgY3VycmVudEFycmF5LCBhcnJheSwgb3B0aW9ucyk7XG4gIFx0Z2xvYmFsX3J1bmxvb3AuZW5kKCk7XG5cbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIHZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIChyYWN0aXZlLCBrZXlwYXRoLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBcdHRoaXMucm9vdCA9IHJhY3RpdmU7XG4gIFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIFx0dGhpcy5kZWZlciA9IG9wdGlvbnMuZGVmZXI7XG5cbiAgXHQvLyBkZWZhdWx0IHRvIHJvb3QgYXMgY29udGV4dCwgYnV0IGFsbG93IGl0IHRvIGJlIG92ZXJyaWRkZW5cbiAgXHR0aGlzLmNvbnRleHQgPSBvcHRpb25zICYmIG9wdGlvbnMuY29udGV4dCA/IG9wdGlvbnMuY29udGV4dCA6IHJhY3RpdmU7XG4gIH07XG5cbiAgT2JzZXJ2ZXIucHJvdG90eXBlID0ge1xuICBcdGluaXQ6IGZ1bmN0aW9uIChpbW1lZGlhdGUpIHtcbiAgXHRcdHRoaXMudmFsdWUgPSB0aGlzLnJvb3QuZ2V0KHRoaXMua2V5cGF0aC5zdHIpO1xuXG4gIFx0XHRpZiAoaW1tZWRpYXRlICE9PSBmYWxzZSkge1xuICBcdFx0XHR0aGlzLnVwZGF0ZSgpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dGhpcy5vbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHNldFZhbHVlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdGlmICghaXNFcXVhbCh2YWx1ZSwgdGhpcy52YWx1ZSkpIHtcbiAgXHRcdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xuXG4gIFx0XHRcdGlmICh0aGlzLmRlZmVyICYmIHRoaXMucmVhZHkpIHtcbiAgXHRcdFx0XHRnbG9iYWxfcnVubG9vcC5zY2hlZHVsZVRhc2soZnVuY3Rpb24gKCkge1xuICBcdFx0XHRcdFx0cmV0dXJuIF90aGlzLnVwZGF0ZSgpO1xuICBcdFx0XHRcdH0pO1xuICBcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdHRoaXMudXBkYXRlKCk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHQvLyBQcmV2ZW50IGluZmluaXRlIGxvb3BzXG4gIFx0XHRpZiAodGhpcy51cGRhdGluZykge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMudXBkYXRpbmcgPSB0cnVlO1xuXG4gIFx0XHR0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5jb250ZXh0LCB0aGlzLnZhbHVlLCB0aGlzLm9sZFZhbHVlLCB0aGlzLmtleXBhdGguc3RyKTtcbiAgXHRcdHRoaXMub2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXG4gIFx0XHR0aGlzLnVwZGF0aW5nID0gZmFsc2U7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBvYnNlcnZlX09ic2VydmVyID0gT2JzZXJ2ZXI7XG5cbiAgdmFyIG9ic2VydmVfZ2V0UGF0dGVybiA9IGdldFBhdHRlcm47XG4gIGZ1bmN0aW9uIGdldFBhdHRlcm4ocmFjdGl2ZSwgcGF0dGVybikge1xuICBcdHZhciBtYXRjaGluZ0tleXBhdGhzLCB2YWx1ZXM7XG5cbiAgXHRtYXRjaGluZ0tleXBhdGhzID0gZ2V0TWF0Y2hpbmdLZXlwYXRocyhyYWN0aXZlLCBwYXR0ZXJuKTtcblxuICBcdHZhbHVlcyA9IHt9O1xuICBcdG1hdGNoaW5nS2V5cGF0aHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0dmFsdWVzW2tleXBhdGguc3RyXSA9IHJhY3RpdmUuZ2V0KGtleXBhdGguc3RyKTtcbiAgXHR9KTtcblxuICBcdHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICB2YXIgUGF0dGVybk9ic2VydmVyLFxuICAgICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgUGF0dGVybk9ic2VydmVyID0gZnVuY3Rpb24gKHJhY3RpdmUsIGtleXBhdGgsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gIFx0dGhpcy5yb290ID0gcmFjdGl2ZTtcblxuICBcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgXHR0aGlzLmRlZmVyID0gb3B0aW9ucy5kZWZlcjtcblxuICBcdHRoaXMua2V5cGF0aCA9IGtleXBhdGg7XG4gIFx0dGhpcy5yZWdleCA9IG5ldyBSZWdFeHAoXCJeXCIgKyBrZXlwYXRoLnN0ci5yZXBsYWNlKC9cXC4vZywgXCJcXFxcLlwiKS5yZXBsYWNlKC9cXCovZywgXCIoW15cXFxcLl0rKVwiKSArIFwiJFwiKTtcbiAgXHR0aGlzLnZhbHVlcyA9IHt9O1xuXG4gIFx0aWYgKHRoaXMuZGVmZXIpIHtcbiAgXHRcdHRoaXMucHJveGllcyA9IFtdO1xuICBcdH1cblxuICBcdC8vIGRlZmF1bHQgdG8gcm9vdCBhcyBjb250ZXh0LCBidXQgYWxsb3cgaXQgdG8gYmUgb3ZlcnJpZGRlblxuICBcdHRoaXMuY29udGV4dCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jb250ZXh0ID8gb3B0aW9ucy5jb250ZXh0IDogcmFjdGl2ZTtcbiAgfTtcblxuICBQYXR0ZXJuT2JzZXJ2ZXIucHJvdG90eXBlID0ge1xuICBcdGluaXQ6IGZ1bmN0aW9uIChpbW1lZGlhdGUpIHtcbiAgXHRcdHZhciB2YWx1ZXMsIGtleXBhdGg7XG5cbiAgXHRcdHZhbHVlcyA9IG9ic2VydmVfZ2V0UGF0dGVybih0aGlzLnJvb3QsIHRoaXMua2V5cGF0aCk7XG5cbiAgXHRcdGlmIChpbW1lZGlhdGUgIT09IGZhbHNlKSB7XG4gIFx0XHRcdGZvciAoa2V5cGF0aCBpbiB2YWx1ZXMpIHtcbiAgXHRcdFx0XHRpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGtleXBhdGgpKSB7XG4gIFx0XHRcdFx0XHR0aGlzLnVwZGF0ZShnZXRLZXlwYXRoKGtleXBhdGgpKTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHR1cGRhdGU6IGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHR2YXIgdmFsdWVzO1xuXG4gIFx0XHRpZiAoa2V5cGF0aC5pc1BhdHRlcm4pIHtcbiAgXHRcdFx0dmFsdWVzID0gb2JzZXJ2ZV9nZXRQYXR0ZXJuKHRoaXMucm9vdCwga2V5cGF0aCk7XG5cbiAgXHRcdFx0Zm9yIChrZXlwYXRoIGluIHZhbHVlcykge1xuICBcdFx0XHRcdGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5cGF0aCkpIHtcbiAgXHRcdFx0XHRcdHRoaXMudXBkYXRlKGdldEtleXBhdGgoa2V5cGF0aCkpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0Ly8gc3BlY2lhbCBjYXNlIC0gYXJyYXkgbXV0YXRpb24gc2hvdWxkIG5vdCB0cmlnZ2VyIGBhcnJheS4qYFxuICBcdFx0Ly8gcGF0dGVybiBvYnNlcnZlciB3aXRoIGBhcnJheS5sZW5ndGhgXG4gIFx0XHRpZiAodGhpcy5yb290LnZpZXdtb2RlbC5pbXBsaWNpdENoYW5nZXNba2V5cGF0aC5zdHJdKSB7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0aWYgKHRoaXMuZGVmZXIgJiYgdGhpcy5yZWFkeSkge1xuICBcdFx0XHRnbG9iYWxfcnVubG9vcC5zY2hlZHVsZVRhc2soZnVuY3Rpb24gKCkge1xuICBcdFx0XHRcdHJldHVybiBfdGhpcy5nZXRQcm94eShrZXlwYXRoKS51cGRhdGUoKTtcbiAgXHRcdFx0fSk7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5yZWFsbHlVcGRhdGUoa2V5cGF0aCk7XG4gIFx0fSxcblxuICBcdHJlYWxseVVwZGF0ZTogZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdHZhciBrZXlwYXRoU3RyLCB2YWx1ZSwga2V5cywgYXJncztcblxuICBcdFx0a2V5cGF0aFN0ciA9IGtleXBhdGguc3RyO1xuICBcdFx0dmFsdWUgPSB0aGlzLnJvb3Qudmlld21vZGVsLmdldChrZXlwYXRoKTtcblxuICBcdFx0Ly8gUHJldmVudCBpbmZpbml0ZSBsb29wc1xuICBcdFx0aWYgKHRoaXMudXBkYXRpbmcpIHtcbiAgXHRcdFx0dGhpcy52YWx1ZXNba2V5cGF0aFN0cl0gPSB2YWx1ZTtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLnVwZGF0aW5nID0gdHJ1ZTtcblxuICBcdFx0aWYgKCFpc0VxdWFsKHZhbHVlLCB0aGlzLnZhbHVlc1trZXlwYXRoU3RyXSkgfHwgIXRoaXMucmVhZHkpIHtcbiAgXHRcdFx0a2V5cyA9IHNsaWNlLmNhbGwodGhpcy5yZWdleC5leGVjKGtleXBhdGhTdHIpLCAxKTtcbiAgXHRcdFx0YXJncyA9IFt2YWx1ZSwgdGhpcy52YWx1ZXNba2V5cGF0aFN0cl0sIGtleXBhdGhTdHJdLmNvbmNhdChrZXlzKTtcblxuICBcdFx0XHR0aGlzLnZhbHVlc1trZXlwYXRoU3RyXSA9IHZhbHVlO1xuICBcdFx0XHR0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMuY29udGV4dCwgYXJncyk7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMudXBkYXRpbmcgPSBmYWxzZTtcbiAgXHR9LFxuXG4gIFx0Z2V0UHJveHk6IGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHRpZiAoIXRoaXMucHJveGllc1trZXlwYXRoLnN0cl0pIHtcbiAgXHRcdFx0dGhpcy5wcm94aWVzW2tleXBhdGguc3RyXSA9IHtcbiAgXHRcdFx0XHR1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHRcdHJldHVybiBfdGhpcy5yZWFsbHlVcGRhdGUoa2V5cGF0aCk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9O1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gdGhpcy5wcm94aWVzW2tleXBhdGguc3RyXTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIG9ic2VydmVfUGF0dGVybk9ic2VydmVyID0gUGF0dGVybk9ic2VydmVyO1xuXG4gIHZhciBvYnNlcnZlX2dldE9ic2VydmVyRmFjYWRlID0gZ2V0T2JzZXJ2ZXJGYWNhZGU7XG4gIHZhciBlbXB0eU9iamVjdCA9IHt9O1xuICBmdW5jdGlvbiBnZXRPYnNlcnZlckZhY2FkZShyYWN0aXZlLCBrZXlwYXRoLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBcdHZhciBvYnNlcnZlciwgaXNQYXR0ZXJuT2JzZXJ2ZXIsIGNhbmNlbGxlZDtcblxuICBcdGtleXBhdGggPSBnZXRLZXlwYXRoKG5vcm1hbGlzZShrZXlwYXRoKSk7XG4gIFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwgZW1wdHlPYmplY3Q7XG5cbiAgXHQvLyBwYXR0ZXJuIG9ic2VydmVycyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseVxuICBcdGlmIChrZXlwYXRoLmlzUGF0dGVybikge1xuICBcdFx0b2JzZXJ2ZXIgPSBuZXcgb2JzZXJ2ZV9QYXR0ZXJuT2JzZXJ2ZXIocmFjdGl2ZSwga2V5cGF0aCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xuICBcdFx0cmFjdGl2ZS52aWV3bW9kZWwucGF0dGVybk9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgXHRcdGlzUGF0dGVybk9ic2VydmVyID0gdHJ1ZTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0b2JzZXJ2ZXIgPSBuZXcgb2JzZXJ2ZV9PYnNlcnZlcihyYWN0aXZlLCBrZXlwYXRoLCBjYWxsYmFjaywgb3B0aW9ucyk7XG4gIFx0fVxuXG4gIFx0b2JzZXJ2ZXIuaW5pdChvcHRpb25zLmluaXQpO1xuICBcdHJhY3RpdmUudmlld21vZGVsLnJlZ2lzdGVyKGtleXBhdGgsIG9ic2VydmVyLCBpc1BhdHRlcm5PYnNlcnZlciA/IFwicGF0dGVybk9ic2VydmVyc1wiIDogXCJvYnNlcnZlcnNcIik7XG5cbiAgXHQvLyBUaGlzIGZsYWcgYWxsb3dzIG9ic2VydmVycyB0byBpbml0aWFsaXNlIGV2ZW4gd2l0aCB1bmRlZmluZWQgdmFsdWVzXG4gIFx0b2JzZXJ2ZXIucmVhZHkgPSB0cnVlO1xuXG4gIFx0dmFyIGZhY2FkZSA9IHtcbiAgXHRcdGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICBcdFx0XHR2YXIgaW5kZXg7XG5cbiAgXHRcdFx0aWYgKGNhbmNlbGxlZCkge1xuICBcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmIChpc1BhdHRlcm5PYnNlcnZlcikge1xuICBcdFx0XHRcdGluZGV4ID0gcmFjdGl2ZS52aWV3bW9kZWwucGF0dGVybk9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcblxuICBcdFx0XHRcdHJhY3RpdmUudmlld21vZGVsLnBhdHRlcm5PYnNlcnZlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgXHRcdFx0XHRyYWN0aXZlLnZpZXdtb2RlbC51bnJlZ2lzdGVyKGtleXBhdGgsIG9ic2VydmVyLCBcInBhdHRlcm5PYnNlcnZlcnNcIik7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0cmFjdGl2ZS52aWV3bW9kZWwudW5yZWdpc3RlcihrZXlwYXRoLCBvYnNlcnZlciwgXCJvYnNlcnZlcnNcIik7XG4gIFx0XHRcdH1cbiAgXHRcdFx0Y2FuY2VsbGVkID0gdHJ1ZTtcbiAgXHRcdH1cbiAgXHR9O1xuXG4gIFx0cmFjdGl2ZS5fb2JzZXJ2ZXJzLnB1c2goZmFjYWRlKTtcbiAgXHRyZXR1cm4gZmFjYWRlO1xuICB9XG5cbiAgdmFyIG9ic2VydmUgPSBSYWN0aXZlJG9ic2VydmU7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkb2JzZXJ2ZShrZXlwYXRoLCBjYWxsYmFjaywgb3B0aW9ucykge1xuXG4gIFx0dmFyIG9ic2VydmVycywgbWFwLCBrZXlwYXRocywgaTtcblxuICBcdC8vIEFsbG93IGEgbWFwIG9mIGtleXBhdGhzIHRvIGhhbmRsZXJzXG4gIFx0aWYgKGlzT2JqZWN0KGtleXBhdGgpKSB7XG4gIFx0XHRvcHRpb25zID0gY2FsbGJhY2s7XG4gIFx0XHRtYXAgPSBrZXlwYXRoO1xuXG4gIFx0XHRvYnNlcnZlcnMgPSBbXTtcblxuICBcdFx0Zm9yIChrZXlwYXRoIGluIG1hcCkge1xuICBcdFx0XHRpZiAobWFwLmhhc093blByb3BlcnR5KGtleXBhdGgpKSB7XG4gIFx0XHRcdFx0Y2FsbGJhY2sgPSBtYXBba2V5cGF0aF07XG4gIFx0XHRcdFx0b2JzZXJ2ZXJzLnB1c2godGhpcy5vYnNlcnZlKGtleXBhdGgsIGNhbGxiYWNrLCBvcHRpb25zKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0Y2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0d2hpbGUgKG9ic2VydmVycy5sZW5ndGgpIHtcbiAgXHRcdFx0XHRcdG9ic2VydmVycy5wb3AoKS5jYW5jZWwoKTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0Ly8gQWxsb3cgYHJhY3RpdmUub2JzZXJ2ZSggY2FsbGJhY2sgKWAgLSBpLmUuIG9ic2VydmUgZW50aXJlIG1vZGVsXG4gIFx0aWYgKHR5cGVvZiBrZXlwYXRoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdG9wdGlvbnMgPSBjYWxsYmFjaztcbiAgXHRcdGNhbGxiYWNrID0ga2V5cGF0aDtcbiAgXHRcdGtleXBhdGggPSBcIlwiO1xuXG4gIFx0XHRyZXR1cm4gb2JzZXJ2ZV9nZXRPYnNlcnZlckZhY2FkZSh0aGlzLCBrZXlwYXRoLCBjYWxsYmFjaywgb3B0aW9ucyk7XG4gIFx0fVxuXG4gIFx0a2V5cGF0aHMgPSBrZXlwYXRoLnNwbGl0KFwiIFwiKTtcblxuICBcdC8vIFNpbmdsZSBrZXlwYXRoXG4gIFx0aWYgKGtleXBhdGhzLmxlbmd0aCA9PT0gMSkge1xuICBcdFx0cmV0dXJuIG9ic2VydmVfZ2V0T2JzZXJ2ZXJGYWNhZGUodGhpcywga2V5cGF0aCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xuICBcdH1cblxuICBcdC8vIE11bHRpcGxlIHNwYWNlLXNlcGFyYXRlZCBrZXlwYXRoc1xuICBcdG9ic2VydmVycyA9IFtdO1xuXG4gIFx0aSA9IGtleXBhdGhzLmxlbmd0aDtcbiAgXHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRrZXlwYXRoID0ga2V5cGF0aHNbaV07XG5cbiAgXHRcdGlmIChrZXlwYXRoKSB7XG4gIFx0XHRcdG9ic2VydmVycy5wdXNoKG9ic2VydmVfZ2V0T2JzZXJ2ZXJGYWNhZGUodGhpcywga2V5cGF0aCwgY2FsbGJhY2ssIG9wdGlvbnMpKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0Y2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHdoaWxlIChvYnNlcnZlcnMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0b2JzZXJ2ZXJzLnBvcCgpLmNhbmNlbCgpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fTtcbiAgfVxuXG4gIHZhciBvYnNlcnZlT25jZSA9IFJhY3RpdmUkb2JzZXJ2ZU9uY2U7XG5cbiAgZnVuY3Rpb24gUmFjdGl2ZSRvYnNlcnZlT25jZShwcm9wZXJ0eSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcblxuICBcdHZhciBvYnNlcnZlciA9IHRoaXMub2JzZXJ2ZShwcm9wZXJ0eSwgZnVuY3Rpb24gKCkge1xuICBcdFx0Y2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgXHRcdG9ic2VydmVyLmNhbmNlbCgpO1xuICBcdH0sIHsgaW5pdDogZmFsc2UsIGRlZmVyOiBvcHRpb25zICYmIG9wdGlvbnMuZGVmZXIgfSk7XG5cbiAgXHRyZXR1cm4gb2JzZXJ2ZXI7XG4gIH1cblxuICB2YXIgc2hhcmVkX3RyaW0gPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50cmltKCk7XG4gIH07XG5cbiAgdmFyIG5vdEVtcHR5U3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHJldHVybiBzdHIgIT09IFwiXCI7XG4gIH07XG5cbiAgdmFyIG9mZiA9IFJhY3RpdmUkb2ZmO1xuICBmdW5jdGlvbiBSYWN0aXZlJG9mZihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciBldmVudE5hbWVzO1xuXG4gIFx0Ly8gaWYgbm8gYXJndW1lbnRzIHNwZWNpZmllZCwgcmVtb3ZlIGFsbCBjYWxsYmFja3NcbiAgXHRpZiAoIWV2ZW50TmFtZSkge1xuICBcdFx0Ly8gVE9ETyB1c2UgdGhpcyBjb2RlIGluc3RlYWQsIG9uY2UgdGhlIGZvbGxvd2luZyBpc3N1ZSBoYXMgYmVlbiByZXNvbHZlZFxuICBcdFx0Ly8gaW4gUGhhbnRvbUpTICh0ZXN0cyBhcmUgdW5wYXNzYWJsZSBvdGhlcndpc2UhKVxuICBcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2FyaXlhL3BoYW50b21qcy9pc3N1ZXMvMTE4NTZcbiAgXHRcdC8vIGRlZmluZVByb3BlcnR5KCB0aGlzLCAnX3N1YnMnLCB7IHZhbHVlOiBjcmVhdGUoIG51bGwgKSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuICBcdFx0Zm9yIChldmVudE5hbWUgaW4gdGhpcy5fc3Vicykge1xuICBcdFx0XHRkZWxldGUgdGhpcy5fc3Vic1tldmVudE5hbWVdO1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBIYW5kbGUgbXVsdGlwbGUgc3BhY2Utc2VwYXJhdGVkIGV2ZW50IG5hbWVzXG4gIFx0XHRldmVudE5hbWVzID0gZXZlbnROYW1lLnNwbGl0KFwiIFwiKS5tYXAoc2hhcmVkX3RyaW0pLmZpbHRlcihub3RFbXB0eVN0cmluZyk7XG5cbiAgXHRcdGV2ZW50TmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gIFx0XHRcdHZhciBzdWJzY3JpYmVycywgaW5kZXg7XG5cbiAgXHRcdFx0Ly8gSWYgd2UgaGF2ZSBzdWJzY3JpYmVycyBmb3IgdGhpcyBldmVudC4uLlxuICBcdFx0XHRpZiAoc3Vic2NyaWJlcnMgPSBfdGhpcy5fc3Vic1tldmVudE5hbWVdKSB7XG4gIFx0XHRcdFx0Ly8gLi4uaWYgYSBjYWxsYmFjayB3YXMgc3BlY2lmaWVkLCBvbmx5IHJlbW92ZSB0aGF0XG4gIFx0XHRcdFx0aWYgKGNhbGxiYWNrKSB7XG4gIFx0XHRcdFx0XHRpbmRleCA9IHN1YnNjcmliZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuICBcdFx0XHRcdFx0aWYgKGluZGV4ICE9PSAtMSkge1xuICBcdFx0XHRcdFx0XHRzdWJzY3JpYmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSByZW1vdmUgYWxsIGNhbGxiYWNrc1xuICBcdFx0XHRcdGVsc2Uge1xuICBcdFx0XHRcdFx0X3RoaXMuX3N1YnNbZXZlbnROYW1lXSA9IFtdO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgb24gPSBSYWN0aXZlJG9uO1xuICBmdW5jdGlvbiBSYWN0aXZlJG9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dmFyIGxpc3RlbmVycywgbiwgZXZlbnROYW1lcztcblxuICBcdC8vIGFsbG93IG11dGxpcGxlIGxpc3RlbmVycyB0byBiZSBib3VuZCBpbiBvbmUgZ29cbiAgXHRpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gXCJvYmplY3RcIikge1xuICBcdFx0bGlzdGVuZXJzID0gW107XG5cbiAgXHRcdGZvciAobiBpbiBldmVudE5hbWUpIHtcbiAgXHRcdFx0aWYgKGV2ZW50TmFtZS5oYXNPd25Qcm9wZXJ0eShuKSkge1xuICBcdFx0XHRcdGxpc3RlbmVycy5wdXNoKHRoaXMub24obiwgZXZlbnROYW1lW25dKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0Y2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0dmFyIGxpc3RlbmVyO1xuXG4gIFx0XHRcdFx0d2hpbGUgKGxpc3RlbmVyID0gbGlzdGVuZXJzLnBvcCgpKSB7XG4gIFx0XHRcdFx0XHRsaXN0ZW5lci5jYW5jZWwoKTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0Ly8gSGFuZGxlIG11bHRpcGxlIHNwYWNlLXNlcGFyYXRlZCBldmVudCBuYW1lc1xuICBcdGV2ZW50TmFtZXMgPSBldmVudE5hbWUuc3BsaXQoXCIgXCIpLm1hcChzaGFyZWRfdHJpbSkuZmlsdGVyKG5vdEVtcHR5U3RyaW5nKTtcblxuICBcdGV2ZW50TmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gIFx0XHQoX3RoaXMuX3N1YnNbZXZlbnROYW1lXSB8fCAoX3RoaXMuX3N1YnNbZXZlbnROYW1lXSA9IFtdKSkucHVzaChjYWxsYmFjayk7XG4gIFx0fSk7XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0Y2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHJldHVybiBfdGhpcy5vZmYoZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gIFx0XHR9XG4gIFx0fTtcbiAgfVxuXG4gIHZhciBvbmNlID0gUmFjdGl2ZSRvbmNlO1xuXG4gIGZ1bmN0aW9uIFJhY3RpdmUkb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcblxuICBcdHZhciBsaXN0ZW5lciA9IHRoaXMub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gIFx0XHRoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIFx0XHRsaXN0ZW5lci5jYW5jZWwoKTtcbiAgXHR9KTtcblxuICBcdC8vIHNvIHdlIGNhbiBzdGlsbCBkbyBsaXN0ZW5lci5jYW5jZWwoKSBtYW51YWxseVxuICBcdHJldHVybiBsaXN0ZW5lcjtcbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4gYXJyYXksIHRoZSBuYW1lIG9mIGEgbXV0YXRvciBtZXRob2QsIGFuZCB0aGVcbiAgLy8gYXJndW1lbnRzIHRvIGNhbGwgdGhhdCBtdXRhdG9yIG1ldGhvZCB3aXRoLCBhbmQgcmV0dXJucyBhbiBhcnJheSB0aGF0XG4gIC8vIG1hcHMgdGhlIG9sZCBpbmRpY2VzIHRvIHRoZWlyIG5ldyBpbmRpY2VzLlxuXG4gIC8vIFNvIGlmIHlvdSBoYWQgc29tZXRoaW5nIGxpa2UgdGhpcy4uLlxuICAvL1xuICAvLyAgICAgYXJyYXkgPSBbICdhJywgJ2InLCAnYycsICdkJyBdO1xuICAvLyAgICAgYXJyYXkucHVzaCggJ2UnICk7XG4gIC8vXG4gIC8vIC4uLnlvdSdkIGdldCBgWyAwLCAxLCAyLCAzIF1gIC0gaW4gb3RoZXIgd29yZHMsIG5vbmUgb2YgdGhlIG9sZCBpbmRpY2VzXG4gIC8vIGhhdmUgY2hhbmdlZC4gSWYgeW91IHRoZW4gZGlkIHRoaXMuLi5cbiAgLy9cbiAgLy8gICAgIGFycmF5LnVuc2hpZnQoICd6JyApO1xuICAvL1xuICAvLyAuLi50aGUgaW5kaWNlcyB3b3VsZCBiZSBgWyAxLCAyLCAzLCA0LCA1IF1gIC0gZXZlcnkgaXRlbSBoYXMgYmVlbiBtb3ZlZFxuICAvLyBvbmUgaGlnaGVyIHRvIG1ha2Ugcm9vbSBmb3IgdGhlICd6Jy4gSWYgeW91IHJlbW92ZWQgYW4gaXRlbSwgdGhlIG5ldyBpbmRleFxuICAvLyB3b3VsZCBiZSAtMS4uLlxuICAvL1xuICAvLyAgICAgYXJyYXkuc3BsaWNlKCAyLCAyICk7XG4gIC8vXG4gIC8vIC4uLnRoaXMgd291bGQgcmVzdWx0IGluIFsgMCwgMSwgLTEsIC0xLCAyLCAzIF0uXG4gIC8vXG4gIC8vIFRoaXMgaW5mb3JtYXRpb24gaXMgdXNlZCB0byBlbmFibGUgZmFzdCwgbm9uLWRlc3RydWN0aXZlIHNodWZmbGluZyBvZiBsaXN0XG4gIC8vIHNlY3Rpb25zIHdoZW4geW91IGRvIGUuZy4gYHJhY3RpdmUuc3BsaWNlKCAnaXRlbXMnLCAyLCAyICk7XG5cbiAgdmFyIHNoYXJlZF9nZXROZXdJbmRpY2VzID0gZ2V0TmV3SW5kaWNlcztcblxuICBmdW5jdGlvbiBnZXROZXdJbmRpY2VzKGFycmF5LCBtZXRob2ROYW1lLCBhcmdzKSB7XG4gIFx0dmFyIHNwbGljZUFyZ3VtZW50cyxcbiAgXHQgICAgbGVuLFxuICBcdCAgICBuZXdJbmRpY2VzID0gW10sXG4gIFx0ICAgIHJlbW92ZVN0YXJ0LFxuICBcdCAgICByZW1vdmVFbmQsXG4gIFx0ICAgIGJhbGFuY2UsXG4gIFx0ICAgIGk7XG5cbiAgXHRzcGxpY2VBcmd1bWVudHMgPSBnZXRTcGxpY2VFcXVpdmFsZW50KGFycmF5LCBtZXRob2ROYW1lLCBhcmdzKTtcblxuICBcdGlmICghc3BsaWNlQXJndW1lbnRzKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDsgLy8gVE9ETyBzdXBwb3J0IHJldmVyc2UgYW5kIHNvcnQ/XG4gIFx0fVxuXG4gIFx0bGVuID0gYXJyYXkubGVuZ3RoO1xuICBcdGJhbGFuY2UgPSBzcGxpY2VBcmd1bWVudHMubGVuZ3RoIC0gMiAtIHNwbGljZUFyZ3VtZW50c1sxXTtcblxuICBcdHJlbW92ZVN0YXJ0ID0gTWF0aC5taW4obGVuLCBzcGxpY2VBcmd1bWVudHNbMF0pO1xuICBcdHJlbW92ZUVuZCA9IHJlbW92ZVN0YXJ0ICsgc3BsaWNlQXJndW1lbnRzWzFdO1xuXG4gIFx0Zm9yIChpID0gMDsgaSA8IHJlbW92ZVN0YXJ0OyBpICs9IDEpIHtcbiAgXHRcdG5ld0luZGljZXMucHVzaChpKTtcbiAgXHR9XG5cbiAgXHRmb3IgKDsgaSA8IHJlbW92ZUVuZDsgaSArPSAxKSB7XG4gIFx0XHRuZXdJbmRpY2VzLnB1c2goLTEpO1xuICBcdH1cblxuICBcdGZvciAoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdG5ld0luZGljZXMucHVzaChpICsgYmFsYW5jZSk7XG4gIFx0fVxuXG4gIFx0Ly8gdGhlcmUgaXMgYSBuZXQgc2hpZnQgZm9yIHRoZSByZXN0IG9mIHRoZSBhcnJheSBzdGFydGluZyB3aXRoIGluZGV4ICsgYmFsYW5jZVxuICBcdGlmIChiYWxhbmNlICE9PSAwKSB7XG4gIFx0XHRuZXdJbmRpY2VzLnRvdWNoZWRGcm9tID0gc3BsaWNlQXJndW1lbnRzWzBdO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRuZXdJbmRpY2VzLnRvdWNoZWRGcm9tID0gYXJyYXkubGVuZ3RoO1xuICBcdH1cblxuICBcdHJldHVybiBuZXdJbmRpY2VzO1xuICB9XG5cbiAgLy8gVGhlIHBvcCwgcHVzaCwgc2hpZnQgYW4gdW5zaGlmdCBtZXRob2RzIGNhbiBhbGwgYmUgcmVwcmVzZW50ZWRcbiAgLy8gYXMgYW4gZXF1aXZhbGVudCBzcGxpY2VcbiAgZnVuY3Rpb24gZ2V0U3BsaWNlRXF1aXZhbGVudChhcnJheSwgbWV0aG9kTmFtZSwgYXJncykge1xuICBcdHN3aXRjaCAobWV0aG9kTmFtZSkge1xuICBcdFx0Y2FzZSBcInNwbGljZVwiOlxuICBcdFx0XHRpZiAoYXJnc1swXSAhPT0gdW5kZWZpbmVkICYmIGFyZ3NbMF0gPCAwKSB7XG4gIFx0XHRcdFx0YXJnc1swXSA9IGFycmF5Lmxlbmd0aCArIE1hdGgubWF4KGFyZ3NbMF0sIC1hcnJheS5sZW5ndGgpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0d2hpbGUgKGFyZ3MubGVuZ3RoIDwgMikge1xuICBcdFx0XHRcdGFyZ3MucHVzaCgwKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIGVuc3VyZSB3ZSBvbmx5IHJlbW92ZSBlbGVtZW50cyB0aGF0IGV4aXN0XG4gIFx0XHRcdGFyZ3NbMV0gPSBNYXRoLm1pbihhcmdzWzFdLCBhcnJheS5sZW5ndGggLSBhcmdzWzBdKTtcblxuICBcdFx0XHRyZXR1cm4gYXJncztcblxuICBcdFx0Y2FzZSBcInNvcnRcIjpcbiAgXHRcdGNhc2UgXCJyZXZlcnNlXCI6XG4gIFx0XHRcdHJldHVybiBudWxsO1xuXG4gIFx0XHRjYXNlIFwicG9wXCI6XG4gIFx0XHRcdGlmIChhcnJheS5sZW5ndGgpIHtcbiAgXHRcdFx0XHRyZXR1cm4gW2FycmF5Lmxlbmd0aCAtIDEsIDFdO1xuICBcdFx0XHR9XG4gIFx0XHRcdHJldHVybiBbMCwgMF07XG5cbiAgXHRcdGNhc2UgXCJwdXNoXCI6XG4gIFx0XHRcdHJldHVybiBbYXJyYXkubGVuZ3RoLCAwXS5jb25jYXQoYXJncyk7XG5cbiAgXHRcdGNhc2UgXCJzaGlmdFwiOlxuICBcdFx0XHRyZXR1cm4gWzAsIGFycmF5Lmxlbmd0aCA/IDEgOiAwXTtcblxuICBcdFx0Y2FzZSBcInVuc2hpZnRcIjpcbiAgXHRcdFx0cmV0dXJuIFswLCAwXS5jb25jYXQoYXJncyk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cbiAgdmFyIG1ha2VBcnJheU1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gIFx0cmV0dXJuIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgXHRcdFx0YXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIFx0XHR9XG5cbiAgXHRcdHZhciBhcnJheSxcbiAgXHRcdCAgICBuZXdJbmRpY2VzID0gW10sXG4gIFx0XHQgICAgbGVuLFxuICBcdFx0ICAgIHByb21pc2UsXG4gIFx0XHQgICAgcmVzdWx0O1xuXG4gIFx0XHRrZXlwYXRoID0gZ2V0S2V5cGF0aChub3JtYWxpc2Uoa2V5cGF0aCkpO1xuXG4gIFx0XHRhcnJheSA9IHRoaXMudmlld21vZGVsLmdldChrZXlwYXRoKTtcbiAgXHRcdGxlbiA9IGFycmF5Lmxlbmd0aDtcblxuICBcdFx0aWYgKCFpc0FycmF5KGFycmF5KSkge1xuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYWxsZWQgcmFjdGl2ZS5cIiArIG1ldGhvZE5hbWUgKyBcIignXCIgKyBrZXlwYXRoLnN0ciArIFwiJyksIGJ1dCAnXCIgKyBrZXlwYXRoLnN0ciArIFwiJyBkb2VzIG5vdCByZWZlciB0byBhbiBhcnJheVwiKTtcbiAgXHRcdH1cblxuICBcdFx0bmV3SW5kaWNlcyA9IHNoYXJlZF9nZXROZXdJbmRpY2VzKGFycmF5LCBtZXRob2ROYW1lLCBhcmdzKTtcblxuICBcdFx0cmVzdWx0ID0gYXJyYXlQcm90b1ttZXRob2ROYW1lXS5hcHBseShhcnJheSwgYXJncyk7XG4gIFx0XHRwcm9taXNlID0gZ2xvYmFsX3J1bmxvb3Auc3RhcnQodGhpcywgdHJ1ZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHJldHVybiByZXN1bHQ7XG4gIFx0XHR9KTtcblxuICBcdFx0aWYgKCEhbmV3SW5kaWNlcykge1xuICBcdFx0XHR0aGlzLnZpZXdtb2RlbC5zbWFydFVwZGF0ZShrZXlwYXRoLCBhcnJheSwgbmV3SW5kaWNlcyk7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHR0aGlzLnZpZXdtb2RlbC5tYXJrKGtleXBhdGgpO1xuICBcdFx0fVxuXG4gIFx0XHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcblxuICBcdFx0cmV0dXJuIHByb21pc2U7XG4gIFx0fTtcbiAgfTtcblxuICB2YXIgcG9wID0gbWFrZUFycmF5TWV0aG9kKFwicG9wXCIpO1xuXG4gIHZhciBwdXNoID0gbWFrZUFycmF5TWV0aG9kKFwicHVzaFwiKTtcblxuICB2YXIgY3NzLFxuICAgICAgdXBkYXRlLFxuICAgICAgc3R5bGVFbGVtZW50LFxuICAgICAgaGVhZCxcbiAgICAgIHN0eWxlU2hlZXQsXG4gICAgICBpbkRvbSxcbiAgICAgIGdsb2JhbF9jc3NfX3ByZWZpeCA9IFwiLyogUmFjdGl2ZS5qcyBjb21wb25lbnQgc3R5bGVzICovXFxuXCIsXG4gICAgICBzdHlsZXMgPSBbXSxcbiAgICAgIGRpcnR5ID0gZmFsc2U7XG5cbiAgaWYgKCFpc0NsaWVudCkge1xuICBcdC8vIFRPRE8gaGFuZGxlIGVuY2Fwc3VsYXRlZCBDU1MgaW4gc2VydmVyLXJlbmRlcmVkIEhUTUwhXG4gIFx0Y3NzID0ge1xuICBcdFx0YWRkOiBub29wLFxuICBcdFx0YXBwbHk6IG5vb3BcbiAgXHR9O1xuICB9IGVsc2Uge1xuICBcdHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblxuICBcdGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cbiAgXHRpbkRvbSA9IGZhbHNlO1xuXG4gIFx0Ly8gSW50ZXJuZXQgRXhwbG9kZXIgd29uJ3QgbGV0IHlvdSB1c2Ugc3R5bGVTaGVldC5pbm5lckhUTUwgLSB3ZSBoYXZlIHRvXG4gIFx0Ly8gdXNlIHN0eWxlU2hlZXQuY3NzVGV4dCBpbnN0ZWFkXG4gIFx0c3R5bGVTaGVldCA9IHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0O1xuXG4gIFx0dXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIGNzcyA9IGdsb2JhbF9jc3NfX3ByZWZpeCArIHN0eWxlcy5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgXHRcdFx0cmV0dXJuIFwiXFxuLyoge1wiICsgcy5pZCArIFwifSAqL1xcblwiICsgcy5zdHlsZXM7XG4gIFx0XHR9KS5qb2luKFwiXFxuXCIpO1xuXG4gIFx0XHRpZiAoc3R5bGVTaGVldCkge1xuICBcdFx0XHRzdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRzdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gY3NzO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIWluRG9tKSB7XG4gIFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgXHRcdFx0aW5Eb20gPSB0cnVlO1xuICBcdFx0fVxuICBcdH07XG5cbiAgXHRjc3MgPSB7XG4gIFx0XHRhZGQ6IGZ1bmN0aW9uIChzKSB7XG4gIFx0XHRcdHN0eWxlcy5wdXNoKHMpO1xuICBcdFx0XHRkaXJ0eSA9IHRydWU7XG4gIFx0XHR9LFxuXG4gIFx0XHRhcHBseTogZnVuY3Rpb24gKCkge1xuICBcdFx0XHRpZiAoZGlydHkpIHtcbiAgXHRcdFx0XHR1cGRhdGUoKTtcbiAgXHRcdFx0XHRkaXJ0eSA9IGZhbHNlO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fTtcbiAgfVxuXG4gIHZhciBnbG9iYWxfY3NzID0gY3NzO1xuXG4gIHZhciBwcm90b3R5cGVfcmVuZGVyID0gUmFjdGl2ZSRyZW5kZXI7XG5cbiAgdmFyIHJlbmRlckhvb2sgPSBuZXcgaG9va3NfSG9vayhcInJlbmRlclwiKSxcbiAgICAgIGNvbXBsZXRlSG9vayA9IG5ldyBob29rc19Ib29rKFwiY29tcGxldGVcIik7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkcmVuZGVyKHRhcmdldCwgYW5jaG9yKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciBwcm9taXNlLCBpbnN0YW5jZXMsIHRyYW5zaXRpb25zRW5hYmxlZDtcblxuICBcdC8vIGlmIGBub0ludHJvYCBpcyBgdHJ1ZWAsIHRlbXBvcmFyaWx5IGRpc2FibGUgdHJhbnNpdGlvbnNcbiAgXHR0cmFuc2l0aW9uc0VuYWJsZWQgPSB0aGlzLnRyYW5zaXRpb25zRW5hYmxlZDtcbiAgXHRpZiAodGhpcy5ub0ludHJvKSB7XG4gIFx0XHR0aGlzLnRyYW5zaXRpb25zRW5hYmxlZCA9IGZhbHNlO1xuICBcdH1cblxuICBcdHByb21pc2UgPSBnbG9iYWxfcnVubG9vcC5zdGFydCh0aGlzLCB0cnVlKTtcbiAgXHRnbG9iYWxfcnVubG9vcC5zY2hlZHVsZVRhc2soZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHJlbmRlckhvb2suZmlyZShfdGhpcyk7XG4gIFx0fSwgdHJ1ZSk7XG5cbiAgXHRpZiAodGhpcy5mcmFnbWVudC5yZW5kZXJlZCkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbm5vdCBjYWxsIHJhY3RpdmUucmVuZGVyKCkgb24gYW4gYWxyZWFkeSByZW5kZXJlZCBpbnN0YW5jZSEgQ2FsbCByYWN0aXZlLnVucmVuZGVyKCkgZmlyc3RcIik7XG4gIFx0fVxuXG4gIFx0dGFyZ2V0ID0gZ2V0RWxlbWVudCh0YXJnZXQpIHx8IHRoaXMuZWw7XG4gIFx0YW5jaG9yID0gZ2V0RWxlbWVudChhbmNob3IpIHx8IHRoaXMuYW5jaG9yO1xuXG4gIFx0dGhpcy5lbCA9IHRhcmdldDtcbiAgXHR0aGlzLmFuY2hvciA9IGFuY2hvcjtcblxuICBcdGlmICghdGhpcy5hcHBlbmQgJiYgdGFyZ2V0KSB7XG4gIFx0XHQvLyBUZWFyZG93biBhbnkgZXhpc3RpbmcgaW5zdGFuY2VzICpiZWZvcmUqIHRyeWluZyB0byBzZXQgdXAgdGhlIG5ldyBvbmUgLVxuICBcdFx0Ly8gYXZvaWRzIGNlcnRhaW4gd2VpcmQgYnVnc1xuICBcdFx0dmFyIG90aGVycyA9IHRhcmdldC5fX3JhY3RpdmVfaW5zdGFuY2VzX187XG4gIFx0XHRpZiAob3RoZXJzICYmIG90aGVycy5sZW5ndGgpIHtcbiAgXHRcdFx0cmVtb3ZlT3RoZXJJbnN0YW5jZXMob3RoZXJzKTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gbWFrZSBzdXJlIHdlIGFyZSB0aGUgb25seSBvY2N1cGFudHNcbiAgXHRcdHRhcmdldC5pbm5lckhUTUwgPSBcIlwiOyAvLyBUT0RPIGlzIHRoaXMgcXVpY2tlciB0aGFuIHJlbW92ZUNoaWxkPyBJbml0aWFsIHJlc2VhcmNoIGluY29uY2x1c2l2ZVxuICBcdH1cblxuICBcdGlmICh0aGlzLmNzc0lkKSB7XG4gIFx0XHQvLyBlbnN1cmUgZW5jYXBzdWxhdGVkIENTUyBpcyB1cC10by1kYXRlXG4gIFx0XHRnbG9iYWxfY3NzLmFwcGx5KCk7XG4gIFx0fVxuXG4gIFx0aWYgKHRhcmdldCkge1xuICBcdFx0aWYgKCEoaW5zdGFuY2VzID0gdGFyZ2V0Ll9fcmFjdGl2ZV9pbnN0YW5jZXNfXykpIHtcbiAgXHRcdFx0dGFyZ2V0Ll9fcmFjdGl2ZV9pbnN0YW5jZXNfXyA9IFt0aGlzXTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGluc3RhbmNlcy5wdXNoKHRoaXMpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoYW5jaG9yKSB7XG4gIFx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUodGhpcy5mcmFnbWVudC5yZW5kZXIoKSwgYW5jaG9yKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmZyYWdtZW50LnJlbmRlcigpKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcblxuICBcdHRoaXMudHJhbnNpdGlvbnNFbmFibGVkID0gdHJhbnNpdGlvbnNFbmFibGVkO1xuXG4gIFx0cmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gY29tcGxldGVIb29rLmZpcmUoX3RoaXMpO1xuICBcdH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlT3RoZXJJbnN0YW5jZXMob3RoZXJzKSB7XG4gIFx0b3RoZXJzLnNwbGljZSgwLCBvdGhlcnMubGVuZ3RoKS5mb3JFYWNoKHRlYXJkb3duKTtcbiAgfVxuXG4gIHZhciBhZGFwdENvbmZpZ3VyYXRvciA9IHtcbiAgXHRleHRlbmQ6IGZ1bmN0aW9uIChQYXJlbnQsIHByb3RvLCBvcHRpb25zKSB7XG4gIFx0XHRwcm90by5hZGFwdCA9IGN1c3RvbV9hZGFwdF9fY29tYmluZShwcm90by5hZGFwdCwgZW5zdXJlQXJyYXkob3B0aW9ucy5hZGFwdCkpO1xuICBcdH0sXG5cbiAgXHRpbml0OiBmdW5jdGlvbiAoKSB7fVxuICB9O1xuXG4gIHZhciBjdXN0b21fYWRhcHQgPSBhZGFwdENvbmZpZ3VyYXRvcjtcblxuICBmdW5jdGlvbiBjdXN0b21fYWRhcHRfX2NvbWJpbmUoYSwgYikge1xuICBcdHZhciBjID0gYS5zbGljZSgpLFxuICBcdCAgICBpID0gYi5sZW5ndGg7XG5cbiAgXHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRpZiAoISB+Yy5pbmRleE9mKGJbaV0pKSB7XG4gIFx0XHRcdGMucHVzaChiW2ldKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gYztcbiAgfVxuXG4gIHZhciB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1Dc3M7XG5cbiAgdmFyIHNlbGVjdG9yc1BhdHRlcm4gPSAvKD86XnxcXH0pP1xccyooW15cXHtcXH1dKylcXHMqXFx7L2csXG4gICAgICBjb21tZW50c1BhdHRlcm4gPSAvXFwvXFwqLio/XFwqXFwvL2csXG4gICAgICBzZWxlY3RvclVuaXRQYXR0ZXJuID0gLygoPzooPzpcXFtbXlxcXStdXFxdKXwoPzpbXlxcc1xcK1xcPlxcfjpdKSkrKSgoPzo6W15cXHNcXCtcXD5cXH5cXChdKyg/OlxcKFteXFwpXStcXCkpPyk/XFxzKltcXHNcXCtcXD5cXH5dPylcXHMqL2csXG4gICAgICBtZWRpYVF1ZXJ5UGF0dGVybiA9IC9eQG1lZGlhLyxcbiAgICAgIGRhdGFSdmNHdWlkUGF0dGVybiA9IC9cXFtkYXRhLXJhY3RpdmUtY3Nzfj1cIlxce1thLXowLTktXStcXH1cIl0vZztcbiAgZnVuY3Rpb24gdHJhbnNmb3JtQ3NzKGNzcywgaWQpIHtcbiAgXHR2YXIgdHJhbnNmb3JtZWQsIGRhdGFBdHRyLCBhZGRHdWlkO1xuXG4gIFx0ZGF0YUF0dHIgPSBcIltkYXRhLXJhY3RpdmUtY3Nzfj1cXFwie1wiICsgaWQgKyBcIn1cXFwiXVwiO1xuXG4gIFx0YWRkR3VpZCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICBcdFx0dmFyIHNlbGVjdG9yVW5pdHMsXG4gIFx0XHQgICAgbWF0Y2gsXG4gIFx0XHQgICAgdW5pdCxcbiAgXHRcdCAgICBiYXNlLFxuICBcdFx0ICAgIHByZXBlbmRlZCxcbiAgXHRcdCAgICBhcHBlbmRlZCxcbiAgXHRcdCAgICBpLFxuICBcdFx0ICAgIHRyYW5zZm9ybWVkID0gW107XG5cbiAgXHRcdHNlbGVjdG9yVW5pdHMgPSBbXTtcblxuICBcdFx0d2hpbGUgKG1hdGNoID0gc2VsZWN0b3JVbml0UGF0dGVybi5leGVjKHNlbGVjdG9yKSkge1xuICBcdFx0XHRzZWxlY3RvclVuaXRzLnB1c2goe1xuICBcdFx0XHRcdHN0cjogbWF0Y2hbMF0sXG4gIFx0XHRcdFx0YmFzZTogbWF0Y2hbMV0sXG4gIFx0XHRcdFx0bW9kaWZpZXJzOiBtYXRjaFsyXVxuICBcdFx0XHR9KTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gRm9yIGVhY2ggc2ltcGxlIHNlbGVjdG9yIHdpdGhpbiB0aGUgc2VsZWN0b3IsIHdlIG5lZWQgdG8gY3JlYXRlIGEgdmVyc2lvblxuICBcdFx0Ly8gdGhhdCBhKSBjb21iaW5lcyB3aXRoIHRoZSBpZCwgYW5kIGIpIGlzIGluc2lkZSB0aGUgaWRcbiAgXHRcdGJhc2UgPSBzZWxlY3RvclVuaXRzLm1hcChleHRyYWN0U3RyaW5nKTtcblxuICBcdFx0aSA9IHNlbGVjdG9yVW5pdHMubGVuZ3RoO1xuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRhcHBlbmRlZCA9IGJhc2Uuc2xpY2UoKTtcblxuICBcdFx0XHQvLyBQc2V1ZG8tc2VsZWN0b3JzIHNob3VsZCBnbyBhZnRlciB0aGUgYXR0cmlidXRlIHNlbGVjdG9yXG4gIFx0XHRcdHVuaXQgPSBzZWxlY3RvclVuaXRzW2ldO1xuICBcdFx0XHRhcHBlbmRlZFtpXSA9IHVuaXQuYmFzZSArIGRhdGFBdHRyICsgdW5pdC5tb2RpZmllcnMgfHwgXCJcIjtcblxuICBcdFx0XHRwcmVwZW5kZWQgPSBiYXNlLnNsaWNlKCk7XG4gIFx0XHRcdHByZXBlbmRlZFtpXSA9IGRhdGFBdHRyICsgXCIgXCIgKyBwcmVwZW5kZWRbaV07XG5cbiAgXHRcdFx0dHJhbnNmb3JtZWQucHVzaChhcHBlbmRlZC5qb2luKFwiIFwiKSwgcHJlcGVuZGVkLmpvaW4oXCIgXCIpKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHRyYW5zZm9ybWVkLmpvaW4oXCIsIFwiKTtcbiAgXHR9O1xuXG4gIFx0aWYgKGRhdGFSdmNHdWlkUGF0dGVybi50ZXN0KGNzcykpIHtcbiAgXHRcdHRyYW5zZm9ybWVkID0gY3NzLnJlcGxhY2UoZGF0YVJ2Y0d1aWRQYXR0ZXJuLCBkYXRhQXR0cik7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdHRyYW5zZm9ybWVkID0gY3NzLnJlcGxhY2UoY29tbWVudHNQYXR0ZXJuLCBcIlwiKS5yZXBsYWNlKHNlbGVjdG9yc1BhdHRlcm4sIGZ1bmN0aW9uIChtYXRjaCwgJDEpIHtcbiAgXHRcdFx0dmFyIHNlbGVjdG9ycywgdHJhbnNmb3JtZWQ7XG5cbiAgXHRcdFx0Ly8gZG9uJ3QgdHJhbnNmb3JtIG1lZGlhIHF1ZXJpZXMhXG4gIFx0XHRcdGlmIChtZWRpYVF1ZXJ5UGF0dGVybi50ZXN0KCQxKSkgcmV0dXJuIG1hdGNoO1xuXG4gIFx0XHRcdHNlbGVjdG9ycyA9ICQxLnNwbGl0KFwiLFwiKS5tYXAodHJpbSk7XG4gIFx0XHRcdHRyYW5zZm9ybWVkID0gc2VsZWN0b3JzLm1hcChhZGRHdWlkKS5qb2luKFwiLCBcIikgKyBcIiBcIjtcblxuICBcdFx0XHRyZXR1cm4gbWF0Y2gucmVwbGFjZSgkMSwgdHJhbnNmb3JtZWQpO1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRyYW5zZm9ybWVkO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgXHRpZiAoc3RyLnRyaW0pIHtcbiAgXHRcdHJldHVybiBzdHIudHJpbSgpO1xuICBcdH1cblxuICBcdHJldHVybiBzdHIucmVwbGFjZSgvXlxccysvLCBcIlwiKS5yZXBsYWNlKC9cXHMrJC8sIFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0cmFjdFN0cmluZyh1bml0KSB7XG4gIFx0cmV0dXJuIHVuaXQuc3RyO1xuICB9XG5cbiAgdmFyIGNzc19jc3NfX3VpZCA9IDE7XG5cbiAgdmFyIGNzc0NvbmZpZ3VyYXRvciA9IHtcbiAgXHRuYW1lOiBcImNzc1wiLFxuXG4gIFx0ZXh0ZW5kOiBmdW5jdGlvbiAoUGFyZW50LCBwcm90bywgb3B0aW9ucykge1xuICBcdFx0aWYgKG9wdGlvbnMuY3NzKSB7XG4gIFx0XHRcdHZhciBpZCA9IGNzc19jc3NfX3VpZCsrO1xuICBcdFx0XHR2YXIgc3R5bGVzID0gb3B0aW9ucy5ub0Nzc1RyYW5zZm9ybSA/IG9wdGlvbnMuY3NzIDogdHJhbnNmb3JtKG9wdGlvbnMuY3NzLCBpZCk7XG5cbiAgXHRcdFx0cHJvdG8uY3NzSWQgPSBpZDtcbiAgXHRcdFx0Z2xvYmFsX2Nzcy5hZGQoeyBpZDogaWQsIHN0eWxlczogc3R5bGVzIH0pO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRpbml0OiBmdW5jdGlvbiAoKSB7fVxuICB9O1xuXG4gIHZhciBjc3NfY3NzID0gY3NzQ29uZmlndXJhdG9yO1xuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGEpIHtcbiAgXHQvLyBXYXJuIGlmIHVzZXJPcHRpb25zLmRhdGEgaXMgYSBub24tUE9KT1xuICBcdGlmIChkYXRhICYmIGRhdGEuY29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICBcdFx0aWYgKHR5cGVvZiBkYXRhID09PSBcImZ1bmN0aW9uXCIpIHt9IGVsc2UgaWYgKHR5cGVvZiBkYXRhICE9PSBcIm9iamVjdFwiKSB7XG4gIFx0XHRcdGZhdGFsKFwiZGF0YSBvcHRpb24gbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgYFwiICsgZGF0YSArIFwiYCBpcyBub3QgdmFsaWRcIik7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHR3YXJuSWZEZWJ1ZyhcIklmIHN1cHBsaWVkLCBvcHRpb25zLmRhdGEgc2hvdWxkIGJlIGEgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3QgLSB1c2luZyBhIG5vbi1QT0pPIGFzIHRoZSByb290IG9iamVjdCBtYXkgd29yaywgYnV0IGlzIGRpc2NvdXJhZ2VkXCIpO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIHZhciBkYXRhQ29uZmlndXJhdG9yID0ge1xuICBcdG5hbWU6IFwiZGF0YVwiLFxuXG4gIFx0ZXh0ZW5kOiBmdW5jdGlvbiAoUGFyZW50LCBwcm90bywgb3B0aW9ucykge1xuICBcdFx0dmFyIGtleSA9IHVuZGVmaW5lZCxcbiAgXHRcdCAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcblxuICBcdFx0Ly8gY2hlY2sgZm9yIG5vbi1wcmltaXRpdmVzLCB3aGljaCBjb3VsZCBjYXVzZSBtdXRhdGlvbi1yZWxhdGVkIGJ1Z3NcbiAgXHRcdGlmIChvcHRpb25zLmRhdGEgJiYgaXNPYmplY3Qob3B0aW9ucy5kYXRhKSkge1xuICBcdFx0XHRmb3IgKGtleSBpbiBvcHRpb25zLmRhdGEpIHtcbiAgXHRcdFx0XHR2YWx1ZSA9IG9wdGlvbnMuZGF0YVtrZXldO1xuXG4gIFx0XHRcdFx0aWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICBcdFx0XHRcdFx0aWYgKGlzT2JqZWN0KHZhbHVlKSB8fCBpc0FycmF5KHZhbHVlKSkge1xuICBcdFx0XHRcdFx0XHR3YXJuSWZEZWJ1ZyhcIlBhc3NpbmcgYSBgZGF0YWAgb3B0aW9uIHdpdGggb2JqZWN0IGFuZCBhcnJheSBwcm9wZXJ0aWVzIHRvIFJhY3RpdmUuZXh0ZW5kKCkgaXMgZGlzY291cmFnZWQsIGFzIG11dGF0aW5nIHRoZW0gaXMgbGlrZWx5IHRvIGNhdXNlIGJ1Z3MuIENvbnNpZGVyIHVzaW5nIGEgZGF0YSBmdW5jdGlvbiBpbnN0ZWFkOlxcblxcbiAgLy8gdGhpcy4uLlxcbiAgZGF0YTogZnVuY3Rpb24gKCkge1xcbiAgICByZXR1cm4ge1xcbiAgICAgIG15T2JqZWN0OiB7fVxcbiAgICB9O1xcbiAgfSlcXG5cXG4gIC8vIGluc3RlYWQgb2YgdGhpczpcXG4gIGRhdGE6IHtcXG4gICAgbXlPYmplY3Q6IHt9XFxuICB9XCIpO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRwcm90by5kYXRhID0gY3VzdG9tX2RhdGFfX2NvbWJpbmUocHJvdG8uZGF0YSwgb3B0aW9ucy5kYXRhKTtcbiAgXHR9LFxuXG4gIFx0aW5pdDogZnVuY3Rpb24gKFBhcmVudCwgcmFjdGl2ZSwgb3B0aW9ucykge1xuICBcdFx0dmFyIHJlc3VsdCA9IGN1c3RvbV9kYXRhX19jb21iaW5lKFBhcmVudC5wcm90b3R5cGUuZGF0YSwgb3B0aW9ucy5kYXRhKTtcblxuICBcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRyZXN1bHQgPSByZXN1bHQuY2FsbChyYWN0aXZlKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHJlc3VsdCB8fCB7fTtcbiAgXHR9LFxuXG4gIFx0cmVzZXQ6IGZ1bmN0aW9uIChyYWN0aXZlKSB7XG4gIFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5pbml0KHJhY3RpdmUuY29uc3RydWN0b3IsIHJhY3RpdmUsIHJhY3RpdmUudmlld21vZGVsKTtcblxuICBcdFx0cmFjdGl2ZS52aWV3bW9kZWwucmVzZXQocmVzdWx0KTtcbiAgXHRcdHJldHVybiB0cnVlO1xuICBcdH1cbiAgfTtcblxuICB2YXIgY3VzdG9tX2RhdGEgPSBkYXRhQ29uZmlndXJhdG9yO1xuXG4gIGZ1bmN0aW9uIGN1c3RvbV9kYXRhX19jb21iaW5lKHBhcmVudFZhbHVlLCBjaGlsZFZhbHVlKSB7XG4gIFx0dmFsaWRhdGUoY2hpbGRWYWx1ZSk7XG5cbiAgXHR2YXIgcGFyZW50SXNGbiA9IHR5cGVvZiBwYXJlbnRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiO1xuICBcdHZhciBjaGlsZElzRm4gPSB0eXBlb2YgY2hpbGRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiO1xuXG4gIFx0Ly8gVmVyeSBpbXBvcnRhbnQsIG90aGVyd2lzZSBjaGlsZCBpbnN0YW5jZSBjYW4gYmVjb21lXG4gIFx0Ly8gdGhlIGRlZmF1bHQgZGF0YSBvYmplY3Qgb24gUmFjdGl2ZSBvciBhIGNvbXBvbmVudC5cbiAgXHQvLyB0aGVuIHJhY3RpdmUuc2V0KCkgZW5kcyB1cCBzZXR0aW5nIG9uIHRoZSBwcm90b3R5cGUhXG4gIFx0aWYgKCFjaGlsZFZhbHVlICYmICFwYXJlbnRJc0ZuKSB7XG4gIFx0XHRjaGlsZFZhbHVlID0ge307XG4gIFx0fVxuXG4gIFx0Ly8gRmFzdCBwYXRoLCB3aGVyZSB3ZSBqdXN0IG5lZWQgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAgXHQvLyBwYXJlbnQgdG8gY2hpbGRcbiAgXHRpZiAoIXBhcmVudElzRm4gJiYgIWNoaWxkSXNGbikge1xuICBcdFx0cmV0dXJuIGZyb21Qcm9wZXJ0aWVzKGNoaWxkVmFsdWUsIHBhcmVudFZhbHVlKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIGNoaWxkID0gY2hpbGRJc0ZuID8gY2FsbERhdGFGdW5jdGlvbihjaGlsZFZhbHVlLCB0aGlzKSA6IGNoaWxkVmFsdWU7XG4gIFx0XHR2YXIgcGFyZW50ID0gcGFyZW50SXNGbiA/IGNhbGxEYXRhRnVuY3Rpb24ocGFyZW50VmFsdWUsIHRoaXMpIDogcGFyZW50VmFsdWU7XG5cbiAgXHRcdHJldHVybiBmcm9tUHJvcGVydGllcyhjaGlsZCwgcGFyZW50KTtcbiAgXHR9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsbERhdGFGdW5jdGlvbihmbiwgY29udGV4dCkge1xuICBcdHZhciBkYXRhID0gZm4uY2FsbChjb250ZXh0KTtcblxuICBcdGlmICghZGF0YSkgcmV0dXJuO1xuXG4gIFx0aWYgKHR5cGVvZiBkYXRhICE9PSBcIm9iamVjdFwiKSB7XG4gIFx0XHRmYXRhbChcIkRhdGEgZnVuY3Rpb24gbXVzdCByZXR1cm4gYW4gb2JqZWN0XCIpO1xuICBcdH1cblxuICBcdGlmIChkYXRhLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHtcbiAgXHRcdHdhcm5PbmNlSWZEZWJ1ZyhcIkRhdGEgZnVuY3Rpb24gcmV0dXJuZWQgc29tZXRoaW5nIG90aGVyIHRoYW4gYSBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdC4gVGhpcyBtaWdodCB3b3JrLCBidXQgaXMgc3Ryb25nbHkgZGlzY291cmFnZWRcIik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBmcm9tUHJvcGVydGllcyhwcmltYXJ5LCBzZWNvbmRhcnkpIHtcbiAgXHRpZiAocHJpbWFyeSAmJiBzZWNvbmRhcnkpIHtcbiAgXHRcdGZvciAodmFyIGtleSBpbiBzZWNvbmRhcnkpIHtcbiAgXHRcdFx0aWYgKCEoa2V5IGluIHByaW1hcnkpKSB7XG4gIFx0XHRcdFx0cHJpbWFyeVtrZXldID0gc2Vjb25kYXJ5W2tleV07XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHByaW1hcnk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHByaW1hcnkgfHwgc2Vjb25kYXJ5O1xuICB9XG5cbiAgLy8gVE9ETyBkbyB3ZSBuZWVkIHRvIHN1cHBvcnQgdGhpcyBpbiB0aGUgbmV3IFJhY3RpdmUoKSBjYXNlP1xuXG4gIHZhciBQYXJzZXIsXG4gICAgICBQYXJzZUVycm9yLFxuICAgICAgcGFyc2VfUGFyc2VyX19sZWFkaW5nV2hpdGVzcGFjZSA9IC9eXFxzKy87XG5cbiAgUGFyc2VFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gIFx0dGhpcy5uYW1lID0gXCJQYXJzZUVycm9yXCI7XG4gIFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgXHR0cnkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICBcdH0gY2F0Y2ggKGUpIHtcbiAgXHRcdHRoaXMuc3RhY2sgPSBlLnN0YWNrO1xuICBcdH1cbiAgfTtcblxuICBQYXJzZUVycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTtcblxuICBQYXJzZXIgPSBmdW5jdGlvbiAoc3RyLCBvcHRpb25zKSB7XG4gIFx0dmFyIGl0ZW1zLFxuICBcdCAgICBpdGVtLFxuICBcdCAgICBsaW5lU3RhcnQgPSAwO1xuXG4gIFx0dGhpcy5zdHIgPSBzdHI7XG4gIFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXHR0aGlzLnBvcyA9IDA7XG5cbiAgXHR0aGlzLmxpbmVzID0gdGhpcy5zdHIuc3BsaXQoXCJcXG5cIik7XG4gIFx0dGhpcy5saW5lRW5kcyA9IHRoaXMubGluZXMubWFwKGZ1bmN0aW9uIChsaW5lKSB7XG4gIFx0XHR2YXIgbGluZUVuZCA9IGxpbmVTdGFydCArIGxpbmUubGVuZ3RoICsgMTsgLy8gKzEgZm9yIHRoZSBuZXdsaW5lXG5cbiAgXHRcdGxpbmVTdGFydCA9IGxpbmVFbmQ7XG4gIFx0XHRyZXR1cm4gbGluZUVuZDtcbiAgXHR9LCAwKTtcblxuICBcdC8vIEN1c3RvbSBpbml0IGxvZ2ljXG4gIFx0aWYgKHRoaXMuaW5pdCkgdGhpcy5pbml0KHN0ciwgb3B0aW9ucyk7XG5cbiAgXHRpdGVtcyA9IFtdO1xuXG4gIFx0d2hpbGUgKHRoaXMucG9zIDwgdGhpcy5zdHIubGVuZ3RoICYmIChpdGVtID0gdGhpcy5yZWFkKCkpKSB7XG4gIFx0XHRpdGVtcy5wdXNoKGl0ZW0pO1xuICBcdH1cblxuICBcdHRoaXMubGVmdG92ZXIgPSB0aGlzLnJlbWFpbmluZygpO1xuICBcdHRoaXMucmVzdWx0ID0gdGhpcy5wb3N0UHJvY2VzcyA/IHRoaXMucG9zdFByb2Nlc3MoaXRlbXMsIG9wdGlvbnMpIDogaXRlbXM7XG4gIH07XG5cbiAgUGFyc2VyLnByb3RvdHlwZSA9IHtcbiAgXHRyZWFkOiBmdW5jdGlvbiAoY29udmVydGVycykge1xuICBcdFx0dmFyIHBvcywgaSwgbGVuLCBpdGVtO1xuXG4gIFx0XHRpZiAoIWNvbnZlcnRlcnMpIGNvbnZlcnRlcnMgPSB0aGlzLmNvbnZlcnRlcnM7XG5cbiAgXHRcdHBvcyA9IHRoaXMucG9zO1xuXG4gIFx0XHRsZW4gPSBjb252ZXJ0ZXJzLmxlbmd0aDtcbiAgXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0XHR0aGlzLnBvcyA9IHBvczsgLy8gcmVzZXQgZm9yIGVhY2ggYXR0ZW1wdFxuXG4gIFx0XHRcdGlmIChpdGVtID0gY29udmVydGVyc1tpXSh0aGlzKSkge1xuICBcdFx0XHRcdHJldHVybiBpdGVtO1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH0sXG5cbiAgXHRnZXRMaW5lUG9zOiBmdW5jdGlvbiAoY2hhcikge1xuICBcdFx0dmFyIGxpbmVOdW0gPSAwLFxuICBcdFx0ICAgIGxpbmVTdGFydCA9IDAsXG4gIFx0XHQgICAgY29sdW1uTnVtO1xuXG4gIFx0XHR3aGlsZSAoY2hhciA+PSB0aGlzLmxpbmVFbmRzW2xpbmVOdW1dKSB7XG4gIFx0XHRcdGxpbmVTdGFydCA9IHRoaXMubGluZUVuZHNbbGluZU51bV07XG4gIFx0XHRcdGxpbmVOdW0gKz0gMTtcbiAgXHRcdH1cblxuICBcdFx0Y29sdW1uTnVtID0gY2hhciAtIGxpbmVTdGFydDtcbiAgXHRcdHJldHVybiBbbGluZU51bSArIDEsIGNvbHVtbk51bSArIDEsIGNoYXJdOyAvLyBsaW5lL2NvbCBzaG91bGQgYmUgb25lLWJhc2VkLCBub3QgemVyby1iYXNlZCFcbiAgXHR9LFxuXG4gIFx0ZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gIFx0XHR2YXIgcG9zID0gdGhpcy5nZXRMaW5lUG9zKHRoaXMucG9zKTtcbiAgXHRcdHZhciBsaW5lTnVtID0gcG9zWzBdO1xuICBcdFx0dmFyIGNvbHVtbk51bSA9IHBvc1sxXTtcblxuICBcdFx0dmFyIGxpbmUgPSB0aGlzLmxpbmVzW3Bvc1swXSAtIDFdO1xuICBcdFx0dmFyIG51bVRhYnMgPSAwO1xuICBcdFx0dmFyIGFubm90YXRpb24gPSBsaW5lLnJlcGxhY2UoL1xcdC9nLCBmdW5jdGlvbiAobWF0Y2gsIGNoYXIpIHtcbiAgXHRcdFx0aWYgKGNoYXIgPCBwb3NbMV0pIHtcbiAgXHRcdFx0XHRudW1UYWJzICs9IDE7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRyZXR1cm4gXCIgIFwiO1xuICBcdFx0fSkgKyBcIlxcblwiICsgbmV3IEFycmF5KHBvc1sxXSArIG51bVRhYnMpLmpvaW4oXCIgXCIpICsgXCJeLS0tLVwiO1xuXG4gIFx0XHR2YXIgZXJyb3IgPSBuZXcgUGFyc2VFcnJvcihcIlwiICsgbWVzc2FnZSArIFwiIGF0IGxpbmUgXCIgKyBsaW5lTnVtICsgXCIgY2hhcmFjdGVyIFwiICsgY29sdW1uTnVtICsgXCI6XFxuXCIgKyBhbm5vdGF0aW9uKTtcblxuICBcdFx0ZXJyb3IubGluZSA9IHBvc1swXTtcbiAgXHRcdGVycm9yLmNoYXJhY3RlciA9IHBvc1sxXTtcbiAgXHRcdGVycm9yLnNob3J0TWVzc2FnZSA9IG1lc3NhZ2U7XG5cbiAgXHRcdHRocm93IGVycm9yO1xuICBcdH0sXG5cbiAgXHRtYXRjaFN0cmluZzogZnVuY3Rpb24gKHN0cmluZykge1xuICBcdFx0aWYgKHRoaXMuc3RyLnN1YnN0cih0aGlzLnBvcywgc3RyaW5nLmxlbmd0aCkgPT09IHN0cmluZykge1xuICBcdFx0XHR0aGlzLnBvcyArPSBzdHJpbmcubGVuZ3RoO1xuICBcdFx0XHRyZXR1cm4gc3RyaW5nO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRtYXRjaFBhdHRlcm46IGZ1bmN0aW9uIChwYXR0ZXJuKSB7XG4gIFx0XHR2YXIgbWF0Y2g7XG5cbiAgXHRcdGlmIChtYXRjaCA9IHBhdHRlcm4uZXhlYyh0aGlzLnJlbWFpbmluZygpKSkge1xuICBcdFx0XHR0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7XG4gIFx0XHRcdHJldHVybiBtYXRjaFsxXSB8fCBtYXRjaFswXTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0YWxsb3dXaGl0ZXNwYWNlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLm1hdGNoUGF0dGVybihwYXJzZV9QYXJzZXJfX2xlYWRpbmdXaGl0ZXNwYWNlKTtcbiAgXHR9LFxuXG4gIFx0cmVtYWluaW5nOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5zdHIuc3Vic3RyaW5nKHRoaXMucG9zKTtcbiAgXHR9LFxuXG4gIFx0bmV4dENoYXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLnN0ci5jaGFyQXQodGhpcy5wb3MpO1xuICBcdH1cbiAgfTtcblxuICBQYXJzZXIuZXh0ZW5kID0gZnVuY3Rpb24gKHByb3RvKSB7XG4gIFx0dmFyIFBhcmVudCA9IHRoaXMsXG4gIFx0ICAgIENoaWxkLFxuICBcdCAgICBrZXk7XG5cbiAgXHRDaGlsZCA9IGZ1bmN0aW9uIChzdHIsIG9wdGlvbnMpIHtcbiAgXHRcdFBhcnNlci5jYWxsKHRoaXMsIHN0ciwgb3B0aW9ucyk7XG4gIFx0fTtcblxuICBcdENoaWxkLnByb3RvdHlwZSA9IGNyZWF0ZShQYXJlbnQucHJvdG90eXBlKTtcblxuICBcdGZvciAoa2V5IGluIHByb3RvKSB7XG4gIFx0XHRpZiAoaGFzT3duLmNhbGwocHJvdG8sIGtleSkpIHtcbiAgXHRcdFx0Q2hpbGQucHJvdG90eXBlW2tleV0gPSBwcm90b1trZXldO1xuICBcdFx0fVxuICBcdH1cblxuICBcdENoaWxkLmV4dGVuZCA9IFBhcnNlci5leHRlbmQ7XG4gIFx0cmV0dXJuIENoaWxkO1xuICB9O1xuXG4gIHZhciBwYXJzZV9QYXJzZXIgPSBQYXJzZXI7XG5cbiAgdmFyIFRFWFQgPSAxO1xuICB2YXIgSU5URVJQT0xBVE9SID0gMjtcbiAgdmFyIFRSSVBMRSA9IDM7XG4gIHZhciBTRUNUSU9OID0gNDtcbiAgdmFyIElOVkVSVEVEID0gNTtcbiAgdmFyIENMT1NJTkcgPSA2O1xuICB2YXIgRUxFTUVOVCA9IDc7XG4gIHZhciBQQVJUSUFMID0gODtcbiAgdmFyIENPTU1FTlQgPSA5O1xuICB2YXIgREVMSU1DSEFOR0UgPSAxMDtcbiAgdmFyIEFUVFJJQlVURSA9IDEzO1xuICB2YXIgQ0xPU0lOR19UQUcgPSAxNDtcbiAgdmFyIENPTVBPTkVOVCA9IDE1O1xuICB2YXIgWUlFTERFUiA9IDE2O1xuICB2YXIgSU5MSU5FX1BBUlRJQUwgPSAxNztcbiAgdmFyIERPQ1RZUEUgPSAxODtcblxuICB2YXIgTlVNQkVSX0xJVEVSQUwgPSAyMDtcbiAgdmFyIFNUUklOR19MSVRFUkFMID0gMjE7XG4gIHZhciBBUlJBWV9MSVRFUkFMID0gMjI7XG4gIHZhciBPQkpFQ1RfTElURVJBTCA9IDIzO1xuICB2YXIgQk9PTEVBTl9MSVRFUkFMID0gMjQ7XG4gIHZhciBSRUdFWFBfTElURVJBTCA9IDI1O1xuXG4gIHZhciBHTE9CQUwgPSAyNjtcbiAgdmFyIEtFWV9WQUxVRV9QQUlSID0gMjc7XG5cbiAgdmFyIFJFRkVSRU5DRSA9IDMwO1xuICB2YXIgUkVGSU5FTUVOVCA9IDMxO1xuICB2YXIgTUVNQkVSID0gMzI7XG4gIHZhciBQUkVGSVhfT1BFUkFUT1IgPSAzMztcbiAgdmFyIEJSQUNLRVRFRCA9IDM0O1xuICB2YXIgQ09ORElUSU9OQUwgPSAzNTtcbiAgdmFyIElORklYX09QRVJBVE9SID0gMzY7XG5cbiAgdmFyIElOVk9DQVRJT04gPSA0MDtcblxuICB2YXIgU0VDVElPTl9JRiA9IDUwO1xuICB2YXIgU0VDVElPTl9VTkxFU1MgPSA1MTtcbiAgdmFyIFNFQ1RJT05fRUFDSCA9IDUyO1xuICB2YXIgU0VDVElPTl9XSVRIID0gNTM7XG4gIHZhciBTRUNUSU9OX0lGX1dJVEggPSA1NDtcblxuICB2YXIgRUxTRSA9IDYwO1xuICB2YXIgRUxTRUlGID0gNjE7XG5cbiAgdmFyIG11c3RhY2hlX3JlYWREZWxpbWl0ZXJDaGFuZ2UgPSByZWFkRGVsaW1pdGVyQ2hhbmdlO1xuICB2YXIgZGVsaW1pdGVyQ2hhbmdlUGF0dGVybiA9IC9eW15cXHM9XSsvLFxuICAgICAgd2hpdGVzcGFjZVBhdHRlcm4gPSAvXlxccysvO1xuICBmdW5jdGlvbiByZWFkRGVsaW1pdGVyQ2hhbmdlKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgb3BlbmluZywgY2xvc2luZztcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiPVwiKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZSBiZWZvcmUgbmV3IG9wZW5pbmcgZGVsaW1pdGVyXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0b3BlbmluZyA9IHBhcnNlci5tYXRjaFBhdHRlcm4oZGVsaW1pdGVyQ2hhbmdlUGF0dGVybik7XG4gIFx0aWYgKCFvcGVuaW5nKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHQvLyBhbGxvdyB3aGl0ZXNwYWNlIChpbiBmYWN0LCBpdCdzIG5lY2Vzc2FyeS4uLilcbiAgXHRpZiAoIXBhcnNlci5tYXRjaFBhdHRlcm4od2hpdGVzcGFjZVBhdHRlcm4pKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRjbG9zaW5nID0gcGFyc2VyLm1hdGNoUGF0dGVybihkZWxpbWl0ZXJDaGFuZ2VQYXR0ZXJuKTtcbiAgXHRpZiAoIWNsb3NpbmcpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdC8vIGFsbG93IHdoaXRlc3BhY2UgYmVmb3JlIGNsb3NpbmcgJz0nXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCI9XCIpKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gW29wZW5pbmcsIGNsb3NpbmddO1xuICB9XG5cbiAgdmFyIHJlYWRSZWdleHBMaXRlcmFsID0gcmVhZFJlZ2V4cExpdGVyYWxfX3JlYWROdW1iZXJMaXRlcmFsO1xuICB2YXIgcmVnZXhwUGF0dGVybiA9IC9eKFxcLyg/OlteXFxuXFxyXFx1MjAyOFxcdTIwMjkvXFxcXFtdfFxcXFwufFxcWyg/OlteXFxuXFxyXFx1MjAyOFxcdTIwMjlcXF1cXFxcXXxcXFxcLikqXSkrXFwvKD86KFtnaW11eV0pKD8hW2Etel0qXFwyKSkqKD8hW2EtekEtWl8kMC05XSkpLztcbiAgZnVuY3Rpb24gcmVhZFJlZ2V4cExpdGVyYWxfX3JlYWROdW1iZXJMaXRlcmFsKHBhcnNlcikge1xuICBcdHZhciByZXN1bHQ7XG5cbiAgXHRpZiAocmVzdWx0ID0gcGFyc2VyLm1hdGNoUGF0dGVybihyZWdleHBQYXR0ZXJuKSkge1xuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0dDogUkVHRVhQX0xJVEVSQUwsXG4gIFx0XHRcdHY6IHJlc3VsdFxuICBcdFx0fTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBjb252ZXJ0ZXJzX3JlYWRNdXN0YWNoZSA9IHJlYWRNdXN0YWNoZTtcblxuICB2YXIgZGVsaW1pdGVyQ2hhbmdlVG9rZW4gPSB7IHQ6IERFTElNQ0hBTkdFLCBleGNsdWRlOiB0cnVlIH07XG4gIGZ1bmN0aW9uIHJlYWRNdXN0YWNoZShwYXJzZXIpIHtcbiAgXHR2YXIgbXVzdGFjaGUsIGk7XG5cbiAgXHQvLyBJZiB3ZSdyZSBpbnNpZGUgYSA8c2NyaXB0PiBvciA8c3R5bGU+IHRhZywgYW5kIHdlJ3JlIG5vdFxuICBcdC8vIGludGVycG9sYXRpbmcsIGJ1ZyBvdXRcbiAgXHRpZiAocGFyc2VyLmludGVycG9sYXRlW3BhcnNlci5pbnNpZGVdID09PSBmYWxzZSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0Zm9yIChpID0gMDsgaSA8IHBhcnNlci50YWdzLmxlbmd0aDsgaSArPSAxKSB7XG4gIFx0XHRpZiAobXVzdGFjaGUgPSByZWFkTXVzdGFjaGVPZlR5cGUocGFyc2VyLCBwYXJzZXIudGFnc1tpXSkpIHtcbiAgXHRcdFx0cmV0dXJuIG11c3RhY2hlO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRNdXN0YWNoZU9mVHlwZShwYXJzZXIsIHRhZykge1xuICBcdHZhciBzdGFydCwgbXVzdGFjaGUsIHJlYWRlciwgaTtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCJcXFxcXCIgKyB0YWcub3BlbikpIHtcbiAgXHRcdGlmIChzdGFydCA9PT0gMCB8fCBwYXJzZXIuc3RyW3N0YXJ0IC0gMV0gIT09IFwiXFxcXFwiKSB7XG4gIFx0XHRcdHJldHVybiB0YWcub3BlbjtcbiAgXHRcdH1cbiAgXHR9IGVsc2UgaWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLm9wZW4pKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHQvLyBkZWxpbWl0ZXIgY2hhbmdlP1xuICBcdGlmIChtdXN0YWNoZSA9IG11c3RhY2hlX3JlYWREZWxpbWl0ZXJDaGFuZ2UocGFyc2VyKSkge1xuICBcdFx0Ly8gZmluZCBjbG9zaW5nIGRlbGltaXRlciBvciBhYm9ydC4uLlxuICBcdFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLmNsb3NlKSkge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0Ly8gLi4udGhlbiBtYWtlIHRoZSBzd2l0Y2hcbiAgXHRcdHRhZy5vcGVuID0gbXVzdGFjaGVbMF07XG4gIFx0XHR0YWcuY2xvc2UgPSBtdXN0YWNoZVsxXTtcbiAgXHRcdHBhcnNlci5zb3J0TXVzdGFjaGVUYWdzKCk7XG5cbiAgXHRcdHJldHVybiBkZWxpbWl0ZXJDaGFuZ2VUb2tlbjtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHQvLyBpbGxlZ2FsIHNlY3Rpb24gY2xvc2VyXG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIi9cIikpIHtcbiAgXHRcdHBhcnNlci5wb3MgLT0gMTtcbiAgXHRcdHZhciByZXdpbmQgPSBwYXJzZXIucG9zO1xuICBcdFx0aWYgKCFyZWFkUmVnZXhwTGl0ZXJhbChwYXJzZXIpKSB7XG4gIFx0XHRcdHBhcnNlci5wb3MgPSByZXdpbmQgLSB0YWcuY2xvc2UubGVuZ3RoO1xuICBcdFx0XHRwYXJzZXIuZXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2xvc2UgYSBzZWN0aW9uIHRoYXQgd2Fzbid0IG9wZW5cIik7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRwYXJzZXIucG9zID0gcmV3aW5kO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGZvciAoaSA9IDA7IGkgPCB0YWcucmVhZGVycy5sZW5ndGg7IGkgKz0gMSkge1xuICBcdFx0cmVhZGVyID0gdGFnLnJlYWRlcnNbaV07XG5cbiAgXHRcdGlmIChtdXN0YWNoZSA9IHJlYWRlcihwYXJzZXIsIHRhZykpIHtcbiAgXHRcdFx0aWYgKHRhZy5pc1N0YXRpYykge1xuICBcdFx0XHRcdG11c3RhY2hlLnMgPSB0cnVlOyAvLyBUT0RPIG1ha2UgdGhpcyBgMWAgaW5zdGVhZCAtIG1vcmUgY29tcGFjdFxuICBcdFx0XHR9XG5cbiAgXHRcdFx0aWYgKHBhcnNlci5pbmNsdWRlTGluZVBvc2l0aW9ucykge1xuICBcdFx0XHRcdG11c3RhY2hlLnAgPSBwYXJzZXIuZ2V0TGluZVBvcyhzdGFydCk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRyZXR1cm4gbXVzdGFjaGU7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGV4cGVjdGVkRXhwcmVzc2lvbiA9IFwiRXhwZWN0ZWQgYSBKYXZhU2NyaXB0IGV4cHJlc3Npb25cIjtcbiAgdmFyIGV4cGVjdGVkUGFyZW4gPSBcIkV4cGVjdGVkIGNsb3NpbmcgcGFyZW5cIjtcblxuICB2YXIgbGl0ZXJhbF9yZWFkTnVtYmVyTGl0ZXJhbCA9IGxpdGVyYWxfcmVhZE51bWJlckxpdGVyYWxfX3JlYWROdW1iZXJMaXRlcmFsO1xuICB2YXIgbGl0ZXJhbF9yZWFkTnVtYmVyTGl0ZXJhbF9fbnVtYmVyUGF0dGVybiA9IC9eKD86WystXT8pMCooPzooPzooPzpbMS05XVxcZCopP1xcLlxcZCspfCg/Oig/OjB8WzEtOV1cXGQqKVxcLil8KD86MHxbMS05XVxcZCopKSg/OltlRV1bKy1dP1xcZCspPy87XG4gIGZ1bmN0aW9uIGxpdGVyYWxfcmVhZE51bWJlckxpdGVyYWxfX3JlYWROdW1iZXJMaXRlcmFsKHBhcnNlcikge1xuICBcdHZhciByZXN1bHQ7XG5cbiAgXHRpZiAocmVzdWx0ID0gcGFyc2VyLm1hdGNoUGF0dGVybihsaXRlcmFsX3JlYWROdW1iZXJMaXRlcmFsX19udW1iZXJQYXR0ZXJuKSkge1xuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0dDogTlVNQkVSX0xJVEVSQUwsXG4gIFx0XHRcdHY6IHJlc3VsdFxuICBcdFx0fTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBsaXRlcmFsX3JlYWRCb29sZWFuTGl0ZXJhbCA9IHJlYWRCb29sZWFuTGl0ZXJhbDtcbiAgZnVuY3Rpb24gcmVhZEJvb2xlYW5MaXRlcmFsKHBhcnNlcikge1xuICBcdHZhciByZW1haW5pbmcgPSBwYXJzZXIucmVtYWluaW5nKCk7XG5cbiAgXHRpZiAocmVtYWluaW5nLnN1YnN0cigwLCA0KSA9PT0gXCJ0cnVlXCIpIHtcbiAgXHRcdHBhcnNlci5wb3MgKz0gNDtcbiAgXHRcdHJldHVybiB7XG4gIFx0XHRcdHQ6IEJPT0xFQU5fTElURVJBTCxcbiAgXHRcdFx0djogXCJ0cnVlXCJcbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0aWYgKHJlbWFpbmluZy5zdWJzdHIoMCwgNSkgPT09IFwiZmFsc2VcIikge1xuICBcdFx0cGFyc2VyLnBvcyArPSA1O1xuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0dDogQk9PTEVBTl9MSVRFUkFMLFxuICBcdFx0XHR2OiBcImZhbHNlXCJcbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgc3RyaW5nTWlkZGxlUGF0dGVybiwgZXNjYXBlU2VxdWVuY2VQYXR0ZXJuLCBsaW5lQ29udGludWF0aW9uUGF0dGVybjtcblxuICAvLyBNYXRjaCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJzIHVudGlsOiBcIiwgJywgXFwsIG9yIEVPTC9FT0YuXG4gIC8vIEVPTC9FT0YgaXMgd3JpdHRlbiBhcyAoPyEuKSAobWVhbmluZyB0aGVyZSdzIG5vIG5vbi1uZXdsaW5lIGNoYXIgbmV4dCkuXG4gIHN0cmluZ01pZGRsZVBhdHRlcm4gPSAvXig/PS4pW15cIidcXFxcXSs/KD86KD8hLil8KD89W1wiJ1xcXFxdKSkvO1xuXG4gIC8vIE1hdGNoIG9uZSBlc2NhcGUgc2VxdWVuY2UsIGluY2x1ZGluZyB0aGUgYmFja3NsYXNoLlxuICBlc2NhcGVTZXF1ZW5jZVBhdHRlcm4gPSAvXlxcXFwoPzpbJ1wiXFxcXGJmbnJ0XXwwKD8hWzAtOV0pfHhbMC05YS1mQS1GXXsyfXx1WzAtOWEtZkEtRl17NH18KD89LilbXnV4MC05XSkvO1xuXG4gIC8vIE1hdGNoIG9uZSBFUzUgbGluZSBjb250aW51YXRpb24gKGJhY2tzbGFzaCArIGxpbmUgdGVybWluYXRvcikuXG4gIGxpbmVDb250aW51YXRpb25QYXR0ZXJuID0gL15cXFxcKD86XFxyXFxufFtcXHUwMDBBXFx1MDAwRFxcdTIwMjhcXHUyMDI5XSkvO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgZ2V0RG91YmxlUXVvdGVkU3RyaW5nIGFuZCBnZXRTaW5nbGVRdW90ZWRTdHJpbmcuXG4gIHZhciBtYWtlUXVvdGVkU3RyaW5nTWF0Y2hlciA9IGZ1bmN0aW9uIChva1F1b3RlKSB7XG4gIFx0cmV0dXJuIGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgXHRcdHZhciBzdGFydCwgbGl0ZXJhbCwgZG9uZSwgbmV4dDtcblxuICBcdFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuICBcdFx0bGl0ZXJhbCA9IFwiXFxcIlwiO1xuICBcdFx0ZG9uZSA9IGZhbHNlO1xuXG4gIFx0XHR3aGlsZSAoIWRvbmUpIHtcbiAgXHRcdFx0bmV4dCA9IHBhcnNlci5tYXRjaFBhdHRlcm4oc3RyaW5nTWlkZGxlUGF0dGVybikgfHwgcGFyc2VyLm1hdGNoUGF0dGVybihlc2NhcGVTZXF1ZW5jZVBhdHRlcm4pIHx8IHBhcnNlci5tYXRjaFN0cmluZyhva1F1b3RlKTtcbiAgXHRcdFx0aWYgKG5leHQpIHtcbiAgXHRcdFx0XHRpZiAobmV4dCA9PT0gXCJcXFwiXCIpIHtcbiAgXHRcdFx0XHRcdGxpdGVyYWwgKz0gXCJcXFxcXFxcIlwiO1xuICBcdFx0XHRcdH0gZWxzZSBpZiAobmV4dCA9PT0gXCJcXFxcJ1wiKSB7XG4gIFx0XHRcdFx0XHRsaXRlcmFsICs9IFwiJ1wiO1xuICBcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRsaXRlcmFsICs9IG5leHQ7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdG5leHQgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKGxpbmVDb250aW51YXRpb25QYXR0ZXJuKTtcbiAgXHRcdFx0XHRpZiAobmV4dCkge1xuICBcdFx0XHRcdFx0Ly8gY29udmVydCBcXChuZXdsaW5lLWxpa2UpIGludG8gYSBcXHUgZXNjYXBlLCB3aGljaCBpcyBhbGxvd2VkIGluIEpTT05cbiAgXHRcdFx0XHRcdGxpdGVyYWwgKz0gXCJcXFxcdVwiICsgKFwiMDAwXCIgKyBuZXh0LmNoYXJDb2RlQXQoMSkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gIFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdGRvbmUgPSB0cnVlO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRsaXRlcmFsICs9IFwiXFxcIlwiO1xuXG4gIFx0XHQvLyB1c2UgSlNPTi5wYXJzZSB0byBpbnRlcnByZXQgZXNjYXBlc1xuICBcdFx0cmV0dXJuIEpTT04ucGFyc2UobGl0ZXJhbCk7XG4gIFx0fTtcbiAgfTtcblxuICB2YXIgZ2V0U2luZ2xlUXVvdGVkU3RyaW5nID0gbWFrZVF1b3RlZFN0cmluZ01hdGNoZXIoXCJcXFwiXCIpO1xuICB2YXIgZ2V0RG91YmxlUXVvdGVkU3RyaW5nID0gbWFrZVF1b3RlZFN0cmluZ01hdGNoZXIoXCInXCIpO1xuXG4gIHZhciByZWFkU3RyaW5nTGl0ZXJhbCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgXHR2YXIgc3RhcnQsIHN0cmluZztcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCJcXFwiXCIpKSB7XG4gIFx0XHRzdHJpbmcgPSBnZXREb3VibGVRdW90ZWRTdHJpbmcocGFyc2VyKTtcblxuICBcdFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCJcXFwiXCIpKSB7XG4gIFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB7XG4gIFx0XHRcdHQ6IFNUUklOR19MSVRFUkFMLFxuICBcdFx0XHR2OiBzdHJpbmdcbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIidcIikpIHtcbiAgXHRcdHN0cmluZyA9IGdldFNpbmdsZVF1b3RlZFN0cmluZyhwYXJzZXIpO1xuXG4gIFx0XHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIidcIikpIHtcbiAgXHRcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHtcbiAgXHRcdFx0dDogU1RSSU5HX0xJVEVSQUwsXG4gIFx0XHRcdHY6IHN0cmluZ1xuICBcdFx0fTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfTtcblxuICB2YXIgcGF0dGVybnNfX25hbWUgPSAvXlthLXpBLVpfJF1bYS16QS1aXyQwLTldKi87XG5cbiAgLy8gaHR0cDovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1wcm9wZXJ0aWVzXG4gIC8vIGNhbiBiZSBhbnkgbmFtZSwgc3RyaW5nIGxpdGVyYWwsIG9yIG51bWJlciBsaXRlcmFsXG4gIHZhciBzaGFyZWRfcmVhZEtleSA9IHJlYWRLZXk7XG4gIHZhciBpZGVudGlmaWVyID0gL15bYS16QS1aXyRdW2EtekEtWl8kMC05XSokLztcbiAgZnVuY3Rpb24gcmVhZEtleShwYXJzZXIpIHtcbiAgXHR2YXIgdG9rZW47XG5cbiAgXHRpZiAodG9rZW4gPSByZWFkU3RyaW5nTGl0ZXJhbChwYXJzZXIpKSB7XG4gIFx0XHRyZXR1cm4gaWRlbnRpZmllci50ZXN0KHRva2VuLnYpID8gdG9rZW4udiA6IFwiXFxcIlwiICsgdG9rZW4udi5yZXBsYWNlKC9cIi9nLCBcIlxcXFxcXFwiXCIpICsgXCJcXFwiXCI7XG4gIFx0fVxuXG4gIFx0aWYgKHRva2VuID0gbGl0ZXJhbF9yZWFkTnVtYmVyTGl0ZXJhbChwYXJzZXIpKSB7XG4gIFx0XHRyZXR1cm4gdG9rZW4udjtcbiAgXHR9XG5cbiAgXHRpZiAodG9rZW4gPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKHBhdHRlcm5zX19uYW1lKSkge1xuICBcdFx0cmV0dXJuIHRva2VuO1xuICBcdH1cbiAgfVxuXG4gIHZhciBrZXlWYWx1ZVBhaXIgPSByZWFkS2V5VmFsdWVQYWlyO1xuICBmdW5jdGlvbiByZWFkS2V5VmFsdWVQYWlyKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwga2V5LCB2YWx1ZTtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdC8vIGFsbG93IHdoaXRlc3BhY2UgYmV0d2VlbiAneycgYW5kIGtleVxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGtleSA9IHNoYXJlZF9yZWFkS2V5KHBhcnNlcik7XG4gIFx0aWYgKGtleSA9PT0gbnVsbCkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZSBiZXR3ZWVuIGtleSBhbmQgJzonXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0Ly8gbmV4dCBjaGFyYWN0ZXIgbXVzdCBiZSAnOidcbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIjpcIikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdC8vIGFsbG93IHdoaXRlc3BhY2UgYmV0d2VlbiAnOicgYW5kIHZhbHVlXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0Ly8gbmV4dCBleHByZXNzaW9uIG11c3QgYmUgYSwgd2VsbC4uLiBleHByZXNzaW9uXG4gIFx0dmFsdWUgPSBjb252ZXJ0ZXJzX3JlYWRFeHByZXNzaW9uKHBhcnNlcik7XG4gIFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0dDogS0VZX1ZBTFVFX1BBSVIsXG4gIFx0XHRrOiBrZXksXG4gIFx0XHR2OiB2YWx1ZVxuICBcdH07XG4gIH1cblxuICB2YXIgb2JqZWN0TGl0ZXJhbF9rZXlWYWx1ZVBhaXJzID0gcmVhZEtleVZhbHVlUGFpcnM7XG4gIGZ1bmN0aW9uIHJlYWRLZXlWYWx1ZVBhaXJzKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgcGFpcnMsIHBhaXIsIGtleVZhbHVlUGFpcnM7XG5cbiAgXHRzdGFydCA9IHBhcnNlci5wb3M7XG5cbiAgXHRwYWlyID0ga2V5VmFsdWVQYWlyKHBhcnNlcik7XG4gIFx0aWYgKHBhaXIgPT09IG51bGwpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhaXJzID0gW3BhaXJdO1xuXG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIixcIikpIHtcbiAgXHRcdGtleVZhbHVlUGFpcnMgPSByZWFkS2V5VmFsdWVQYWlycyhwYXJzZXIpO1xuXG4gIFx0XHRpZiAoIWtleVZhbHVlUGFpcnMpIHtcbiAgXHRcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHBhaXJzLmNvbmNhdChrZXlWYWx1ZVBhaXJzKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcGFpcnM7XG4gIH1cblxuICB2YXIgcmVhZE9iamVjdExpdGVyYWwgPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIFx0dmFyIHN0YXJ0LCBrZXlWYWx1ZVBhaXJzO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZVxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwie1wiKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0a2V5VmFsdWVQYWlycyA9IG9iamVjdExpdGVyYWxfa2V5VmFsdWVQYWlycyhwYXJzZXIpO1xuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZSBiZXR3ZWVuIGZpbmFsIHZhbHVlIGFuZCAnfSdcbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIn1cIikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHJldHVybiB7XG4gIFx0XHR0OiBPQkpFQ1RfTElURVJBTCxcbiAgXHRcdG06IGtleVZhbHVlUGFpcnNcbiAgXHR9O1xuICB9O1xuXG4gIHZhciBzaGFyZWRfcmVhZEV4cHJlc3Npb25MaXN0ID0gcmVhZEV4cHJlc3Npb25MaXN0O1xuICBmdW5jdGlvbiByZWFkRXhwcmVzc2lvbkxpc3QocGFyc2VyKSB7XG4gIFx0dmFyIHN0YXJ0LCBleHByZXNzaW9ucywgZXhwciwgbmV4dDtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGV4cHIgPSBjb252ZXJ0ZXJzX3JlYWRFeHByZXNzaW9uKHBhcnNlcik7XG5cbiAgXHRpZiAoZXhwciA9PT0gbnVsbCkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0ZXhwcmVzc2lvbnMgPSBbZXhwcl07XG5cbiAgXHQvLyBhbGxvdyB3aGl0ZXNwYWNlIGJldHdlZW4gZXhwcmVzc2lvbiBhbmQgJywnXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIixcIikpIHtcbiAgXHRcdG5leHQgPSByZWFkRXhwcmVzc2lvbkxpc3QocGFyc2VyKTtcbiAgXHRcdGlmIChuZXh0ID09PSBudWxsKSB7XG4gIFx0XHRcdHBhcnNlci5lcnJvcihleHBlY3RlZEV4cHJlc3Npb24pO1xuICBcdFx0fVxuXG4gIFx0XHRuZXh0LmZvckVhY2goYXBwZW5kKTtcbiAgXHR9XG5cbiAgXHRmdW5jdGlvbiBhcHBlbmQoZXhwcmVzc2lvbikge1xuICBcdFx0ZXhwcmVzc2lvbnMucHVzaChleHByZXNzaW9uKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gZXhwcmVzc2lvbnM7XG4gIH1cblxuICB2YXIgcmVhZEFycmF5TGl0ZXJhbCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgXHR2YXIgc3RhcnQsIGV4cHJlc3Npb25MaXN0O1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZSBiZWZvcmUgJ1snXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCJbXCIpKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRleHByZXNzaW9uTGlzdCA9IHNoYXJlZF9yZWFkRXhwcmVzc2lvbkxpc3QocGFyc2VyKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiXVwiKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHQ6IEFSUkFZX0xJVEVSQUwsXG4gIFx0XHRtOiBleHByZXNzaW9uTGlzdFxuICBcdH07XG4gIH07XG5cbiAgdmFyIHByaW1hcnlfcmVhZExpdGVyYWwgPSByZWFkTGl0ZXJhbDtcbiAgZnVuY3Rpb24gcmVhZExpdGVyYWwocGFyc2VyKSB7XG4gIFx0cmV0dXJuIGxpdGVyYWxfcmVhZE51bWJlckxpdGVyYWwocGFyc2VyKSB8fCBsaXRlcmFsX3JlYWRCb29sZWFuTGl0ZXJhbChwYXJzZXIpIHx8IHJlYWRTdHJpbmdMaXRlcmFsKHBhcnNlcikgfHwgcmVhZE9iamVjdExpdGVyYWwocGFyc2VyKSB8fCByZWFkQXJyYXlMaXRlcmFsKHBhcnNlcikgfHwgcmVhZFJlZ2V4cExpdGVyYWwocGFyc2VyKTtcbiAgfVxuXG4gIHZhciBwcmltYXJ5X3JlYWRSZWZlcmVuY2UgPSByZWFkUmVmZXJlbmNlO1xuICB2YXIgcHJlZml4UGF0dGVybiA9IC9eKD86flxcL3woPzpcXC5cXC5cXC8pK3xcXC5cXC8oPzpcXC5cXC5cXC8pKnxcXC4pLyxcbiAgICAgIGdsb2JhbHMsXG4gICAgICBrZXl3b3JkcztcblxuICAvLyBpZiBhIHJlZmVyZW5jZSBpcyBhIGJyb3dzZXIgZ2xvYmFsLCB3ZSBkb24ndCBkZWZlcmVuY2UgaXQgbGF0ZXIsIHNvIGl0IG5lZWRzIHNwZWNpYWwgdHJlYXRtZW50XG4gIGdsb2JhbHMgPSAvXig/OkFycmF5fGNvbnNvbGV8RGF0ZXxSZWdFeHB8ZGVjb2RlVVJJQ29tcG9uZW50fGRlY29kZVVSSXxlbmNvZGVVUklDb21wb25lbnR8ZW5jb2RlVVJJfGlzRmluaXRlfGlzTmFOfHBhcnNlRmxvYXR8cGFyc2VJbnR8SlNPTnxNYXRofE5hTnx1bmRlZmluZWR8bnVsbClcXGIvO1xuXG4gIC8vIGtleXdvcmRzIGFyZSBub3QgdmFsaWQgcmVmZXJlbmNlcywgd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGB0aGlzYFxuICBrZXl3b3JkcyA9IC9eKD86YnJlYWt8Y2FzZXxjYXRjaHxjb250aW51ZXxkZWJ1Z2dlcnxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGZpbmFsbHl8Zm9yfGZ1bmN0aW9ufGlmfGlufGluc3RhbmNlb2Z8bmV3fHJldHVybnxzd2l0Y2h8dGhyb3d8dHJ5fHR5cGVvZnx2YXJ8dm9pZHx3aGlsZXx3aXRoKSQvO1xuXG4gIHZhciBsZWdhbFJlZmVyZW5jZSA9IC9eW2EtekEtWiRfMC05XSsoPzooPzpcXC5bYS16QS1aJF8wLTldKyl8KD86XFxbWzAtOV0rXFxdKSkqLztcbiAgdmFyIHJlbGF4ZWROYW1lID0gL15bYS16QS1aXyRdWy1hLXpBLVpfJDAtOV0qLztcbiAgZnVuY3Rpb24gcmVhZFJlZmVyZW5jZShwYXJzZXIpIHtcbiAgXHR2YXIgc3RhcnRQb3MsIHByZWZpeCwgbmFtZSwgZ2xvYmFsLCByZWZlcmVuY2UsIGxhc3REb3RJbmRleDtcblxuICBcdHN0YXJ0UG9zID0gcGFyc2VyLnBvcztcblxuICBcdG5hbWUgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKC9eQCg/OmtleXBhdGh8aW5kZXh8a2V5KS8pO1xuXG4gIFx0aWYgKCFuYW1lKSB7XG4gIFx0XHRwcmVmaXggPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKHByZWZpeFBhdHRlcm4pIHx8IFwiXCI7XG4gIFx0XHRuYW1lID0gIXByZWZpeCAmJiBwYXJzZXIucmVsYXhlZE5hbWVzICYmIHBhcnNlci5tYXRjaFBhdHRlcm4ocmVsYXhlZE5hbWUpIHx8IHBhcnNlci5tYXRjaFBhdHRlcm4obGVnYWxSZWZlcmVuY2UpO1xuXG4gIFx0XHRpZiAoIW5hbWUgJiYgcHJlZml4ID09PSBcIi5cIikge1xuICBcdFx0XHRwcmVmaXggPSBcIlwiO1xuICBcdFx0XHRuYW1lID0gXCIuXCI7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0aWYgKCFuYW1lKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHQvLyBidWcgb3V0IGlmIGl0J3MgYSBrZXl3b3JkIChleGNlcHRpb24gZm9yIGFuY2VzdG9yL3Jlc3RyaWN0ZWQgcmVmcyAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmFjdGl2ZWpzL3JhY3RpdmUvaXNzdWVzLzE0OTcpXG4gIFx0aWYgKCFwcmVmaXggJiYgIXBhcnNlci5yZWxheGVkTmFtZXMgJiYga2V5d29yZHMudGVzdChuYW1lKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0UG9zO1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0Ly8gaWYgdGhpcyBpcyBhIGJyb3dzZXIgZ2xvYmFsLCBzdG9wIGhlcmVcbiAgXHRpZiAoIXByZWZpeCAmJiBnbG9iYWxzLnRlc3QobmFtZSkpIHtcbiAgXHRcdGdsb2JhbCA9IGdsb2JhbHMuZXhlYyhuYW1lKVswXTtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydFBvcyArIGdsb2JhbC5sZW5ndGg7XG5cbiAgXHRcdHJldHVybiB7XG4gIFx0XHRcdHQ6IEdMT0JBTCxcbiAgXHRcdFx0djogZ2xvYmFsXG4gIFx0XHR9O1xuICBcdH1cblxuICBcdHJlZmVyZW5jZSA9IChwcmVmaXggfHwgXCJcIikgKyBub3JtYWxpc2UobmFtZSk7XG5cbiAgXHRpZiAocGFyc2VyLm1hdGNoU3RyaW5nKFwiKFwiKSkge1xuICBcdFx0Ly8gaWYgdGhpcyBpcyBhIG1ldGhvZCBpbnZvY2F0aW9uIChhcyBvcHBvc2VkIHRvIGEgZnVuY3Rpb24pIHdlIG5lZWRcbiAgXHRcdC8vIHRvIHN0cmlwIHRoZSBtZXRob2QgbmFtZSBmcm9tIHRoZSByZWZlcmVuY2UgY29tYm8sIGVsc2UgdGhlIGNvbnRleHRcbiAgXHRcdC8vIHdpbGwgYmUgd3JvbmdcbiAgXHRcdGxhc3REb3RJbmRleCA9IHJlZmVyZW5jZS5sYXN0SW5kZXhPZihcIi5cIik7XG4gIFx0XHRpZiAobGFzdERvdEluZGV4ICE9PSAtMSkge1xuICBcdFx0XHRyZWZlcmVuY2UgPSByZWZlcmVuY2Uuc3Vic3RyKDAsIGxhc3REb3RJbmRleCk7XG4gIFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydFBvcyArIHJlZmVyZW5jZS5sZW5ndGg7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRwYXJzZXIucG9zIC09IDE7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHQ6IFJFRkVSRU5DRSxcbiAgXHRcdG46IHJlZmVyZW5jZS5yZXBsYWNlKC9edGhpc1xcLi8sIFwiLi9cIikucmVwbGFjZSgvXnRoaXMkLywgXCIuXCIpXG4gIFx0fTtcbiAgfVxuXG4gIHZhciBwcmltYXJ5X3JlYWRCcmFja2V0ZWRFeHByZXNzaW9uID0gcmVhZEJyYWNrZXRlZEV4cHJlc3Npb247XG4gIGZ1bmN0aW9uIHJlYWRCcmFja2V0ZWRFeHByZXNzaW9uKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgZXhwcjtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiKFwiKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0ZXhwciA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcbiAgXHRpZiAoIWV4cHIpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihleHBlY3RlZEV4cHJlc3Npb24pO1xuICBcdH1cblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiKVwiKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKGV4cGVjdGVkUGFyZW4pO1xuICBcdH1cblxuICBcdHJldHVybiB7XG4gIFx0XHR0OiBCUkFDS0VURUQsXG4gIFx0XHR4OiBleHByXG4gIFx0fTtcbiAgfVxuXG4gIHZhciByZWFkUHJpbWFyeSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgXHRyZXR1cm4gcHJpbWFyeV9yZWFkTGl0ZXJhbChwYXJzZXIpIHx8IHByaW1hcnlfcmVhZFJlZmVyZW5jZShwYXJzZXIpIHx8IHByaW1hcnlfcmVhZEJyYWNrZXRlZEV4cHJlc3Npb24ocGFyc2VyKTtcbiAgfTtcblxuICB2YXIgc2hhcmVkX3JlYWRSZWZpbmVtZW50ID0gcmVhZFJlZmluZW1lbnQ7XG4gIGZ1bmN0aW9uIHJlYWRSZWZpbmVtZW50KHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgbmFtZSwgZXhwcjtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdC8vIFwiLlwiIG5hbWVcbiAgXHRpZiAocGFyc2VyLm1hdGNoU3RyaW5nKFwiLlwiKSkge1xuICBcdFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0XHRpZiAobmFtZSA9IHBhcnNlci5tYXRjaFBhdHRlcm4ocGF0dGVybnNfX25hbWUpKSB7XG4gIFx0XHRcdHJldHVybiB7XG4gIFx0XHRcdFx0dDogUkVGSU5FTUVOVCxcbiAgXHRcdFx0XHRuOiBuYW1lXG4gIFx0XHRcdH07XG4gIFx0XHR9XG5cbiAgXHRcdHBhcnNlci5lcnJvcihcIkV4cGVjdGVkIGEgcHJvcGVydHkgbmFtZVwiKTtcbiAgXHR9XG5cbiAgXHQvLyBcIltcIiBleHByZXNzaW9uIFwiXVwiXG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIltcIikpIHtcbiAgXHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0ZXhwciA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcbiAgXHRcdGlmICghZXhwcikge1xuICBcdFx0XHRwYXJzZXIuZXJyb3IoZXhwZWN0ZWRFeHByZXNzaW9uKTtcbiAgXHRcdH1cblxuICBcdFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0XHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIl1cIikpIHtcbiAgXHRcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgJ10nXCIpO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4ge1xuICBcdFx0XHR0OiBSRUZJTkVNRU5ULFxuICBcdFx0XHR4OiBleHByXG4gIFx0XHR9O1xuICBcdH1cblxuICBcdHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHJlYWRNZW1iZXJPckludm9jYXRpb24gPSBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIFx0dmFyIGN1cnJlbnQsIGV4cHJlc3Npb24sIHJlZmluZW1lbnQsIGV4cHJlc3Npb25MaXN0O1xuXG4gIFx0ZXhwcmVzc2lvbiA9IHJlYWRQcmltYXJ5KHBhcnNlcik7XG5cbiAgXHRpZiAoIWV4cHJlc3Npb24pIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHdoaWxlIChleHByZXNzaW9uKSB7XG4gIFx0XHRjdXJyZW50ID0gcGFyc2VyLnBvcztcblxuICBcdFx0aWYgKHJlZmluZW1lbnQgPSBzaGFyZWRfcmVhZFJlZmluZW1lbnQocGFyc2VyKSkge1xuICBcdFx0XHRleHByZXNzaW9uID0ge1xuICBcdFx0XHRcdHQ6IE1FTUJFUixcbiAgXHRcdFx0XHR4OiBleHByZXNzaW9uLFxuICBcdFx0XHRcdHI6IHJlZmluZW1lbnRcbiAgXHRcdFx0fTtcbiAgXHRcdH0gZWxzZSBpZiAocGFyc2VyLm1hdGNoU3RyaW5nKFwiKFwiKSkge1xuICBcdFx0XHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG4gIFx0XHRcdGV4cHJlc3Npb25MaXN0ID0gc2hhcmVkX3JlYWRFeHByZXNzaW9uTGlzdChwYXJzZXIpO1xuXG4gIFx0XHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0XHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIilcIikpIHtcbiAgXHRcdFx0XHRwYXJzZXIuZXJyb3IoZXhwZWN0ZWRQYXJlbik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRleHByZXNzaW9uID0ge1xuICBcdFx0XHRcdHQ6IElOVk9DQVRJT04sXG4gIFx0XHRcdFx0eDogZXhwcmVzc2lvblxuICBcdFx0XHR9O1xuXG4gIFx0XHRcdGlmIChleHByZXNzaW9uTGlzdCkge1xuICBcdFx0XHRcdGV4cHJlc3Npb24ubyA9IGV4cHJlc3Npb25MaXN0O1xuICBcdFx0XHR9XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRicmVhaztcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gZXhwcmVzc2lvbjtcbiAgfTtcblxuICB2YXIgcmVhZFR5cGVPZiwgbWFrZVByZWZpeFNlcXVlbmNlTWF0Y2hlcjtcblxuICBtYWtlUHJlZml4U2VxdWVuY2VNYXRjaGVyID0gZnVuY3Rpb24gKHN5bWJvbCwgZmFsbHRocm91Z2gpIHtcbiAgXHRyZXR1cm4gZnVuY3Rpb24gKHBhcnNlcikge1xuICBcdFx0dmFyIGV4cHJlc3Npb247XG5cbiAgXHRcdGlmIChleHByZXNzaW9uID0gZmFsbHRocm91Z2gocGFyc2VyKSkge1xuICBcdFx0XHRyZXR1cm4gZXhwcmVzc2lvbjtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoc3ltYm9sKSkge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0XHRleHByZXNzaW9uID0gY29udmVydGVyc19yZWFkRXhwcmVzc2lvbihwYXJzZXIpO1xuICBcdFx0aWYgKCFleHByZXNzaW9uKSB7XG4gIFx0XHRcdHBhcnNlci5lcnJvcihleHBlY3RlZEV4cHJlc3Npb24pO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4ge1xuICBcdFx0XHRzOiBzeW1ib2wsXG4gIFx0XHRcdG86IGV4cHJlc3Npb24sXG4gIFx0XHRcdHQ6IFBSRUZJWF9PUEVSQVRPUlxuICBcdFx0fTtcbiAgXHR9O1xuICB9O1xuXG4gIC8vIGNyZWF0ZSBhbGwgcHJlZml4IHNlcXVlbmNlIG1hdGNoZXJzLCByZXR1cm4gcmVhZFR5cGVPZlxuICAoZnVuY3Rpb24gKCkge1xuICBcdHZhciBpLCBsZW4sIG1hdGNoZXIsIHByZWZpeE9wZXJhdG9ycywgZmFsbHRocm91Z2g7XG5cbiAgXHRwcmVmaXhPcGVyYXRvcnMgPSBcIiEgfiArIC0gdHlwZW9mXCIuc3BsaXQoXCIgXCIpO1xuXG4gIFx0ZmFsbHRocm91Z2ggPSByZWFkTWVtYmVyT3JJbnZvY2F0aW9uO1xuICBcdGZvciAoaSA9IDAsIGxlbiA9IHByZWZpeE9wZXJhdG9ycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0bWF0Y2hlciA9IG1ha2VQcmVmaXhTZXF1ZW5jZU1hdGNoZXIocHJlZml4T3BlcmF0b3JzW2ldLCBmYWxsdGhyb3VnaCk7XG4gIFx0XHRmYWxsdGhyb3VnaCA9IG1hdGNoZXI7XG4gIFx0fVxuXG4gIFx0Ly8gdHlwZW9mIG9wZXJhdG9yIGlzIGhpZ2hlciBwcmVjZWRlbmNlIHRoYW4gbXVsdGlwbGljYXRpb24sIHNvIHByb3ZpZGVzIHRoZVxuICBcdC8vIGZhbGx0aHJvdWdoIGZvciB0aGUgbXVsdGlwbGljYXRpb24gc2VxdWVuY2UgbWF0Y2hlciB3ZSdyZSBhYm91dCB0byBjcmVhdGVcbiAgXHQvLyAod2UncmUgc2tpcHBpbmcgdm9pZCBhbmQgZGVsZXRlKVxuICBcdHJlYWRUeXBlT2YgPSBmYWxsdGhyb3VnaDtcbiAgfSkoKTtcblxuICB2YXIgcmVhZFR5cGVvZiA9IHJlYWRUeXBlT2Y7XG5cbiAgdmFyIHJlYWRMb2dpY2FsT3IsIG1ha2VJbmZpeFNlcXVlbmNlTWF0Y2hlcjtcblxuICBtYWtlSW5maXhTZXF1ZW5jZU1hdGNoZXIgPSBmdW5jdGlvbiAoc3ltYm9sLCBmYWxsdGhyb3VnaCkge1xuICBcdHJldHVybiBmdW5jdGlvbiAocGFyc2VyKSB7XG4gIFx0XHR2YXIgc3RhcnQsIGxlZnQsIHJpZ2h0O1xuXG4gIFx0XHRsZWZ0ID0gZmFsbHRocm91Z2gocGFyc2VyKTtcbiAgXHRcdGlmICghbGVmdCkge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0Ly8gTG9vcCB0byBoYW5kbGUgbGVmdC1yZWN1cnNpb24gaW4gYSBjYXNlIGxpa2UgYGEgKiBiICogY2AgYW5kIHByb2R1Y2VcbiAgXHRcdC8vIGxlZnQgYXNzb2NpYXRpb24sIGkuZS4gYChhICogYikgKiBjYC4gIFRoZSBtYXRjaGVyIGNhbid0IGNhbGwgaXRzZWxmXG4gIFx0XHQvLyB0byBwYXJzZSBgbGVmdGAgYmVjYXVzZSB0aGF0IHdvdWxkIGJlIGluZmluaXRlIHJlZ3Jlc3MuXG4gIFx0XHR3aGlsZSAodHJ1ZSkge1xuICBcdFx0XHRzdGFydCA9IHBhcnNlci5wb3M7XG5cbiAgXHRcdFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0XHRcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHN5bWJvbCkpIHtcbiAgXHRcdFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRcdFx0cmV0dXJuIGxlZnQ7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBzcGVjaWFsIGNhc2UgLSBpbiBvcGVyYXRvciBtdXN0IG5vdCBiZSBmb2xsb3dlZCBieSBbYS16QS1aXyQwLTldXG4gIFx0XHRcdGlmIChzeW1ib2wgPT09IFwiaW5cIiAmJiAvW2EtekEtWl8kMC05XS8udGVzdChwYXJzZXIucmVtYWluaW5nKCkuY2hhckF0KDApKSkge1xuICBcdFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdFx0XHRyZXR1cm4gbGVmdDtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0XHQvLyByaWdodCBvcGVyYW5kIG11c3QgYWxzbyBjb25zaXN0IG9mIG9ubHkgaGlnaGVyLXByZWNlZGVuY2Ugb3BlcmF0b3JzXG4gIFx0XHRcdHJpZ2h0ID0gZmFsbHRocm91Z2gocGFyc2VyKTtcbiAgXHRcdFx0aWYgKCFyaWdodCkge1xuICBcdFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdFx0XHRyZXR1cm4gbGVmdDtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGxlZnQgPSB7XG4gIFx0XHRcdFx0dDogSU5GSVhfT1BFUkFUT1IsXG4gIFx0XHRcdFx0czogc3ltYm9sLFxuICBcdFx0XHRcdG86IFtsZWZ0LCByaWdodF1cbiAgXHRcdFx0fTtcblxuICBcdFx0XHQvLyBMb29wIGJhY2sgYXJvdW5kLiAgSWYgd2UgZG9uJ3Qgc2VlIGFub3RoZXIgb2NjdXJyZW5jZSBvZiB0aGUgc3ltYm9sLFxuICBcdFx0XHQvLyB3ZSdsbCByZXR1cm4gbGVmdC5cbiAgXHRcdH1cbiAgXHR9O1xuICB9O1xuXG4gIC8vIGNyZWF0ZSBhbGwgaW5maXggc2VxdWVuY2UgbWF0Y2hlcnMsIGFuZCByZXR1cm4gcmVhZExvZ2ljYWxPclxuICAoZnVuY3Rpb24gKCkge1xuICBcdHZhciBpLCBsZW4sIG1hdGNoZXIsIGluZml4T3BlcmF0b3JzLCBmYWxsdGhyb3VnaDtcblxuICBcdC8vIEFsbCB0aGUgaW5maXggb3BlcmF0b3JzIG9uIG9yZGVyIG9mIHByZWNlZGVuY2UgKHNvdXJjZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvT3BlcmF0b3JfUHJlY2VkZW5jZSlcbiAgXHQvLyBFYWNoIHNlcXVlbmNlIG1hdGNoZXIgd2lsbCBpbml0aWFsbHkgZmFsbCB0aHJvdWdoIHRvIGl0cyBoaWdoZXIgcHJlY2VkZW5jZVxuICBcdC8vIG5laWdoYm91ciwgYW5kIG9ubHkgYXR0ZW1wdCB0byBtYXRjaCBpZiBvbmUgb2YgdGhlIGhpZ2hlciBwcmVjZWRlbmNlIG9wZXJhdG9yc1xuICBcdC8vIChvciwgdWx0aW1hdGVseSwgYSBsaXRlcmFsLCByZWZlcmVuY2UsIG9yIGJyYWNrZXRlZCBleHByZXNzaW9uKSBhbHJlYWR5IG1hdGNoZWRcbiAgXHRpbmZpeE9wZXJhdG9ycyA9IFwiKiAvICUgKyAtIDw8ID4+ID4+PiA8IDw9ID4gPj0gaW4gaW5zdGFuY2VvZiA9PSAhPSA9PT0gIT09ICYgXiB8ICYmIHx8XCIuc3BsaXQoXCIgXCIpO1xuXG4gIFx0Ly8gQSB0eXBlb2Ygb3BlcmF0b3IgaXMgaGlnaGVyIHByZWNlZGVuY2UgdGhhbiBtdWx0aXBsaWNhdGlvblxuICBcdGZhbGx0aHJvdWdoID0gcmVhZFR5cGVvZjtcbiAgXHRmb3IgKGkgPSAwLCBsZW4gPSBpbmZpeE9wZXJhdG9ycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0bWF0Y2hlciA9IG1ha2VJbmZpeFNlcXVlbmNlTWF0Y2hlcihpbmZpeE9wZXJhdG9yc1tpXSwgZmFsbHRocm91Z2gpO1xuICBcdFx0ZmFsbHRocm91Z2ggPSBtYXRjaGVyO1xuICBcdH1cblxuICBcdC8vIExvZ2ljYWwgT1IgaXMgdGhlIGZhbGx0aHJvdWdoIGZvciB0aGUgY29uZGl0aW9uYWwgbWF0Y2hlclxuICBcdHJlYWRMb2dpY2FsT3IgPSBmYWxsdGhyb3VnaDtcbiAgfSkoKTtcblxuICB2YXIgZXhwcmVzc2lvbnNfcmVhZExvZ2ljYWxPciA9IHJlYWRMb2dpY2FsT3I7XG5cbiAgLy8gVGhlIGNvbmRpdGlvbmFsIG9wZXJhdG9yIGlzIHRoZSBsb3dlc3QgcHJlY2VkZW5jZSBvcGVyYXRvciwgc28gd2Ugc3RhcnQgaGVyZVxuICB2YXIgcmVhZENvbmRpdGlvbmFsID0gZ2V0Q29uZGl0aW9uYWw7XG4gIGZ1bmN0aW9uIGdldENvbmRpdGlvbmFsKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgZXhwcmVzc2lvbiwgaWZUcnVlLCBpZkZhbHNlO1xuXG4gIFx0ZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25zX3JlYWRMb2dpY2FsT3IocGFyc2VyKTtcbiAgXHRpZiAoIWV4cHJlc3Npb24pIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiP1wiKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIGV4cHJlc3Npb247XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0aWZUcnVlID0gY29udmVydGVyc19yZWFkRXhwcmVzc2lvbihwYXJzZXIpO1xuICBcdGlmICghaWZUcnVlKSB7XG4gIFx0XHRwYXJzZXIuZXJyb3IoZXhwZWN0ZWRFeHByZXNzaW9uKTtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIjpcIikpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcIkV4cGVjdGVkIFxcXCI6XFxcIlwiKTtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRpZkZhbHNlID0gY29udmVydGVyc19yZWFkRXhwcmVzc2lvbihwYXJzZXIpO1xuICBcdGlmICghaWZGYWxzZSkge1xuICBcdFx0cGFyc2VyLmVycm9yKGV4cGVjdGVkRXhwcmVzc2lvbik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHQ6IENPTkRJVElPTkFMLFxuICBcdFx0bzogW2V4cHJlc3Npb24sIGlmVHJ1ZSwgaWZGYWxzZV1cbiAgXHR9O1xuICB9XG5cbiAgdmFyIGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24gPSByZWFkRXhwcmVzc2lvbjtcbiAgZnVuY3Rpb24gcmVhZEV4cHJlc3Npb24ocGFyc2VyKSB7XG4gIFx0Ly8gVGhlIGNvbmRpdGlvbmFsIG9wZXJhdG9yIGlzIHRoZSBsb3dlc3QgcHJlY2VkZW5jZSBvcGVyYXRvciAoZXhjZXB0IHlpZWxkLFxuICBcdC8vIGFzc2lnbm1lbnQgb3BlcmF0b3JzLCBhbmQgY29tbWFzLCBub25lIG9mIHdoaWNoIGFyZSBzdXBwb3J0ZWQpLCBzbyB3ZVxuICBcdC8vIHN0YXJ0IHRoZXJlLiBJZiBpdCBkb2Vzbid0IG1hdGNoLCBpdCAnZmFsbHMgdGhyb3VnaCcgdG8gcHJvZ3Jlc3NpdmVseVxuICBcdC8vIGhpZ2hlciBwcmVjZWRlbmNlIG9wZXJhdG9ycywgdW50aWwgaXQgZXZlbnR1YWxseSBtYXRjaGVzIChvciBmYWlscyB0b1xuICBcdC8vIG1hdGNoKSBhICdwcmltYXJ5JyAtIGEgbGl0ZXJhbCBvciBhIHJlZmVyZW5jZS4gVGhpcyB3YXksIHRoZSBhYnN0cmFjdCBzeW50YXhcbiAgXHQvLyB0cmVlIGhhcyBldmVyeXRoaW5nIGluIGl0cyBwcm9wZXIgcGxhY2UsIGkuZS4gMiArIDMgKiA0ID09PSAxNCwgbm90IDIwLlxuICBcdHJldHVybiByZWFkQ29uZGl0aW9uYWwocGFyc2VyKTtcbiAgfVxuXG4gIHZhciB1dGlsc19mbGF0dGVuRXhwcmVzc2lvbiA9IGZsYXR0ZW5FeHByZXNzaW9uO1xuXG4gIGZ1bmN0aW9uIGZsYXR0ZW5FeHByZXNzaW9uKGV4cHJlc3Npb24pIHtcbiAgXHR2YXIgcmVmcztcblxuICBcdGV4dHJhY3RSZWZzKGV4cHJlc3Npb24sIHJlZnMgPSBbXSk7XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0cjogcmVmcyxcbiAgXHRcdHM6IHN0cmluZ2lmeShleHByZXNzaW9uKVxuICBcdH07XG5cbiAgXHRmdW5jdGlvbiBzdHJpbmdpZnkobm9kZSkge1xuICBcdFx0c3dpdGNoIChub2RlLnQpIHtcbiAgXHRcdFx0Y2FzZSBCT09MRUFOX0xJVEVSQUw6XG4gIFx0XHRcdGNhc2UgR0xPQkFMOlxuICBcdFx0XHRjYXNlIE5VTUJFUl9MSVRFUkFMOlxuICBcdFx0XHRjYXNlIFJFR0VYUF9MSVRFUkFMOlxuICBcdFx0XHRcdHJldHVybiBub2RlLnY7XG5cbiAgXHRcdFx0Y2FzZSBTVFJJTkdfTElURVJBTDpcbiAgXHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoU3RyaW5nKG5vZGUudikpO1xuXG4gIFx0XHRcdGNhc2UgQVJSQVlfTElURVJBTDpcbiAgXHRcdFx0XHRyZXR1cm4gXCJbXCIgKyAobm9kZS5tID8gbm9kZS5tLm1hcChzdHJpbmdpZnkpLmpvaW4oXCIsXCIpIDogXCJcIikgKyBcIl1cIjtcblxuICBcdFx0XHRjYXNlIE9CSkVDVF9MSVRFUkFMOlxuICBcdFx0XHRcdHJldHVybiBcIntcIiArIChub2RlLm0gPyBub2RlLm0ubWFwKHN0cmluZ2lmeSkuam9pbihcIixcIikgOiBcIlwiKSArIFwifVwiO1xuXG4gIFx0XHRcdGNhc2UgS0VZX1ZBTFVFX1BBSVI6XG4gIFx0XHRcdFx0cmV0dXJuIG5vZGUuayArIFwiOlwiICsgc3RyaW5naWZ5KG5vZGUudik7XG5cbiAgXHRcdFx0Y2FzZSBQUkVGSVhfT1BFUkFUT1I6XG4gIFx0XHRcdFx0cmV0dXJuIChub2RlLnMgPT09IFwidHlwZW9mXCIgPyBcInR5cGVvZiBcIiA6IG5vZGUucykgKyBzdHJpbmdpZnkobm9kZS5vKTtcblxuICBcdFx0XHRjYXNlIElORklYX09QRVJBVE9SOlxuICBcdFx0XHRcdHJldHVybiBzdHJpbmdpZnkobm9kZS5vWzBdKSArIChub2RlLnMuc3Vic3RyKDAsIDIpID09PSBcImluXCIgPyBcIiBcIiArIG5vZGUucyArIFwiIFwiIDogbm9kZS5zKSArIHN0cmluZ2lmeShub2RlLm9bMV0pO1xuXG4gIFx0XHRcdGNhc2UgSU5WT0NBVElPTjpcbiAgXHRcdFx0XHRyZXR1cm4gc3RyaW5naWZ5KG5vZGUueCkgKyBcIihcIiArIChub2RlLm8gPyBub2RlLm8ubWFwKHN0cmluZ2lmeSkuam9pbihcIixcIikgOiBcIlwiKSArIFwiKVwiO1xuXG4gIFx0XHRcdGNhc2UgQlJBQ0tFVEVEOlxuICBcdFx0XHRcdHJldHVybiBcIihcIiArIHN0cmluZ2lmeShub2RlLngpICsgXCIpXCI7XG5cbiAgXHRcdFx0Y2FzZSBNRU1CRVI6XG4gIFx0XHRcdFx0cmV0dXJuIHN0cmluZ2lmeShub2RlLngpICsgc3RyaW5naWZ5KG5vZGUucik7XG5cbiAgXHRcdFx0Y2FzZSBSRUZJTkVNRU5UOlxuICBcdFx0XHRcdHJldHVybiBub2RlLm4gPyBcIi5cIiArIG5vZGUubiA6IFwiW1wiICsgc3RyaW5naWZ5KG5vZGUueCkgKyBcIl1cIjtcblxuICBcdFx0XHRjYXNlIENPTkRJVElPTkFMOlxuICBcdFx0XHRcdHJldHVybiBzdHJpbmdpZnkobm9kZS5vWzBdKSArIFwiP1wiICsgc3RyaW5naWZ5KG5vZGUub1sxXSkgKyBcIjpcIiArIHN0cmluZ2lmeShub2RlLm9bMl0pO1xuXG4gIFx0XHRcdGNhc2UgUkVGRVJFTkNFOlxuICBcdFx0XHRcdHJldHVybiBcIl9cIiArIHJlZnMuaW5kZXhPZihub2RlLm4pO1xuXG4gIFx0XHRcdGRlZmF1bHQ6XG4gIFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgbGVnYWwgSmF2YVNjcmlwdFwiKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICAvLyBUT0RPIG1heWJlIHJlZmFjdG9yIHRoaXM/XG4gIGZ1bmN0aW9uIGV4dHJhY3RSZWZzKG5vZGUsIHJlZnMpIHtcbiAgXHR2YXIgaSwgbGlzdDtcblxuICBcdGlmIChub2RlLnQgPT09IFJFRkVSRU5DRSkge1xuICBcdFx0aWYgKHJlZnMuaW5kZXhPZihub2RlLm4pID09PSAtMSkge1xuICBcdFx0XHRyZWZzLnVuc2hpZnQobm9kZS5uKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRsaXN0ID0gbm9kZS5vIHx8IG5vZGUubTtcbiAgXHRpZiAobGlzdCkge1xuICBcdFx0aWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gIFx0XHRcdGV4dHJhY3RSZWZzKGxpc3QsIHJlZnMpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0aSA9IGxpc3QubGVuZ3RoO1xuICBcdFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdFx0ZXh0cmFjdFJlZnMobGlzdFtpXSwgcmVmcyk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAobm9kZS54KSB7XG4gIFx0XHRleHRyYWN0UmVmcyhub2RlLngsIHJlZnMpO1xuICBcdH1cblxuICBcdGlmIChub2RlLnIpIHtcbiAgXHRcdGV4dHJhY3RSZWZzKG5vZGUuciwgcmVmcyk7XG4gIFx0fVxuXG4gIFx0aWYgKG5vZGUudikge1xuICBcdFx0ZXh0cmFjdFJlZnMobm9kZS52LCByZWZzKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgdXRpbHNfcmVmaW5lRXhwcmVzc2lvbiA9IHJlZmluZUV4cHJlc3Npb247XG5cbiAgdmFyIGFycmF5TWVtYmVyUGF0dGVybiA9IC9eWzAtOV1bMS05XSokLztcbiAgZnVuY3Rpb24gcmVmaW5lRXhwcmVzc2lvbihleHByZXNzaW9uLCBtdXN0YWNoZSkge1xuICBcdHZhciByZWZlcmVuY2VFeHByZXNzaW9uO1xuXG4gIFx0aWYgKGV4cHJlc3Npb24pIHtcbiAgXHRcdHdoaWxlIChleHByZXNzaW9uLnQgPT09IEJSQUNLRVRFRCAmJiBleHByZXNzaW9uLngpIHtcbiAgXHRcdFx0ZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24ueDtcbiAgXHRcdH1cblxuICBcdFx0Ly8gc3BlY2lhbCBjYXNlIC0gaW50ZWdlcnMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgYXJyYXkgbWVtYmVycyByZWZlcmVuY2VzLFxuICBcdFx0Ly8gcmF0aGVyIHRoYW4gYXMgZXhwcmVzc2lvbnMgaW4gdGhlaXIgb3duIHJpZ2h0XG4gIFx0XHRpZiAoZXhwcmVzc2lvbi50ID09PSBSRUZFUkVOQ0UpIHtcbiAgXHRcdFx0bXVzdGFjaGUuciA9IGV4cHJlc3Npb24ubjtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGlmIChleHByZXNzaW9uLnQgPT09IE5VTUJFUl9MSVRFUkFMICYmIGFycmF5TWVtYmVyUGF0dGVybi50ZXN0KGV4cHJlc3Npb24udikpIHtcbiAgXHRcdFx0XHRtdXN0YWNoZS5yID0gZXhwcmVzc2lvbi52O1xuICBcdFx0XHR9IGVsc2UgaWYgKHJlZmVyZW5jZUV4cHJlc3Npb24gPSBnZXRSZWZlcmVuY2VFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gIFx0XHRcdFx0bXVzdGFjaGUucnggPSByZWZlcmVuY2VFeHByZXNzaW9uO1xuICBcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdG11c3RhY2hlLnggPSB1dGlsc19mbGF0dGVuRXhwcmVzc2lvbihleHByZXNzaW9uKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gbXVzdGFjaGU7XG4gIFx0fVxuICB9XG5cbiAgLy8gVE9ETyByZWZhY3RvciB0aGlzISBpdCdzIGJld2lsZGVyaW5nXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZUV4cHJlc3Npb24oZXhwcmVzc2lvbikge1xuICBcdHZhciBtZW1iZXJzID0gW10sXG4gIFx0ICAgIHJlZmluZW1lbnQ7XG5cbiAgXHR3aGlsZSAoZXhwcmVzc2lvbi50ID09PSBNRU1CRVIgJiYgZXhwcmVzc2lvbi5yLnQgPT09IFJFRklORU1FTlQpIHtcbiAgXHRcdHJlZmluZW1lbnQgPSBleHByZXNzaW9uLnI7XG5cbiAgXHRcdGlmIChyZWZpbmVtZW50LngpIHtcbiAgXHRcdFx0aWYgKHJlZmluZW1lbnQueC50ID09PSBSRUZFUkVOQ0UpIHtcbiAgXHRcdFx0XHRtZW1iZXJzLnVuc2hpZnQocmVmaW5lbWVudC54KTtcbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRtZW1iZXJzLnVuc2hpZnQodXRpbHNfZmxhdHRlbkV4cHJlc3Npb24ocmVmaW5lbWVudC54KSk7XG4gIFx0XHRcdH1cbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdG1lbWJlcnMudW5zaGlmdChyZWZpbmVtZW50Lm4pO1xuICBcdFx0fVxuXG4gIFx0XHRleHByZXNzaW9uID0gZXhwcmVzc2lvbi54O1xuICBcdH1cblxuICBcdGlmIChleHByZXNzaW9uLnQgIT09IFJFRkVSRU5DRSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHI6IGV4cHJlc3Npb24ubixcbiAgXHRcdG06IG1lbWJlcnNcbiAgXHR9O1xuICB9XG5cbiAgdmFyIG11c3RhY2hlX3JlYWRUcmlwbGUgPSByZWFkVHJpcGxlO1xuICBmdW5jdGlvbiByZWFkVHJpcGxlKHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIGV4cHJlc3Npb24gPSBjb252ZXJ0ZXJzX3JlYWRFeHByZXNzaW9uKHBhcnNlciksXG4gIFx0ICAgIHRyaXBsZTtcblxuICBcdGlmICghZXhwcmVzc2lvbikge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLmNsb3NlKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgY2xvc2luZyBkZWxpbWl0ZXIgJ1wiICsgdGFnLmNsb3NlICsgXCInXCIpO1xuICBcdH1cblxuICBcdHRyaXBsZSA9IHsgdDogVFJJUExFIH07XG4gIFx0dXRpbHNfcmVmaW5lRXhwcmVzc2lvbihleHByZXNzaW9uLCB0cmlwbGUpOyAvLyBUT0RPIGhhbmRsZSB0aGlzIGRpZmZlcmVudGx5IC0gaXQncyBteXN0ZXJpb3VzXG5cbiAgXHRyZXR1cm4gdHJpcGxlO1xuICB9XG5cbiAgdmFyIG11c3RhY2hlX3JlYWRVbmVzY2FwZWQgPSByZWFkVW5lc2NhcGVkO1xuICBmdW5jdGlvbiByZWFkVW5lc2NhcGVkKHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIGV4cHJlc3Npb24sIHRyaXBsZTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiJlwiKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0ZXhwcmVzc2lvbiA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcblxuICBcdGlmICghZXhwcmVzc2lvbikge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLmNsb3NlKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgY2xvc2luZyBkZWxpbWl0ZXIgJ1wiICsgdGFnLmNsb3NlICsgXCInXCIpO1xuICBcdH1cblxuICBcdHRyaXBsZSA9IHsgdDogVFJJUExFIH07XG4gIFx0dXRpbHNfcmVmaW5lRXhwcmVzc2lvbihleHByZXNzaW9uLCB0cmlwbGUpOyAvLyBUT0RPIGhhbmRsZSB0aGlzIGRpZmZlcmVudGx5IC0gaXQncyBteXN0ZXJpb3VzXG5cbiAgXHRyZXR1cm4gdHJpcGxlO1xuICB9XG5cbiAgdmFyIG11c3RhY2hlX3JlYWRQYXJ0aWFsID0gcmVhZFBhcnRpYWw7XG4gIGZ1bmN0aW9uIHJlYWRQYXJ0aWFsKHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIHN0YXJ0LCBuYW1lU3RhcnQsIGV4cHJlc3Npb24sIGNvbnRleHQsIHBhcnRpYWw7XG5cbiAgXHRzdGFydCA9IHBhcnNlci5wb3M7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIj5cIikpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcbiAgXHRuYW1lU3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0Ly8gUGFydGlhbCBuYW1lcyBjYW4gaW5jbHVkZSBoeXBoZW5zLCBzbyB3ZSBjYW4ndCB1c2UgcmVhZEV4cHJlc3Npb25cbiAgXHQvLyBibGluZGx5LiBJbnN0ZWFkLCB3ZSB1c2UgdGhlIGByZWxheGVkTmFtZXNgIGZsYWcgdG8gaW5kaWNhdGUgdGhhdFxuICBcdC8vIGBmb28tYmFyYCBzaG91bGQgYmUgcmVhZCBhcyBhIHNpbmdsZSBuYW1lLCByYXRoZXIgdGhhbiAnc3VidHJhY3RcbiAgXHQvLyBiYXIgZnJvbSBmb28nXG4gIFx0cGFyc2VyLnJlbGF4ZWROYW1lcyA9IHRydWU7XG4gIFx0ZXhwcmVzc2lvbiA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcbiAgXHRwYXJzZXIucmVsYXhlZE5hbWVzID0gZmFsc2U7XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG4gIFx0Y29udGV4dCA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRpZiAoIWV4cHJlc3Npb24pIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhcnRpYWwgPSB7IHQ6IFBBUlRJQUwgfTtcbiAgXHR1dGlsc19yZWZpbmVFeHByZXNzaW9uKGV4cHJlc3Npb24sIHBhcnRpYWwpOyAvLyBUT0RPLi4uXG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHQvLyBpZiB3ZSBoYXZlIGFub3RoZXIgZXhwcmVzc2lvbiAtIGUuZy4gYHt7PmZvbyBiYXJ9fWAgLSB0aGVuXG4gIFx0Ly8gd2UgdHVybiBpdCBpbnRvIGB7eyN3aXRoIGJhcn19e3s+Zm9vfX17ey93aXRofX1gXG4gIFx0aWYgKGNvbnRleHQpIHtcbiAgXHRcdHBhcnRpYWwgPSB7XG4gIFx0XHRcdHQ6IFNFQ1RJT04sXG4gIFx0XHRcdG46IFNFQ1RJT05fV0lUSCxcbiAgXHRcdFx0ZjogW3BhcnRpYWxdXG4gIFx0XHR9O1xuXG4gIFx0XHR1dGlsc19yZWZpbmVFeHByZXNzaW9uKGNvbnRleHQsIHBhcnRpYWwpO1xuICBcdH1cblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHRhZy5jbG9zZSkpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcIkV4cGVjdGVkIGNsb3NpbmcgZGVsaW1pdGVyICdcIiArIHRhZy5jbG9zZSArIFwiJ1wiKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcGFydGlhbDtcbiAgfVxuXG4gIHZhciByZWFkTXVzdGFjaGVDb21tZW50ID0gcmVhZENvbW1lbnQ7XG4gIGZ1bmN0aW9uIHJlYWRDb21tZW50KHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIGluZGV4O1xuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCIhXCIpKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRpbmRleCA9IHBhcnNlci5yZW1haW5pbmcoKS5pbmRleE9mKHRhZy5jbG9zZSk7XG5cbiAgXHRpZiAoaW5kZXggIT09IC0xKSB7XG4gIFx0XHRwYXJzZXIucG9zICs9IGluZGV4ICsgdGFnLmNsb3NlLmxlbmd0aDtcbiAgXHRcdHJldHVybiB7IHQ6IENPTU1FTlQgfTtcbiAgXHR9XG4gIH1cblxuICB2YXIgY29udmVydGVyc19yZWFkRXhwcmVzc2lvbk9yUmVmZXJlbmNlID0gcmVhZEV4cHJlc3Npb25PclJlZmVyZW5jZTtcbiAgZnVuY3Rpb24gcmVhZEV4cHJlc3Npb25PclJlZmVyZW5jZShwYXJzZXIsIGV4cGVjdGVkRm9sbG93ZXJzKSB7XG4gIFx0dmFyIHN0YXJ0LCBleHByZXNzaW9uLCBpO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuICBcdGV4cHJlc3Npb24gPSBjb252ZXJ0ZXJzX3JlYWRFeHByZXNzaW9uKHBhcnNlcik7XG5cbiAgXHRpZiAoIWV4cHJlc3Npb24pIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZEZvbGxvd2Vycy5sZW5ndGg7IGkgKz0gMSkge1xuICBcdFx0aWYgKHBhcnNlci5yZW1haW5pbmcoKS5zdWJzdHIoMCwgZXhwZWN0ZWRGb2xsb3dlcnNbaV0ubGVuZ3RoKSA9PT0gZXhwZWN0ZWRGb2xsb3dlcnNbaV0pIHtcbiAgXHRcdFx0cmV0dXJuIGV4cHJlc3Npb247XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdHJldHVybiBwcmltYXJ5X3JlYWRSZWZlcmVuY2UocGFyc2VyKTtcbiAgfVxuXG4gIHZhciBtdXN0YWNoZV9yZWFkSW50ZXJwb2xhdG9yID0gcmVhZEludGVycG9sYXRvcjtcbiAgZnVuY3Rpb24gcmVhZEludGVycG9sYXRvcihwYXJzZXIsIHRhZykge1xuICBcdHZhciBzdGFydCwgZXhwcmVzc2lvbiwgaW50ZXJwb2xhdG9yLCBlcnI7XG5cbiAgXHRzdGFydCA9IHBhcnNlci5wb3M7XG5cbiAgXHQvLyBUT0RPIHdvdWxkIGJlIGdvb2QgZm9yIHBlcmYgaWYgd2UgY291bGQgZG8gYXdheSB3aXRoIHRoZSB0cnktY2F0Y2hcbiAgXHR0cnkge1xuICBcdFx0ZXhwcmVzc2lvbiA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb25PclJlZmVyZW5jZShwYXJzZXIsIFt0YWcuY2xvc2VdKTtcbiAgXHR9IGNhdGNoIChlKSB7XG4gIFx0XHRlcnIgPSBlO1xuICBcdH1cblxuICBcdGlmICghZXhwcmVzc2lvbikge1xuICBcdFx0aWYgKHBhcnNlci5zdHIuY2hhckF0KHN0YXJ0KSA9PT0gXCIhXCIpIHtcbiAgXHRcdFx0Ly8gc3BlY2lhbCBjYXNlIC0gY29tbWVudFxuICBcdFx0XHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0XHRcdHJldHVybiBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoZXJyKSB7XG4gIFx0XHRcdHRocm93IGVycjtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyh0YWcuY2xvc2UpKSB7XG4gIFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBjbG9zaW5nIGRlbGltaXRlciAnXCIgKyB0YWcuY2xvc2UgKyBcIicgYWZ0ZXIgcmVmZXJlbmNlXCIpO1xuXG4gIFx0XHRpZiAoIWV4cHJlc3Npb24pIHtcbiAgXHRcdFx0Ly8gc3BlY2lhbCBjYXNlIC0gY29tbWVudFxuICBcdFx0XHRpZiAocGFyc2VyLm5leHRDaGFyKCkgPT09IFwiIVwiKSB7XG4gIFx0XHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBleHByZXNzaW9uIG9yIGxlZ2FsIHJlZmVyZW5jZVwiKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpbnRlcnBvbGF0b3IgPSB7IHQ6IElOVEVSUE9MQVRPUiB9O1xuICBcdHV0aWxzX3JlZmluZUV4cHJlc3Npb24oZXhwcmVzc2lvbiwgaW50ZXJwb2xhdG9yKTsgLy8gVE9ETyBoYW5kbGUgdGhpcyBkaWZmZXJlbnRseSAtIGl0J3MgbXlzdGVyaW91c1xuXG4gIFx0cmV0dXJuIGludGVycG9sYXRvcjtcbiAgfVxuXG4gIHZhciBtdXN0YWNoZV9yZWFkWWllbGRlciA9IHJlYWRZaWVsZGVyO1xuICB2YXIgeWllbGRQYXR0ZXJuID0gL155aWVsZFxccyovO1xuICBmdW5jdGlvbiByZWFkWWllbGRlcihwYXJzZXIsIHRhZykge1xuICBcdHZhciBzdGFydCwgbmFtZSwgeWllbGRlcjtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoUGF0dGVybih5aWVsZFBhdHRlcm4pKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRzdGFydCA9IHBhcnNlci5wb3M7XG4gIFx0bmFtZSA9IHBhcnNlci5tYXRjaFBhdHRlcm4oL15bYS16QS1aXyRdW2EtekEtWl8kMC05XFwtXSovKTtcblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHRhZy5jbG9zZSkpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcImV4cGVjdGVkIGxlZ2FsIHBhcnRpYWwgbmFtZVwiKTtcbiAgXHR9XG5cbiAgXHR5aWVsZGVyID0geyB0OiBZSUVMREVSIH07XG5cbiAgXHRpZiAobmFtZSkge1xuICBcdFx0eWllbGRlci5uID0gbmFtZTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4geWllbGRlcjtcbiAgfVxuXG4gIHZhciBzZWN0aW9uX3JlYWRDbG9zaW5nID0gcmVhZENsb3Npbmc7XG4gIGZ1bmN0aW9uIHJlYWRDbG9zaW5nKHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIHN0YXJ0LCByZW1haW5pbmcsIGluZGV4LCBjbG9zaW5nO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLm9wZW4pKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIi9cIikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdHJlbWFpbmluZyA9IHBhcnNlci5yZW1haW5pbmcoKTtcbiAgXHRpbmRleCA9IHJlbWFpbmluZy5pbmRleE9mKHRhZy5jbG9zZSk7XG5cbiAgXHRpZiAoaW5kZXggIT09IC0xKSB7XG4gIFx0XHRjbG9zaW5nID0ge1xuICBcdFx0XHR0OiBDTE9TSU5HLFxuICBcdFx0XHRyOiByZW1haW5pbmcuc3Vic3RyKDAsIGluZGV4KS5zcGxpdChcIiBcIilbMF1cbiAgXHRcdH07XG5cbiAgXHRcdHBhcnNlci5wb3MgKz0gaW5kZXg7XG5cbiAgXHRcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHRhZy5jbG9zZSkpIHtcbiAgXHRcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgY2xvc2luZyBkZWxpbWl0ZXIgJ1wiICsgdGFnLmNsb3NlICsgXCInXCIpO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gY2xvc2luZztcbiAgXHR9XG5cbiAgXHRwYXJzZXIucG9zID0gc3RhcnQ7XG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgc2VjdGlvbl9yZWFkRWxzZSA9IHNlY3Rpb25fcmVhZEVsc2VfX3JlYWRFbHNlO1xuICB2YXIgc2VjdGlvbl9yZWFkRWxzZV9fZWxzZVBhdHRlcm4gPSAvXlxccyplbHNlXFxzKi87XG4gIGZ1bmN0aW9uIHNlY3Rpb25fcmVhZEVsc2VfX3JlYWRFbHNlKHBhcnNlciwgdGFnKSB7XG4gIFx0dmFyIHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHRhZy5vcGVuKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hQYXR0ZXJuKHNlY3Rpb25fcmVhZEVsc2VfX2Vsc2VQYXR0ZXJuKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcodGFnLmNsb3NlKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgY2xvc2luZyBkZWxpbWl0ZXIgJ1wiICsgdGFnLmNsb3NlICsgXCInXCIpO1xuICBcdH1cblxuICBcdHJldHVybiB7XG4gIFx0XHR0OiBFTFNFXG4gIFx0fTtcbiAgfVxuXG4gIHZhciByZWFkRWxzZUlmID0gcmVhZEVsc2VJZl9fcmVhZEVsc2U7XG4gIHZhciByZWFkRWxzZUlmX19lbHNlUGF0dGVybiA9IC9eXFxzKmVsc2VpZlxccysvO1xuICBmdW5jdGlvbiByZWFkRWxzZUlmX19yZWFkRWxzZShwYXJzZXIsIHRhZykge1xuICBcdHZhciBzdGFydCA9IHBhcnNlci5wb3MsXG4gIFx0ICAgIGV4cHJlc3Npb247XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyh0YWcub3BlbikpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGlmICghcGFyc2VyLm1hdGNoUGF0dGVybihyZWFkRWxzZUlmX19lbHNlUGF0dGVybikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGV4cHJlc3Npb24gPSBjb252ZXJ0ZXJzX3JlYWRFeHByZXNzaW9uKHBhcnNlcik7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyh0YWcuY2xvc2UpKSB7XG4gIFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBjbG9zaW5nIGRlbGltaXRlciAnXCIgKyB0YWcuY2xvc2UgKyBcIidcIik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHtcbiAgXHRcdHQ6IEVMU0VJRixcbiAgXHRcdHg6IGV4cHJlc3Npb25cbiAgXHR9O1xuICB9XG5cbiAgdmFyIGhhbmRsZWJhcnNCbG9ja0NvZGVzID0ge1xuICBcdGVhY2g6IFNFQ1RJT05fRUFDSCxcbiAgXHRcImlmXCI6IFNFQ1RJT05fSUYsXG4gIFx0XCJpZi13aXRoXCI6IFNFQ1RJT05fSUZfV0lUSCxcbiAgXHRcIndpdGhcIjogU0VDVElPTl9XSVRILFxuICBcdHVubGVzczogU0VDVElPTl9VTkxFU1NcbiAgfTtcblxuICB2YXIgbXVzdGFjaGVfcmVhZFNlY3Rpb24gPSByZWFkU2VjdGlvbjtcblxuICB2YXIgaW5kZXhSZWZQYXR0ZXJuID0gL15cXHMqOlxccyooW2EtekEtWl8kXVthLXpBLVpfJDAtOV0qKS8sXG4gICAgICBrZXlJbmRleFJlZlBhdHRlcm4gPSAvXlxccyosXFxzKihbYS16QS1aXyRdW2EtekEtWl8kMC05XSopLyxcbiAgICAgIGhhbmRsZWJhcnNCbG9ja1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXihcIiArIE9iamVjdC5rZXlzKGhhbmRsZWJhcnNCbG9ja0NvZGVzKS5qb2luKFwifFwiKSArIFwiKVxcXFxiXCIpO1xuICBmdW5jdGlvbiByZWFkU2VjdGlvbihwYXJzZXIsIHRhZykge1xuICBcdHZhciBzdGFydCwgZXhwcmVzc2lvbiwgc2VjdGlvbiwgY2hpbGQsIGNoaWxkcmVuLCBoYXNFbHNlLCBibG9jaywgdW5sZXNzQmxvY2ssIGNvbmRpdGlvbnMsIGNsb3NlZCwgaSwgZXhwZWN0ZWRDbG9zZTtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCJeXCIpKSB7XG4gIFx0XHRzZWN0aW9uID0geyB0OiBTRUNUSU9OLCBmOiBbXSwgbjogU0VDVElPTl9VTkxFU1MgfTtcbiAgXHR9IGVsc2UgaWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIiNcIikpIHtcbiAgXHRcdHNlY3Rpb24gPSB7IHQ6IFNFQ1RJT04sIGY6IFtdIH07XG5cbiAgXHRcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCJwYXJ0aWFsXCIpKSB7XG4gIFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydCAtIHBhcnNlci5zdGFuZGFyZERlbGltaXRlcnNbMF0ubGVuZ3RoO1xuICBcdFx0XHRwYXJzZXIuZXJyb3IoXCJQYXJ0aWFsIGRlZmluaXRpb25zIGNhbiBvbmx5IGJlIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHRlbXBsYXRlLCBvciBpbW1lZGlhdGVseSBpbnNpZGUgY29tcG9uZW50c1wiKTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKGJsb2NrID0gcGFyc2VyLm1hdGNoUGF0dGVybihoYW5kbGViYXJzQmxvY2tQYXR0ZXJuKSkge1xuICBcdFx0XHRleHBlY3RlZENsb3NlID0gYmxvY2s7XG4gIFx0XHRcdHNlY3Rpb24ubiA9IGhhbmRsZWJhcnNCbG9ja0NvZGVzW2Jsb2NrXTtcbiAgXHRcdH1cbiAgXHR9IGVsc2Uge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0ZXhwcmVzc2lvbiA9IGNvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb24ocGFyc2VyKTtcblxuICBcdGlmICghZXhwcmVzc2lvbikge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgZXhwcmVzc2lvblwiKTtcbiAgXHR9XG5cbiAgXHQvLyBvcHRpb25hbCBpbmRleCBhbmQga2V5IHJlZmVyZW5jZXNcbiAgXHRpZiAoaSA9IHBhcnNlci5tYXRjaFBhdHRlcm4oaW5kZXhSZWZQYXR0ZXJuKSkge1xuICBcdFx0dmFyIGV4dHJhID0gdW5kZWZpbmVkO1xuXG4gIFx0XHRpZiAoZXh0cmEgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKGtleUluZGV4UmVmUGF0dGVybikpIHtcbiAgXHRcdFx0c2VjdGlvbi5pID0gaSArIFwiLFwiICsgZXh0cmE7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRzZWN0aW9uLmkgPSBpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHRhZy5jbG9zZSkpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcIkV4cGVjdGVkIGNsb3NpbmcgZGVsaW1pdGVyICdcIiArIHRhZy5jbG9zZSArIFwiJ1wiKTtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuc2VjdGlvbkRlcHRoICs9IDE7XG4gIFx0Y2hpbGRyZW4gPSBzZWN0aW9uLmY7XG5cbiAgXHRjb25kaXRpb25zID0gW107XG5cbiAgXHRkbyB7XG4gIFx0XHRpZiAoY2hpbGQgPSBzZWN0aW9uX3JlYWRDbG9zaW5nKHBhcnNlciwgdGFnKSkge1xuICBcdFx0XHRpZiAoZXhwZWN0ZWRDbG9zZSAmJiBjaGlsZC5yICE9PSBleHBlY3RlZENsb3NlKSB7XG4gIFx0XHRcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgXCIgKyB0YWcub3BlbiArIFwiL1wiICsgZXhwZWN0ZWRDbG9zZSArIFwiXCIgKyB0YWcuY2xvc2UpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0cGFyc2VyLnNlY3Rpb25EZXB0aCAtPSAxO1xuICBcdFx0XHRjbG9zZWQgPSB0cnVlO1xuICBcdFx0fSBlbHNlIGlmIChjaGlsZCA9IHJlYWRFbHNlSWYocGFyc2VyLCB0YWcpKSB7XG4gIFx0XHRcdGlmIChzZWN0aW9uLm4gPT09IFNFQ1RJT05fVU5MRVNTKSB7XG4gIFx0XHRcdFx0cGFyc2VyLmVycm9yKFwie3tlbHNlfX0gbm90IGFsbG93ZWQgaW4ge3sjdW5sZXNzfX1cIik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoaGFzRWxzZSkge1xuICBcdFx0XHRcdHBhcnNlci5lcnJvcihcImlsbGVnYWwge3tlbHNlaWYuLi59fSBhZnRlciB7e2Vsc2V9fVwiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmICghdW5sZXNzQmxvY2spIHtcbiAgXHRcdFx0XHR1bmxlc3NCbG9jayA9IGNyZWF0ZVVubGVzc0Jsb2NrKGV4cHJlc3Npb24sIHNlY3Rpb24ubik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHR1bmxlc3NCbG9jay5mLnB1c2goe1xuICBcdFx0XHRcdHQ6IFNFQ1RJT04sXG4gIFx0XHRcdFx0bjogU0VDVElPTl9JRixcbiAgXHRcdFx0XHR4OiB1dGlsc19mbGF0dGVuRXhwcmVzc2lvbihtdXN0YWNoZV9yZWFkU2VjdGlvbl9fY29tYmluZShjb25kaXRpb25zLmNvbmNhdChjaGlsZC54KSkpLFxuICBcdFx0XHRcdGY6IGNoaWxkcmVuID0gW11cbiAgXHRcdFx0fSk7XG5cbiAgXHRcdFx0Y29uZGl0aW9ucy5wdXNoKGludmVydChjaGlsZC54KSk7XG4gIFx0XHR9IGVsc2UgaWYgKGNoaWxkID0gc2VjdGlvbl9yZWFkRWxzZShwYXJzZXIsIHRhZykpIHtcbiAgXHRcdFx0aWYgKHNlY3Rpb24ubiA9PT0gU0VDVElPTl9VTkxFU1MpIHtcbiAgXHRcdFx0XHRwYXJzZXIuZXJyb3IoXCJ7e2Vsc2V9fSBub3QgYWxsb3dlZCBpbiB7eyN1bmxlc3N9fVwiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmIChoYXNFbHNlKSB7XG4gIFx0XHRcdFx0cGFyc2VyLmVycm9yKFwidGhlcmUgY2FuIG9ubHkgYmUgb25lIHt7ZWxzZX19IGJsb2NrLCBhdCB0aGUgZW5kIG9mIGEgc2VjdGlvblwiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGhhc0Vsc2UgPSB0cnVlO1xuXG4gIFx0XHRcdC8vIHVzZSBhbiB1bmxlc3MgYmxvY2sgaWYgdGhlcmUncyBubyBlbHNlaWZcbiAgXHRcdFx0aWYgKCF1bmxlc3NCbG9jaykge1xuICBcdFx0XHRcdHVubGVzc0Jsb2NrID0gY3JlYXRlVW5sZXNzQmxvY2soZXhwcmVzc2lvbiwgc2VjdGlvbi5uKTtcbiAgXHRcdFx0XHRjaGlsZHJlbiA9IHVubGVzc0Jsb2NrLmY7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0dW5sZXNzQmxvY2suZi5wdXNoKHtcbiAgXHRcdFx0XHRcdHQ6IFNFQ1RJT04sXG4gIFx0XHRcdFx0XHRuOiBTRUNUSU9OX0lGLFxuICBcdFx0XHRcdFx0eDogdXRpbHNfZmxhdHRlbkV4cHJlc3Npb24obXVzdGFjaGVfcmVhZFNlY3Rpb25fX2NvbWJpbmUoY29uZGl0aW9ucykpLFxuICBcdFx0XHRcdFx0ZjogY2hpbGRyZW4gPSBbXVxuICBcdFx0XHRcdH0pO1xuICBcdFx0XHR9XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRjaGlsZCA9IHBhcnNlci5yZWFkKFJFQURFUlMpO1xuXG4gIFx0XHRcdGlmICghY2hpbGQpIHtcbiAgXHRcdFx0XHRicmVhaztcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICBcdFx0fVxuICBcdH0gd2hpbGUgKCFjbG9zZWQpO1xuXG4gIFx0aWYgKHVubGVzc0Jsb2NrKSB7XG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSBgd2l0aGAgc2hvdWxkIGJlY29tZSBgaWYtd2l0aGAgKFRPRE8gaXMgdGhpcyByaWdodD9cbiAgXHRcdC8vIHNlZW1zIHRvIG1lIHRoYXQgYHdpdGhgIG91Z2h0IHRvIGJlaGF2ZSBjb25zaXN0ZW50bHksIHJlZ2FyZGxlc3NcbiAgXHRcdC8vIG9mIHRoZSBwcmVzZW5jZS9hYnNlbmNlIG9mIGBlbHNlYC4gSW4gb3RoZXIgd29yZHMgc2hvdWxkIGFsd2F5c1xuICBcdFx0Ly8gYmUgYGlmLXdpdGhgXG4gIFx0XHRpZiAoc2VjdGlvbi5uID09PSBTRUNUSU9OX1dJVEgpIHtcbiAgXHRcdFx0c2VjdGlvbi5uID0gU0VDVElPTl9JRl9XSVRIO1xuICBcdFx0fVxuXG4gIFx0XHRzZWN0aW9uLmwgPSB1bmxlc3NCbG9jaztcbiAgXHR9XG5cbiAgXHR1dGlsc19yZWZpbmVFeHByZXNzaW9uKGV4cHJlc3Npb24sIHNlY3Rpb24pO1xuXG4gIFx0Ly8gVE9ETyBpZiBhIHNlY3Rpb24gaXMgZW1wdHkgaXQgc2hvdWxkIGJlIGRpc2NhcmRlZC4gRG9uJ3QgZG9cbiAgXHQvLyB0aGF0IGhlcmUgdGhvdWdoIC0gd2UgbmVlZCB0byBjbGVhbiBldmVyeXRoaW5nIHVwIGZpcnN0LCBhc1xuICBcdC8vIGl0IG1heSBjb250YWluIHJlbW92ZWFibGUgd2hpdGVzcGFjZS4gQXMgYSB0ZW1wb3JhcnkgbWVhc3VyZSxcbiAgXHQvLyB0byBwYXNzIHRoZSBleGlzdGluZyB0ZXN0cywgcmVtb3ZlIGVtcHR5IGBmYCBhcnJheXNcbiAgXHRpZiAoIXNlY3Rpb24uZi5sZW5ndGgpIHtcbiAgXHRcdGRlbGV0ZSBzZWN0aW9uLmY7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHNlY3Rpb247XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVVbmxlc3NCbG9jayhleHByZXNzaW9uLCBzZWN0aW9uVHlwZSkge1xuICBcdHZhciB1bmxlc3NCbG9jaztcblxuICBcdGlmIChzZWN0aW9uVHlwZSA9PT0gU0VDVElPTl9XSVRIKSB7XG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSBhIGB7eyN3aXRoIGZvb319YCBzZWN0aW9uIHdpbGwgcmVuZGVyIGlmIGBmb29gIGlzXG4gIFx0XHQvLyB0cnV0aHksIHNvIHRoZSBge3tlbHNlfX1gIHNlY3Rpb24gbmVlZHMgdG8gcmVuZGVyIGlmIGBmb29gIGlzIGZhbHN5LFxuICBcdFx0Ly8gcmF0aGVyIHRoYW4gYWRoZXJpbmcgdG8gdGhlIG5vcm1hbCBge3sjdW5sZXNzIGZvb319YCBsb2dpYyAod2hpY2hcbiAgXHRcdC8vIHRyZWF0cyBlbXB0eSBhcnJheXMvb2JqZWN0cyBhcyBmYWxzeSlcbiAgXHRcdHVubGVzc0Jsb2NrID0ge1xuICBcdFx0XHR0OiBTRUNUSU9OLFxuICBcdFx0XHRuOiBTRUNUSU9OX0lGLFxuICBcdFx0XHRmOiBbXVxuICBcdFx0fTtcblxuICBcdFx0dXRpbHNfcmVmaW5lRXhwcmVzc2lvbihpbnZlcnQoZXhwcmVzc2lvbiksIHVubGVzc0Jsb2NrKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0dW5sZXNzQmxvY2sgPSB7XG4gIFx0XHRcdHQ6IFNFQ1RJT04sXG4gIFx0XHRcdG46IFNFQ1RJT05fVU5MRVNTLFxuICBcdFx0XHRmOiBbXVxuICBcdFx0fTtcblxuICBcdFx0dXRpbHNfcmVmaW5lRXhwcmVzc2lvbihleHByZXNzaW9uLCB1bmxlc3NCbG9jayk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHVubGVzc0Jsb2NrO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52ZXJ0KGV4cHJlc3Npb24pIHtcbiAgXHRpZiAoZXhwcmVzc2lvbi50ID09PSBQUkVGSVhfT1BFUkFUT1IgJiYgZXhwcmVzc2lvbi5zID09PSBcIiFcIikge1xuICBcdFx0cmV0dXJuIGV4cHJlc3Npb24ubztcbiAgXHR9XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0dDogUFJFRklYX09QRVJBVE9SLFxuICBcdFx0czogXCIhXCIsXG4gIFx0XHRvOiBwYXJlbnNJZk5lY2Vzc2FyeShleHByZXNzaW9uKVxuICBcdH07XG4gIH1cblxuICBmdW5jdGlvbiBtdXN0YWNoZV9yZWFkU2VjdGlvbl9fY29tYmluZShleHByZXNzaW9ucykge1xuICBcdGlmIChleHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgXHRcdHJldHVybiBleHByZXNzaW9uc1swXTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0dDogSU5GSVhfT1BFUkFUT1IsXG4gIFx0XHRzOiBcIiYmXCIsXG4gIFx0XHRvOiBbcGFyZW5zSWZOZWNlc3NhcnkoZXhwcmVzc2lvbnNbMF0pLCBwYXJlbnNJZk5lY2Vzc2FyeShtdXN0YWNoZV9yZWFkU2VjdGlvbl9fY29tYmluZShleHByZXNzaW9ucy5zbGljZSgxKSkpXVxuICBcdH07XG4gIH1cblxuICBmdW5jdGlvbiBwYXJlbnNJZk5lY2Vzc2FyeShleHByZXNzaW9uKSB7XG4gIFx0Ly8gVE9ETyBvbmx5IHdyYXAgaWYgbmVjZXNzYXJ5XG4gIFx0cmV0dXJuIHtcbiAgXHRcdHQ6IEJSQUNLRVRFRCxcbiAgXHRcdHg6IGV4cHJlc3Npb25cbiAgXHR9O1xuICB9XG5cbiAgdmFyIGNvbnZlcnRlcnNfcmVhZEh0bWxDb21tZW50ID0gcmVhZEh0bWxDb21tZW50O1xuICB2YXIgT1BFTl9DT01NRU5UID0gXCI8IS0tXCIsXG4gICAgICBDTE9TRV9DT01NRU5UID0gXCItLT5cIjtcbiAgZnVuY3Rpb24gcmVhZEh0bWxDb21tZW50KHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgY29udGVudCwgcmVtYWluaW5nLCBlbmRJbmRleCwgY29tbWVudDtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKE9QRU5fQ09NTUVOVCkpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHJlbWFpbmluZyA9IHBhcnNlci5yZW1haW5pbmcoKTtcbiAgXHRlbmRJbmRleCA9IHJlbWFpbmluZy5pbmRleE9mKENMT1NFX0NPTU1FTlQpO1xuXG4gIFx0aWYgKGVuZEluZGV4ID09PSAtMSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiSWxsZWdhbCBIVE1MIC0gZXhwZWN0ZWQgY2xvc2luZyBjb21tZW50IHNlcXVlbmNlICgnLS0+JylcIik7XG4gIFx0fVxuXG4gIFx0Y29udGVudCA9IHJlbWFpbmluZy5zdWJzdHIoMCwgZW5kSW5kZXgpO1xuICBcdHBhcnNlci5wb3MgKz0gZW5kSW5kZXggKyAzO1xuXG4gIFx0Y29tbWVudCA9IHtcbiAgXHRcdHQ6IENPTU1FTlQsXG4gIFx0XHRjOiBjb250ZW50XG4gIFx0fTtcblxuICBcdGlmIChwYXJzZXIuaW5jbHVkZUxpbmVQb3NpdGlvbnMpIHtcbiAgXHRcdGNvbW1lbnQucCA9IHBhcnNlci5nZXRMaW5lUG9zKHN0YXJ0KTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gY29tbWVudDtcbiAgfVxuXG4gIHZhciBib29sZWFuQXR0cmlidXRlcywgdm9pZEVsZW1lbnROYW1lcywgaHRtbEVudGl0aWVzLCBjb250cm9sQ2hhcmFjdGVycywgZW50aXR5UGF0dGVybiwgbGVzc1RoYW4sIGdyZWF0ZXJUaGFuLCBhbXA7XG5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2thbmdheC9odG1sLW1pbmlmaWVyL2lzc3Vlcy82MyNpc3N1ZWNvbW1lbnQtMzc3NjMzMTZcbiAgYm9vbGVhbkF0dHJpYnV0ZXMgPSAvXihhbGxvd0Z1bGxzY3JlZW58YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNoZWNrZWR8Y29tcGFjdHxjb250cm9sc3xkZWNsYXJlfGRlZmF1bHR8ZGVmYXVsdENoZWNrZWR8ZGVmYXVsdE11dGVkfGRlZmF1bHRTZWxlY3RlZHxkZWZlcnxkaXNhYmxlZHxlbmFibGVkfGZvcm1Ob1ZhbGlkYXRlfGhpZGRlbnxpbmRldGVybWluYXRlfGluZXJ0fGlzTWFwfGl0ZW1TY29wZXxsb29wfG11bHRpcGxlfG11dGVkfG5vSHJlZnxub1Jlc2l6ZXxub1NoYWRlfG5vVmFsaWRhdGV8bm9XcmFwfG9wZW58cGF1c2VPbkV4aXR8cmVhZE9ubHl8cmVxdWlyZWR8cmV2ZXJzZWR8c2NvcGVkfHNlYW1sZXNzfHNlbGVjdGVkfHNvcnRhYmxlfHRyYW5zbGF0ZXx0cnVlU3BlZWR8dHlwZU11c3RNYXRjaHx2aXNpYmxlKSQvaTtcbiAgdm9pZEVsZW1lbnROYW1lcyA9IC9eKD86YXJlYXxiYXNlfGJyfGNvbHxjb21tYW5kfGRvY3R5cGV8ZW1iZWR8aHJ8aW1nfGlucHV0fGtleWdlbnxsaW5rfG1ldGF8cGFyYW18c291cmNlfHRyYWNrfHdicikkL2k7XG5cbiAgaHRtbEVudGl0aWVzID0geyBxdW90OiAzNCwgYW1wOiAzOCwgYXBvczogMzksIGx0OiA2MCwgZ3Q6IDYyLCBuYnNwOiAxNjAsIGlleGNsOiAxNjEsIGNlbnQ6IDE2MiwgcG91bmQ6IDE2MywgY3VycmVuOiAxNjQsIHllbjogMTY1LCBicnZiYXI6IDE2Niwgc2VjdDogMTY3LCB1bWw6IDE2OCwgY29weTogMTY5LCBvcmRmOiAxNzAsIGxhcXVvOiAxNzEsIG5vdDogMTcyLCBzaHk6IDE3MywgcmVnOiAxNzQsIG1hY3I6IDE3NSwgZGVnOiAxNzYsIHBsdXNtbjogMTc3LCBzdXAyOiAxNzgsIHN1cDM6IDE3OSwgYWN1dGU6IDE4MCwgbWljcm86IDE4MSwgcGFyYTogMTgyLCBtaWRkb3Q6IDE4MywgY2VkaWw6IDE4NCwgc3VwMTogMTg1LCBvcmRtOiAxODYsIHJhcXVvOiAxODcsIGZyYWMxNDogMTg4LCBmcmFjMTI6IDE4OSwgZnJhYzM0OiAxOTAsIGlxdWVzdDogMTkxLCBBZ3JhdmU6IDE5MiwgQWFjdXRlOiAxOTMsIEFjaXJjOiAxOTQsIEF0aWxkZTogMTk1LCBBdW1sOiAxOTYsIEFyaW5nOiAxOTcsIEFFbGlnOiAxOTgsIENjZWRpbDogMTk5LCBFZ3JhdmU6IDIwMCwgRWFjdXRlOiAyMDEsIEVjaXJjOiAyMDIsIEV1bWw6IDIwMywgSWdyYXZlOiAyMDQsIElhY3V0ZTogMjA1LCBJY2lyYzogMjA2LCBJdW1sOiAyMDcsIEVUSDogMjA4LCBOdGlsZGU6IDIwOSwgT2dyYXZlOiAyMTAsIE9hY3V0ZTogMjExLCBPY2lyYzogMjEyLCBPdGlsZGU6IDIxMywgT3VtbDogMjE0LCB0aW1lczogMjE1LCBPc2xhc2g6IDIxNiwgVWdyYXZlOiAyMTcsIFVhY3V0ZTogMjE4LCBVY2lyYzogMjE5LCBVdW1sOiAyMjAsIFlhY3V0ZTogMjIxLCBUSE9STjogMjIyLCBzemxpZzogMjIzLCBhZ3JhdmU6IDIyNCwgYWFjdXRlOiAyMjUsIGFjaXJjOiAyMjYsIGF0aWxkZTogMjI3LCBhdW1sOiAyMjgsIGFyaW5nOiAyMjksIGFlbGlnOiAyMzAsIGNjZWRpbDogMjMxLCBlZ3JhdmU6IDIzMiwgZWFjdXRlOiAyMzMsIGVjaXJjOiAyMzQsIGV1bWw6IDIzNSwgaWdyYXZlOiAyMzYsIGlhY3V0ZTogMjM3LCBpY2lyYzogMjM4LCBpdW1sOiAyMzksIGV0aDogMjQwLCBudGlsZGU6IDI0MSwgb2dyYXZlOiAyNDIsIG9hY3V0ZTogMjQzLCBvY2lyYzogMjQ0LCBvdGlsZGU6IDI0NSwgb3VtbDogMjQ2LCBkaXZpZGU6IDI0Nywgb3NsYXNoOiAyNDgsIHVncmF2ZTogMjQ5LCB1YWN1dGU6IDI1MCwgdWNpcmM6IDI1MSwgdXVtbDogMjUyLCB5YWN1dGU6IDI1MywgdGhvcm46IDI1NCwgeXVtbDogMjU1LCBPRWxpZzogMzM4LCBvZWxpZzogMzM5LCBTY2Fyb246IDM1Miwgc2Nhcm9uOiAzNTMsIFl1bWw6IDM3NiwgZm5vZjogNDAyLCBjaXJjOiA3MTAsIHRpbGRlOiA3MzIsIEFscGhhOiA5MTMsIEJldGE6IDkxNCwgR2FtbWE6IDkxNSwgRGVsdGE6IDkxNiwgRXBzaWxvbjogOTE3LCBaZXRhOiA5MTgsIEV0YTogOTE5LCBUaGV0YTogOTIwLCBJb3RhOiA5MjEsIEthcHBhOiA5MjIsIExhbWJkYTogOTIzLCBNdTogOTI0LCBOdTogOTI1LCBYaTogOTI2LCBPbWljcm9uOiA5MjcsIFBpOiA5MjgsIFJobzogOTI5LCBTaWdtYTogOTMxLCBUYXU6IDkzMiwgVXBzaWxvbjogOTMzLCBQaGk6IDkzNCwgQ2hpOiA5MzUsIFBzaTogOTM2LCBPbWVnYTogOTM3LCBhbHBoYTogOTQ1LCBiZXRhOiA5NDYsIGdhbW1hOiA5NDcsIGRlbHRhOiA5NDgsIGVwc2lsb246IDk0OSwgemV0YTogOTUwLCBldGE6IDk1MSwgdGhldGE6IDk1MiwgaW90YTogOTUzLCBrYXBwYTogOTU0LCBsYW1iZGE6IDk1NSwgbXU6IDk1NiwgbnU6IDk1NywgeGk6IDk1OCwgb21pY3JvbjogOTU5LCBwaTogOTYwLCByaG86IDk2MSwgc2lnbWFmOiA5NjIsIHNpZ21hOiA5NjMsIHRhdTogOTY0LCB1cHNpbG9uOiA5NjUsIHBoaTogOTY2LCBjaGk6IDk2NywgcHNpOiA5NjgsIG9tZWdhOiA5NjksIHRoZXRhc3ltOiA5NzcsIHVwc2loOiA5NzgsIHBpdjogOTgyLCBlbnNwOiA4MTk0LCBlbXNwOiA4MTk1LCB0aGluc3A6IDgyMDEsIHp3bmo6IDgyMDQsIHp3ajogODIwNSwgbHJtOiA4MjA2LCBybG06IDgyMDcsIG5kYXNoOiA4MjExLCBtZGFzaDogODIxMiwgbHNxdW86IDgyMTYsIHJzcXVvOiA4MjE3LCBzYnF1bzogODIxOCwgbGRxdW86IDgyMjAsIHJkcXVvOiA4MjIxLCBiZHF1bzogODIyMiwgZGFnZ2VyOiA4MjI0LCBEYWdnZXI6IDgyMjUsIGJ1bGw6IDgyMjYsIGhlbGxpcDogODIzMCwgcGVybWlsOiA4MjQwLCBwcmltZTogODI0MiwgUHJpbWU6IDgyNDMsIGxzYXF1bzogODI0OSwgcnNhcXVvOiA4MjUwLCBvbGluZTogODI1NCwgZnJhc2w6IDgyNjAsIGV1cm86IDgzNjQsIGltYWdlOiA4NDY1LCB3ZWllcnA6IDg0NzIsIHJlYWw6IDg0NzYsIHRyYWRlOiA4NDgyLCBhbGVmc3ltOiA4NTAxLCBsYXJyOiA4NTkyLCB1YXJyOiA4NTkzLCByYXJyOiA4NTk0LCBkYXJyOiA4NTk1LCBoYXJyOiA4NTk2LCBjcmFycjogODYyOSwgbEFycjogODY1NiwgdUFycjogODY1NywgckFycjogODY1OCwgZEFycjogODY1OSwgaEFycjogODY2MCwgZm9yYWxsOiA4NzA0LCBwYXJ0OiA4NzA2LCBleGlzdDogODcwNywgZW1wdHk6IDg3MDksIG5hYmxhOiA4NzExLCBpc2luOiA4NzEyLCBub3RpbjogODcxMywgbmk6IDg3MTUsIHByb2Q6IDg3MTksIHN1bTogODcyMSwgbWludXM6IDg3MjIsIGxvd2FzdDogODcyNywgcmFkaWM6IDg3MzAsIHByb3A6IDg3MzMsIGluZmluOiA4NzM0LCBhbmc6IDg3MzYsIGFuZDogODc0Mywgb3I6IDg3NDQsIGNhcDogODc0NSwgY3VwOiA4NzQ2LCBpbnQ6IDg3NDcsIHRoZXJlNDogODc1Niwgc2ltOiA4NzY0LCBjb25nOiA4NzczLCBhc3ltcDogODc3NiwgbmU6IDg4MDAsIGVxdWl2OiA4ODAxLCBsZTogODgwNCwgZ2U6IDg4MDUsIHN1YjogODgzNCwgc3VwOiA4ODM1LCBuc3ViOiA4ODM2LCBzdWJlOiA4ODM4LCBzdXBlOiA4ODM5LCBvcGx1czogODg1Mywgb3RpbWVzOiA4ODU1LCBwZXJwOiA4ODY5LCBzZG90OiA4OTAxLCBsY2VpbDogODk2OCwgcmNlaWw6IDg5NjksIGxmbG9vcjogODk3MCwgcmZsb29yOiA4OTcxLCBsYW5nOiA5MDAxLCByYW5nOiA5MDAyLCBsb3o6IDk2NzQsIHNwYWRlczogOTgyNCwgY2x1YnM6IDk4MjcsIGhlYXJ0czogOTgyOSwgZGlhbXM6IDk4MzAgfTtcbiAgY29udHJvbENoYXJhY3RlcnMgPSBbODM2NCwgMTI5LCA4MjE4LCA0MDIsIDgyMjIsIDgyMzAsIDgyMjQsIDgyMjUsIDcxMCwgODI0MCwgMzUyLCA4MjQ5LCAzMzgsIDE0MSwgMzgxLCAxNDMsIDE0NCwgODIxNiwgODIxNywgODIyMCwgODIyMSwgODIyNiwgODIxMSwgODIxMiwgNzMyLCA4NDgyLCAzNTMsIDgyNTAsIDMzOSwgMTU3LCAzODIsIDM3Nl07XG4gIGVudGl0eVBhdHRlcm4gPSBuZXcgUmVnRXhwKFwiJigjPyg/OnhbXFxcXHdcXFxcZF0rfFxcXFxkK3xcIiArIE9iamVjdC5rZXlzKGh0bWxFbnRpdGllcykuam9pbihcInxcIikgKyBcIikpOz9cIiwgXCJnXCIpO1xuXG4gIGZ1bmN0aW9uIGRlY29kZUNoYXJhY3RlclJlZmVyZW5jZXMoaHRtbCkge1xuICBcdHJldHVybiBodG1sLnJlcGxhY2UoZW50aXR5UGF0dGVybiwgZnVuY3Rpb24gKG1hdGNoLCBlbnRpdHkpIHtcbiAgXHRcdHZhciBjb2RlO1xuXG4gIFx0XHQvLyBIYW5kbGUgbmFtZWQgZW50aXRpZXNcbiAgXHRcdGlmIChlbnRpdHlbMF0gIT09IFwiI1wiKSB7XG4gIFx0XHRcdGNvZGUgPSBodG1sRW50aXRpZXNbZW50aXR5XTtcbiAgXHRcdH0gZWxzZSBpZiAoZW50aXR5WzFdID09PSBcInhcIikge1xuICBcdFx0XHRjb2RlID0gcGFyc2VJbnQoZW50aXR5LnN1YnN0cmluZygyKSwgMTYpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0Y29kZSA9IHBhcnNlSW50KGVudGl0eS5zdWJzdHJpbmcoMSksIDEwKTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCFjb2RlKSB7XG4gIFx0XHRcdHJldHVybiBtYXRjaDtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodmFsaWRhdGVDb2RlKGNvZGUpKTtcbiAgXHR9KTtcbiAgfVxuXG4gIC8vIHNvbWUgY29kZSBwb2ludHMgYXJlIHZlcmJvdGVuLiBJZiB3ZSB3ZXJlIGluc2VydGluZyBIVE1MLCB0aGUgYnJvd3NlciB3b3VsZCByZXBsYWNlIHRoZSBpbGxlZ2FsXG4gIC8vIGNvZGUgcG9pbnRzIHdpdGggYWx0ZXJuYXRpdmVzIGluIHNvbWUgY2FzZXMgLSBzaW5jZSB3ZSdyZSBieXBhc3NpbmcgdGhhdCBtZWNoYW5pc20sIHdlIG5lZWRcbiAgLy8gdG8gcmVwbGFjZSB0aGVtIG91cnNlbHZlc1xuICAvL1xuICAvLyBTb3VyY2U6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2hhcmFjdGVyX2VuY29kaW5nc19pbl9IVE1MI0lsbGVnYWxfY2hhcmFjdGVyc1xuICBmdW5jdGlvbiB2YWxpZGF0ZUNvZGUoY29kZSkge1xuICBcdGlmICghY29kZSkge1xuICBcdFx0cmV0dXJuIDY1NTMzO1xuICBcdH1cblxuICBcdC8vIGxpbmUgZmVlZCBiZWNvbWVzIGdlbmVyaWMgd2hpdGVzcGFjZVxuICBcdGlmIChjb2RlID09PSAxMCkge1xuICBcdFx0cmV0dXJuIDMyO1xuICBcdH1cblxuICBcdC8vIEFTQ0lJIHJhbmdlLiAoV2h5IHNvbWVvbmUgd291bGQgdXNlIEhUTUwgZW50aXRpZXMgZm9yIEFTQ0lJIGNoYXJhY3RlcnMgSSBkb24ndCBrbm93LCBidXQuLi4pXG4gIFx0aWYgKGNvZGUgPCAxMjgpIHtcbiAgXHRcdHJldHVybiBjb2RlO1xuICBcdH1cblxuICBcdC8vIGNvZGUgcG9pbnRzIDEyOC0xNTkgYXJlIGRlYWx0IHdpdGggbGVuaWVudGx5IGJ5IGJyb3dzZXJzLCBidXQgdGhleSdyZSBpbmNvcnJlY3QuIFdlIG5lZWRcbiAgXHQvLyB0byBjb3JyZWN0IHRoZSBtaXN0YWtlIG9yIHdlJ2xsIGVuZCB1cCB3aXRoIG1pc3Npbmcg4oKsIHNpZ25zIGFuZCBzbyBvblxuICBcdGlmIChjb2RlIDw9IDE1OSkge1xuICBcdFx0cmV0dXJuIGNvbnRyb2xDaGFyYWN0ZXJzW2NvZGUgLSAxMjhdO1xuICBcdH1cblxuICBcdC8vIGJhc2ljIG11bHRpbGluZ3VhbCBwbGFuZVxuICBcdGlmIChjb2RlIDwgNTUyOTYpIHtcbiAgXHRcdHJldHVybiBjb2RlO1xuICBcdH1cblxuICBcdC8vIFVURi0xNiBzdXJyb2dhdGUgaGFsdmVzXG4gIFx0aWYgKGNvZGUgPD0gNTczNDMpIHtcbiAgXHRcdHJldHVybiA2NTUzMztcbiAgXHR9XG5cbiAgXHQvLyByZXN0IG9mIHRoZSBiYXNpYyBtdWx0aWxpbmd1YWwgcGxhbmVcbiAgXHRpZiAoY29kZSA8PSA2NTUzNSkge1xuICBcdFx0cmV0dXJuIGNvZGU7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIDY1NTMzO1xuICB9XG5cbiAgbGVzc1RoYW4gPSAvPC9nO1xuICBncmVhdGVyVGhhbiA9IC8+L2c7XG4gIGFtcCA9IC8mL2c7XG5cbiAgZnVuY3Rpb24gZXNjYXBlSHRtbChzdHIpIHtcbiAgXHRyZXR1cm4gc3RyLnJlcGxhY2UoYW1wLCBcIiZhbXA7XCIpLnJlcGxhY2UobGVzc1RoYW4sIFwiJmx0O1wiKS5yZXBsYWNlKGdyZWF0ZXJUaGFuLCBcIiZndDtcIik7XG4gIH1cblxuICB2YXIgbGVhZGluZ0xpbmVicmVhayA9IC9eXFxzKlxccj9cXG4vLFxuICAgICAgdHJhaWxpbmdMaW5lYnJlYWsgPSAvXFxyP1xcblxccyokLztcblxuICB2YXIgc3RyaXBTdGFuZGFsb25lcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBcdHZhciBpLCBjdXJyZW50LCBiYWNrT25lLCBiYWNrVHdvLCBsYXN0U2VjdGlvbkl0ZW07XG5cbiAgXHRmb3IgKGkgPSAxOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdGN1cnJlbnQgPSBpdGVtc1tpXTtcbiAgXHRcdGJhY2tPbmUgPSBpdGVtc1tpIC0gMV07XG4gIFx0XHRiYWNrVHdvID0gaXRlbXNbaSAtIDJdO1xuXG4gIFx0XHQvLyBpZiB3ZSdyZSBhdCB0aGUgZW5kIG9mIGEgW3RleHRdW2NvbW1lbnRdW3RleHRdIHNlcXVlbmNlLi4uXG4gIFx0XHRpZiAoaXNTdHJpbmcoY3VycmVudCkgJiYgaXNDb21tZW50KGJhY2tPbmUpICYmIGlzU3RyaW5nKGJhY2tUd28pKSB7XG5cbiAgXHRcdFx0Ly8gLi4uIGFuZCB0aGUgY29tbWVudCBpcyBhIHN0YW5kYWxvbmUgKGkuZS4gbGluZSBicmVha3MgZWl0aGVyIHNpZGUpLi4uXG4gIFx0XHRcdGlmICh0cmFpbGluZ0xpbmVicmVhay50ZXN0KGJhY2tUd28pICYmIGxlYWRpbmdMaW5lYnJlYWsudGVzdChjdXJyZW50KSkge1xuXG4gIFx0XHRcdFx0Ly8gLi4uIHRoZW4gd2Ugd2FudCB0byByZW1vdmUgdGhlIHdoaXRlc3BhY2UgYWZ0ZXIgdGhlIGZpcnN0IGxpbmUgYnJlYWtcbiAgXHRcdFx0XHRpdGVtc1tpIC0gMl0gPSBiYWNrVHdvLnJlcGxhY2UodHJhaWxpbmdMaW5lYnJlYWssIFwiXFxuXCIpO1xuXG4gIFx0XHRcdFx0Ly8gYW5kIHRoZSBsZWFkaW5nIGxpbmUgYnJlYWsgb2YgdGhlIHNlY29uZCB0ZXh0IHRva2VuXG4gIFx0XHRcdFx0aXRlbXNbaV0gPSBjdXJyZW50LnJlcGxhY2UobGVhZGluZ0xpbmVicmVhaywgXCJcIik7XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0Ly8gaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhIHNlY3Rpb24sIGFuZCBpdCBpcyBwcmVjZWRlZCBieSBhIGxpbmVicmVhaywgYW5kXG4gIFx0XHQvLyBpdHMgZmlyc3QgaXRlbSBpcyBhIGxpbmVicmVhay4uLlxuICBcdFx0aWYgKGlzU2VjdGlvbihjdXJyZW50KSAmJiBpc1N0cmluZyhiYWNrT25lKSkge1xuICBcdFx0XHRpZiAodHJhaWxpbmdMaW5lYnJlYWsudGVzdChiYWNrT25lKSAmJiBpc1N0cmluZyhjdXJyZW50LmZbMF0pICYmIGxlYWRpbmdMaW5lYnJlYWsudGVzdChjdXJyZW50LmZbMF0pKSB7XG4gIFx0XHRcdFx0aXRlbXNbaSAtIDFdID0gYmFja09uZS5yZXBsYWNlKHRyYWlsaW5nTGluZWJyZWFrLCBcIlxcblwiKTtcbiAgXHRcdFx0XHRjdXJyZW50LmZbMF0gPSBjdXJyZW50LmZbMF0ucmVwbGFjZShsZWFkaW5nTGluZWJyZWFrLCBcIlwiKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHQvLyBpZiB0aGUgbGFzdCBpdGVtIHdhcyBhIHNlY3Rpb24sIGFuZCBpdCBpcyBmb2xsb3dlZCBieSBhIGxpbmVicmVhaywgYW5kXG4gIFx0XHQvLyBpdHMgbGFzdCBpdGVtIGlzIGEgbGluZWJyZWFrLi4uXG4gIFx0XHRpZiAoaXNTdHJpbmcoY3VycmVudCkgJiYgaXNTZWN0aW9uKGJhY2tPbmUpKSB7XG4gIFx0XHRcdGxhc3RTZWN0aW9uSXRlbSA9IGxhc3RJdGVtKGJhY2tPbmUuZik7XG5cbiAgXHRcdFx0aWYgKGlzU3RyaW5nKGxhc3RTZWN0aW9uSXRlbSkgJiYgdHJhaWxpbmdMaW5lYnJlYWsudGVzdChsYXN0U2VjdGlvbkl0ZW0pICYmIGxlYWRpbmdMaW5lYnJlYWsudGVzdChjdXJyZW50KSkge1xuICBcdFx0XHRcdGJhY2tPbmUuZltiYWNrT25lLmYubGVuZ3RoIC0gMV0gPSBsYXN0U2VjdGlvbkl0ZW0ucmVwbGFjZSh0cmFpbGluZ0xpbmVicmVhaywgXCJcXG5cIik7XG4gIFx0XHRcdFx0aXRlbXNbaV0gPSBjdXJyZW50LnJlcGxhY2UobGVhZGluZ0xpbmVicmVhaywgXCJcIik7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgZnVuY3Rpb24gaXNTdHJpbmcoaXRlbSkge1xuICBcdHJldHVybiB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQ29tbWVudChpdGVtKSB7XG4gIFx0cmV0dXJuIGl0ZW0udCA9PT0gQ09NTUVOVCB8fCBpdGVtLnQgPT09IERFTElNQ0hBTkdFO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNTZWN0aW9uKGl0ZW0pIHtcbiAgXHRyZXR1cm4gKGl0ZW0udCA9PT0gU0VDVElPTiB8fCBpdGVtLnQgPT09IElOVkVSVEVEKSAmJiBpdGVtLmY7XG4gIH1cblxuICB2YXIgdHJpbVdoaXRlc3BhY2UgPSBmdW5jdGlvbiAoaXRlbXMsIGxlYWRpbmdQYXR0ZXJuLCB0cmFpbGluZ1BhdHRlcm4pIHtcbiAgXHR2YXIgaXRlbTtcblxuICBcdGlmIChsZWFkaW5nUGF0dGVybikge1xuICBcdFx0aXRlbSA9IGl0ZW1zWzBdO1xuICBcdFx0aWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRcdGl0ZW0gPSBpdGVtLnJlcGxhY2UobGVhZGluZ1BhdHRlcm4sIFwiXCIpO1xuXG4gIFx0XHRcdGlmICghaXRlbSkge1xuICBcdFx0XHRcdGl0ZW1zLnNoaWZ0KCk7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0aXRlbXNbMF0gPSBpdGVtO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0aWYgKHRyYWlsaW5nUGF0dGVybikge1xuICBcdFx0aXRlbSA9IGxhc3RJdGVtKGl0ZW1zKTtcbiAgXHRcdGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRpdGVtID0gaXRlbS5yZXBsYWNlKHRyYWlsaW5nUGF0dGVybiwgXCJcIik7XG5cbiAgXHRcdFx0aWYgKCFpdGVtKSB7XG4gIFx0XHRcdFx0aXRlbXMucG9wKCk7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0aXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0gPSBpdGVtO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuICB9O1xuXG4gIHZhciB1dGlsc19jbGVhbnVwID0gY2xlYW51cDtcbiAgdmFyIGNvbnRpZ3VvdXNXaGl0ZXNwYWNlID0gL1sgXFx0XFxmXFxyXFxuXSsvZztcbiAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZUVsZW1lbnRzID0gL14oPzpwcmV8c2NyaXB0fHN0eWxlfHRleHRhcmVhKSQvaTtcbiAgdmFyIHV0aWxzX2NsZWFudXBfX2xlYWRpbmdXaGl0ZXNwYWNlID0gL15bIFxcdFxcZlxcclxcbl0rLztcbiAgdmFyIHRyYWlsaW5nV2hpdGVzcGFjZSA9IC9bIFxcdFxcZlxcclxcbl0rJC87XG4gIHZhciBsZWFkaW5nTmV3TGluZSA9IC9eKD86XFxyXFxufFxccnxcXG4pLztcbiAgdmFyIHRyYWlsaW5nTmV3TGluZSA9IC8oPzpcXHJcXG58XFxyfFxcbikkLztcbiAgZnVuY3Rpb24gY2xlYW51cChpdGVtcywgc3RyaXBDb21tZW50cywgcHJlc2VydmVXaGl0ZXNwYWNlLCByZW1vdmVMZWFkaW5nV2hpdGVzcGFjZSwgcmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlKSB7XG4gIFx0dmFyIGksIGl0ZW0sIHByZXZpb3VzSXRlbSwgbmV4dEl0ZW0sIHByZXNlcnZlV2hpdGVzcGFjZUluc2lkZUZyYWdtZW50LCByZW1vdmVMZWFkaW5nV2hpdGVzcGFjZUluc2lkZUZyYWdtZW50LCByZW1vdmVUcmFpbGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwga2V5O1xuXG4gIFx0Ly8gRmlyc3QgcGFzcyAtIHJlbW92ZSBzdGFuZGFsb25lcyBhbmQgY29tbWVudHMgZXRjXG4gIFx0c3RyaXBTdGFuZGFsb25lcyhpdGVtcyk7XG5cbiAgXHRpID0gaXRlbXMubGVuZ3RoO1xuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGl0ZW0gPSBpdGVtc1tpXTtcblxuICBcdFx0Ly8gUmVtb3ZlIGRlbGltaXRlciBjaGFuZ2VzLCB1bnNhZmUgZWxlbWVudHMgZXRjXG4gIFx0XHRpZiAoaXRlbS5leGNsdWRlKSB7XG4gIFx0XHRcdGl0ZW1zLnNwbGljZShpLCAxKTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gUmVtb3ZlIGNvbW1lbnRzLCB1bmxlc3Mgd2Ugd2FudCB0byBrZWVwIHRoZW1cbiAgXHRcdGVsc2UgaWYgKHN0cmlwQ29tbWVudHMgJiYgaXRlbS50ID09PSBDT01NRU5UKSB7XG4gIFx0XHRcdGl0ZW1zLnNwbGljZShpLCAxKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBJZiBuZWNlc3NhcnksIHJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gIFx0dHJpbVdoaXRlc3BhY2UoaXRlbXMsIHJlbW92ZUxlYWRpbmdXaGl0ZXNwYWNlID8gdXRpbHNfY2xlYW51cF9fbGVhZGluZ1doaXRlc3BhY2UgOiBudWxsLCByZW1vdmVUcmFpbGluZ1doaXRlc3BhY2UgPyB0cmFpbGluZ1doaXRlc3BhY2UgOiBudWxsKTtcblxuICBcdGkgPSBpdGVtcy5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0aXRlbSA9IGl0ZW1zW2ldO1xuXG4gIFx0XHQvLyBSZWN1cnNlXG4gIFx0XHRpZiAoaXRlbS5mKSB7XG4gIFx0XHRcdHZhciBpc1ByZXNlcnZlV2hpdGVzcGFjZUVsZW1lbnQgPSBpdGVtLnQgPT09IEVMRU1FTlQgJiYgcHJlc2VydmVXaGl0ZXNwYWNlRWxlbWVudHMudGVzdChpdGVtLmUpO1xuICBcdFx0XHRwcmVzZXJ2ZVdoaXRlc3BhY2VJbnNpZGVGcmFnbWVudCA9IHByZXNlcnZlV2hpdGVzcGFjZSB8fCBpc1ByZXNlcnZlV2hpdGVzcGFjZUVsZW1lbnQ7XG5cbiAgXHRcdFx0aWYgKCFwcmVzZXJ2ZVdoaXRlc3BhY2UgJiYgaXNQcmVzZXJ2ZVdoaXRlc3BhY2VFbGVtZW50KSB7XG4gIFx0XHRcdFx0dHJpbVdoaXRlc3BhY2UoaXRlbS5mLCBsZWFkaW5nTmV3TGluZSwgdHJhaWxpbmdOZXdMaW5lKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmICghcHJlc2VydmVXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQpIHtcbiAgXHRcdFx0XHRwcmV2aW91c0l0ZW0gPSBpdGVtc1tpIC0gMV07XG4gIFx0XHRcdFx0bmV4dEl0ZW0gPSBpdGVtc1tpICsgMV07XG5cbiAgXHRcdFx0XHQvLyBpZiB0aGUgcHJldmlvdXMgaXRlbSB3YXMgYSB0ZXh0IGl0ZW0gd2l0aCB0cmFpbGluZyB3aGl0ZXNwYWNlLFxuICBcdFx0XHRcdC8vIHJlbW92ZSBsZWFkaW5nIHdoaXRlc3BhY2UgaW5zaWRlIHRoZSBmcmFnbWVudFxuICBcdFx0XHRcdGlmICghcHJldmlvdXNJdGVtIHx8IHR5cGVvZiBwcmV2aW91c0l0ZW0gPT09IFwic3RyaW5nXCIgJiYgdHJhaWxpbmdXaGl0ZXNwYWNlLnRlc3QocHJldmlvdXNJdGVtKSkge1xuICBcdFx0XHRcdFx0cmVtb3ZlTGVhZGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCA9IHRydWU7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0Ly8gYW5kIHZpY2UgdmVyc2FcbiAgXHRcdFx0XHRpZiAoIW5leHRJdGVtIHx8IHR5cGVvZiBuZXh0SXRlbSA9PT0gXCJzdHJpbmdcIiAmJiB1dGlsc19jbGVhbnVwX19sZWFkaW5nV2hpdGVzcGFjZS50ZXN0KG5leHRJdGVtKSkge1xuICBcdFx0XHRcdFx0cmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQgPSB0cnVlO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGNsZWFudXAoaXRlbS5mLCBzdHJpcENvbW1lbnRzLCBwcmVzZXJ2ZVdoaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwgcmVtb3ZlTGVhZGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwgcmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBTcGxpdCBpZi1lbHNlIGJsb2NrcyBpbnRvIHR3byAoYW4gaWYsIGFuZCBhbiB1bmxlc3MpXG4gIFx0XHRpZiAoaXRlbS5sKSB7XG4gIFx0XHRcdGNsZWFudXAoaXRlbS5sLmYsIHN0cmlwQ29tbWVudHMsIHByZXNlcnZlV2hpdGVzcGFjZSwgcmVtb3ZlTGVhZGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwgcmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQpO1xuXG4gIFx0XHRcdGl0ZW1zLnNwbGljZShpICsgMSwgMCwgaXRlbS5sKTtcbiAgXHRcdFx0ZGVsZXRlIGl0ZW0ubDsgLy8gVE9ETyB3b3VsZCBiZSBuaWNlIGlmIHRoZXJlIHdhcyBhIHdheSBhcm91bmQgdGhpc1xuICBcdFx0fVxuXG4gIFx0XHQvLyBDbGVhbiB1cCBlbGVtZW50IGF0dHJpYnV0ZXNcbiAgXHRcdGlmIChpdGVtLmEpIHtcbiAgXHRcdFx0Zm9yIChrZXkgaW4gaXRlbS5hKSB7XG4gIFx0XHRcdFx0aWYgKGl0ZW0uYS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHR5cGVvZiBpdGVtLmFba2V5XSAhPT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRcdFx0Y2xlYW51cChpdGVtLmFba2V5XSwgc3RyaXBDb21tZW50cywgcHJlc2VydmVXaGl0ZXNwYWNlLCByZW1vdmVMZWFkaW5nV2hpdGVzcGFjZUluc2lkZUZyYWdtZW50LCByZW1vdmVUcmFpbGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdC8vIENsZWFuIHVwIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZXNcbiAgXHRcdGlmIChpdGVtLm0pIHtcbiAgXHRcdFx0Y2xlYW51cChpdGVtLm0sIHN0cmlwQ29tbWVudHMsIHByZXNlcnZlV2hpdGVzcGFjZSwgcmVtb3ZlTGVhZGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwgcmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBDbGVhbiB1cCBldmVudCBoYW5kbGVyc1xuICBcdFx0aWYgKGl0ZW0udikge1xuICBcdFx0XHRmb3IgKGtleSBpbiBpdGVtLnYpIHtcbiAgXHRcdFx0XHRpZiAoaXRlbS52Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgXHRcdFx0XHRcdC8vIGNsZWFuIHVwIG5hbWVzXG4gIFx0XHRcdFx0XHRpZiAoaXNBcnJheShpdGVtLnZba2V5XS5uKSkge1xuICBcdFx0XHRcdFx0XHRjbGVhbnVwKGl0ZW0udltrZXldLm4sIHN0cmlwQ29tbWVudHMsIHByZXNlcnZlV2hpdGVzcGFjZSwgcmVtb3ZlTGVhZGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCwgcmVtb3ZlVHJhaWxpbmdXaGl0ZXNwYWNlSW5zaWRlRnJhZ21lbnQpO1xuICBcdFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0XHQvLyBjbGVhbiB1cCBwYXJhbXNcbiAgXHRcdFx0XHRcdGlmIChpc0FycmF5KGl0ZW0udltrZXldLmQpKSB7XG4gIFx0XHRcdFx0XHRcdGNsZWFudXAoaXRlbS52W2tleV0uZCwgc3RyaXBDb21tZW50cywgcHJlc2VydmVXaGl0ZXNwYWNlLCByZW1vdmVMZWFkaW5nV2hpdGVzcGFjZUluc2lkZUZyYWdtZW50LCByZW1vdmVUcmFpbGluZ1doaXRlc3BhY2VJbnNpZGVGcmFnbWVudCk7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gZmluYWwgcGFzcyAtIGZ1c2UgdGV4dCBub2RlcyB0b2dldGhlclxuICBcdGkgPSBpdGVtcy5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0aWYgKHR5cGVvZiBpdGVtc1tpXSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRpZiAodHlwZW9mIGl0ZW1zW2kgKyAxXSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRcdGl0ZW1zW2ldID0gaXRlbXNbaV0gKyBpdGVtc1tpICsgMV07XG4gIFx0XHRcdFx0aXRlbXMuc3BsaWNlKGkgKyAxLCAxKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmICghcHJlc2VydmVXaGl0ZXNwYWNlKSB7XG4gIFx0XHRcdFx0aXRlbXNbaV0gPSBpdGVtc1tpXS5yZXBsYWNlKGNvbnRpZ3VvdXNXaGl0ZXNwYWNlLCBcIiBcIik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoaXRlbXNbaV0gPT09IFwiXCIpIHtcbiAgXHRcdFx0XHRpdGVtcy5zcGxpY2UoaSwgMSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgZWxlbWVudF9yZWFkQ2xvc2luZ1RhZyA9IHJlYWRDbG9zaW5nVGFnO1xuICB2YXIgY2xvc2luZ1RhZ1BhdHRlcm4gPSAvXihbYS16QS1aXXsxLH06P1thLXpBLVowLTlcXC1dKilcXHMqXFw+LztcbiAgZnVuY3Rpb24gcmVhZENsb3NpbmdUYWcocGFyc2VyKSB7XG4gIFx0dmFyIHN0YXJ0LCB0YWc7XG5cbiAgXHRzdGFydCA9IHBhcnNlci5wb3M7XG5cbiAgXHQvLyBhcmUgd2UgbG9va2luZyBhdCBhIGNsb3NpbmcgdGFnP1xuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiPC9cIikpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGlmICh0YWcgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKGNsb3NpbmdUYWdQYXR0ZXJuKSkge1xuICBcdFx0aWYgKHBhcnNlci5pbnNpZGUgJiYgdGFnICE9PSBwYXJzZXIuaW5zaWRlKSB7XG4gIFx0XHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB7XG4gIFx0XHRcdHQ6IENMT1NJTkdfVEFHLFxuICBcdFx0XHRlOiB0YWdcbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0Ly8gV2UgaGF2ZSBhbiBpbGxlZ2FsIGNsb3NpbmcgdGFnLCByZXBvcnQgaXRcbiAgXHRwYXJzZXIucG9zIC09IDI7XG4gIFx0cGFyc2VyLmVycm9yKFwiSWxsZWdhbCBjbG9zaW5nIHRhZ1wiKTtcbiAgfVxuXG4gIHZhciBnZXRMb3dlc3RJbmRleCA9IGZ1bmN0aW9uIChoYXlzdGFjaywgbmVlZGxlcykge1xuICBcdHZhciBpLCBpbmRleCwgbG93ZXN0O1xuXG4gIFx0aSA9IG5lZWRsZXMubGVuZ3RoO1xuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGluZGV4ID0gaGF5c3RhY2suaW5kZXhPZihuZWVkbGVzW2ldKTtcblxuICBcdFx0Ly8gc2hvcnQgY2lyY3VpdFxuICBcdFx0aWYgKCFpbmRleCkge1xuICBcdFx0XHRyZXR1cm4gMDtcbiAgXHRcdH1cblxuICBcdFx0aWYgKGluZGV4ID09PSAtMSkge1xuICBcdFx0XHRjb250aW51ZTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCFsb3dlc3QgfHwgaW5kZXggPCBsb3dlc3QpIHtcbiAgXHRcdFx0bG93ZXN0ID0gaW5kZXg7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGxvd2VzdCB8fCAtMTtcbiAgfTtcblxuICB2YXIgZWxlbWVudF9yZWFkQXR0cmlidXRlID0gcmVhZEF0dHJpYnV0ZTtcblxuICB2YXIgYXR0cmlidXRlTmFtZVBhdHRlcm4gPSAvXlteXFxzXCInPlxcLz1dKy8sXG4gICAgICB1bnF1b3RlZEF0dHJpYnV0ZVZhbHVlVGV4dFBhdHRlcm4gPSAvXlteXFxzXCInPTw+YF0rLztcbiAgZnVuY3Rpb24gcmVhZEF0dHJpYnV0ZShwYXJzZXIpIHtcbiAgXHR2YXIgYXR0ciwgbmFtZSwgdmFsdWU7XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHRuYW1lID0gcGFyc2VyLm1hdGNoUGF0dGVybihhdHRyaWJ1dGVOYW1lUGF0dGVybik7XG4gIFx0aWYgKCFuYW1lKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRhdHRyID0geyBuYW1lOiBuYW1lIH07XG5cbiAgXHR2YWx1ZSA9IHJlYWRBdHRyaWJ1dGVWYWx1ZShwYXJzZXIpO1xuICBcdGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gIFx0XHQvLyBub3QgbnVsbC91bmRlZmluZWRcbiAgXHRcdGF0dHIudmFsdWUgPSB2YWx1ZTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gYXR0cjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBdHRyaWJ1dGVWYWx1ZShwYXJzZXIpIHtcbiAgXHR2YXIgc3RhcnQsIHZhbHVlU3RhcnQsIHN0YXJ0RGVwdGgsIHZhbHVlO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0Ly8gbmV4dCBjaGFyYWN0ZXIgbXVzdCBiZSBgPWAsIGAvYCwgYD5gIG9yIHdoaXRlc3BhY2VcbiAgXHRpZiAoIS9bPVxcLz5cXHNdLy50ZXN0KHBhcnNlci5uZXh0Q2hhcigpKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgYD1gLCBgL2AsIGA+YCBvciB3aGl0ZXNwYWNlXCIpO1xuICBcdH1cblxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiPVwiKSkge1xuICBcdFx0cGFyc2VyLnBvcyA9IHN0YXJ0O1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0dmFsdWVTdGFydCA9IHBhcnNlci5wb3M7XG4gIFx0c3RhcnREZXB0aCA9IHBhcnNlci5zZWN0aW9uRGVwdGg7XG5cbiAgXHR2YWx1ZSA9IHJlYWRRdW90ZWRBdHRyaWJ1dGVWYWx1ZShwYXJzZXIsIFwiJ1wiKSB8fCByZWFkUXVvdGVkQXR0cmlidXRlVmFsdWUocGFyc2VyLCBcIlxcXCJcIikgfHwgcmVhZFVucXVvdGVkQXR0cmlidXRlVmFsdWUocGFyc2VyKTtcblxuICBcdGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgdmFsaWQgYXR0cmlidXRlIHZhbHVlXCIpO1xuICBcdH1cblxuICBcdGlmIChwYXJzZXIuc2VjdGlvbkRlcHRoICE9PSBzdGFydERlcHRoKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gdmFsdWVTdGFydDtcbiAgXHRcdHBhcnNlci5lcnJvcihcIkFuIGF0dHJpYnV0ZSB2YWx1ZSBtdXN0IGNvbnRhaW4gYXMgbWFueSBvcGVuaW5nIHNlY3Rpb24gdGFncyBhcyBjbG9zaW5nIHNlY3Rpb24gdGFnc1wiKTtcbiAgXHR9XG5cbiAgXHRpZiAoIXZhbHVlLmxlbmd0aCkge1xuICBcdFx0cmV0dXJuIFwiXCI7XG4gIFx0fVxuXG4gIFx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdmFsdWVbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdHJldHVybiBkZWNvZGVDaGFyYWN0ZXJSZWZlcmVuY2VzKHZhbHVlWzBdKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkVW5xdW90ZWRBdHRyaWJ1dGVWYWx1ZVRva2VuKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgdGV4dCwgaGF5c3RhY2ssIG5lZWRsZXMsIGluZGV4O1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0dGV4dCA9IHBhcnNlci5tYXRjaFBhdHRlcm4odW5xdW90ZWRBdHRyaWJ1dGVWYWx1ZVRleHRQYXR0ZXJuKTtcblxuICBcdGlmICghdGV4dCkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aGF5c3RhY2sgPSB0ZXh0O1xuICBcdG5lZWRsZXMgPSBwYXJzZXIudGFncy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgXHRcdHJldHVybiB0Lm9wZW47XG4gIFx0fSk7IC8vIFRPRE8gcmVmYWN0b3IuLi4gd2UgZG8gdGhpcyBpbiByZWFkVGV4dC5qcyBhcyB3ZWxsXG5cbiAgXHRpZiAoKGluZGV4ID0gZ2V0TG93ZXN0SW5kZXgoaGF5c3RhY2ssIG5lZWRsZXMpKSAhPT0gLTEpIHtcbiAgXHRcdHRleHQgPSB0ZXh0LnN1YnN0cigwLCBpbmRleCk7XG4gIFx0XHRwYXJzZXIucG9zID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRVbnF1b3RlZEF0dHJpYnV0ZVZhbHVlKHBhcnNlcikge1xuICBcdHZhciB0b2tlbnMsIHRva2VuO1xuXG4gIFx0cGFyc2VyLmluQXR0cmlidXRlID0gdHJ1ZTtcblxuICBcdHRva2VucyA9IFtdO1xuXG4gIFx0dG9rZW4gPSBjb252ZXJ0ZXJzX3JlYWRNdXN0YWNoZShwYXJzZXIpIHx8IHJlYWRVbnF1b3RlZEF0dHJpYnV0ZVZhbHVlVG9rZW4ocGFyc2VyKTtcbiAgXHR3aGlsZSAodG9rZW4gIT09IG51bGwpIHtcbiAgXHRcdHRva2Vucy5wdXNoKHRva2VuKTtcbiAgXHRcdHRva2VuID0gY29udmVydGVyc19yZWFkTXVzdGFjaGUocGFyc2VyKSB8fCByZWFkVW5xdW90ZWRBdHRyaWJ1dGVWYWx1ZVRva2VuKHBhcnNlcik7XG4gIFx0fVxuXG4gIFx0aWYgKCF0b2tlbnMubGVuZ3RoKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRwYXJzZXIuaW5BdHRyaWJ1dGUgPSBmYWxzZTtcbiAgXHRyZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFF1b3RlZEF0dHJpYnV0ZVZhbHVlKHBhcnNlciwgcXVvdGVNYXJrKSB7XG4gIFx0dmFyIHN0YXJ0LCB0b2tlbnMsIHRva2VuO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcocXVvdGVNYXJrKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmluQXR0cmlidXRlID0gcXVvdGVNYXJrO1xuXG4gIFx0dG9rZW5zID0gW107XG5cbiAgXHR0b2tlbiA9IGNvbnZlcnRlcnNfcmVhZE11c3RhY2hlKHBhcnNlcikgfHwgcmVhZFF1b3RlZFN0cmluZ1Rva2VuKHBhcnNlciwgcXVvdGVNYXJrKTtcbiAgXHR3aGlsZSAodG9rZW4gIT09IG51bGwpIHtcbiAgXHRcdHRva2Vucy5wdXNoKHRva2VuKTtcbiAgXHRcdHRva2VuID0gY29udmVydGVyc19yZWFkTXVzdGFjaGUocGFyc2VyKSB8fCByZWFkUXVvdGVkU3RyaW5nVG9rZW4ocGFyc2VyLCBxdW90ZU1hcmspO1xuICBcdH1cblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKHF1b3RlTWFyaykpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhcnNlci5pbkF0dHJpYnV0ZSA9IGZhbHNlO1xuXG4gIFx0cmV0dXJuIHRva2VucztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRRdW90ZWRTdHJpbmdUb2tlbihwYXJzZXIsIHF1b3RlTWFyaykge1xuICBcdHZhciBzdGFydCwgaW5kZXgsIGhheXN0YWNrLCBuZWVkbGVzO1xuXG4gIFx0c3RhcnQgPSBwYXJzZXIucG9zO1xuICBcdGhheXN0YWNrID0gcGFyc2VyLnJlbWFpbmluZygpO1xuXG4gIFx0bmVlZGxlcyA9IHBhcnNlci50YWdzLm1hcChmdW5jdGlvbiAodCkge1xuICBcdFx0cmV0dXJuIHQub3BlbjtcbiAgXHR9KTsgLy8gVE9ETyByZWZhY3Rvci4uLiB3ZSBkbyB0aGlzIGluIHJlYWRUZXh0LmpzIGFzIHdlbGxcbiAgXHRuZWVkbGVzLnB1c2gocXVvdGVNYXJrKTtcblxuICBcdGluZGV4ID0gZ2V0TG93ZXN0SW5kZXgoaGF5c3RhY2ssIG5lZWRsZXMpO1xuXG4gIFx0aWYgKGluZGV4ID09PSAtMSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiUXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZSBtdXN0IGhhdmUgYSBjbG9zaW5nIHF1b3RlXCIpO1xuICBcdH1cblxuICBcdGlmICghaW5kZXgpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHBhcnNlci5wb3MgKz0gaW5kZXg7XG4gIFx0cmV0dXJuIGhheXN0YWNrLnN1YnN0cigwLCBpbmRleCk7XG4gIH1cblxuICB2YXIgSnNvblBhcnNlciwgc3BlY2lhbHMsIHNwZWNpYWxzUGF0dGVybiwgcGFyc2VKU09OX19udW1iZXJQYXR0ZXJuLCBwbGFjZWhvbGRlclBhdHRlcm4sIHBsYWNlaG9sZGVyQXRTdGFydFBhdHRlcm4sIG9ubHlXaGl0ZXNwYWNlO1xuXG4gIHNwZWNpYWxzID0ge1xuICBcdFwidHJ1ZVwiOiB0cnVlLFxuICBcdFwiZmFsc2VcIjogZmFsc2UsXG4gIFx0dW5kZWZpbmVkOiB1bmRlZmluZWQsXG4gIFx0XCJudWxsXCI6IG51bGxcbiAgfTtcblxuICBzcGVjaWFsc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXig/OlwiICsgT2JqZWN0LmtleXMoc3BlY2lhbHMpLmpvaW4oXCJ8XCIpICsgXCIpXCIpO1xuICBwYXJzZUpTT05fX251bWJlclBhdHRlcm4gPSAvXig/OlsrLV0/KSg/Oig/Oig/OjB8WzEtOV1cXGQqKT9cXC5cXGQrKXwoPzooPzowfFsxLTldXFxkKilcXC4pfCg/OjB8WzEtOV1cXGQqKSkoPzpbZUVdWystXT9cXGQrKT8vO1xuICBwbGFjZWhvbGRlclBhdHRlcm4gPSAvXFwkXFx7KFteXFx9XSspXFx9L2c7XG4gIHBsYWNlaG9sZGVyQXRTdGFydFBhdHRlcm4gPSAvXlxcJFxceyhbXlxcfV0rKVxcfS87XG4gIG9ubHlXaGl0ZXNwYWNlID0gL15cXHMqJC87XG5cbiAgSnNvblBhcnNlciA9IHBhcnNlX1BhcnNlci5leHRlbmQoe1xuICBcdGluaXQ6IGZ1bmN0aW9uIChzdHIsIG9wdGlvbnMpIHtcbiAgXHRcdHRoaXMudmFsdWVzID0gb3B0aW9ucy52YWx1ZXM7XG4gIFx0XHR0aGlzLmFsbG93V2hpdGVzcGFjZSgpO1xuICBcdH0sXG5cbiAgXHRwb3N0UHJvY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICBcdFx0aWYgKHJlc3VsdC5sZW5ndGggIT09IDEgfHwgIW9ubHlXaGl0ZXNwYWNlLnRlc3QodGhpcy5sZWZ0b3ZlcikpIHtcbiAgXHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB7IHZhbHVlOiByZXN1bHRbMF0udiB9O1xuICBcdH0sXG5cbiAgXHRjb252ZXJ0ZXJzOiBbZnVuY3Rpb24gZ2V0UGxhY2Vob2xkZXIocGFyc2VyKSB7XG4gIFx0XHR2YXIgcGxhY2Vob2xkZXI7XG5cbiAgXHRcdGlmICghcGFyc2VyLnZhbHVlcykge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cGxhY2Vob2xkZXIgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKHBsYWNlaG9sZGVyQXRTdGFydFBhdHRlcm4pO1xuXG4gIFx0XHRpZiAocGxhY2Vob2xkZXIgJiYgcGFyc2VyLnZhbHVlcy5oYXNPd25Qcm9wZXJ0eShwbGFjZWhvbGRlcikpIHtcbiAgXHRcdFx0cmV0dXJuIHsgdjogcGFyc2VyLnZhbHVlc1twbGFjZWhvbGRlcl0gfTtcbiAgXHRcdH1cbiAgXHR9LCBmdW5jdGlvbiBnZXRTcGVjaWFsKHBhcnNlcikge1xuICBcdFx0dmFyIHNwZWNpYWw7XG5cbiAgXHRcdGlmIChzcGVjaWFsID0gcGFyc2VyLm1hdGNoUGF0dGVybihzcGVjaWFsc1BhdHRlcm4pKSB7XG4gIFx0XHRcdHJldHVybiB7IHY6IHNwZWNpYWxzW3NwZWNpYWxdIH07XG4gIFx0XHR9XG4gIFx0fSwgZnVuY3Rpb24gZ2V0TnVtYmVyKHBhcnNlcikge1xuICBcdFx0dmFyIG51bWJlcjtcblxuICBcdFx0aWYgKG51bWJlciA9IHBhcnNlci5tYXRjaFBhdHRlcm4ocGFyc2VKU09OX19udW1iZXJQYXR0ZXJuKSkge1xuICBcdFx0XHRyZXR1cm4geyB2OiArbnVtYmVyIH07XG4gIFx0XHR9XG4gIFx0fSwgZnVuY3Rpb24gZ2V0U3RyaW5nKHBhcnNlcikge1xuICBcdFx0dmFyIHN0cmluZ0xpdGVyYWwgPSByZWFkU3RyaW5nTGl0ZXJhbChwYXJzZXIpLFxuICBcdFx0ICAgIHZhbHVlcztcblxuICBcdFx0aWYgKHN0cmluZ0xpdGVyYWwgJiYgKHZhbHVlcyA9IHBhcnNlci52YWx1ZXMpKSB7XG4gIFx0XHRcdHJldHVybiB7XG4gIFx0XHRcdFx0djogc3RyaW5nTGl0ZXJhbC52LnJlcGxhY2UocGxhY2Vob2xkZXJQYXR0ZXJuLCBmdW5jdGlvbiAobWF0Y2gsICQxKSB7XG4gIFx0XHRcdFx0XHRyZXR1cm4gJDEgaW4gdmFsdWVzID8gdmFsdWVzWyQxXSA6ICQxO1xuICBcdFx0XHRcdH0pXG4gIFx0XHRcdH07XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBzdHJpbmdMaXRlcmFsO1xuICBcdH0sIGZ1bmN0aW9uIGdldE9iamVjdChwYXJzZXIpIHtcbiAgXHRcdHZhciByZXN1bHQsIHBhaXI7XG5cbiAgXHRcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwie1wiKSkge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cmVzdWx0ID0ge307XG5cbiAgXHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIn1cIikpIHtcbiAgXHRcdFx0cmV0dXJuIHsgdjogcmVzdWx0IH07XG4gIFx0XHR9XG5cbiAgXHRcdHdoaWxlIChwYWlyID0gZ2V0S2V5VmFsdWVQYWlyKHBhcnNlcikpIHtcbiAgXHRcdFx0cmVzdWx0W3BhaXIua2V5XSA9IHBhaXIudmFsdWU7XG5cbiAgXHRcdFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0XHRcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCJ9XCIpKSB7XG4gIFx0XHRcdFx0cmV0dXJuIHsgdjogcmVzdWx0IH07XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIixcIikpIHtcbiAgXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9LCBmdW5jdGlvbiBnZXRBcnJheShwYXJzZXIpIHtcbiAgXHRcdHZhciByZXN1bHQsIHZhbHVlVG9rZW47XG5cbiAgXHRcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiW1wiKSkge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cmVzdWx0ID0gW107XG5cbiAgXHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIl1cIikpIHtcbiAgXHRcdFx0cmV0dXJuIHsgdjogcmVzdWx0IH07XG4gIFx0XHR9XG5cbiAgXHRcdHdoaWxlICh2YWx1ZVRva2VuID0gcGFyc2VyLnJlYWQoKSkge1xuICBcdFx0XHRyZXN1bHQucHVzaCh2YWx1ZVRva2VuLnYpO1xuXG4gIFx0XHRcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdFx0XHRpZiAocGFyc2VyLm1hdGNoU3RyaW5nKFwiXVwiKSkge1xuICBcdFx0XHRcdHJldHVybiB7IHY6IHJlc3VsdCB9O1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCIsXCIpKSB7XG4gIFx0XHRcdFx0cmV0dXJuIG51bGw7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1dXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGdldEtleVZhbHVlUGFpcihwYXJzZXIpIHtcbiAgXHR2YXIga2V5LCB2YWx1ZVRva2VuLCBwYWlyO1xuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0a2V5ID0gc2hhcmVkX3JlYWRLZXkocGFyc2VyKTtcblxuICBcdGlmICgha2V5KSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRwYWlyID0geyBrZXk6IGtleSB9O1xuXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKFwiOlwiKSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuICBcdHBhcnNlci5hbGxvd1doaXRlc3BhY2UoKTtcblxuICBcdHZhbHVlVG9rZW4gPSBwYXJzZXIucmVhZCgpO1xuICBcdGlmICghdmFsdWVUb2tlbikge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0cGFpci52YWx1ZSA9IHZhbHVlVG9rZW4udjtcblxuICBcdHJldHVybiBwYWlyO1xuICB9XG5cbiAgdmFyIHBhcnNlSlNPTiA9IGZ1bmN0aW9uIChzdHIsIHZhbHVlcykge1xuICBcdHZhciBwYXJzZXIgPSBuZXcgSnNvblBhcnNlcihzdHIsIHtcbiAgXHRcdHZhbHVlczogdmFsdWVzXG4gIFx0fSk7XG5cbiAgXHRyZXR1cm4gcGFyc2VyLnJlc3VsdDtcbiAgfTtcblxuICAvLyBUT0RPIGNsZWFuIHRoaXMgdXAsIGl0J3Mgc2hvY2tpbmdcbiAgdmFyIGVsZW1lbnRfcHJvY2Vzc0RpcmVjdGl2ZSA9IHByb2Nlc3NEaXJlY3RpdmU7XG4gIHZhciBtZXRob2RDYWxsUGF0dGVybiA9IC9eKFthLXpBLVpfJF1bYS16QS1aXyQwLTldKilcXCgvLFxuICAgICAgbWV0aG9kQ2FsbEV4Y2Vzc1BhdHRlcm4gPSAvXFwpXFxzKiQvLFxuICAgICAgRXhwcmVzc2lvblBhcnNlcjtcblxuICBFeHByZXNzaW9uUGFyc2VyID0gcGFyc2VfUGFyc2VyLmV4dGVuZCh7XG4gIFx0Y29udmVydGVyczogW2NvbnZlcnRlcnNfcmVhZEV4cHJlc3Npb25dXG4gIH0pO1xuICBmdW5jdGlvbiBwcm9jZXNzRGlyZWN0aXZlKHRva2VucywgcGFyZW50UGFyc2VyKSB7XG4gIFx0dmFyIHJlc3VsdCwgbWF0Y2gsIHBhcnNlciwgYXJncywgdG9rZW4sIGNvbG9uSW5kZXgsIGRpcmVjdGl2ZU5hbWUsIGRpcmVjdGl2ZUFyZ3MsIHBhcnNlZDtcblxuICBcdGlmICh0eXBlb2YgdG9rZW5zID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRpZiAobWF0Y2ggPSBtZXRob2RDYWxsUGF0dGVybi5leGVjKHRva2VucykpIHtcbiAgXHRcdFx0dmFyIGVuZCA9IHRva2Vucy5sYXN0SW5kZXhPZihcIilcIik7XG5cbiAgXHRcdFx0Ly8gY2hlY2sgZm9yIGludmFsaWQgbWV0aG9kIGNhbGxzXG4gIFx0XHRcdGlmICghbWV0aG9kQ2FsbEV4Y2Vzc1BhdHRlcm4udGVzdCh0b2tlbnMpKSB7XG4gIFx0XHRcdFx0cGFyZW50UGFyc2VyLmVycm9yKFwiSW52YWxpZCBpbnB1dCBhZnRlciBtZXRob2QgY2FsbCBleHByZXNzaW9uICdcIiArIHRva2Vucy5zbGljZShlbmQgKyAxKSArIFwiJ1wiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJlc3VsdCA9IHsgbTogbWF0Y2hbMV0gfTtcbiAgXHRcdFx0YXJncyA9IFwiW1wiICsgdG9rZW5zLnNsaWNlKHJlc3VsdC5tLmxlbmd0aCArIDEsIGVuZCkgKyBcIl1cIjtcblxuICBcdFx0XHRwYXJzZXIgPSBuZXcgRXhwcmVzc2lvblBhcnNlcihhcmdzKTtcbiAgXHRcdFx0cmVzdWx0LmEgPSB1dGlsc19mbGF0dGVuRXhwcmVzc2lvbihwYXJzZXIucmVzdWx0WzBdKTtcblxuICBcdFx0XHRyZXR1cm4gcmVzdWx0O1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodG9rZW5zLmluZGV4T2YoXCI6XCIpID09PSAtMSkge1xuICBcdFx0XHRyZXR1cm4gdG9rZW5zLnRyaW0oKTtcbiAgXHRcdH1cblxuICBcdFx0dG9rZW5zID0gW3Rva2Vuc107XG4gIFx0fVxuXG4gIFx0cmVzdWx0ID0ge307XG5cbiAgXHRkaXJlY3RpdmVOYW1lID0gW107XG4gIFx0ZGlyZWN0aXZlQXJncyA9IFtdO1xuXG4gIFx0aWYgKHRva2Vucykge1xuICBcdFx0d2hpbGUgKHRva2Vucy5sZW5ndGgpIHtcbiAgXHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblxuICBcdFx0XHRpZiAodHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRcdFx0Y29sb25JbmRleCA9IHRva2VuLmluZGV4T2YoXCI6XCIpO1xuXG4gIFx0XHRcdFx0aWYgKGNvbG9uSW5kZXggPT09IC0xKSB7XG4gIFx0XHRcdFx0XHRkaXJlY3RpdmVOYW1lLnB1c2godG9rZW4pO1xuICBcdFx0XHRcdH0gZWxzZSB7XG5cbiAgXHRcdFx0XHRcdC8vIGlzIHRoZSBjb2xvbiB0aGUgZmlyc3QgY2hhcmFjdGVyP1xuICBcdFx0XHRcdFx0aWYgKGNvbG9uSW5kZXgpIHtcbiAgXHRcdFx0XHRcdFx0Ly8gbm9cbiAgXHRcdFx0XHRcdFx0ZGlyZWN0aXZlTmFtZS5wdXNoKHRva2VuLnN1YnN0cigwLCBjb2xvbkluZGV4KSk7XG4gIFx0XHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRcdC8vIGlmIHRoZXJlIGlzIGFueXRoaW5nIGFmdGVyIHRoZSBjb2xvbiBpbiB0aGlzIHRva2VuLCB0cmVhdFxuICBcdFx0XHRcdFx0Ly8gaXQgYXMgdGhlIGZpcnN0IHRva2VuIG9mIHRoZSBkaXJlY3RpdmVBcmdzIGZyYWdtZW50XG4gIFx0XHRcdFx0XHRpZiAodG9rZW4ubGVuZ3RoID4gY29sb25JbmRleCArIDEpIHtcbiAgXHRcdFx0XHRcdFx0ZGlyZWN0aXZlQXJnc1swXSA9IHRva2VuLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSk7XG4gIFx0XHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRcdGJyZWFrO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRkaXJlY3RpdmVOYW1lLnB1c2godG9rZW4pO1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdGRpcmVjdGl2ZUFyZ3MgPSBkaXJlY3RpdmVBcmdzLmNvbmNhdCh0b2tlbnMpO1xuICBcdH1cblxuICBcdGlmICghZGlyZWN0aXZlTmFtZS5sZW5ndGgpIHtcbiAgXHRcdHJlc3VsdCA9IFwiXCI7XG4gIFx0fSBlbHNlIGlmIChkaXJlY3RpdmVBcmdzLmxlbmd0aCB8fCB0eXBlb2YgZGlyZWN0aXZlTmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICBcdFx0cmVzdWx0ID0ge1xuICBcdFx0XHQvLyBUT0RPIGlzIHRoaXMgcmVhbGx5IG5lY2Vzc2FyeT8ganVzdCB1c2UgdGhlIGFycmF5XG4gIFx0XHRcdG46IGRpcmVjdGl2ZU5hbWUubGVuZ3RoID09PSAxICYmIHR5cGVvZiBkaXJlY3RpdmVOYW1lWzBdID09PSBcInN0cmluZ1wiID8gZGlyZWN0aXZlTmFtZVswXSA6IGRpcmVjdGl2ZU5hbWVcbiAgXHRcdH07XG5cbiAgXHRcdGlmIChkaXJlY3RpdmVBcmdzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgZGlyZWN0aXZlQXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRwYXJzZWQgPSBwYXJzZUpTT04oXCJbXCIgKyBkaXJlY3RpdmVBcmdzWzBdICsgXCJdXCIpO1xuICBcdFx0XHRyZXN1bHQuYSA9IHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IGRpcmVjdGl2ZUFyZ3NbMF0udHJpbSgpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cmVzdWx0LmQgPSBkaXJlY3RpdmVBcmdzO1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHRyZXN1bHQgPSBkaXJlY3RpdmVOYW1lO1xuICBcdH1cblxuICBcdHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgdGFnTmFtZVBhdHRlcm4gPSAvXlthLXpBLVpdezEsfTo/W2EtekEtWjAtOVxcLV0qLyxcbiAgICAgIHZhbGlkVGFnTmFtZUZvbGxvd2VyID0gL15bXFxzXFxuXFwvPl0vLFxuICAgICAgb25QYXR0ZXJuID0gL15vbi8sXG4gICAgICBwcm94eUV2ZW50UGF0dGVybiA9IC9eb24tKFthLXpBLVpcXFxcKlxcXFwuJF9dW2EtekEtWlxcXFwqXFxcXC4kXzAtOVxcLV0rKSQvLFxuICAgICAgcmVzZXJ2ZWRFdmVudE5hbWVzID0gL14oPzpjaGFuZ2V8cmVzZXR8dGVhcmRvd258dXBkYXRlfGNvbnN0cnVjdHxjb25maWd8aW5pdHxyZW5kZXJ8dW5yZW5kZXJ8ZGV0YWNofGluc2VydCkkLyxcbiAgICAgIGRpcmVjdGl2ZXMgPSB7IFwiaW50cm8tb3V0cm9cIjogXCJ0MFwiLCBpbnRybzogXCJ0MVwiLCBvdXRybzogXCJ0MlwiLCBkZWNvcmF0b3I6IFwib1wiIH0sXG4gICAgICBleGNsdWRlID0geyBleGNsdWRlOiB0cnVlIH0sXG4gICAgICBkaXNhbGxvd2VkQ29udGVudHM7XG5cbiAgLy8gYmFzZWQgb24gaHR0cDovL2RldmVsb3BlcnMud2hhdHdnLm9yZy9zeW50YXguaHRtbCNzeW50YXgtdGFnLW9taXNzaW9uXG4gIGRpc2FsbG93ZWRDb250ZW50cyA9IHtcbiAgXHRsaTogW1wibGlcIl0sXG4gIFx0ZHQ6IFtcImR0XCIsIFwiZGRcIl0sXG4gIFx0ZGQ6IFtcImR0XCIsIFwiZGRcIl0sXG4gIFx0cDogXCJhZGRyZXNzIGFydGljbGUgYXNpZGUgYmxvY2txdW90ZSBkaXYgZGwgZmllbGRzZXQgZm9vdGVyIGZvcm0gaDEgaDIgaDMgaDQgaDUgaDYgaGVhZGVyIGhncm91cCBociBtYWluIG1lbnUgbmF2IG9sIHAgcHJlIHNlY3Rpb24gdGFibGUgdWxcIi5zcGxpdChcIiBcIiksXG4gIFx0cnQ6IFtcInJ0XCIsIFwicnBcIl0sXG4gIFx0cnA6IFtcInJ0XCIsIFwicnBcIl0sXG4gIFx0b3B0Z3JvdXA6IFtcIm9wdGdyb3VwXCJdLFxuICBcdG9wdGlvbjogW1wib3B0aW9uXCIsIFwib3B0Z3JvdXBcIl0sXG4gIFx0dGhlYWQ6IFtcInRib2R5XCIsIFwidGZvb3RcIl0sXG4gIFx0dGJvZHk6IFtcInRib2R5XCIsIFwidGZvb3RcIl0sXG4gIFx0dGZvb3Q6IFtcInRib2R5XCJdLFxuICBcdHRyOiBbXCJ0clwiLCBcInRib2R5XCJdLFxuICBcdHRkOiBbXCJ0ZFwiLCBcInRoXCIsIFwidHJcIl0sXG4gIFx0dGg6IFtcInRkXCIsIFwidGhcIiwgXCJ0clwiXVxuICB9O1xuXG4gIHZhciBjb252ZXJ0ZXJzX3JlYWRFbGVtZW50ID0gcmVhZEVsZW1lbnQ7XG5cbiAgZnVuY3Rpb24gcmVhZEVsZW1lbnQocGFyc2VyKSB7XG4gIFx0dmFyIHN0YXJ0LCBlbGVtZW50LCBkaXJlY3RpdmVOYW1lLCBtYXRjaCwgYWRkUHJveHlFdmVudCwgYXR0cmlidXRlLCBkaXJlY3RpdmUsIHNlbGZDbG9zaW5nLCBjaGlsZHJlbiwgcGFydGlhbHMsIGhhc1BhcnRpYWxzLCBjaGlsZCwgY2xvc2VkLCBwb3MsIHJlbWFpbmluZywgY2xvc2luZ1RhZztcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdGlmIChwYXJzZXIuaW5zaWRlIHx8IHBhcnNlci5pbkF0dHJpYnV0ZSkge1xuICBcdFx0cmV0dXJuIG51bGw7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJzZXIubWF0Y2hTdHJpbmcoXCI8XCIpKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHQvLyBpZiB0aGlzIGlzIGEgY2xvc2luZyB0YWcsIGFib3J0IHN0cmFpZ2h0IGF3YXlcbiAgXHRpZiAocGFyc2VyLm5leHRDaGFyKCkgPT09IFwiL1wiKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRlbGVtZW50ID0ge307XG4gIFx0aWYgKHBhcnNlci5pbmNsdWRlTGluZVBvc2l0aW9ucykge1xuICBcdFx0ZWxlbWVudC5wID0gcGFyc2VyLmdldExpbmVQb3Moc3RhcnQpO1xuICBcdH1cblxuICBcdGlmIChwYXJzZXIubWF0Y2hTdHJpbmcoXCIhXCIpKSB7XG4gIFx0XHRlbGVtZW50LnQgPSBET0NUWVBFO1xuICBcdFx0aWYgKCFwYXJzZXIubWF0Y2hQYXR0ZXJuKC9eZG9jdHlwZS9pKSkge1xuICBcdFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBET0NUWVBFIGRlY2xhcmF0aW9uXCIpO1xuICBcdFx0fVxuXG4gIFx0XHRlbGVtZW50LmEgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKC9eKC4rPyk+Lyk7XG4gIFx0XHRyZXR1cm4gZWxlbWVudDtcbiAgXHR9XG5cbiAgXHRlbGVtZW50LnQgPSBFTEVNRU5UO1xuXG4gIFx0Ly8gZWxlbWVudCBuYW1lXG4gIFx0ZWxlbWVudC5lID0gcGFyc2VyLm1hdGNoUGF0dGVybih0YWdOYW1lUGF0dGVybik7XG4gIFx0aWYgKCFlbGVtZW50LmUpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdC8vIG5leHQgY2hhcmFjdGVyIG11c3QgYmUgd2hpdGVzcGFjZSwgY2xvc2luZyBzb2xpZHVzIG9yICc+J1xuICBcdGlmICghdmFsaWRUYWdOYW1lRm9sbG93ZXIudGVzdChwYXJzZXIubmV4dENoYXIoKSkpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcIklsbGVnYWwgdGFnIG5hbWVcIik7XG4gIFx0fVxuXG4gIFx0YWRkUHJveHlFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBkaXJlY3RpdmUpIHtcbiAgXHRcdHZhciBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlLm4gfHwgZGlyZWN0aXZlO1xuXG4gIFx0XHRpZiAocmVzZXJ2ZWRFdmVudE5hbWVzLnRlc3QoZGlyZWN0aXZlTmFtZSkpIHtcbiAgXHRcdFx0cGFyc2VyLnBvcyAtPSBkaXJlY3RpdmVOYW1lLmxlbmd0aDtcbiAgXHRcdFx0cGFyc2VyLmVycm9yKFwiQ2Fubm90IHVzZSByZXNlcnZlZCBldmVudCBuYW1lcyAoY2hhbmdlLCByZXNldCwgdGVhcmRvd24sIHVwZGF0ZSwgY29uc3RydWN0LCBjb25maWcsIGluaXQsIHJlbmRlciwgdW5yZW5kZXIsIGRldGFjaCwgaW5zZXJ0KVwiKTtcbiAgXHRcdH1cblxuICBcdFx0ZWxlbWVudC52W25hbWVdID0gZGlyZWN0aXZlO1xuICBcdH07XG5cbiAgXHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG5cbiAgXHQvLyBkaXJlY3RpdmVzIGFuZCBhdHRyaWJ1dGVzXG4gIFx0d2hpbGUgKGF0dHJpYnV0ZSA9IGNvbnZlcnRlcnNfcmVhZE11c3RhY2hlKHBhcnNlcikgfHwgZWxlbWVudF9yZWFkQXR0cmlidXRlKHBhcnNlcikpIHtcbiAgXHRcdC8vIHJlZ3VsYXIgYXR0cmlidXRlc1xuICBcdFx0aWYgKGF0dHJpYnV0ZS5uYW1lKSB7XG4gIFx0XHRcdC8vIGludHJvLCBvdXRybywgZGVjb3JhdG9yXG4gIFx0XHRcdGlmIChkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlc1thdHRyaWJ1dGUubmFtZV0pIHtcbiAgXHRcdFx0XHRlbGVtZW50W2RpcmVjdGl2ZU5hbWVdID0gZWxlbWVudF9wcm9jZXNzRGlyZWN0aXZlKGF0dHJpYnV0ZS52YWx1ZSwgcGFyc2VyKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIG9uLWNsaWNrIGV0Y1xuICBcdFx0XHRlbHNlIGlmIChtYXRjaCA9IHByb3h5RXZlbnRQYXR0ZXJuLmV4ZWMoYXR0cmlidXRlLm5hbWUpKSB7XG4gIFx0XHRcdFx0aWYgKCFlbGVtZW50LnYpIGVsZW1lbnQudiA9IHt9O1xuICBcdFx0XHRcdGRpcmVjdGl2ZSA9IGVsZW1lbnRfcHJvY2Vzc0RpcmVjdGl2ZShhdHRyaWJ1dGUudmFsdWUsIHBhcnNlcik7XG4gIFx0XHRcdFx0YWRkUHJveHlFdmVudChtYXRjaFsxXSwgZGlyZWN0aXZlKTtcbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRpZiAoIXBhcnNlci5zYW5pdGl6ZUV2ZW50QXR0cmlidXRlcyB8fCAhb25QYXR0ZXJuLnRlc3QoYXR0cmlidXRlLm5hbWUpKSB7XG4gIFx0XHRcdFx0XHRpZiAoIWVsZW1lbnQuYSkgZWxlbWVudC5hID0ge307XG4gIFx0XHRcdFx0XHRlbGVtZW50LmFbYXR0cmlidXRlLm5hbWVdID0gYXR0cmlidXRlLnZhbHVlIHx8IChhdHRyaWJ1dGUudmFsdWUgPT09IFwiXCIgPyBcIlwiIDogMCk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdC8vIHt7I2lmIGZvb319Y2xhc3M9J2Zvbyd7ey9pZn19XG4gIFx0XHRlbHNlIHtcbiAgXHRcdFx0aWYgKCFlbGVtZW50Lm0pIGVsZW1lbnQubSA9IFtdO1xuICBcdFx0XHRlbGVtZW50Lm0ucHVzaChhdHRyaWJ1dGUpO1xuICBcdFx0fVxuXG4gIFx0XHRwYXJzZXIuYWxsb3dXaGl0ZXNwYWNlKCk7XG4gIFx0fVxuXG4gIFx0Ly8gYWxsb3cgd2hpdGVzcGFjZSBiZWZvcmUgY2xvc2luZyBzb2xpZHVzXG4gIFx0cGFyc2VyLmFsbG93V2hpdGVzcGFjZSgpO1xuXG4gIFx0Ly8gc2VsZi1jbG9zaW5nIHNvbGlkdXM/XG4gIFx0aWYgKHBhcnNlci5tYXRjaFN0cmluZyhcIi9cIikpIHtcbiAgXHRcdHNlbGZDbG9zaW5nID0gdHJ1ZTtcbiAgXHR9XG5cbiAgXHQvLyBjbG9zaW5nIGFuZ2xlIGJyYWNrZXRcbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhcIj5cIikpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdHZhciBsb3dlckNhc2VOYW1lID0gZWxlbWVudC5lLnRvTG93ZXJDYXNlKCk7XG4gIFx0dmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IHBhcnNlci5wcmVzZXJ2ZVdoaXRlc3BhY2U7XG5cbiAgXHRpZiAoIXNlbGZDbG9zaW5nICYmICF2b2lkRWxlbWVudE5hbWVzLnRlc3QoZWxlbWVudC5lKSkge1xuICBcdFx0cGFyc2VyLmVsZW1lbnRTdGFjay5wdXNoKGxvd2VyQ2FzZU5hbWUpO1xuXG4gIFx0XHQvLyBTcGVjaWFsIGNhc2UgLSBpZiB3ZSBvcGVuIGEgc2NyaXB0IGVsZW1lbnQsIGZ1cnRoZXIgdGFncyBzaG91bGRcbiAgXHRcdC8vIGJlIGlnbm9yZWQgdW5sZXNzIHRoZXkncmUgYSBjbG9zaW5nIHNjcmlwdCBlbGVtZW50XG4gIFx0XHRpZiAobG93ZXJDYXNlTmFtZSA9PT0gXCJzY3JpcHRcIiB8fCBsb3dlckNhc2VOYW1lID09PSBcInN0eWxlXCIpIHtcbiAgXHRcdFx0cGFyc2VyLmluc2lkZSA9IGxvd2VyQ2FzZU5hbWU7XG4gIFx0XHR9XG5cbiAgXHRcdGNoaWxkcmVuID0gW107XG4gIFx0XHRwYXJ0aWFscyA9IGNyZWF0ZShudWxsKTtcblxuICBcdFx0ZG8ge1xuICBcdFx0XHRwb3MgPSBwYXJzZXIucG9zO1xuICBcdFx0XHRyZW1haW5pbmcgPSBwYXJzZXIucmVtYWluaW5nKCk7XG5cbiAgXHRcdFx0Ly8gaWYgZm9yIGV4YW1wbGUgd2UncmUgaW4gYW4gPGxpPiBlbGVtZW50LCBhbmQgd2Ugc2VlIGFub3RoZXJcbiAgXHRcdFx0Ly8gPGxpPiB0YWcsIGNsb3NlIHRoZSBmaXJzdCBzbyB0aGV5IGJlY29tZSBzaWJsaW5nc1xuICBcdFx0XHRpZiAoIWNhbkNvbnRhaW4obG93ZXJDYXNlTmFtZSwgcmVtYWluaW5nKSkge1xuICBcdFx0XHRcdGNsb3NlZCA9IHRydWU7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBjbG9zaW5nIHRhZ1xuICBcdFx0XHRlbHNlIGlmIChjbG9zaW5nVGFnID0gZWxlbWVudF9yZWFkQ2xvc2luZ1RhZyhwYXJzZXIpKSB7XG4gIFx0XHRcdFx0Y2xvc2VkID0gdHJ1ZTtcblxuICBcdFx0XHRcdHZhciBjbG9zaW5nVGFnTmFtZSA9IGNsb3NpbmdUYWcuZS50b0xvd2VyQ2FzZSgpO1xuXG4gIFx0XHRcdFx0Ly8gaWYgdGhpcyAqaXNuJ3QqIHRoZSBjbG9zaW5nIHRhZyBmb3IgdGhlIGN1cnJlbnQgZWxlbWVudC4uLlxuICBcdFx0XHRcdGlmIChjbG9zaW5nVGFnTmFtZSAhPT0gbG93ZXJDYXNlTmFtZSkge1xuICBcdFx0XHRcdFx0Ly8gcmV3aW5kIHBhcnNlclxuICBcdFx0XHRcdFx0cGFyc2VyLnBvcyA9IHBvcztcblxuICBcdFx0XHRcdFx0Ly8gaWYgaXQgZG9lc24ndCBjbG9zZSBhIHBhcmVudCB0YWcsIGVycm9yXG4gIFx0XHRcdFx0XHRpZiAoISB+cGFyc2VyLmVsZW1lbnRTdGFjay5pbmRleE9mKGNsb3NpbmdUYWdOYW1lKSkge1xuICBcdFx0XHRcdFx0XHR2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGNsb3NpbmcgdGFnXCI7XG5cbiAgXHRcdFx0XHRcdFx0Ly8gYWRkIGFkZGl0aW9uYWwgaGVscCBmb3Igdm9pZCBlbGVtZW50cywgc2luY2UgY29tcG9uZW50IG5hbWVzXG4gIFx0XHRcdFx0XHRcdC8vIG1pZ2h0IGNsYXNoIHdpdGggdGhlbVxuICBcdFx0XHRcdFx0XHRpZiAodm9pZEVsZW1lbnROYW1lcy50ZXN0KGNsb3NpbmdUYWdOYW1lKSkge1xuICBcdFx0XHRcdFx0XHRcdGVycm9yTWVzc2FnZSArPSBcIiAoPFwiICsgY2xvc2luZ1RhZ05hbWUgKyBcIj4gaXMgYSB2b2lkIGVsZW1lbnQgLSBpdCBjYW5ub3QgY29udGFpbiBjaGlsZHJlbilcIjtcbiAgXHRcdFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0XHRcdHBhcnNlci5lcnJvcihlcnJvck1lc3NhZ2UpO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIGltcGxpY2l0IGNsb3NlIGJ5IGNsb3Npbmcgc2VjdGlvbiB0YWcuIFRPRE8gY2xlYW4gdGhpcyB1cFxuICBcdFx0XHRlbHNlIGlmIChjaGlsZCA9IHNlY3Rpb25fcmVhZENsb3NpbmcocGFyc2VyLCB7IG9wZW46IHBhcnNlci5zdGFuZGFyZERlbGltaXRlcnNbMF0sIGNsb3NlOiBwYXJzZXIuc3RhbmRhcmREZWxpbWl0ZXJzWzFdIH0pKSB7XG4gIFx0XHRcdFx0Y2xvc2VkID0gdHJ1ZTtcbiAgXHRcdFx0XHRwYXJzZXIucG9zID0gcG9zO1xuICBcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdGlmIChjaGlsZCA9IHBhcnNlci5yZWFkKFBBUlRJQUxfUkVBREVSUykpIHtcbiAgXHRcdFx0XHRcdGlmIChwYXJ0aWFsc1tjaGlsZC5uXSkge1xuICBcdFx0XHRcdFx0XHRwYXJzZXIucG9zID0gcG9zO1xuICBcdFx0XHRcdFx0XHRwYXJzZXIuZXJyb3IoXCJEdXBsaWNhdGUgcGFydGlhbCBkZWZpbml0aW9uXCIpO1xuICBcdFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0XHR1dGlsc19jbGVhbnVwKGNoaWxkLmYsIHBhcnNlci5zdHJpcENvbW1lbnRzLCBwcmVzZXJ2ZVdoaXRlc3BhY2UsICFwcmVzZXJ2ZVdoaXRlc3BhY2UsICFwcmVzZXJ2ZVdoaXRlc3BhY2UpO1xuXG4gIFx0XHRcdFx0XHRwYXJ0aWFsc1tjaGlsZC5uXSA9IGNoaWxkLmY7XG4gIFx0XHRcdFx0XHRoYXNQYXJ0aWFscyA9IHRydWU7XG4gIFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdGlmIChjaGlsZCA9IHBhcnNlci5yZWFkKFJFQURFUlMpKSB7XG4gIFx0XHRcdFx0XHRcdGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICBcdFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdFx0Y2xvc2VkID0gdHJ1ZTtcbiAgXHRcdFx0XHRcdH1cbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH0gd2hpbGUgKCFjbG9zZWQpO1xuXG4gIFx0XHRpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG4gIFx0XHRcdGVsZW1lbnQuZiA9IGNoaWxkcmVuO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoaGFzUGFydGlhbHMpIHtcbiAgXHRcdFx0ZWxlbWVudC5wID0gcGFydGlhbHM7XG4gIFx0XHR9XG5cbiAgXHRcdHBhcnNlci5lbGVtZW50U3RhY2sucG9wKCk7XG4gIFx0fVxuXG4gIFx0cGFyc2VyLmluc2lkZSA9IG51bGw7XG5cbiAgXHRpZiAocGFyc2VyLnNhbml0aXplRWxlbWVudHMgJiYgcGFyc2VyLnNhbml0aXplRWxlbWVudHMuaW5kZXhPZihsb3dlckNhc2VOYW1lKSAhPT0gLTEpIHtcbiAgXHRcdHJldHVybiBleGNsdWRlO1xuICBcdH1cblxuICBcdHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuQ29udGFpbihuYW1lLCByZW1haW5pbmcpIHtcbiAgXHR2YXIgbWF0Y2gsIGRpc2FsbG93ZWQ7XG5cbiAgXHRtYXRjaCA9IC9ePChbYS16QS1aXVthLXpBLVowLTldKikvLmV4ZWMocmVtYWluaW5nKTtcbiAgXHRkaXNhbGxvd2VkID0gZGlzYWxsb3dlZENvbnRlbnRzW25hbWVdO1xuXG4gIFx0aWYgKCFtYXRjaCB8fCAhZGlzYWxsb3dlZCkge1xuICBcdFx0cmV0dXJuIHRydWU7XG4gIFx0fVxuXG4gIFx0cmV0dXJuICEgfmRpc2FsbG93ZWQuaW5kZXhPZihtYXRjaFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuXG4gIHZhciBjb252ZXJ0ZXJzX3JlYWRUZXh0ID0gcmVhZFRleHQ7XG4gIGZ1bmN0aW9uIHJlYWRUZXh0KHBhcnNlcikge1xuICBcdHZhciBpbmRleCwgcmVtYWluaW5nLCBkaXNhbGxvd2VkLCBiYXJyaWVyO1xuXG4gIFx0cmVtYWluaW5nID0gcGFyc2VyLnJlbWFpbmluZygpO1xuXG4gIFx0YmFycmllciA9IHBhcnNlci5pbnNpZGUgPyBcIjwvXCIgKyBwYXJzZXIuaW5zaWRlIDogXCI8XCI7XG5cbiAgXHRpZiAocGFyc2VyLmluc2lkZSAmJiAhcGFyc2VyLmludGVycG9sYXRlW3BhcnNlci5pbnNpZGVdKSB7XG4gIFx0XHRpbmRleCA9IHJlbWFpbmluZy5pbmRleE9mKGJhcnJpZXIpO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRkaXNhbGxvd2VkID0gcGFyc2VyLnRhZ3MubWFwKGZ1bmN0aW9uICh0KSB7XG4gIFx0XHRcdHJldHVybiB0Lm9wZW47XG4gIFx0XHR9KTtcbiAgXHRcdGRpc2FsbG93ZWQgPSBkaXNhbGxvd2VkLmNvbmNhdChwYXJzZXIudGFncy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgXHRcdFx0cmV0dXJuIFwiXFxcXFwiICsgdC5vcGVuO1xuICBcdFx0fSkpO1xuXG4gIFx0XHQvLyBodHRwOi8vZGV2ZWxvcGVycy53aGF0d2cub3JnL3N5bnRheC5odG1sI3N5bnRheC1hdHRyaWJ1dGVzXG4gIFx0XHRpZiAocGFyc2VyLmluQXR0cmlidXRlID09PSB0cnVlKSB7XG4gIFx0XHRcdC8vIHdlJ3JlIGluc2lkZSBhbiB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWVcbiAgXHRcdFx0ZGlzYWxsb3dlZC5wdXNoKFwiXFxcIlwiLCBcIidcIiwgXCI9XCIsIFwiPFwiLCBcIj5cIiwgXCJgXCIpO1xuICBcdFx0fSBlbHNlIGlmIChwYXJzZXIuaW5BdHRyaWJ1dGUpIHtcbiAgXHRcdFx0Ly8gcXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZVxuICBcdFx0XHRkaXNhbGxvd2VkLnB1c2gocGFyc2VyLmluQXR0cmlidXRlKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGRpc2FsbG93ZWQucHVzaChiYXJyaWVyKTtcbiAgXHRcdH1cblxuICBcdFx0aW5kZXggPSBnZXRMb3dlc3RJbmRleChyZW1haW5pbmcsIGRpc2FsbG93ZWQpO1xuICBcdH1cblxuICBcdGlmICghaW5kZXgpIHtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGlmIChpbmRleCA9PT0gLTEpIHtcbiAgXHRcdGluZGV4ID0gcmVtYWluaW5nLmxlbmd0aDtcbiAgXHR9XG5cbiAgXHRwYXJzZXIucG9zICs9IGluZGV4O1xuXG4gIFx0cmV0dXJuIHBhcnNlci5pbnNpZGUgPyByZW1haW5pbmcuc3Vic3RyKDAsIGluZGV4KSA6IGRlY29kZUNoYXJhY3RlclJlZmVyZW5jZXMocmVtYWluaW5nLnN1YnN0cigwLCBpbmRleCkpO1xuICB9XG5cbiAgdmFyIHV0aWxzX2VzY2FwZVJlZ0V4cCA9IGVzY2FwZVJlZ0V4cDtcbiAgdmFyIHV0aWxzX2VzY2FwZVJlZ0V4cF9fcGF0dGVybiA9IC9bLS9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nO1xuICBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyKSB7XG4gIFx0cmV0dXJuIHN0ci5yZXBsYWNlKHV0aWxzX2VzY2FwZVJlZ0V4cF9fcGF0dGVybiwgXCJcXFxcJCZcIik7XG4gIH1cblxuICB2YXIgY29udmVydGVyc19yZWFkUGFydGlhbERlZmluaXRpb25Db21tZW50ID0gcmVhZFBhcnRpYWxEZWZpbml0aW9uQ29tbWVudDtcblxuICB2YXIgc3RhcnRQYXR0ZXJuID0gL148IS0tXFxzKi8sXG4gICAgICBuYW1lUGF0dGVybiA9IC9zKj5cXHMqKFthLXpBLVpfJF1bLWEtekEtWl8kMC05XSopXFxzKi8sXG4gICAgICBmaW5pc2hQYXR0ZXJuID0gL1xccyotLT4vLFxuICAgICAgY2hpbGQ7XG5cbiAgZnVuY3Rpb24gcmVhZFBhcnRpYWxEZWZpbml0aW9uQ29tbWVudChwYXJzZXIpIHtcbiAgXHR2YXIgZmlyc3RQb3MgPSBwYXJzZXIucG9zLFxuICBcdCAgICBvcGVuID0gcGFyc2VyLnN0YW5kYXJkRGVsaW1pdGVyc1swXSxcbiAgXHQgICAgY2xvc2UgPSBwYXJzZXIuc3RhbmRhcmREZWxpbWl0ZXJzWzFdLFxuICBcdCAgICBjb250ZW50ID0gdW5kZWZpbmVkLFxuICBcdCAgICBjbG9zZWQgPSB1bmRlZmluZWQ7XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFBhdHRlcm4oc3RhcnRQYXR0ZXJuKSB8fCAhcGFyc2VyLm1hdGNoU3RyaW5nKG9wZW4pKSB7XG4gIFx0XHRwYXJzZXIucG9zID0gZmlyc3RQb3M7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHR2YXIgbmFtZSA9IHBhcnNlci5tYXRjaFBhdHRlcm4obmFtZVBhdHRlcm4pO1xuXG4gIFx0d2Fybk9uY2VJZkRlYnVnKFwiSW5saW5lIHBhcnRpYWwgY29tbWVudHMgYXJlIGRlcHJlY2F0ZWQuXFxuVXNlIHRoaXMuLi5cXG4gIHt7I3BhcnRpYWwgXCIgKyBuYW1lICsgXCJ9fSAuLi4ge3svcGFydGlhbH19XFxuXFxuLi4uaW5zdGVhZCBvZiB0aGlzOlxcbiAgPCEtLSB7ez5cIiArIG5hbWUgKyBcIn19IC0tPiAuLi4gPCEtLSB7ey9cIiArIG5hbWUgKyBcIn19IC0tPidcIik7XG5cbiAgXHQvLyBtYWtlIHN1cmUgdGhlIHJlc3Qgb2YgdGhlIGNvbW1lbnQgaXMgaW4gdGhlIGNvcnJlY3QgcGxhY2VcbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhjbG9zZSkgfHwgIXBhcnNlci5tYXRjaFBhdHRlcm4oZmluaXNoUGF0dGVybikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBmaXJzdFBvcztcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGNvbnRlbnQgPSBbXTtcblxuICBcdHZhciBlbmRQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl48IS0tXFxcXHMqXCIgKyB1dGlsc19lc2NhcGVSZWdFeHAob3BlbikgKyBcIlxcXFxzKlxcXFwvXFxcXHMqXCIgKyBuYW1lICsgXCJcXFxccypcIiArIHV0aWxzX2VzY2FwZVJlZ0V4cChjbG9zZSkgKyBcIlxcXFxzKi0tPlwiKTtcblxuICBcdGRvIHtcbiAgXHRcdGlmIChwYXJzZXIubWF0Y2hQYXR0ZXJuKGVuZFBhdHRlcm4pKSB7XG4gIFx0XHRcdGNsb3NlZCA9IHRydWU7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRjaGlsZCA9IHBhcnNlci5yZWFkKFJFQURFUlMpO1xuICBcdFx0XHRpZiAoIWNoaWxkKSB7XG4gIFx0XHRcdFx0cGFyc2VyLmVycm9yKFwiZXhwZWN0ZWQgY2xvc2luZyBjb21tZW50ICgnPCEtLSBcIiArIG9wZW4gKyBcIi9cIiArIG5hbWUgKyBcIlwiICsgY2xvc2UgKyBcIiAtLT4nKVwiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGNvbnRlbnQucHVzaChjaGlsZCk7XG4gIFx0XHR9XG4gIFx0fSB3aGlsZSAoIWNsb3NlZCk7XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0dDogSU5MSU5FX1BBUlRJQUwsXG4gIFx0XHRmOiBjb250ZW50LFxuICBcdFx0bjogbmFtZVxuICBcdH07XG4gIH1cblxuICB2YXIgY29udmVydGVyc19yZWFkUGFydGlhbERlZmluaXRpb25TZWN0aW9uID0gcmVhZFBhcnRpYWxEZWZpbml0aW9uU2VjdGlvbjtcbiAgdmFyIHBhcnRpYWxEZWZpbml0aW9uU2VjdGlvblBhdHRlcm4gPSAvXiNcXHMqcGFydGlhbFxccysvO1xuICBmdW5jdGlvbiByZWFkUGFydGlhbERlZmluaXRpb25TZWN0aW9uKHBhcnNlcikge1xuICBcdHZhciBzdGFydCwgbmFtZSwgY29udGVudCwgY2hpbGQsIGNsb3NlZDtcblxuICBcdHN0YXJ0ID0gcGFyc2VyLnBvcztcblxuICBcdHZhciBkZWxpbWl0ZXJzID0gcGFyc2VyLnN0YW5kYXJkRGVsaW1pdGVycztcblxuICBcdGlmICghcGFyc2VyLm1hdGNoU3RyaW5nKGRlbGltaXRlcnNbMF0pKSB7XG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFBhdHRlcm4ocGFydGlhbERlZmluaXRpb25TZWN0aW9uUGF0dGVybikpIHtcbiAgXHRcdHBhcnNlci5wb3MgPSBzdGFydDtcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdG5hbWUgPSBwYXJzZXIubWF0Y2hQYXR0ZXJuKC9eW2EtekEtWl8kXVthLXpBLVpfJDAtOVxcLV0qLyk7XG5cbiAgXHRpZiAoIW5hbWUpIHtcbiAgXHRcdHBhcnNlci5lcnJvcihcImV4cGVjdGVkIGxlZ2FsIHBhcnRpYWwgbmFtZVwiKTtcbiAgXHR9XG5cbiAgXHRpZiAoIXBhcnNlci5tYXRjaFN0cmluZyhkZWxpbWl0ZXJzWzFdKSkge1xuICBcdFx0cGFyc2VyLmVycm9yKFwiRXhwZWN0ZWQgY2xvc2luZyBkZWxpbWl0ZXIgJ1wiICsgZGVsaW1pdGVyc1sxXSArIFwiJ1wiKTtcbiAgXHR9XG5cbiAgXHRjb250ZW50ID0gW107XG5cbiAgXHRkbyB7XG4gIFx0XHQvLyBUT0RPIGNsZWFuIHRoaXMgdXBcbiAgXHRcdGlmIChjaGlsZCA9IHNlY3Rpb25fcmVhZENsb3NpbmcocGFyc2VyLCB7IG9wZW46IHBhcnNlci5zdGFuZGFyZERlbGltaXRlcnNbMF0sIGNsb3NlOiBwYXJzZXIuc3RhbmRhcmREZWxpbWl0ZXJzWzFdIH0pKSB7XG4gIFx0XHRcdGlmICghY2hpbGQuciA9PT0gXCJwYXJ0aWFsXCIpIHtcbiAgXHRcdFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBcIiArIGRlbGltaXRlcnNbMF0gKyBcIi9wYXJ0aWFsXCIgKyBkZWxpbWl0ZXJzWzFdKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGNsb3NlZCA9IHRydWU7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRjaGlsZCA9IHBhcnNlci5yZWFkKFJFQURFUlMpO1xuXG4gIFx0XHRcdGlmICghY2hpbGQpIHtcbiAgXHRcdFx0XHRwYXJzZXIuZXJyb3IoXCJFeHBlY3RlZCBcIiArIGRlbGltaXRlcnNbMF0gKyBcIi9wYXJ0aWFsXCIgKyBkZWxpbWl0ZXJzWzFdKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGNvbnRlbnQucHVzaChjaGlsZCk7XG4gIFx0XHR9XG4gIFx0fSB3aGlsZSAoIWNsb3NlZCk7XG5cbiAgXHRyZXR1cm4ge1xuICBcdFx0dDogSU5MSU5FX1BBUlRJQUwsXG4gIFx0XHRuOiBuYW1lLFxuICBcdFx0ZjogY29udGVudFxuICBcdH07XG4gIH1cblxuICB2YXIgY29udmVydGVyc19yZWFkVGVtcGxhdGUgPSByZWFkVGVtcGxhdGU7XG4gIGZ1bmN0aW9uIHJlYWRUZW1wbGF0ZShwYXJzZXIpIHtcbiAgXHR2YXIgZnJhZ21lbnQgPSBbXTtcbiAgXHR2YXIgcGFydGlhbHMgPSBjcmVhdGUobnVsbCk7XG4gIFx0dmFyIGhhc1BhcnRpYWxzID0gZmFsc2U7XG5cbiAgXHR2YXIgcHJlc2VydmVXaGl0ZXNwYWNlID0gcGFyc2VyLnByZXNlcnZlV2hpdGVzcGFjZTtcblxuICBcdHdoaWxlIChwYXJzZXIucG9zIDwgcGFyc2VyLnN0ci5sZW5ndGgpIHtcbiAgXHRcdHZhciBwb3MgPSBwYXJzZXIucG9zLFxuICBcdFx0ICAgIGl0ZW0gPSB1bmRlZmluZWQsXG4gIFx0XHQgICAgcGFydGlhbCA9IHVuZGVmaW5lZDtcblxuICBcdFx0aWYgKHBhcnRpYWwgPSBwYXJzZXIucmVhZChQQVJUSUFMX1JFQURFUlMpKSB7XG4gIFx0XHRcdGlmIChwYXJ0aWFsc1twYXJ0aWFsLm5dKSB7XG4gIFx0XHRcdFx0cGFyc2VyLnBvcyA9IHBvcztcbiAgXHRcdFx0XHRwYXJzZXIuZXJyb3IoXCJEdXBsaWNhdGVkIHBhcnRpYWwgZGVmaW5pdGlvblwiKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHV0aWxzX2NsZWFudXAocGFydGlhbC5mLCBwYXJzZXIuc3RyaXBDb21tZW50cywgcHJlc2VydmVXaGl0ZXNwYWNlLCAhcHJlc2VydmVXaGl0ZXNwYWNlLCAhcHJlc2VydmVXaGl0ZXNwYWNlKTtcblxuICBcdFx0XHRwYXJ0aWFsc1twYXJ0aWFsLm5dID0gcGFydGlhbC5mO1xuICBcdFx0XHRoYXNQYXJ0aWFscyA9IHRydWU7XG4gIFx0XHR9IGVsc2UgaWYgKGl0ZW0gPSBwYXJzZXIucmVhZChSRUFERVJTKSkge1xuICBcdFx0XHRmcmFnbWVudC5wdXNoKGl0ZW0pO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cGFyc2VyLmVycm9yKFwiVW5leHBlY3RlZCB0ZW1wbGF0ZSBjb250ZW50XCIpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHZhciByZXN1bHQgPSB7XG4gIFx0XHR2OiBURU1QTEFURV9WRVJTSU9OLFxuICBcdFx0dDogZnJhZ21lbnRcbiAgXHR9O1xuXG4gIFx0aWYgKGhhc1BhcnRpYWxzKSB7XG4gIFx0XHRyZXN1bHQucCA9IHBhcnRpYWxzO1xuICBcdH1cblxuICBcdHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgX3BhcnNlID0gcGFyc2U7XG5cbiAgdmFyIFNUQU5EQVJEX1JFQURFUlMgPSBbbXVzdGFjaGVfcmVhZFBhcnRpYWwsIG11c3RhY2hlX3JlYWRVbmVzY2FwZWQsIG11c3RhY2hlX3JlYWRTZWN0aW9uLCBtdXN0YWNoZV9yZWFkWWllbGRlciwgbXVzdGFjaGVfcmVhZEludGVycG9sYXRvciwgcmVhZE11c3RhY2hlQ29tbWVudF07XG4gIHZhciBUUklQTEVfUkVBREVSUyA9IFttdXN0YWNoZV9yZWFkVHJpcGxlXTtcbiAgdmFyIFNUQVRJQ19SRUFERVJTID0gW211c3RhY2hlX3JlYWRVbmVzY2FwZWQsIG11c3RhY2hlX3JlYWRTZWN0aW9uLCBtdXN0YWNoZV9yZWFkSW50ZXJwb2xhdG9yXTsgLy8gVE9ETyBkb2VzIGl0IG1ha2Ugc2Vuc2UgdG8gaGF2ZSBhIHN0YXRpYyBzZWN0aW9uP1xuXG4gIHZhciBTdGFuZGFyZFBhcnNlciA9IHVuZGVmaW5lZDtcbiAgZnVuY3Rpb24gcGFyc2UodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgXHRyZXR1cm4gbmV3IFN0YW5kYXJkUGFyc2VyKHRlbXBsYXRlLCBvcHRpb25zIHx8IHt9KS5yZXN1bHQ7XG4gIH1cblxuICB2YXIgUkVBREVSUyA9IFtjb252ZXJ0ZXJzX3JlYWRNdXN0YWNoZSwgY29udmVydGVyc19yZWFkSHRtbENvbW1lbnQsIGNvbnZlcnRlcnNfcmVhZEVsZW1lbnQsIGNvbnZlcnRlcnNfcmVhZFRleHRdO1xuICB2YXIgUEFSVElBTF9SRUFERVJTID0gW2NvbnZlcnRlcnNfcmVhZFBhcnRpYWxEZWZpbml0aW9uQ29tbWVudCwgY29udmVydGVyc19yZWFkUGFydGlhbERlZmluaXRpb25TZWN0aW9uXTtcblxuICBTdGFuZGFyZFBhcnNlciA9IHBhcnNlX1BhcnNlci5leHRlbmQoe1xuICBcdGluaXQ6IGZ1bmN0aW9uIChzdHIsIG9wdGlvbnMpIHtcbiAgXHRcdHZhciB0cmlwbGVEZWxpbWl0ZXJzID0gb3B0aW9ucy50cmlwbGVEZWxpbWl0ZXJzIHx8IFtcInt7e1wiLCBcIn19fVwiXSxcbiAgXHRcdCAgICBzdGF0aWNEZWxpbWl0ZXJzID0gb3B0aW9ucy5zdGF0aWNEZWxpbWl0ZXJzIHx8IFtcIltbXCIsIFwiXV1cIl0sXG4gIFx0XHQgICAgc3RhdGljVHJpcGxlRGVsaW1pdGVycyA9IG9wdGlvbnMuc3RhdGljVHJpcGxlRGVsaW1pdGVycyB8fCBbXCJbW1tcIiwgXCJdXV1cIl07XG5cbiAgXHRcdHRoaXMuc3RhbmRhcmREZWxpbWl0ZXJzID0gb3B0aW9ucy5kZWxpbWl0ZXJzIHx8IFtcInt7XCIsIFwifX1cIl07XG5cbiAgXHRcdHRoaXMudGFncyA9IFt7IGlzU3RhdGljOiBmYWxzZSwgaXNUcmlwbGU6IGZhbHNlLCBvcGVuOiB0aGlzLnN0YW5kYXJkRGVsaW1pdGVyc1swXSwgY2xvc2U6IHRoaXMuc3RhbmRhcmREZWxpbWl0ZXJzWzFdLCByZWFkZXJzOiBTVEFOREFSRF9SRUFERVJTIH0sIHsgaXNTdGF0aWM6IGZhbHNlLCBpc1RyaXBsZTogdHJ1ZSwgb3BlbjogdHJpcGxlRGVsaW1pdGVyc1swXSwgY2xvc2U6IHRyaXBsZURlbGltaXRlcnNbMV0sIHJlYWRlcnM6IFRSSVBMRV9SRUFERVJTIH0sIHsgaXNTdGF0aWM6IHRydWUsIGlzVHJpcGxlOiBmYWxzZSwgb3Blbjogc3RhdGljRGVsaW1pdGVyc1swXSwgY2xvc2U6IHN0YXRpY0RlbGltaXRlcnNbMV0sIHJlYWRlcnM6IFNUQVRJQ19SRUFERVJTIH0sIHsgaXNTdGF0aWM6IHRydWUsIGlzVHJpcGxlOiB0cnVlLCBvcGVuOiBzdGF0aWNUcmlwbGVEZWxpbWl0ZXJzWzBdLCBjbG9zZTogc3RhdGljVHJpcGxlRGVsaW1pdGVyc1sxXSwgcmVhZGVyczogVFJJUExFX1JFQURFUlMgfV07XG5cbiAgXHRcdHRoaXMuc29ydE11c3RhY2hlVGFncygpO1xuXG4gIFx0XHR0aGlzLnNlY3Rpb25EZXB0aCA9IDA7XG4gIFx0XHR0aGlzLmVsZW1lbnRTdGFjayA9IFtdO1xuXG4gIFx0XHR0aGlzLmludGVycG9sYXRlID0ge1xuICBcdFx0XHRzY3JpcHQ6ICFvcHRpb25zLmludGVycG9sYXRlIHx8IG9wdGlvbnMuaW50ZXJwb2xhdGUuc2NyaXB0ICE9PSBmYWxzZSxcbiAgXHRcdFx0c3R5bGU6ICFvcHRpb25zLmludGVycG9sYXRlIHx8IG9wdGlvbnMuaW50ZXJwb2xhdGUuc3R5bGUgIT09IGZhbHNlXG4gIFx0XHR9O1xuXG4gIFx0XHRpZiAob3B0aW9ucy5zYW5pdGl6ZSA9PT0gdHJ1ZSkge1xuICBcdFx0XHRvcHRpb25zLnNhbml0aXplID0ge1xuICBcdFx0XHRcdC8vIGJsYWNrbGlzdCBmcm9tIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWNhamEvc291cmNlL2Jyb3dzZS90cnVuay9zcmMvY29tL2dvb2dsZS9jYWphL2xhbmcvaHRtbC9odG1sNC1lbGVtZW50cy13aGl0ZWxpc3QuanNvblxuICBcdFx0XHRcdGVsZW1lbnRzOiBcImFwcGxldCBiYXNlIGJhc2Vmb250IGJvZHkgZnJhbWUgZnJhbWVzZXQgaGVhZCBodG1sIGlzaW5kZXggbGluayBtZXRhIG5vZnJhbWVzIG5vc2NyaXB0IG9iamVjdCBwYXJhbSBzY3JpcHQgc3R5bGUgdGl0bGVcIi5zcGxpdChcIiBcIiksXG4gIFx0XHRcdFx0ZXZlbnRBdHRyaWJ1dGVzOiB0cnVlXG4gIFx0XHRcdH07XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMuc3RyaXBDb21tZW50cyA9IG9wdGlvbnMuc3RyaXBDb21tZW50cyAhPT0gZmFsc2U7XG4gIFx0XHR0aGlzLnByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlO1xuICBcdFx0dGhpcy5zYW5pdGl6ZUVsZW1lbnRzID0gb3B0aW9ucy5zYW5pdGl6ZSAmJiBvcHRpb25zLnNhbml0aXplLmVsZW1lbnRzO1xuICBcdFx0dGhpcy5zYW5pdGl6ZUV2ZW50QXR0cmlidXRlcyA9IG9wdGlvbnMuc2FuaXRpemUgJiYgb3B0aW9ucy5zYW5pdGl6ZS5ldmVudEF0dHJpYnV0ZXM7XG4gIFx0XHR0aGlzLmluY2x1ZGVMaW5lUG9zaXRpb25zID0gb3B0aW9ucy5pbmNsdWRlTGluZVBvc2l0aW9ucztcbiAgXHR9LFxuXG4gIFx0cG9zdFByb2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgXHRcdC8vIHNwZWNpYWwgY2FzZSAtIGVtcHR5IHN0cmluZ1xuICBcdFx0aWYgKCFyZXN1bHQubGVuZ3RoKSB7XG4gIFx0XHRcdHJldHVybiB7IHQ6IFtdLCB2OiBURU1QTEFURV9WRVJTSU9OIH07XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh0aGlzLnNlY3Rpb25EZXB0aCA+IDApIHtcbiAgXHRcdFx0dGhpcy5lcnJvcihcIkEgc2VjdGlvbiB3YXMgbGVmdCBvcGVuXCIpO1xuICBcdFx0fVxuXG4gIFx0XHR1dGlsc19jbGVhbnVwKHJlc3VsdFswXS50LCB0aGlzLnN0cmlwQ29tbWVudHMsIHRoaXMucHJlc2VydmVXaGl0ZXNwYWNlLCAhdGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UsICF0aGlzLnByZXNlcnZlV2hpdGVzcGFjZSk7XG5cbiAgXHRcdHJldHVybiByZXN1bHRbMF07XG4gIFx0fSxcblxuICBcdGNvbnZlcnRlcnM6IFtjb252ZXJ0ZXJzX3JlYWRUZW1wbGF0ZV0sXG5cbiAgXHRzb3J0TXVzdGFjaGVUYWdzOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHQvLyBTb3J0IGluIG9yZGVyIG9mIGRlc2NlbmRpbmcgb3BlbmluZyBkZWxpbWl0ZXIgbGVuZ3RoIChsb25nZXIgZmlyc3QpLFxuICBcdFx0Ly8gdG8gcHJvdGVjdCBhZ2FpbnN0IG9wZW5pbmcgZGVsaW1pdGVycyBiZWluZyBzdWJzdHJpbmdzIG9mIGVhY2ggb3RoZXJcbiAgXHRcdHRoaXMudGFncy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gIFx0XHRcdHJldHVybiBiLm9wZW4ubGVuZ3RoIC0gYS5vcGVuLmxlbmd0aDtcbiAgXHRcdH0pO1xuICBcdH1cbiAgfSk7XG5cbiAgdmFyIHBhcnNlT3B0aW9ucyA9IFtcInByZXNlcnZlV2hpdGVzcGFjZVwiLCBcInNhbml0aXplXCIsIFwic3RyaXBDb21tZW50c1wiLCBcImRlbGltaXRlcnNcIiwgXCJ0cmlwbGVEZWxpbWl0ZXJzXCIsIFwiaW50ZXJwb2xhdGVcIl07XG5cbiAgdmFyIHBhcnNlciA9IHtcbiAgXHRmcm9tSWQ6IGZyb21JZCwgaXNIYXNoZWRJZDogaXNIYXNoZWRJZCwgaXNQYXJzZWQ6IGlzUGFyc2VkLCBnZXRQYXJzZU9wdGlvbnM6IGdldFBhcnNlT3B0aW9ucywgY3JlYXRlSGVscGVyOiB0ZW1wbGF0ZV9wYXJzZXJfX2NyZWF0ZUhlbHBlcixcbiAgXHRwYXJzZTogZG9QYXJzZVxuICB9O1xuXG4gIGZ1bmN0aW9uIHRlbXBsYXRlX3BhcnNlcl9fY3JlYXRlSGVscGVyKHBhcnNlT3B0aW9ucykge1xuICBcdHZhciBoZWxwZXIgPSBjcmVhdGUocGFyc2VyKTtcbiAgXHRoZWxwZXIucGFyc2UgPSBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgXHRcdHJldHVybiBkb1BhcnNlKHRlbXBsYXRlLCBvcHRpb25zIHx8IHBhcnNlT3B0aW9ucyk7XG4gIFx0fTtcbiAgXHRyZXR1cm4gaGVscGVyO1xuICB9XG5cbiAgZnVuY3Rpb24gZG9QYXJzZSh0ZW1wbGF0ZSwgcGFyc2VPcHRpb25zKSB7XG4gIFx0aWYgKCFfcGFyc2UpIHtcbiAgXHRcdHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgUmFjdGl2ZS5wYXJzZSAtIGNhbm5vdCBwYXJzZSB0ZW1wbGF0ZS4gRWl0aGVyIHByZXBhcnNlIG9yIHVzZSB0aGUgdmVyc2lvbiB0aGF0IGluY2x1ZGVzIHRoZSBwYXJzZXJcIik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIF9wYXJzZSh0ZW1wbGF0ZSwgcGFyc2VPcHRpb25zIHx8IHRoaXMub3B0aW9ucyk7XG4gIH1cblxuICBmdW5jdGlvbiBmcm9tSWQoaWQsIG9wdGlvbnMpIHtcbiAgXHR2YXIgdGVtcGxhdGU7XG5cbiAgXHRpZiAoIWlzQ2xpZW50KSB7XG4gIFx0XHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLm5vVGhyb3cpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJldHJpZXZlIHRlbXBsYXRlICNcIiArIGlkICsgXCIgYXMgUmFjdGl2ZSBpcyBub3QgcnVubmluZyBpbiBhIGJyb3dzZXIuXCIpO1xuICBcdH1cblxuICBcdGlmIChpc0hhc2hlZElkKGlkKSkge1xuICBcdFx0aWQgPSBpZC5zdWJzdHJpbmcoMSk7XG4gIFx0fVxuXG4gIFx0aWYgKCEodGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpKSB7XG4gIFx0XHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLm5vVGhyb3cpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgdGVtcGxhdGUgZWxlbWVudCB3aXRoIGlkICNcIiArIGlkKTtcbiAgXHR9XG5cbiAgXHRpZiAodGVtcGxhdGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIlNDUklQVFwiKSB7XG4gIFx0XHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLm5vVGhyb3cpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVtcGxhdGUgZWxlbWVudCB3aXRoIGlkICNcIiArIGlkICsgXCIsIG11c3QgYmUgYSA8c2NyaXB0PiBlbGVtZW50XCIpO1xuICBcdH1cblxuICBcdHJldHVybiBcInRleHRDb250ZW50XCIgaW4gdGVtcGxhdGUgPyB0ZW1wbGF0ZS50ZXh0Q29udGVudCA6IHRlbXBsYXRlLmlubmVySFRNTDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSGFzaGVkSWQoaWQpIHtcbiAgXHRyZXR1cm4gaWQgJiYgaWRbMF0gPT09IFwiI1wiO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNQYXJzZWQodGVtcGxhdGUpIHtcbiAgXHRyZXR1cm4gISh0eXBlb2YgdGVtcGxhdGUgPT09IFwic3RyaW5nXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGFyc2VPcHRpb25zKHJhY3RpdmUpIHtcbiAgXHQvLyBDb3VsZCBiZSBSYWN0aXZlIG9yIGEgQ29tcG9uZW50XG4gIFx0aWYgKHJhY3RpdmUuZGVmYXVsdHMpIHtcbiAgXHRcdHJhY3RpdmUgPSByYWN0aXZlLmRlZmF1bHRzO1xuICBcdH1cblxuICBcdHJldHVybiBwYXJzZU9wdGlvbnMucmVkdWNlKGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICBcdFx0dmFsW2tleV0gPSByYWN0aXZlW2tleV07XG4gIFx0XHRyZXR1cm4gdmFsO1xuICBcdH0sIHt9KTtcbiAgfVxuXG4gIHZhciB0ZW1wbGF0ZV9wYXJzZXIgPSBwYXJzZXI7XG5cbiAgdmFyIHRlbXBsYXRlQ29uZmlndXJhdG9yID0ge1xuICBcdG5hbWU6IFwidGVtcGxhdGVcIixcblxuICBcdGV4dGVuZDogZnVuY3Rpb24gZXh0ZW5kKFBhcmVudCwgcHJvdG8sIG9wdGlvbnMpIHtcbiAgXHRcdHZhciB0ZW1wbGF0ZTtcblxuICBcdFx0Ly8gb25seSBhc3NpZ24gaWYgZXhpc3RzXG4gIFx0XHRpZiAoXCJ0ZW1wbGF0ZVwiIGluIG9wdGlvbnMpIHtcbiAgXHRcdFx0dGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuXG4gIFx0XHRcdGlmICh0eXBlb2YgdGVtcGxhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRcdHByb3RvLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0cHJvdG8udGVtcGxhdGUgPSBwYXJzZUlmU3RyaW5nKHRlbXBsYXRlLCBwcm90byk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0aW5pdDogZnVuY3Rpb24gaW5pdChQYXJlbnQsIHJhY3RpdmUsIG9wdGlvbnMpIHtcbiAgXHRcdHZhciB0ZW1wbGF0ZSwgZm47XG5cbiAgXHRcdC8vIFRPRE8gYmVjYXVzZSBvZiBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB3ZSBtaWdodCBqdXN0IGJlIGFibGUgdG8gdXNlXG4gIFx0XHQvLyByYWN0aXZlLnRlbXBsYXRlLCBhbmQgbm90IGJvdGhlciBwYXNzaW5nIHRocm91Z2ggdGhlIFBhcmVudCBvYmplY3QuXG4gIFx0XHQvLyBBdCBwcmVzZW50IHRoYXQgYnJlYWtzIHRoZSB0ZXN0IG1vY2tzJyBleHBlY3RhdGlvbnNcbiAgXHRcdHRlbXBsYXRlID0gXCJ0ZW1wbGF0ZVwiIGluIG9wdGlvbnMgPyBvcHRpb25zLnRlbXBsYXRlIDogUGFyZW50LnByb3RvdHlwZS50ZW1wbGF0ZTtcblxuICBcdFx0aWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRcdGZuID0gdGVtcGxhdGU7XG4gIFx0XHRcdHRlbXBsYXRlID0gZ2V0RHluYW1pY1RlbXBsYXRlKHJhY3RpdmUsIGZuKTtcblxuICBcdFx0XHRyYWN0aXZlLl9jb25maWcudGVtcGxhdGUgPSB7XG4gIFx0XHRcdFx0Zm46IGZuLFxuICBcdFx0XHRcdHJlc3VsdDogdGVtcGxhdGVcbiAgXHRcdFx0fTtcbiAgXHRcdH1cblxuICBcdFx0dGVtcGxhdGUgPSBwYXJzZUlmU3RyaW5nKHRlbXBsYXRlLCByYWN0aXZlKTtcblxuICBcdFx0Ly8gVE9ETyB0aGUgbmFtaW5nIG9mIHRoaXMgaXMgY29uZnVzaW5nIC0gcmFjdGl2ZS50ZW1wbGF0ZSByZWZlcnMgdG8gWy4uLl0sXG4gIFx0XHQvLyBidXQgQ29tcG9uZW50LnByb3RvdHlwZS50ZW1wbGF0ZSByZWZlcnMgdG8ge3Y6MSx0OltdLHA6W119Li4uXG4gIFx0XHQvLyBpdCdzIHVubmVjZXNzYXJ5LCBiZWNhdXNlIHRoZSBkZXZlbG9wZXIgbmV2ZXIgbmVlZHMgdG8gYWNjZXNzXG4gIFx0XHQvLyByYWN0aXZlLnRlbXBsYXRlXG4gIFx0XHRyYWN0aXZlLnRlbXBsYXRlID0gdGVtcGxhdGUudDtcblxuICBcdFx0aWYgKHRlbXBsYXRlLnApIHtcbiAgXHRcdFx0ZXh0ZW5kUGFydGlhbHMocmFjdGl2ZS5wYXJ0aWFscywgdGVtcGxhdGUucCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHJlc2V0OiBmdW5jdGlvbiAocmFjdGl2ZSkge1xuICBcdFx0dmFyIHJlc3VsdCA9IHJlc2V0VmFsdWUocmFjdGl2ZSksXG4gIFx0XHQgICAgcGFyc2VkO1xuXG4gIFx0XHRpZiAocmVzdWx0KSB7XG4gIFx0XHRcdHBhcnNlZCA9IHBhcnNlSWZTdHJpbmcocmVzdWx0LCByYWN0aXZlKTtcblxuICBcdFx0XHRyYWN0aXZlLnRlbXBsYXRlID0gcGFyc2VkLnQ7XG4gIFx0XHRcdGV4dGVuZFBhcnRpYWxzKHJhY3RpdmUucGFydGlhbHMsIHBhcnNlZC5wLCB0cnVlKTtcblxuICBcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVzZXRWYWx1ZShyYWN0aXZlKSB7XG4gIFx0dmFyIGluaXRpYWwgPSByYWN0aXZlLl9jb25maWcudGVtcGxhdGUsXG4gIFx0ICAgIHJlc3VsdDtcblxuICBcdC8vIElmIHRoaXMgaXNuJ3QgYSBkeW5hbWljIHRlbXBsYXRlLCB0aGVyZSdzIG5vdGhpbmcgdG8gZG9cbiAgXHRpZiAoIWluaXRpYWwgfHwgIWluaXRpYWwuZm4pIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRyZXN1bHQgPSBnZXREeW5hbWljVGVtcGxhdGUocmFjdGl2ZSwgaW5pdGlhbC5mbik7XG5cbiAgXHQvLyBUT0RPIGRlZXAgZXF1YWxpdHkgY2hlY2sgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJpbmdcbiAgXHQvLyBpbiB0aGUgY2FzZSBvZiBhbHJlYWR5LXBhcnNlZCB0ZW1wbGF0ZXNcbiAgXHRpZiAocmVzdWx0ICE9PSBpbml0aWFsLnJlc3VsdCkge1xuICBcdFx0aW5pdGlhbC5yZXN1bHQgPSByZXN1bHQ7XG4gIFx0XHRyZXN1bHQgPSBwYXJzZUlmU3RyaW5nKHJlc3VsdCwgcmFjdGl2ZSk7XG4gIFx0XHRyZXR1cm4gcmVzdWx0O1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldER5bmFtaWNUZW1wbGF0ZShyYWN0aXZlLCBmbikge1xuICBcdHZhciBoZWxwZXIgPSB0ZW1wbGF0ZV90ZW1wbGF0ZV9fY3JlYXRlSGVscGVyKHRlbXBsYXRlX3BhcnNlci5nZXRQYXJzZU9wdGlvbnMocmFjdGl2ZSkpO1xuICBcdHJldHVybiBmbi5jYWxsKHJhY3RpdmUsIGhlbHBlcik7XG4gIH1cblxuICBmdW5jdGlvbiB0ZW1wbGF0ZV90ZW1wbGF0ZV9fY3JlYXRlSGVscGVyKHBhcnNlT3B0aW9ucykge1xuICBcdHZhciBoZWxwZXIgPSBjcmVhdGUodGVtcGxhdGVfcGFyc2VyKTtcbiAgXHRoZWxwZXIucGFyc2UgPSBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgXHRcdHJldHVybiB0ZW1wbGF0ZV9wYXJzZXIucGFyc2UodGVtcGxhdGUsIG9wdGlvbnMgfHwgcGFyc2VPcHRpb25zKTtcbiAgXHR9O1xuICBcdHJldHVybiBoZWxwZXI7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUlmU3RyaW5nKHRlbXBsYXRlLCByYWN0aXZlKSB7XG4gIFx0aWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0Ly8gSUQgb2YgYW4gZWxlbWVudCBjb250YWluaW5nIHRoZSB0ZW1wbGF0ZT9cbiAgXHRcdGlmICh0ZW1wbGF0ZVswXSA9PT0gXCIjXCIpIHtcbiAgXHRcdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZV9wYXJzZXIuZnJvbUlkKHRlbXBsYXRlKTtcbiAgXHRcdH1cblxuICBcdFx0dGVtcGxhdGUgPSBfcGFyc2UodGVtcGxhdGUsIHRlbXBsYXRlX3BhcnNlci5nZXRQYXJzZU9wdGlvbnMocmFjdGl2ZSkpO1xuICBcdH1cblxuICBcdC8vIENoZWNrIHRoYXQgdGhlIHRlbXBsYXRlIGV2ZW4gZXhpc3RzXG4gIFx0ZWxzZSBpZiAodGVtcGxhdGUgPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdGVtcGxhdGUgY2Fubm90IGJlIFwiICsgdGVtcGxhdGUgKyBcIi5cIik7XG4gIFx0fVxuXG4gIFx0Ly8gQ2hlY2sgdGhlIHBhcnNlZCB0ZW1wbGF0ZSBoYXMgYSB2ZXJzaW9uIGF0IGFsbFxuICBcdGVsc2UgaWYgKHR5cGVvZiB0ZW1wbGF0ZS52ICE9PSBcIm51bWJlclwiKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdGVtcGxhdGUgcGFyc2VyIHdhcyBwYXNzZWQgYSBub24tc3RyaW5nIHRlbXBsYXRlLCBidXQgdGhlIHRlbXBsYXRlIGRvZXNuJ3QgaGF2ZSBhIHZlcnNpb24uICBNYWtlIHN1cmUgeW91J3JlIHBhc3NpbmcgaW4gdGhlIHRlbXBsYXRlIHlvdSB0aGluayB5b3UgYXJlLlwiKTtcbiAgXHR9XG5cbiAgXHQvLyBDaGVjayB3ZSdyZSB1c2luZyB0aGUgY29ycmVjdCB2ZXJzaW9uXG4gIFx0ZWxzZSBpZiAodGVtcGxhdGUudiAhPT0gVEVNUExBVEVfVkVSU0lPTikge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCB0ZW1wbGF0ZSB2ZXJzaW9uIChleHBlY3RlZCBcIiArIFRFTVBMQVRFX1ZFUlNJT04gKyBcIiwgZ290IFwiICsgdGVtcGxhdGUudiArIFwiKSBQbGVhc2UgZW5zdXJlIHlvdSBhcmUgdXNpbmcgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIFJhY3RpdmUuanMgaW4geW91ciBidWlsZCBwcm9jZXNzIGFzIHdlbGwgYXMgaW4geW91ciBhcHBcIik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRlbXBsYXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0ZW5kUGFydGlhbHMoZXhpc3RpbmdQYXJ0aWFscywgbmV3UGFydGlhbHMsIG92ZXJ3cml0ZSkge1xuICBcdGlmICghbmV3UGFydGlhbHMpIHJldHVybjtcblxuICBcdC8vIFRPRE8gdGhlcmUncyBhbiBhbWJpZ3VpdHkgaGVyZSAtIHdlIG5lZWQgdG8gb3ZlcndyaXRlIGluIHRoZSBgcmVzZXQoKWBcbiAgXHQvLyBjYXNlLCBidXQgbm90IGluaXRpYWxseS4uLlxuXG4gIFx0Zm9yICh2YXIga2V5IGluIG5ld1BhcnRpYWxzKSB7XG4gIFx0XHRpZiAob3ZlcndyaXRlIHx8ICFleGlzdGluZ1BhcnRpYWxzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgXHRcdFx0ZXhpc3RpbmdQYXJ0aWFsc1trZXldID0gbmV3UGFydGlhbHNba2V5XTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgdGVtcGxhdGVfdGVtcGxhdGUgPSB0ZW1wbGF0ZUNvbmZpZ3VyYXRvcjtcblxuICB2YXIgY29uZmlnX3JlZ2lzdHJpZXNfX3JlZ2lzdHJ5TmFtZXMsIFJlZ2lzdHJ5LCByZWdpc3RyaWVzO1xuXG4gIGNvbmZpZ19yZWdpc3RyaWVzX19yZWdpc3RyeU5hbWVzID0gW1wiYWRhcHRvcnNcIiwgXCJjb21wb25lbnRzXCIsIFwiY29tcHV0ZWRcIiwgXCJkZWNvcmF0b3JzXCIsIFwiZWFzaW5nXCIsIFwiZXZlbnRzXCIsIFwiaW50ZXJwb2xhdG9yc1wiLCBcInBhcnRpYWxzXCIsIFwidHJhbnNpdGlvbnNcIl07XG5cbiAgUmVnaXN0cnkgPSBmdW5jdGlvbiAobmFtZSwgdXNlRGVmYXVsdHMpIHtcbiAgXHR0aGlzLm5hbWUgPSBuYW1lO1xuICBcdHRoaXMudXNlRGVmYXVsdHMgPSB1c2VEZWZhdWx0cztcbiAgfTtcblxuICBSZWdpc3RyeS5wcm90b3R5cGUgPSB7XG4gIFx0Y29uc3RydWN0b3I6IFJlZ2lzdHJ5LFxuXG4gIFx0ZXh0ZW5kOiBmdW5jdGlvbiAoUGFyZW50LCBwcm90bywgb3B0aW9ucykge1xuICBcdFx0dGhpcy5jb25maWd1cmUodGhpcy51c2VEZWZhdWx0cyA/IFBhcmVudC5kZWZhdWx0cyA6IFBhcmVudCwgdGhpcy51c2VEZWZhdWx0cyA/IHByb3RvIDogcHJvdG8uY29uc3RydWN0b3IsIG9wdGlvbnMpO1xuICBcdH0sXG5cbiAgXHRpbml0OiBmdW5jdGlvbiAoKSB7fSxcblxuICBcdGNvbmZpZ3VyZTogZnVuY3Rpb24gKFBhcmVudCwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gIFx0XHR2YXIgbmFtZSA9IHRoaXMubmFtZSxcbiAgXHRcdCAgICBvcHRpb24gPSBvcHRpb25zW25hbWVdLFxuICBcdFx0ICAgIHJlZ2lzdHJ5O1xuXG4gIFx0XHRyZWdpc3RyeSA9IGNyZWF0ZShQYXJlbnRbbmFtZV0pO1xuXG4gIFx0XHRmb3IgKHZhciBrZXkgaW4gb3B0aW9uKSB7XG4gIFx0XHRcdHJlZ2lzdHJ5W2tleV0gPSBvcHRpb25ba2V5XTtcbiAgXHRcdH1cblxuICBcdFx0dGFyZ2V0W25hbWVdID0gcmVnaXN0cnk7XG4gIFx0fSxcblxuICBcdHJlc2V0OiBmdW5jdGlvbiAocmFjdGl2ZSkge1xuICBcdFx0dmFyIHJlZ2lzdHJ5ID0gcmFjdGl2ZVt0aGlzLm5hbWVdO1xuICBcdFx0dmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgXHRcdE9iamVjdC5rZXlzKHJlZ2lzdHJ5KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgXHRcdFx0dmFyIGl0ZW0gPSByZWdpc3RyeVtrZXldO1xuICBcdFx0XHRpZiAoaXRlbS5fZm4pIHtcbiAgXHRcdFx0XHRpZiAoaXRlbS5fZm4uaXNPd25lcikge1xuICBcdFx0XHRcdFx0cmVnaXN0cnlba2V5XSA9IGl0ZW0uX2ZuO1xuICBcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRkZWxldGUgcmVnaXN0cnlba2V5XTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG4gIFx0XHRcdH1cbiAgXHRcdH0pO1xuICBcdFx0cmV0dXJuIGNoYW5nZWQ7XG4gIFx0fVxuICB9O1xuXG4gIHJlZ2lzdHJpZXMgPSBjb25maWdfcmVnaXN0cmllc19fcmVnaXN0cnlOYW1lcy5tYXAoZnVuY3Rpb24gKG5hbWUpIHtcbiAgXHRyZXR1cm4gbmV3IFJlZ2lzdHJ5KG5hbWUsIG5hbWUgPT09IFwiY29tcHV0ZWRcIik7XG4gIH0pO1xuXG4gIHZhciBjb25maWdfcmVnaXN0cmllcyA9IHJlZ2lzdHJpZXM7XG5cbiAgLyp0aGlzLmNvbmZpZ3VyZShcbiAgXHR0aGlzLnVzZURlZmF1bHRzID8gUGFyZW50LmRlZmF1bHRzIDogUGFyZW50LFxuICBcdHJhY3RpdmUsXG4gIFx0b3B0aW9ucyApOyovXG5cbiAgdmFyIHdyYXBQcm90b3R5cGUgPSB3cmFwO1xuXG4gIGZ1bmN0aW9uIHdyYXAocGFyZW50LCBuYW1lLCBtZXRob2QpIHtcbiAgXHRpZiAoIS9fc3VwZXIvLnRlc3QobWV0aG9kKSkge1xuICBcdFx0cmV0dXJuIG1ldGhvZDtcbiAgXHR9XG5cbiAgXHR2YXIgd3JhcHBlciA9IGZ1bmN0aW9uIHdyYXBTdXBlcigpIHtcbiAgXHRcdHZhciBzdXBlck1ldGhvZCA9IGdldFN1cGVyTWV0aG9kKHdyYXBwZXIuX3BhcmVudCwgbmFtZSksXG4gIFx0XHQgICAgaGFzU3VwZXIgPSAoXCJfc3VwZXJcIiBpbiB0aGlzKSxcbiAgXHRcdCAgICBvbGRTdXBlciA9IHRoaXMuX3N1cGVyLFxuICBcdFx0ICAgIHJlc3VsdDtcblxuICBcdFx0dGhpcy5fc3VwZXIgPSBzdXBlck1ldGhvZDtcblxuICBcdFx0cmVzdWx0ID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgXHRcdGlmIChoYXNTdXBlcikge1xuICBcdFx0XHR0aGlzLl9zdXBlciA9IG9sZFN1cGVyO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0ZGVsZXRlIHRoaXMuX3N1cGVyO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gcmVzdWx0O1xuICBcdH07XG5cbiAgXHR3cmFwcGVyLl9wYXJlbnQgPSBwYXJlbnQ7XG4gIFx0d3JhcHBlci5fbWV0aG9kID0gbWV0aG9kO1xuXG4gIFx0cmV0dXJuIHdyYXBwZXI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdXBlck1ldGhvZChwYXJlbnQsIG5hbWUpIHtcbiAgXHR2YXIgdmFsdWUsIG1ldGhvZDtcblxuICBcdGlmIChuYW1lIGluIHBhcmVudCkge1xuICBcdFx0dmFsdWUgPSBwYXJlbnRbbmFtZV07XG5cbiAgXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRtZXRob2QgPSB2YWx1ZTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdG1ldGhvZCA9IGZ1bmN0aW9uIHJldHVyblZhbHVlKCkge1xuICBcdFx0XHRcdHJldHVybiB2YWx1ZTtcbiAgXHRcdFx0fTtcbiAgXHRcdH1cbiAgXHR9IGVsc2Uge1xuICBcdFx0bWV0aG9kID0gbm9vcDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbWV0aG9kO1xuICB9XG5cbiAgdmFyIGNvbmZpZ19kZXByZWNhdGUgPSBkZXByZWNhdGU7XG4gIGZ1bmN0aW9uIGdldE1lc3NhZ2UoZGVwcmVjYXRlZCwgY29ycmVjdCwgaXNFcnJvcikge1xuICBcdHJldHVybiBcIm9wdGlvbnMuXCIgKyBkZXByZWNhdGVkICsgXCIgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiBmYXZvdXIgb2Ygb3B0aW9ucy5cIiArIGNvcnJlY3QgKyBcIi5cIiArIChpc0Vycm9yID8gXCIgWW91IGNhbm5vdCBzcGVjaWZ5IGJvdGggb3B0aW9ucywgcGxlYXNlIHVzZSBvcHRpb25zLlwiICsgY29ycmVjdCArIFwiLlwiIDogXCJcIik7XG4gIH1cblxuICBmdW5jdGlvbiBkZXByZWNhdGVPcHRpb24ob3B0aW9ucywgZGVwcmVjYXRlZE9wdGlvbiwgY29ycmVjdCkge1xuICBcdGlmIChkZXByZWNhdGVkT3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgXHRcdGlmICghKGNvcnJlY3QgaW4gb3B0aW9ucykpIHtcbiAgXHRcdFx0d2FybklmRGVidWcoZ2V0TWVzc2FnZShkZXByZWNhdGVkT3B0aW9uLCBjb3JyZWN0KSk7XG4gIFx0XHRcdG9wdGlvbnNbY29ycmVjdF0gPSBvcHRpb25zW2RlcHJlY2F0ZWRPcHRpb25dO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dGhyb3cgbmV3IEVycm9yKGdldE1lc3NhZ2UoZGVwcmVjYXRlZE9wdGlvbiwgY29ycmVjdCwgdHJ1ZSkpO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuICBmdW5jdGlvbiBkZXByZWNhdGUob3B0aW9ucykge1xuICBcdGRlcHJlY2F0ZU9wdGlvbihvcHRpb25zLCBcImJlZm9yZUluaXRcIiwgXCJvbmNvbnN0cnVjdFwiKTtcbiAgXHRkZXByZWNhdGVPcHRpb24ob3B0aW9ucywgXCJpbml0XCIsIFwib25yZW5kZXJcIik7XG4gIFx0ZGVwcmVjYXRlT3B0aW9uKG9wdGlvbnMsIFwiY29tcGxldGVcIiwgXCJvbmNvbXBsZXRlXCIpO1xuICBcdGRlcHJlY2F0ZU9wdGlvbihvcHRpb25zLCBcImV2ZW50RGVmaW5pdGlvbnNcIiwgXCJldmVudHNcIik7XG5cbiAgXHQvLyBVc2luZyBleHRlbmQgd2l0aCBDb21wb25lbnQgaW5zdGVhZCBvZiBvcHRpb25zLFxuICBcdC8vIGxpa2UgSHVtYW4uZXh0ZW5kKCBTcGlkZXIgKSBtZWFucyBhZGFwdG9ycyBhcyBhIHJlZ2lzdHJ5XG4gIFx0Ly8gZ2V0cyBjb3BpZWQgdG8gb3B0aW9ucy4gU28gd2UgaGF2ZSB0byBjaGVjayBpZiBhY3R1YWxseSBhbiBhcnJheVxuICBcdGlmIChpc0FycmF5KG9wdGlvbnMuYWRhcHRvcnMpKSB7XG4gIFx0XHRkZXByZWNhdGVPcHRpb24ob3B0aW9ucywgXCJhZGFwdG9yc1wiLCBcImFkYXB0XCIpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBjb25maWcsIG9yZGVyLCBkZWZhdWx0S2V5cywgY3VzdG9tLCBpc0JsYWNrbGlzdGVkLCBpc1N0YW5kYXJkS2V5O1xuXG4gIGN1c3RvbSA9IHtcbiAgXHRhZGFwdDogY3VzdG9tX2FkYXB0LFxuICBcdGNzczogY3NzX2NzcyxcbiAgXHRkYXRhOiBjdXN0b21fZGF0YSxcbiAgXHR0ZW1wbGF0ZTogdGVtcGxhdGVfdGVtcGxhdGVcbiAgfTtcblxuICBkZWZhdWx0S2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZ19kZWZhdWx0cyk7XG5cbiAgaXNTdGFuZGFyZEtleSA9IG1ha2VPYmooZGVmYXVsdEtleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgXHRyZXR1cm4gIWN1c3RvbVtrZXldO1xuICB9KSk7XG5cbiAgLy8gYmxhY2tsaXN0ZWQga2V5cyB0aGF0IHdlIGRvbid0IGRvdWJsZSBleHRlbmRcbiAgaXNCbGFja2xpc3RlZCA9IG1ha2VPYmooZGVmYXVsdEtleXMuY29uY2F0KGNvbmZpZ19yZWdpc3RyaWVzLm1hcChmdW5jdGlvbiAocikge1xuICBcdHJldHVybiByLm5hbWU7XG4gIH0pKSk7XG5cbiAgb3JkZXIgPSBbXS5jb25jYXQoZGVmYXVsdEtleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgXHRyZXR1cm4gIWNvbmZpZ19yZWdpc3RyaWVzW2tleV0gJiYgIWN1c3RvbVtrZXldO1xuICB9KSwgY29uZmlnX3JlZ2lzdHJpZXMsIGN1c3RvbS5kYXRhLCBjdXN0b20udGVtcGxhdGUsIGN1c3RvbS5jc3MpO1xuXG4gIGNvbmZpZyA9IHtcbiAgXHRleHRlbmQ6IGZ1bmN0aW9uIChQYXJlbnQsIHByb3RvLCBvcHRpb25zKSB7XG4gIFx0XHRyZXR1cm4gY29uZmlndXJlKFwiZXh0ZW5kXCIsIFBhcmVudCwgcHJvdG8sIG9wdGlvbnMpO1xuICBcdH0sXG5cbiAgXHRpbml0OiBmdW5jdGlvbiAoUGFyZW50LCByYWN0aXZlLCBvcHRpb25zKSB7XG4gIFx0XHRyZXR1cm4gY29uZmlndXJlKFwiaW5pdFwiLCBQYXJlbnQsIHJhY3RpdmUsIG9wdGlvbnMpO1xuICBcdH0sXG5cbiAgXHRyZXNldDogZnVuY3Rpb24gKHJhY3RpdmUpIHtcbiAgXHRcdHJldHVybiBvcmRlci5maWx0ZXIoZnVuY3Rpb24gKGMpIHtcbiAgXHRcdFx0cmV0dXJuIGMucmVzZXQgJiYgYy5yZXNldChyYWN0aXZlKTtcbiAgXHRcdH0pLm1hcChmdW5jdGlvbiAoYykge1xuICBcdFx0XHRyZXR1cm4gYy5uYW1lO1xuICBcdFx0fSk7XG4gIFx0fSxcblxuICBcdC8vIHRoaXMgZGVmaW5lcyB0aGUgb3JkZXIuIFRPRE8gdGhpcyBpc24ndCB1c2VkIGFueXdoZXJlIGluIHRoZSBjb2RlYmFzZSxcbiAgXHQvLyBvbmx5IGluIHRoZSB0ZXN0IHN1aXRlIC0gc2hvdWxkIGdldCByaWQgb2YgaXRcbiAgXHRvcmRlcjogb3JkZXIgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobWV0aG9kLCBQYXJlbnQsIHRhcmdldCwgb3B0aW9ucykge1xuICBcdGNvbmZpZ19kZXByZWNhdGUob3B0aW9ucyk7XG5cbiAgXHRmb3IgKHZhciBrZXkgaW4gb3B0aW9ucykge1xuICBcdFx0aWYgKGlzU3RhbmRhcmRLZXkuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICBcdFx0XHR2YXIgdmFsdWUgPSBvcHRpb25zW2tleV07XG5cbiAgXHRcdFx0Ly8gd2FybiB0aGUgZGV2ZWxvcGVyIGlmIHRoZXkgcGFzc2VkIGEgZnVuY3Rpb24gYW5kIGlnbm9yZSBpdHMgdmFsdWVcblxuICBcdFx0XHQvLyBOT1RFOiB3ZSBhbGxvdyBzb21lIGZ1bmN0aW9ucyBvbiBcImVsXCIgYmVjYXVzZSB3ZSBkdWNrIHR5cGUgZWxlbWVudCBsaXN0c1xuICBcdFx0XHQvLyBhbmQgc29tZSBsaWJyYXJpZXMgb3IgZWYnZWQtdXAgdmlydHVhbCBicm93c2VycyAocGhhbnRvbUpTKSByZXR1cm4gYVxuICBcdFx0XHQvLyBmdW5jdGlvbiBvYmplY3QgYXMgdGhlIHJlc3VsdCBvZiBxdWVyeVNlbGVjdG9yIG1ldGhvZHNcbiAgXHRcdFx0aWYgKGtleSAhPT0gXCJlbFwiICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRcdFx0d2FybklmRGVidWcoXCJcIiArIGtleSArIFwiIGlzIGEgUmFjdGl2ZSBvcHRpb24gdGhhdCBkb2VzIG5vdCBleHBlY3QgYSBmdW5jdGlvbiBhbmQgd2lsbCBiZSBpZ25vcmVkXCIsIG1ldGhvZCA9PT0gXCJpbml0XCIgPyB0YXJnZXQgOiBudWxsKTtcbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHR0YXJnZXRba2V5XSA9IHZhbHVlO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Y29uZmlnX3JlZ2lzdHJpZXMuZm9yRWFjaChmdW5jdGlvbiAocmVnaXN0cnkpIHtcbiAgXHRcdHJlZ2lzdHJ5W21ldGhvZF0oUGFyZW50LCB0YXJnZXQsIG9wdGlvbnMpO1xuICBcdH0pO1xuXG4gIFx0Y3VzdG9tX2FkYXB0W21ldGhvZF0oUGFyZW50LCB0YXJnZXQsIG9wdGlvbnMpO1xuICBcdHRlbXBsYXRlX3RlbXBsYXRlW21ldGhvZF0oUGFyZW50LCB0YXJnZXQsIG9wdGlvbnMpO1xuICBcdGNzc19jc3NbbWV0aG9kXShQYXJlbnQsIHRhcmdldCwgb3B0aW9ucyk7XG5cbiAgXHRleHRlbmRPdGhlck1ldGhvZHMoUGFyZW50LnByb3RvdHlwZSwgdGFyZ2V0LCBvcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dGVuZE90aGVyTWV0aG9kcyhwYXJlbnQsIHRhcmdldCwgb3B0aW9ucykge1xuICBcdGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gIFx0XHRpZiAoIWlzQmxhY2tsaXN0ZWRba2V5XSAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgXHRcdFx0dmFyIG1lbWJlciA9IG9wdGlvbnNba2V5XTtcblxuICBcdFx0XHQvLyBpZiB0aGlzIGlzIGEgbWV0aG9kIHRoYXQgb3ZlcndyaXRlcyBhIG1ldGhvZCwgd3JhcCBpdDpcbiAgXHRcdFx0aWYgKHR5cGVvZiBtZW1iZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRcdG1lbWJlciA9IHdyYXBQcm90b3R5cGUocGFyZW50LCBrZXksIG1lbWJlcik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHR0YXJnZXRba2V5XSA9IG1lbWJlcjtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlT2JqKGFycmF5KSB7XG4gIFx0dmFyIG9iaiA9IHt9O1xuICBcdGFycmF5LmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgXHRcdHJldHVybiBvYmpbeF0gPSB0cnVlO1xuICBcdH0pO1xuICBcdHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgY29uZmlnX2NvbmZpZyA9IGNvbmZpZztcblxuICB2YXIgcHJvdG90eXBlX2J1YmJsZSA9IEZyYWdtZW50JGJ1YmJsZTtcblxuICBmdW5jdGlvbiBGcmFnbWVudCRidWJibGUoKSB7XG4gIFx0dGhpcy5kaXJ0eVZhbHVlID0gdGhpcy5kaXJ0eUFyZ3MgPSB0cnVlO1xuXG4gIFx0aWYgKHRoaXMuYm91bmQgJiYgdHlwZW9mIHRoaXMub3duZXIuYnViYmxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdHRoaXMub3duZXIuYnViYmxlKCk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIEZyYWdtZW50X3Byb3RvdHlwZV9kZXRhY2ggPSBGcmFnbWVudCRkZXRhY2g7XG5cbiAgZnVuY3Rpb24gRnJhZ21lbnQkZGV0YWNoKCkge1xuICBcdHZhciBkb2NGcmFnO1xuXG4gIFx0aWYgKHRoaXMuaXRlbXMubGVuZ3RoID09PSAxKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5pdGVtc1swXS5kZXRhY2goKTtcbiAgXHR9XG5cbiAgXHRkb2NGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIFx0dGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIFx0XHR2YXIgbm9kZSA9IGl0ZW0uZGV0YWNoKCk7XG5cbiAgXHRcdC8vIFRPRE8gVGhlIGlmIHsuLi59IHdhc24ndCBwcmV2aW91c2x5IHJlcXVpcmVkIC0gaXQgaXMgbm93LCBiZWNhdXNlIHdlJ3JlXG4gIFx0XHQvLyBmb3JjaWJseSBkZXRhY2hpbmcgZXZlcnl0aGluZyB0byByZW9yZGVyIHNlY3Rpb25zIGFmdGVyIGFuIHVwZGF0ZS4gVGhhdCdzXG4gIFx0XHQvLyBhIG5vbi1pZGVhbCBicnV0ZSBmb3JjZSBhcHByb2FjaCwgaW1wbGVtZW50ZWQgdG8gZ2V0IGFsbCB0aGUgdGVzdHMgdG8gcGFzc1xuICBcdFx0Ly8gLSBhcyBzb29uIGFzIGl0J3MgcmVwbGFjZWQgd2l0aCBzb21ldGhpbmcgbW9yZSBlbGVnYW50LCB0aGlzIHNob3VsZFxuICBcdFx0Ly8gcmV2ZXJ0IHRvIGBkb2NGcmFnLmFwcGVuZENoaWxkKCBpdGVtLmRldGFjaCgpIClgXG4gIFx0XHRpZiAobm9kZSkge1xuICBcdFx0XHRkb2NGcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuICBcdFx0fVxuICBcdH0pO1xuXG4gIFx0cmV0dXJuIGRvY0ZyYWc7XG4gIH1cblxuICB2YXIgRnJhZ21lbnRfcHJvdG90eXBlX2ZpbmQgPSBGcmFnbWVudCRmaW5kO1xuXG4gIGZ1bmN0aW9uIEZyYWdtZW50JGZpbmQoc2VsZWN0b3IpIHtcbiAgXHR2YXIgaSwgbGVuLCBpdGVtLCBxdWVyeVJlc3VsdDtcblxuICBcdGlmICh0aGlzLml0ZW1zKSB7XG4gIFx0XHRsZW4gPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0XHRpdGVtID0gdGhpcy5pdGVtc1tpXTtcblxuICBcdFx0XHRpZiAoaXRlbS5maW5kICYmIChxdWVyeVJlc3VsdCA9IGl0ZW0uZmluZChzZWxlY3RvcikpKSB7XG4gIFx0XHRcdFx0cmV0dXJuIHF1ZXJ5UmVzdWx0O1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cbiAgfVxuXG4gIHZhciBGcmFnbWVudF9wcm90b3R5cGVfZmluZEFsbCA9IEZyYWdtZW50JGZpbmRBbGw7XG5cbiAgZnVuY3Rpb24gRnJhZ21lbnQkZmluZEFsbChzZWxlY3RvciwgcXVlcnkpIHtcbiAgXHR2YXIgaSwgbGVuLCBpdGVtO1xuXG4gIFx0aWYgKHRoaXMuaXRlbXMpIHtcbiAgXHRcdGxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICBcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xuXG4gIFx0XHRcdGlmIChpdGVtLmZpbmRBbGwpIHtcbiAgXHRcdFx0XHRpdGVtLmZpbmRBbGwoc2VsZWN0b3IsIHF1ZXJ5KTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIHZhciBGcmFnbWVudF9wcm90b3R5cGVfZmluZEFsbENvbXBvbmVudHMgPSBGcmFnbWVudCRmaW5kQWxsQ29tcG9uZW50cztcblxuICBmdW5jdGlvbiBGcmFnbWVudCRmaW5kQWxsQ29tcG9uZW50cyhzZWxlY3RvciwgcXVlcnkpIHtcbiAgXHR2YXIgaSwgbGVuLCBpdGVtO1xuXG4gIFx0aWYgKHRoaXMuaXRlbXMpIHtcbiAgXHRcdGxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICBcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xuXG4gIFx0XHRcdGlmIChpdGVtLmZpbmRBbGxDb21wb25lbnRzKSB7XG4gIFx0XHRcdFx0aXRlbS5maW5kQWxsQ29tcG9uZW50cyhzZWxlY3RvciwgcXVlcnkpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgdmFyIEZyYWdtZW50X3Byb3RvdHlwZV9maW5kQ29tcG9uZW50ID0gRnJhZ21lbnQkZmluZENvbXBvbmVudDtcblxuICBmdW5jdGlvbiBGcmFnbWVudCRmaW5kQ29tcG9uZW50KHNlbGVjdG9yKSB7XG4gIFx0dmFyIGxlbiwgaSwgaXRlbSwgcXVlcnlSZXN1bHQ7XG5cbiAgXHRpZiAodGhpcy5pdGVtcykge1xuICBcdFx0bGVuID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gIFx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdFx0aXRlbSA9IHRoaXMuaXRlbXNbaV07XG5cbiAgXHRcdFx0aWYgKGl0ZW0uZmluZENvbXBvbmVudCAmJiAocXVlcnlSZXN1bHQgPSBpdGVtLmZpbmRDb21wb25lbnQoc2VsZWN0b3IpKSkge1xuICBcdFx0XHRcdHJldHVybiBxdWVyeVJlc3VsdDtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gbnVsbDtcbiAgXHR9XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2ZpbmROZXh0Tm9kZSA9IEZyYWdtZW50JGZpbmROZXh0Tm9kZTtcblxuICBmdW5jdGlvbiBGcmFnbWVudCRmaW5kTmV4dE5vZGUoaXRlbSkge1xuICBcdHZhciBpbmRleCA9IGl0ZW0uaW5kZXgsXG4gIFx0ICAgIG5vZGU7XG5cbiAgXHRpZiAodGhpcy5pdGVtc1tpbmRleCArIDFdKSB7XG4gIFx0XHRub2RlID0gdGhpcy5pdGVtc1tpbmRleCArIDFdLmZpcnN0Tm9kZSgpO1xuICBcdH1cblxuICBcdC8vIGlmIHRoaXMgaXMgdGhlIHJvb3QgZnJhZ21lbnQsIGFuZCB0aGVyZSBhcmUgbm8gbW9yZSBpdGVtcyxcbiAgXHQvLyBpdCBtZWFucyB3ZSdyZSBhdCB0aGUgZW5kLi4uXG4gIFx0ZWxzZSBpZiAodGhpcy5vd25lciA9PT0gdGhpcy5yb290KSB7XG4gIFx0XHRpZiAoIXRoaXMub3duZXIuY29tcG9uZW50KSB7XG4gIFx0XHRcdC8vIFRPRE8gYnV0IHNvbWV0aGluZyBlbHNlIGNvdWxkIGhhdmUgYmVlbiBhcHBlbmRlZCB0b1xuICBcdFx0XHQvLyB0aGlzLnJvb3QuZWwsIG5vP1xuICBcdFx0XHRub2RlID0gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0Ly8gLi4udW5sZXNzIHRoaXMgaXMgYSBjb21wb25lbnRcbiAgXHRcdGVsc2Uge1xuICBcdFx0XHRub2RlID0gdGhpcy5vd25lci5jb21wb25lbnQuZmluZE5leHROb2RlKCk7XG4gIFx0XHR9XG4gIFx0fSBlbHNlIHtcbiAgXHRcdG5vZGUgPSB0aGlzLm93bmVyLmZpbmROZXh0Tm9kZSh0aGlzKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGVfZmlyc3ROb2RlID0gRnJhZ21lbnQkZmlyc3ROb2RlO1xuXG4gIGZ1bmN0aW9uIEZyYWdtZW50JGZpcnN0Tm9kZSgpIHtcbiAgXHRpZiAodGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zWzBdKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5pdGVtc1swXS5maXJzdE5vZGUoKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBzaGFyZWRfcHJvY2Vzc0l0ZW1zID0gcHJvY2Vzc0l0ZW1zO1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NJdGVtcyhpdGVtcywgdmFsdWVzLCBndWlkLCBjb3VudGVyKSB7XG4gIFx0Y291bnRlciA9IGNvdW50ZXIgfHwgMDtcblxuICBcdHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgXHRcdHZhciBwbGFjZWhvbGRlcklkLCB3cmFwcGVkLCB2YWx1ZTtcblxuICBcdFx0aWYgKGl0ZW0udGV4dCkge1xuICBcdFx0XHRyZXR1cm4gaXRlbS50ZXh0O1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoaXRlbS5mcmFnbWVudHMpIHtcbiAgXHRcdFx0cmV0dXJuIGl0ZW0uZnJhZ21lbnRzLm1hcChmdW5jdGlvbiAoZnJhZ21lbnQpIHtcbiAgXHRcdFx0XHRyZXR1cm4gcHJvY2Vzc0l0ZW1zKGZyYWdtZW50Lml0ZW1zLCB2YWx1ZXMsIGd1aWQsIGNvdW50ZXIpO1xuICBcdFx0XHR9KS5qb2luKFwiXCIpO1xuICBcdFx0fVxuXG4gIFx0XHRwbGFjZWhvbGRlcklkID0gZ3VpZCArIFwiLVwiICsgY291bnRlcisrO1xuXG4gIFx0XHRpZiAoaXRlbS5rZXlwYXRoICYmICh3cmFwcGVkID0gaXRlbS5yb290LnZpZXdtb2RlbC53cmFwcGVkW2l0ZW0ua2V5cGF0aC5zdHJdKSkge1xuICBcdFx0XHR2YWx1ZSA9IHdyYXBwZWQudmFsdWU7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHR2YWx1ZSA9IGl0ZW0uZ2V0VmFsdWUoKTtcbiAgXHRcdH1cblxuICBcdFx0dmFsdWVzW3BsYWNlaG9sZGVySWRdID0gdmFsdWU7XG5cbiAgXHRcdHJldHVybiBcIiR7XCIgKyBwbGFjZWhvbGRlcklkICsgXCJ9XCI7XG4gIFx0fSkuam9pbihcIlwiKTtcbiAgfVxuXG4gIHZhciBnZXRBcmdzTGlzdCA9IEZyYWdtZW50JGdldEFyZ3NMaXN0O1xuICBmdW5jdGlvbiBGcmFnbWVudCRnZXRBcmdzTGlzdCgpIHtcbiAgXHR2YXIgdmFsdWVzLCBzb3VyY2UsIHBhcnNlZCwgcmVzdWx0O1xuXG4gIFx0aWYgKHRoaXMuZGlydHlBcmdzKSB7XG4gIFx0XHRzb3VyY2UgPSBzaGFyZWRfcHJvY2Vzc0l0ZW1zKHRoaXMuaXRlbXMsIHZhbHVlcyA9IHt9LCB0aGlzLnJvb3QuX2d1aWQpO1xuICBcdFx0cGFyc2VkID0gcGFyc2VKU09OKFwiW1wiICsgc291cmNlICsgXCJdXCIsIHZhbHVlcyk7XG5cbiAgXHRcdGlmICghcGFyc2VkKSB7XG4gIFx0XHRcdHJlc3VsdCA9IFt0aGlzLnRvU3RyaW5nKCldO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cmVzdWx0ID0gcGFyc2VkLnZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLmFyZ3NMaXN0ID0gcmVzdWx0O1xuICBcdFx0dGhpcy5kaXJ0eUFyZ3MgPSBmYWxzZTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdGhpcy5hcmdzTGlzdDtcbiAgfVxuXG4gIHZhciBnZXROb2RlID0gRnJhZ21lbnQkZ2V0Tm9kZTtcblxuICBmdW5jdGlvbiBGcmFnbWVudCRnZXROb2RlKCkge1xuICBcdHZhciBmcmFnbWVudCA9IHRoaXM7XG5cbiAgXHRkbyB7XG4gIFx0XHRpZiAoZnJhZ21lbnQucEVsZW1lbnQpIHtcbiAgXHRcdFx0cmV0dXJuIGZyYWdtZW50LnBFbGVtZW50Lm5vZGU7XG4gIFx0XHR9XG4gIFx0fSB3aGlsZSAoZnJhZ21lbnQgPSBmcmFnbWVudC5wYXJlbnQpO1xuXG4gIFx0cmV0dXJuIHRoaXMucm9vdC5kZXRhY2hlZCB8fCB0aGlzLnJvb3QuZWw7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2dldFZhbHVlID0gRnJhZ21lbnQkZ2V0VmFsdWU7XG4gIGZ1bmN0aW9uIEZyYWdtZW50JGdldFZhbHVlKCkge1xuICBcdHZhciB2YWx1ZXMsIHNvdXJjZSwgcGFyc2VkLCByZXN1bHQ7XG5cbiAgXHRpZiAodGhpcy5kaXJ0eVZhbHVlKSB7XG4gIFx0XHRzb3VyY2UgPSBzaGFyZWRfcHJvY2Vzc0l0ZW1zKHRoaXMuaXRlbXMsIHZhbHVlcyA9IHt9LCB0aGlzLnJvb3QuX2d1aWQpO1xuICBcdFx0cGFyc2VkID0gcGFyc2VKU09OKHNvdXJjZSwgdmFsdWVzKTtcblxuICBcdFx0aWYgKCFwYXJzZWQpIHtcbiAgXHRcdFx0cmVzdWx0ID0gdGhpcy50b1N0cmluZygpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cmVzdWx0ID0gcGFyc2VkLnZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLnZhbHVlID0gcmVzdWx0O1xuICBcdFx0dGhpcy5kaXJ0eVZhbHVlID0gZmFsc2U7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICB2YXIgc2hhcmVkX2RldGFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgXHRyZXR1cm4gZGV0YWNoTm9kZSh0aGlzLm5vZGUpO1xuICB9O1xuXG4gIHZhciBUZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHR0aGlzLnR5cGUgPSBURVhUO1xuICBcdHRoaXMudGV4dCA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIH07XG5cbiAgVGV4dC5wcm90b3R5cGUgPSB7XG4gIFx0ZGV0YWNoOiBzaGFyZWRfZGV0YWNoLFxuXG4gIFx0Zmlyc3ROb2RlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5ub2RlO1xuICBcdH0sXG5cbiAgXHRyZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmICghdGhpcy5ub2RlKSB7XG4gIFx0XHRcdHRoaXMubm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMudGV4dCk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB0aGlzLm5vZGU7XG4gIFx0fSxcblxuICBcdHRvU3RyaW5nOiBmdW5jdGlvbiAoZXNjYXBlKSB7XG4gIFx0XHRyZXR1cm4gZXNjYXBlID8gZXNjYXBlSHRtbCh0aGlzLnRleHQpIDogdGhpcy50ZXh0O1xuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKHNob3VsZERlc3Ryb3kpIHtcbiAgXHRcdGlmIChzaG91bGREZXN0cm95KSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLmRldGFjaCgpO1xuICBcdFx0fVxuICBcdH1cbiAgfTtcblxuICB2YXIgaXRlbXNfVGV4dCA9IFRleHQ7XG5cbiAgdmFyIHNoYXJlZF91bmJpbmQgPSBzaGFyZWRfdW5iaW5kX191bmJpbmQ7XG5cbiAgZnVuY3Rpb24gc2hhcmVkX3VuYmluZF9fdW5iaW5kKCkge1xuICBcdGlmICh0aGlzLnJlZ2lzdGVyZWQpIHtcbiAgXHRcdC8vIHRoaXMgd2FzIHJlZ2lzdGVyZWQgYXMgYSBkZXBlbmRhbnRcbiAgXHRcdHRoaXMucm9vdC52aWV3bW9kZWwudW5yZWdpc3Rlcih0aGlzLmtleXBhdGgsIHRoaXMpO1xuICBcdH1cblxuICBcdGlmICh0aGlzLnJlc29sdmVyKSB7XG4gIFx0XHR0aGlzLnJlc29sdmVyLnVuYmluZCgpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBNdXN0YWNoZV9nZXRWYWx1ZSA9IE11c3RhY2hlJGdldFZhbHVlO1xuXG4gIGZ1bmN0aW9uIE11c3RhY2hlJGdldFZhbHVlKCkge1xuICBcdHJldHVybiB0aGlzLnZhbHVlO1xuICB9XG5cbiAgdmFyIFJlZmVyZW5jZVJlc29sdmVyID0gZnVuY3Rpb24gKG93bmVyLCByZWYsIGNhbGxiYWNrKSB7XG4gIFx0dmFyIGtleXBhdGg7XG5cbiAgXHR0aGlzLnJlZiA9IHJlZjtcbiAgXHR0aGlzLnJlc29sdmVkID0gZmFsc2U7XG5cbiAgXHR0aGlzLnJvb3QgPSBvd25lci5yb290O1xuICBcdHRoaXMucGFyZW50RnJhZ21lbnQgPSBvd25lci5wYXJlbnRGcmFnbWVudDtcbiAgXHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgXHRrZXlwYXRoID0gc2hhcmVkX3Jlc29sdmVSZWYob3duZXIucm9vdCwgcmVmLCBvd25lci5wYXJlbnRGcmFnbWVudCk7XG4gIFx0aWYgKGtleXBhdGggIT0gdW5kZWZpbmVkKSB7XG4gIFx0XHR0aGlzLnJlc29sdmUoa2V5cGF0aCk7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdGdsb2JhbF9ydW5sb29wLmFkZFVucmVzb2x2ZWQodGhpcyk7XG4gIFx0fVxuICB9O1xuXG4gIFJlZmVyZW5jZVJlc29sdmVyLnByb3RvdHlwZSA9IHtcbiAgXHRyZXNvbHZlOiBmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0aWYgKHRoaXMua2V5cGF0aCAmJiAha2V5cGF0aCkge1xuICBcdFx0XHQvLyBpdCB3YXMgcmVzb2x2ZWQsIGFuZCBub3cgaXQncyBub3QuIENhbiBoYXBwZW4gaWYgZS5nLiBgYmFyYCBpblxuICBcdFx0XHQvLyBge3tmb29bYmFyXX19YCBiZWNvbWVzIHVuZGVmaW5lZFxuICBcdFx0XHRnbG9iYWxfcnVubG9vcC5hZGRVbnJlc29sdmVkKHRoaXMpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLnJlc29sdmVkID0gdHJ1ZTtcblxuICBcdFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHRcdHRoaXMuY2FsbGJhY2soa2V5cGF0aCk7XG4gIFx0fSxcblxuICBcdGZvcmNlUmVzb2x1dGlvbjogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5yZXNvbHZlKGdldEtleXBhdGgodGhpcy5yZWYpKTtcbiAgXHR9LFxuXG4gIFx0cmViaW5kOiBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdFx0dmFyIGtleXBhdGg7XG5cbiAgXHRcdGlmICh0aGlzLmtleXBhdGggIT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdGtleXBhdGggPSB0aGlzLmtleXBhdGgucmVwbGFjZShvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHRcdFx0Ly8gd2FzIGEgbmV3IGtleXBhdGggY3JlYXRlZD9cbiAgXHRcdFx0aWYgKGtleXBhdGggIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRcdC8vIHJlc29sdmUgaXRcbiAgXHRcdFx0XHR0aGlzLnJlc29sdmUoa2V5cGF0aCk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAoIXRoaXMucmVzb2x2ZWQpIHtcbiAgXHRcdFx0Z2xvYmFsX3J1bmxvb3AucmVtb3ZlVW5yZXNvbHZlZCh0aGlzKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgdmFyIFJlc29sdmVyc19SZWZlcmVuY2VSZXNvbHZlciA9IFJlZmVyZW5jZVJlc29sdmVyO1xuXG4gIHZhciBTcGVjaWFsUmVzb2x2ZXIgPSBmdW5jdGlvbiAob3duZXIsIHJlZiwgY2FsbGJhY2spIHtcbiAgXHR0aGlzLnBhcmVudEZyYWdtZW50ID0gb3duZXIucGFyZW50RnJhZ21lbnQ7XG4gIFx0dGhpcy5yZWYgPSByZWY7XG4gIFx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuXG4gIFx0dGhpcy5yZWJpbmQoKTtcbiAgfTtcblxuICB2YXIgcHJvcHMgPSB7XG4gIFx0XCJAa2V5cGF0aFwiOiB7IHByZWZpeDogXCJjXCIsIHByb3A6IFtcImNvbnRleHRcIl0gfSxcbiAgXHRcIkBpbmRleFwiOiB7IHByZWZpeDogXCJpXCIsIHByb3A6IFtcImluZGV4XCJdIH0sXG4gIFx0XCJAa2V5XCI6IHsgcHJlZml4OiBcImtcIiwgcHJvcDogW1wia2V5XCIsIFwiaW5kZXhcIl0gfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFByb3AodGFyZ2V0LCBwcm9wKSB7XG4gIFx0dmFyIHZhbHVlO1xuICBcdGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcC5wcm9wLmxlbmd0aDsgaSsrKSB7XG4gIFx0XHRpZiAoKHZhbHVlID0gdGFyZ2V0W3Byb3AucHJvcFtpXV0pICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0cmV0dXJuIHZhbHVlO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIFNwZWNpYWxSZXNvbHZlci5wcm90b3R5cGUgPSB7XG4gIFx0cmViaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgcmVmID0gdGhpcy5yZWYsXG4gIFx0XHQgICAgZnJhZ21lbnQgPSB0aGlzLnBhcmVudEZyYWdtZW50LFxuICBcdFx0ICAgIHByb3AgPSBwcm9wc1tyZWZdLFxuICBcdFx0ICAgIHZhbHVlO1xuXG4gIFx0XHRpZiAoIXByb3ApIHtcbiAgXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBzcGVjaWFsIHJlZmVyZW5jZSBcXFwiXCIgKyByZWYgKyBcIlxcXCIgLSB2YWxpZCByZWZlcmVuY2VzIGFyZSBAaW5kZXgsIEBrZXkgYW5kIEBrZXlwYXRoXCIpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBoYXZlIHdlIGFscmVhZHkgZm91bmQgdGhlIG5lYXJlc3QgcGFyZW50P1xuICBcdFx0aWYgKHRoaXMuY2FjaGVkKSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLmNhbGxiYWNrKGdldEtleXBhdGgoXCJAXCIgKyBwcm9wLnByZWZpeCArIGdldFByb3AodGhpcy5jYWNoZWQsIHByb3ApKSk7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIHNwZWNpYWwgY2FzZSBmb3IgaW5kaWNlcywgd2hpY2ggbWF5IGNyb3NzIGNvbXBvbmVudCBib3VuZGFyaWVzXG4gIFx0XHRpZiAocHJvcC5wcm9wLmluZGV4T2YoXCJpbmRleFwiKSAhPT0gLTEgfHwgcHJvcC5wcm9wLmluZGV4T2YoXCJrZXlcIikgIT09IC0xKSB7XG4gIFx0XHRcdHdoaWxlIChmcmFnbWVudCkge1xuICBcdFx0XHRcdGlmIChmcmFnbWVudC5vd25lci5jdXJyZW50U3VidHlwZSA9PT0gU0VDVElPTl9FQUNIICYmICh2YWx1ZSA9IGdldFByb3AoZnJhZ21lbnQsIHByb3ApKSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFx0XHR0aGlzLmNhY2hlZCA9IGZyYWdtZW50O1xuXG4gIFx0XHRcdFx0XHRmcmFnbWVudC5yZWdpc3RlckluZGV4UmVmKHRoaXMpO1xuXG4gIFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jYWxsYmFjayhnZXRLZXlwYXRoKFwiQFwiICsgcHJvcC5wcmVmaXggKyB2YWx1ZSkpO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdC8vIHdhdGNoIGZvciBjb21wb25lbnQgYm91bmRhcmllc1xuICBcdFx0XHRcdGlmICghZnJhZ21lbnQucGFyZW50ICYmIGZyYWdtZW50Lm93bmVyICYmIGZyYWdtZW50Lm93bmVyLmNvbXBvbmVudCAmJiBmcmFnbWVudC5vd25lci5jb21wb25lbnQucGFyZW50RnJhZ21lbnQgJiYgIWZyYWdtZW50Lm93bmVyLmNvbXBvbmVudC5pbnN0YW5jZS5pc29sYXRlZCkge1xuICBcdFx0XHRcdFx0ZnJhZ21lbnQgPSBmcmFnbWVudC5vd25lci5jb21wb25lbnQucGFyZW50RnJhZ21lbnQ7XG4gIFx0XHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRcdGZyYWdtZW50ID0gZnJhZ21lbnQucGFyZW50O1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0d2hpbGUgKGZyYWdtZW50KSB7XG4gIFx0XHRcdFx0aWYgKCh2YWx1ZSA9IGdldFByb3AoZnJhZ21lbnQsIHByb3ApKSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jYWxsYmFjayhnZXRLZXlwYXRoKFwiQFwiICsgcHJvcC5wcmVmaXggKyB2YWx1ZS5zdHIpKTtcbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRmcmFnbWVudCA9IGZyYWdtZW50LnBhcmVudDtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0sXG5cbiAgXHR1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmICh0aGlzLmNhY2hlZCkge1xuICBcdFx0XHR0aGlzLmNhY2hlZC51bnJlZ2lzdGVySW5kZXhSZWYodGhpcyk7XG4gIFx0XHR9XG4gIFx0fVxuICB9O1xuXG4gIHZhciBSZXNvbHZlcnNfU3BlY2lhbFJlc29sdmVyID0gU3BlY2lhbFJlc29sdmVyO1xuXG4gIHZhciBJbmRleFJlc29sdmVyID0gZnVuY3Rpb24gKG93bmVyLCByZWYsIGNhbGxiYWNrKSB7XG4gIFx0dGhpcy5wYXJlbnRGcmFnbWVudCA9IG93bmVyLnBhcmVudEZyYWdtZW50O1xuICBcdHRoaXMucmVmID0gcmVmO1xuICBcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICBcdHJlZi5yZWYuZnJhZ21lbnQucmVnaXN0ZXJJbmRleFJlZih0aGlzKTtcblxuICBcdHRoaXMucmViaW5kKCk7XG4gIH07XG5cbiAgSW5kZXhSZXNvbHZlci5wcm90b3R5cGUgPSB7XG4gIFx0cmViaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgaW5kZXgsXG4gIFx0XHQgICAgcmVmID0gdGhpcy5yZWYucmVmO1xuXG4gIFx0XHRpZiAocmVmLnJlZi50ID09PSBcImtcIikge1xuICBcdFx0XHRpbmRleCA9IFwia1wiICsgcmVmLmZyYWdtZW50LmtleTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGluZGV4ID0gXCJpXCIgKyByZWYuZnJhZ21lbnQuaW5kZXg7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdHRoaXMuY2FsbGJhY2soZ2V0S2V5cGF0aChcIkBcIiArIGluZGV4KSk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5yZWYucmVmLmZyYWdtZW50LnVucmVnaXN0ZXJJbmRleFJlZih0aGlzKTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIFJlc29sdmVyc19JbmRleFJlc29sdmVyID0gSW5kZXhSZXNvbHZlcjtcblxuICB2YXIgUmVzb2x2ZXJzX2ZpbmRJbmRleFJlZnMgPSBmaW5kSW5kZXhSZWZzO1xuXG4gIGZ1bmN0aW9uIGZpbmRJbmRleFJlZnMoZnJhZ21lbnQsIHJlZk5hbWUpIHtcbiAgXHR2YXIgcmVzdWx0ID0ge30sXG4gIFx0ICAgIHJlZnMsXG4gIFx0ICAgIGZyYWdSZWZzLFxuICBcdCAgICByZWYsXG4gIFx0ICAgIGksXG4gIFx0ICAgIG93bmVyLFxuICBcdCAgICBoaXQgPSBmYWxzZTtcblxuICBcdGlmICghcmVmTmFtZSkge1xuICBcdFx0cmVzdWx0LnJlZnMgPSByZWZzID0ge307XG4gIFx0fVxuXG4gIFx0d2hpbGUgKGZyYWdtZW50KSB7XG4gIFx0XHRpZiAoKG93bmVyID0gZnJhZ21lbnQub3duZXIpICYmIChmcmFnUmVmcyA9IG93bmVyLmluZGV4UmVmcykpIHtcblxuICBcdFx0XHQvLyB3ZSdyZSBsb29raW5nIGZvciBhIHBhcnRpY3VsYXIgcmVmLCBhbmQgaXQncyBoZXJlXG4gIFx0XHRcdGlmIChyZWZOYW1lICYmIChyZWYgPSBvd25lci5nZXRJbmRleFJlZihyZWZOYW1lKSkpIHtcbiAgXHRcdFx0XHRyZXN1bHQucmVmID0ge1xuICBcdFx0XHRcdFx0ZnJhZ21lbnQ6IGZyYWdtZW50LFxuICBcdFx0XHRcdFx0cmVmOiByZWZcbiAgXHRcdFx0XHR9O1xuICBcdFx0XHRcdHJldHVybiByZXN1bHQ7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyB3ZSdyZSBjb2xsZWN0aW5nIHJlZnMgdXAtdHJlZVxuICBcdFx0XHRlbHNlIGlmICghcmVmTmFtZSkge1xuICBcdFx0XHRcdGZvciAoaSBpbiBmcmFnUmVmcykge1xuICBcdFx0XHRcdFx0cmVmID0gZnJhZ1JlZnNbaV07XG5cbiAgXHRcdFx0XHRcdC8vIGRvbid0IG92ZXJ3cml0ZSBleGlzdGluZyByZWZzIC0gdGhleSBzaG91bGQgc2hhZG93IHBhcmVudHNcbiAgXHRcdFx0XHRcdGlmICghcmVmc1tyZWYubl0pIHtcbiAgXHRcdFx0XHRcdFx0aGl0ID0gdHJ1ZTtcbiAgXHRcdFx0XHRcdFx0cmVmc1tyZWYubl0gPSB7XG4gIFx0XHRcdFx0XHRcdFx0ZnJhZ21lbnQ6IGZyYWdtZW50LFxuICBcdFx0XHRcdFx0XHRcdHJlZjogcmVmXG4gIFx0XHRcdFx0XHRcdH07XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdC8vIHdhdGNoIGZvciBjb21wb25lbnQgYm91bmRhcmllc1xuICBcdFx0aWYgKCFmcmFnbWVudC5wYXJlbnQgJiYgZnJhZ21lbnQub3duZXIgJiYgZnJhZ21lbnQub3duZXIuY29tcG9uZW50ICYmIGZyYWdtZW50Lm93bmVyLmNvbXBvbmVudC5wYXJlbnRGcmFnbWVudCAmJiAhZnJhZ21lbnQub3duZXIuY29tcG9uZW50Lmluc3RhbmNlLmlzb2xhdGVkKSB7XG4gIFx0XHRcdHJlc3VsdC5jb21wb25lbnRCb3VuZGFyeSA9IHRydWU7XG4gIFx0XHRcdGZyYWdtZW50ID0gZnJhZ21lbnQub3duZXIuY29tcG9uZW50LnBhcmVudEZyYWdtZW50O1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0ZnJhZ21lbnQgPSBmcmFnbWVudC5wYXJlbnQ7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0aWYgKCFoaXQpIHtcbiAgXHRcdHJldHVybiB1bmRlZmluZWQ7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdHJldHVybiByZXN1bHQ7XG4gIFx0fVxuICB9XG5cbiAgZmluZEluZGV4UmVmcy5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZShpbmRpY2VzKSB7XG4gIFx0dmFyIHJlZnMgPSB7fSxcbiAgXHQgICAgayxcbiAgXHQgICAgcmVmO1xuXG4gIFx0Zm9yIChrIGluIGluZGljZXMucmVmcykge1xuICBcdFx0cmVmID0gaW5kaWNlcy5yZWZzW2tdO1xuICBcdFx0cmVmc1tyZWYucmVmLm5dID0gcmVmLnJlZi50ID09PSBcImtcIiA/IHJlZi5mcmFnbWVudC5rZXkgOiByZWYuZnJhZ21lbnQuaW5kZXg7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHJlZnM7XG4gIH07XG5cbiAgdmFyIFJlc29sdmVyc19jcmVhdGVSZWZlcmVuY2VSZXNvbHZlciA9IGNyZWF0ZVJlZmVyZW5jZVJlc29sdmVyO1xuICBmdW5jdGlvbiBjcmVhdGVSZWZlcmVuY2VSZXNvbHZlcihvd25lciwgcmVmLCBjYWxsYmFjaykge1xuICBcdHZhciBpbmRleFJlZjtcblxuICBcdGlmIChyZWYuY2hhckF0KDApID09PSBcIkBcIikge1xuICBcdFx0cmV0dXJuIG5ldyBSZXNvbHZlcnNfU3BlY2lhbFJlc29sdmVyKG93bmVyLCByZWYsIGNhbGxiYWNrKTtcbiAgXHR9XG5cbiAgXHRpZiAoaW5kZXhSZWYgPSBSZXNvbHZlcnNfZmluZEluZGV4UmVmcyhvd25lci5wYXJlbnRGcmFnbWVudCwgcmVmKSkge1xuICBcdFx0cmV0dXJuIG5ldyBSZXNvbHZlcnNfSW5kZXhSZXNvbHZlcihvd25lciwgaW5kZXhSZWYsIGNhbGxiYWNrKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbmV3IFJlc29sdmVyc19SZWZlcmVuY2VSZXNvbHZlcihvd25lciwgcmVmLCBjYWxsYmFjayk7XG4gIH1cblxuICB2YXIgc2hhcmVkX2dldEZ1bmN0aW9uRnJvbVN0cmluZyA9IGdldEZ1bmN0aW9uRnJvbVN0cmluZztcbiAgdmFyIGNhY2hlID0ge307XG4gIGZ1bmN0aW9uIGdldEZ1bmN0aW9uRnJvbVN0cmluZyhzdHIsIGkpIHtcbiAgXHR2YXIgZm4sIGFyZ3M7XG5cbiAgXHRpZiAoY2FjaGVbc3RyXSkge1xuICBcdFx0cmV0dXJuIGNhY2hlW3N0cl07XG4gIFx0fVxuXG4gIFx0YXJncyA9IFtdO1xuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGFyZ3NbaV0gPSBcIl9cIiArIGk7XG4gIFx0fVxuXG4gIFx0Zm4gPSBuZXcgRnVuY3Rpb24oYXJncy5qb2luKFwiLFwiKSwgXCJyZXR1cm4oXCIgKyBzdHIgKyBcIilcIik7XG5cbiAgXHRjYWNoZVtzdHJdID0gZm47XG4gIFx0cmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIEV4cHJlc3Npb25SZXNvbHZlcixcbiAgICAgIFJlc29sdmVyc19FeHByZXNzaW9uUmVzb2x2ZXJfX2JpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcblxuICBFeHByZXNzaW9uUmVzb2x2ZXIgPSBmdW5jdGlvbiAob3duZXIsIHBhcmVudEZyYWdtZW50LCBleHByZXNzaW9uLCBjYWxsYmFjaykge1xuICBcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHR2YXIgcmFjdGl2ZTtcblxuICBcdHJhY3RpdmUgPSBvd25lci5yb290O1xuXG4gIFx0dGhpcy5yb290ID0gcmFjdGl2ZTtcbiAgXHR0aGlzLnBhcmVudEZyYWdtZW50ID0gcGFyZW50RnJhZ21lbnQ7XG4gIFx0dGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICBcdHRoaXMub3duZXIgPSBvd25lcjtcbiAgXHR0aGlzLnN0ciA9IGV4cHJlc3Npb24ucztcbiAgXHR0aGlzLmtleXBhdGhzID0gW107XG5cbiAgXHQvLyBDcmVhdGUgcmVzb2x2ZXJzIGZvciBlYWNoIHJlZmVyZW5jZVxuICBcdHRoaXMucGVuZGluZyA9IGV4cHJlc3Npb24uci5sZW5ndGg7XG4gIFx0dGhpcy5yZWZSZXNvbHZlcnMgPSBleHByZXNzaW9uLnIubWFwKGZ1bmN0aW9uIChyZWYsIGkpIHtcbiAgXHRcdHJldHVybiBSZXNvbHZlcnNfY3JlYXRlUmVmZXJlbmNlUmVzb2x2ZXIoX3RoaXMsIHJlZiwgZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdFx0X3RoaXMucmVzb2x2ZShpLCBrZXlwYXRoKTtcbiAgXHRcdH0pO1xuICBcdH0pO1xuXG4gIFx0dGhpcy5yZWFkeSA9IHRydWU7XG4gIFx0dGhpcy5idWJibGUoKTtcbiAgfTtcblxuICBFeHByZXNzaW9uUmVzb2x2ZXIucHJvdG90eXBlID0ge1xuICBcdGJ1YmJsZTogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLnJlYWR5KSB7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy51bmlxdWVTdHJpbmcgPSBnZXRVbmlxdWVTdHJpbmcodGhpcy5zdHIsIHRoaXMua2V5cGF0aHMpO1xuICBcdFx0dGhpcy5rZXlwYXRoID0gY3JlYXRlRXhwcmVzc2lvbktleXBhdGgodGhpcy51bmlxdWVTdHJpbmcpO1xuXG4gIFx0XHR0aGlzLmNyZWF0ZUV2YWx1YXRvcigpO1xuICBcdFx0dGhpcy5jYWxsYmFjayh0aGlzLmtleXBhdGgpO1xuICBcdH0sXG5cbiAgXHR1bmJpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciByZXNvbHZlcjtcblxuICBcdFx0d2hpbGUgKHJlc29sdmVyID0gdGhpcy5yZWZSZXNvbHZlcnMucG9wKCkpIHtcbiAgXHRcdFx0cmVzb2x2ZXIudW5iaW5kKCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHJlc29sdmU6IGZ1bmN0aW9uIChpbmRleCwga2V5cGF0aCkge1xuICBcdFx0dGhpcy5rZXlwYXRoc1tpbmRleF0gPSBrZXlwYXRoO1xuICBcdFx0dGhpcy5idWJibGUoKTtcbiAgXHR9LFxuXG4gIFx0Y3JlYXRlRXZhbHVhdG9yOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHR2YXIgY29tcHV0YXRpb24sIHZhbHVlR2V0dGVycywgc2lnbmF0dXJlLCBrZXlwYXRoLCBmbjtcblxuICBcdFx0a2V5cGF0aCA9IHRoaXMua2V5cGF0aDtcbiAgXHRcdGNvbXB1dGF0aW9uID0gdGhpcy5yb290LnZpZXdtb2RlbC5jb21wdXRhdGlvbnNba2V5cGF0aC5zdHJdO1xuXG4gIFx0XHQvLyBvbmx5IGlmIGl0IGRvZXNuJ3QgZXhpc3QgeWV0IVxuICBcdFx0aWYgKCFjb21wdXRhdGlvbikge1xuICBcdFx0XHRmbiA9IHNoYXJlZF9nZXRGdW5jdGlvbkZyb21TdHJpbmcodGhpcy5zdHIsIHRoaXMucmVmUmVzb2x2ZXJzLmxlbmd0aCk7XG5cbiAgXHRcdFx0dmFsdWVHZXR0ZXJzID0gdGhpcy5rZXlwYXRocy5tYXAoZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdFx0XHR2YXIgdmFsdWU7XG5cbiAgXHRcdFx0XHRpZiAoa2V5cGF0aCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICBcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcbiAgXHRcdFx0XHRcdH07XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0Ly8gJ3NwZWNpYWwnIGtleXBhdGhzIGVuY29kZSBhIHZhbHVlXG4gIFx0XHRcdFx0aWYgKGtleXBhdGguaXNTcGVjaWFsKSB7XG4gIFx0XHRcdFx0XHR2YWx1ZSA9IGtleXBhdGgudmFsdWU7XG4gIFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuICBcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG4gIFx0XHRcdFx0XHR9O1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0XHR2YXIgdmFsdWUgPSBfdGhpcy5yb290LnZpZXdtb2RlbC5nZXQoa2V5cGF0aCwgeyBub1Vud3JhcDogdHJ1ZSwgZnVsbFJvb3RHZXQ6IHRydWUgfSk7XG4gIFx0XHRcdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdFx0XHRcdFx0dmFsdWUgPSB3cmFwRnVuY3Rpb24odmFsdWUsIF90aGlzLnJvb3QpO1xuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuICBcdFx0XHRcdH07XG4gIFx0XHRcdH0pO1xuXG4gIFx0XHRcdHNpZ25hdHVyZSA9IHtcbiAgXHRcdFx0XHRkZXBzOiB0aGlzLmtleXBhdGhzLmZpbHRlcihpc1ZhbGlkRGVwZW5kZW5jeSksXG4gIFx0XHRcdFx0Z2V0dGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0XHR2YXIgYXJncyA9IHZhbHVlR2V0dGVycy5tYXAoY2FsbCk7XG4gIFx0XHRcdFx0XHRyZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9O1xuXG4gIFx0XHRcdGNvbXB1dGF0aW9uID0gdGhpcy5yb290LnZpZXdtb2RlbC5jb21wdXRlKGtleXBhdGgsIHNpZ25hdHVyZSk7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHR0aGlzLnJvb3Qudmlld21vZGVsLm1hcmsoa2V5cGF0aCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHJlYmluZDogZnVuY3Rpb24gKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpIHtcbiAgXHRcdC8vIFRPRE8gb25seSBidWJibGUgb25jZSwgbm8gbWF0dGVyIGhvdyBtYW55IHJlZmVyZW5jZXMgYXJlIGFmZmVjdGVkIGJ5IHRoZSByZWJpbmRcbiAgXHRcdHRoaXMucmVmUmVzb2x2ZXJzLmZvckVhY2goZnVuY3Rpb24gKHIpIHtcbiAgXHRcdFx0cmV0dXJuIHIucmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdFx0fSk7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBSZXNvbHZlcnNfRXhwcmVzc2lvblJlc29sdmVyID0gRXhwcmVzc2lvblJlc29sdmVyO1xuXG4gIGZ1bmN0aW9uIGNhbGwodmFsdWUpIHtcbiAgXHRyZXR1cm4gdmFsdWUuY2FsbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VW5pcXVlU3RyaW5nKHN0ciwga2V5cGF0aHMpIHtcbiAgXHQvLyBnZXQgc3RyaW5nIHRoYXQgaXMgdW5pcXVlIHRvIHRoaXMgZXhwcmVzc2lvblxuICBcdHJldHVybiBzdHIucmVwbGFjZSgvXyhbMC05XSspL2csIGZ1bmN0aW9uIChtYXRjaCwgJDEpIHtcbiAgXHRcdHZhciBrZXlwYXRoLCB2YWx1ZTtcblxuICBcdFx0Ly8gbWFrZSBzdXJlIHdlJ3JlIG5vdCByZXBsYWNpbmcgYSBub24ta2V5cGF0aCBfWzAtOV1cbiAgXHRcdGlmICgrJDEgPj0ga2V5cGF0aHMubGVuZ3RoKSB7XG4gIFx0XHRcdHJldHVybiBcIl9cIiArICQxO1xuICBcdFx0fVxuXG4gIFx0XHRrZXlwYXRoID0ga2V5cGF0aHNbJDFdO1xuXG4gIFx0XHRpZiAoa2V5cGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdHJldHVybiBcInVuZGVmaW5lZFwiO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoa2V5cGF0aC5pc1NwZWNpYWwpIHtcbiAgXHRcdFx0dmFsdWUgPSBrZXlwYXRoLnZhbHVlO1xuICBcdFx0XHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiID8gdmFsdWUgOiBcIlxcXCJcIiArIHZhbHVlICsgXCJcXFwiXCI7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBrZXlwYXRoLnN0cjtcbiAgXHR9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUV4cHJlc3Npb25LZXlwYXRoKHVuaXF1ZVN0cmluZykge1xuICBcdC8vIFNhbml0aXplIGJ5IHJlbW92aW5nIGFueSBwZXJpb2RzIG9yIHNxdWFyZSBicmFja2V0cy4gT3RoZXJ3aXNlXG4gIFx0Ly8gd2UgY2FuJ3Qgc3BsaXQgdGhlIGtleXBhdGggaW50byBrZXlzIVxuICBcdC8vIFJlbW92ZSBhc3Rlcmlza3MgdG9vLCBzaW5jZSB0aGV5IG1lc3Mgd2l0aCBwYXR0ZXJuIG9ic2VydmVyc1xuICBcdHJldHVybiBnZXRLZXlwYXRoKFwiJHtcIiArIHVuaXF1ZVN0cmluZy5yZXBsYWNlKC9bXFwuXFxbXFxdXS9nLCBcIi1cIikucmVwbGFjZSgvXFwqLywgXCIjTVVMI1wiKSArIFwifVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVmFsaWREZXBlbmRlbmN5KGtleXBhdGgpIHtcbiAgXHRyZXR1cm4ga2V5cGF0aCAhPT0gdW5kZWZpbmVkICYmIGtleXBhdGhbMF0gIT09IFwiQFwiO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZuLCByYWN0aXZlKSB7XG4gIFx0dmFyIHdyYXBwZWQsIHByb3AsIGtleTtcblxuICBcdGlmIChmbi5fX3JhY3RpdmVfbm93cmFwKSB7XG4gIFx0XHRyZXR1cm4gZm47XG4gIFx0fVxuXG4gIFx0cHJvcCA9IFwiX19yYWN0aXZlX1wiICsgcmFjdGl2ZS5fZ3VpZDtcbiAgXHR3cmFwcGVkID0gZm5bcHJvcF07XG5cbiAgXHRpZiAod3JhcHBlZCkge1xuICBcdFx0cmV0dXJuIHdyYXBwZWQ7XG4gIFx0fSBlbHNlIGlmICgvdGhpcy8udGVzdChmbi50b1N0cmluZygpKSkge1xuICBcdFx0ZGVmaW5lUHJvcGVydHkoZm4sIHByb3AsIHtcbiAgXHRcdFx0dmFsdWU6IFJlc29sdmVyc19FeHByZXNzaW9uUmVzb2x2ZXJfX2JpbmQuY2FsbChmbiwgcmFjdGl2ZSksXG4gIFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICBcdFx0fSk7XG5cbiAgXHRcdC8vIEFkZCBwcm9wZXJ0aWVzL21ldGhvZHMgdG8gd3JhcHBlZCBmdW5jdGlvblxuICBcdFx0Zm9yIChrZXkgaW4gZm4pIHtcbiAgXHRcdFx0aWYgKGZuLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgXHRcdFx0XHRmbltwcm9wXVtrZXldID0gZm5ba2V5XTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyYWN0aXZlLl9ib3VuZEZ1bmN0aW9ucy5wdXNoKHtcbiAgXHRcdFx0Zm46IGZuLFxuICBcdFx0XHRwcm9wOiBwcm9wXG4gIFx0XHR9KTtcblxuICBcdFx0cmV0dXJuIGZuW3Byb3BdO1xuICBcdH1cblxuICBcdGRlZmluZVByb3BlcnR5KGZuLCBcIl9fcmFjdGl2ZV9ub3dyYXBcIiwge1xuICBcdFx0dmFsdWU6IGZuXG4gIFx0fSk7XG5cbiAgXHRyZXR1cm4gZm4uX19yYWN0aXZlX25vd3JhcDtcbiAgfVxuXG4gIHZhciBNZW1iZXJSZXNvbHZlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgcmVzb2x2ZXIsIHBhcmVudEZyYWdtZW50KSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcbiAgXHR0aGlzLnJvb3QgPSByZXNvbHZlci5yb290O1xuICBcdHRoaXMucGFyZW50RnJhZ21lbnQgPSBwYXJlbnRGcmFnbWVudDtcbiAgXHR0aGlzLnZpZXdtb2RlbCA9IHJlc29sdmVyLnJvb3Qudmlld21vZGVsO1xuXG4gIFx0aWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0dGhpcy52YWx1ZSA9IHRlbXBsYXRlO1xuICBcdH1cblxuICBcdC8vIFNpbXBsZSByZWZlcmVuY2U/XG4gIFx0ZWxzZSBpZiAodGVtcGxhdGUudCA9PT0gUkVGRVJFTkNFKSB7XG4gIFx0XHR0aGlzLnJlZlJlc29sdmVyID0gUmVzb2x2ZXJzX2NyZWF0ZVJlZmVyZW5jZVJlc29sdmVyKHRoaXMsIHRlbXBsYXRlLm4sIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdF90aGlzLnJlc29sdmUoa2V5cGF0aCk7XG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHQvLyBPdGhlcndpc2Ugd2UgaGF2ZSBhbiBleHByZXNzaW9uIGluIGl0cyBvd24gcmlnaHRcbiAgXHRlbHNlIHtcbiAgXHRcdG5ldyBSZXNvbHZlcnNfRXhwcmVzc2lvblJlc29sdmVyKHJlc29sdmVyLCBwYXJlbnRGcmFnbWVudCwgdGVtcGxhdGUsIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdF90aGlzLnJlc29sdmUoa2V5cGF0aCk7XG4gIFx0XHR9KTtcbiAgXHR9XG4gIH07XG5cbiAgTWVtYmVyUmVzb2x2ZXIucHJvdG90eXBlID0ge1xuICBcdHJlc29sdmU6IGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRpZiAodGhpcy5rZXlwYXRoKSB7XG4gIFx0XHRcdHRoaXMudmlld21vZGVsLnVucmVnaXN0ZXIodGhpcy5rZXlwYXRoLCB0aGlzKTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHRcdHRoaXMudmFsdWUgPSB0aGlzLnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG5cbiAgXHRcdHRoaXMuYmluZCgpO1xuXG4gIFx0XHR0aGlzLnJlc29sdmVyLmJ1YmJsZSgpO1xuICBcdH0sXG5cbiAgXHRiaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLnZpZXdtb2RlbC5yZWdpc3Rlcih0aGlzLmtleXBhdGgsIHRoaXMpO1xuICBcdH0sXG5cbiAgXHRyZWJpbmQ6IGZ1bmN0aW9uIChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0XHRpZiAodGhpcy5yZWZSZXNvbHZlcikge1xuICBcdFx0XHR0aGlzLnJlZlJlc29sdmVyLnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0c2V0VmFsdWU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBcdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xuICBcdFx0dGhpcy5yZXNvbHZlci5idWJibGUoKTtcbiAgXHR9LFxuXG4gIFx0dW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAodGhpcy5rZXlwYXRoKSB7XG4gIFx0XHRcdHRoaXMudmlld21vZGVsLnVucmVnaXN0ZXIodGhpcy5rZXlwYXRoLCB0aGlzKTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKHRoaXMucmVmUmVzb2x2ZXIpIHtcbiAgXHRcdFx0dGhpcy5yZWZSZXNvbHZlci51bmJpbmQoKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0Zm9yY2VSZXNvbHV0aW9uOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAodGhpcy5yZWZSZXNvbHZlcikge1xuICBcdFx0XHR0aGlzLnJlZlJlc29sdmVyLmZvcmNlUmVzb2x1dGlvbigpO1xuICBcdFx0fVxuICBcdH1cbiAgfTtcblxuICB2YXIgUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyX01lbWJlclJlc29sdmVyID0gTWVtYmVyUmVzb2x2ZXI7XG5cbiAgdmFyIFJlZmVyZW5jZUV4cHJlc3Npb25SZXNvbHZlciA9IGZ1bmN0aW9uIChtdXN0YWNoZSwgdGVtcGxhdGUsIGNhbGxiYWNrKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciByYWN0aXZlLCByZWYsIGtleXBhdGgsIHBhcmVudEZyYWdtZW50O1xuXG4gIFx0dGhpcy5wYXJlbnRGcmFnbWVudCA9IHBhcmVudEZyYWdtZW50ID0gbXVzdGFjaGUucGFyZW50RnJhZ21lbnQ7XG4gIFx0dGhpcy5yb290ID0gcmFjdGl2ZSA9IG11c3RhY2hlLnJvb3Q7XG4gIFx0dGhpcy5tdXN0YWNoZSA9IG11c3RhY2hlO1xuXG4gIFx0dGhpcy5yZWYgPSByZWYgPSB0ZW1wbGF0ZS5yO1xuICBcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICBcdHRoaXMudW5yZXNvbHZlZCA9IFtdO1xuXG4gIFx0Ly8gRmluZCBiYXNlIGtleXBhdGhcbiAgXHRpZiAoa2V5cGF0aCA9IHNoYXJlZF9yZXNvbHZlUmVmKHJhY3RpdmUsIHJlZiwgcGFyZW50RnJhZ21lbnQpKSB7XG4gIFx0XHR0aGlzLmJhc2UgPSBrZXlwYXRoO1xuICBcdH0gZWxzZSB7XG4gIFx0XHR0aGlzLmJhc2VSZXNvbHZlciA9IG5ldyBSZXNvbHZlcnNfUmVmZXJlbmNlUmVzb2x2ZXIodGhpcywgcmVmLCBmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0XHRfdGhpcy5iYXNlID0ga2V5cGF0aDtcbiAgXHRcdFx0X3RoaXMuYmFzZVJlc29sdmVyID0gbnVsbDtcbiAgXHRcdFx0X3RoaXMuYnViYmxlKCk7XG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHQvLyBGaW5kIHZhbHVlcyBmb3IgbWVtYmVycywgb3IgbWFyayB0aGVtIGFzIHVucmVzb2x2ZWRcbiAgXHR0aGlzLm1lbWJlcnMgPSB0ZW1wbGF0ZS5tLm1hcChmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgXHRcdHJldHVybiBuZXcgUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyX01lbWJlclJlc29sdmVyKHRlbXBsYXRlLCBfdGhpcywgcGFyZW50RnJhZ21lbnQpO1xuICBcdH0pO1xuXG4gIFx0dGhpcy5yZWFkeSA9IHRydWU7XG4gIFx0dGhpcy5idWJibGUoKTsgLy8gdHJpZ2dlciBpbml0aWFsIHJlc29sdXRpb24gaWYgcG9zc2libGVcbiAgfTtcblxuICBSZWZlcmVuY2VFeHByZXNzaW9uUmVzb2x2ZXIucHJvdG90eXBlID0ge1xuICBcdGdldEtleXBhdGg6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciB2YWx1ZXMgPSB0aGlzLm1lbWJlcnMubWFwKFJlZmVyZW5jZUV4cHJlc3Npb25SZXNvbHZlcl9SZWZlcmVuY2VFeHByZXNzaW9uUmVzb2x2ZXJfX2dldFZhbHVlKTtcblxuICBcdFx0aWYgKCF2YWx1ZXMuZXZlcnkoaXNEZWZpbmVkKSB8fCB0aGlzLmJhc2VSZXNvbHZlcikge1xuICBcdFx0XHRyZXR1cm4gbnVsbDtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHRoaXMuYmFzZS5qb2luKHZhbHVlcy5qb2luKFwiLlwiKSk7XG4gIFx0fSxcblxuICBcdGJ1YmJsZTogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLnJlYWR5IHx8IHRoaXMuYmFzZVJlc29sdmVyKSB7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5jYWxsYmFjayh0aGlzLmdldEtleXBhdGgoKSk7XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5tZW1iZXJzLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcbiAgXHR9LFxuXG4gIFx0cmViaW5kOiBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdFx0dmFyIGNoYW5nZWQ7XG5cbiAgXHRcdGlmICh0aGlzLmJhc2UpIHtcbiAgXHRcdFx0dmFyIG5ld0Jhc2UgPSB0aGlzLmJhc2UucmVwbGFjZShvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHRcdFx0aWYgKG5ld0Jhc2UgJiYgbmV3QmFzZSAhPT0gdGhpcy5iYXNlKSB7XG4gIFx0XHRcdFx0dGhpcy5iYXNlID0gbmV3QmFzZTtcbiAgXHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHR0aGlzLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbiAobWVtYmVycykge1xuICBcdFx0XHRpZiAobWVtYmVycy5yZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkpIHtcbiAgXHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcbiAgXHRcdFx0fVxuICBcdFx0fSk7XG5cbiAgXHRcdGlmIChjaGFuZ2VkKSB7XG4gIFx0XHRcdHRoaXMuYnViYmxlKCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdGZvcmNlUmVzb2x1dGlvbjogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKHRoaXMuYmFzZVJlc29sdmVyKSB7XG4gIFx0XHRcdHRoaXMuYmFzZSA9IGdldEtleXBhdGgodGhpcy5yZWYpO1xuXG4gIFx0XHRcdHRoaXMuYmFzZVJlc29sdmVyLnVuYmluZCgpO1xuICBcdFx0XHR0aGlzLmJhc2VSZXNvbHZlciA9IG51bGw7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMubWVtYmVycy5mb3JFYWNoKGZvcmNlUmVzb2x1dGlvbik7XG4gIFx0XHR0aGlzLmJ1YmJsZSgpO1xuICBcdH1cbiAgfTtcblxuICBmdW5jdGlvbiBSZWZlcmVuY2VFeHByZXNzaW9uUmVzb2x2ZXJfUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyX19nZXRWYWx1ZShtZW1iZXIpIHtcbiAgXHRyZXR1cm4gbWVtYmVyLnZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gIFx0cmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcmNlUmVzb2x1dGlvbihtZW1iZXIpIHtcbiAgXHRtZW1iZXIuZm9yY2VSZXNvbHV0aW9uKCk7XG4gIH1cblxuICB2YXIgUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyX1JlZmVyZW5jZUV4cHJlc3Npb25SZXNvbHZlciA9IFJlZmVyZW5jZUV4cHJlc3Npb25SZXNvbHZlcjtcblxuICB2YXIgTXVzdGFjaGVfaW5pdGlhbGlzZSA9IE11c3RhY2hlJGluaXQ7XG4gIGZ1bmN0aW9uIE11c3RhY2hlJGluaXQobXVzdGFjaGUsIG9wdGlvbnMpIHtcblxuICBcdHZhciByZWYsIHBhcmVudEZyYWdtZW50LCB0ZW1wbGF0ZTtcblxuICBcdHBhcmVudEZyYWdtZW50ID0gb3B0aW9ucy5wYXJlbnRGcmFnbWVudDtcbiAgXHR0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG5cbiAgXHRtdXN0YWNoZS5yb290ID0gcGFyZW50RnJhZ21lbnQucm9vdDtcbiAgXHRtdXN0YWNoZS5wYXJlbnRGcmFnbWVudCA9IHBhcmVudEZyYWdtZW50O1xuICBcdG11c3RhY2hlLnBFbGVtZW50ID0gcGFyZW50RnJhZ21lbnQucEVsZW1lbnQ7XG5cbiAgXHRtdXN0YWNoZS50ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIFx0bXVzdGFjaGUuaW5kZXggPSBvcHRpb25zLmluZGV4IHx8IDA7XG4gIFx0bXVzdGFjaGUuaXNTdGF0aWMgPSBvcHRpb25zLnRlbXBsYXRlLnM7XG5cbiAgXHRtdXN0YWNoZS50eXBlID0gb3B0aW9ucy50ZW1wbGF0ZS50O1xuXG4gIFx0bXVzdGFjaGUucmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG4gIFx0Ly8gaWYgdGhpcyBpcyBhIHNpbXBsZSBtdXN0YWNoZSwgd2l0aCBhIHJlZmVyZW5jZSwgd2UganVzdCBuZWVkIHRvIHJlc29sdmVcbiAgXHQvLyB0aGUgcmVmZXJlbmNlIHRvIGEga2V5cGF0aFxuICBcdGlmIChyZWYgPSB0ZW1wbGF0ZS5yKSB7XG4gIFx0XHRtdXN0YWNoZS5yZXNvbHZlciA9IFJlc29sdmVyc19jcmVhdGVSZWZlcmVuY2VSZXNvbHZlcihtdXN0YWNoZSwgcmVmLCByZXNvbHZlKTtcbiAgXHR9XG5cbiAgXHQvLyBpZiBpdCdzIGFuIGV4cHJlc3Npb24sIHdlIGhhdmUgYSBiaXQgbW9yZSB3b3JrIHRvIGRvXG4gIFx0aWYgKG9wdGlvbnMudGVtcGxhdGUueCkge1xuICBcdFx0bXVzdGFjaGUucmVzb2x2ZXIgPSBuZXcgUmVzb2x2ZXJzX0V4cHJlc3Npb25SZXNvbHZlcihtdXN0YWNoZSwgcGFyZW50RnJhZ21lbnQsIG9wdGlvbnMudGVtcGxhdGUueCwgcmVzb2x2ZUFuZFJlYmluZENoaWxkcmVuKTtcbiAgXHR9XG5cbiAgXHRpZiAob3B0aW9ucy50ZW1wbGF0ZS5yeCkge1xuICBcdFx0bXVzdGFjaGUucmVzb2x2ZXIgPSBuZXcgUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyX1JlZmVyZW5jZUV4cHJlc3Npb25SZXNvbHZlcihtdXN0YWNoZSwgb3B0aW9ucy50ZW1wbGF0ZS5yeCwgcmVzb2x2ZUFuZFJlYmluZENoaWxkcmVuKTtcbiAgXHR9XG5cbiAgXHQvLyBTcGVjaWFsIGNhc2UgLSBpbnZlcnRlZCBzZWN0aW9uc1xuICBcdGlmIChtdXN0YWNoZS50ZW1wbGF0ZS5uID09PSBTRUNUSU9OX1VOTEVTUyAmJiAhbXVzdGFjaGUuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSkge1xuICBcdFx0bXVzdGFjaGUuc2V0VmFsdWUodW5kZWZpbmVkKTtcbiAgXHR9XG5cbiAgXHRmdW5jdGlvbiByZXNvbHZlKGtleXBhdGgpIHtcbiAgXHRcdG11c3RhY2hlLnJlc29sdmUoa2V5cGF0aCk7XG4gIFx0fVxuXG4gIFx0ZnVuY3Rpb24gcmVzb2x2ZUFuZFJlYmluZENoaWxkcmVuKG5ld0tleXBhdGgpIHtcbiAgXHRcdHZhciBvbGRLZXlwYXRoID0gbXVzdGFjaGUua2V5cGF0aDtcblxuICBcdFx0aWYgKG5ld0tleXBhdGggIT0gb2xkS2V5cGF0aCkge1xuICBcdFx0XHRtdXN0YWNoZS5yZXNvbHZlKG5ld0tleXBhdGgpO1xuXG4gIFx0XHRcdGlmIChvbGRLZXlwYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0XHRtdXN0YWNoZS5mcmFnbWVudHMgJiYgbXVzdGFjaGUuZnJhZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKGYpIHtcbiAgXHRcdFx0XHRcdGYucmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdFx0XHRcdH0pO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuICB9XG5cbiAgdmFyIE11c3RhY2hlX3Jlc29sdmUgPSBNdXN0YWNoZSRyZXNvbHZlO1xuXG4gIGZ1bmN0aW9uIE11c3RhY2hlJHJlc29sdmUoa2V5cGF0aCkge1xuICBcdHZhciB3YXNSZXNvbHZlZCwgdmFsdWUsIHR3b3dheUJpbmRpbmc7XG5cbiAgXHQvLyAnU3BlY2lhbCcga2V5cGF0aHMsIGUuZy4gQGZvbyBvciBANywgZW5jb2RlIGEgdmFsdWVcbiAgXHRpZiAoa2V5cGF0aCAmJiBrZXlwYXRoLmlzU3BlY2lhbCkge1xuICBcdFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHRcdHRoaXMuc2V0VmFsdWUoa2V5cGF0aC52YWx1ZSk7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0Ly8gSWYgd2UgcmVzb2x2ZWQgcHJldmlvdXNseSwgd2UgbmVlZCB0byB1bnJlZ2lzdGVyXG4gIFx0aWYgKHRoaXMucmVnaXN0ZXJlZCkge1xuICBcdFx0Ly8gdW5kZWZpbmVkIG9yIG51bGxcbiAgXHRcdHRoaXMucm9vdC52aWV3bW9kZWwudW5yZWdpc3Rlcih0aGlzLmtleXBhdGgsIHRoaXMpO1xuICBcdFx0dGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7XG5cbiAgXHRcdHdhc1Jlc29sdmVkID0gdHJ1ZTtcbiAgXHR9XG5cbiAgXHR0aGlzLmtleXBhdGggPSBrZXlwYXRoO1xuXG4gIFx0Ly8gSWYgdGhlIG5ldyBrZXlwYXRoIGV4aXN0cywgd2UgbmVlZCB0byByZWdpc3RlclxuICBcdC8vIHdpdGggdGhlIHZpZXdtb2RlbFxuICBcdGlmIChrZXlwYXRoICE9IHVuZGVmaW5lZCkge1xuICBcdFx0Ly8gdW5kZWZpbmVkIG9yIG51bGxcbiAgXHRcdHZhbHVlID0gdGhpcy5yb290LnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG4gIFx0XHR0aGlzLnJvb3Qudmlld21vZGVsLnJlZ2lzdGVyKGtleXBhdGgsIHRoaXMpO1xuXG4gIFx0XHR0aGlzLnJlZ2lzdGVyZWQgPSB0cnVlO1xuICBcdH1cblxuICBcdC8vIEVpdGhlciB3YXkgd2UgbmVlZCB0byBxdWV1ZSB1cCBhIHJlbmRlciAoYHZhbHVlYFxuICBcdC8vIHdpbGwgYmUgYHVuZGVmaW5lZGAgaWYgdGhlcmUncyBubyBrZXlwYXRoKVxuICBcdHRoaXMuc2V0VmFsdWUodmFsdWUpO1xuXG4gIFx0Ly8gVHdvLXdheSBiaW5kaW5ncyBuZWVkIHRvIHBvaW50IHRvIHRoZWlyIG5ldyB0YXJnZXQga2V5cGF0aFxuICBcdGlmICh3YXNSZXNvbHZlZCAmJiAodHdvd2F5QmluZGluZyA9IHRoaXMudHdvd2F5QmluZGluZykpIHtcbiAgXHRcdHR3b3dheUJpbmRpbmcucmVib3VuZCgpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBNdXN0YWNoZV9yZWJpbmQgPSBNdXN0YWNoZSRyZWJpbmQ7XG5cbiAgZnVuY3Rpb24gTXVzdGFjaGUkcmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpIHtcbiAgXHQvLyBDaGlsZHJlbiBmaXJzdFxuICBcdGlmICh0aGlzLmZyYWdtZW50cykge1xuICBcdFx0dGhpcy5mcmFnbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZikge1xuICBcdFx0XHRyZXR1cm4gZi5yZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCk7XG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHQvLyBFeHByZXNzaW9uIG11c3RhY2hlP1xuICBcdGlmICh0aGlzLnJlc29sdmVyKSB7XG4gIFx0XHR0aGlzLnJlc29sdmVyLnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgTXVzdGFjaGUgPSB7XG4gIFx0Z2V0VmFsdWU6IE11c3RhY2hlX2dldFZhbHVlLFxuICBcdGluaXQ6IE11c3RhY2hlX2luaXRpYWxpc2UsXG4gIFx0cmVzb2x2ZTogTXVzdGFjaGVfcmVzb2x2ZSxcbiAgXHRyZWJpbmQ6IE11c3RhY2hlX3JlYmluZFxuICB9O1xuXG4gIHZhciBJbnRlcnBvbGF0b3IgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHRoaXMudHlwZSA9IElOVEVSUE9MQVRPUjtcbiAgXHRNdXN0YWNoZS5pbml0KHRoaXMsIG9wdGlvbnMpO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUgPSB7XG4gIFx0dXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLm5vZGUuZGF0YSA9IHRoaXMudmFsdWUgPT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMudmFsdWU7XG4gIFx0fSxcbiAgXHRyZXNvbHZlOiBNdXN0YWNoZS5yZXNvbHZlLFxuICBcdHJlYmluZDogTXVzdGFjaGUucmViaW5kLFxuICBcdGRldGFjaDogc2hhcmVkX2RldGFjaCxcblxuICBcdHVuYmluZDogc2hhcmVkX3VuYmluZCxcblxuICBcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLm5vZGUpIHtcbiAgXHRcdFx0dGhpcy5ub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2FmZVRvU3RyaW5nVmFsdWUodGhpcy52YWx1ZSkpO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gdGhpcy5ub2RlO1xuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKHNob3VsZERlc3Ryb3kpIHtcbiAgXHRcdGlmIChzaG91bGREZXN0cm95KSB7XG4gIFx0XHRcdGRldGFjaE5vZGUodGhpcy5ub2RlKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0Z2V0VmFsdWU6IE11c3RhY2hlLmdldFZhbHVlLFxuXG4gIFx0Ly8gVEVNUFxuICBcdHNldFZhbHVlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgXHRcdHZhciB3cmFwcGVyO1xuXG4gIFx0XHQvLyBUT0RPIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBhcHByb2FjaCB0aGlzP1xuICBcdFx0aWYgKHRoaXMua2V5cGF0aCAmJiAod3JhcHBlciA9IHRoaXMucm9vdC52aWV3bW9kZWwud3JhcHBlZFt0aGlzLmtleXBhdGguc3RyXSkpIHtcbiAgXHRcdFx0dmFsdWUgPSB3cmFwcGVyLmdldCgpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIWlzRXF1YWwodmFsdWUsIHRoaXMudmFsdWUpKSB7XG4gIFx0XHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgXHRcdFx0dGhpcy5wYXJlbnRGcmFnbWVudC5idWJibGUoKTtcblxuICBcdFx0XHRpZiAodGhpcy5ub2RlKSB7XG4gIFx0XHRcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkVmlldyh0aGlzKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRmaXJzdE5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLm5vZGU7XG4gIFx0fSxcblxuICBcdHRvU3RyaW5nOiBmdW5jdGlvbiAoZXNjYXBlKSB7XG4gIFx0XHR2YXIgc3RyaW5nID0gXCJcIiArIHNhZmVUb1N0cmluZ1ZhbHVlKHRoaXMudmFsdWUpO1xuICBcdFx0cmV0dXJuIGVzY2FwZSA/IGVzY2FwZUh0bWwoc3RyaW5nKSA6IHN0cmluZztcbiAgXHR9XG4gIH07XG5cbiAgdmFyIGl0ZW1zX0ludGVycG9sYXRvciA9IEludGVycG9sYXRvcjtcblxuICB2YXIgU2VjdGlvbl9wcm90b3R5cGVfYnViYmxlID0gU2VjdGlvbiRidWJibGU7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiRidWJibGUoKSB7XG4gIFx0dGhpcy5wYXJlbnRGcmFnbWVudC5idWJibGUoKTtcbiAgfVxuXG4gIHZhciBTZWN0aW9uX3Byb3RvdHlwZV9kZXRhY2ggPSBTZWN0aW9uJGRldGFjaDtcblxuICBmdW5jdGlvbiBTZWN0aW9uJGRldGFjaCgpIHtcbiAgXHR2YXIgZG9jRnJhZztcblxuICBcdGlmICh0aGlzLmZyYWdtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50c1swXS5kZXRhY2goKTtcbiAgXHR9XG5cbiAgXHRkb2NGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIFx0dGhpcy5mcmFnbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICBcdFx0ZG9jRnJhZy5hcHBlbmRDaGlsZChpdGVtLmRldGFjaCgpKTtcbiAgXHR9KTtcblxuICBcdHJldHVybiBkb2NGcmFnO1xuICB9XG5cbiAgdmFyIGZpbmQgPSBTZWN0aW9uJGZpbmQ7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiRmaW5kKHNlbGVjdG9yKSB7XG4gIFx0dmFyIGksIGxlbiwgcXVlcnlSZXN1bHQ7XG5cbiAgXHRsZW4gPSB0aGlzLmZyYWdtZW50cy5sZW5ndGg7XG4gIFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRpZiAocXVlcnlSZXN1bHQgPSB0aGlzLmZyYWdtZW50c1tpXS5maW5kKHNlbGVjdG9yKSkge1xuICBcdFx0XHRyZXR1cm4gcXVlcnlSZXN1bHQ7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZmluZEFsbCA9IFNlY3Rpb24kZmluZEFsbDtcblxuICBmdW5jdGlvbiBTZWN0aW9uJGZpbmRBbGwoc2VsZWN0b3IsIHF1ZXJ5KSB7XG4gIFx0dmFyIGksIGxlbjtcblxuICBcdGxlbiA9IHRoaXMuZnJhZ21lbnRzLmxlbmd0aDtcbiAgXHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdHRoaXMuZnJhZ21lbnRzW2ldLmZpbmRBbGwoc2VsZWN0b3IsIHF1ZXJ5KTtcbiAgXHR9XG4gIH1cblxuICB2YXIgZmluZEFsbENvbXBvbmVudHMgPSBTZWN0aW9uJGZpbmRBbGxDb21wb25lbnRzO1xuXG4gIGZ1bmN0aW9uIFNlY3Rpb24kZmluZEFsbENvbXBvbmVudHMoc2VsZWN0b3IsIHF1ZXJ5KSB7XG4gIFx0dmFyIGksIGxlbjtcblxuICBcdGxlbiA9IHRoaXMuZnJhZ21lbnRzLmxlbmd0aDtcbiAgXHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdHRoaXMuZnJhZ21lbnRzW2ldLmZpbmRBbGxDb21wb25lbnRzKHNlbGVjdG9yLCBxdWVyeSk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIGZpbmRDb21wb25lbnQgPSBTZWN0aW9uJGZpbmRDb21wb25lbnQ7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiRmaW5kQ29tcG9uZW50KHNlbGVjdG9yKSB7XG4gIFx0dmFyIGksIGxlbiwgcXVlcnlSZXN1bHQ7XG5cbiAgXHRsZW4gPSB0aGlzLmZyYWdtZW50cy5sZW5ndGg7XG4gIFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRpZiAocXVlcnlSZXN1bHQgPSB0aGlzLmZyYWdtZW50c1tpXS5maW5kQ29tcG9uZW50KHNlbGVjdG9yKSkge1xuICBcdFx0XHRyZXR1cm4gcXVlcnlSZXN1bHQ7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZmluZE5leHROb2RlID0gU2VjdGlvbiRmaW5kTmV4dE5vZGU7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiRmaW5kTmV4dE5vZGUoZnJhZ21lbnQpIHtcbiAgXHRpZiAodGhpcy5mcmFnbWVudHNbZnJhZ21lbnQuaW5kZXggKyAxXSkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnRzW2ZyYWdtZW50LmluZGV4ICsgMV0uZmlyc3ROb2RlKCk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRoaXMucGFyZW50RnJhZ21lbnQuZmluZE5leHROb2RlKHRoaXMpO1xuICB9XG5cbiAgdmFyIGZpcnN0Tm9kZSA9IFNlY3Rpb24kZmlyc3ROb2RlO1xuXG4gIGZ1bmN0aW9uIFNlY3Rpb24kZmlyc3ROb2RlKCkge1xuICBcdHZhciBsZW4sIGksIG5vZGU7XG5cbiAgXHRpZiAobGVuID0gdGhpcy5mcmFnbWVudHMubGVuZ3RoKSB7XG4gIFx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdFx0aWYgKG5vZGUgPSB0aGlzLmZyYWdtZW50c1tpXS5maXJzdE5vZGUoKSkge1xuICBcdFx0XHRcdHJldHVybiBub2RlO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRoaXMucGFyZW50RnJhZ21lbnQuZmluZE5leHROb2RlKHRoaXMpO1xuICB9XG5cbiAgdmFyIHNodWZmbGUgPSBTZWN0aW9uJHNodWZmbGU7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiRzaHVmZmxlKG5ld0luZGljZXMpIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dmFyIHBhcmVudEZyYWdtZW50LCBmaXJzdENoYW5nZSwgaSwgbmV3TGVuZ3RoLCByZWJvdW5kRnJhZ21lbnRzLCBmcmFnbWVudE9wdGlvbnMsIGZyYWdtZW50O1xuXG4gIFx0Ly8gc2hvcnQgY2lyY3VpdCBhbnkgZG91YmxlLXVwZGF0ZXMsIGFuZCBlbnN1cmUgdGhhdCB0aGlzIGlzbid0IGFwcGxpZWQgdG9cbiAgXHQvLyBub24tbGlzdCBzZWN0aW9uc1xuICBcdGlmICh0aGlzLnNodWZmbGluZyB8fCB0aGlzLnVuYm91bmQgfHwgdGhpcy5jdXJyZW50U3VidHlwZSAhPT0gU0VDVElPTl9FQUNIKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0dGhpcy5zaHVmZmxpbmcgPSB0cnVlO1xuICBcdGdsb2JhbF9ydW5sb29wLnNjaGVkdWxlVGFzayhmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gX3RoaXMuc2h1ZmZsaW5nID0gZmFsc2U7XG4gIFx0fSk7XG5cbiAgXHRwYXJlbnRGcmFnbWVudCA9IHRoaXMucGFyZW50RnJhZ21lbnQ7XG5cbiAgXHRyZWJvdW5kRnJhZ21lbnRzID0gW107XG5cbiAgXHQvLyBUT0RPOiBuZWVkIHRvIHVwZGF0ZSB0aGlzXG4gIFx0Ly8gZmlyc3QsIHJlYmluZCBleGlzdGluZyBmcmFnbWVudHNcbiAgXHRuZXdJbmRpY2VzLmZvckVhY2goZnVuY3Rpb24gKG5ld0luZGV4LCBvbGRJbmRleCkge1xuICBcdFx0dmFyIGZyYWdtZW50LCBieSwgb2xkS2V5cGF0aCwgbmV3S2V5cGF0aCwgZGVwcztcblxuICBcdFx0aWYgKG5ld0luZGV4ID09PSBvbGRJbmRleCkge1xuICBcdFx0XHRyZWJvdW5kRnJhZ21lbnRzW25ld0luZGV4XSA9IF90aGlzLmZyYWdtZW50c1tvbGRJbmRleF07XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0ZnJhZ21lbnQgPSBfdGhpcy5mcmFnbWVudHNbb2xkSW5kZXhdO1xuXG4gIFx0XHRpZiAoZmlyc3RDaGFuZ2UgPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRmaXJzdENoYW5nZSA9IG9sZEluZGV4O1xuICBcdFx0fVxuXG4gIFx0XHQvLyBkb2VzIHRoaXMgZnJhZ21lbnQgbmVlZCB0byBiZSB0b3JuIGRvd24/XG4gIFx0XHRpZiAobmV3SW5kZXggPT09IC0xKSB7XG4gIFx0XHRcdF90aGlzLmZyYWdtZW50c1RvVW5yZW5kZXIucHVzaChmcmFnbWVudCk7XG4gIFx0XHRcdGZyYWdtZW50LnVuYmluZCgpO1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdC8vIE90aGVyd2lzZSwgaXQgbmVlZHMgdG8gYmUgcmVib3VuZCB0byBhIG5ldyBpbmRleFxuICBcdFx0YnkgPSBuZXdJbmRleCAtIG9sZEluZGV4O1xuICBcdFx0b2xkS2V5cGF0aCA9IF90aGlzLmtleXBhdGguam9pbihvbGRJbmRleCk7XG4gIFx0XHRuZXdLZXlwYXRoID0gX3RoaXMua2V5cGF0aC5qb2luKG5ld0luZGV4KTtcblxuICBcdFx0ZnJhZ21lbnQuaW5kZXggPSBuZXdJbmRleDtcblxuICBcdFx0Ly8gbm90aWZ5IGFueSByZWdpc3RlcmVkIGluZGV4IHJlZnMgZGlyZWN0bHlcbiAgXHRcdGlmIChkZXBzID0gZnJhZ21lbnQucmVnaXN0ZXJlZEluZGV4UmVmcykge1xuICBcdFx0XHRkZXBzLmZvckVhY2goc2h1ZmZsZV9fYmxpbmRSZWJpbmQpO1xuICBcdFx0fVxuXG4gIFx0XHRmcmFnbWVudC5yZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCk7XG4gIFx0XHRyZWJvdW5kRnJhZ21lbnRzW25ld0luZGV4XSA9IGZyYWdtZW50O1xuICBcdH0pO1xuXG4gIFx0bmV3TGVuZ3RoID0gdGhpcy5yb290LnZpZXdtb2RlbC5nZXQodGhpcy5rZXlwYXRoKS5sZW5ndGg7XG5cbiAgXHQvLyBJZiBub3RoaW5nIGNoYW5nZWQgd2l0aCB0aGUgZXhpc3RpbmcgZnJhZ21lbnRzLCB0aGVuIHdlIHN0YXJ0IGFkZGluZ1xuICBcdC8vIG5ldyBmcmFnbWVudHMgYXQgdGhlIGVuZC4uLlxuICBcdGlmIChmaXJzdENoYW5nZSA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHQvLyAuLi51bmxlc3MgdGhlcmUgYXJlIG5vIG5ldyBmcmFnbWVudHMgdG8gYWRkXG4gIFx0XHRpZiAodGhpcy5sZW5ndGggPT09IG5ld0xlbmd0aCkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdGZpcnN0Q2hhbmdlID0gdGhpcy5sZW5ndGg7XG4gIFx0fVxuXG4gIFx0dGhpcy5sZW5ndGggPSB0aGlzLmZyYWdtZW50cy5sZW5ndGggPSBuZXdMZW5ndGg7XG5cbiAgXHRpZiAodGhpcy5yZW5kZXJlZCkge1xuICBcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkVmlldyh0aGlzKTtcbiAgXHR9XG5cbiAgXHQvLyBQcmVwYXJlIG5ldyBmcmFnbWVudCBvcHRpb25zXG4gIFx0ZnJhZ21lbnRPcHRpb25zID0ge1xuICBcdFx0dGVtcGxhdGU6IHRoaXMudGVtcGxhdGUuZixcbiAgXHRcdHJvb3Q6IHRoaXMucm9vdCxcbiAgXHRcdG93bmVyOiB0aGlzXG4gIFx0fTtcblxuICBcdC8vIEFkZCBhcyBtYW55IG5ldyBmcmFnbWVudHMgYXMgd2UgbmVlZCB0bywgb3IgYWRkIGJhY2sgZXhpc3RpbmdcbiAgXHQvLyAoZGV0YWNoZWQpIGZyYWdtZW50c1xuICBcdGZvciAoaSA9IGZpcnN0Q2hhbmdlOyBpIDwgbmV3TGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdGZyYWdtZW50ID0gcmVib3VuZEZyYWdtZW50c1tpXTtcblxuICBcdFx0aWYgKCFmcmFnbWVudCkge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50c1RvQ3JlYXRlLnB1c2goaSk7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMuZnJhZ21lbnRzW2ldID0gZnJhZ21lbnQ7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gc2h1ZmZsZV9fYmxpbmRSZWJpbmQoZGVwKSB7XG4gIFx0Ly8gdGhlIGtleXBhdGggZG9lc24ndCBhY3R1YWxseSBtYXR0ZXIgaGVyZSBhcyBpdCB3b24ndCBoYXZlIGNoYW5nZWRcbiAgXHRkZXAucmViaW5kKFwiXCIsIFwiXCIpO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9yZWJpbmQgPSBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdE11c3RhY2hlLnJlYmluZC5jYWxsKHRoaXMsIG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICB9O1xuXG4gIHZhciBTZWN0aW9uX3Byb3RvdHlwZV9yZW5kZXIgPSBTZWN0aW9uJHJlbmRlcjtcblxuICBmdW5jdGlvbiBTZWN0aW9uJHJlbmRlcigpIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dGhpcy5kb2NGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIFx0dGhpcy5mcmFnbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZikge1xuICBcdFx0cmV0dXJuIF90aGlzLmRvY0ZyYWcuYXBwZW5kQ2hpbGQoZi5yZW5kZXIoKSk7XG4gIFx0fSk7XG5cbiAgXHR0aGlzLnJlbmRlcmVkRnJhZ21lbnRzID0gdGhpcy5mcmFnbWVudHMuc2xpY2UoKTtcbiAgXHR0aGlzLmZyYWdtZW50c1RvUmVuZGVyID0gW107XG5cbiAgXHR0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgXHRyZXR1cm4gdGhpcy5kb2NGcmFnO1xuICB9XG5cbiAgdmFyIHNldFZhbHVlID0gU2VjdGlvbiRzZXRWYWx1ZTtcblxuICBmdW5jdGlvbiBTZWN0aW9uJHNldFZhbHVlKHZhbHVlKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciB3cmFwcGVyLCBmcmFnbWVudE9wdGlvbnM7XG5cbiAgXHRpZiAodGhpcy51cGRhdGluZykge1xuICBcdFx0Ly8gSWYgYSBjaGlsZCBvZiB0aGlzIHNlY3Rpb24gY2F1c2VzIGEgcmUtZXZhbHVhdGlvbiAtIGZvciBleGFtcGxlLCBhblxuICBcdFx0Ly8gZXhwcmVzc2lvbiByZWZlcnMgdG8gYSBmdW5jdGlvbiB0aGF0IG11dGF0ZXMgdGhlIGFycmF5IHRoYXQgdGhpc1xuICBcdFx0Ly8gc2VjdGlvbiBkZXBlbmRzIG9uIC0gd2UnbGwgZW5kIHVwIHdpdGggYSBkb3VibGUgcmVuZGVyaW5nIGJ1ZyAoc2VlXG4gIFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vcmFjdGl2ZWpzL3JhY3RpdmUvaXNzdWVzLzc0OCkuIFRoaXMgcHJldmVudHMgaXQuXG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0dGhpcy51cGRhdGluZyA9IHRydWU7XG5cbiAgXHQvLyB3aXRoIHNlY3Rpb25zLCB3ZSBuZWVkIHRvIGdldCB0aGUgZmFrZSB2YWx1ZSBpZiB3ZSBoYXZlIGEgd3JhcHBlZCBvYmplY3RcbiAgXHRpZiAodGhpcy5rZXlwYXRoICYmICh3cmFwcGVyID0gdGhpcy5yb290LnZpZXdtb2RlbC53cmFwcGVkW3RoaXMua2V5cGF0aC5zdHJdKSkge1xuICBcdFx0dmFsdWUgPSB3cmFwcGVyLmdldCgpO1xuICBcdH1cblxuICBcdC8vIElmIGFueSBmcmFnbWVudHMgYXJlIGF3YWl0aW5nIGNyZWF0aW9uIGFmdGVyIGEgc3BsaWNlLFxuICBcdC8vIHRoaXMgaXMgdGhlIHBsYWNlIHRvIGRvIGl0XG4gIFx0aWYgKHRoaXMuZnJhZ21lbnRzVG9DcmVhdGUubGVuZ3RoKSB7XG4gIFx0XHRmcmFnbWVudE9wdGlvbnMgPSB7XG4gIFx0XHRcdHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLmYgfHwgW10sXG4gIFx0XHRcdHJvb3Q6IHRoaXMucm9vdCxcbiAgXHRcdFx0cEVsZW1lbnQ6IHRoaXMucEVsZW1lbnQsXG4gIFx0XHRcdG93bmVyOiB0aGlzXG4gIFx0XHR9O1xuXG4gIFx0XHR0aGlzLmZyYWdtZW50c1RvQ3JlYXRlLmZvckVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gIFx0XHRcdHZhciBmcmFnbWVudDtcblxuICBcdFx0XHRmcmFnbWVudE9wdGlvbnMuY29udGV4dCA9IF90aGlzLmtleXBhdGguam9pbihpbmRleCk7XG4gIFx0XHRcdGZyYWdtZW50T3B0aW9ucy5pbmRleCA9IGluZGV4O1xuXG4gIFx0XHRcdGZyYWdtZW50ID0gbmV3IHZpcnR1YWxkb21fRnJhZ21lbnQoZnJhZ21lbnRPcHRpb25zKTtcbiAgXHRcdFx0X3RoaXMuZnJhZ21lbnRzVG9SZW5kZXIucHVzaChfdGhpcy5mcmFnbWVudHNbaW5kZXhdID0gZnJhZ21lbnQpO1xuICBcdFx0fSk7XG5cbiAgXHRcdHRoaXMuZnJhZ21lbnRzVG9DcmVhdGUubGVuZ3RoID0gMDtcbiAgXHR9IGVsc2UgaWYgKHJlZXZhbHVhdGVTZWN0aW9uKHRoaXMsIHZhbHVlKSkge1xuICBcdFx0dGhpcy5idWJibGUoKTtcblxuICBcdFx0aWYgKHRoaXMucmVuZGVyZWQpIHtcbiAgXHRcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkVmlldyh0aGlzKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHR0aGlzLnZhbHVlID0gdmFsdWU7XG4gIFx0dGhpcy51cGRhdGluZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlQ3VycmVudFN1YnR5cGUoc2VjdGlvbiwgdmFsdWUsIG9iaikge1xuICBcdGlmICh2YWx1ZSA9PT0gU0VDVElPTl9FQUNIKSB7XG4gIFx0XHQvLyBtYWtlIHN1cmUgcmVmIHR5cGUgaXMgdXAgdG8gZGF0ZSBmb3Iga2V5IG9yIHZhbHVlIGluZGljZXNcbiAgXHRcdGlmIChzZWN0aW9uLmluZGV4UmVmcyAmJiBzZWN0aW9uLmluZGV4UmVmc1swXSkge1xuICBcdFx0XHR2YXIgcmVmID0gc2VjdGlvbi5pbmRleFJlZnNbMF07XG5cbiAgXHRcdFx0Ly8gd2hlbiBzd2l0Y2hpbmcgZmxhdm9ycywgbWFrZSBzdXJlIHRoZSBzZWN0aW9uIGdldHMgdXBkYXRlZFxuICBcdFx0XHRpZiAob2JqICYmIHJlZi50ID09PSBcImlcIiB8fCAhb2JqICYmIHJlZi50ID09PSBcImtcIikge1xuICBcdFx0XHRcdC8vIGlmIHN3aXRjaGluZyBmcm9tIG9iamVjdCB0byBsaXN0LCB1bmJpbmQgYWxsIG9mIHRoZSBvbGQgZnJhZ21lbnRzXG4gIFx0XHRcdFx0aWYgKCFvYmopIHtcbiAgXHRcdFx0XHRcdHNlY3Rpb24ubGVuZ3RoID0gMDtcbiAgXHRcdFx0XHRcdHNlY3Rpb24uZnJhZ21lbnRzVG9VbnJlbmRlciA9IHNlY3Rpb24uZnJhZ21lbnRzLnNsaWNlKDApO1xuICBcdFx0XHRcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyLmZvckVhY2goZnVuY3Rpb24gKGYpIHtcbiAgXHRcdFx0XHRcdFx0cmV0dXJuIGYudW5iaW5kKCk7XG4gIFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cblxuICBcdFx0XHRyZWYudCA9IG9iaiA/IFwia1wiIDogXCJpXCI7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0c2VjdGlvbi5jdXJyZW50U3VidHlwZSA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVldmFsdWF0ZVNlY3Rpb24oc2VjdGlvbiwgdmFsdWUpIHtcbiAgXHR2YXIgZnJhZ21lbnRPcHRpb25zID0ge1xuICBcdFx0dGVtcGxhdGU6IHNlY3Rpb24udGVtcGxhdGUuZiB8fCBbXSxcbiAgXHRcdHJvb3Q6IHNlY3Rpb24ucm9vdCxcbiAgXHRcdHBFbGVtZW50OiBzZWN0aW9uLnBhcmVudEZyYWdtZW50LnBFbGVtZW50LFxuICBcdFx0b3duZXI6IHNlY3Rpb25cbiAgXHR9O1xuXG4gIFx0c2VjdGlvbi5oYXNDb250ZXh0ID0gdHJ1ZTtcblxuICBcdC8vIElmIHdlIGFscmVhZHkga25vdyB0aGUgc2VjdGlvbiB0eXBlLCBncmVhdFxuICBcdC8vIFRPRE8gY2FuIHRoaXMgYmUgb3B0aW1pc2VkPyBpLmUuIHBpY2sgYW4gcmVldmFsdWF0ZVNlY3Rpb24gZnVuY3Rpb24gZHVyaW5nIGluaXRcbiAgXHQvLyBhbmQgYXZvaWQgZG9pbmcgdGhpcyBlYWNoIHRpbWU/XG4gIFx0aWYgKHNlY3Rpb24uc3VidHlwZSkge1xuICBcdFx0c3dpdGNoIChzZWN0aW9uLnN1YnR5cGUpIHtcbiAgXHRcdFx0Y2FzZSBTRUNUSU9OX0lGOlxuICBcdFx0XHRcdHNlY3Rpb24uaGFzQ29udGV4dCA9IGZhbHNlO1xuICBcdFx0XHRcdHJldHVybiByZWV2YWx1YXRlQ29uZGl0aW9uYWxTZWN0aW9uKHNlY3Rpb24sIHZhbHVlLCBmYWxzZSwgZnJhZ21lbnRPcHRpb25zKTtcblxuICBcdFx0XHRjYXNlIFNFQ1RJT05fVU5MRVNTOlxuICBcdFx0XHRcdHNlY3Rpb24uaGFzQ29udGV4dCA9IGZhbHNlO1xuICBcdFx0XHRcdHJldHVybiByZWV2YWx1YXRlQ29uZGl0aW9uYWxTZWN0aW9uKHNlY3Rpb24sIHZhbHVlLCB0cnVlLCBmcmFnbWVudE9wdGlvbnMpO1xuXG4gIFx0XHRcdGNhc2UgU0VDVElPTl9XSVRIOlxuICBcdFx0XHRcdHJldHVybiByZWV2YWx1YXRlQ29udGV4dFNlY3Rpb24oc2VjdGlvbiwgZnJhZ21lbnRPcHRpb25zKTtcblxuICBcdFx0XHRjYXNlIFNFQ1RJT05fSUZfV0lUSDpcbiAgXHRcdFx0XHRyZXR1cm4gcmVldmFsdWF0ZUNvbmRpdGlvbmFsQ29udGV4dFNlY3Rpb24oc2VjdGlvbiwgdmFsdWUsIGZyYWdtZW50T3B0aW9ucyk7XG5cbiAgXHRcdFx0Y2FzZSBTRUNUSU9OX0VBQ0g6XG4gIFx0XHRcdFx0aWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICBcdFx0XHRcdFx0Y2hhbmdlQ3VycmVudFN1YnR5cGUoc2VjdGlvbiwgc2VjdGlvbi5zdWJ0eXBlLCB0cnVlKTtcbiAgXHRcdFx0XHRcdHJldHVybiByZWV2YWx1YXRlTGlzdE9iamVjdFNlY3Rpb24oc2VjdGlvbiwgdmFsdWUsIGZyYWdtZW50T3B0aW9ucyk7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0Ly8gRmFsbHRocm91Z2ggLSBpZiBpdCdzIGEgY29uZGl0aW9uYWwgb3IgYW4gYXJyYXkgd2UgbmVlZCB0byBjb250aW51ZVxuICBcdFx0fVxuICBcdH1cblxuICBcdC8vIE90aGVyd2lzZSB3ZSBuZWVkIHRvIHdvcmsgb3V0IHdoYXQgc29ydCBvZiBzZWN0aW9uIHdlJ3JlIGRlYWxpbmcgd2l0aFxuICBcdHNlY3Rpb24ub3JkZXJlZCA9ICEhaXNBcnJheUxpa2UodmFsdWUpO1xuXG4gIFx0Ly8gT3JkZXJlZCBsaXN0IHNlY3Rpb25cbiAgXHRpZiAoc2VjdGlvbi5vcmRlcmVkKSB7XG4gIFx0XHRjaGFuZ2VDdXJyZW50U3VidHlwZShzZWN0aW9uLCBTRUNUSU9OX0VBQ0gsIGZhbHNlKTtcbiAgXHRcdHJldHVybiByZWV2YWx1YXRlTGlzdFNlY3Rpb24oc2VjdGlvbiwgdmFsdWUsIGZyYWdtZW50T3B0aW9ucyk7XG4gIFx0fVxuXG4gIFx0Ly8gVW5vcmRlcmVkIGxpc3QsIG9yIGNvbnRleHRcbiAgXHRpZiAoaXNPYmplY3QodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHQvLyBJbmRleCByZWZlcmVuY2UgaW5kaWNhdGVzIHNlY3Rpb24gc2hvdWxkIGJlIHRyZWF0ZWQgYXMgYSBsaXN0XG4gIFx0XHRpZiAoc2VjdGlvbi50ZW1wbGF0ZS5pKSB7XG4gIFx0XHRcdGNoYW5nZUN1cnJlbnRTdWJ0eXBlKHNlY3Rpb24sIFNFQ1RJT05fRUFDSCwgdHJ1ZSk7XG4gIFx0XHRcdHJldHVybiByZWV2YWx1YXRlTGlzdE9iamVjdFNlY3Rpb24oc2VjdGlvbiwgdmFsdWUsIGZyYWdtZW50T3B0aW9ucyk7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIE90aGVyd2lzZSwgb2JqZWN0IHByb3ZpZGVzIGNvbnRleHQgZm9yIGNvbnRlbnRzXG4gIFx0XHRjaGFuZ2VDdXJyZW50U3VidHlwZShzZWN0aW9uLCBTRUNUSU9OX1dJVEgsIGZhbHNlKTtcbiAgXHRcdHJldHVybiByZWV2YWx1YXRlQ29udGV4dFNlY3Rpb24oc2VjdGlvbiwgZnJhZ21lbnRPcHRpb25zKTtcbiAgXHR9XG5cbiAgXHQvLyBDb25kaXRpb25hbCBzZWN0aW9uXG4gIFx0Y2hhbmdlQ3VycmVudFN1YnR5cGUoc2VjdGlvbiwgU0VDVElPTl9JRiwgZmFsc2UpO1xuICBcdHNlY3Rpb24uaGFzQ29udGV4dCA9IGZhbHNlO1xuICBcdHJldHVybiByZWV2YWx1YXRlQ29uZGl0aW9uYWxTZWN0aW9uKHNlY3Rpb24sIHZhbHVlLCBmYWxzZSwgZnJhZ21lbnRPcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZXZhbHVhdGVMaXN0U2VjdGlvbihzZWN0aW9uLCB2YWx1ZSwgZnJhZ21lbnRPcHRpb25zKSB7XG4gIFx0dmFyIGksIGxlbmd0aCwgZnJhZ21lbnQ7XG5cbiAgXHRsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG5cbiAgXHRpZiAobGVuZ3RoID09PSBzZWN0aW9uLmxlbmd0aCkge1xuICBcdFx0Ly8gTm90aGluZyB0byBkb1xuICBcdFx0cmV0dXJuIGZhbHNlO1xuICBcdH1cblxuICBcdC8vIGlmIHRoZSBhcnJheSBpcyBzaG9ydGVyIHRoYW4gaXQgd2FzIHByZXZpb3VzbHksIHJlbW92ZSBpdGVtc1xuICBcdGlmIChsZW5ndGggPCBzZWN0aW9uLmxlbmd0aCkge1xuICBcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyID0gc2VjdGlvbi5mcmFnbWVudHMuc3BsaWNlKGxlbmd0aCwgc2VjdGlvbi5sZW5ndGggLSBsZW5ndGgpO1xuICBcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcbiAgXHR9XG5cbiAgXHQvLyBvdGhlcndpc2UuLi5cbiAgXHRlbHNlIHtcbiAgXHRcdGlmIChsZW5ndGggPiBzZWN0aW9uLmxlbmd0aCkge1xuICBcdFx0XHQvLyBhZGQgYW55IG5ldyBvbmVzXG4gIFx0XHRcdGZvciAoaSA9IHNlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdFx0XHQvLyBhcHBlbmQgbGlzdCBpdGVtIHRvIGNvbnRleHQgc3RhY2tcbiAgXHRcdFx0XHRmcmFnbWVudE9wdGlvbnMuY29udGV4dCA9IHNlY3Rpb24ua2V5cGF0aC5qb2luKGkpO1xuICBcdFx0XHRcdGZyYWdtZW50T3B0aW9ucy5pbmRleCA9IGk7XG5cbiAgXHRcdFx0XHRmcmFnbWVudCA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KGZyYWdtZW50T3B0aW9ucyk7XG4gIFx0XHRcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1JlbmRlci5wdXNoKHNlY3Rpb24uZnJhZ21lbnRzW2ldID0gZnJhZ21lbnQpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0c2VjdGlvbi5sZW5ndGggPSBsZW5ndGg7XG4gIFx0cmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiByZWV2YWx1YXRlTGlzdE9iamVjdFNlY3Rpb24oc2VjdGlvbiwgdmFsdWUsIGZyYWdtZW50T3B0aW9ucykge1xuICBcdHZhciBpZCwgaSwgaGFzS2V5LCBmcmFnbWVudCwgY2hhbmdlZCwgZGVwcztcblxuICBcdGhhc0tleSA9IHNlY3Rpb24uaGFzS2V5IHx8IChzZWN0aW9uLmhhc0tleSA9IHt9KTtcblxuICBcdC8vIHJlbW92ZSBhbnkgZnJhZ21lbnRzIHRoYXQgc2hvdWxkIG5vIGxvbmdlciBleGlzdFxuICBcdGkgPSBzZWN0aW9uLmZyYWdtZW50cy5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0ZnJhZ21lbnQgPSBzZWN0aW9uLmZyYWdtZW50c1tpXTtcblxuICBcdFx0aWYgKCEoZnJhZ21lbnQua2V5IGluIHZhbHVlKSkge1xuICBcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblxuICBcdFx0XHRmcmFnbWVudC51bmJpbmQoKTtcbiAgXHRcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyLnB1c2goZnJhZ21lbnQpO1xuICBcdFx0XHRzZWN0aW9uLmZyYWdtZW50cy5zcGxpY2UoaSwgMSk7XG5cbiAgXHRcdFx0aGFzS2V5W2ZyYWdtZW50LmtleV0gPSBmYWxzZTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBub3RpZnkgYW55IGRlcGVuZGVudHMgYWJvdXQgY2hhbmdlZCBpbmRpY2VzXG4gIFx0aSA9IHNlY3Rpb24uZnJhZ21lbnRzLmxlbmd0aDtcbiAgXHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRmcmFnbWVudCA9IHNlY3Rpb24uZnJhZ21lbnRzW2ldO1xuXG4gIFx0XHRpZiAoZnJhZ21lbnQuaW5kZXggIT09IGkpIHtcbiAgXHRcdFx0ZnJhZ21lbnQuaW5kZXggPSBpO1xuICBcdFx0XHRpZiAoZGVwcyA9IGZyYWdtZW50LnJlZ2lzdGVyZWRJbmRleFJlZnMpIHtcbiAgXHRcdFx0XHRkZXBzLmZvckVhY2goc2V0VmFsdWVfX2JsaW5kUmViaW5kKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cblxuICBcdC8vIGFkZCBhbnkgdGhhdCBoYXZlbid0IGJlZW4gY3JlYXRlZCB5ZXRcbiAgXHRpID0gc2VjdGlvbi5mcmFnbWVudHMubGVuZ3RoO1xuICBcdGZvciAoaWQgaW4gdmFsdWUpIHtcbiAgXHRcdGlmICghaGFzS2V5W2lkXSkge1xuICBcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblxuICBcdFx0XHRmcmFnbWVudE9wdGlvbnMuY29udGV4dCA9IHNlY3Rpb24ua2V5cGF0aC5qb2luKGlkKTtcbiAgXHRcdFx0ZnJhZ21lbnRPcHRpb25zLmtleSA9IGlkO1xuICBcdFx0XHRmcmFnbWVudE9wdGlvbnMuaW5kZXggPSBpKys7XG5cbiAgXHRcdFx0ZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudChmcmFnbWVudE9wdGlvbnMpO1xuXG4gIFx0XHRcdHNlY3Rpb24uZnJhZ21lbnRzVG9SZW5kZXIucHVzaChmcmFnbWVudCk7XG4gIFx0XHRcdHNlY3Rpb24uZnJhZ21lbnRzLnB1c2goZnJhZ21lbnQpO1xuICBcdFx0XHRoYXNLZXlbaWRdID0gdHJ1ZTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRzZWN0aW9uLmxlbmd0aCA9IHNlY3Rpb24uZnJhZ21lbnRzLmxlbmd0aDtcbiAgXHRyZXR1cm4gY2hhbmdlZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZXZhbHVhdGVDb25kaXRpb25hbENvbnRleHRTZWN0aW9uKHNlY3Rpb24sIHZhbHVlLCBmcmFnbWVudE9wdGlvbnMpIHtcbiAgXHRpZiAodmFsdWUpIHtcbiAgXHRcdHJldHVybiByZWV2YWx1YXRlQ29udGV4dFNlY3Rpb24oc2VjdGlvbiwgZnJhZ21lbnRPcHRpb25zKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0cmV0dXJuIHJlbW92ZVNlY3Rpb25GcmFnbWVudHMoc2VjdGlvbik7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gcmVldmFsdWF0ZUNvbnRleHRTZWN0aW9uKHNlY3Rpb24sIGZyYWdtZW50T3B0aW9ucykge1xuICBcdHZhciBmcmFnbWVudDtcblxuICBcdC8vIC4uLnRoZW4gaWYgaXQgaXNuJ3QgcmVuZGVyZWQsIHJlbmRlciBpdCwgYWRkaW5nIHNlY3Rpb24ua2V5cGF0aCB0byB0aGUgY29udGV4dCBzdGFja1xuICBcdC8vIChpZiBpdCBpcyBhbHJlYWR5IHJlbmRlcmVkLCB0aGVuIGFueSBjaGlsZHJlbiBkZXBlbmRlbnQgb24gdGhlIGNvbnRleHQgc3RhY2tcbiAgXHQvLyB3aWxsIHVwZGF0ZSB0aGVtc2VsdmVzIHdpdGhvdXQgYW55IHByb21wdGluZylcbiAgXHRpZiAoIXNlY3Rpb24ubGVuZ3RoKSB7XG4gIFx0XHQvLyBhcHBlbmQgdGhpcyBzZWN0aW9uIHRvIHRoZSBjb250ZXh0IHN0YWNrXG4gIFx0XHRmcmFnbWVudE9wdGlvbnMuY29udGV4dCA9IHNlY3Rpb24ua2V5cGF0aDtcbiAgXHRcdGZyYWdtZW50T3B0aW9ucy5pbmRleCA9IDA7XG5cbiAgXHRcdGZyYWdtZW50ID0gbmV3IHZpcnR1YWxkb21fRnJhZ21lbnQoZnJhZ21lbnRPcHRpb25zKTtcblxuICBcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1JlbmRlci5wdXNoKHNlY3Rpb24uZnJhZ21lbnRzWzBdID0gZnJhZ21lbnQpO1xuICBcdFx0c2VjdGlvbi5sZW5ndGggPSAxO1xuXG4gIFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiByZWV2YWx1YXRlQ29uZGl0aW9uYWxTZWN0aW9uKHNlY3Rpb24sIHZhbHVlLCBpbnZlcnRlZCwgZnJhZ21lbnRPcHRpb25zKSB7XG4gIFx0dmFyIGRvUmVuZGVyLCBlbXB0eUFycmF5LCBlbXB0eU9iamVjdCwgZnJhZ21lbnQsIG5hbWU7XG5cbiAgXHRlbXB0eUFycmF5ID0gaXNBcnJheUxpa2UodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMDtcbiAgXHRlbXB0eU9iamVjdCA9IGZhbHNlO1xuICBcdGlmICghaXNBcnJheUxpa2UodmFsdWUpICYmIGlzT2JqZWN0KHZhbHVlKSkge1xuICBcdFx0ZW1wdHlPYmplY3QgPSB0cnVlO1xuICBcdFx0Zm9yIChuYW1lIGluIHZhbHVlKSB7XG4gIFx0XHRcdGVtcHR5T2JqZWN0ID0gZmFsc2U7XG4gIFx0XHRcdGJyZWFrO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChpbnZlcnRlZCkge1xuICBcdFx0ZG9SZW5kZXIgPSBlbXB0eUFycmF5IHx8IGVtcHR5T2JqZWN0IHx8ICF2YWx1ZTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0ZG9SZW5kZXIgPSB2YWx1ZSAmJiAhZW1wdHlBcnJheSAmJiAhZW1wdHlPYmplY3Q7XG4gIFx0fVxuXG4gIFx0aWYgKGRvUmVuZGVyKSB7XG4gIFx0XHRpZiAoIXNlY3Rpb24ubGVuZ3RoKSB7XG4gIFx0XHRcdC8vIG5vIGNoYW5nZSB0byBjb250ZXh0IHN0YWNrXG4gIFx0XHRcdGZyYWdtZW50T3B0aW9ucy5pbmRleCA9IDA7XG5cbiAgXHRcdFx0ZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudChmcmFnbWVudE9wdGlvbnMpO1xuICBcdFx0XHRzZWN0aW9uLmZyYWdtZW50c1RvUmVuZGVyLnB1c2goc2VjdGlvbi5mcmFnbWVudHNbMF0gPSBmcmFnbWVudCk7XG4gIFx0XHRcdHNlY3Rpb24ubGVuZ3RoID0gMTtcblxuICBcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKHNlY3Rpb24ubGVuZ3RoID4gMSkge1xuICBcdFx0XHRzZWN0aW9uLmZyYWdtZW50c1RvVW5yZW5kZXIgPSBzZWN0aW9uLmZyYWdtZW50cy5zcGxpY2UoMSk7XG4gIFx0XHRcdHNlY3Rpb24uZnJhZ21lbnRzVG9VbnJlbmRlci5mb3JFYWNoKG1ldGhvZENhbGxlcnNfX3VuYmluZCk7XG5cbiAgXHRcdFx0cmV0dXJuIHRydWU7XG4gIFx0XHR9XG4gIFx0fSBlbHNlIHtcbiAgXHRcdHJldHVybiByZW1vdmVTZWN0aW9uRnJhZ21lbnRzKHNlY3Rpb24pO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVNlY3Rpb25GcmFnbWVudHMoc2VjdGlvbikge1xuICBcdGlmIChzZWN0aW9uLmxlbmd0aCkge1xuICBcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyID0gc2VjdGlvbi5mcmFnbWVudHMuc3BsaWNlKDAsIHNlY3Rpb24uZnJhZ21lbnRzLmxlbmd0aCkuZmlsdGVyKGlzUmVuZGVyZWQpO1xuICBcdFx0c2VjdGlvbi5mcmFnbWVudHNUb1VucmVuZGVyLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcbiAgXHRcdHNlY3Rpb24ubGVuZ3RoID0gc2VjdGlvbi5mcmFnbWVudHNUb1JlbmRlci5sZW5ndGggPSAwO1xuICBcdFx0cmV0dXJuIHRydWU7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gaXNSZW5kZXJlZChmcmFnbWVudCkge1xuICBcdHJldHVybiBmcmFnbWVudC5yZW5kZXJlZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFZhbHVlX19ibGluZFJlYmluZChkZXApIHtcbiAgXHQvLyB0aGUga2V5cGF0aCBkb2Vzbid0IGFjdHVhbGx5IG1hdHRlciBoZXJlIGFzIGl0IHdvbid0IGhhdmUgY2hhbmdlZFxuICBcdGRlcC5yZWJpbmQoXCJcIiwgXCJcIik7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX3RvU3RyaW5nID0gU2VjdGlvbiR0b1N0cmluZztcblxuICBmdW5jdGlvbiBTZWN0aW9uJHRvU3RyaW5nKGVzY2FwZSkge1xuICBcdHZhciBzdHIsIGksIGxlbjtcblxuICBcdHN0ciA9IFwiXCI7XG5cbiAgXHRpID0gMDtcbiAgXHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuICBcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0c3RyICs9IHRoaXMuZnJhZ21lbnRzW2ldLnRvU3RyaW5nKGVzY2FwZSk7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHN0cjtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGVfdW5iaW5kID0gU2VjdGlvbiR1bmJpbmQ7XG4gIGZ1bmN0aW9uIFNlY3Rpb24kdW5iaW5kKCkge1xuICBcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHR0aGlzLmZyYWdtZW50cy5mb3JFYWNoKG1ldGhvZENhbGxlcnNfX3VuYmluZCk7XG4gIFx0dGhpcy5mcmFnbWVudHNUb1JlbmRlci5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7XG4gIFx0XHRyZXR1cm4gcmVtb3ZlRnJvbUFycmF5KF90aGlzLmZyYWdtZW50cywgZik7XG4gIFx0fSk7XG4gIFx0dGhpcy5mcmFnbWVudHNUb1JlbmRlciA9IFtdO1xuICBcdHNoYXJlZF91bmJpbmQuY2FsbCh0aGlzKTtcblxuICBcdHRoaXMubGVuZ3RoID0gMDtcbiAgXHR0aGlzLnVuYm91bmQgPSB0cnVlO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV91bnJlbmRlciA9IFNlY3Rpb24kdW5yZW5kZXI7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiR1bnJlbmRlcihzaG91bGREZXN0cm95KSB7XG4gIFx0dGhpcy5mcmFnbWVudHMuZm9yRWFjaChzaG91bGREZXN0cm95ID8gdW5yZW5kZXJBbmREZXN0cm95IDogcHJvdG90eXBlX3VucmVuZGVyX191bnJlbmRlcik7XG4gIFx0dGhpcy5yZW5kZXJlZEZyYWdtZW50cyA9IFtdO1xuICBcdHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVucmVuZGVyQW5kRGVzdHJveShmcmFnbWVudCkge1xuICBcdGZyYWdtZW50LnVucmVuZGVyKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvdG90eXBlX3VucmVuZGVyX191bnJlbmRlcihmcmFnbWVudCkge1xuICBcdGZyYWdtZW50LnVucmVuZGVyKGZhbHNlKTtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGVfdXBkYXRlID0gU2VjdGlvbiR1cGRhdGU7XG5cbiAgZnVuY3Rpb24gU2VjdGlvbiR1cGRhdGUoKSB7XG4gIFx0dmFyIGZyYWdtZW50LCByZW5kZXJJbmRleCwgcmVuZGVyZWRGcmFnbWVudHMsIGFuY2hvciwgdGFyZ2V0LCBpLCBsZW47XG5cbiAgXHQvLyBgdGhpcy5yZW5kZXJlZEZyYWdtZW50c2AgaXMgaW4gdGhlIG9yZGVyIG9mIHRoZSBwcmV2aW91cyByZW5kZXIuXG4gIFx0Ly8gSWYgZnJhZ21lbnRzIGhhdmUgc2h1ZmZsZWQgYWJvdXQsIHRoaXMgYWxsb3dzIHVzIHRvIHF1aWNrbHlcbiAgXHQvLyByZWluc2VydCB0aGVtIGluIHRoZSBjb3JyZWN0IHBsYWNlXG4gIFx0cmVuZGVyZWRGcmFnbWVudHMgPSB0aGlzLnJlbmRlcmVkRnJhZ21lbnRzO1xuXG4gIFx0Ly8gUmVtb3ZlIGZyYWdtZW50cyB0aGF0IGhhdmUgYmVlbiBtYXJrZWQgZm9yIGRlc3RydWN0aW9uXG4gIFx0d2hpbGUgKGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudHNUb1VucmVuZGVyLnBvcCgpKSB7XG4gIFx0XHRmcmFnbWVudC51bnJlbmRlcih0cnVlKTtcbiAgXHRcdHJlbmRlcmVkRnJhZ21lbnRzLnNwbGljZShyZW5kZXJlZEZyYWdtZW50cy5pbmRleE9mKGZyYWdtZW50KSwgMSk7XG4gIFx0fVxuXG4gIFx0Ly8gUmVuZGVyIG5ldyBmcmFnbWVudHMgKGJ1dCBkb24ndCBpbnNlcnQgdGhlbSB5ZXQpXG4gIFx0d2hpbGUgKGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudHNUb1JlbmRlci5zaGlmdCgpKSB7XG4gIFx0XHRmcmFnbWVudC5yZW5kZXIoKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5yZW5kZXJlZCkge1xuICBcdFx0dGFyZ2V0ID0gdGhpcy5wYXJlbnRGcmFnbWVudC5nZXROb2RlKCk7XG4gIFx0fVxuXG4gIFx0bGVuID0gdGhpcy5mcmFnbWVudHMubGVuZ3RoO1xuICBcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0ZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50c1tpXTtcbiAgXHRcdHJlbmRlckluZGV4ID0gcmVuZGVyZWRGcmFnbWVudHMuaW5kZXhPZihmcmFnbWVudCwgaSk7IC8vIHNlYXJjaCBmcm9tIGN1cnJlbnQgaW5kZXggLSBpdCdzIGd1YXJhbnRlZWQgdG8gYmUgdGhlIHNhbWUgb3IgaGlnaGVyXG5cbiAgXHRcdGlmIChyZW5kZXJJbmRleCA9PT0gaSkge1xuICBcdFx0XHQvLyBhbHJlYWR5IGluIHRoZSByaWdodCBwbGFjZS4gaW5zZXJ0IGFjY3VtdWxhdGVkIG5vZGVzIChpZiBhbnkpIGFuZCBjYXJyeSBvblxuICBcdFx0XHRpZiAodGhpcy5kb2NGcmFnLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0YW5jaG9yID0gZnJhZ21lbnQuZmlyc3ROb2RlKCk7XG4gIFx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSh0aGlzLmRvY0ZyYWcsIGFuY2hvcik7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRjb250aW51ZTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5kb2NGcmFnLmFwcGVuZENoaWxkKGZyYWdtZW50LmRldGFjaCgpKTtcblxuICBcdFx0Ly8gdXBkYXRlIHJlbmRlcmVkRnJhZ21lbnRzXG4gIFx0XHRpZiAocmVuZGVySW5kZXggIT09IC0xKSB7XG4gIFx0XHRcdHJlbmRlcmVkRnJhZ21lbnRzLnNwbGljZShyZW5kZXJJbmRleCwgMSk7XG4gIFx0XHR9XG4gIFx0XHRyZW5kZXJlZEZyYWdtZW50cy5zcGxpY2UoaSwgMCwgZnJhZ21lbnQpO1xuICBcdH1cblxuICBcdGlmICh0aGlzLnJlbmRlcmVkICYmIHRoaXMuZG9jRnJhZy5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICBcdFx0YW5jaG9yID0gdGhpcy5wYXJlbnRGcmFnbWVudC5maW5kTmV4dE5vZGUodGhpcyk7XG4gIFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHRoaXMuZG9jRnJhZywgYW5jaG9yKTtcbiAgXHR9XG5cbiAgXHQvLyBTYXZlIHRoZSByZW5kZXJpbmcgb3JkZXIgZm9yIG5leHQgdGltZVxuICBcdHRoaXMucmVuZGVyZWRGcmFnbWVudHMgPSB0aGlzLmZyYWdtZW50cy5zbGljZSgpO1xuICB9XG5cbiAgdmFyIFNlY3Rpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHRoaXMudHlwZSA9IFNFQ1RJT047XG4gIFx0dGhpcy5zdWJ0eXBlID0gdGhpcy5jdXJyZW50U3VidHlwZSA9IG9wdGlvbnMudGVtcGxhdGUubjtcbiAgXHR0aGlzLmludmVydGVkID0gdGhpcy5zdWJ0eXBlID09PSBTRUNUSU9OX1VOTEVTUztcblxuICBcdHRoaXMucEVsZW1lbnQgPSBvcHRpb25zLnBFbGVtZW50O1xuXG4gIFx0dGhpcy5mcmFnbWVudHMgPSBbXTtcbiAgXHR0aGlzLmZyYWdtZW50c1RvQ3JlYXRlID0gW107XG4gIFx0dGhpcy5mcmFnbWVudHNUb1JlbmRlciA9IFtdO1xuICBcdHRoaXMuZnJhZ21lbnRzVG9VbnJlbmRlciA9IFtdO1xuXG4gIFx0aWYgKG9wdGlvbnMudGVtcGxhdGUuaSkge1xuICBcdFx0dGhpcy5pbmRleFJlZnMgPSBvcHRpb25zLnRlbXBsYXRlLmkuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbiAoaywgaSkge1xuICBcdFx0XHRyZXR1cm4geyBuOiBrLCB0OiBpID09PSAwID8gXCJrXCIgOiBcImlcIiB9O1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0dGhpcy5yZW5kZXJlZEZyYWdtZW50cyA9IFtdO1xuXG4gIFx0dGhpcy5sZW5ndGggPSAwOyAvLyBudW1iZXIgb2YgdGltZXMgdGhpcyBzZWN0aW9uIGlzIHJlbmRlcmVkXG5cbiAgXHRNdXN0YWNoZS5pbml0KHRoaXMsIG9wdGlvbnMpO1xuICB9O1xuXG4gIFNlY3Rpb24ucHJvdG90eXBlID0ge1xuICBcdGJ1YmJsZTogU2VjdGlvbl9wcm90b3R5cGVfYnViYmxlLFxuICBcdGRldGFjaDogU2VjdGlvbl9wcm90b3R5cGVfZGV0YWNoLFxuICBcdGZpbmQ6IGZpbmQsXG4gIFx0ZmluZEFsbDogZmluZEFsbCxcbiAgXHRmaW5kQWxsQ29tcG9uZW50czogZmluZEFsbENvbXBvbmVudHMsXG4gIFx0ZmluZENvbXBvbmVudDogZmluZENvbXBvbmVudCxcbiAgXHRmaW5kTmV4dE5vZGU6IGZpbmROZXh0Tm9kZSxcbiAgXHRmaXJzdE5vZGU6IGZpcnN0Tm9kZSxcbiAgXHRnZXRJbmRleFJlZjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgXHRcdGlmICh0aGlzLmluZGV4UmVmcykge1xuICBcdFx0XHR2YXIgaSA9IHRoaXMuaW5kZXhSZWZzLmxlbmd0aDtcbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdHZhciByZWYgPSB0aGlzLmluZGV4UmVmc1tpXTtcbiAgXHRcdFx0XHRpZiAocmVmLm4gPT09IG5hbWUpIHtcbiAgXHRcdFx0XHRcdHJldHVybiByZWY7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fSxcbiAgXHRnZXRWYWx1ZTogTXVzdGFjaGUuZ2V0VmFsdWUsXG4gIFx0c2h1ZmZsZTogc2h1ZmZsZSxcbiAgXHRyZWJpbmQ6IHByb3RvdHlwZV9yZWJpbmQsXG4gIFx0cmVuZGVyOiBTZWN0aW9uX3Byb3RvdHlwZV9yZW5kZXIsXG4gIFx0cmVzb2x2ZTogTXVzdGFjaGUucmVzb2x2ZSxcbiAgXHRzZXRWYWx1ZTogc2V0VmFsdWUsXG4gIFx0dG9TdHJpbmc6IHByb3RvdHlwZV90b1N0cmluZyxcbiAgXHR1bmJpbmQ6IHByb3RvdHlwZV91bmJpbmQsXG4gIFx0dW5yZW5kZXI6IHByb3RvdHlwZV91bnJlbmRlcixcbiAgXHR1cGRhdGU6IHByb3RvdHlwZV91cGRhdGVcbiAgfTtcblxuICB2YXIgX1NlY3Rpb24gPSBTZWN0aW9uO1xuXG4gIHZhciBUcmlwbGVfcHJvdG90eXBlX2RldGFjaCA9IFRyaXBsZSRkZXRhY2g7XG5cbiAgZnVuY3Rpb24gVHJpcGxlJGRldGFjaCgpIHtcbiAgXHR2YXIgbGVuLCBpO1xuXG4gIFx0aWYgKHRoaXMuZG9jRnJhZykge1xuICBcdFx0bGVuID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gIFx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdFx0dGhpcy5kb2NGcmFnLmFwcGVuZENoaWxkKHRoaXMubm9kZXNbaV0pO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gdGhpcy5kb2NGcmFnO1xuICBcdH1cbiAgfVxuXG4gIHZhciBUcmlwbGVfcHJvdG90eXBlX2ZpbmQgPSBUcmlwbGUkZmluZDtcbiAgZnVuY3Rpb24gVHJpcGxlJGZpbmQoc2VsZWN0b3IpIHtcbiAgXHR2YXIgaSwgbGVuLCBub2RlLCBxdWVyeVJlc3VsdDtcblxuICBcdGxlbiA9IHRoaXMubm9kZXMubGVuZ3RoO1xuICBcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0bm9kZSA9IHRoaXMubm9kZXNbaV07XG5cbiAgXHRcdGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSB7XG4gIFx0XHRcdGNvbnRpbnVlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAobWF0Y2hlcyhub2RlLCBzZWxlY3RvcikpIHtcbiAgXHRcdFx0cmV0dXJuIG5vZGU7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChxdWVyeVJlc3VsdCA9IG5vZGUucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpIHtcbiAgXHRcdFx0cmV0dXJuIHF1ZXJ5UmVzdWx0O1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIFRyaXBsZV9wcm90b3R5cGVfZmluZEFsbCA9IFRyaXBsZSRmaW5kQWxsO1xuICBmdW5jdGlvbiBUcmlwbGUkZmluZEFsbChzZWxlY3RvciwgcXVlcnlSZXN1bHQpIHtcbiAgXHR2YXIgaSwgbGVuLCBub2RlLCBxdWVyeUFsbFJlc3VsdCwgbnVtTm9kZXMsIGo7XG5cbiAgXHRsZW4gPSB0aGlzLm5vZGVzLmxlbmd0aDtcbiAgXHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgXHRcdG5vZGUgPSB0aGlzLm5vZGVzW2ldO1xuXG4gIFx0XHRpZiAobm9kZS5ub2RlVHlwZSAhPT0gMSkge1xuICBcdFx0XHRjb250aW51ZTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKG1hdGNoZXMobm9kZSwgc2VsZWN0b3IpKSB7XG4gIFx0XHRcdHF1ZXJ5UmVzdWx0LnB1c2gobm9kZSk7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChxdWVyeUFsbFJlc3VsdCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpIHtcbiAgXHRcdFx0bnVtTm9kZXMgPSBxdWVyeUFsbFJlc3VsdC5sZW5ndGg7XG4gIFx0XHRcdGZvciAoaiA9IDA7IGogPCBudW1Ob2RlczsgaiArPSAxKSB7XG4gIFx0XHRcdFx0cXVlcnlSZXN1bHQucHVzaChxdWVyeUFsbFJlc3VsdFtqXSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgVHJpcGxlX3Byb3RvdHlwZV9maXJzdE5vZGUgPSBUcmlwbGUkZmlyc3ROb2RlO1xuXG4gIGZ1bmN0aW9uIFRyaXBsZSRmaXJzdE5vZGUoKSB7XG4gIFx0aWYgKHRoaXMucmVuZGVyZWQgJiYgdGhpcy5ub2Rlc1swXSkge1xuICBcdFx0cmV0dXJuIHRoaXMubm9kZXNbMF07XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRoaXMucGFyZW50RnJhZ21lbnQuZmluZE5leHROb2RlKHRoaXMpO1xuICB9XG5cbiAgdmFyIGVsZW1lbnRDYWNoZSA9IHt9LFxuICAgICAgaWVCdWcsXG4gICAgICBpZUJsYWNrbGlzdDtcblxuICB0cnkge1xuICBcdGNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKS5pbm5lckhUTUwgPSBcImZvb1wiO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgXHRpZUJ1ZyA9IHRydWU7XG5cbiAgXHRpZUJsYWNrbGlzdCA9IHtcbiAgXHRcdFRBQkxFOiBbXCI8dGFibGUgY2xhc3M9XFxcInhcXFwiPlwiLCBcIjwvdGFibGU+XCJdLFxuICBcdFx0VEhFQUQ6IFtcIjx0YWJsZT48dGhlYWQgY2xhc3M9XFxcInhcXFwiPlwiLCBcIjwvdGhlYWQ+PC90YWJsZT5cIl0sXG4gIFx0XHRUQk9EWTogW1wiPHRhYmxlPjx0Ym9keSBjbGFzcz1cXFwieFxcXCI+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiXSxcbiAgXHRcdFRSOiBbXCI8dGFibGU+PHRyIGNsYXNzPVxcXCJ4XFxcIj5cIiwgXCI8L3RyPjwvdGFibGU+XCJdLFxuICBcdFx0U0VMRUNUOiBbXCI8c2VsZWN0IGNsYXNzPVxcXCJ4XFxcIj5cIiwgXCI8L3NlbGVjdD5cIl1cbiAgXHR9O1xuICB9XG5cbiAgdmFyIGluc2VydEh0bWwgPSBmdW5jdGlvbiAoaHRtbCwgbm9kZSwgZG9jRnJhZykge1xuICBcdHZhciBjb250YWluZXIsXG4gIFx0ICAgIG5vZGVzID0gW10sXG4gIFx0ICAgIHdyYXBwZXIsXG4gIFx0ICAgIHNlbGVjdGVkT3B0aW9uLFxuICBcdCAgICBjaGlsZCxcbiAgXHQgICAgaTtcblxuICBcdC8vIHJlbmRlciAwIGFuZCBmYWxzZVxuICBcdGlmIChodG1sICE9IG51bGwgJiYgaHRtbCAhPT0gXCJcIikge1xuICBcdFx0aWYgKGllQnVnICYmICh3cmFwcGVyID0gaWVCbGFja2xpc3Rbbm9kZS50YWdOYW1lXSkpIHtcbiAgXHRcdFx0Y29udGFpbmVyID0gZWxlbWVudChcIkRJVlwiKTtcbiAgXHRcdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IHdyYXBwZXJbMF0gKyBodG1sICsgd3JhcHBlclsxXTtcbiAgXHRcdFx0Y29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIueFwiKTtcblxuICBcdFx0XHRpZiAoY29udGFpbmVyLnRhZ05hbWUgPT09IFwiU0VMRUNUXCIpIHtcbiAgXHRcdFx0XHRzZWxlY3RlZE9wdGlvbiA9IGNvbnRhaW5lci5vcHRpb25zW2NvbnRhaW5lci5zZWxlY3RlZEluZGV4XTtcbiAgXHRcdFx0fVxuICBcdFx0fSBlbHNlIGlmIChub2RlLm5hbWVzcGFjZVVSSSA9PT0gbmFtZXNwYWNlcy5zdmcpIHtcbiAgXHRcdFx0Y29udGFpbmVyID0gZWxlbWVudChcIkRJVlwiKTtcbiAgXHRcdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IFwiPHN2ZyBjbGFzcz1cXFwieFxcXCI+XCIgKyBodG1sICsgXCI8L3N2Zz5cIjtcbiAgXHRcdFx0Y29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIueFwiKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGNvbnRhaW5lciA9IGVsZW1lbnQobm9kZS50YWdOYW1lKTtcbiAgXHRcdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgXHRcdFx0aWYgKGNvbnRhaW5lci50YWdOYW1lID09PSBcIlNFTEVDVFwiKSB7XG4gIFx0XHRcdFx0c2VsZWN0ZWRPcHRpb24gPSBjb250YWluZXIub3B0aW9uc1tjb250YWluZXIuc2VsZWN0ZWRJbmRleF07XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0d2hpbGUgKGNoaWxkID0gY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgXHRcdFx0bm9kZXMucHVzaChjaGlsZCk7XG4gIFx0XHRcdGRvY0ZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBUaGlzIGlzIHJlYWxseSBhbm5veWluZy4gRXh0cmFjdGluZyA8b3B0aW9uPiBub2RlcyBmcm9tIHRoZVxuICBcdFx0Ly8gdGVtcG9yYXJ5IGNvbnRhaW5lciA8c2VsZWN0PiBjYXVzZXMgdGhlIHJlbWFpbmluZyBvbmVzIHRvXG4gIFx0XHQvLyBiZWNvbWUgc2VsZWN0ZWQuIFNvIG5vdyB3ZSBoYXZlIHRvIGRlc2VsZWN0IHRoZW0uIElFOCwgeW91XG4gIFx0XHQvLyBhbWF6ZSBtZS4gWW91IHJlYWxseSBkb1xuICBcdFx0Ly8gLi4uYW5kIG5vdyBDaHJvbWUgdG9vXG4gIFx0XHRpZiAobm9kZS50YWdOYW1lID09PSBcIlNFTEVDVFwiKSB7XG4gIFx0XHRcdGkgPSBub2Rlcy5sZW5ndGg7XG4gIFx0XHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0XHRpZiAobm9kZXNbaV0gIT09IHNlbGVjdGVkT3B0aW9uKSB7XG4gIFx0XHRcdFx0XHRub2Rlc1tpXS5zZWxlY3RlZCA9IGZhbHNlO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiBub2RlcztcbiAgfTtcblxuICBmdW5jdGlvbiBlbGVtZW50KHRhZ05hbWUpIHtcbiAgXHRyZXR1cm4gZWxlbWVudENhY2hlW3RhZ05hbWVdIHx8IChlbGVtZW50Q2FjaGVbdGFnTmFtZV0gPSBjcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtcbiAgfVxuXG4gIHZhciBoZWxwZXJzX3VwZGF0ZVNlbGVjdCA9IHVwZGF0ZVNlbGVjdDtcblxuICBmdW5jdGlvbiB1cGRhdGVTZWxlY3QocGFyZW50RWxlbWVudCkge1xuICBcdHZhciBzZWxlY3RlZE9wdGlvbnMsIG9wdGlvbiwgdmFsdWU7XG5cbiAgXHRpZiAoIXBhcmVudEVsZW1lbnQgfHwgcGFyZW50RWxlbWVudC5uYW1lICE9PSBcInNlbGVjdFwiIHx8ICFwYXJlbnRFbGVtZW50LmJpbmRpbmcpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRzZWxlY3RlZE9wdGlvbnMgPSB0b0FycmF5KHBhcmVudEVsZW1lbnQubm9kZS5vcHRpb25zKS5maWx0ZXIoaXNTZWxlY3RlZCk7XG5cbiAgXHQvLyBJZiBvbmUgb2YgdGhlbSBoYWQgYSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZSwgd2UgbmVlZCB0byBzeW5jXG4gIFx0Ly8gdGhlIG1vZGVsIHRvIHRoZSB2aWV3XG4gIFx0aWYgKHBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibXVsdGlwbGVcIikpIHtcbiAgXHRcdHZhbHVlID0gc2VsZWN0ZWRPcHRpb25zLm1hcChmdW5jdGlvbiAobykge1xuICBcdFx0XHRyZXR1cm4gby52YWx1ZTtcbiAgXHRcdH0pO1xuICBcdH0gZWxzZSBpZiAob3B0aW9uID0gc2VsZWN0ZWRPcHRpb25zWzBdKSB7XG4gIFx0XHR2YWx1ZSA9IG9wdGlvbi52YWx1ZTtcbiAgXHR9XG5cbiAgXHRpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0cGFyZW50RWxlbWVudC5iaW5kaW5nLnNldFZhbHVlKHZhbHVlKTtcbiAgXHR9XG5cbiAgXHRwYXJlbnRFbGVtZW50LmJ1YmJsZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNTZWxlY3RlZChvcHRpb24pIHtcbiAgXHRyZXR1cm4gb3B0aW9uLnNlbGVjdGVkO1xuICB9XG5cbiAgdmFyIFRyaXBsZV9wcm90b3R5cGVfcmVuZGVyID0gVHJpcGxlJHJlbmRlcjtcbiAgZnVuY3Rpb24gVHJpcGxlJHJlbmRlcigpIHtcbiAgXHRpZiAodGhpcy5yZW5kZXJlZCkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIHJlbmRlciBhbiBpdGVtIHRoYXQgd2FzIGFscmVhZHkgcmVuZGVyZWRcIik7XG4gIFx0fVxuXG4gIFx0dGhpcy5kb2NGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBcdHRoaXMubm9kZXMgPSBpbnNlcnRIdG1sKHRoaXMudmFsdWUsIHRoaXMucGFyZW50RnJhZ21lbnQuZ2V0Tm9kZSgpLCB0aGlzLmRvY0ZyYWcpO1xuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gd2UncmUgaW5zZXJ0aW5nIHRoZSBjb250ZW50cyBvZiBhIDxzZWxlY3Q+XG4gIFx0aGVscGVyc191cGRhdGVTZWxlY3QodGhpcy5wRWxlbWVudCk7XG5cbiAgXHR0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgXHRyZXR1cm4gdGhpcy5kb2NGcmFnO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9zZXRWYWx1ZSA9IFRyaXBsZSRzZXRWYWx1ZTtcbiAgZnVuY3Rpb24gVHJpcGxlJHNldFZhbHVlKHZhbHVlKSB7XG4gIFx0dmFyIHdyYXBwZXI7XG5cbiAgXHQvLyBUT0RPIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBhcHByb2FjaCB0aGlzP1xuICBcdGlmICh3cmFwcGVyID0gdGhpcy5yb290LnZpZXdtb2RlbC53cmFwcGVkW3RoaXMua2V5cGF0aC5zdHJdKSB7XG4gIFx0XHR2YWx1ZSA9IHdyYXBwZXIuZ2V0KCk7XG4gIFx0fVxuXG4gIFx0aWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gIFx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XG4gIFx0XHR0aGlzLnBhcmVudEZyYWdtZW50LmJ1YmJsZSgpO1xuXG4gIFx0XHRpZiAodGhpcy5yZW5kZXJlZCkge1xuICBcdFx0XHRnbG9iYWxfcnVubG9vcC5hZGRWaWV3KHRoaXMpO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIHZhciBUcmlwbGVfcHJvdG90eXBlX3RvU3RyaW5nID0gVHJpcGxlJHRvU3RyaW5nO1xuICBmdW5jdGlvbiBUcmlwbGUkdG9TdHJpbmcoKSB7XG4gIFx0cmV0dXJuIHRoaXMudmFsdWUgIT0gdW5kZWZpbmVkID8gZGVjb2RlQ2hhcmFjdGVyUmVmZXJlbmNlcyhcIlwiICsgdGhpcy52YWx1ZSkgOiBcIlwiO1xuICB9XG5cbiAgdmFyIFRyaXBsZV9wcm90b3R5cGVfdW5yZW5kZXIgPSBUcmlwbGUkdW5yZW5kZXI7XG4gIGZ1bmN0aW9uIFRyaXBsZSR1bnJlbmRlcihzaG91bGREZXN0cm95KSB7XG4gIFx0aWYgKHRoaXMucmVuZGVyZWQgJiYgc2hvdWxkRGVzdHJveSkge1xuICBcdFx0dGhpcy5ub2Rlcy5mb3JFYWNoKGRldGFjaE5vZGUpO1xuICBcdFx0dGhpcy5yZW5kZXJlZCA9IGZhbHNlO1xuICBcdH1cblxuICBcdC8vIFRPRE8gdXBkYXRlIGxpdmUgcXVlcmllc1xuICB9XG5cbiAgdmFyIFRyaXBsZV9wcm90b3R5cGVfdXBkYXRlID0gVHJpcGxlJHVwZGF0ZTtcbiAgZnVuY3Rpb24gVHJpcGxlJHVwZGF0ZSgpIHtcbiAgXHR2YXIgbm9kZSwgcGFyZW50Tm9kZTtcblxuICBcdGlmICghdGhpcy5yZW5kZXJlZCkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdC8vIFJlbW92ZSBleGlzdGluZyBub2Rlc1xuICBcdHdoaWxlICh0aGlzLm5vZGVzICYmIHRoaXMubm9kZXMubGVuZ3RoKSB7XG4gIFx0XHRub2RlID0gdGhpcy5ub2Rlcy5wb3AoKTtcbiAgXHRcdG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgXHR9XG5cbiAgXHQvLyBJbnNlcnQgbmV3IG5vZGVzXG4gIFx0cGFyZW50Tm9kZSA9IHRoaXMucGFyZW50RnJhZ21lbnQuZ2V0Tm9kZSgpO1xuXG4gIFx0dGhpcy5ub2RlcyA9IGluc2VydEh0bWwodGhpcy52YWx1ZSwgcGFyZW50Tm9kZSwgdGhpcy5kb2NGcmFnKTtcbiAgXHRwYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvY0ZyYWcsIHRoaXMucGFyZW50RnJhZ21lbnQuZmluZE5leHROb2RlKHRoaXMpKTtcblxuICBcdC8vIFNwZWNpYWwgY2FzZSAtIHdlJ3JlIGluc2VydGluZyB0aGUgY29udGVudHMgb2YgYSA8c2VsZWN0PlxuICBcdGhlbHBlcnNfdXBkYXRlU2VsZWN0KHRoaXMucEVsZW1lbnQpO1xuICB9XG5cbiAgdmFyIFRyaXBsZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIFx0dGhpcy50eXBlID0gVFJJUExFO1xuICBcdE11c3RhY2hlLmluaXQodGhpcywgb3B0aW9ucyk7XG4gIH07XG5cbiAgVHJpcGxlLnByb3RvdHlwZSA9IHtcbiAgXHRkZXRhY2g6IFRyaXBsZV9wcm90b3R5cGVfZGV0YWNoLFxuICBcdGZpbmQ6IFRyaXBsZV9wcm90b3R5cGVfZmluZCxcbiAgXHRmaW5kQWxsOiBUcmlwbGVfcHJvdG90eXBlX2ZpbmRBbGwsXG4gIFx0Zmlyc3ROb2RlOiBUcmlwbGVfcHJvdG90eXBlX2ZpcnN0Tm9kZSxcbiAgXHRnZXRWYWx1ZTogTXVzdGFjaGUuZ2V0VmFsdWUsXG4gIFx0cmViaW5kOiBNdXN0YWNoZS5yZWJpbmQsXG4gIFx0cmVuZGVyOiBUcmlwbGVfcHJvdG90eXBlX3JlbmRlcixcbiAgXHRyZXNvbHZlOiBNdXN0YWNoZS5yZXNvbHZlLFxuICBcdHNldFZhbHVlOiBwcm90b3R5cGVfc2V0VmFsdWUsXG4gIFx0dG9TdHJpbmc6IFRyaXBsZV9wcm90b3R5cGVfdG9TdHJpbmcsXG4gIFx0dW5iaW5kOiBzaGFyZWRfdW5iaW5kLFxuICBcdHVucmVuZGVyOiBUcmlwbGVfcHJvdG90eXBlX3VucmVuZGVyLFxuICBcdHVwZGF0ZTogVHJpcGxlX3Byb3RvdHlwZV91cGRhdGVcbiAgfTtcblxuICB2YXIgX1RyaXBsZSA9IFRyaXBsZTtcblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfYnViYmxlID0gZnVuY3Rpb24gKCkge1xuICBcdHRoaXMucGFyZW50RnJhZ21lbnQuYnViYmxlKCk7XG4gIH07XG5cbiAgdmFyIEVsZW1lbnRfcHJvdG90eXBlX2RldGFjaCA9IEVsZW1lbnQkZGV0YWNoO1xuXG4gIGZ1bmN0aW9uIEVsZW1lbnQkZGV0YWNoKCkge1xuICBcdHZhciBub2RlID0gdGhpcy5ub2RlLFxuICBcdCAgICBwYXJlbnROb2RlO1xuXG4gIFx0aWYgKG5vZGUpIHtcbiAgXHRcdC8vIG5lZWQgdG8gY2hlY2sgZm9yIHBhcmVudCBub2RlIC0gRE9NIG1heSBoYXZlIGJlZW4gYWx0ZXJlZFxuICBcdFx0Ly8gYnkgc29tZXRoaW5nIG90aGVyIHRoYW4gUmFjdGl2ZSEgZS5nLiBqUXVlcnkgVUkuLi5cbiAgXHRcdGlmIChwYXJlbnROb2RlID0gbm9kZS5wYXJlbnROb2RlKSB7XG4gIFx0XHRcdHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBub2RlO1xuICBcdH1cbiAgfVxuXG4gIHZhciBFbGVtZW50X3Byb3RvdHlwZV9maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gIFx0aWYgKCF0aGlzLm5vZGUpIHtcbiAgXHRcdC8vIHRoaXMgZWxlbWVudCBoYXNuJ3QgYmVlbiByZW5kZXJlZCB5ZXRcbiAgXHRcdHJldHVybiBudWxsO1xuICBcdH1cblxuICBcdGlmIChtYXRjaGVzKHRoaXMubm9kZSwgc2VsZWN0b3IpKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5ub2RlO1xuICBcdH1cblxuICBcdGlmICh0aGlzLmZyYWdtZW50ICYmIHRoaXMuZnJhZ21lbnQuZmluZCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmluZChzZWxlY3Rvcik7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBFbGVtZW50X3Byb3RvdHlwZV9maW5kQWxsID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBxdWVyeSkge1xuICBcdC8vIEFkZCB0aGlzIG5vZGUgdG8gdGhlIHF1ZXJ5LCBpZiBhcHBsaWNhYmxlLCBhbmQgcmVnaXN0ZXIgdGhlXG4gIFx0Ly8gcXVlcnkgb24gdGhpcyBlbGVtZW50XG4gIFx0aWYgKHF1ZXJ5Ll90ZXN0KHRoaXMsIHRydWUpICYmIHF1ZXJ5LmxpdmUpIHtcbiAgXHRcdCh0aGlzLmxpdmVRdWVyaWVzIHx8ICh0aGlzLmxpdmVRdWVyaWVzID0gW10pKS5wdXNoKHF1ZXJ5KTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0dGhpcy5mcmFnbWVudC5maW5kQWxsKHNlbGVjdG9yLCBxdWVyeSk7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBFbGVtZW50X3Byb3RvdHlwZV9maW5kQWxsQ29tcG9uZW50cyA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcXVlcnkpIHtcbiAgXHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0dGhpcy5mcmFnbWVudC5maW5kQWxsQ29tcG9uZW50cyhzZWxlY3RvciwgcXVlcnkpO1xuICBcdH1cbiAgfTtcblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfZmluZENvbXBvbmVudCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICBcdGlmICh0aGlzLmZyYWdtZW50KSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC5maW5kQ29tcG9uZW50KHNlbGVjdG9yKTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIEVsZW1lbnRfcHJvdG90eXBlX2ZpbmROZXh0Tm9kZSA9IEVsZW1lbnQkZmluZE5leHROb2RlO1xuXG4gIGZ1bmN0aW9uIEVsZW1lbnQkZmluZE5leHROb2RlKCkge1xuICBcdHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIEVsZW1lbnRfcHJvdG90eXBlX2ZpcnN0Tm9kZSA9IEVsZW1lbnQkZmlyc3ROb2RlO1xuXG4gIGZ1bmN0aW9uIEVsZW1lbnQkZmlyc3ROb2RlKCkge1xuICBcdHJldHVybiB0aGlzLm5vZGU7XG4gIH1cblxuICB2YXIgZ2V0QXR0cmlidXRlID0gRWxlbWVudCRnZXRBdHRyaWJ1dGU7XG5cbiAgZnVuY3Rpb24gRWxlbWVudCRnZXRBdHRyaWJ1dGUobmFtZSkge1xuICBcdGlmICghdGhpcy5hdHRyaWJ1dGVzIHx8ICF0aGlzLmF0dHJpYnV0ZXNbbmFtZV0pIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW25hbWVdLnZhbHVlO1xuICB9XG5cbiAgdmFyIHRydXRoeSA9IC9edHJ1ZXxvbnx5ZXN8MSQvaTtcbiAgdmFyIHByb2Nlc3NCaW5kaW5nQXR0cmlidXRlc19faXNOdW1lcmljID0gL15bMC05XSskLztcblxuICB2YXIgcHJvY2Vzc0JpbmRpbmdBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHRlbXBsYXRlKSB7XG4gIFx0dmFyIHZhbCwgYXR0cnMsIGF0dHJpYnV0ZXM7XG5cbiAgXHRhdHRyaWJ1dGVzID0gdGVtcGxhdGUuYSB8fCB7fTtcbiAgXHRhdHRycyA9IHt9O1xuXG4gIFx0Ly8gYXR0cmlidXRlcyB0aGF0IGFyZSBwcmVzZW50IGJ1dCBkb24ndCBoYXZlIGEgdmFsdWUgKD0pXG4gIFx0Ly8gd2lsbCBiZSBzZXQgdG8gdGhlIG51bWJlciAwLCB3aGljaCB3ZSBjb25kaWRlciB0byBiZSB0cnVlXG4gIFx0Ly8gdGhlIHN0cmluZyAnMCcsIGhvd2V2ZXIgaXMgZmFsc2VcblxuICBcdHZhbCA9IGF0dHJpYnV0ZXMudHdvd2F5O1xuICBcdGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0YXR0cnMudHdvd2F5ID0gdmFsID09PSAwIHx8IHRydXRoeS50ZXN0KHZhbCk7XG4gIFx0fVxuXG4gIFx0dmFsID0gYXR0cmlidXRlcy5sYXp5O1xuICBcdGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0Ly8gY2hlY2sgZm9yIHRpbWVvdXQgdmFsdWVcbiAgXHRcdGlmICh2YWwgIT09IDAgJiYgcHJvY2Vzc0JpbmRpbmdBdHRyaWJ1dGVzX19pc051bWVyaWMudGVzdCh2YWwpKSB7XG4gIFx0XHRcdGF0dHJzLmxhenkgPSBwYXJzZUludCh2YWwpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0YXR0cnMubGF6eSA9IHZhbCA9PT0gMCB8fCB0cnV0aHkudGVzdCh2YWwpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiBhdHRycztcbiAgfTtcblxuICB2YXIgQXR0cmlidXRlX3Byb3RvdHlwZV9idWJibGUgPSBBdHRyaWJ1dGUkYnViYmxlO1xuICBmdW5jdGlvbiBBdHRyaWJ1dGUkYnViYmxlKCkge1xuICBcdHZhciB2YWx1ZSA9IHRoaXMudXNlUHJvcGVydHkgfHwgIXRoaXMucmVuZGVyZWQgPyB0aGlzLmZyYWdtZW50LmdldFZhbHVlKCkgOiB0aGlzLmZyYWdtZW50LnRvU3RyaW5nKCk7XG5cbiAgXHQvLyBUT0RPIHRoaXMgY2FuIHJlZ2lzdGVyIHRoZSBhdHRyaWJ1dGUgbXVsdGlwbGUgdGltZXMgKHNlZSByZW5kZXIgdGVzdFxuICBcdC8vICdBdHRyaWJ1dGUgd2l0aCBuZXN0ZWQgbXVzdGFjaGVzJylcbiAgXHRpZiAoIWlzRXF1YWwodmFsdWUsIHRoaXMudmFsdWUpKSB7XG5cbiAgXHRcdC8vIE5lZWQgdG8gY2xlYXIgb2xkIGlkIGZyb20gcmFjdGl2ZS5ub2Rlc1xuICBcdFx0aWYgKHRoaXMubmFtZSA9PT0gXCJpZFwiICYmIHRoaXMudmFsdWUpIHtcbiAgXHRcdFx0ZGVsZXRlIHRoaXMucm9vdC5ub2Rlc1t0aGlzLnZhbHVlXTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xuXG4gIFx0XHRpZiAodGhpcy5uYW1lID09PSBcInZhbHVlXCIgJiYgdGhpcy5ub2RlKSB7XG4gIFx0XHRcdC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhlIHZhbHVlIG9uIHRoZSBET00gbGlrZSB0aGlzIHNvIHdlXG4gIFx0XHRcdC8vIGNhbiByZXRyaWV2ZSBpdCBsYXRlciB3aXRob3V0IGl0IGJlaW5nIGNvZXJjZWQgdG8gYSBzdHJpbmdcbiAgXHRcdFx0dGhpcy5ub2RlLl9yYWN0aXZlLnZhbHVlID0gdmFsdWU7XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh0aGlzLnJlbmRlcmVkKSB7XG4gIFx0XHRcdGdsb2JhbF9ydW5sb29wLmFkZFZpZXcodGhpcyk7XG4gIFx0XHR9XG4gIFx0fVxuICB9XG5cbiAgdmFyIHN2Z0NhbWVsQ2FzZUVsZW1lbnRzLCBzdmdDYW1lbENhc2VBdHRyaWJ1dGVzLCBjcmVhdGVNYXAsIG1hcDtcbiAgc3ZnQ2FtZWxDYXNlRWxlbWVudHMgPSBcImFsdEdseXBoIGFsdEdseXBoRGVmIGFsdEdseXBoSXRlbSBhbmltYXRlQ29sb3IgYW5pbWF0ZU1vdGlvbiBhbmltYXRlVHJhbnNmb3JtIGNsaXBQYXRoIGZlQmxlbmQgZmVDb2xvck1hdHJpeCBmZUNvbXBvbmVudFRyYW5zZmVyIGZlQ29tcG9zaXRlIGZlQ29udm9sdmVNYXRyaXggZmVEaWZmdXNlTGlnaHRpbmcgZmVEaXNwbGFjZW1lbnRNYXAgZmVEaXN0YW50TGlnaHQgZmVGbG9vZCBmZUZ1bmNBIGZlRnVuY0IgZmVGdW5jRyBmZUZ1bmNSIGZlR2F1c3NpYW5CbHVyIGZlSW1hZ2UgZmVNZXJnZSBmZU1lcmdlTm9kZSBmZU1vcnBob2xvZ3kgZmVPZmZzZXQgZmVQb2ludExpZ2h0IGZlU3BlY3VsYXJMaWdodGluZyBmZVNwb3RMaWdodCBmZVRpbGUgZmVUdXJidWxlbmNlIGZvcmVpZ25PYmplY3QgZ2x5cGhSZWYgbGluZWFyR3JhZGllbnQgcmFkaWFsR3JhZGllbnQgdGV4dFBhdGggdmtlcm5cIi5zcGxpdChcIiBcIik7XG4gIHN2Z0NhbWVsQ2FzZUF0dHJpYnV0ZXMgPSBcImF0dHJpYnV0ZU5hbWUgYXR0cmlidXRlVHlwZSBiYXNlRnJlcXVlbmN5IGJhc2VQcm9maWxlIGNhbGNNb2RlIGNsaXBQYXRoVW5pdHMgY29udGVudFNjcmlwdFR5cGUgY29udGVudFN0eWxlVHlwZSBkaWZmdXNlQ29uc3RhbnQgZWRnZU1vZGUgZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZCBmaWx0ZXJSZXMgZmlsdGVyVW5pdHMgZ2x5cGhSZWYgZ3JhZGllbnRUcmFuc2Zvcm0gZ3JhZGllbnRVbml0cyBrZXJuZWxNYXRyaXgga2VybmVsVW5pdExlbmd0aCBrZXlQb2ludHMga2V5U3BsaW5lcyBrZXlUaW1lcyBsZW5ndGhBZGp1c3QgbGltaXRpbmdDb25lQW5nbGUgbWFya2VySGVpZ2h0IG1hcmtlclVuaXRzIG1hcmtlcldpZHRoIG1hc2tDb250ZW50VW5pdHMgbWFza1VuaXRzIG51bU9jdGF2ZXMgcGF0aExlbmd0aCBwYXR0ZXJuQ29udGVudFVuaXRzIHBhdHRlcm5UcmFuc2Zvcm0gcGF0dGVyblVuaXRzIHBvaW50c0F0WCBwb2ludHNBdFkgcG9pbnRzQXRaIHByZXNlcnZlQWxwaGEgcHJlc2VydmVBc3BlY3RSYXRpbyBwcmltaXRpdmVVbml0cyByZWZYIHJlZlkgcmVwZWF0Q291bnQgcmVwZWF0RHVyIHJlcXVpcmVkRXh0ZW5zaW9ucyByZXF1aXJlZEZlYXR1cmVzIHNwZWN1bGFyQ29uc3RhbnQgc3BlY3VsYXJFeHBvbmVudCBzcHJlYWRNZXRob2Qgc3RhcnRPZmZzZXQgc3RkRGV2aWF0aW9uIHN0aXRjaFRpbGVzIHN1cmZhY2VTY2FsZSBzeXN0ZW1MYW5ndWFnZSB0YWJsZVZhbHVlcyB0YXJnZXRYIHRhcmdldFkgdGV4dExlbmd0aCB2aWV3Qm94IHZpZXdUYXJnZXQgeENoYW5uZWxTZWxlY3RvciB5Q2hhbm5lbFNlbGVjdG9yIHpvb21BbmRQYW5cIi5zcGxpdChcIiBcIik7XG5cbiAgY3JlYXRlTWFwID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gIFx0dmFyIG1hcCA9IHt9LFxuICBcdCAgICBpID0gaXRlbXMubGVuZ3RoO1xuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdG1hcFtpdGVtc1tpXS50b0xvd2VyQ2FzZSgpXSA9IGl0ZW1zW2ldO1xuICBcdH1cbiAgXHRyZXR1cm4gbWFwO1xuICB9O1xuXG4gIG1hcCA9IGNyZWF0ZU1hcChzdmdDYW1lbENhc2VFbGVtZW50cy5jb25jYXQoc3ZnQ2FtZWxDYXNlQXR0cmlidXRlcykpO1xuXG4gIHZhciBlbmZvcmNlQ2FzZSA9IGZ1bmN0aW9uIChlbGVtZW50TmFtZSkge1xuICBcdHZhciBsb3dlckNhc2VFbGVtZW50TmFtZSA9IGVsZW1lbnROYW1lLnRvTG93ZXJDYXNlKCk7XG4gIFx0cmV0dXJuIG1hcFtsb3dlckNhc2VFbGVtZW50TmFtZV0gfHwgbG93ZXJDYXNlRWxlbWVudE5hbWU7XG4gIH07XG5cbiAgdmFyIGRldGVybWluZU5hbWVBbmROYW1lc3BhY2UgPSBmdW5jdGlvbiAoYXR0cmlidXRlLCBuYW1lKSB7XG4gIFx0dmFyIGNvbG9uSW5kZXgsIG5hbWVzcGFjZVByZWZpeDtcblxuICBcdC8vIGFyZSB3ZSBkZWFsaW5nIHdpdGggYSBuYW1lc3BhY2VkIGF0dHJpYnV0ZSwgZS5nLiB4bGluazpocmVmP1xuICBcdGNvbG9uSW5kZXggPSBuYW1lLmluZGV4T2YoXCI6XCIpO1xuICBcdGlmIChjb2xvbkluZGV4ICE9PSAtMSkge1xuXG4gIFx0XHQvLyBsb29rcyBsaWtlIHdlIGFyZSwgeWVzLi4uXG4gIFx0XHRuYW1lc3BhY2VQcmVmaXggPSBuYW1lLnN1YnN0cigwLCBjb2xvbkluZGV4KTtcblxuICBcdFx0Ly8gLi4udW5sZXNzIGl0J3MgYSBuYW1lc3BhY2UgKmRlY2xhcmF0aW9uKiwgd2hpY2ggd2UgaWdub3JlIChvbiB0aGUgYXNzdW1wdGlvblxuICBcdFx0Ly8gdGhhdCBvbmx5IHZhbGlkIG5hbWVzcGFjZXMgd2lsbCBiZSB1c2VkKVxuICBcdFx0aWYgKG5hbWVzcGFjZVByZWZpeCAhPT0gXCJ4bWxuc1wiKSB7XG4gIFx0XHRcdG5hbWUgPSBuYW1lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSk7XG5cbiAgXHRcdFx0YXR0cmlidXRlLm5hbWUgPSBlbmZvcmNlQ2FzZShuYW1lKTtcbiAgXHRcdFx0YXR0cmlidXRlLm5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbbmFtZXNwYWNlUHJlZml4LnRvTG93ZXJDYXNlKCldO1xuICBcdFx0XHRhdHRyaWJ1dGUubmFtZXNwYWNlUHJlZml4ID0gbmFtZXNwYWNlUHJlZml4O1xuXG4gIFx0XHRcdGlmICghYXR0cmlidXRlLm5hbWVzcGFjZSkge1xuICBcdFx0XHRcdHRocm93IFwiVW5rbm93biBuYW1lc3BhY2UgKFxcXCJcIiArIG5hbWVzcGFjZVByZWZpeCArIFwiXFxcIilcIjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBTVkcgYXR0cmlidXRlIG5hbWVzIGFyZSBjYXNlIHNlbnNpdGl2ZVxuICBcdGF0dHJpYnV0ZS5uYW1lID0gYXR0cmlidXRlLmVsZW1lbnQubmFtZXNwYWNlICE9PSBuYW1lc3BhY2VzLmh0bWwgPyBlbmZvcmNlQ2FzZShuYW1lKSA6IG5hbWU7XG4gIH07XG5cbiAgdmFyIGhlbHBlcnNfZ2V0SW50ZXJwb2xhdG9yID0gZ2V0SW50ZXJwb2xhdG9yO1xuICBmdW5jdGlvbiBnZXRJbnRlcnBvbGF0b3IoYXR0cmlidXRlKSB7XG4gIFx0dmFyIGl0ZW1zID0gYXR0cmlidXRlLmZyYWdtZW50Lml0ZW1zO1xuXG4gIFx0aWYgKGl0ZW1zLmxlbmd0aCAhPT0gMSkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdGlmIChpdGVtc1swXS50eXBlID09PSBJTlRFUlBPTEFUT1IpIHtcbiAgXHRcdHJldHVybiBpdGVtc1swXTtcbiAgXHR9XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2luaXQgPSBBdHRyaWJ1dGUkaW5pdDtcbiAgZnVuY3Rpb24gQXR0cmlidXRlJGluaXQob3B0aW9ucykge1xuICBcdHRoaXMudHlwZSA9IEFUVFJJQlVURTtcbiAgXHR0aGlzLmVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG4gIFx0dGhpcy5yb290ID0gb3B0aW9ucy5yb290O1xuXG4gIFx0ZGV0ZXJtaW5lTmFtZUFuZE5hbWVzcGFjZSh0aGlzLCBvcHRpb25zLm5hbWUpO1xuICBcdHRoaXMuaXNCb29sZWFuID0gYm9vbGVhbkF0dHJpYnV0ZXMudGVzdCh0aGlzLm5hbWUpO1xuXG4gIFx0Ly8gaWYgaXQncyBhbiBlbXB0eSBhdHRyaWJ1dGUsIG9yIGp1c3QgYSBzdHJhaWdodCBrZXktdmFsdWUgcGFpciwgd2l0aCBub1xuICBcdC8vIG11c3RhY2hlIHNoZW5hbmlnYW5zLCBzZXQgdGhlIGF0dHJpYnV0ZSBhY2NvcmRpbmdseSBhbmQgZ28gaG9tZVxuICBcdGlmICghb3B0aW9ucy52YWx1ZSB8fCB0eXBlb2Ygb3B0aW9ucy52YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0dGhpcy52YWx1ZSA9IHRoaXMuaXNCb29sZWFuID8gdHJ1ZSA6IG9wdGlvbnMudmFsdWUgfHwgXCJcIjtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHQvLyBvdGhlcndpc2Ugd2UgbmVlZCB0byBkbyBzb21lIHdvcmtcblxuICBcdC8vIHNoYXJlIHBhcmVudEZyYWdtZW50IHdpdGggcGFyZW50IGVsZW1lbnRcbiAgXHR0aGlzLnBhcmVudEZyYWdtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudEZyYWdtZW50O1xuXG4gIFx0dGhpcy5mcmFnbWVudCA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KHtcbiAgXHRcdHRlbXBsYXRlOiBvcHRpb25zLnZhbHVlLFxuICBcdFx0cm9vdDogdGhpcy5yb290LFxuICBcdFx0b3duZXI6IHRoaXNcbiAgXHR9KTtcblxuICBcdC8vIFRPRE8gY2FuIHdlIHVzZSB0aGlzLmZyYWdtZW50LnRvU3RyaW5nKCkgaW4gc29tZSBjYXNlcz8gSXQncyBxdWlja2VyXG4gIFx0dGhpcy52YWx1ZSA9IHRoaXMuZnJhZ21lbnQuZ2V0VmFsdWUoKTtcblxuICBcdC8vIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoaXMgYXR0cmlidXRlJ3MgaW50ZXJwb2xhdG9yLCBpZiBpdHMgZnJhZ21lbnRcbiAgXHQvLyB0YWtlcyB0aGUgZm9ybSBge3tmb299fWAuIFRoaXMgaXMgbmVjZXNzYXJ5IGZvciB0d28td2F5IGJpbmRpbmcgYW5kXG4gIFx0Ly8gZm9yIGNvcnJlY3RseSByZW5kZXJpbmcgSFRNTCBsYXRlclxuICBcdHRoaXMuaW50ZXJwb2xhdG9yID0gaGVscGVyc19nZXRJbnRlcnBvbGF0b3IodGhpcyk7XG4gIFx0dGhpcy5pc0JpbmRhYmxlID0gISF0aGlzLmludGVycG9sYXRvciAmJiAhdGhpcy5pbnRlcnBvbGF0b3IuaXNTdGF0aWM7XG5cbiAgXHQvLyBtYXJrIGFzIHJlYWR5XG4gIFx0dGhpcy5yZWFkeSA9IHRydWU7XG4gIH1cblxuICB2YXIgQXR0cmlidXRlX3Byb3RvdHlwZV9yZWJpbmQgPSBBdHRyaWJ1dGUkcmViaW5kO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSRyZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdGlmICh0aGlzLmZyYWdtZW50KSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgQXR0cmlidXRlX3Byb3RvdHlwZV9yZW5kZXIgPSBBdHRyaWJ1dGUkcmVuZGVyO1xuICB2YXIgcHJvcGVydHlOYW1lcyA9IHtcbiAgXHRcImFjY2VwdC1jaGFyc2V0XCI6IFwiYWNjZXB0Q2hhcnNldFwiLFxuICBcdGFjY2Vzc2tleTogXCJhY2Nlc3NLZXlcIixcbiAgXHRiZ2NvbG9yOiBcImJnQ29sb3JcIixcbiAgXHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCIsXG4gIFx0Y29kZWJhc2U6IFwiY29kZUJhc2VcIixcbiAgXHRjb2xzcGFuOiBcImNvbFNwYW5cIixcbiAgXHRjb250ZW50ZWRpdGFibGU6IFwiY29udGVudEVkaXRhYmxlXCIsXG4gIFx0ZGF0ZXRpbWU6IFwiZGF0ZVRpbWVcIixcbiAgXHRkaXJuYW1lOiBcImRpck5hbWVcIixcbiAgXHRcImZvclwiOiBcImh0bWxGb3JcIixcbiAgXHRcImh0dHAtZXF1aXZcIjogXCJodHRwRXF1aXZcIixcbiAgXHRpc21hcDogXCJpc01hcFwiLFxuICBcdG1heGxlbmd0aDogXCJtYXhMZW5ndGhcIixcbiAgXHRub3ZhbGlkYXRlOiBcIm5vVmFsaWRhdGVcIixcbiAgXHRwdWJkYXRlOiBcInB1YkRhdGVcIixcbiAgXHRyZWFkb25seTogXCJyZWFkT25seVwiLFxuICBcdHJvd3NwYW46IFwicm93U3BhblwiLFxuICBcdHRhYmluZGV4OiBcInRhYkluZGV4XCIsXG4gIFx0dXNlbWFwOiBcInVzZU1hcFwiXG4gIH07XG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSRyZW5kZXIobm9kZSkge1xuICBcdHZhciBwcm9wZXJ0eU5hbWU7XG5cbiAgXHR0aGlzLm5vZGUgPSBub2RlO1xuXG4gIFx0Ly8gc2hvdWxkIHdlIHVzZSBkaXJlY3QgcHJvcGVydHkgYWNjZXNzLCBvciBzZXRBdHRyaWJ1dGU/XG4gIFx0aWYgKCFub2RlLm5hbWVzcGFjZVVSSSB8fCBub2RlLm5hbWVzcGFjZVVSSSA9PT0gbmFtZXNwYWNlcy5odG1sKSB7XG4gIFx0XHRwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVzW3RoaXMubmFtZV0gfHwgdGhpcy5uYW1lO1xuXG4gIFx0XHRpZiAobm9kZVtwcm9wZXJ0eU5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0dGhpcy5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIGlzIGF0dHJpYnV0ZSBhIGJvb2xlYW4gYXR0cmlidXRlIG9yICd2YWx1ZSc/IElmIHNvIHdlJ3JlIGJldHRlciBvZmYgZG9pbmcgZS5nLlxuICBcdFx0Ly8gbm9kZS5zZWxlY3RlZCA9IHRydWUgcmF0aGVyIHRoYW4gbm9kZS5zZXRBdHRyaWJ1dGUoICdzZWxlY3RlZCcsICcnIClcbiAgXHRcdGlmICh0aGlzLmlzQm9vbGVhbiB8fCB0aGlzLmlzVHdvd2F5KSB7XG4gIFx0XHRcdHRoaXMudXNlUHJvcGVydHkgPSB0cnVlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAocHJvcGVydHlOYW1lID09PSBcInZhbHVlXCIpIHtcbiAgXHRcdFx0bm9kZS5fcmFjdGl2ZS52YWx1ZSA9IHRoaXMudmFsdWU7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0dGhpcy5yZW5kZXJlZCA9IHRydWU7XG4gIFx0dGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIHZhciBBdHRyaWJ1dGVfcHJvdG90eXBlX3RvU3RyaW5nID0gQXR0cmlidXRlJHRvU3RyaW5nO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR0b1N0cmluZygpIHtcbiAgXHR2YXIgX3JlZiA9IHRoaXM7XG5cbiAgXHR2YXIgbmFtZSA9IF9yZWYubmFtZTtcbiAgXHR2YXIgbmFtZXNwYWNlUHJlZml4ID0gX3JlZi5uYW1lc3BhY2VQcmVmaXg7XG4gIFx0dmFyIHZhbHVlID0gX3JlZi52YWx1ZTtcbiAgXHR2YXIgaW50ZXJwb2xhdG9yID0gX3JlZi5pbnRlcnBvbGF0b3I7XG4gIFx0dmFyIGZyYWdtZW50ID0gX3JlZi5mcmFnbWVudDtcblxuICBcdC8vIFNwZWNpYWwgY2FzZSAtIHNlbGVjdCBhbmQgdGV4dGFyZWEgdmFsdWVzIChzaG91bGQgbm90IGJlIHN0cmluZ2lmaWVkKVxuICBcdGlmIChuYW1lID09PSBcInZhbHVlXCIgJiYgKHRoaXMuZWxlbWVudC5uYW1lID09PSBcInNlbGVjdFwiIHx8IHRoaXMuZWxlbWVudC5uYW1lID09PSBcInRleHRhcmVhXCIpKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gY29udGVudCBlZGl0YWJsZVxuICBcdGlmIChuYW1lID09PSBcInZhbHVlXCIgJiYgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gcmFkaW8gbmFtZXNcbiAgXHRpZiAobmFtZSA9PT0gXCJuYW1lXCIgJiYgdGhpcy5lbGVtZW50Lm5hbWUgPT09IFwiaW5wdXRcIiAmJiBpbnRlcnBvbGF0b3IpIHtcbiAgXHRcdHJldHVybiBcIm5hbWU9e3tcIiArIChpbnRlcnBvbGF0b3Iua2V5cGF0aC5zdHIgfHwgaW50ZXJwb2xhdG9yLnJlZikgKyBcIn19XCI7XG4gIFx0fVxuXG4gIFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzXG4gIFx0aWYgKHRoaXMuaXNCb29sZWFuKSB7XG4gIFx0XHRyZXR1cm4gdmFsdWUgPyBuYW1lIDogXCJcIjtcbiAgXHR9XG5cbiAgXHRpZiAoZnJhZ21lbnQpIHtcbiAgXHRcdC8vIHNwZWNpYWwgY2FzZSAtIHRoaXMgY2F0Y2hlcyB1bmRlZmluZWQvbnVsbCB2YWx1ZXMgKCMxMjExKVxuICBcdFx0aWYgKGZyYWdtZW50Lml0ZW1zLmxlbmd0aCA9PT0gMSAmJiBmcmFnbWVudC5pdGVtc1swXS52YWx1ZSA9PSBudWxsKSB7XG4gIFx0XHRcdHJldHVybiBcIlwiO1xuICBcdFx0fVxuXG4gIFx0XHR2YWx1ZSA9IGZyYWdtZW50LnRvU3RyaW5nKCk7XG4gIFx0fVxuXG4gIFx0aWYgKG5hbWVzcGFjZVByZWZpeCkge1xuICBcdFx0bmFtZSA9IG5hbWVzcGFjZVByZWZpeCArIFwiOlwiICsgbmFtZTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gdmFsdWUgPyBuYW1lICsgXCI9XFxcIlwiICsgQXR0cmlidXRlX3Byb3RvdHlwZV90b1N0cmluZ19fZXNjYXBlKHZhbHVlKSArIFwiXFxcIlwiIDogbmFtZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZV9wcm90b3R5cGVfdG9TdHJpbmdfX2VzY2FwZSh2YWx1ZSkge1xuICBcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIikucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpO1xuICB9XG5cbiAgdmFyIEF0dHJpYnV0ZV9wcm90b3R5cGVfdW5iaW5kID0gQXR0cmlidXRlJHVuYmluZDtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGUkdW5iaW5kKCkge1xuICBcdC8vIGlnbm9yZSBub24tZHluYW1pYyBhdHRyaWJ1dGVzXG4gIFx0aWYgKHRoaXMuZnJhZ21lbnQpIHtcbiAgXHRcdHRoaXMuZnJhZ21lbnQudW5iaW5kKCk7XG4gIFx0fVxuXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJpZFwiKSB7XG4gIFx0XHRkZWxldGUgdGhpcy5yb290Lm5vZGVzW3RoaXMudmFsdWVdO1xuICBcdH1cbiAgfVxuXG4gIHZhciB1cGRhdGVTZWxlY3RWYWx1ZSA9IEF0dHJpYnV0ZSR1cGRhdGVTZWxlY3Q7XG5cbiAgZnVuY3Rpb24gQXR0cmlidXRlJHVwZGF0ZVNlbGVjdCgpIHtcbiAgXHR2YXIgdmFsdWUgPSB0aGlzLnZhbHVlLFxuICBcdCAgICBvcHRpb25zLFxuICBcdCAgICBvcHRpb24sXG4gIFx0ICAgIG9wdGlvblZhbHVlLFxuICBcdCAgICBpO1xuXG4gIFx0aWYgKCF0aGlzLmxvY2tlZCkge1xuICBcdFx0dGhpcy5ub2RlLl9yYWN0aXZlLnZhbHVlID0gdmFsdWU7XG5cbiAgXHRcdG9wdGlvbnMgPSB0aGlzLm5vZGUub3B0aW9ucztcbiAgXHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRvcHRpb24gPSBvcHRpb25zW2ldO1xuICBcdFx0XHRvcHRpb25WYWx1ZSA9IG9wdGlvbi5fcmFjdGl2ZSA/IG9wdGlvbi5fcmFjdGl2ZS52YWx1ZSA6IG9wdGlvbi52YWx1ZTsgLy8gb3B0aW9ucyBpbnNlcnRlZCB2aWEgYSB0cmlwbGUgZG9uJ3QgaGF2ZSBfcmFjdGl2ZVxuXG4gIFx0XHRcdGlmIChvcHRpb25WYWx1ZSA9PSB2YWx1ZSkge1xuICBcdFx0XHRcdC8vIGRvdWJsZSBlcXVhbHMgYXMgd2UgbWF5IGJlIGNvbXBhcmluZyBudW1iZXJzIHdpdGggc3RyaW5nc1xuICBcdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gIFx0XHRcdFx0YnJlYWs7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBpZiB3ZSdyZSBzdGlsbCBoZXJlLCBpdCBtZWFucyB0aGUgbmV3IHZhbHVlIGRpZG4ndCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMuLi5cbiAgXHQvLyBUT0RPIGZpZ3VyZSBvdXQgd2hhdCB0byBkbyBpbiB0aGlzIHNpdHVhdGlvblxuICB9XG5cbiAgdmFyIHVwZGF0ZU11bHRpcGxlU2VsZWN0VmFsdWUgPSBBdHRyaWJ1dGUkdXBkYXRlTXVsdGlwbGVTZWxlY3Q7XG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGVNdWx0aXBsZVNlbGVjdCgpIHtcbiAgXHR2YXIgdmFsdWUgPSB0aGlzLnZhbHVlLFxuICBcdCAgICBvcHRpb25zLFxuICBcdCAgICBpLFxuICBcdCAgICBvcHRpb24sXG4gIFx0ICAgIG9wdGlvblZhbHVlO1xuXG4gIFx0aWYgKCFpc0FycmF5KHZhbHVlKSkge1xuICBcdFx0dmFsdWUgPSBbdmFsdWVdO1xuICBcdH1cblxuICBcdG9wdGlvbnMgPSB0aGlzLm5vZGUub3B0aW9ucztcbiAgXHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cbiAgXHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRvcHRpb24gPSBvcHRpb25zW2ldO1xuICBcdFx0b3B0aW9uVmFsdWUgPSBvcHRpb24uX3JhY3RpdmUgPyBvcHRpb24uX3JhY3RpdmUudmFsdWUgOiBvcHRpb24udmFsdWU7IC8vIG9wdGlvbnMgaW5zZXJ0ZWQgdmlhIGEgdHJpcGxlIGRvbid0IGhhdmUgX3JhY3RpdmVcbiAgXHRcdG9wdGlvbi5zZWxlY3RlZCA9IGFycmF5Q29udGFpbnModmFsdWUsIG9wdGlvblZhbHVlKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgdXBkYXRlUmFkaW9OYW1lID0gQXR0cmlidXRlJHVwZGF0ZVJhZGlvTmFtZTtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGUkdXBkYXRlUmFkaW9OYW1lKCkge1xuICBcdHZhciBfcmVmID0gdGhpcztcblxuICBcdHZhciBub2RlID0gX3JlZi5ub2RlO1xuICBcdHZhciB2YWx1ZSA9IF9yZWYudmFsdWU7XG5cbiAgXHRub2RlLmNoZWNrZWQgPSB2YWx1ZSA9PSBub2RlLl9yYWN0aXZlLnZhbHVlO1xuICB9XG5cbiAgdmFyIHVwZGF0ZVJhZGlvVmFsdWUgPSBBdHRyaWJ1dGUkdXBkYXRlUmFkaW9WYWx1ZTtcbiAgZnVuY3Rpb24gQXR0cmlidXRlJHVwZGF0ZVJhZGlvVmFsdWUoKSB7XG4gIFx0dmFyIHdhc0NoZWNrZWQsXG4gIFx0ICAgIG5vZGUgPSB0aGlzLm5vZGUsXG4gIFx0ICAgIGJpbmRpbmcsXG4gIFx0ICAgIGJpbmRpbmdzLFxuICBcdCAgICBpO1xuXG4gIFx0d2FzQ2hlY2tlZCA9IG5vZGUuY2hlY2tlZDtcblxuICBcdG5vZGUudmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIFx0bm9kZS5jaGVja2VkID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpID09PSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICBcdC8vIFRoaXMgaXMgYSBzcGVjaWFsIGNhc2UgLSBpZiB0aGUgaW5wdXQgd2FzIGNoZWNrZWQsIGFuZCB0aGUgdmFsdWVcbiAgXHQvLyBjaGFuZ2VkIHNvIHRoYXQgaXQncyBubyBsb25nZXIgY2hlY2tlZCwgdGhlIHR3b3dheSBiaW5kaW5nIGlzXG4gIFx0Ly8gbW9zdCBsaWtlbHkgb3V0IG9mIGRhdGUuIFRvIGZpeCBpdCB3ZSBoYXZlIHRvIGp1bXAgdGhyb3VnaCBzb21lXG4gIFx0Ly8gaG9vcHMuLi4gdGhpcyBpcyBhIGxpdHRsZSBrbHVkZ3kgYnV0IGl0IHdvcmtzXG4gIFx0aWYgKHdhc0NoZWNrZWQgJiYgIW5vZGUuY2hlY2tlZCAmJiB0aGlzLmVsZW1lbnQuYmluZGluZykge1xuICBcdFx0YmluZGluZ3MgPSB0aGlzLmVsZW1lbnQuYmluZGluZy5zaWJsaW5ncztcblxuICBcdFx0aWYgKGkgPSBiaW5kaW5ncy5sZW5ndGgpIHtcbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdGJpbmRpbmcgPSBiaW5kaW5nc1tpXTtcblxuICBcdFx0XHRcdGlmICghYmluZGluZy5lbGVtZW50Lm5vZGUpIHtcbiAgXHRcdFx0XHRcdC8vIHRoaXMgaXMgdGhlIGluaXRpYWwgcmVuZGVyLCBzaWJsaW5ncyBhcmUgc3RpbGwgcmVuZGVyaW5nIVxuICBcdFx0XHRcdFx0Ly8gd2UnbGwgY29tZSBiYWNrIGxhdGVyLi4uXG4gIFx0XHRcdFx0XHRyZXR1cm47XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0aWYgKGJpbmRpbmcuZWxlbWVudC5ub2RlLmNoZWNrZWQpIHtcbiAgXHRcdFx0XHRcdGdsb2JhbF9ydW5sb29wLmFkZFJhY3RpdmUoYmluZGluZy5yb290KTtcbiAgXHRcdFx0XHRcdHJldHVybiBiaW5kaW5nLmhhbmRsZUNoYW5nZSgpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHRoaXMucm9vdC52aWV3bW9kZWwuc2V0KGJpbmRpbmcua2V5cGF0aCwgdW5kZWZpbmVkKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgdXBkYXRlQ2hlY2tib3hOYW1lID0gQXR0cmlidXRlJHVwZGF0ZUNoZWNrYm94TmFtZTtcbiAgZnVuY3Rpb24gQXR0cmlidXRlJHVwZGF0ZUNoZWNrYm94TmFtZSgpIHtcbiAgXHR2YXIgX3JlZiA9IHRoaXM7XG5cbiAgXHR2YXIgZWxlbWVudCA9IF9yZWYuZWxlbWVudDtcbiAgXHR2YXIgbm9kZSA9IF9yZWYubm9kZTtcbiAgXHR2YXIgdmFsdWUgPSBfcmVmLnZhbHVlO3ZhciBiaW5kaW5nID0gZWxlbWVudC5iaW5kaW5nO3ZhciB2YWx1ZUF0dHJpYnV0ZTt2YXIgaTtcblxuICBcdHZhbHVlQXR0cmlidXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICBcdGlmICghaXNBcnJheSh2YWx1ZSkpIHtcbiAgXHRcdGJpbmRpbmcuaXNDaGVja2VkID0gbm9kZS5jaGVja2VkID0gdmFsdWUgPT0gdmFsdWVBdHRyaWJ1dGU7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdGkgPSB2YWx1ZS5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdGlmICh2YWx1ZUF0dHJpYnV0ZSA9PSB2YWx1ZVtpXSkge1xuICBcdFx0XHRcdGJpbmRpbmcuaXNDaGVja2VkID0gbm9kZS5jaGVja2VkID0gdHJ1ZTtcbiAgXHRcdFx0XHRyZXR1cm47XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHRcdGJpbmRpbmcuaXNDaGVja2VkID0gbm9kZS5jaGVja2VkID0gZmFsc2U7XG4gIFx0fVxuICB9XG5cbiAgdmFyIHVwZGF0ZUNsYXNzTmFtZSA9IEF0dHJpYnV0ZSR1cGRhdGVDbGFzc05hbWU7XG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGVDbGFzc05hbWUoKSB7XG4gIFx0dGhpcy5ub2RlLmNsYXNzTmFtZSA9IHNhZmVUb1N0cmluZ1ZhbHVlKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgdmFyIHVwZGF0ZUlkQXR0cmlidXRlID0gQXR0cmlidXRlJHVwZGF0ZUlkQXR0cmlidXRlO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGVJZEF0dHJpYnV0ZSgpIHtcbiAgXHR2YXIgX3JlZiA9IHRoaXM7XG5cbiAgXHR2YXIgbm9kZSA9IF9yZWYubm9kZTtcbiAgXHR2YXIgdmFsdWUgPSBfcmVmLnZhbHVlO1xuXG4gIFx0dGhpcy5yb290Lm5vZGVzW3ZhbHVlXSA9IG5vZGU7XG4gIFx0bm9kZS5pZCA9IHZhbHVlO1xuICB9XG5cbiAgdmFyIHVwZGF0ZUlFU3R5bGVBdHRyaWJ1dGUgPSBBdHRyaWJ1dGUkdXBkYXRlSUVTdHlsZUF0dHJpYnV0ZTtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGUkdXBkYXRlSUVTdHlsZUF0dHJpYnV0ZSgpIHtcbiAgXHR2YXIgbm9kZSwgdmFsdWU7XG5cbiAgXHRub2RlID0gdGhpcy5ub2RlO1xuICBcdHZhbHVlID0gdGhpcy52YWx1ZTtcblxuICBcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHR2YWx1ZSA9IFwiXCI7XG4gIFx0fVxuXG4gIFx0bm9kZS5zdHlsZS5zZXRBdHRyaWJ1dGUoXCJjc3NUZXh0XCIsIHZhbHVlKTtcbiAgfVxuXG4gIHZhciB1cGRhdGVDb250ZW50RWRpdGFibGVWYWx1ZSA9IEF0dHJpYnV0ZSR1cGRhdGVDb250ZW50RWRpdGFibGVWYWx1ZTtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGUkdXBkYXRlQ29udGVudEVkaXRhYmxlVmFsdWUoKSB7XG4gIFx0dmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblxuICBcdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHR2YWx1ZSA9IFwiXCI7XG4gIFx0fVxuXG4gIFx0aWYgKCF0aGlzLmxvY2tlZCkge1xuICBcdFx0dGhpcy5ub2RlLmlubmVySFRNTCA9IHZhbHVlO1xuICBcdH1cbiAgfVxuXG4gIHZhciB1cGRhdGVWYWx1ZSA9IEF0dHJpYnV0ZSR1cGRhdGVWYWx1ZTtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGUkdXBkYXRlVmFsdWUoKSB7XG4gIFx0dmFyIF9yZWYgPSB0aGlzO1xuXG4gIFx0dmFyIG5vZGUgPSBfcmVmLm5vZGU7XG4gIFx0dmFyIHZhbHVlID0gX3JlZi52YWx1ZTtcblxuICBcdC8vIHN0b3JlIGFjdHVhbCB2YWx1ZSwgc28gaXQgZG9lc24ndCBnZXQgY29lcmNlZCB0byBhIHN0cmluZ1xuICBcdG5vZGUuX3JhY3RpdmUudmFsdWUgPSB2YWx1ZTtcblxuICBcdC8vIHdpdGggdHdvLXdheSBiaW5kaW5nLCBvbmx5IHVwZGF0ZSBpZiB0aGUgY2hhbmdlIHdhc24ndCBpbml0aWF0ZWQgYnkgdGhlIHVzZXJcbiAgXHQvLyBvdGhlcndpc2UgdGhlIGN1cnNvciB3aWxsIG9mdGVuIGJlIHNlbnQgdG8gdGhlIHdyb25nIHBsYWNlXG4gIFx0aWYgKCF0aGlzLmxvY2tlZCkge1xuICBcdFx0bm9kZS52YWx1ZSA9IHZhbHVlID09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWx1ZTtcbiAgXHR9XG4gIH1cblxuICB2YXIgdXBkYXRlQm9vbGVhbiA9IEF0dHJpYnV0ZSR1cGRhdGVCb29sZWFuQXR0cmlidXRlO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGVCb29sZWFuQXR0cmlidXRlKCkge1xuICBcdC8vIHdpdGggdHdvLXdheSBiaW5kaW5nLCBvbmx5IHVwZGF0ZSBpZiB0aGUgY2hhbmdlIHdhc24ndCBpbml0aWF0ZWQgYnkgdGhlIHVzZXJcbiAgXHQvLyBvdGhlcndpc2UgdGhlIGN1cnNvciB3aWxsIG9mdGVuIGJlIHNlbnQgdG8gdGhlIHdyb25nIHBsYWNlXG4gIFx0aWYgKCF0aGlzLmxvY2tlZCkge1xuICBcdFx0dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXSA9IHRoaXMudmFsdWU7XG4gIFx0fVxuICB9XG5cbiAgdmFyIHVwZGF0ZUV2ZXJ5dGhpbmdFbHNlID0gQXR0cmlidXRlJHVwZGF0ZUV2ZXJ5dGhpbmdFbHNlO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGVFdmVyeXRoaW5nRWxzZSgpIHtcbiAgXHR2YXIgX3JlZiA9IHRoaXM7XG5cbiAgXHR2YXIgbm9kZSA9IF9yZWYubm9kZTtcbiAgXHR2YXIgbmFtZXNwYWNlID0gX3JlZi5uYW1lc3BhY2U7XG4gIFx0dmFyIG5hbWUgPSBfcmVmLm5hbWU7XG4gIFx0dmFyIHZhbHVlID0gX3JlZi52YWx1ZTtcbiAgXHR2YXIgZnJhZ21lbnQgPSBfcmVmLmZyYWdtZW50O1xuXG4gIFx0aWYgKG5hbWVzcGFjZSkge1xuICBcdFx0bm9kZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2UsIG5hbWUsIChmcmFnbWVudCB8fCB2YWx1ZSkudG9TdHJpbmcoKSk7XG4gIFx0fSBlbHNlIGlmICghdGhpcy5pc0Jvb2xlYW4pIHtcbiAgXHRcdGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gIFx0XHRcdG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgKGZyYWdtZW50IHx8IHZhbHVlKS50b1N0cmluZygpKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgLSB0cnV0aHkgYmVjb21lcyAnJywgZmFsc3kgbWVhbnMgJ3JlbW92ZSBhdHRyaWJ1dGUnXG4gIFx0ZWxzZSB7XG4gIFx0XHRpZiAodmFsdWUpIHtcbiAgXHRcdFx0bm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgXCJcIik7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICAvLyBUaGVyZSBhcmUgYSBmZXcgc3BlY2lhbCBjYXNlcyB3aGVuIGl0IGNvbWVzIHRvIHVwZGF0aW5nIGF0dHJpYnV0ZXMuIEZvciB0aGlzIHJlYXNvbixcbiAgLy8gdGhlIHByb3RvdHlwZSAudXBkYXRlKCkgbWV0aG9kIHBvaW50cyB0byB0aGlzIG1ldGhvZCwgd2hpY2ggd2FpdHMgdW50aWwgdGhlXG4gIC8vIGF0dHJpYnV0ZSBoYXMgZmluaXNoZWQgaW5pdGlhbGlzaW5nLCB0aGVuIHJlcGxhY2VzIHRoZSBwcm90b3R5cGUgbWV0aG9kIHdpdGggYSBtb3JlXG4gIC8vIHN1aXRhYmxlIG9uZS4gVGhhdCB3YXksIHdlIHNhdmUgb3Vyc2VsdmVzIGRvaW5nIGEgYnVuY2ggb2YgdGVzdHMgb24gZWFjaCBjYWxsXG4gIHZhciBBdHRyaWJ1dGVfcHJvdG90eXBlX3VwZGF0ZSA9IEF0dHJpYnV0ZSR1cGRhdGU7XG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZSR1cGRhdGUoKSB7XG4gIFx0dmFyIF9yZWYgPSB0aGlzO1xuXG4gIFx0dmFyIG5hbWUgPSBfcmVmLm5hbWU7XG4gIFx0dmFyIGVsZW1lbnQgPSBfcmVmLmVsZW1lbnQ7XG4gIFx0dmFyIG5vZGUgPSBfcmVmLm5vZGU7dmFyIHR5cGU7dmFyIHVwZGF0ZU1ldGhvZDtcblxuICBcdGlmIChuYW1lID09PSBcImlkXCIpIHtcbiAgXHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUlkQXR0cmlidXRlO1xuICBcdH0gZWxzZSBpZiAobmFtZSA9PT0gXCJ2YWx1ZVwiKSB7XG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSBzZWxlY3RzXG4gIFx0XHRpZiAoZWxlbWVudC5uYW1lID09PSBcInNlbGVjdFwiICYmIG5hbWUgPT09IFwidmFsdWVcIikge1xuICBcdFx0XHR1cGRhdGVNZXRob2QgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpID8gdXBkYXRlTXVsdGlwbGVTZWxlY3RWYWx1ZSA6IHVwZGF0ZVNlbGVjdFZhbHVlO1xuICBcdFx0fSBlbHNlIGlmIChlbGVtZW50Lm5hbWUgPT09IFwidGV4dGFyZWFcIikge1xuICBcdFx0XHR1cGRhdGVNZXRob2QgPSB1cGRhdGVWYWx1ZTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gc3BlY2lhbCBjYXNlIC0gY29udGVudGVkaXRhYmxlXG4gIFx0XHRlbHNlIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAhPSBudWxsKSB7XG4gIFx0XHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUNvbnRlbnRFZGl0YWJsZVZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSA8aW5wdXQ+XG4gIFx0XHRlbHNlIGlmIChlbGVtZW50Lm5hbWUgPT09IFwiaW5wdXRcIikge1xuICBcdFx0XHR0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXG4gIFx0XHRcdC8vIHR5cGU9J2ZpbGUnIHZhbHVlPSd7e2ZpbGVMaXN0fX0nPlxuICBcdFx0XHRpZiAodHlwZSA9PT0gXCJmaWxlXCIpIHtcbiAgXHRcdFx0XHR1cGRhdGVNZXRob2QgPSBub29wOyAvLyByZWFkLW9ubHlcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIHR5cGU9J3JhZGlvJyBuYW1lPSd7e3R3b3dheX19J1xuICBcdFx0XHRlbHNlIGlmICh0eXBlID09PSBcInJhZGlvXCIgJiYgZWxlbWVudC5iaW5kaW5nICYmIGVsZW1lbnQuYmluZGluZy5uYW1lID09PSBcIm5hbWVcIikge1xuICBcdFx0XHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZVJhZGlvVmFsdWU7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0dXBkYXRlTWV0aG9kID0gdXBkYXRlVmFsdWU7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBzcGVjaWFsIGNhc2UgLSA8aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3t7dHdvd2F5fX0nIHZhbHVlPSdmb28nPlxuICBcdGVsc2UgaWYgKHRoaXMuaXNUd293YXkgJiYgbmFtZSA9PT0gXCJuYW1lXCIpIHtcbiAgXHRcdGlmIChub2RlLnR5cGUgPT09IFwicmFkaW9cIikge1xuICBcdFx0XHR1cGRhdGVNZXRob2QgPSB1cGRhdGVSYWRpb05hbWU7XG4gIFx0XHR9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gIFx0XHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUNoZWNrYm94TmFtZTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBzcGVjaWFsIGNhc2UgLSBzdHlsZSBhdHRyaWJ1dGVzIGluIEludGVybmV0IEV4cGxvZGVyXG4gIFx0ZWxzZSBpZiAobmFtZSA9PT0gXCJzdHlsZVwiICYmIG5vZGUuc3R5bGUuc2V0QXR0cmlidXRlKSB7XG4gIFx0XHR1cGRhdGVNZXRob2QgPSB1cGRhdGVJRVN0eWxlQXR0cmlidXRlO1xuICBcdH1cblxuICBcdC8vIHNwZWNpYWwgY2FzZSAtIGNsYXNzIG5hbWVzLiBJRSBmdWNrcyB0aGluZ3MgdXAsIGFnYWluXG4gIFx0ZWxzZSBpZiAobmFtZSA9PT0gXCJjbGFzc1wiICYmICghbm9kZS5uYW1lc3BhY2VVUkkgfHwgbm9kZS5uYW1lc3BhY2VVUkkgPT09IG5hbWVzcGFjZXMuaHRtbCkpIHtcbiAgXHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUNsYXNzTmFtZTtcbiAgXHR9IGVsc2UgaWYgKHRoaXMudXNlUHJvcGVydHkpIHtcbiAgXHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUJvb2xlYW47XG4gIFx0fVxuXG4gIFx0aWYgKCF1cGRhdGVNZXRob2QpIHtcbiAgXHRcdHVwZGF0ZU1ldGhvZCA9IHVwZGF0ZUV2ZXJ5dGhpbmdFbHNlO1xuICBcdH1cblxuICBcdHRoaXMudXBkYXRlID0gdXBkYXRlTWV0aG9kO1xuICBcdHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICB2YXIgQXR0cmlidXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHR0aGlzLmluaXQob3B0aW9ucyk7XG4gIH07XG5cbiAgQXR0cmlidXRlLnByb3RvdHlwZSA9IHtcbiAgXHRidWJibGU6IEF0dHJpYnV0ZV9wcm90b3R5cGVfYnViYmxlLFxuICBcdGluaXQ6IHByb3RvdHlwZV9pbml0LFxuICBcdHJlYmluZDogQXR0cmlidXRlX3Byb3RvdHlwZV9yZWJpbmQsXG4gIFx0cmVuZGVyOiBBdHRyaWJ1dGVfcHJvdG90eXBlX3JlbmRlcixcbiAgXHR0b1N0cmluZzogQXR0cmlidXRlX3Byb3RvdHlwZV90b1N0cmluZyxcbiAgXHR1bmJpbmQ6IEF0dHJpYnV0ZV9wcm90b3R5cGVfdW5iaW5kLFxuICBcdHVwZGF0ZTogQXR0cmlidXRlX3Byb3RvdHlwZV91cGRhdGVcbiAgfTtcblxuICB2YXIgX0F0dHJpYnV0ZSA9IEF0dHJpYnV0ZTtcblxuICB2YXIgY3JlYXRlQXR0cmlidXRlcyA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gIFx0dmFyIG5hbWUsXG4gIFx0ICAgIGF0dHJpYnV0ZSxcbiAgXHQgICAgcmVzdWx0ID0gW107XG5cbiAgXHRmb3IgKG5hbWUgaW4gYXR0cmlidXRlcykge1xuICBcdFx0Ly8gc2tpcCBiaW5kaW5nIGF0dHJpYnV0ZXNcbiAgXHRcdGlmIChuYW1lID09PSBcInR3b3dheVwiIHx8IG5hbWUgPT09IFwibGF6eVwiKSB7XG4gIFx0XHRcdGNvbnRpbnVlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICBcdFx0XHRhdHRyaWJ1dGUgPSBuZXcgX0F0dHJpYnV0ZSh7XG4gIFx0XHRcdFx0ZWxlbWVudDogZWxlbWVudCxcbiAgXHRcdFx0XHRuYW1lOiBuYW1lLFxuICBcdFx0XHRcdHZhbHVlOiBhdHRyaWJ1dGVzW25hbWVdLFxuICBcdFx0XHRcdHJvb3Q6IGVsZW1lbnQucm9vdFxuICBcdFx0XHR9KTtcblxuICBcdFx0XHRyZXN1bHRbbmFtZV0gPSBhdHRyaWJ1dGU7XG5cbiAgXHRcdFx0aWYgKG5hbWUgIT09IFwidmFsdWVcIikge1xuICBcdFx0XHRcdHJlc3VsdC5wdXNoKGF0dHJpYnV0ZSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyB2YWx1ZSBhdHRyaWJ1dGUgZ29lcyBsYXN0LiBUaGlzIGlzIGJlY2F1c2UgaXRcbiAgXHQvLyBtYXkgZ2V0IGNsYW1wZWQgb24gcmVuZGVyIG90aGVyd2lzZSwgZS5nLiBpblxuICBcdC8vIGA8aW5wdXQgdHlwZT0ncmFuZ2UnIHZhbHVlPSc5OTknIG1pbj0nMCcgbWF4PScxMDAwJz5gXG4gIFx0Ly8gc2luY2UgZGVmYXVsdCBtYXggaXMgMTAwXG4gIFx0aWYgKGF0dHJpYnV0ZSA9IHJlc3VsdC52YWx1ZSkge1xuICBcdFx0cmVzdWx0LnB1c2goYXR0cmlidXRlKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBfQ29uZGl0aW9uYWxBdHRyaWJ1dGVfX2RpdjtcblxuICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIFx0X0NvbmRpdGlvbmFsQXR0cmlidXRlX19kaXYgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB9XG5cbiAgdmFyIENvbmRpdGlvbmFsQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIHRlbXBsYXRlKSB7XG4gIFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgXHR0aGlzLnJvb3QgPSBlbGVtZW50LnJvb3Q7XG4gIFx0dGhpcy5wYXJlbnRGcmFnbWVudCA9IGVsZW1lbnQucGFyZW50RnJhZ21lbnQ7XG5cbiAgXHR0aGlzLmF0dHJpYnV0ZXMgPSBbXTtcblxuICBcdHRoaXMuZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRyb290OiBlbGVtZW50LnJvb3QsXG4gIFx0XHRvd25lcjogdGhpcyxcbiAgXHRcdHRlbXBsYXRlOiBbdGVtcGxhdGVdXG4gIFx0fSk7XG4gIH07XG5cbiAgQ29uZGl0aW9uYWxBdHRyaWJ1dGUucHJvdG90eXBlID0ge1xuICBcdGJ1YmJsZTogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKHRoaXMubm9kZSkge1xuICBcdFx0XHR0aGlzLnVwZGF0ZSgpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLmVsZW1lbnQuYnViYmxlKCk7XG4gIFx0fSxcblxuICBcdHJlYmluZDogZnVuY3Rpb24gKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpIHtcbiAgXHRcdHRoaXMuZnJhZ21lbnQucmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdH0sXG5cbiAgXHRyZW5kZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gIFx0XHR0aGlzLm5vZGUgPSBub2RlO1xuICBcdFx0dGhpcy5pc1N2ZyA9IG5vZGUubmFtZXNwYWNlVVJJID09PSBuYW1lc3BhY2VzLnN2ZztcblxuICBcdFx0dGhpcy51cGRhdGUoKTtcbiAgXHR9LFxuXG4gIFx0dW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnVuYmluZCgpO1xuICBcdH0sXG5cbiAgXHR1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdHZhciBzdHIsIGF0dHJzO1xuXG4gIFx0XHRzdHIgPSB0aGlzLmZyYWdtZW50LnRvU3RyaW5nKCk7XG4gIFx0XHRhdHRycyA9IHBhcnNlQXR0cmlidXRlcyhzdHIsIHRoaXMuaXNTdmcpO1xuXG4gIFx0XHQvLyBhbnkgYXR0cmlidXRlcyB0aGF0IHByZXZpb3VzbHkgZXhpc3RlZCBidXQgbm8gbG9uZ2VyIGRvXG4gIFx0XHQvLyBtdXN0IGJlIHJlbW92ZWRcbiAgXHRcdHRoaXMuYXR0cmlidXRlcy5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcbiAgXHRcdFx0cmV0dXJuIG5vdEluKGF0dHJzLCBhKTtcbiAgXHRcdH0pLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcbiAgXHRcdFx0X3RoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUoYS5uYW1lKTtcbiAgXHRcdH0pO1xuXG4gIFx0XHRhdHRycy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gIFx0XHRcdF90aGlzLm5vZGUuc2V0QXR0cmlidXRlKGEubmFtZSwgYS52YWx1ZSk7XG4gIFx0XHR9KTtcblxuICBcdFx0dGhpcy5hdHRyaWJ1dGVzID0gYXR0cnM7XG4gIFx0fSxcblxuICBcdHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC50b1N0cmluZygpO1xuICBcdH1cbiAgfTtcblxuICB2YXIgX0NvbmRpdGlvbmFsQXR0cmlidXRlID0gQ29uZGl0aW9uYWxBdHRyaWJ1dGU7XG5cbiAgZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKHN0ciwgaXNTdmcpIHtcbiAgXHR2YXIgdGFnID0gaXNTdmcgPyBcInN2Z1wiIDogXCJkaXZcIjtcbiAgXHRfQ29uZGl0aW9uYWxBdHRyaWJ1dGVfX2Rpdi5pbm5lckhUTUwgPSBcIjxcIiArIHRhZyArIFwiIFwiICsgc3RyICsgXCI+PC9cIiArIHRhZyArIFwiPlwiO1xuXG4gIFx0cmV0dXJuIHRvQXJyYXkoX0NvbmRpdGlvbmFsQXR0cmlidXRlX19kaXYuY2hpbGROb2Rlc1swXS5hdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdEluKGhheXN0YWNrLCBuZWVkbGUpIHtcbiAgXHR2YXIgaSA9IGhheXN0YWNrLmxlbmd0aDtcblxuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGlmIChoYXlzdGFja1tpXS5uYW1lID09PSBuZWVkbGUubmFtZSkge1xuICBcdFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHRydWU7XG4gIH1cblxuICB2YXIgY3JlYXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgXHRpZiAoIWF0dHJpYnV0ZXMpIHtcbiAgXHRcdHJldHVybiBbXTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24gKGEpIHtcbiAgXHRcdHJldHVybiBuZXcgX0NvbmRpdGlvbmFsQXR0cmlidXRlKGVsZW1lbnQsIGEpO1xuICBcdH0pO1xuICB9O1xuXG4gIHZhciBCaW5kaW5nID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgXHR2YXIgaW50ZXJwb2xhdG9yLCBrZXlwYXRoLCB2YWx1ZSwgcGFyZW50Rm9ybTtcblxuICBcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIFx0dGhpcy5yb290ID0gZWxlbWVudC5yb290O1xuICBcdHRoaXMuYXR0cmlidXRlID0gZWxlbWVudC5hdHRyaWJ1dGVzW3RoaXMubmFtZSB8fCBcInZhbHVlXCJdO1xuXG4gIFx0aW50ZXJwb2xhdG9yID0gdGhpcy5hdHRyaWJ1dGUuaW50ZXJwb2xhdG9yO1xuICBcdGludGVycG9sYXRvci50d293YXlCaW5kaW5nID0gdGhpcztcblxuICBcdGlmIChrZXlwYXRoID0gaW50ZXJwb2xhdG9yLmtleXBhdGgpIHtcbiAgXHRcdGlmIChrZXlwYXRoLnN0ci5zbGljZSgtMSkgPT09IFwifVwiKSB7XG4gIFx0XHRcdHdhcm5PbmNlSWZEZWJ1ZyhcIlR3by13YXkgYmluZGluZyBkb2VzIG5vdCB3b3JrIHdpdGggZXhwcmVzc2lvbnMgKGAlc2Agb24gPCVzPilcIiwgaW50ZXJwb2xhdG9yLnJlc29sdmVyLnVuaXF1ZVN0cmluZywgZWxlbWVudC5uYW1lLCB7IHJhY3RpdmU6IHRoaXMucm9vdCB9KTtcbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoa2V5cGF0aC5pc1NwZWNpYWwpIHtcbiAgXHRcdFx0d2Fybk9uY2VJZkRlYnVnKFwiVHdvLXdheSBiaW5kaW5nIGRvZXMgbm90IHdvcmsgd2l0aCAlc1wiLCBpbnRlcnBvbGF0b3IucmVzb2x2ZXIucmVmLCB7IHJhY3RpdmU6IHRoaXMucm9vdCB9KTtcbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBBIG11c3RhY2hlIG1heSBiZSAqYW1iaWd1b3VzKi4gTGV0J3Mgc2F5IHdlIHdlcmUgZ2l2ZW5cbiAgXHRcdC8vIGB2YWx1ZT1cInt7YmFyfX1cImAuIElmIHRoZSBjb250ZXh0IHdhcyBgZm9vYCwgYW5kIGBmb28uYmFyYFxuICBcdFx0Ly8gKndhc24ndCogYHVuZGVmaW5lZGAsIHRoZSBrZXlwYXRoIHdvdWxkIGJlIGBmb28uYmFyYC5cbiAgXHRcdC8vIFRoZW4sIGFueSB1c2VyIGlucHV0IHdvdWxkIHJlc3VsdCBpbiBgZm9vLmJhcmAgYmVpbmcgdXBkYXRlZC5cbiAgXHRcdC8vXG4gIFx0XHQvLyBJZiwgaG93ZXZlciwgYGZvby5iYXJgICp3YXMqIHVuZGVmaW5lZCwgYW5kIHNvIHdhcyBgYmFyYCwgd2Ugd291bGQgYmVcbiAgXHRcdC8vIGxlZnQgd2l0aCBhbiB1bnJlc29sdmVkIHBhcnRpYWwga2V5cGF0aCAtIHNvIHdlIGFyZSBmb3JjZWQgdG8gbWFrZSBhblxuICBcdFx0Ly8gYXNzdW1wdGlvbi4gVGhhdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGlucHV0IGluIHF1ZXN0aW9uIHNob3VsZFxuICBcdFx0Ly8gYmUgZm9yY2VkIHRvIHJlc29sdmUgdG8gYGJhcmAsIGFuZCBhbnkgdXNlciBpbnB1dCB3b3VsZCBhZmZlY3QgYGJhcmBcbiAgXHRcdC8vIGFuZCBub3QgYGZvby5iYXJgLlxuICBcdFx0Ly9cbiAgXHRcdC8vIERpZCB0aGF0IG1ha2UgYW55IHNlbnNlPyBObz8gT2guIFNvcnJ5LiBXZWxsIHRoZSBtb3JhbCBvZiB0aGUgc3RvcnkgaXNcbiAgXHRcdC8vIGJlIGV4cGxpY2l0IHdoZW4gdXNpbmcgdHdvLXdheSBkYXRhLWJpbmRpbmcgYWJvdXQgd2hhdCBrZXlwYXRoIHlvdSdyZVxuICBcdFx0Ly8gdXBkYXRpbmcuIFVzaW5nIGl0IGluIGxpc3RzIGlzIHByb2JhYmx5IGEgcmVjaXBlIGZvciBjb25mdXNpb24uLi5cbiAgXHRcdHZhciByZWYgPSBpbnRlcnBvbGF0b3IudGVtcGxhdGUuciA/IFwiJ1wiICsgaW50ZXJwb2xhdG9yLnRlbXBsYXRlLnIgKyBcIicgcmVmZXJlbmNlXCIgOiBcImV4cHJlc3Npb25cIjtcbiAgXHRcdHdhcm5JZkRlYnVnKFwiVGhlICVzIGJlaW5nIHVzZWQgZm9yIHR3by13YXkgYmluZGluZyBpcyBhbWJpZ3VvdXMsIGFuZCBtYXkgY2F1c2UgdW5leHBlY3RlZCByZXN1bHRzLiBDb25zaWRlciBpbml0aWFsaXNpbmcgeW91ciBkYXRhIHRvIGVsaW1pbmF0ZSB0aGUgYW1iaWd1aXR5XCIsIHJlZiwgeyByYWN0aXZlOiB0aGlzLnJvb3QgfSk7XG4gIFx0XHRpbnRlcnBvbGF0b3IucmVzb2x2ZXIuZm9yY2VSZXNvbHV0aW9uKCk7XG4gIFx0XHRrZXlwYXRoID0gaW50ZXJwb2xhdG9yLmtleXBhdGg7XG4gIFx0fVxuXG4gIFx0dGhpcy5hdHRyaWJ1dGUuaXNUd293YXkgPSB0cnVlO1xuICBcdHRoaXMua2V5cGF0aCA9IGtleXBhdGg7XG5cbiAgXHQvLyBpbml0aWFsaXNlIHZhbHVlLCBpZiBpdCdzIHVuZGVmaW5lZFxuICBcdHZhbHVlID0gdGhpcy5yb290LnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG5cbiAgXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmdldEluaXRpYWxWYWx1ZSkge1xuICBcdFx0dmFsdWUgPSB0aGlzLmdldEluaXRpYWxWYWx1ZSgpO1xuXG4gIFx0XHRpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHR0aGlzLnJvb3Qudmlld21vZGVsLnNldChrZXlwYXRoLCB2YWx1ZSk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0aWYgKHBhcmVudEZvcm0gPSBmaW5kUGFyZW50Rm9ybShlbGVtZW50KSkge1xuICBcdFx0dGhpcy5yZXNldFZhbHVlID0gdmFsdWU7XG4gIFx0XHRwYXJlbnRGb3JtLmZvcm1CaW5kaW5ncy5wdXNoKHRoaXMpO1xuICBcdH1cbiAgfTtcblxuICBCaW5kaW5nLnByb3RvdHlwZSA9IHtcbiAgXHRoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMucm9vdCk7XG4gIFx0XHR0aGlzLmF0dHJpYnV0ZS5sb2NrZWQgPSB0cnVlO1xuICBcdFx0dGhpcy5yb290LnZpZXdtb2RlbC5zZXQodGhpcy5rZXlwYXRoLCB0aGlzLmdldFZhbHVlKCkpO1xuICBcdFx0Z2xvYmFsX3J1bmxvb3Auc2NoZWR1bGVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0cmV0dXJuIF90aGlzLmF0dHJpYnV0ZS5sb2NrZWQgPSBmYWxzZTtcbiAgXHRcdH0pO1xuICBcdFx0Z2xvYmFsX3J1bmxvb3AuZW5kKCk7XG4gIFx0fSxcblxuICBcdHJlYm91bmQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBiaW5kaW5ncywgb2xkS2V5cGF0aCwgbmV3S2V5cGF0aDtcblxuICBcdFx0b2xkS2V5cGF0aCA9IHRoaXMua2V5cGF0aDtcbiAgXHRcdG5ld0tleXBhdGggPSB0aGlzLmF0dHJpYnV0ZS5pbnRlcnBvbGF0b3Iua2V5cGF0aDtcblxuICBcdFx0Ly8gVGhlIGF0dHJpYnV0ZSB0aGlzIGJpbmRpbmcgaXMgbGlua2VkIHRvIGhhcyBhbHJlYWR5IGRvbmUgdGhlIHdvcmtcbiAgXHRcdGlmIChvbGRLZXlwYXRoID09PSBuZXdLZXlwYXRoKSB7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0cmVtb3ZlRnJvbUFycmF5KHRoaXMucm9vdC5fdHdvd2F5QmluZGluZ3Nbb2xkS2V5cGF0aC5zdHJdLCB0aGlzKTtcblxuICBcdFx0dGhpcy5rZXlwYXRoID0gbmV3S2V5cGF0aDtcblxuICBcdFx0YmluZGluZ3MgPSB0aGlzLnJvb3QuX3R3b3dheUJpbmRpbmdzW25ld0tleXBhdGguc3RyXSB8fCAodGhpcy5yb290Ll90d293YXlCaW5kaW5nc1tuZXdLZXlwYXRoLnN0cl0gPSBbXSk7XG4gIFx0XHRiaW5kaW5ncy5wdXNoKHRoaXMpO1xuICBcdH0sXG5cbiAgXHR1bmJpbmQ6IGZ1bmN0aW9uICgpIHt9XG4gIH07XG5cbiAgQmluZGluZy5leHRlbmQgPSBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICBcdHZhciBQYXJlbnQgPSB0aGlzLFxuICBcdCAgICBTcGVjaWFsaXNlZEJpbmRpbmc7XG5cbiAgXHRTcGVjaWFsaXNlZEJpbmRpbmcgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICBcdFx0QmluZGluZy5jYWxsKHRoaXMsIGVsZW1lbnQpO1xuXG4gIFx0XHRpZiAodGhpcy5pbml0KSB7XG4gIFx0XHRcdHRoaXMuaW5pdCgpO1xuICBcdFx0fVxuICBcdH07XG5cbiAgXHRTcGVjaWFsaXNlZEJpbmRpbmcucHJvdG90eXBlID0gY3JlYXRlKFBhcmVudC5wcm90b3R5cGUpO1xuICBcdHV0aWxzX29iamVjdF9fZXh0ZW5kKFNwZWNpYWxpc2VkQmluZGluZy5wcm90b3R5cGUsIHByb3BlcnRpZXMpO1xuXG4gIFx0U3BlY2lhbGlzZWRCaW5kaW5nLmV4dGVuZCA9IEJpbmRpbmcuZXh0ZW5kO1xuXG4gIFx0cmV0dXJuIFNwZWNpYWxpc2VkQmluZGluZztcbiAgfTtcblxuICB2YXIgQmluZGluZ19CaW5kaW5nID0gQmluZGluZztcblxuICBmdW5jdGlvbiBmaW5kUGFyZW50Rm9ybShlbGVtZW50KSB7XG4gIFx0d2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCkge1xuICBcdFx0aWYgKGVsZW1lbnQubmFtZSA9PT0gXCJmb3JtXCIpIHtcbiAgXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG4gIFx0XHR9XG4gIFx0fVxuICB9XG5cbiAgLy8gdGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBpcyB1bmJvdW5kLlxuICAvLyBTcGVjaWFsaXNlZCBiaW5kaW5ncyBjYW4gb3ZlcnJpZGUgaXRcblxuICAvLyBUaGlzIGlzIHRoZSBoYW5kbGVyIGZvciBET00gZXZlbnRzIHRoYXQgd291bGQgbGVhZCB0byBhIGNoYW5nZSBpbiB0aGUgbW9kZWxcbiAgLy8gKGkuZS4gY2hhbmdlLCBzb21ldGltZXMsIGlucHV0LCBhbmQgb2NjYXNpb25hbGx5IGNsaWNrIGFuZCBrZXl1cClcbiAgdmFyIGhhbmRsZURvbUV2ZW50ID0gaGFuZGxlQ2hhbmdlO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSgpIHtcbiAgXHR0aGlzLl9yYWN0aXZlLmJpbmRpbmcuaGFuZGxlQ2hhbmdlKCk7XG4gIH1cblxuICB2YXIgR2VuZXJpY0JpbmRpbmc7XG5cbiAgR2VuZXJpY0JpbmRpbmcgPSBCaW5kaW5nX0JpbmRpbmcuZXh0ZW5kKHtcbiAgXHRnZXRJbml0aWFsVmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiBcIlwiO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5ub2RlLnZhbHVlO1xuICBcdH0sXG5cbiAgXHRyZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlID0gdGhpcy5lbGVtZW50Lm5vZGUsXG4gIFx0XHQgICAgbGF6eSxcbiAgXHRcdCAgICB0aW1lb3V0ID0gZmFsc2U7XG4gIFx0XHR0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcblxuICBcdFx0Ly8gYW55IGxhenkgc2V0dGluZyBmb3IgdGhpcyBlbGVtZW50IG92ZXJyaWRlcyB0aGUgcm9vdFxuICBcdFx0Ly8gaWYgdGhlIHZhbHVlIGlzIGEgbnVtYmVyLCBpdCdzIGEgdGltZW91dFxuICBcdFx0bGF6eSA9IHRoaXMucm9vdC5sYXp5O1xuICBcdFx0aWYgKHRoaXMuZWxlbWVudC5sYXp5ID09PSB0cnVlKSB7XG4gIFx0XHRcdGxhenkgPSB0cnVlO1xuICBcdFx0fSBlbHNlIGlmICh0aGlzLmVsZW1lbnQubGF6eSA9PT0gZmFsc2UpIHtcbiAgXHRcdFx0bGF6eSA9IGZhbHNlO1xuICBcdFx0fSBlbHNlIGlmIChpc19faXNOdW1lcmljKHRoaXMuZWxlbWVudC5sYXp5KSkge1xuICBcdFx0XHRsYXp5ID0gZmFsc2U7XG4gIFx0XHRcdHRpbWVvdXQgPSArdGhpcy5lbGVtZW50Lmxhenk7XG4gIFx0XHR9IGVsc2UgaWYgKGlzX19pc051bWVyaWMobGF6eSB8fCBcIlwiKSkge1xuICBcdFx0XHR0aW1lb3V0ID0gK2xhenk7XG4gIFx0XHRcdGxhenkgPSBmYWxzZTtcblxuICBcdFx0XHQvLyBtYWtlIHN1cmUgdGhlIHRpbWVvdXQgaXMgYXZhaWxhYmxlIHRvIHRoZSBoYW5kbGVyXG4gIFx0XHRcdHRoaXMuZWxlbWVudC5sYXp5ID0gdGltZW91dDtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5oYW5kbGVyID0gdGltZW91dCA/IGhhbmRsZURlbGF5IDogaGFuZGxlRG9tRXZlbnQ7XG5cbiAgXHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuXG4gIFx0XHRpZiAoIWxhenkpIHtcbiAgXHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5oYW5kbGVyLCBmYWxzZSk7XG5cbiAgXHRcdFx0aWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgXHRcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZXIsIGZhbHNlKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXIsIGZhbHNlKTtcbiAgXHR9LFxuXG4gIFx0dW5yZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlID0gdGhpcy5lbGVtZW50Lm5vZGU7XG4gIFx0XHR0aGlzLnJlbmRlcmVkID0gZmFsc2U7XG5cbiAgXHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5oYW5kbGVyLCBmYWxzZSk7XG4gIFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZXIsIGZhbHNlKTtcbiAgXHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1ciwgZmFsc2UpO1xuICBcdH1cbiAgfSk7XG5cbiAgdmFyIEJpbmRpbmdfR2VuZXJpY0JpbmRpbmcgPSBHZW5lcmljQmluZGluZztcblxuICBmdW5jdGlvbiBoYW5kbGVCbHVyKCkge1xuICBcdHZhciB2YWx1ZTtcblxuICBcdGhhbmRsZURvbUV2ZW50LmNhbGwodGhpcyk7XG5cbiAgXHR2YWx1ZSA9IHRoaXMuX3JhY3RpdmUucm9vdC52aWV3bW9kZWwuZ2V0KHRoaXMuX3JhY3RpdmUuYmluZGluZy5rZXlwYXRoKTtcbiAgXHR0aGlzLnZhbHVlID0gdmFsdWUgPT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRGVsYXkoKSB7XG4gIFx0dmFyIGJpbmRpbmcgPSB0aGlzLl9yYWN0aXZlLmJpbmRpbmcsXG4gIFx0ICAgIGVsID0gdGhpcztcblxuICBcdGlmICghIWJpbmRpbmcuX3RpbWVvdXQpIGNsZWFyVGltZW91dChiaW5kaW5nLl90aW1lb3V0KTtcblxuICBcdGJpbmRpbmcuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmIChiaW5kaW5nLnJlbmRlcmVkKSBoYW5kbGVEb21FdmVudC5jYWxsKGVsKTtcbiAgXHRcdGJpbmRpbmcuX3RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gIFx0fSwgYmluZGluZy5lbGVtZW50LmxhenkpO1xuICB9XG5cbiAgdmFyIENvbnRlbnRFZGl0YWJsZUJpbmRpbmcgPSBCaW5kaW5nX0dlbmVyaWNCaW5kaW5nLmV4dGVuZCh7XG4gIFx0Z2V0SW5pdGlhbFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZyYWdtZW50ID8gdGhpcy5lbGVtZW50LmZyYWdtZW50LnRvU3RyaW5nKCkgOiBcIlwiO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5ub2RlLmlubmVySFRNTDtcbiAgXHR9XG4gIH0pO1xuXG4gIHZhciBCaW5kaW5nX0NvbnRlbnRFZGl0YWJsZUJpbmRpbmcgPSBDb250ZW50RWRpdGFibGVCaW5kaW5nO1xuXG4gIHZhciBzaGFyZWRfZ2V0U2libGluZ3MgPSBnZXRTaWJsaW5ncztcbiAgdmFyIHNldHMgPSB7fTtcbiAgZnVuY3Rpb24gZ2V0U2libGluZ3MoaWQsIGdyb3VwLCBrZXlwYXRoKSB7XG4gIFx0dmFyIGhhc2ggPSBpZCArIGdyb3VwICsga2V5cGF0aDtcbiAgXHRyZXR1cm4gc2V0c1toYXNoXSB8fCAoc2V0c1toYXNoXSA9IFtdKTtcbiAgfVxuXG4gIHZhciBSYWRpb0JpbmRpbmcgPSBCaW5kaW5nX0JpbmRpbmcuZXh0ZW5kKHtcbiAgXHRuYW1lOiBcImNoZWNrZWRcIixcblxuICBcdGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRoaXMuc2libGluZ3MgPSBzaGFyZWRfZ2V0U2libGluZ3ModGhpcy5yb290Ll9ndWlkLCBcInJhZGlvXCIsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpKTtcbiAgXHRcdHRoaXMuc2libGluZ3MucHVzaCh0aGlzKTtcbiAgXHR9LFxuXG4gIFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5ub2RlO1xuXG4gIFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcblxuICBcdFx0aWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgXHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dW5yZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlID0gdGhpcy5lbGVtZW50Lm5vZGU7XG5cbiAgXHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcbiAgXHR9LFxuXG4gIFx0aGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRnbG9iYWxfcnVubG9vcC5zdGFydCh0aGlzLnJvb3QpO1xuXG4gIFx0XHR0aGlzLnNpYmxpbmdzLmZvckVhY2goZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgXHRcdFx0YmluZGluZy5yb290LnZpZXdtb2RlbC5zZXQoYmluZGluZy5rZXlwYXRoLCBiaW5kaW5nLmdldFZhbHVlKCkpO1xuICBcdFx0fSk7XG5cbiAgXHRcdGdsb2JhbF9ydW5sb29wLmVuZCgpO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5ub2RlLmNoZWNrZWQ7XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KHRoaXMuc2libGluZ3MsIHRoaXMpO1xuICBcdH1cbiAgfSk7XG5cbiAgdmFyIEJpbmRpbmdfUmFkaW9CaW5kaW5nID0gUmFkaW9CaW5kaW5nO1xuXG4gIHZhciBSYWRpb05hbWVCaW5kaW5nID0gQmluZGluZ19CaW5kaW5nLmV4dGVuZCh7XG4gIFx0bmFtZTogXCJuYW1lXCIsXG5cbiAgXHRpbml0OiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLnNpYmxpbmdzID0gc2hhcmVkX2dldFNpYmxpbmdzKHRoaXMucm9vdC5fZ3VpZCwgXCJyYWRpb25hbWVcIiwgdGhpcy5rZXlwYXRoLnN0cik7XG4gIFx0XHR0aGlzLnNpYmxpbmdzLnB1c2godGhpcyk7XG5cbiAgXHRcdHRoaXMucmFkaW9OYW1lID0gdHJ1ZTsgLy8gc28gdGhhdCByYWN0aXZlLnVwZGF0ZU1vZGVsKCkga25vd3Mgd2hhdCB0byBkbyB3aXRoIHRoaXNcbiAgXHR9LFxuXG4gIFx0Z2V0SW5pdGlhbFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImNoZWNrZWRcIikpIHtcbiAgXHRcdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5ub2RlO1xuXG4gIFx0XHRub2RlLm5hbWUgPSBcInt7XCIgKyB0aGlzLmtleXBhdGguc3RyICsgXCJ9fVwiO1xuICBcdFx0bm9kZS5jaGVja2VkID0gdGhpcy5yb290LnZpZXdtb2RlbC5nZXQodGhpcy5rZXlwYXRoKSA9PSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG5cbiAgXHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuXG4gIFx0XHRpZiAobm9kZS5hdHRhY2hFdmVudCkge1xuICBcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZTtcblxuICBcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZURvbUV2ZW50LCBmYWxzZSk7XG4gIFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZTtcbiAgXHRcdHJldHVybiBub2RlLl9yYWN0aXZlID8gbm9kZS5fcmFjdGl2ZS52YWx1ZSA6IG5vZGUudmFsdWU7XG4gIFx0fSxcblxuICBcdGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gKCkge1xuICBcdFx0Ly8gSWYgdGhpcyA8aW5wdXQ+IGlzIHRoZSBvbmUgdGhhdCdzIGNoZWNrZWQsIHRoZW4gdGhlIHZhbHVlIG9mIGl0c1xuICBcdFx0Ly8gYG5hbWVgIGtleXBhdGggZ2V0cyBzZXQgdG8gaXRzIHZhbHVlXG4gIFx0XHRpZiAodGhpcy5lbGVtZW50Lm5vZGUuY2hlY2tlZCkge1xuICBcdFx0XHRCaW5kaW5nX0JpbmRpbmcucHJvdG90eXBlLmhhbmRsZUNoYW5nZS5jYWxsKHRoaXMpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRyZWJvdW5kOiBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdFx0dmFyIG5vZGU7XG5cbiAgXHRcdEJpbmRpbmdfQmluZGluZy5wcm90b3R5cGUucmVib3VuZC5jYWxsKHRoaXMsIG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuXG4gIFx0XHRpZiAobm9kZSA9IHRoaXMuZWxlbWVudC5ub2RlKSB7XG4gIFx0XHRcdG5vZGUubmFtZSA9IFwie3tcIiArIHRoaXMua2V5cGF0aC5zdHIgKyBcIn19XCI7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KHRoaXMuc2libGluZ3MsIHRoaXMpO1xuICBcdH1cbiAgfSk7XG5cbiAgdmFyIEJpbmRpbmdfUmFkaW9OYW1lQmluZGluZyA9IFJhZGlvTmFtZUJpbmRpbmc7XG5cbiAgdmFyIENoZWNrYm94TmFtZUJpbmRpbmcgPSBCaW5kaW5nX0JpbmRpbmcuZXh0ZW5kKHtcbiAgXHRuYW1lOiBcIm5hbWVcIixcblxuICBcdGdldEluaXRpYWxWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0Ly8gVGhpcyBvbmx5IGdldHMgY2FsbGVkIG9uY2UgcGVyIGdyb3VwIChvZiBpbnB1dHMgdGhhdFxuICBcdFx0Ly8gc2hhcmUgYSBuYW1lKSwgYmVjYXVzZSBpdCBvbmx5IGdldHMgY2FsbGVkIGlmIHRoZXJlXG4gIFx0XHQvLyBpc24ndCBhbiBpbml0aWFsIHZhbHVlLiBCeSB0aGUgc2FtZSB0b2tlbiwgd2UgY2FuIG1ha2VcbiAgXHRcdC8vIGEgbm90ZSBvZiB0aGF0IGZhY3QgdGhhdCB0aGVyZSB3YXMgbm8gaW5pdGlhbCB2YWx1ZSxcbiAgXHRcdC8vIGFuZCBwb3B1bGF0ZSBpdCB1c2luZyBhbnkgYGNoZWNrZWRgIGF0dHJpYnV0ZXMgdGhhdFxuICBcdFx0Ly8gZXhpc3QgKHdoaWNoIHVzZXJzIHNob3VsZCBhdm9pZCwgYnV0IHdoaWNoIHdlIHNob3VsZFxuICBcdFx0Ly8gc3VwcG9ydCBhbnl3YXkgdG8gYXZvaWQgYnJlYWtpbmcgZXhwZWN0YXRpb25zKVxuICBcdFx0dGhpcy5ub0luaXRpYWxWYWx1ZSA9IHRydWU7XG4gIFx0XHRyZXR1cm4gW107XG4gIFx0fSxcblxuICBcdGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBleGlzdGluZ1ZhbHVlLCBiaW5kaW5nVmFsdWU7XG5cbiAgXHRcdHRoaXMuY2hlY2tib3hOYW1lID0gdHJ1ZTsgLy8gc28gdGhhdCByYWN0aXZlLnVwZGF0ZU1vZGVsKCkga25vd3Mgd2hhdCB0byBkbyB3aXRoIHRoaXNcblxuICBcdFx0Ly8gRWFjaCBpbnB1dCBoYXMgYSByZWZlcmVuY2UgdG8gYW4gYXJyYXkgY29udGFpbmluZyBpdCBhbmQgaXRzXG4gIFx0XHQvLyBzaWJsaW5ncywgYXMgdHdvLXdheSBiaW5kaW5nIGRlcGVuZHMgb24gYmVpbmcgYWJsZSB0byBhc2NlcnRhaW5cbiAgXHRcdC8vIHRoZSBzdGF0dXMgb2YgYWxsIGlucHV0cyB3aXRoaW4gdGhlIGdyb3VwXG4gIFx0XHR0aGlzLnNpYmxpbmdzID0gc2hhcmVkX2dldFNpYmxpbmdzKHRoaXMucm9vdC5fZ3VpZCwgXCJjaGVja2JveGVzXCIsIHRoaXMua2V5cGF0aC5zdHIpO1xuICBcdFx0dGhpcy5zaWJsaW5ncy5wdXNoKHRoaXMpO1xuXG4gIFx0XHRpZiAodGhpcy5ub0luaXRpYWxWYWx1ZSkge1xuICBcdFx0XHR0aGlzLnNpYmxpbmdzLm5vSW5pdGlhbFZhbHVlID0gdHJ1ZTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gSWYgbm8gaW5pdGlhbCB2YWx1ZSB3YXMgc2V0LCBhbmQgdGhpcyBpbnB1dCBpcyBjaGVja2VkLCB3ZVxuICBcdFx0Ly8gdXBkYXRlIHRoZSBtb2RlbFxuICBcdFx0aWYgKHRoaXMuc2libGluZ3Mubm9Jbml0aWFsVmFsdWUgJiYgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImNoZWNrZWRcIikpIHtcbiAgXHRcdFx0ZXhpc3RpbmdWYWx1ZSA9IHRoaXMucm9vdC52aWV3bW9kZWwuZ2V0KHRoaXMua2V5cGF0aCk7XG4gIFx0XHRcdGJpbmRpbmdWYWx1ZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICBcdFx0XHRleGlzdGluZ1ZhbHVlLnB1c2goYmluZGluZ1ZhbHVlKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZW1vdmVGcm9tQXJyYXkodGhpcy5zaWJsaW5ncywgdGhpcyk7XG4gIFx0fSxcblxuICBcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZSxcbiAgXHRcdCAgICBleGlzdGluZ1ZhbHVlLFxuICBcdFx0ICAgIGJpbmRpbmdWYWx1ZTtcblxuICBcdFx0ZXhpc3RpbmdWYWx1ZSA9IHRoaXMucm9vdC52aWV3bW9kZWwuZ2V0KHRoaXMua2V5cGF0aCk7XG4gIFx0XHRiaW5kaW5nVmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG5cbiAgXHRcdGlmIChpc0FycmF5KGV4aXN0aW5nVmFsdWUpKSB7XG4gIFx0XHRcdHRoaXMuaXNDaGVja2VkID0gYXJyYXlDb250YWlucyhleGlzdGluZ1ZhbHVlLCBiaW5kaW5nVmFsdWUpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dGhpcy5pc0NoZWNrZWQgPSBleGlzdGluZ1ZhbHVlID09IGJpbmRpbmdWYWx1ZTtcbiAgXHRcdH1cblxuICBcdFx0bm9kZS5uYW1lID0gXCJ7e1wiICsgdGhpcy5rZXlwYXRoLnN0ciArIFwifX1cIjtcbiAgXHRcdG5vZGUuY2hlY2tlZCA9IHRoaXMuaXNDaGVja2VkO1xuXG4gIFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcblxuICBcdFx0Ly8gaW4gY2FzZSBvZiBJRSBlbWVyZ2VuY3ksIGJpbmQgdG8gY2xpY2sgZXZlbnQgYXMgd2VsbFxuICBcdFx0aWYgKG5vZGUuYXR0YWNoRXZlbnQpIHtcbiAgXHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dW5yZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlID0gdGhpcy5lbGVtZW50Lm5vZGU7XG5cbiAgXHRcdG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcbiAgXHR9LFxuXG4gIFx0Y2hhbmdlZDogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIHdhc0NoZWNrZWQgPSAhIXRoaXMuaXNDaGVja2VkO1xuICBcdFx0dGhpcy5pc0NoZWNrZWQgPSB0aGlzLmVsZW1lbnQubm9kZS5jaGVja2VkO1xuICBcdFx0cmV0dXJuIHRoaXMuaXNDaGVja2VkID09PSB3YXNDaGVja2VkO1xuICBcdH0sXG5cbiAgXHRoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRoaXMuaXNDaGVja2VkID0gdGhpcy5lbGVtZW50Lm5vZGUuY2hlY2tlZDtcbiAgXHRcdEJpbmRpbmdfQmluZGluZy5wcm90b3R5cGUuaGFuZGxlQ2hhbmdlLmNhbGwodGhpcyk7XG4gIFx0fSxcblxuICBcdGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5zaWJsaW5ncy5maWx0ZXIoaXNDaGVja2VkKS5tYXAoQmluZGluZ19DaGVja2JveE5hbWVCaW5kaW5nX19nZXRWYWx1ZSk7XG4gIFx0fVxuICB9KTtcblxuICBmdW5jdGlvbiBpc0NoZWNrZWQoYmluZGluZykge1xuICBcdHJldHVybiBiaW5kaW5nLmlzQ2hlY2tlZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIEJpbmRpbmdfQ2hlY2tib3hOYW1lQmluZGluZ19fZ2V0VmFsdWUoYmluZGluZykge1xuICBcdHJldHVybiBiaW5kaW5nLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIH1cblxuICB2YXIgQmluZGluZ19DaGVja2JveE5hbWVCaW5kaW5nID0gQ2hlY2tib3hOYW1lQmluZGluZztcblxuICB2YXIgQ2hlY2tib3hCaW5kaW5nID0gQmluZGluZ19CaW5kaW5nLmV4dGVuZCh7XG4gIFx0bmFtZTogXCJjaGVja2VkXCIsXG5cbiAgXHRyZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlID0gdGhpcy5lbGVtZW50Lm5vZGU7XG5cbiAgXHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuXG4gIFx0XHRpZiAobm9kZS5hdHRhY2hFdmVudCkge1xuICBcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZTtcblxuICBcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZURvbUV2ZW50LCBmYWxzZSk7XG4gIFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5ub2RlLmNoZWNrZWQ7XG4gIFx0fVxuICB9KTtcblxuICB2YXIgQmluZGluZ19DaGVja2JveEJpbmRpbmcgPSBDaGVja2JveEJpbmRpbmc7XG5cbiAgdmFyIFNlbGVjdEJpbmRpbmcgPSBCaW5kaW5nX0JpbmRpbmcuZXh0ZW5kKHtcbiAgXHRnZXRJbml0aWFsVmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBvcHRpb25zID0gdGhpcy5lbGVtZW50Lm9wdGlvbnMsXG4gIFx0XHQgICAgbGVuLFxuICBcdFx0ICAgIGksXG4gIFx0XHQgICAgdmFsdWUsXG4gIFx0XHQgICAgb3B0aW9uV2FzU2VsZWN0ZWQ7XG5cbiAgXHRcdGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdGkgPSBsZW4gPSBvcHRpb25zLmxlbmd0aDtcblxuICBcdFx0aWYgKCFsZW4pIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHQvLyB0YWtlIHRoZSBmaW5hbCBzZWxlY3RlZCBvcHRpb24uLi5cbiAgXHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0aWYgKG9wdGlvbnNbaV0uZ2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIikpIHtcbiAgXHRcdFx0XHR2YWx1ZSA9IG9wdGlvbnNbaV0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIFx0XHRcdFx0b3B0aW9uV2FzU2VsZWN0ZWQgPSB0cnVlO1xuICBcdFx0XHRcdGJyZWFrO1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdC8vIG9yIHRoZSBmaXJzdCBub24tZGlzYWJsZWQgb3B0aW9uLCBpZiBub25lIGFyZSBzZWxlY3RlZFxuICBcdFx0aWYgKCFvcHRpb25XYXNTZWxlY3RlZCkge1xuICBcdFx0XHR3aGlsZSAoKytpIDwgbGVuKSB7XG4gIFx0XHRcdFx0aWYgKCFvcHRpb25zW2ldLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKSB7XG4gIFx0XHRcdFx0XHR2YWx1ZSA9IG9wdGlvbnNbaV0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIFx0XHRcdFx0XHRicmVhaztcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0Ly8gVGhpcyBpcyBhbiBvcHRpbWlzYXRpb24gKGFrYSBoYWNrKSB0aGF0IGFsbG93cyB1cyB0byBmb3JnbyBzb21lXG4gIFx0XHQvLyBvdGhlciBtb3JlIGV4cGVuc2l2ZSB3b3JrXG4gIFx0XHRpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHR0aGlzLmVsZW1lbnQuYXR0cmlidXRlcy52YWx1ZS52YWx1ZSA9IHZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gdmFsdWU7XG4gIFx0fSxcblxuICBcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5lbGVtZW50Lm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5lbGVtZW50Lm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVEb21FdmVudCwgZmFsc2UpO1xuICBcdH0sXG5cbiAgXHQvLyBUT0RPIHRoaXMgbWV0aG9kIGlzIGFuIGFub21hbHkuLi4gaXMgaXQgbmVjZXNzYXJ5P1xuICBcdHNldFZhbHVlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgXHRcdHRoaXMucm9vdC52aWV3bW9kZWwuc2V0KHRoaXMua2V5cGF0aCwgdmFsdWUpO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIG9wdGlvbnMsIGksIGxlbiwgb3B0aW9uLCBvcHRpb25WYWx1ZTtcblxuICBcdFx0b3B0aW9ucyA9IHRoaXMuZWxlbWVudC5ub2RlLm9wdGlvbnM7XG4gIFx0XHRsZW4gPSBvcHRpb25zLmxlbmd0aDtcblxuICBcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbaV07XG5cbiAgXHRcdFx0aWYgKG9wdGlvbnNbaV0uc2VsZWN0ZWQpIHtcbiAgXHRcdFx0XHRvcHRpb25WYWx1ZSA9IG9wdGlvbi5fcmFjdGl2ZSA/IG9wdGlvbi5fcmFjdGl2ZS52YWx1ZSA6IG9wdGlvbi52YWx1ZTtcbiAgXHRcdFx0XHRyZXR1cm4gb3B0aW9uVmFsdWU7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0Zm9yY2VVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdHZhciB2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcblxuICBcdFx0aWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0dGhpcy5hdHRyaWJ1dGUubG9ja2VkID0gdHJ1ZTtcbiAgXHRcdFx0Z2xvYmFsX3J1bmxvb3Auc2NoZWR1bGVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHRyZXR1cm4gX3RoaXMuYXR0cmlidXRlLmxvY2tlZCA9IGZhbHNlO1xuICBcdFx0XHR9KTtcbiAgXHRcdFx0dGhpcy5yb290LnZpZXdtb2RlbC5zZXQodGhpcy5rZXlwYXRoLCB2YWx1ZSk7XG4gIFx0XHR9XG4gIFx0fVxuICB9KTtcblxuICB2YXIgQmluZGluZ19TZWxlY3RCaW5kaW5nID0gU2VsZWN0QmluZGluZztcblxuICB2YXIgTXVsdGlwbGVTZWxlY3RCaW5kaW5nID0gQmluZGluZ19TZWxlY3RCaW5kaW5nLmV4dGVuZCh7XG4gIFx0Z2V0SW5pdGlhbFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5lbGVtZW50Lm9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgXHRcdFx0cmV0dXJuIG9wdGlvbi5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKTtcbiAgXHRcdH0pLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7XG4gIFx0XHRcdHJldHVybiBvcHRpb24uZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIFx0XHR9KTtcbiAgXHR9LFxuXG4gIFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgdmFsdWVGcm9tTW9kZWw7XG5cbiAgXHRcdHRoaXMuZWxlbWVudC5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlRG9tRXZlbnQsIGZhbHNlKTtcblxuICBcdFx0dmFsdWVGcm9tTW9kZWwgPSB0aGlzLnJvb3Qudmlld21vZGVsLmdldCh0aGlzLmtleXBhdGgpO1xuXG4gIFx0XHRpZiAodmFsdWVGcm9tTW9kZWwgPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHQvLyBnZXQgdmFsdWUgZnJvbSBET00sIGlmIHBvc3NpYmxlXG4gIFx0XHRcdHRoaXMuaGFuZGxlQ2hhbmdlKCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHVucmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmVsZW1lbnQubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZURvbUV2ZW50LCBmYWxzZSk7XG4gIFx0fSxcblxuICBcdHNldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUT0RPIG5vdCBpbXBsZW1lbnRlZCB5ZXRcIik7XG4gIFx0fSxcblxuICBcdGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgc2VsZWN0ZWRWYWx1ZXMsIG9wdGlvbnMsIGksIGxlbiwgb3B0aW9uLCBvcHRpb25WYWx1ZTtcblxuICBcdFx0c2VsZWN0ZWRWYWx1ZXMgPSBbXTtcbiAgXHRcdG9wdGlvbnMgPSB0aGlzLmVsZW1lbnQubm9kZS5vcHRpb25zO1xuICBcdFx0bGVuID0gb3B0aW9ucy5sZW5ndGg7XG5cbiAgXHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICBcdFx0XHRvcHRpb24gPSBvcHRpb25zW2ldO1xuXG4gIFx0XHRcdGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgXHRcdFx0XHRvcHRpb25WYWx1ZSA9IG9wdGlvbi5fcmFjdGl2ZSA/IG9wdGlvbi5fcmFjdGl2ZS52YWx1ZSA6IG9wdGlvbi52YWx1ZTtcbiAgXHRcdFx0XHRzZWxlY3RlZFZhbHVlcy5wdXNoKG9wdGlvblZhbHVlKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gc2VsZWN0ZWRWYWx1ZXM7XG4gIFx0fSxcblxuICBcdGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gKCkge1xuICBcdFx0dmFyIGF0dHJpYnV0ZSwgcHJldmlvdXNWYWx1ZSwgdmFsdWU7XG5cbiAgXHRcdGF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlO1xuICBcdFx0cHJldmlvdXNWYWx1ZSA9IGF0dHJpYnV0ZS52YWx1ZTtcblxuICBcdFx0dmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XG5cbiAgXHRcdGlmIChwcmV2aW91c1ZhbHVlID09PSB1bmRlZmluZWQgfHwgIWFycmF5Q29udGVudHNNYXRjaCh2YWx1ZSwgcHJldmlvdXNWYWx1ZSkpIHtcbiAgXHRcdFx0QmluZGluZ19TZWxlY3RCaW5kaW5nLnByb3RvdHlwZS5oYW5kbGVDaGFuZ2UuY2FsbCh0aGlzKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHRoaXM7XG4gIFx0fSxcblxuICBcdGZvcmNlVXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHR2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XG5cbiAgXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdHRoaXMuYXR0cmlidXRlLmxvY2tlZCA9IHRydWU7XG4gIFx0XHRcdGdsb2JhbF9ydW5sb29wLnNjaGVkdWxlVGFzayhmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0cmV0dXJuIF90aGlzLmF0dHJpYnV0ZS5sb2NrZWQgPSBmYWxzZTtcbiAgXHRcdFx0fSk7XG4gIFx0XHRcdHRoaXMucm9vdC52aWV3bW9kZWwuc2V0KHRoaXMua2V5cGF0aCwgdmFsdWUpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHR1cGRhdGVNb2RlbDogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKHRoaXMuYXR0cmlidXRlLnZhbHVlID09PSB1bmRlZmluZWQgfHwgIXRoaXMuYXR0cmlidXRlLnZhbHVlLmxlbmd0aCkge1xuICBcdFx0XHR0aGlzLnJvb3Qudmlld21vZGVsLnNldCh0aGlzLmtleXBhdGgsIHRoaXMuaW5pdGlhbFZhbHVlKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH0pO1xuXG4gIHZhciBCaW5kaW5nX011bHRpcGxlU2VsZWN0QmluZGluZyA9IE11bHRpcGxlU2VsZWN0QmluZGluZztcblxuICB2YXIgRmlsZUxpc3RCaW5kaW5nID0gQmluZGluZ19CaW5kaW5nLmV4dGVuZCh7XG4gIFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmVsZW1lbnQubm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZURvbUV2ZW50LCBmYWxzZSk7XG4gIFx0fSxcblxuICBcdHVucmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmVsZW1lbnQubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZURvbUV2ZW50LCBmYWxzZSk7XG4gIFx0fSxcblxuICBcdGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5lbGVtZW50Lm5vZGUuZmlsZXM7XG4gIFx0fVxuICB9KTtcblxuICB2YXIgQmluZGluZ19GaWxlTGlzdEJpbmRpbmcgPSBGaWxlTGlzdEJpbmRpbmc7XG5cbiAgdmFyIE51bWVyaWNCaW5kaW5nID0gQmluZGluZ19HZW5lcmljQmluZGluZy5leHRlbmQoe1xuICBcdGdldEluaXRpYWxWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHVuZGVmaW5lZDtcbiAgXHR9LFxuXG4gIFx0Z2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciB2YWx1ZSA9IHBhcnNlRmxvYXQodGhpcy5lbGVtZW50Lm5vZGUudmFsdWUpO1xuICBcdFx0cmV0dXJuIGlzTmFOKHZhbHVlKSA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuICBcdH1cbiAgfSk7XG5cbiAgdmFyIGluaXRfY3JlYXRlVHdvd2F5QmluZGluZyA9IGNyZWF0ZVR3b3dheUJpbmRpbmc7XG5cbiAgZnVuY3Rpb24gY3JlYXRlVHdvd2F5QmluZGluZyhlbGVtZW50KSB7XG4gIFx0dmFyIGF0dHJpYnV0ZXMgPSBlbGVtZW50LmF0dHJpYnV0ZXMsXG4gIFx0ICAgIHR5cGUsXG4gIFx0ICAgIEJpbmRpbmcsXG4gIFx0ICAgIGJpbmROYW1lLFxuICBcdCAgICBiaW5kQ2hlY2tlZCxcbiAgXHQgICAgYmluZGluZztcblxuICBcdC8vIGlmIHRoaXMgaXMgYSBsYXRlIGJpbmRpbmcsIGFuZCB0aGVyZSdzIGFscmVhZHkgb25lLCBpdFxuICBcdC8vIG5lZWRzIHRvIGJlIHRvcm4gZG93blxuICBcdGlmIChlbGVtZW50LmJpbmRpbmcpIHtcbiAgXHRcdGVsZW1lbnQuYmluZGluZy50ZWFyZG93bigpO1xuICBcdFx0ZWxlbWVudC5iaW5kaW5nID0gbnVsbDtcbiAgXHR9XG5cbiAgXHQvLyBjb250ZW50ZWRpdGFibGVcbiAgXHRpZiAoXG4gIFx0Ly8gaWYgdGhlIGNvbnRlbnRlZGl0YWJsZSBhdHRyaWJ1dGUgaXMgdHJ1ZSBvciBpcyBiaW5kYWJsZSBhbmQgbWF5IHRodXMgYmVjb21lIHRydWVcbiAgXHQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgfHwgISFhdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZSAmJiBpc0JpbmRhYmxlKGF0dHJpYnV0ZXMuY29udGVudGVkaXRhYmxlKSkgJiYgaXNCaW5kYWJsZShhdHRyaWJ1dGVzLnZhbHVlKSkge1xuICBcdFx0QmluZGluZyA9IEJpbmRpbmdfQ29udGVudEVkaXRhYmxlQmluZGluZztcbiAgXHR9XG5cbiAgXHQvLyA8aW5wdXQ+XG4gIFx0ZWxzZSBpZiAoZWxlbWVudC5uYW1lID09PSBcImlucHV0XCIpIHtcbiAgXHRcdHR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIik7XG5cbiAgXHRcdGlmICh0eXBlID09PSBcInJhZGlvXCIgfHwgdHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gIFx0XHRcdGJpbmROYW1lID0gaXNCaW5kYWJsZShhdHRyaWJ1dGVzLm5hbWUpO1xuICBcdFx0XHRiaW5kQ2hlY2tlZCA9IGlzQmluZGFibGUoYXR0cmlidXRlcy5jaGVja2VkKTtcblxuICBcdFx0XHQvLyB3ZSBjYW4gZWl0aGVyIGJpbmQgdGhlIG5hbWUgYXR0cmlidXRlLCBvciB0aGUgY2hlY2tlZCBhdHRyaWJ1dGUgLSBub3QgYm90aFxuICBcdFx0XHRpZiAoYmluZE5hbWUgJiYgYmluZENoZWNrZWQpIHtcbiAgXHRcdFx0XHR3YXJuSWZEZWJ1ZyhcIkEgcmFkaW8gaW5wdXQgY2FuIGhhdmUgdHdvLXdheSBiaW5kaW5nIG9uIGl0cyBuYW1lIGF0dHJpYnV0ZSwgb3IgaXRzIGNoZWNrZWQgYXR0cmlidXRlIC0gbm90IGJvdGhcIiwgeyByYWN0aXZlOiBlbGVtZW50LnJvb3QgfSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoYmluZE5hbWUpIHtcbiAgXHRcdFx0XHRCaW5kaW5nID0gdHlwZSA9PT0gXCJyYWRpb1wiID8gQmluZGluZ19SYWRpb05hbWVCaW5kaW5nIDogQmluZGluZ19DaGVja2JveE5hbWVCaW5kaW5nO1xuICBcdFx0XHR9IGVsc2UgaWYgKGJpbmRDaGVja2VkKSB7XG4gIFx0XHRcdFx0QmluZGluZyA9IHR5cGUgPT09IFwicmFkaW9cIiA/IEJpbmRpbmdfUmFkaW9CaW5kaW5nIDogQmluZGluZ19DaGVja2JveEJpbmRpbmc7XG4gIFx0XHRcdH1cbiAgXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJmaWxlXCIgJiYgaXNCaW5kYWJsZShhdHRyaWJ1dGVzLnZhbHVlKSkge1xuICBcdFx0XHRCaW5kaW5nID0gQmluZGluZ19GaWxlTGlzdEJpbmRpbmc7XG4gIFx0XHR9IGVsc2UgaWYgKGlzQmluZGFibGUoYXR0cmlidXRlcy52YWx1ZSkpIHtcbiAgXHRcdFx0QmluZGluZyA9IHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJyYW5nZVwiID8gTnVtZXJpY0JpbmRpbmcgOiBCaW5kaW5nX0dlbmVyaWNCaW5kaW5nO1xuICBcdFx0fVxuICBcdH1cblxuICBcdC8vIDxzZWxlY3Q+XG4gIFx0ZWxzZSBpZiAoZWxlbWVudC5uYW1lID09PSBcInNlbGVjdFwiICYmIGlzQmluZGFibGUoYXR0cmlidXRlcy52YWx1ZSkpIHtcbiAgXHRcdEJpbmRpbmcgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpID8gQmluZGluZ19NdWx0aXBsZVNlbGVjdEJpbmRpbmcgOiBCaW5kaW5nX1NlbGVjdEJpbmRpbmc7XG4gIFx0fVxuXG4gIFx0Ly8gPHRleHRhcmVhPlxuICBcdGVsc2UgaWYgKGVsZW1lbnQubmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICYmIGlzQmluZGFibGUoYXR0cmlidXRlcy52YWx1ZSkpIHtcbiAgXHRcdEJpbmRpbmcgPSBCaW5kaW5nX0dlbmVyaWNCaW5kaW5nO1xuICBcdH1cblxuICBcdGlmIChCaW5kaW5nICYmIChiaW5kaW5nID0gbmV3IEJpbmRpbmcoZWxlbWVudCkpICYmIGJpbmRpbmcua2V5cGF0aCkge1xuICBcdFx0cmV0dXJuIGJpbmRpbmc7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gaXNCaW5kYWJsZShhdHRyaWJ1dGUpIHtcbiAgXHRyZXR1cm4gYXR0cmlidXRlICYmIGF0dHJpYnV0ZS5pc0JpbmRhYmxlO1xuICB9XG5cbiAgLy8gYW5kIHRoaXMgZWxlbWVudCBhbHNvIGhhcyBhIHZhbHVlIGF0dHJpYnV0ZSB0byBiaW5kXG5cbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfYnViYmxlID0gRXZlbnRIYW5kbGVyJGJ1YmJsZTtcblxuICBmdW5jdGlvbiBFdmVudEhhbmRsZXIkYnViYmxlKCkge1xuICBcdHZhciBoYXNBY3Rpb24gPSB0aGlzLmdldEFjdGlvbigpO1xuXG4gIFx0aWYgKGhhc0FjdGlvbiAmJiAhdGhpcy5oYXNMaXN0ZW5lcikge1xuICBcdFx0dGhpcy5saXN0ZW4oKTtcbiAgXHR9IGVsc2UgaWYgKCFoYXNBY3Rpb24gJiYgdGhpcy5oYXNMaXN0ZW5lcikge1xuICBcdFx0dGhpcy51bnJlbmRlcigpO1xuICBcdH1cbiAgfVxuXG4gIC8vIFRoaXMgZnVuY3Rpb24gbWF5IGJlIG92ZXJ3cml0dGVuLCBpZiB0aGUgZXZlbnQgZGlyZWN0aXZlXG4gIC8vIGluY2x1ZGVzIHBhcmFtZXRlcnNcbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfZmlyZSA9IEV2ZW50SGFuZGxlciRmaXJlO1xuICBmdW5jdGlvbiBFdmVudEhhbmRsZXIkZmlyZShldmVudCkge1xuICBcdHNoYXJlZF9maXJlRXZlbnQodGhpcy5yb290LCB0aGlzLmdldEFjdGlvbigpLCB7IGV2ZW50OiBldmVudCB9KTtcbiAgfVxuXG4gIHZhciBnZXRBY3Rpb24gPSBFdmVudEhhbmRsZXIkZ2V0QWN0aW9uO1xuXG4gIGZ1bmN0aW9uIEV2ZW50SGFuZGxlciRnZXRBY3Rpb24oKSB7XG4gIFx0cmV0dXJuIHRoaXMuYWN0aW9uLnRvU3RyaW5nKCkudHJpbSgpO1xuICB9XG5cbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfaW5pdCA9IEV2ZW50SGFuZGxlciRpbml0O1xuXG4gIHZhciBldmVudFBhdHRlcm4gPSAvXmV2ZW50KD86XFwuKC4rKSk/LztcbiAgZnVuY3Rpb24gRXZlbnRIYW5kbGVyJGluaXQoZWxlbWVudCwgbmFtZSwgdGVtcGxhdGUpIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dmFyIGFjdGlvbiwgcmVmcywgcmFjdGl2ZTtcblxuICBcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIFx0dGhpcy5yb290ID0gZWxlbWVudC5yb290O1xuICBcdHRoaXMucGFyZW50RnJhZ21lbnQgPSBlbGVtZW50LnBhcmVudEZyYWdtZW50O1xuICBcdHRoaXMubmFtZSA9IG5hbWU7XG5cbiAgXHRpZiAobmFtZS5pbmRleE9mKFwiKlwiKSAhPT0gLTEpIHtcbiAgXHRcdGZhdGFsKFwiT25seSBjb21wb25lbnQgcHJveHktZXZlbnRzIG1heSBjb250YWluIFxcXCIqXFxcIiB3aWxkY2FyZHMsIDwlcyBvbi0lcz1cXFwiLi4uXFxcIi8+IGlzIG5vdCB2YWxpZFwiLCBlbGVtZW50Lm5hbWUsIG5hbWUpO1xuICBcdFx0dGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgXHR9XG5cbiAgXHRpZiAodGVtcGxhdGUubSkge1xuICBcdFx0cmVmcyA9IHRlbXBsYXRlLmEucjtcblxuICBcdFx0Ly8gVGhpcyBpcyBhIG1ldGhvZCBjYWxsXG4gIFx0XHR0aGlzLm1ldGhvZCA9IHRlbXBsYXRlLm07XG4gIFx0XHR0aGlzLmtleXBhdGhzID0gW107XG4gIFx0XHR0aGlzLmZuID0gc2hhcmVkX2dldEZ1bmN0aW9uRnJvbVN0cmluZyh0ZW1wbGF0ZS5hLnMsIHJlZnMubGVuZ3RoKTtcblxuICBcdFx0dGhpcy5wYXJlbnRGcmFnbWVudCA9IGVsZW1lbnQucGFyZW50RnJhZ21lbnQ7XG4gIFx0XHRyYWN0aXZlID0gdGhpcy5yb290O1xuXG4gIFx0XHQvLyBDcmVhdGUgcmVzb2x2ZXJzIGZvciBlYWNoIHJlZmVyZW5jZVxuICBcdFx0dGhpcy5yZWZSZXNvbHZlcnMgPSBbXTtcbiAgXHRcdHJlZnMuZm9yRWFjaChmdW5jdGlvbiAocmVmLCBpKSB7XG4gIFx0XHRcdHZhciBtYXRjaCA9IHVuZGVmaW5lZDtcblxuICBcdFx0XHQvLyBzcGVjaWFsIGNhc2UgLSB0aGUgYGV2ZW50YCBvYmplY3RcbiAgXHRcdFx0aWYgKG1hdGNoID0gZXZlbnRQYXR0ZXJuLmV4ZWMocmVmKSkge1xuICBcdFx0XHRcdF90aGlzLmtleXBhdGhzW2ldID0ge1xuICBcdFx0XHRcdFx0ZXZlbnRPYmplY3Q6IHRydWUsXG4gIFx0XHRcdFx0XHRyZWZpbmVtZW50czogbWF0Y2hbMV0gPyBtYXRjaFsxXS5zcGxpdChcIi5cIikgOiBbXVxuICBcdFx0XHRcdH07XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0X3RoaXMucmVmUmVzb2x2ZXJzLnB1c2goUmVzb2x2ZXJzX2NyZWF0ZVJlZmVyZW5jZVJlc29sdmVyKF90aGlzLCByZWYsIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdFx0XHRyZXR1cm4gX3RoaXMucmVzb2x2ZShpLCBrZXlwYXRoKTtcbiAgXHRcdFx0XHR9KSk7XG4gIFx0XHRcdH1cbiAgXHRcdH0pO1xuXG4gIFx0XHR0aGlzLmZpcmUgPSBmaXJlTWV0aG9kQ2FsbDtcbiAgXHR9IGVsc2Uge1xuICBcdFx0Ly8gR2V0IGFjdGlvbiAoJ2ZvbycgaW4gJ29uLWNsaWNrPSdmb28nKVxuICBcdFx0YWN0aW9uID0gdGVtcGxhdGUubiB8fCB0ZW1wbGF0ZTtcbiAgXHRcdGlmICh0eXBlb2YgYWN0aW9uICE9PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRcdGFjdGlvbiA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KHtcbiAgXHRcdFx0XHR0ZW1wbGF0ZTogYWN0aW9uLFxuICBcdFx0XHRcdHJvb3Q6IHRoaXMucm9vdCxcbiAgXHRcdFx0XHRvd25lcjogdGhpc1xuICBcdFx0XHR9KTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5hY3Rpb24gPSBhY3Rpb247XG5cbiAgXHRcdC8vIEdldCBwYXJhbWV0ZXJzXG4gIFx0XHRpZiAodGVtcGxhdGUuZCkge1xuICBcdFx0XHR0aGlzLmR5bmFtaWNQYXJhbXMgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRcdFx0dGVtcGxhdGU6IHRlbXBsYXRlLmQsXG4gIFx0XHRcdFx0cm9vdDogdGhpcy5yb290LFxuICBcdFx0XHRcdG93bmVyOiB0aGlzLmVsZW1lbnRcbiAgXHRcdFx0fSk7XG5cbiAgXHRcdFx0dGhpcy5maXJlID0gZmlyZUV2ZW50V2l0aER5bmFtaWNQYXJhbXM7XG4gIFx0XHR9IGVsc2UgaWYgKHRlbXBsYXRlLmEpIHtcbiAgXHRcdFx0dGhpcy5wYXJhbXMgPSB0ZW1wbGF0ZS5hO1xuICBcdFx0XHR0aGlzLmZpcmUgPSBmaXJlRXZlbnRXaXRoUGFyYW1zO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVNZXRob2RDYWxsKGV2ZW50KSB7XG4gIFx0dmFyIHJhY3RpdmUsIHZhbHVlcywgYXJncztcblxuICBcdHJhY3RpdmUgPSB0aGlzLnJvb3Q7XG5cbiAgXHRpZiAodHlwZW9mIHJhY3RpdmVbdGhpcy5tZXRob2RdICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBjYWxsIGEgbm9uLWV4aXN0ZW50IG1ldGhvZCAoXFxcIlwiICsgdGhpcy5tZXRob2QgKyBcIlxcXCIpXCIpO1xuICBcdH1cblxuICBcdHZhbHVlcyA9IHRoaXMua2V5cGF0aHMubWFwKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHR2YXIgdmFsdWUsIGxlbiwgaTtcblxuICBcdFx0aWYgKGtleXBhdGggPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHQvLyBub3QgeWV0IHJlc29sdmVkXG4gIFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIFRPRE8gdGhlIHJlZmluZW1lbnRzIHN0dWZmIHdvdWxkIGJlIGJldHRlciBoYW5kbGVkIGF0IHBhcnNlIHRpbWVcbiAgXHRcdGlmIChrZXlwYXRoLmV2ZW50T2JqZWN0KSB7XG4gIFx0XHRcdHZhbHVlID0gZXZlbnQ7XG5cbiAgXHRcdFx0aWYgKGxlbiA9IGtleXBhdGgucmVmaW5lbWVudHMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRcdFx0XHR2YWx1ZSA9IHZhbHVlW2tleXBhdGgucmVmaW5lbWVudHNbaV1dO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fVxuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dmFsdWUgPSByYWN0aXZlLnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiB2YWx1ZTtcbiAgXHR9KTtcblxuICBcdHNoYXJlZF9ldmVudFN0YWNrLmVucXVldWUocmFjdGl2ZSwgZXZlbnQpO1xuXG4gIFx0YXJncyA9IHRoaXMuZm4uYXBwbHkobnVsbCwgdmFsdWVzKTtcbiAgXHRyYWN0aXZlW3RoaXMubWV0aG9kXS5hcHBseShyYWN0aXZlLCBhcmdzKTtcblxuICBcdHNoYXJlZF9ldmVudFN0YWNrLmRlcXVldWUocmFjdGl2ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlRXZlbnRXaXRoUGFyYW1zKGV2ZW50KSB7XG4gIFx0c2hhcmVkX2ZpcmVFdmVudCh0aGlzLnJvb3QsIHRoaXMuZ2V0QWN0aW9uKCksIHsgZXZlbnQ6IGV2ZW50LCBhcmdzOiB0aGlzLnBhcmFtcyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVFdmVudFdpdGhEeW5hbWljUGFyYW1zKGV2ZW50KSB7XG4gIFx0dmFyIGFyZ3MgPSB0aGlzLmR5bmFtaWNQYXJhbXMuZ2V0QXJnc0xpc3QoKTtcblxuICBcdC8vIG5lZWQgdG8gc3RyaXAgW10gZnJvbSBlbmRzIGlmIGEgc3RyaW5nIVxuICBcdGlmICh0eXBlb2YgYXJncyA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0YXJncyA9IGFyZ3Muc3Vic3RyKDEsIGFyZ3MubGVuZ3RoIC0gMik7XG4gIFx0fVxuXG4gIFx0c2hhcmVkX2ZpcmVFdmVudCh0aGlzLnJvb3QsIHRoaXMuZ2V0QWN0aW9uKCksIHsgZXZlbnQ6IGV2ZW50LCBhcmdzOiBhcmdzIH0pO1xuICB9XG5cbiAgdmFyIHNoYXJlZF9nZW5lcmljSGFuZGxlciA9IGdlbmVyaWNIYW5kbGVyO1xuICBmdW5jdGlvbiBnZW5lcmljSGFuZGxlcihldmVudCkge1xuICBcdHZhciBzdG9yYWdlLFxuICBcdCAgICBoYW5kbGVyLFxuICBcdCAgICBpbmRpY2VzLFxuICBcdCAgICBpbmRleCA9IHt9O1xuXG4gIFx0c3RvcmFnZSA9IHRoaXMuX3JhY3RpdmU7XG4gIFx0aGFuZGxlciA9IHN0b3JhZ2UuZXZlbnRzW2V2ZW50LnR5cGVdO1xuXG4gIFx0aWYgKGluZGljZXMgPSBSZXNvbHZlcnNfZmluZEluZGV4UmVmcyhoYW5kbGVyLmVsZW1lbnQucGFyZW50RnJhZ21lbnQpKSB7XG4gIFx0XHRpbmRleCA9IFJlc29sdmVyc19maW5kSW5kZXhSZWZzLnJlc29sdmUoaW5kaWNlcyk7XG4gIFx0fVxuXG4gIFx0aGFuZGxlci5maXJlKHtcbiAgXHRcdG5vZGU6IHRoaXMsXG4gIFx0XHRvcmlnaW5hbDogZXZlbnQsXG4gIFx0XHRpbmRleDogaW5kZXgsXG4gIFx0XHRrZXlwYXRoOiBzdG9yYWdlLmtleXBhdGguc3RyLFxuICBcdFx0Y29udGV4dDogc3RvcmFnZS5yb290LnZpZXdtb2RlbC5nZXQoc3RvcmFnZS5rZXlwYXRoKVxuICBcdH0pO1xuICB9XG5cbiAgdmFyIGxpc3RlbiA9IEV2ZW50SGFuZGxlciRsaXN0ZW47XG5cbiAgdmFyIGN1c3RvbUhhbmRsZXJzID0ge30sXG4gICAgICB0b3VjaEV2ZW50cyA9IHtcbiAgXHR0b3VjaHN0YXJ0OiB0cnVlLFxuICBcdHRvdWNobW92ZTogdHJ1ZSxcbiAgXHR0b3VjaGVuZDogdHJ1ZSxcbiAgXHR0b3VjaGNhbmNlbDogdHJ1ZSxcbiAgXHQvL25vdCB3M2MsIGJ1dCBzdXBwb3J0ZWQgaW4gc29tZSBicm93c2Vyc1xuICBcdHRvdWNobGVhdmU6IHRydWVcbiAgfTtcbiAgZnVuY3Rpb24gRXZlbnRIYW5kbGVyJGxpc3RlbigpIHtcbiAgXHR2YXIgZGVmaW5pdGlvbixcbiAgXHQgICAgbmFtZSA9IHRoaXMubmFtZTtcblxuICBcdGlmICh0aGlzLmludmFsaWQpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRpZiAoZGVmaW5pdGlvbiA9IGZpbmRJblZpZXdIaWVyYXJjaHkoXCJldmVudHNcIiwgdGhpcy5yb290LCBuYW1lKSkge1xuICBcdFx0dGhpcy5jdXN0b20gPSBkZWZpbml0aW9uKHRoaXMubm9kZSwgZ2V0Q3VzdG9tSGFuZGxlcihuYW1lKSk7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdC8vIExvb2tzIGxpa2Ugd2UncmUgZGVhbGluZyB3aXRoIGEgc3RhbmRhcmQgRE9NIGV2ZW50Li4uIGJ1dCBsZXQncyBjaGVja1xuICBcdFx0aWYgKCEoXCJvblwiICsgbmFtZSBpbiB0aGlzLm5vZGUpICYmICEod2luZG93ICYmIFwib25cIiArIG5hbWUgaW4gd2luZG93KSAmJiAhaXNKc2RvbSkge1xuXG4gIFx0XHRcdC8vIG9rYXkgdG8gdXNlIHRvdWNoIGV2ZW50cyBpZiB0aGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZW1cbiAgXHRcdFx0aWYgKCF0b3VjaEV2ZW50c1tuYW1lXSkge1xuICBcdFx0XHRcdHdhcm5PbmNlSWZEZWJ1ZyhtaXNzaW5nUGx1Z2luKG5hbWUsIFwiZXZlbnRcIiksIHsgbm9kZTogdGhpcy5ub2RlIH0pO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBzaGFyZWRfZ2VuZXJpY0hhbmRsZXIsIGZhbHNlKTtcbiAgXHR9XG5cbiAgXHR0aGlzLmhhc0xpc3RlbmVyID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEN1c3RvbUhhbmRsZXIobmFtZSkge1xuICBcdGlmICghY3VzdG9tSGFuZGxlcnNbbmFtZV0pIHtcbiAgXHRcdGN1c3RvbUhhbmRsZXJzW25hbWVdID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIFx0XHRcdHZhciBzdG9yYWdlID0gZXZlbnQubm9kZS5fcmFjdGl2ZTtcblxuICBcdFx0XHRldmVudC5pbmRleCA9IHN0b3JhZ2UuaW5kZXg7XG4gIFx0XHRcdGV2ZW50LmtleXBhdGggPSBzdG9yYWdlLmtleXBhdGguc3RyO1xuICBcdFx0XHRldmVudC5jb250ZXh0ID0gc3RvcmFnZS5yb290LnZpZXdtb2RlbC5nZXQoc3RvcmFnZS5rZXlwYXRoKTtcblxuICBcdFx0XHRzdG9yYWdlLmV2ZW50c1tuYW1lXS5maXJlKGV2ZW50KTtcbiAgXHRcdH07XG4gIFx0fVxuXG4gIFx0cmV0dXJuIGN1c3RvbUhhbmRsZXJzW25hbWVdO1xuICB9XG5cbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfcmViaW5kID0gRXZlbnRIYW5kbGVyJHJlYmluZDtcblxuICBmdW5jdGlvbiBFdmVudEhhbmRsZXIkcmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpIHtcbiAgXHR2YXIgZnJhZ21lbnQ7XG4gIFx0aWYgKHRoaXMubWV0aG9kKSB7XG4gIFx0XHRmcmFnbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRGcmFnbWVudDtcbiAgXHRcdHRoaXMucmVmUmVzb2x2ZXJzLmZvckVhY2gocmViaW5kKTtcblxuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdGlmICh0eXBlb2YgdGhpcy5hY3Rpb24gIT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdHJlYmluZCh0aGlzLmFjdGlvbik7XG4gIFx0fVxuXG4gIFx0aWYgKHRoaXMuZHluYW1pY1BhcmFtcykge1xuICBcdFx0cmViaW5kKHRoaXMuZHluYW1pY1BhcmFtcyk7XG4gIFx0fVxuXG4gIFx0ZnVuY3Rpb24gcmViaW5kKHRoaW5nKSB7XG4gIFx0XHR0aGluZyAmJiB0aGluZy5yZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfcmVuZGVyID0gRXZlbnRIYW5kbGVyJHJlbmRlcjtcblxuICBmdW5jdGlvbiBFdmVudEhhbmRsZXIkcmVuZGVyKCkge1xuICBcdHRoaXMubm9kZSA9IHRoaXMuZWxlbWVudC5ub2RlO1xuICBcdC8vIHN0b3JlIHRoaXMgb24gdGhlIG5vZGUgaXRzZWxmLCBzbyBpdCBjYW4gYmUgcmV0cmlldmVkIGJ5IGFcbiAgXHQvLyB1bml2ZXJzYWwgaGFuZGxlclxuICBcdHRoaXMubm9kZS5fcmFjdGl2ZS5ldmVudHNbdGhpcy5uYW1lXSA9IHRoaXM7XG5cbiAgXHRpZiAodGhpcy5tZXRob2QgfHwgdGhpcy5nZXRBY3Rpb24oKSkge1xuICBcdFx0dGhpcy5saXN0ZW4oKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX3Jlc29sdmUgPSBFdmVudEhhbmRsZXIkcmVzb2x2ZTtcblxuICBmdW5jdGlvbiBFdmVudEhhbmRsZXIkcmVzb2x2ZShpbmRleCwga2V5cGF0aCkge1xuICBcdHRoaXMua2V5cGF0aHNbaW5kZXhdID0ga2V5cGF0aDtcbiAgfVxuXG4gIHZhciBFdmVudEhhbmRsZXJfcHJvdG90eXBlX3VuYmluZCA9IEV2ZW50SGFuZGxlciR1bmJpbmQ7XG4gIGZ1bmN0aW9uIEV2ZW50SGFuZGxlciR1bmJpbmQoKSB7XG4gIFx0aWYgKHRoaXMubWV0aG9kKSB7XG4gIFx0XHR0aGlzLnJlZlJlc29sdmVycy5mb3JFYWNoKG1ldGhvZENhbGxlcnNfX3VuYmluZCk7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0Ly8gVGVhciBkb3duIGR5bmFtaWMgbmFtZVxuICBcdGlmICh0eXBlb2YgdGhpcy5hY3Rpb24gIT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdHRoaXMuYWN0aW9uLnVuYmluZCgpO1xuICBcdH1cblxuICBcdC8vIFRlYXIgZG93biBkeW5hbWljIHBhcmFtZXRlcnNcbiAgXHRpZiAodGhpcy5keW5hbWljUGFyYW1zKSB7XG4gIFx0XHR0aGlzLmR5bmFtaWNQYXJhbXMudW5iaW5kKCk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfdW5yZW5kZXIgPSBFdmVudEhhbmRsZXIkdW5yZW5kZXI7XG4gIGZ1bmN0aW9uIEV2ZW50SGFuZGxlciR1bnJlbmRlcigpIHtcblxuICBcdGlmICh0aGlzLmN1c3RvbSkge1xuICBcdFx0dGhpcy5jdXN0b20udGVhcmRvd24oKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0dGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5uYW1lLCBzaGFyZWRfZ2VuZXJpY0hhbmRsZXIsIGZhbHNlKTtcbiAgXHR9XG5cbiAgXHR0aGlzLmhhc0xpc3RlbmVyID0gZmFsc2U7XG4gIH1cblxuICB2YXIgRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUsIHRlbXBsYXRlKSB7XG4gIFx0dGhpcy5pbml0KGVsZW1lbnQsIG5hbWUsIHRlbXBsYXRlKTtcbiAgfTtcblxuICBFdmVudEhhbmRsZXIucHJvdG90eXBlID0ge1xuICBcdGJ1YmJsZTogRXZlbnRIYW5kbGVyX3Byb3RvdHlwZV9idWJibGUsXG4gIFx0ZmlyZTogRXZlbnRIYW5kbGVyX3Byb3RvdHlwZV9maXJlLFxuICBcdGdldEFjdGlvbjogZ2V0QWN0aW9uLFxuICBcdGluaXQ6IEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfaW5pdCxcbiAgXHRsaXN0ZW46IGxpc3RlbixcbiAgXHRyZWJpbmQ6IEV2ZW50SGFuZGxlcl9wcm90b3R5cGVfcmViaW5kLFxuICBcdHJlbmRlcjogRXZlbnRIYW5kbGVyX3Byb3RvdHlwZV9yZW5kZXIsXG4gIFx0cmVzb2x2ZTogcHJvdG90eXBlX3Jlc29sdmUsXG4gIFx0dW5iaW5kOiBFdmVudEhhbmRsZXJfcHJvdG90eXBlX3VuYmluZCxcbiAgXHR1bnJlbmRlcjogRXZlbnRIYW5kbGVyX3Byb3RvdHlwZV91bnJlbmRlclxuICB9O1xuXG4gIHZhciBfRXZlbnRIYW5kbGVyID0gRXZlbnRIYW5kbGVyO1xuXG4gIHZhciBjcmVhdGVFdmVudEhhbmRsZXJzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHRlbXBsYXRlKSB7XG4gIFx0dmFyIGksXG4gIFx0ICAgIG5hbWUsXG4gIFx0ICAgIG5hbWVzLFxuICBcdCAgICBoYW5kbGVyLFxuICBcdCAgICByZXN1bHQgPSBbXTtcblxuICBcdGZvciAobmFtZSBpbiB0ZW1wbGF0ZSkge1xuICBcdFx0aWYgKHRlbXBsYXRlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gIFx0XHRcdG5hbWVzID0gbmFtZS5zcGxpdChcIi1cIik7XG4gIFx0XHRcdGkgPSBuYW1lcy5sZW5ndGg7XG5cbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdGhhbmRsZXIgPSBuZXcgX0V2ZW50SGFuZGxlcihlbGVtZW50LCBuYW1lc1tpXSwgdGVtcGxhdGVbbmFtZV0pO1xuICBcdFx0XHRcdHJlc3VsdC5wdXNoKGhhbmRsZXIpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgRGVjb3JhdG9yID0gZnVuY3Rpb24gKGVsZW1lbnQsIHRlbXBsYXRlKSB7XG4gIFx0dmFyIHNlbGYgPSB0aGlzLFxuICBcdCAgICByYWN0aXZlLFxuICBcdCAgICBuYW1lLFxuICBcdCAgICBmcmFnbWVudDtcblxuICBcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIFx0dGhpcy5yb290ID0gcmFjdGl2ZSA9IGVsZW1lbnQucm9vdDtcblxuICBcdG5hbWUgPSB0ZW1wbGF0ZS5uIHx8IHRlbXBsYXRlO1xuXG4gIFx0aWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRmcmFnbWVudCA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KHtcbiAgXHRcdFx0dGVtcGxhdGU6IG5hbWUsXG4gIFx0XHRcdHJvb3Q6IHJhY3RpdmUsXG4gIFx0XHRcdG93bmVyOiBlbGVtZW50XG4gIFx0XHR9KTtcblxuICBcdFx0bmFtZSA9IGZyYWdtZW50LnRvU3RyaW5nKCk7XG4gIFx0XHRmcmFnbWVudC51bmJpbmQoKTtcblxuICBcdFx0aWYgKG5hbWUgPT09IFwiXCIpIHtcbiAgXHRcdFx0Ly8gZW1wdHkgc3RyaW5nIG9rYXksIGp1c3Qgbm8gZGVjb3JhdG9yXG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAodGVtcGxhdGUuYSkge1xuICBcdFx0dGhpcy5wYXJhbXMgPSB0ZW1wbGF0ZS5hO1xuICBcdH0gZWxzZSBpZiAodGVtcGxhdGUuZCkge1xuICBcdFx0dGhpcy5mcmFnbWVudCA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KHtcbiAgXHRcdFx0dGVtcGxhdGU6IHRlbXBsYXRlLmQsXG4gIFx0XHRcdHJvb3Q6IHJhY3RpdmUsXG4gIFx0XHRcdG93bmVyOiBlbGVtZW50XG4gIFx0XHR9KTtcblxuICBcdFx0dGhpcy5wYXJhbXMgPSB0aGlzLmZyYWdtZW50LmdldEFyZ3NMaXN0KCk7XG5cbiAgXHRcdHRoaXMuZnJhZ21lbnQuYnViYmxlID0gZnVuY3Rpb24gKCkge1xuICBcdFx0XHR0aGlzLmRpcnR5QXJncyA9IHRoaXMuZGlydHlWYWx1ZSA9IHRydWU7XG4gIFx0XHRcdHNlbGYucGFyYW1zID0gdGhpcy5nZXRBcmdzTGlzdCgpO1xuXG4gIFx0XHRcdGlmIChzZWxmLnJlYWR5KSB7XG4gIFx0XHRcdFx0c2VsZi51cGRhdGUoKTtcbiAgXHRcdFx0fVxuICBcdFx0fTtcbiAgXHR9XG5cbiAgXHR0aGlzLmZuID0gZmluZEluVmlld0hpZXJhcmNoeShcImRlY29yYXRvcnNcIiwgcmFjdGl2ZSwgbmFtZSk7XG5cbiAgXHRpZiAoIXRoaXMuZm4pIHtcbiAgXHRcdGZhdGFsKG1pc3NpbmdQbHVnaW4obmFtZSwgXCJkZWNvcmF0b3JcIikpO1xuICBcdH1cbiAgfTtcblxuICBEZWNvcmF0b3IucHJvdG90eXBlID0ge1xuICBcdGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBub2RlLCByZXN1bHQsIGFyZ3M7XG5cbiAgXHRcdG5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZTtcblxuICBcdFx0aWYgKHRoaXMucGFyYW1zKSB7XG4gIFx0XHRcdGFyZ3MgPSBbbm9kZV0uY29uY2F0KHRoaXMucGFyYW1zKTtcbiAgXHRcdFx0cmVzdWx0ID0gdGhpcy5mbi5hcHBseSh0aGlzLnJvb3QsIGFyZ3MpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0cmVzdWx0ID0gdGhpcy5mbi5jYWxsKHRoaXMucm9vdCwgbm9kZSk7XG4gIFx0XHR9XG5cbiAgXHRcdGlmICghcmVzdWx0IHx8ICFyZXN1bHQudGVhcmRvd24pIHtcbiAgXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRGVjb3JhdG9yIGRlZmluaXRpb24gbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggYSB0ZWFyZG93biBtZXRob2RcIik7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIFRPRE8gZG9lcyB0aGlzIG1ha2Ugc2Vuc2U/XG4gIFx0XHR0aGlzLmFjdHVhbCA9IHJlc3VsdDtcbiAgXHRcdHRoaXMucmVhZHkgPSB0cnVlO1xuICBcdH0sXG5cbiAgXHR1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmICh0aGlzLmFjdHVhbC51cGRhdGUpIHtcbiAgXHRcdFx0dGhpcy5hY3R1YWwudXBkYXRlLmFwcGx5KHRoaXMucm9vdCwgdGhpcy5wYXJhbXMpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dGhpcy5hY3R1YWwudGVhcmRvd24odHJ1ZSk7XG4gIFx0XHRcdHRoaXMuaW5pdCgpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRyZWJpbmQ6IGZ1bmN0aW9uIChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0XHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50LnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dGVhcmRvd246IGZ1bmN0aW9uICh1cGRhdGluZykge1xuICBcdFx0dGhpcy50b3JuZG93biA9IHRydWU7XG4gIFx0XHRpZiAodGhpcy5yZWFkeSkge1xuICBcdFx0XHR0aGlzLmFjdHVhbC50ZWFyZG93bigpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIXVwZGF0aW5nICYmIHRoaXMuZnJhZ21lbnQpIHtcbiAgXHRcdFx0dGhpcy5mcmFnbWVudC51bmJpbmQoKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgdmFyIF9EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5cbiAgZnVuY3Rpb24gc2VsZWN0X19idWJibGUoKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdGlmICghdGhpcy5kaXJ0eSkge1xuICBcdFx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cbiAgXHRcdGdsb2JhbF9ydW5sb29wLnNjaGVkdWxlVGFzayhmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHN5bmMoX3RoaXMpO1xuICBcdFx0XHRfdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0dGhpcy5wYXJlbnRGcmFnbWVudC5idWJibGUoKTsgLy8gZGVmYXVsdCBiZWhhdmlvdXJcbiAgfVxuXG4gIGZ1bmN0aW9uIHN5bmMoc2VsZWN0RWxlbWVudCkge1xuICBcdHZhciBzZWxlY3ROb2RlLCBzZWxlY3RWYWx1ZSwgaXNNdWx0aXBsZSwgb3B0aW9ucywgb3B0aW9uV2FzU2VsZWN0ZWQ7XG5cbiAgXHRzZWxlY3ROb2RlID0gc2VsZWN0RWxlbWVudC5ub2RlO1xuXG4gIFx0aWYgKCFzZWxlY3ROb2RlKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0b3B0aW9ucyA9IHRvQXJyYXkoc2VsZWN0Tm9kZS5vcHRpb25zKTtcblxuICBcdHNlbGVjdFZhbHVlID0gc2VsZWN0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcbiAgXHRpc011bHRpcGxlID0gc2VsZWN0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKTtcblxuICBcdC8vIElmIHRoZSA8c2VsZWN0PiBoYXMgYSBzcGVjaWZpZWQgdmFsdWUsIHRoYXQgc2hvdWxkIG92ZXJyaWRlXG4gIFx0Ly8gdGhlc2Ugb3B0aW9uc1xuICBcdGlmIChzZWxlY3RWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG8pIHtcbiAgXHRcdFx0dmFyIG9wdGlvblZhbHVlLCBzaG91bGRTZWxlY3Q7XG5cbiAgXHRcdFx0b3B0aW9uVmFsdWUgPSBvLl9yYWN0aXZlID8gby5fcmFjdGl2ZS52YWx1ZSA6IG8udmFsdWU7XG4gIFx0XHRcdHNob3VsZFNlbGVjdCA9IGlzTXVsdGlwbGUgPyB2YWx1ZUNvbnRhaW5zKHNlbGVjdFZhbHVlLCBvcHRpb25WYWx1ZSkgOiBzZWxlY3RWYWx1ZSA9PSBvcHRpb25WYWx1ZTtcblxuICBcdFx0XHRpZiAoc2hvdWxkU2VsZWN0KSB7XG4gIFx0XHRcdFx0b3B0aW9uV2FzU2VsZWN0ZWQgPSB0cnVlO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0by5zZWxlY3RlZCA9IHNob3VsZFNlbGVjdDtcbiAgXHRcdH0pO1xuXG4gIFx0XHRpZiAoIW9wdGlvbldhc1NlbGVjdGVkKSB7XG4gIFx0XHRcdGlmIChvcHRpb25zWzBdKSB7XG4gIFx0XHRcdFx0b3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoc2VsZWN0RWxlbWVudC5iaW5kaW5nKSB7XG4gIFx0XHRcdFx0c2VsZWN0RWxlbWVudC5iaW5kaW5nLmZvcmNlVXBkYXRlKCk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBPdGhlcndpc2UgdGhlIHZhbHVlIHNob3VsZCBiZSBpbml0aWFsaXNlZCBhY2NvcmRpbmcgdG8gd2hpY2hcbiAgXHQvLyA8b3B0aW9uPiBlbGVtZW50IGlzIHNlbGVjdGVkLCBpZiB0d293YXkgYmluZGluZyBpcyBpbiBlZmZlY3RcbiAgXHRlbHNlIGlmIChzZWxlY3RFbGVtZW50LmJpbmRpbmcpIHtcbiAgXHRcdHNlbGVjdEVsZW1lbnQuYmluZGluZy5mb3JjZVVwZGF0ZSgpO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbHVlQ29udGFpbnMoc2VsZWN0VmFsdWUsIG9wdGlvblZhbHVlKSB7XG4gIFx0dmFyIGkgPSBzZWxlY3RWYWx1ZS5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0aWYgKHNlbGVjdFZhbHVlW2ldID09IG9wdGlvblZhbHVlKSB7XG4gIFx0XHRcdHJldHVybiB0cnVlO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNwZWNpYWxfb3B0aW9uX19pbml0KG9wdGlvbiwgdGVtcGxhdGUpIHtcbiAgXHRvcHRpb24uc2VsZWN0ID0gZmluZFBhcmVudFNlbGVjdChvcHRpb24ucGFyZW50KTtcblxuICBcdC8vIHdlIG1pZ2h0IGJlIGluc2lkZSBhIDxkYXRhbGlzdD4gZWxlbWVudFxuICBcdGlmICghb3B0aW9uLnNlbGVjdCkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdG9wdGlvbi5zZWxlY3Qub3B0aW9ucy5wdXNoKG9wdGlvbik7XG5cbiAgXHQvLyBJZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIG1pc3NpbmcsIHVzZSB0aGUgZWxlbWVudCdzIGNvbnRlbnRcbiAgXHRpZiAoIXRlbXBsYXRlLmEpIHtcbiAgXHRcdHRlbXBsYXRlLmEgPSB7fTtcbiAgXHR9XG5cbiAgXHQvLyAuLi5hcyBsb25nIGFzIGl0IGlzbid0IGRpc2FibGVkXG4gIFx0aWYgKHRlbXBsYXRlLmEudmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhdGVtcGxhdGUuYS5oYXNPd25Qcm9wZXJ0eShcImRpc2FibGVkXCIpKSB7XG4gIFx0XHR0ZW1wbGF0ZS5hLnZhbHVlID0gdGVtcGxhdGUuZjtcbiAgXHR9XG5cbiAgXHQvLyBJZiB0aGVyZSBpcyBhIGBzZWxlY3RlZGAgYXR0cmlidXRlLCBidXQgdGhlIDxzZWxlY3Q+XG4gIFx0Ly8gYWxyZWFkeSBoYXMgYSB2YWx1ZSwgZGVsZXRlIGl0XG4gIFx0aWYgKFwic2VsZWN0ZWRcIiBpbiB0ZW1wbGF0ZS5hICYmIG9wdGlvbi5zZWxlY3QuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0ZGVsZXRlIHRlbXBsYXRlLmEuc2VsZWN0ZWQ7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gc3BlY2lhbF9vcHRpb25fX3VuYmluZChvcHRpb24pIHtcbiAgXHRpZiAob3B0aW9uLnNlbGVjdCkge1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KG9wdGlvbi5zZWxlY3Qub3B0aW9ucywgb3B0aW9uKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kUGFyZW50U2VsZWN0KGVsZW1lbnQpIHtcbiAgXHRpZiAoIWVsZW1lbnQpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRkbyB7XG4gIFx0XHRpZiAoZWxlbWVudC5uYW1lID09PSBcInNlbGVjdFwiKSB7XG4gIFx0XHRcdHJldHVybiBlbGVtZW50O1xuICBcdFx0fVxuICBcdH0gd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCk7XG4gIH1cblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfaW5pdCA9IEVsZW1lbnQkaW5pdDtcbiAgZnVuY3Rpb24gRWxlbWVudCRpbml0KG9wdGlvbnMpIHtcbiAgXHR2YXIgcGFyZW50RnJhZ21lbnQsIHRlbXBsYXRlLCByYWN0aXZlLCBiaW5kaW5nLCBiaW5kaW5ncywgdHdvd2F5LCBiaW5kaW5nQXR0cnM7XG5cbiAgXHR0aGlzLnR5cGUgPSBFTEVNRU5UO1xuXG4gIFx0Ly8gc3R1ZmYgd2UnbGwgbmVlZCBsYXRlclxuICBcdHBhcmVudEZyYWdtZW50ID0gdGhpcy5wYXJlbnRGcmFnbWVudCA9IG9wdGlvbnMucGFyZW50RnJhZ21lbnQ7XG4gIFx0dGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblxuICBcdHRoaXMucGFyZW50ID0gb3B0aW9ucy5wRWxlbWVudCB8fCBwYXJlbnRGcmFnbWVudC5wRWxlbWVudDtcblxuICBcdHRoaXMucm9vdCA9IHJhY3RpdmUgPSBwYXJlbnRGcmFnbWVudC5yb290O1xuICBcdHRoaXMuaW5kZXggPSBvcHRpb25zLmluZGV4O1xuICBcdHRoaXMua2V5ID0gb3B0aW9ucy5rZXk7XG5cbiAgXHR0aGlzLm5hbWUgPSBlbmZvcmNlQ2FzZSh0ZW1wbGF0ZS5lKTtcblxuICBcdC8vIFNwZWNpYWwgY2FzZSAtIDxvcHRpb24+IGVsZW1lbnRzXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJvcHRpb25cIikge1xuICBcdFx0c3BlY2lhbF9vcHRpb25fX2luaXQodGhpcywgdGVtcGxhdGUpO1xuICBcdH1cblxuICBcdC8vIFNwZWNpYWwgY2FzZSAtIDxzZWxlY3Q+IGVsZW1lbnRzXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJzZWxlY3RcIikge1xuICBcdFx0dGhpcy5vcHRpb25zID0gW107XG4gIFx0XHR0aGlzLmJ1YmJsZSA9IHNlbGVjdF9fYnViYmxlOyAvLyBUT0RPIHRoaXMgaXMgYSBrbHVkZ2VcbiAgXHR9XG5cbiAgXHQvLyBTcGVjaWFsIGNhc2UgLSA8Zm9ybT4gZWxlbWVudHNcbiAgXHRpZiAodGhpcy5uYW1lID09PSBcImZvcm1cIikge1xuICBcdFx0dGhpcy5mb3JtQmluZGluZ3MgPSBbXTtcbiAgXHR9XG5cbiAgXHQvLyBoYW5kbGUgYmluZGluZyBhdHRyaWJ1dGVzIGZpcnN0ICh0d293YXksIGxhenkpXG4gIFx0YmluZGluZ0F0dHJzID0gcHJvY2Vzc0JpbmRpbmdBdHRyaWJ1dGVzKHRoaXMsIHRlbXBsYXRlKTtcblxuICBcdC8vIGNyZWF0ZSBhdHRyaWJ1dGVzXG4gIFx0dGhpcy5hdHRyaWJ1dGVzID0gY3JlYXRlQXR0cmlidXRlcyh0aGlzLCB0ZW1wbGF0ZS5hKTtcbiAgXHR0aGlzLmNvbmRpdGlvbmFsQXR0cmlidXRlcyA9IGNyZWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcyh0aGlzLCB0ZW1wbGF0ZS5tKTtcblxuICBcdC8vIGFwcGVuZCBjaGlsZHJlbiwgaWYgdGhlcmUgYXJlIGFueVxuICBcdGlmICh0ZW1wbGF0ZS5mKSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50ID0gbmV3IHZpcnR1YWxkb21fRnJhZ21lbnQoe1xuICBcdFx0XHR0ZW1wbGF0ZTogdGVtcGxhdGUuZixcbiAgXHRcdFx0cm9vdDogcmFjdGl2ZSxcbiAgXHRcdFx0b3duZXI6IHRoaXMsXG4gIFx0XHRcdHBFbGVtZW50OiB0aGlzLFxuICBcdFx0XHRjc3NJZHM6IG51bGxcbiAgXHRcdH0pO1xuICBcdH1cblxuICBcdC8vIHRoZSBlbGVtZW50IHNldHRpbmcgc2hvdWxkIG92ZXJyaWRlIHRoZSByYWN0aXZlIHNldHRpbmdcbiAgXHR0d293YXkgPSByYWN0aXZlLnR3b3dheTtcbiAgXHRpZiAoYmluZGluZ0F0dHJzLnR3b3dheSA9PT0gZmFsc2UpIHR3b3dheSA9IGZhbHNlO2Vsc2UgaWYgKGJpbmRpbmdBdHRycy50d293YXkgPT09IHRydWUpIHR3b3dheSA9IHRydWU7XG5cbiAgXHR0aGlzLnR3b3dheSA9IHR3b3dheTtcbiAgXHR0aGlzLmxhenkgPSBiaW5kaW5nQXR0cnMubGF6eTtcblxuICBcdC8vIGNyZWF0ZSB0d293YXkgYmluZGluZ1xuICBcdGlmICh0d293YXkgJiYgKGJpbmRpbmcgPSBpbml0X2NyZWF0ZVR3b3dheUJpbmRpbmcodGhpcywgdGVtcGxhdGUuYSkpKSB7XG4gIFx0XHR0aGlzLmJpbmRpbmcgPSBiaW5kaW5nO1xuXG4gIFx0XHQvLyByZWdpc3RlciB0aGlzIHdpdGggdGhlIHJvb3QsIHNvIHRoYXQgd2UgY2FuIGRvIHJhY3RpdmUudXBkYXRlTW9kZWwoKVxuICBcdFx0YmluZGluZ3MgPSB0aGlzLnJvb3QuX3R3b3dheUJpbmRpbmdzW2JpbmRpbmcua2V5cGF0aC5zdHJdIHx8ICh0aGlzLnJvb3QuX3R3b3dheUJpbmRpbmdzW2JpbmRpbmcua2V5cGF0aC5zdHJdID0gW10pO1xuICBcdFx0YmluZGluZ3MucHVzaChiaW5kaW5nKTtcbiAgXHR9XG5cbiAgXHQvLyBjcmVhdGUgZXZlbnQgcHJveGllc1xuICBcdGlmICh0ZW1wbGF0ZS52KSB7XG4gIFx0XHR0aGlzLmV2ZW50SGFuZGxlcnMgPSBjcmVhdGVFdmVudEhhbmRsZXJzKHRoaXMsIHRlbXBsYXRlLnYpO1xuICBcdH1cblxuICBcdC8vIGNyZWF0ZSBkZWNvcmF0b3JcbiAgXHRpZiAodGVtcGxhdGUubykge1xuICBcdFx0dGhpcy5kZWNvcmF0b3IgPSBuZXcgX0RlY29yYXRvcih0aGlzLCB0ZW1wbGF0ZS5vKTtcbiAgXHR9XG5cbiAgXHQvLyBjcmVhdGUgdHJhbnNpdGlvbnNcbiAgXHR0aGlzLmludHJvID0gdGVtcGxhdGUudDAgfHwgdGVtcGxhdGUudDE7XG4gIFx0dGhpcy5vdXRybyA9IHRlbXBsYXRlLnQwIHx8IHRlbXBsYXRlLnQyO1xuICB9XG5cbiAgdmFyIEVsZW1lbnRfcHJvdG90eXBlX3JlYmluZCA9IEVsZW1lbnQkcmViaW5kO1xuICBmdW5jdGlvbiBFbGVtZW50JHJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0dmFyIGksIHN0b3JhZ2UsIGxpdmVRdWVyaWVzLCByYWN0aXZlO1xuXG4gIFx0aWYgKHRoaXMuYXR0cmlidXRlcykge1xuICBcdFx0dGhpcy5hdHRyaWJ1dGVzLmZvckVhY2gocmViaW5kKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5jb25kaXRpb25hbEF0dHJpYnV0ZXMpIHtcbiAgXHRcdHRoaXMuY29uZGl0aW9uYWxBdHRyaWJ1dGVzLmZvckVhY2gocmViaW5kKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5ldmVudEhhbmRsZXJzKSB7XG4gIFx0XHR0aGlzLmV2ZW50SGFuZGxlcnMuZm9yRWFjaChyZWJpbmQpO1xuICBcdH1cblxuICBcdGlmICh0aGlzLmRlY29yYXRvcikge1xuICBcdFx0cmViaW5kKHRoaXMuZGVjb3JhdG9yKTtcbiAgXHR9XG5cbiAgXHQvLyByZWJpbmQgY2hpbGRyZW5cbiAgXHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0cmViaW5kKHRoaXMuZnJhZ21lbnQpO1xuICBcdH1cblxuICBcdC8vIFVwZGF0ZSBsaXZlIHF1ZXJpZXMsIGlmIG5lY2Vzc2FyeVxuICBcdGlmIChsaXZlUXVlcmllcyA9IHRoaXMubGl2ZVF1ZXJpZXMpIHtcbiAgXHRcdHJhY3RpdmUgPSB0aGlzLnJvb3Q7XG5cbiAgXHRcdGkgPSBsaXZlUXVlcmllcy5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdGxpdmVRdWVyaWVzW2ldLl9tYWtlRGlydHkoKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5ub2RlICYmIChzdG9yYWdlID0gdGhpcy5ub2RlLl9yYWN0aXZlKSkge1xuXG4gIFx0XHQvLyBhZGp1c3Qga2V5cGF0aCBpZiBuZWVkZWRcbiAgXHRcdGFzc2lnbk5ld0tleXBhdGgoc3RvcmFnZSwgXCJrZXlwYXRoXCIsIG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdH1cblxuICBcdGZ1bmN0aW9uIHJlYmluZCh0aGluZykge1xuICBcdFx0dGhpbmcucmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNwZWNpYWxfaW1nX19yZW5kZXIoaW1nKSB7XG4gIFx0dmFyIGxvYWRIYW5kbGVyO1xuXG4gIFx0Ly8gaWYgdGhpcyBpcyBhbiA8aW1nPiwgYW5kIHdlJ3JlIGluIGEgY3JhcCBicm93c2VyLCB3ZSBtYXkgbmVlZCB0byBwcmV2ZW50IGl0XG4gIFx0Ly8gZnJvbSBvdmVycmlkaW5nIHdpZHRoIGFuZCBoZWlnaHQgd2hlbiBpdCBsb2FkcyB0aGUgc3JjXG4gIFx0aWYgKGltZy5hdHRyaWJ1dGVzLndpZHRoIHx8IGltZy5hdHRyaWJ1dGVzLmhlaWdodCkge1xuICBcdFx0aW1nLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgbG9hZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHZhciB3aWR0aCA9IGltZy5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxcbiAgXHRcdFx0ICAgIGhlaWdodCA9IGltZy5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIik7XG5cbiAgXHRcdFx0aWYgKHdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0XHRpbWcubm9kZS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0XHRpbWcubm9kZS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGltZy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGxvYWRIYW5kbGVyLCBmYWxzZSk7XG4gIFx0XHR9LCBmYWxzZSk7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gZm9ybV9fcmVuZGVyKGVsZW1lbnQpIHtcbiAgXHRlbGVtZW50Lm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsIGhhbmRsZVJlc2V0LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtX191bnJlbmRlcihlbGVtZW50KSB7XG4gIFx0ZWxlbWVudC5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCBoYW5kbGVSZXNldCwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzZXQoKSB7XG4gIFx0dmFyIGVsZW1lbnQgPSB0aGlzLl9yYWN0aXZlLnByb3h5O1xuXG4gIFx0Z2xvYmFsX3J1bmxvb3Auc3RhcnQoKTtcbiAgXHRlbGVtZW50LmZvcm1CaW5kaW5ncy5mb3JFYWNoKHVwZGF0ZU1vZGVsKTtcbiAgXHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKGJpbmRpbmcpIHtcbiAgXHRiaW5kaW5nLnJvb3Qudmlld21vZGVsLnNldChiaW5kaW5nLmtleXBhdGgsIGJpbmRpbmcucmVzZXRWYWx1ZSk7XG4gIH1cblxuICB2YXIgVHJhbnNpdGlvbl9wcm90b3R5cGVfaW5pdCA9IFRyYW5zaXRpb24kaW5pdDtcbiAgZnVuY3Rpb24gVHJhbnNpdGlvbiRpbml0KGVsZW1lbnQsIHRlbXBsYXRlLCBpc0ludHJvKSB7XG4gIFx0dmFyIHJhY3RpdmUsIG5hbWUsIGZyYWdtZW50O1xuXG4gIFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgXHR0aGlzLnJvb3QgPSByYWN0aXZlID0gZWxlbWVudC5yb290O1xuICBcdHRoaXMuaXNJbnRybyA9IGlzSW50cm87XG5cbiAgXHRuYW1lID0gdGVtcGxhdGUubiB8fCB0ZW1wbGF0ZTtcblxuICBcdGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICBcdFx0ZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRcdHRlbXBsYXRlOiBuYW1lLFxuICBcdFx0XHRyb290OiByYWN0aXZlLFxuICBcdFx0XHRvd25lcjogZWxlbWVudFxuICBcdFx0fSk7XG5cbiAgXHRcdG5hbWUgPSBmcmFnbWVudC50b1N0cmluZygpO1xuICBcdFx0ZnJhZ21lbnQudW5iaW5kKCk7XG5cbiAgXHRcdGlmIChuYW1lID09PSBcIlwiKSB7XG4gIFx0XHRcdC8vIGVtcHR5IHN0cmluZyBva2F5LCBqdXN0IG5vIHRyYW5zaXRpb25cbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHRoaXMubmFtZSA9IG5hbWU7XG5cbiAgXHRpZiAodGVtcGxhdGUuYSkge1xuICBcdFx0dGhpcy5wYXJhbXMgPSB0ZW1wbGF0ZS5hO1xuICBcdH0gZWxzZSBpZiAodGVtcGxhdGUuZCkge1xuICBcdFx0Ly8gVE9ETyBpcyB0aGVyZSBhIHdheSB0byBpbnRlcnByZXQgZHluYW1pYyBhcmd1bWVudHMgd2l0aG91dCBhbGwgdGhlXG4gIFx0XHQvLyAnZGVwZW5kZW5jeSB0aHJhc2hpbmcnP1xuICBcdFx0ZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRcdHRlbXBsYXRlOiB0ZW1wbGF0ZS5kLFxuICBcdFx0XHRyb290OiByYWN0aXZlLFxuICBcdFx0XHRvd25lcjogZWxlbWVudFxuICBcdFx0fSk7XG5cbiAgXHRcdHRoaXMucGFyYW1zID0gZnJhZ21lbnQuZ2V0QXJnc0xpc3QoKTtcbiAgXHRcdGZyYWdtZW50LnVuYmluZCgpO1xuICBcdH1cblxuICBcdHRoaXMuX2ZuID0gZmluZEluVmlld0hpZXJhcmNoeShcInRyYW5zaXRpb25zXCIsIHJhY3RpdmUsIG5hbWUpO1xuXG4gIFx0aWYgKCF0aGlzLl9mbikge1xuICBcdFx0d2Fybk9uY2VJZkRlYnVnKG1pc3NpbmdQbHVnaW4obmFtZSwgXCJ0cmFuc2l0aW9uXCIpLCB7IHJhY3RpdmU6IHRoaXMucm9vdCB9KTtcbiAgXHR9XG4gIH1cblxuICB2YXIgY2FtZWxDYXNlID0gZnVuY3Rpb24gKGh5cGhlbmF0ZWRTdHIpIHtcbiAgXHRyZXR1cm4gaHlwaGVuYXRlZFN0ci5yZXBsYWNlKC8tKFthLXpBLVpdKS9nLCBmdW5jdGlvbiAobWF0Y2gsICQxKSB7XG4gIFx0XHRyZXR1cm4gJDEudG9VcHBlckNhc2UoKTtcbiAgXHR9KTtcbiAgfTtcblxuICB2YXIgaGVscGVyc19wcmVmaXhfX3ByZWZpeCwgcHJlZml4Q2FjaGUsIGhlbHBlcnNfcHJlZml4X190ZXN0U3R5bGU7XG5cbiAgaWYgKCFpc0NsaWVudCkge1xuICBcdGhlbHBlcnNfcHJlZml4X19wcmVmaXggPSBudWxsO1xuICB9IGVsc2Uge1xuICBcdHByZWZpeENhY2hlID0ge307XG4gIFx0aGVscGVyc19wcmVmaXhfX3Rlc3RTdHlsZSA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7XG5cbiAgXHRoZWxwZXJzX3ByZWZpeF9fcHJlZml4ID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgXHRcdHZhciBpLCB2ZW5kb3IsIGNhcHBlZDtcblxuICBcdFx0cHJvcCA9IGNhbWVsQ2FzZShwcm9wKTtcblxuICBcdFx0aWYgKCFwcmVmaXhDYWNoZVtwcm9wXSkge1xuICBcdFx0XHRpZiAoaGVscGVyc19wcmVmaXhfX3Rlc3RTdHlsZVtwcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFx0cHJlZml4Q2FjaGVbcHJvcF0gPSBwcm9wO1xuICBcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdC8vIHRlc3QgdmVuZG9ycy4uLlxuICBcdFx0XHRcdGNhcHBlZCA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnN1YnN0cmluZygxKTtcblxuICBcdFx0XHRcdGkgPSB2ZW5kb3JzLmxlbmd0aDtcbiAgXHRcdFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdFx0XHR2ZW5kb3IgPSB2ZW5kb3JzW2ldO1xuICBcdFx0XHRcdFx0aWYgKGhlbHBlcnNfcHJlZml4X190ZXN0U3R5bGVbdmVuZG9yICsgY2FwcGVkXSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFx0XHRcdHByZWZpeENhY2hlW3Byb3BdID0gdmVuZG9yICsgY2FwcGVkO1xuICBcdFx0XHRcdFx0XHRicmVhaztcbiAgXHRcdFx0XHRcdH1cbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHByZWZpeENhY2hlW3Byb3BdO1xuICBcdH07XG4gIH1cblxuICB2YXIgaGVscGVyc19wcmVmaXggPSBoZWxwZXJzX3ByZWZpeF9fcHJlZml4O1xuXG4gIHZhciBnZXRTdHlsZSwgcHJvdG90eXBlX2dldFN0eWxlX19nZXRDb21wdXRlZFN0eWxlO1xuXG4gIGlmICghaXNDbGllbnQpIHtcbiAgXHRnZXRTdHlsZSA9IG51bGw7XG4gIH0gZWxzZSB7XG4gIFx0cHJvdG90eXBlX2dldFN0eWxlX19nZXRDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgfHwgbGVnYWN5LmdldENvbXB1dGVkU3R5bGU7XG5cbiAgXHRnZXRTdHlsZSA9IGZ1bmN0aW9uIChwcm9wcykge1xuICBcdFx0dmFyIGNvbXB1dGVkU3R5bGUsIHN0eWxlcywgaSwgcHJvcCwgdmFsdWU7XG5cbiAgXHRcdGNvbXB1dGVkU3R5bGUgPSBwcm90b3R5cGVfZ2V0U3R5bGVfX2dldENvbXB1dGVkU3R5bGUodGhpcy5ub2RlKTtcblxuICBcdFx0aWYgKHR5cGVvZiBwcm9wcyA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHR2YWx1ZSA9IGNvbXB1dGVkU3R5bGVbaGVscGVyc19wcmVmaXgocHJvcHMpXTtcbiAgXHRcdFx0aWYgKHZhbHVlID09PSBcIjBweFwiKSB7XG4gIFx0XHRcdFx0dmFsdWUgPSAwO1xuICBcdFx0XHR9XG4gIFx0XHRcdHJldHVybiB2YWx1ZTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCFpc0FycmF5KHByb3BzKSkge1xuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2l0aW9uJGdldFN0eWxlIG11c3QgYmUgcGFzc2VkIGEgc3RyaW5nLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyBDU1MgcHJvcGVydGllc1wiKTtcbiAgXHRcdH1cblxuICBcdFx0c3R5bGVzID0ge307XG5cbiAgXHRcdGkgPSBwcm9wcy5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdHByb3AgPSBwcm9wc1tpXTtcbiAgXHRcdFx0dmFsdWUgPSBjb21wdXRlZFN0eWxlW2hlbHBlcnNfcHJlZml4KHByb3ApXTtcbiAgXHRcdFx0aWYgKHZhbHVlID09PSBcIjBweFwiKSB7XG4gIFx0XHRcdFx0dmFsdWUgPSAwO1xuICBcdFx0XHR9XG4gIFx0XHRcdHN0eWxlc1twcm9wXSA9IHZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gc3R5bGVzO1xuICBcdH07XG4gIH1cblxuICB2YXIgcHJvdG90eXBlX2dldFN0eWxlID0gZ2V0U3R5bGU7XG5cbiAgdmFyIHNldFN0eWxlID0gZnVuY3Rpb24gKHN0eWxlLCB2YWx1ZSkge1xuICBcdHZhciBwcm9wO1xuXG4gIFx0aWYgKHR5cGVvZiBzdHlsZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0dGhpcy5ub2RlLnN0eWxlW2hlbHBlcnNfcHJlZml4KHN0eWxlKV0gPSB2YWx1ZTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0Zm9yIChwcm9wIGluIHN0eWxlKSB7XG4gIFx0XHRcdGlmIChzdHlsZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICBcdFx0XHRcdHRoaXMubm9kZS5zdHlsZVtoZWxwZXJzX3ByZWZpeChwcm9wKV0gPSBzdHlsZVtwcm9wXTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBUaWNrZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHZhciBlYXNpbmc7XG5cbiAgXHR0aGlzLmR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbjtcbiAgXHR0aGlzLnN0ZXAgPSBvcHRpb25zLnN0ZXA7XG4gIFx0dGhpcy5jb21wbGV0ZSA9IG9wdGlvbnMuY29tcGxldGU7XG5cbiAgXHQvLyBlYXNpbmdcbiAgXHRpZiAodHlwZW9mIG9wdGlvbnMuZWFzaW5nID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRlYXNpbmcgPSBvcHRpb25zLnJvb3QuZWFzaW5nW29wdGlvbnMuZWFzaW5nXTtcblxuICBcdFx0aWYgKCFlYXNpbmcpIHtcbiAgXHRcdFx0d2Fybk9uY2VJZkRlYnVnKG1pc3NpbmdQbHVnaW4ob3B0aW9ucy5lYXNpbmcsIFwiZWFzaW5nXCIpKTtcbiAgXHRcdFx0ZWFzaW5nID0gbGluZWFyO1xuICBcdFx0fVxuICBcdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuZWFzaW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdGVhc2luZyA9IG9wdGlvbnMuZWFzaW5nO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRlYXNpbmcgPSBsaW5lYXI7XG4gIFx0fVxuXG4gIFx0dGhpcy5lYXNpbmcgPSBlYXNpbmc7XG5cbiAgXHR0aGlzLnN0YXJ0ID0gdXRpbHNfZ2V0VGltZSgpO1xuICBcdHRoaXMuZW5kID0gdGhpcy5zdGFydCArIHRoaXMuZHVyYXRpb247XG5cbiAgXHR0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICBcdHNoYXJlZF9hbmltYXRpb25zLmFkZCh0aGlzKTtcbiAgfTtcblxuICBUaWNrZXIucHJvdG90eXBlID0ge1xuICBcdHRpY2s6IGZ1bmN0aW9uIChub3cpIHtcbiAgXHRcdHZhciBlbGFwc2VkLCBlYXNlZDtcblxuICBcdFx0aWYgKCF0aGlzLnJ1bm5pbmcpIHtcbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAobm93ID4gdGhpcy5lbmQpIHtcbiAgXHRcdFx0aWYgKHRoaXMuc3RlcCkge1xuICBcdFx0XHRcdHRoaXMuc3RlcCgxKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmICh0aGlzLmNvbXBsZXRlKSB7XG4gIFx0XHRcdFx0dGhpcy5jb21wbGV0ZSgxKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybiBmYWxzZTtcbiAgXHRcdH1cblxuICBcdFx0ZWxhcHNlZCA9IG5vdyAtIHRoaXMuc3RhcnQ7XG4gIFx0XHRlYXNlZCA9IHRoaXMuZWFzaW5nKGVsYXBzZWQgLyB0aGlzLmR1cmF0aW9uKTtcblxuICBcdFx0aWYgKHRoaXMuc3RlcCkge1xuICBcdFx0XHR0aGlzLnN0ZXAoZWFzZWQpO1xuICBcdFx0fVxuXG4gIFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHR9LFxuXG4gIFx0c3RvcDogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKHRoaXMuYWJvcnQpIHtcbiAgXHRcdFx0dGhpcy5hYm9ydCgpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIHNoYXJlZF9UaWNrZXIgPSBUaWNrZXI7XG4gIGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gIFx0cmV0dXJuIHQ7XG4gIH1cblxuICB2YXIgdW5wcmVmaXhQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl4tKD86XCIgKyB2ZW5kb3JzLmpvaW4oXCJ8XCIpICsgXCIpLVwiKTtcblxuICB2YXIgdW5wcmVmaXggPSBmdW5jdGlvbiAocHJvcCkge1xuICBcdHJldHVybiBwcm9wLnJlcGxhY2UodW5wcmVmaXhQYXR0ZXJuLCBcIlwiKTtcbiAgfTtcblxuICB2YXIgdmVuZG9yUGF0dGVybiA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyB2ZW5kb3JzLmpvaW4oXCJ8XCIpICsgXCIpKFtBLVpdKVwiKTtcblxuICB2YXIgaHlwaGVuYXRlID0gZnVuY3Rpb24gKHN0cikge1xuICBcdHZhciBoeXBoZW5hdGVkO1xuXG4gIFx0aWYgKCFzdHIpIHtcbiAgXHRcdHJldHVybiBcIlwiOyAvLyBlZGdlIGNhc2VcbiAgXHR9XG5cbiAgXHRpZiAodmVuZG9yUGF0dGVybi50ZXN0KHN0cikpIHtcbiAgXHRcdHN0ciA9IFwiLVwiICsgc3RyO1xuICBcdH1cblxuICBcdGh5cGhlbmF0ZWQgPSBzdHIucmVwbGFjZSgvW0EtWl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gIFx0XHRyZXR1cm4gXCItXCIgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICBcdH0pO1xuXG4gIFx0cmV0dXJuIGh5cGhlbmF0ZWQ7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZVRyYW5zaXRpb25zLFxuICAgICAgYW5pbWF0ZVN0eWxlX2NyZWF0ZVRyYW5zaXRpb25zX190ZXN0U3R5bGUsXG4gICAgICBUUkFOU0lUSU9OLFxuICAgICAgVFJBTlNJVElPTkVORCxcbiAgICAgIENTU19UUkFOU0lUSU9OU19FTkFCTEVELFxuICAgICAgVFJBTlNJVElPTl9EVVJBVElPTixcbiAgICAgIFRSQU5TSVRJT05fUFJPUEVSVFksXG4gICAgICBUUkFOU0lUSU9OX1RJTUlOR19GVU5DVElPTixcbiAgICAgIGNhblVzZUNzc1RyYW5zaXRpb25zID0ge30sXG4gICAgICBjYW5ub3RVc2VDc3NUcmFuc2l0aW9ucyA9IHt9O1xuXG4gIGlmICghaXNDbGllbnQpIHtcbiAgXHRjcmVhdGVUcmFuc2l0aW9ucyA9IG51bGw7XG4gIH0gZWxzZSB7XG4gIFx0YW5pbWF0ZVN0eWxlX2NyZWF0ZVRyYW5zaXRpb25zX190ZXN0U3R5bGUgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpLnN0eWxlO1xuXG4gIFx0Ly8gZGV0ZXJtaW5lIHNvbWUgZmFjdHMgYWJvdXQgb3VyIGVudmlyb25tZW50XG4gIFx0KGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmIChhbmltYXRlU3R5bGVfY3JlYXRlVHJhbnNpdGlvbnNfX3Rlc3RTdHlsZS50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0VFJBTlNJVElPTiA9IFwidHJhbnNpdGlvblwiO1xuICBcdFx0XHRUUkFOU0lUSU9ORU5EID0gXCJ0cmFuc2l0aW9uZW5kXCI7XG4gIFx0XHRcdENTU19UUkFOU0lUSU9OU19FTkFCTEVEID0gdHJ1ZTtcbiAgXHRcdH0gZWxzZSBpZiAoYW5pbWF0ZVN0eWxlX2NyZWF0ZVRyYW5zaXRpb25zX190ZXN0U3R5bGUud2Via2l0VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFRSQU5TSVRJT04gPSBcIndlYmtpdFRyYW5zaXRpb25cIjtcbiAgXHRcdFx0VFJBTlNJVElPTkVORCA9IFwid2Via2l0VHJhbnNpdGlvbkVuZFwiO1xuICBcdFx0XHRDU1NfVFJBTlNJVElPTlNfRU5BQkxFRCA9IHRydWU7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRDU1NfVFJBTlNJVElPTlNfRU5BQkxFRCA9IGZhbHNlO1xuICBcdFx0fVxuICBcdH0pKCk7XG5cbiAgXHRpZiAoVFJBTlNJVElPTikge1xuICBcdFx0VFJBTlNJVElPTl9EVVJBVElPTiA9IFRSQU5TSVRJT04gKyBcIkR1cmF0aW9uXCI7XG4gIFx0XHRUUkFOU0lUSU9OX1BST1BFUlRZID0gVFJBTlNJVElPTiArIFwiUHJvcGVydHlcIjtcbiAgXHRcdFRSQU5TSVRJT05fVElNSU5HX0ZVTkNUSU9OID0gVFJBTlNJVElPTiArIFwiVGltaW5nRnVuY3Rpb25cIjtcbiAgXHR9XG5cbiAgXHRjcmVhdGVUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uICh0LCB0bywgb3B0aW9ucywgY2hhbmdlZFByb3BlcnRpZXMsIHJlc29sdmUpIHtcblxuICBcdFx0Ly8gV2FpdCBhIGJlYXQgKG90aGVyd2lzZSB0aGUgdGFyZ2V0IHN0eWxlcyB3aWxsIGJlIGFwcGxpZWQgaW1tZWRpYXRlbHkpXG4gIFx0XHQvLyBUT0RPIHVzZSBhIGZhc3Rkb20tc3R5bGUgbWVjaGFuaXNtP1xuICBcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgXHRcdFx0dmFyIGhhc2hQcmVmaXgsIGpzVHJhbnNpdGlvbnNDb21wbGV0ZSwgY3NzVHJhbnNpdGlvbnNDb21wbGV0ZSwgY2hlY2tDb21wbGV0ZSwgdHJhbnNpdGlvbkVuZEhhbmRsZXI7XG5cbiAgXHRcdFx0Y2hlY2tDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHRpZiAoanNUcmFuc2l0aW9uc0NvbXBsZXRlICYmIGNzc1RyYW5zaXRpb25zQ29tcGxldGUpIHtcbiAgXHRcdFx0XHRcdC8vIHdpbGwgY2hhbmdlcyB0byBldmVudHMgYW5kIGZpcmUgaGF2ZSBhbiB1bmV4cGVjdGVkIGNvbnNlcXVlbmNlIGhlcmU/XG4gIFx0XHRcdFx0XHR0LnJvb3QuZmlyZSh0Lm5hbWUgKyBcIjplbmRcIiwgdC5ub2RlLCB0LmlzSW50cm8pO1xuICBcdFx0XHRcdFx0cmVzb2x2ZSgpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fTtcblxuICBcdFx0XHQvLyB0aGlzIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBlbGVtZW50cyBjYW4gdXNlIENTUyB0byBhbmltYXRlXG4gIFx0XHRcdC8vIHdoaWNoIHByb3BlcnRpZXNcbiAgXHRcdFx0aGFzaFByZWZpeCA9ICh0Lm5vZGUubmFtZXNwYWNlVVJJIHx8IFwiXCIpICsgdC5ub2RlLnRhZ05hbWU7XG5cbiAgXHRcdFx0dC5ub2RlLnN0eWxlW1RSQU5TSVRJT05fUFJPUEVSVFldID0gY2hhbmdlZFByb3BlcnRpZXMubWFwKGhlbHBlcnNfcHJlZml4KS5tYXAoaHlwaGVuYXRlKS5qb2luKFwiLFwiKTtcbiAgXHRcdFx0dC5ub2RlLnN0eWxlW1RSQU5TSVRJT05fVElNSU5HX0ZVTkNUSU9OXSA9IGh5cGhlbmF0ZShvcHRpb25zLmVhc2luZyB8fCBcImxpbmVhclwiKTtcbiAgXHRcdFx0dC5ub2RlLnN0eWxlW1RSQU5TSVRJT05fRFVSQVRJT05dID0gb3B0aW9ucy5kdXJhdGlvbiAvIDEwMDAgKyBcInNcIjtcblxuICBcdFx0XHR0cmFuc2l0aW9uRW5kSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICBcdFx0XHRcdHZhciBpbmRleDtcblxuICBcdFx0XHRcdGluZGV4ID0gY2hhbmdlZFByb3BlcnRpZXMuaW5kZXhPZihjYW1lbENhc2UodW5wcmVmaXgoZXZlbnQucHJvcGVydHlOYW1lKSkpO1xuICBcdFx0XHRcdGlmIChpbmRleCAhPT0gLTEpIHtcbiAgXHRcdFx0XHRcdGNoYW5nZWRQcm9wZXJ0aWVzLnNwbGljZShpbmRleCwgMSk7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0aWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmxlbmd0aCkge1xuICBcdFx0XHRcdFx0Ly8gc3RpbGwgdHJhbnNpdGlvbmluZy4uLlxuICBcdFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdHQubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKFRSQU5TSVRJT05FTkQsIHRyYW5zaXRpb25FbmRIYW5kbGVyLCBmYWxzZSk7XG5cbiAgXHRcdFx0XHRjc3NUcmFuc2l0aW9uc0NvbXBsZXRlID0gdHJ1ZTtcbiAgXHRcdFx0XHRjaGVja0NvbXBsZXRlKCk7XG4gIFx0XHRcdH07XG5cbiAgXHRcdFx0dC5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoVFJBTlNJVElPTkVORCwgdHJhbnNpdGlvbkVuZEhhbmRsZXIsIGZhbHNlKTtcblxuICBcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0XHR2YXIgaSA9IGNoYW5nZWRQcm9wZXJ0aWVzLmxlbmd0aCxcbiAgXHRcdFx0XHQgICAgaGFzaCxcbiAgXHRcdFx0XHQgICAgb3JpZ2luYWxWYWx1ZSxcbiAgXHRcdFx0XHQgICAgaW5kZXgsXG4gIFx0XHRcdFx0ICAgIHByb3BlcnRpZXNUb1RyYW5zaXRpb25JbkpzID0gW10sXG4gIFx0XHRcdFx0ICAgIHByb3AsXG4gIFx0XHRcdFx0ICAgIHN1ZmZpeDtcblxuICBcdFx0XHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0XHRcdHByb3AgPSBjaGFuZ2VkUHJvcGVydGllc1tpXTtcbiAgXHRcdFx0XHRcdGhhc2ggPSBoYXNoUHJlZml4ICsgcHJvcDtcblxuICBcdFx0XHRcdFx0aWYgKENTU19UUkFOU0lUSU9OU19FTkFCTEVEICYmICFjYW5ub3RVc2VDc3NUcmFuc2l0aW9uc1toYXNoXSkge1xuICBcdFx0XHRcdFx0XHR0Lm5vZGUuc3R5bGVbaGVscGVyc19wcmVmaXgocHJvcCldID0gdG9bcHJvcF07XG5cbiAgXHRcdFx0XHRcdFx0Ly8gSWYgd2UncmUgbm90IHN1cmUgaWYgQ1NTIHRyYW5zaXRpb25zIGFyZSBzdXBwb3J0ZWQgZm9yXG4gIFx0XHRcdFx0XHRcdC8vIHRoaXMgdGFnL3Byb3BlcnR5IGNvbWJvLCBmaW5kIG91dCBub3dcbiAgXHRcdFx0XHRcdFx0aWYgKCFjYW5Vc2VDc3NUcmFuc2l0aW9uc1toYXNoXSkge1xuICBcdFx0XHRcdFx0XHRcdG9yaWdpbmFsVmFsdWUgPSB0LmdldFN0eWxlKHByb3ApO1xuXG4gIFx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhpcyBwcm9wZXJ0eSBpcyB0cmFuc2l0aW9uYWJsZSBpbiB0aGlzIGJyb3dzZXIsXG4gIFx0XHRcdFx0XHRcdFx0Ly8gdGhlIGN1cnJlbnQgc3R5bGUgd2lsbCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdGFyZ2V0IHN0eWxlXG4gIFx0XHRcdFx0XHRcdFx0Y2FuVXNlQ3NzVHJhbnNpdGlvbnNbaGFzaF0gPSB0LmdldFN0eWxlKHByb3ApICE9IHRvW3Byb3BdO1xuICBcdFx0XHRcdFx0XHRcdGNhbm5vdFVzZUNzc1RyYW5zaXRpb25zW2hhc2hdID0gIWNhblVzZUNzc1RyYW5zaXRpb25zW2hhc2hdO1xuXG4gIFx0XHRcdFx0XHRcdFx0Ly8gUmVzZXQsIGlmIHdlJ3JlIGdvaW5nIHRvIHVzZSB0aW1lcnMgYWZ0ZXIgYWxsXG4gIFx0XHRcdFx0XHRcdFx0aWYgKGNhbm5vdFVzZUNzc1RyYW5zaXRpb25zW2hhc2hdKSB7XG4gIFx0XHRcdFx0XHRcdFx0XHR0Lm5vZGUuc3R5bGVbaGVscGVyc19wcmVmaXgocHJvcCldID0gb3JpZ2luYWxWYWx1ZTtcbiAgXHRcdFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0XHRcdH1cbiAgXHRcdFx0XHRcdH1cblxuICBcdFx0XHRcdFx0aWYgKCFDU1NfVFJBTlNJVElPTlNfRU5BQkxFRCB8fCBjYW5ub3RVc2VDc3NUcmFuc2l0aW9uc1toYXNoXSkge1xuICBcdFx0XHRcdFx0XHQvLyB3ZSBuZWVkIHRvIGZhbGwgYmFjayB0byB0aW1lci1iYXNlZCBzdHVmZlxuICBcdFx0XHRcdFx0XHRpZiAob3JpZ2luYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxWYWx1ZSA9IHQuZ2V0U3R5bGUocHJvcCk7XG4gIFx0XHRcdFx0XHRcdH1cblxuICBcdFx0XHRcdFx0XHQvLyBuZWVkIHRvIHJlbW92ZSB0aGlzIGZyb20gY2hhbmdlZFByb3BlcnRpZXMsIG90aGVyd2lzZSB0cmFuc2l0aW9uRW5kSGFuZGxlclxuICBcdFx0XHRcdFx0XHQvLyB3aWxsIGdldCBjb25mdXNlZFxuICBcdFx0XHRcdFx0XHRpbmRleCA9IGNoYW5nZWRQcm9wZXJ0aWVzLmluZGV4T2YocHJvcCk7XG4gIFx0XHRcdFx0XHRcdGlmIChpbmRleCA9PT0gLTEpIHtcbiAgXHRcdFx0XHRcdFx0XHR3YXJuSWZEZWJ1ZyhcIlNvbWV0aGluZyB2ZXJ5IHN0cmFuZ2UgaGFwcGVuZWQgd2l0aCB0cmFuc2l0aW9ucy4gUGxlYXNlIHJhaXNlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWN0aXZlanMvcmFjdGl2ZS9pc3N1ZXMgLSB0aGFua3MhXCIsIHsgbm9kZTogdC5ub2RlIH0pO1xuICBcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0XHRcdGNoYW5nZWRQcm9wZXJ0aWVzLnNwbGljZShpbmRleCwgMSk7XG4gIFx0XHRcdFx0XHRcdH1cblxuICBcdFx0XHRcdFx0XHQvLyBUT0RPIERldGVybWluZSB3aGV0aGVyIHRoaXMgcHJvcGVydHkgaXMgYW5pbWF0YWJsZSBhdCBhbGxcblxuICBcdFx0XHRcdFx0XHRzdWZmaXggPSAvW15cXGRdKiQvLmV4ZWModG9bcHJvcF0pWzBdO1xuXG4gIFx0XHRcdFx0XHRcdC8vIC4uLnRoZW4ga2ljayBvZmYgYSB0aW1lci1iYXNlZCB0cmFuc2l0aW9uXG4gIFx0XHRcdFx0XHRcdHByb3BlcnRpZXNUb1RyYW5zaXRpb25JbkpzLnB1c2goe1xuICBcdFx0XHRcdFx0XHRcdG5hbWU6IGhlbHBlcnNfcHJlZml4KHByb3ApLFxuICBcdFx0XHRcdFx0XHRcdGludGVycG9sYXRvcjogc2hhcmVkX2ludGVycG9sYXRlKHBhcnNlRmxvYXQob3JpZ2luYWxWYWx1ZSksIHBhcnNlRmxvYXQodG9bcHJvcF0pKSxcbiAgXHRcdFx0XHRcdFx0XHRzdWZmaXg6IHN1ZmZpeFxuICBcdFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHRcdH1cbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHQvLyBqYXZhc2NyaXB0IHRyYW5zaXRpb25zXG4gIFx0XHRcdFx0aWYgKHByb3BlcnRpZXNUb1RyYW5zaXRpb25JbkpzLmxlbmd0aCkge1xuICBcdFx0XHRcdFx0bmV3IHNoYXJlZF9UaWNrZXIoe1xuICBcdFx0XHRcdFx0XHRyb290OiB0LnJvb3QsXG4gIFx0XHRcdFx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICBcdFx0XHRcdFx0XHRlYXNpbmc6IGNhbWVsQ2FzZShvcHRpb25zLmVhc2luZyB8fCBcIlwiKSxcbiAgXHRcdFx0XHRcdFx0c3RlcDogZnVuY3Rpb24gKHBvcykge1xuICBcdFx0XHRcdFx0XHRcdHZhciBwcm9wLCBpO1xuXG4gIFx0XHRcdFx0XHRcdFx0aSA9IHByb3BlcnRpZXNUb1RyYW5zaXRpb25JbkpzLmxlbmd0aDtcbiAgXHRcdFx0XHRcdFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdFx0XHRcdFx0XHRwcm9wID0gcHJvcGVydGllc1RvVHJhbnNpdGlvbkluSnNbaV07XG4gIFx0XHRcdFx0XHRcdFx0XHR0Lm5vZGUuc3R5bGVbcHJvcC5uYW1lXSA9IHByb3AuaW50ZXJwb2xhdG9yKHBvcykgKyBwcm9wLnN1ZmZpeDtcbiAgXHRcdFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0XHRcdH0sXG4gIFx0XHRcdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdFx0XHRcdFx0anNUcmFuc2l0aW9uc0NvbXBsZXRlID0gdHJ1ZTtcbiAgXHRcdFx0XHRcdFx0XHRjaGVja0NvbXBsZXRlKCk7XG4gIFx0XHRcdFx0XHRcdH1cbiAgXHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRqc1RyYW5zaXRpb25zQ29tcGxldGUgPSB0cnVlO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdGlmICghY2hhbmdlZFByb3BlcnRpZXMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0XHQvLyBXZSBuZWVkIHRvIGNhbmNlbCB0aGUgdHJhbnNpdGlvbkVuZEhhbmRsZXIsIGFuZCBkZWFsIHdpdGhcbiAgXHRcdFx0XHRcdC8vIHRoZSBmYWN0IHRoYXQgaXQgd2lsbCBuZXZlciBmaXJlXG4gIFx0XHRcdFx0XHR0Lm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihUUkFOU0lUSU9ORU5ELCB0cmFuc2l0aW9uRW5kSGFuZGxlciwgZmFsc2UpO1xuICBcdFx0XHRcdFx0Y3NzVHJhbnNpdGlvbnNDb21wbGV0ZSA9IHRydWU7XG4gIFx0XHRcdFx0XHRjaGVja0NvbXBsZXRlKCk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9LCAwKTtcbiAgXHRcdH0sIG9wdGlvbnMuZGVsYXkgfHwgMCk7XG4gIFx0fTtcbiAgfVxuXG4gIHZhciBhbmltYXRlU3R5bGVfY3JlYXRlVHJhbnNpdGlvbnMgPSBjcmVhdGVUcmFuc2l0aW9ucztcblxuICB2YXIgaGlkZGVuLCB2ZW5kb3IsIGFuaW1hdGVTdHlsZV92aXNpYmlsaXR5X19wcmVmaXgsIGFuaW1hdGVTdHlsZV92aXNpYmlsaXR5X19pLCB2aXNpYmlsaXR5O1xuXG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgXHRoaWRkZW4gPSBcImhpZGRlblwiO1xuXG4gIFx0dmlzaWJpbGl0eSA9IHt9O1xuXG4gIFx0aWYgKGhpZGRlbiBpbiBkb2N1bWVudCkge1xuICBcdFx0YW5pbWF0ZVN0eWxlX3Zpc2liaWxpdHlfX3ByZWZpeCA9IFwiXCI7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdGFuaW1hdGVTdHlsZV92aXNpYmlsaXR5X19pID0gdmVuZG9ycy5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoYW5pbWF0ZVN0eWxlX3Zpc2liaWxpdHlfX2ktLSkge1xuICBcdFx0XHR2ZW5kb3IgPSB2ZW5kb3JzW2FuaW1hdGVTdHlsZV92aXNpYmlsaXR5X19pXTtcbiAgXHRcdFx0aGlkZGVuID0gdmVuZG9yICsgXCJIaWRkZW5cIjtcblxuICBcdFx0XHRpZiAoaGlkZGVuIGluIGRvY3VtZW50KSB7XG4gIFx0XHRcdFx0YW5pbWF0ZVN0eWxlX3Zpc2liaWxpdHlfX3ByZWZpeCA9IHZlbmRvcjtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChhbmltYXRlU3R5bGVfdmlzaWJpbGl0eV9fcHJlZml4ICE9PSB1bmRlZmluZWQpIHtcbiAgXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYW5pbWF0ZVN0eWxlX3Zpc2liaWxpdHlfX3ByZWZpeCArIFwidmlzaWJpbGl0eWNoYW5nZVwiLCBvbkNoYW5nZSk7XG5cbiAgXHRcdC8vIGluaXRpYWxpc2VcbiAgXHRcdG9uQ2hhbmdlKCk7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdC8vIGdhaCwgd2UncmUgaW4gYW4gb2xkIGJyb3dzZXJcbiAgXHRcdGlmIChcIm9uZm9jdXNvdXRcIiBpbiBkb2N1bWVudCkge1xuICBcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgb25IaWRlKTtcbiAgXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgb25TaG93KTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgb25IaWRlKTtcbiAgXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIG9uSGlkZSk7XG5cbiAgXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBvblNob3cpO1xuICBcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIG9uU2hvdyk7XG4gIFx0XHR9XG5cbiAgXHRcdHZpc2liaWxpdHkuaGlkZGVuID0gZmFsc2U7IC8vIHVudGlsIHByb3ZlbiBvdGhlcndpc2UuIE5vdCBpZGVhbCBidXQgaGV5XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gb25DaGFuZ2UoKSB7XG4gIFx0dmlzaWJpbGl0eS5oaWRkZW4gPSBkb2N1bWVudFtoaWRkZW5dO1xuICB9XG5cbiAgZnVuY3Rpb24gb25IaWRlKCkge1xuICBcdHZpc2liaWxpdHkuaGlkZGVuID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2hvdygpIHtcbiAgXHR2aXNpYmlsaXR5LmhpZGRlbiA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGFuaW1hdGVTdHlsZV92aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcblxuICB2YXIgYW5pbWF0ZVN0eWxlLCBfYW5pbWF0ZVN0eWxlX19nZXRDb21wdXRlZFN0eWxlLCByZXNvbHZlZDtcblxuICBpZiAoIWlzQ2xpZW50KSB7XG4gIFx0YW5pbWF0ZVN0eWxlID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgXHRfYW5pbWF0ZVN0eWxlX19nZXRDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgfHwgbGVnYWN5LmdldENvbXB1dGVkU3R5bGU7XG5cbiAgXHRhbmltYXRlU3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUsIHZhbHVlLCBvcHRpb25zKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHR2YXIgdG87XG5cbiAgXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA0KSB7XG4gIFx0XHRcdHRocm93IG5ldyBFcnJvcihcInQuYW5pbWF0ZVN0eWxlKCkgcmV0dXJucyBhIHByb21pc2UgLSB1c2UgLnRoZW4oKSBpbnN0ZWFkIG9mIHBhc3NpbmcgYSBjYWxsYmFja1wiKTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gU3BlY2lhbCBjYXNlIC0gcGFnZSBpc24ndCB2aXNpYmxlLiBEb24ndCBhbmltYXRlIGFueXRoaW5nLCBiZWNhdXNlXG4gIFx0XHQvLyB0aGF0IHdheSB5b3UnbGwgbmV2ZXIgZ2V0IENTUyB0cmFuc2l0aW9uZW5kIGV2ZW50c1xuICBcdFx0aWYgKGFuaW1hdGVTdHlsZV92aXNpYmlsaXR5LmhpZGRlbikge1xuICBcdFx0XHR0aGlzLnNldFN0eWxlKHN0eWxlLCB2YWx1ZSk7XG4gIFx0XHRcdHJldHVybiByZXNvbHZlZCB8fCAocmVzb2x2ZWQgPSB1dGlsc19Qcm9taXNlLnJlc29sdmUoKSk7XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh0eXBlb2Ygc3R5bGUgPT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdFx0dG8gPSB7fTtcbiAgXHRcdFx0dG9bc3R5bGVdID0gdmFsdWU7XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHR0byA9IHN0eWxlO1xuXG4gIFx0XHRcdC8vIHNodWZmbGUgYXJndW1lbnRzXG4gIFx0XHRcdG9wdGlvbnMgPSB2YWx1ZTtcbiAgXHRcdH1cblxuICBcdFx0Ly8gQXMgb2YgMC4zLjksIHRyYW5zaXRpb24gYXV0aG9ycyBzaG91bGQgc3VwcGx5IGFuIGBvcHRpb25gIG9iamVjdCB3aXRoXG4gIFx0XHQvLyBgZHVyYXRpb25gIGFuZCBgZWFzaW5nYCBwcm9wZXJ0aWVzIChhbmQgb3B0aW9uYWwgYGRlbGF5YCksIHBsdXMgYVxuICBcdFx0Ly8gY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBhZnRlciB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlc1xuXG4gIFx0XHQvLyBUT0RPIHJlbW92ZSB0aGlzIGNoZWNrIGluIGEgZnV0dXJlIHZlcnNpb25cbiAgXHRcdGlmICghb3B0aW9ucykge1xuICBcdFx0XHR3YXJuT25jZUlmRGVidWcoXCJUaGUgXFxcIiVzXFxcIiB0cmFuc2l0aW9uIGRvZXMgbm90IHN1cHBseSBhbiBvcHRpb25zIG9iamVjdCB0byBgdC5hbmltYXRlU3R5bGUoKWAuIFRoaXMgd2lsbCBicmVhayBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFJhY3RpdmUuIEZvciBtb3JlIGluZm8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SYWN0aXZlSlMvUmFjdGl2ZS9pc3N1ZXMvMzQwXCIsIHRoaXMubmFtZSk7XG4gIFx0XHRcdG9wdGlvbnMgPSB0aGlzO1xuICBcdFx0fVxuXG4gIFx0XHR2YXIgcHJvbWlzZSA9IG5ldyB1dGlsc19Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gIFx0XHRcdHZhciBwcm9wZXJ0eU5hbWVzLCBjaGFuZ2VkUHJvcGVydGllcywgY29tcHV0ZWRTdHlsZSwgY3VycmVudCwgZnJvbSwgaSwgcHJvcDtcblxuICBcdFx0XHQvLyBFZGdlIGNhc2UgLSBpZiBkdXJhdGlvbiBpcyB6ZXJvLCBzZXQgc3R5bGUgc3luY2hyb25vdXNseSBhbmQgY29tcGxldGVcbiAgXHRcdFx0aWYgKCFvcHRpb25zLmR1cmF0aW9uKSB7XG4gIFx0XHRcdFx0X3RoaXMuc2V0U3R5bGUodG8pO1xuICBcdFx0XHRcdHJlc29sdmUoKTtcbiAgXHRcdFx0XHRyZXR1cm47XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBHZXQgYSBsaXN0IG9mIHRoZSBwcm9wZXJ0aWVzIHdlJ3JlIGFuaW1hdGluZ1xuICBcdFx0XHRwcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmtleXModG8pO1xuICBcdFx0XHRjaGFuZ2VkUHJvcGVydGllcyA9IFtdO1xuXG4gIFx0XHRcdC8vIFN0b3JlIHRoZSBjdXJyZW50IHN0eWxlc1xuICBcdFx0XHRjb21wdXRlZFN0eWxlID0gX2FuaW1hdGVTdHlsZV9fZ2V0Q29tcHV0ZWRTdHlsZShfdGhpcy5ub2RlKTtcblxuICBcdFx0XHRmcm9tID0ge307XG4gIFx0XHRcdGkgPSBwcm9wZXJ0eU5hbWVzLmxlbmd0aDtcbiAgXHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdHByb3AgPSBwcm9wZXJ0eU5hbWVzW2ldO1xuICBcdFx0XHRcdGN1cnJlbnQgPSBjb21wdXRlZFN0eWxlW2hlbHBlcnNfcHJlZml4KHByb3ApXTtcblxuICBcdFx0XHRcdGlmIChjdXJyZW50ID09PSBcIjBweFwiKSB7XG4gIFx0XHRcdFx0XHRjdXJyZW50ID0gMDtcbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHQvLyB3ZSBuZWVkIHRvIGtub3cgaWYgd2UncmUgYWN0dWFsbHkgY2hhbmdpbmcgYW55dGhpbmdcbiAgXHRcdFx0XHRpZiAoY3VycmVudCAhPSB0b1twcm9wXSkge1xuICBcdFx0XHRcdFx0Ly8gdXNlICE9IGluc3RlYWQgb2YgIT09LCBzbyB3ZSBjYW4gY29tcGFyZSBzdHJpbmdzIHdpdGggbnVtYmVyc1xuICBcdFx0XHRcdFx0Y2hhbmdlZFByb3BlcnRpZXMucHVzaChwcm9wKTtcblxuICBcdFx0XHRcdFx0Ly8gbWFrZSB0aGUgY29tcHV0ZWQgc3R5bGUgZXhwbGljaXQsIHNvIHdlIGNhbiBhbmltYXRlIHdoZXJlXG4gIFx0XHRcdFx0XHQvLyBlLmcuIGhlaWdodD0nYXV0bydcbiAgXHRcdFx0XHRcdF90aGlzLm5vZGUuc3R5bGVbaGVscGVyc19wcmVmaXgocHJvcCldID0gY3VycmVudDtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBJZiB3ZSdyZSBub3QgYWN0dWFsbHkgY2hhbmdpbmcgYW55dGhpbmcsIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50XG4gIFx0XHRcdC8vIHdpbGwgbmV2ZXIgZmlyZSEgU28gd2UgY29tcGxldGUgZWFybHlcbiAgXHRcdFx0aWYgKCFjaGFuZ2VkUHJvcGVydGllcy5sZW5ndGgpIHtcbiAgXHRcdFx0XHRyZXNvbHZlKCk7XG4gIFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0YW5pbWF0ZVN0eWxlX2NyZWF0ZVRyYW5zaXRpb25zKF90aGlzLCB0bywgb3B0aW9ucywgY2hhbmdlZFByb3BlcnRpZXMsIHJlc29sdmUpO1xuICBcdFx0fSk7XG5cbiAgXHRcdHJldHVybiBwcm9taXNlO1xuICBcdH07XG4gIH1cblxuICB2YXIgX2FuaW1hdGVTdHlsZSA9IGFuaW1hdGVTdHlsZTtcblxuICB2YXIgcHJvY2Vzc1BhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXMsIGRlZmF1bHRzKSB7XG4gIFx0aWYgKHR5cGVvZiBwYXJhbXMgPT09IFwibnVtYmVyXCIpIHtcbiAgXHRcdHBhcmFtcyA9IHsgZHVyYXRpb246IHBhcmFtcyB9O1xuICBcdH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0aWYgKHBhcmFtcyA9PT0gXCJzbG93XCIpIHtcbiAgXHRcdFx0cGFyYW1zID0geyBkdXJhdGlvbjogNjAwIH07XG4gIFx0XHR9IGVsc2UgaWYgKHBhcmFtcyA9PT0gXCJmYXN0XCIpIHtcbiAgXHRcdFx0cGFyYW1zID0geyBkdXJhdGlvbjogMjAwIH07XG4gIFx0XHR9IGVsc2Uge1xuICBcdFx0XHRwYXJhbXMgPSB7IGR1cmF0aW9uOiA0MDAgfTtcbiAgXHRcdH1cbiAgXHR9IGVsc2UgaWYgKCFwYXJhbXMpIHtcbiAgXHRcdHBhcmFtcyA9IHt9O1xuICBcdH1cblxuICBcdHJldHVybiBmaWxsR2Fwcyh7fSwgcGFyYW1zLCBkZWZhdWx0cyk7XG4gIH07XG5cbiAgdmFyIHByb3RvdHlwZV9zdGFydCA9IFRyYW5zaXRpb24kc3RhcnQ7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbiRzdGFydCgpIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dmFyIG5vZGUsIG9yaWdpbmFsU3R5bGUsIGNvbXBsZXRlZDtcblxuICBcdG5vZGUgPSB0aGlzLm5vZGUgPSB0aGlzLmVsZW1lbnQubm9kZTtcbiAgXHRvcmlnaW5hbFN0eWxlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcblxuICBcdC8vIGNyZWF0ZSB0LmNvbXBsZXRlKCkgLSB3ZSBkb24ndCB3YW50IHRoaXMgb24gdGhlIHByb3RvdHlwZSxcbiAgXHQvLyBiZWNhdXNlIHdlIGRvbid0IHdhbnQgYHRoaXNgIHNpbGxpbmVzcyB3aGVuIHBhc3NpbmcgaXQgYXNcbiAgXHQvLyBhbiBhcmd1bWVudFxuICBcdHRoaXMuY29tcGxldGUgPSBmdW5jdGlvbiAobm9SZXNldCkge1xuICBcdFx0aWYgKGNvbXBsZXRlZCkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdGlmICghbm9SZXNldCAmJiBfdGhpcy5pc0ludHJvKSB7XG4gIFx0XHRcdHJlc2V0U3R5bGUobm9kZSwgb3JpZ2luYWxTdHlsZSk7XG4gIFx0XHR9XG5cbiAgXHRcdG5vZGUuX3JhY3RpdmUudHJhbnNpdGlvbiA9IG51bGw7XG4gIFx0XHRfdGhpcy5fbWFuYWdlci5yZW1vdmUoX3RoaXMpO1xuXG4gIFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuICBcdH07XG5cbiAgXHQvLyBJZiB0aGUgdHJhbnNpdGlvbiBmdW5jdGlvbiBkb2Vzbid0IGV4aXN0LCBhYm9ydFxuICBcdGlmICghdGhpcy5fZm4pIHtcbiAgXHRcdHRoaXMuY29tcGxldGUoKTtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHR0aGlzLl9mbi5hcHBseSh0aGlzLnJvb3QsIFt0aGlzXS5jb25jYXQodGhpcy5wYXJhbXMpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0U3R5bGUobm9kZSwgc3R5bGUpIHtcbiAgXHRpZiAoc3R5bGUpIHtcbiAgXHRcdG5vZGUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgc3R5bGUpO1xuICBcdH0gZWxzZSB7XG5cbiAgXHRcdC8vIE5leHQgbGluZSBpcyBuZWNlc3NhcnksIHRvIHJlbW92ZSBlbXB0eSBzdHlsZSBhdHRyaWJ1dGUhXG4gIFx0XHQvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNzE2NzU1M1xuICBcdFx0bm9kZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgXHRcdG5vZGUucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gIFx0fVxuICB9XG5cbiAgdmFyIFRyYW5zaXRpb24gPSBmdW5jdGlvbiAob3duZXIsIHRlbXBsYXRlLCBpc0ludHJvKSB7XG4gIFx0dGhpcy5pbml0KG93bmVyLCB0ZW1wbGF0ZSwgaXNJbnRybyk7XG4gIH07XG5cbiAgVHJhbnNpdGlvbi5wcm90b3R5cGUgPSB7XG4gIFx0aW5pdDogVHJhbnNpdGlvbl9wcm90b3R5cGVfaW5pdCxcbiAgXHRzdGFydDogcHJvdG90eXBlX3N0YXJ0LFxuICBcdGdldFN0eWxlOiBwcm90b3R5cGVfZ2V0U3R5bGUsXG4gIFx0c2V0U3R5bGU6IHNldFN0eWxlLFxuICBcdGFuaW1hdGVTdHlsZTogX2FuaW1hdGVTdHlsZSxcbiAgXHRwcm9jZXNzUGFyYW1zOiBwcm9jZXNzUGFyYW1zXG4gIH07XG5cbiAgdmFyIF9UcmFuc2l0aW9uID0gVHJhbnNpdGlvbjtcblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfcmVuZGVyID0gRWxlbWVudCRyZW5kZXI7XG5cbiAgdmFyIHVwZGF0ZUNzcywgdXBkYXRlU2NyaXB0O1xuXG4gIHVwZGF0ZUNzcyA9IGZ1bmN0aW9uICgpIHtcbiAgXHR2YXIgbm9kZSA9IHRoaXMubm9kZSxcbiAgXHQgICAgY29udGVudCA9IHRoaXMuZnJhZ21lbnQudG9TdHJpbmcoZmFsc2UpO1xuXG4gIFx0Ly8gSUU4IGhhcyBubyBzdHlsZVNoZWV0IHVubGVzcyB0aGVyZSdzIGEgdHlwZSB0ZXh0L2Nzc1xuICBcdGlmICh3aW5kb3cgJiYgd2luZG93LmFwcGVhcnNUb0JlSUVMZXNzRXF1YWw4KSB7XG4gIFx0XHRub2RlLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gIFx0fVxuXG4gIFx0aWYgKG5vZGUuc3R5bGVTaGVldCkge1xuICBcdFx0bm9kZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjb250ZW50O1xuICBcdH0gZWxzZSB7XG5cbiAgXHRcdHdoaWxlIChub2RlLmhhc0NoaWxkTm9kZXMoKSkge1xuICBcdFx0XHRub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG4gIFx0XHR9XG5cbiAgXHRcdG5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29udGVudCkpO1xuICBcdH1cbiAgfTtcblxuICB1cGRhdGVTY3JpcHQgPSBmdW5jdGlvbiAoKSB7XG4gIFx0aWYgKCF0aGlzLm5vZGUudHlwZSB8fCB0aGlzLm5vZGUudHlwZSA9PT0gXCJ0ZXh0L2phdmFzY3JpcHRcIikge1xuICBcdFx0d2FybklmRGVidWcoXCJTY3JpcHQgdGFnIHdhcyB1cGRhdGVkLiBUaGlzIGRvZXMgbm90IGNhdXNlIHRoZSBjb2RlIHRvIGJlIHJlLWV2YWx1YXRlZCFcIiwgeyByYWN0aXZlOiB0aGlzLnJvb3QgfSk7XG4gIFx0XHQvLyBBcyBpdCBoYXBwZW5zLCB3ZSBBUkUgaW4gYSBwb3NpdGlvbiB0byByZS1ldmFsdWF0ZSB0aGUgY29kZSBpZiB3ZSB3YW50ZWRcbiAgXHRcdC8vIHRvIC0gd2UgY291bGQgZXZhbCgpIGl0LCBvciBpbnNlcnQgaXQgaW50byBhIGZyZXNoICh0ZW1wb3JhcnkpIHNjcmlwdCB0YWcuXG4gIFx0XHQvLyBCdXQgdGhpcyB3b3VsZCBiZSBhIHRlcnJpYmxlIGlkZWEgd2l0aCB1bnByZWRpY3RhYmxlIHJlc3VsdHMsIHNvIGxldCdzIG5vdC5cbiAgXHR9XG5cbiAgXHR0aGlzLm5vZGUudGV4dCA9IHRoaXMuZnJhZ21lbnQudG9TdHJpbmcoZmFsc2UpO1xuICB9O1xuICBmdW5jdGlvbiBFbGVtZW50JHJlbmRlcigpIHtcbiAgXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0dmFyIHJvb3QgPSB0aGlzLnJvb3QsXG4gIFx0ICAgIG5hbWVzcGFjZSxcbiAgXHQgICAgbm9kZSxcbiAgXHQgICAgdHJhbnNpdGlvbjtcblxuICBcdG5hbWVzcGFjZSA9IGdldE5hbWVzcGFjZSh0aGlzKTtcbiAgXHRub2RlID0gdGhpcy5ub2RlID0gY3JlYXRlRWxlbWVudCh0aGlzLm5hbWUsIG5hbWVzcGFjZSk7XG5cbiAgXHQvLyBJcyB0aGlzIGEgdG9wLWxldmVsIG5vZGUgb2YgYSBjb21wb25lbnQ/IElmIHNvLCB3ZSBtYXkgbmVlZCB0byBhZGRcbiAgXHQvLyBhIGRhdGEtcmFjdGl2ZS1jc3MgYXR0cmlidXRlLCBmb3IgQ1NTIGVuY2Fwc3VsYXRpb25cbiAgXHRpZiAodGhpcy5wYXJlbnRGcmFnbWVudC5jc3NJZHMpIHtcbiAgXHRcdHRoaXMubm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJhY3RpdmUtY3NzXCIsIHRoaXMucGFyZW50RnJhZ21lbnQuY3NzSWRzLm1hcChmdW5jdGlvbiAoeCkge1xuICBcdFx0XHRyZXR1cm4gXCJ7XCIgKyB4ICsgXCJ9XCI7XG4gIFx0XHR9KS5qb2luKFwiIFwiKSk7XG4gIFx0fVxuXG4gIFx0Ly8gQWRkIF9yYWN0aXZlIHByb3BlcnR5IHRvIHRoZSBub2RlIC0gd2UgdXNlIHRoaXMgb2JqZWN0IHRvIHN0b3JlIHN0dWZmXG4gIFx0Ly8gcmVsYXRlZCB0byBwcm94eSBldmVudHMsIHR3by13YXkgYmluZGluZ3MgZXRjXG4gIFx0ZGVmaW5lUHJvcGVydHkodGhpcy5ub2RlLCBcIl9yYWN0aXZlXCIsIHtcbiAgXHRcdHZhbHVlOiB7XG4gIFx0XHRcdHByb3h5OiB0aGlzLFxuICBcdFx0XHRrZXlwYXRoOiBnZXRJbm5lckNvbnRleHQodGhpcy5wYXJlbnRGcmFnbWVudCksXG4gIFx0XHRcdGV2ZW50czogY3JlYXRlKG51bGwpLFxuICBcdFx0XHRyb290OiByb290XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgXHQvLyBSZW5kZXIgYXR0cmlidXRlc1xuICBcdHRoaXMuYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gIFx0XHRyZXR1cm4gYS5yZW5kZXIobm9kZSk7XG4gIFx0fSk7XG4gIFx0dGhpcy5jb25kaXRpb25hbEF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbiAoYSkge1xuICBcdFx0cmV0dXJuIGEucmVuZGVyKG5vZGUpO1xuICBcdH0pO1xuXG4gIFx0Ly8gUmVuZGVyIGNoaWxkcmVuXG4gIFx0aWYgKHRoaXMuZnJhZ21lbnQpIHtcbiAgXHRcdC8vIFNwZWNpYWwgY2FzZSAtIDxzY3JpcHQ+IGVsZW1lbnRcbiAgXHRcdGlmICh0aGlzLm5hbWUgPT09IFwic2NyaXB0XCIpIHtcbiAgXHRcdFx0dGhpcy5idWJibGUgPSB1cGRhdGVTY3JpcHQ7XG4gIFx0XHRcdHRoaXMubm9kZS50ZXh0ID0gdGhpcy5mcmFnbWVudC50b1N0cmluZyhmYWxzZSk7IC8vIGJ5cGFzcyB3YXJuaW5nIGluaXRpYWxseVxuICBcdFx0XHR0aGlzLmZyYWdtZW50LnVucmVuZGVyID0gbm9vcDsgLy8gVE9ETyB0aGlzIGlzIGEga2x1ZGdlXG4gIFx0XHR9XG5cbiAgXHRcdC8vIFNwZWNpYWwgY2FzZSAtIDxzdHlsZT4gZWxlbWVudFxuICBcdFx0ZWxzZSBpZiAodGhpcy5uYW1lID09PSBcInN0eWxlXCIpIHtcbiAgXHRcdFx0dGhpcy5idWJibGUgPSB1cGRhdGVDc3M7XG4gIFx0XHRcdHRoaXMuYnViYmxlKCk7XG4gIFx0XHRcdHRoaXMuZnJhZ21lbnQudW5yZW5kZXIgPSBub29wO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBTcGVjaWFsIGNhc2UgLSBjb250ZW50ZWRpdGFibGVcbiAgXHRcdGVsc2UgaWYgKHRoaXMuYmluZGluZyAmJiB0aGlzLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSkge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50LnVucmVuZGVyID0gbm9vcDtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aGlzLmZyYWdtZW50LnJlbmRlcigpKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHQvLyBkZWFsIHdpdGggdHdvLXdheSBiaW5kaW5nc1xuICBcdGlmICh0aGlzLmJpbmRpbmcpIHtcbiAgXHRcdHRoaXMuYmluZGluZy5yZW5kZXIoKTtcbiAgXHRcdHRoaXMubm9kZS5fcmFjdGl2ZS5iaW5kaW5nID0gdGhpcy5iaW5kaW5nO1xuICBcdH1cblxuICBcdC8vIEFkZCBwcm94eSBldmVudCBoYW5kbGVyc1xuICBcdGlmICh0aGlzLmV2ZW50SGFuZGxlcnMpIHtcbiAgXHRcdHRoaXMuZXZlbnRIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoKSB7XG4gIFx0XHRcdHJldHVybiBoLnJlbmRlcigpO1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJvcHRpb25cIikge1xuICBcdFx0cHJvY2Vzc09wdGlvbih0aGlzKTtcbiAgXHR9XG5cbiAgXHQvLyBTcGVjaWFsIGNhc2VzXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJpbWdcIikge1xuICBcdFx0Ly8gaWYgdGhpcyBpcyBhbiA8aW1nPiwgYW5kIHdlJ3JlIGluIGEgY3JhcCBicm93c2VyLCB3ZSBtYXlcbiAgXHRcdC8vIG5lZWQgdG8gcHJldmVudCBpdCBmcm9tIG92ZXJyaWRpbmcgd2lkdGggYW5kIGhlaWdodCB3aGVuXG4gIFx0XHQvLyBpdCBsb2FkcyB0aGUgc3JjXG4gIFx0XHRzcGVjaWFsX2ltZ19fcmVuZGVyKHRoaXMpO1xuICBcdH0gZWxzZSBpZiAodGhpcy5uYW1lID09PSBcImZvcm1cIikge1xuICBcdFx0Ly8gZm9ybXMgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZWlyIGJpbmRpbmdzLCBpbiBjYXNlIG9mIHJlc2V0XG4gIFx0XHRmb3JtX19yZW5kZXIodGhpcyk7XG4gIFx0fSBlbHNlIGlmICh0aGlzLm5hbWUgPT09IFwiaW5wdXRcIiB8fCB0aGlzLm5hbWUgPT09IFwidGV4dGFyZWFcIikge1xuICBcdFx0Ly8gaW5wdXRzIGFuZCB0ZXh0YXJlYXMgc2hvdWxkIHN0b3JlIHRoZWlyIGluaXRpYWwgdmFsdWUgYXNcbiAgXHRcdC8vIGBkZWZhdWx0VmFsdWVgIGluIGNhc2Ugb2YgcmVzZXRcbiAgXHRcdHRoaXMubm9kZS5kZWZhdWx0VmFsdWUgPSB0aGlzLm5vZGUudmFsdWU7XG4gIFx0fSBlbHNlIGlmICh0aGlzLm5hbWUgPT09IFwib3B0aW9uXCIpIHtcbiAgXHRcdC8vIHNpbWlsYXJseSBmb3Igb3B0aW9uIG5vZGVzXG4gIFx0XHR0aGlzLm5vZGUuZGVmYXVsdFNlbGVjdGVkID0gdGhpcy5ub2RlLnNlbGVjdGVkO1xuICBcdH1cblxuICBcdC8vIGFwcGx5IGRlY29yYXRvcihzKVxuICBcdGlmICh0aGlzLmRlY29yYXRvciAmJiB0aGlzLmRlY29yYXRvci5mbikge1xuICBcdFx0Z2xvYmFsX3J1bmxvb3Auc2NoZWR1bGVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0aWYgKCFfdGhpcy5kZWNvcmF0b3IudG9ybmRvd24pIHtcbiAgXHRcdFx0XHRfdGhpcy5kZWNvcmF0b3IuaW5pdCgpO1xuICBcdFx0XHR9XG4gIFx0XHR9LCB0cnVlKTtcbiAgXHR9XG5cbiAgXHQvLyB0cmlnZ2VyIGludHJvIHRyYW5zaXRpb25cbiAgXHRpZiAocm9vdC50cmFuc2l0aW9uc0VuYWJsZWQgJiYgdGhpcy5pbnRybykge1xuICBcdFx0dHJhbnNpdGlvbiA9IG5ldyBfVHJhbnNpdGlvbih0aGlzLCB0aGlzLmludHJvLCB0cnVlKTtcbiAgXHRcdGdsb2JhbF9ydW5sb29wLnJlZ2lzdGVyVHJhbnNpdGlvbih0cmFuc2l0aW9uKTtcbiAgXHRcdGdsb2JhbF9ydW5sb29wLnNjaGVkdWxlVGFzayhmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHJldHVybiB0cmFuc2l0aW9uLnN0YXJ0KCk7XG4gIFx0XHR9LCB0cnVlKTtcblxuICBcdFx0dGhpcy50cmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5ub2RlLmF1dG9mb2N1cykge1xuICBcdFx0Ly8gU3BlY2lhbCBjYXNlLiBTb21lIGJyb3dzZXJzICgqY291Z2gqIEZpcmVmaXggKmNvdWdoKikgaGF2ZSBhIHByb2JsZW1cbiAgXHRcdC8vIHdpdGggZHluYW1pY2FsbHktZ2VuZXJhdGVkIGVsZW1lbnRzIGhhdmluZyBhdXRvZm9jdXMsIGFuZCB0aGV5IHdvbid0XG4gIFx0XHQvLyBhbGxvdyB5b3UgdG8gcHJvZ3JhbW1hdGljYWxseSBmb2N1cyB0aGUgZWxlbWVudCB1bnRpbCBpdCdzIGluIHRoZSBET01cbiAgXHRcdGdsb2JhbF9ydW5sb29wLnNjaGVkdWxlVGFzayhmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHJldHVybiBfdGhpcy5ub2RlLmZvY3VzKCk7XG4gIFx0XHR9LCB0cnVlKTtcbiAgXHR9XG5cbiAgXHR1cGRhdGVMaXZlUXVlcmllcyh0aGlzKTtcbiAgXHRyZXR1cm4gdGhpcy5ub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TmFtZXNwYWNlKGVsZW1lbnQpIHtcbiAgXHR2YXIgbmFtZXNwYWNlLCB4bWxucywgcGFyZW50O1xuXG4gIFx0Ly8gVXNlIHNwZWNpZmllZCBuYW1lc3BhY2UuLi5cbiAgXHRpZiAoeG1sbnMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInhtbG5zXCIpKSB7XG4gIFx0XHRuYW1lc3BhY2UgPSB4bWxucztcbiAgXHR9XG5cbiAgXHQvLyAuLi5vciBTVkcgbmFtZXNwYWNlLCBpZiB0aGlzIGlzIGFuIDxzdmc+IGVsZW1lbnRcbiAgXHRlbHNlIGlmIChlbGVtZW50Lm5hbWUgPT09IFwic3ZnXCIpIHtcbiAgXHRcdG5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuc3ZnO1xuICBcdH0gZWxzZSBpZiAocGFyZW50ID0gZWxlbWVudC5wYXJlbnQpIHtcbiAgXHRcdC8vIC4uLm9yIEhUTUwsIGlmIHRoZSBwYXJlbnQgaXMgYSA8Zm9yZWlnbk9iamVjdD5cbiAgXHRcdGlmIChwYXJlbnQubmFtZSA9PT0gXCJmb3JlaWduT2JqZWN0XCIpIHtcbiAgXHRcdFx0bmFtZXNwYWNlID0gbmFtZXNwYWNlcy5odG1sO1xuICBcdFx0fVxuXG4gIFx0XHQvLyAuLi5vciBpbmhlcml0IGZyb20gdGhlIHBhcmVudCBub2RlXG4gIFx0XHRlbHNlIHtcbiAgXHRcdFx0bmFtZXNwYWNlID0gcGFyZW50Lm5vZGUubmFtZXNwYWNlVVJJO1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHRuYW1lc3BhY2UgPSBlbGVtZW50LnJvb3QuZWwubmFtZXNwYWNlVVJJO1xuICBcdH1cblxuICBcdHJldHVybiBuYW1lc3BhY2U7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzT3B0aW9uKG9wdGlvbikge1xuICBcdHZhciBvcHRpb25WYWx1ZSwgc2VsZWN0VmFsdWUsIGk7XG5cbiAgXHRpZiAoIW9wdGlvbi5zZWxlY3QpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRzZWxlY3RWYWx1ZSA9IG9wdGlvbi5zZWxlY3QuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gIFx0aWYgKHNlbGVjdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRvcHRpb25WYWx1ZSA9IG9wdGlvbi5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICBcdGlmIChvcHRpb24uc2VsZWN0Lm5vZGUubXVsdGlwbGUgJiYgaXNBcnJheShzZWxlY3RWYWx1ZSkpIHtcbiAgXHRcdGkgPSBzZWxlY3RWYWx1ZS5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdGlmIChvcHRpb25WYWx1ZSA9PSBzZWxlY3RWYWx1ZVtpXSkge1xuICBcdFx0XHRcdG9wdGlvbi5ub2RlLnNlbGVjdGVkID0gdHJ1ZTtcbiAgXHRcdFx0XHRicmVhaztcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHRvcHRpb24ubm9kZS5zZWxlY3RlZCA9IG9wdGlvblZhbHVlID09IHNlbGVjdFZhbHVlO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpdmVRdWVyaWVzKGVsZW1lbnQpIHtcbiAgXHR2YXIgaW5zdGFuY2UsIGxpdmVRdWVyaWVzLCBpLCBzZWxlY3RvciwgcXVlcnk7XG5cbiAgXHQvLyBEb2VzIHRoaXMgbmVlZCB0byBiZSBhZGRlZCB0byBhbnkgbGl2ZSBxdWVyaWVzP1xuICBcdGluc3RhbmNlID0gZWxlbWVudC5yb290O1xuXG4gIFx0ZG8ge1xuICBcdFx0bGl2ZVF1ZXJpZXMgPSBpbnN0YW5jZS5fbGl2ZVF1ZXJpZXM7XG5cbiAgXHRcdGkgPSBsaXZlUXVlcmllcy5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdHNlbGVjdG9yID0gbGl2ZVF1ZXJpZXNbaV07XG4gIFx0XHRcdHF1ZXJ5ID0gbGl2ZVF1ZXJpZXNbXCJfXCIgKyBzZWxlY3Rvcl07XG5cbiAgXHRcdFx0aWYgKHF1ZXJ5Ll90ZXN0KGVsZW1lbnQpKSB7XG4gIFx0XHRcdFx0Ly8ga2VlcCByZWdpc3RlciBvZiBhcHBsaWNhYmxlIHNlbGVjdG9ycywgZm9yIHdoZW4gd2UgdGVhcmRvd25cbiAgXHRcdFx0XHQoZWxlbWVudC5saXZlUXVlcmllcyB8fCAoZWxlbWVudC5saXZlUXVlcmllcyA9IFtdKSkucHVzaChxdWVyeSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9IHdoaWxlIChpbnN0YW5jZSA9IGluc3RhbmNlLnBhcmVudCk7XG4gIH1cblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfdG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIFx0dmFyIHN0ciwgZXNjYXBlO1xuXG4gIFx0aWYgKHRoaXMudGVtcGxhdGUueSkge1xuICBcdFx0Ly8gRE9DVFlQRSBkZWNsYXJhdGlvblxuICBcdFx0cmV0dXJuIFwiPCFET0NUWVBFXCIgKyB0aGlzLnRlbXBsYXRlLmRkICsgXCI+XCI7XG4gIFx0fVxuXG4gIFx0c3RyID0gXCI8XCIgKyB0aGlzLnRlbXBsYXRlLmU7XG5cbiAgXHRzdHIgKz0gdGhpcy5hdHRyaWJ1dGVzLm1hcChzdHJpbmdpZnlBdHRyaWJ1dGUpLmpvaW4oXCJcIikgKyB0aGlzLmNvbmRpdGlvbmFsQXR0cmlidXRlcy5tYXAoc3RyaW5naWZ5QXR0cmlidXRlKS5qb2luKFwiXCIpO1xuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gc2VsZWN0ZWQgb3B0aW9uc1xuICBcdGlmICh0aGlzLm5hbWUgPT09IFwib3B0aW9uXCIgJiYgb3B0aW9uSXNTZWxlY3RlZCh0aGlzKSkge1xuICBcdFx0c3RyICs9IFwiIHNlbGVjdGVkXCI7XG4gIFx0fVxuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gdHdvLXdheSByYWRpbyBuYW1lIGJpbmRpbmdzXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJpbnB1dFwiICYmIGlucHV0SXNDaGVja2VkUmFkaW8odGhpcykpIHtcbiAgXHRcdHN0ciArPSBcIiBjaGVja2VkXCI7XG4gIFx0fVxuXG4gIFx0c3RyICs9IFwiPlwiO1xuXG4gIFx0Ly8gU3BlY2lhbCBjYXNlIC0gdGV4dGFyZWFcbiAgXHRpZiAodGhpcy5uYW1lID09PSBcInRleHRhcmVhXCIgJiYgdGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRzdHIgKz0gZXNjYXBlSHRtbCh0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKTtcbiAgXHR9XG5cbiAgXHQvLyBTcGVjaWFsIGNhc2UgLSBjb250ZW50ZWRpdGFibGVcbiAgXHRlbHNlIGlmICh0aGlzLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRzdHIgKz0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSB8fCBcIlwiO1xuICBcdH1cblxuICBcdGlmICh0aGlzLmZyYWdtZW50KSB7XG4gIFx0XHRlc2NhcGUgPSB0aGlzLm5hbWUgIT09IFwic2NyaXB0XCIgJiYgdGhpcy5uYW1lICE9PSBcInN0eWxlXCI7XG4gIFx0XHRzdHIgKz0gdGhpcy5mcmFnbWVudC50b1N0cmluZyhlc2NhcGUpO1xuICBcdH1cblxuICBcdC8vIGFkZCBhIGNsb3NpbmcgdGFnIGlmIHRoaXMgaXNuJ3QgYSB2b2lkIGVsZW1lbnRcbiAgXHRpZiAoIXZvaWRFbGVtZW50TmFtZXMudGVzdCh0aGlzLnRlbXBsYXRlLmUpKSB7XG4gIFx0XHRzdHIgKz0gXCI8L1wiICsgdGhpcy50ZW1wbGF0ZS5lICsgXCI+XCI7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIHN0cjtcbiAgfTtcblxuICBmdW5jdGlvbiBvcHRpb25Jc1NlbGVjdGVkKGVsZW1lbnQpIHtcbiAgXHR2YXIgb3B0aW9uVmFsdWUsIHNlbGVjdFZhbHVlLCBpO1xuXG4gIFx0b3B0aW9uVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpO1xuXG4gIFx0aWYgKG9wdGlvblZhbHVlID09PSB1bmRlZmluZWQgfHwgIWVsZW1lbnQuc2VsZWN0KSB7XG4gIFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0fVxuXG4gIFx0c2VsZWN0VmFsdWUgPSBlbGVtZW50LnNlbGVjdC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICBcdGlmIChzZWxlY3RWYWx1ZSA9PSBvcHRpb25WYWx1ZSkge1xuICBcdFx0cmV0dXJuIHRydWU7XG4gIFx0fVxuXG4gIFx0aWYgKGVsZW1lbnQuc2VsZWN0LmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpICYmIGlzQXJyYXkoc2VsZWN0VmFsdWUpKSB7XG4gIFx0XHRpID0gc2VsZWN0VmFsdWUubGVuZ3RoO1xuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRpZiAoc2VsZWN0VmFsdWVbaV0gPT0gb3B0aW9uVmFsdWUpIHtcbiAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlucHV0SXNDaGVja2VkUmFkaW8oZWxlbWVudCkge1xuICBcdHZhciBhdHRyaWJ1dGVzLCB0eXBlQXR0cmlidXRlLCB2YWx1ZUF0dHJpYnV0ZSwgbmFtZUF0dHJpYnV0ZTtcblxuICBcdGF0dHJpYnV0ZXMgPSBlbGVtZW50LmF0dHJpYnV0ZXM7XG5cbiAgXHR0eXBlQXR0cmlidXRlID0gYXR0cmlidXRlcy50eXBlO1xuICBcdHZhbHVlQXR0cmlidXRlID0gYXR0cmlidXRlcy52YWx1ZTtcbiAgXHRuYW1lQXR0cmlidXRlID0gYXR0cmlidXRlcy5uYW1lO1xuXG4gIFx0aWYgKCF0eXBlQXR0cmlidXRlIHx8IHR5cGVBdHRyaWJ1dGUudmFsdWUgIT09IFwicmFkaW9cIiB8fCAhdmFsdWVBdHRyaWJ1dGUgfHwgIW5hbWVBdHRyaWJ1dGUuaW50ZXJwb2xhdG9yKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0aWYgKHZhbHVlQXR0cmlidXRlLnZhbHVlID09PSBuYW1lQXR0cmlidXRlLmludGVycG9sYXRvci52YWx1ZSkge1xuICBcdFx0cmV0dXJuIHRydWU7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gc3RyaW5naWZ5QXR0cmlidXRlKGF0dHJpYnV0ZSkge1xuICBcdHZhciBzdHIgPSBhdHRyaWJ1dGUudG9TdHJpbmcoKTtcbiAgXHRyZXR1cm4gc3RyID8gXCIgXCIgKyBzdHIgOiBcIlwiO1xuICB9XG5cbiAgdmFyIEVsZW1lbnRfcHJvdG90eXBlX3VuYmluZCA9IEVsZW1lbnQkdW5iaW5kO1xuICBmdW5jdGlvbiBFbGVtZW50JHVuYmluZCgpIHtcbiAgXHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0dGhpcy5mcmFnbWVudC51bmJpbmQoKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5iaW5kaW5nKSB7XG4gIFx0XHR0aGlzLmJpbmRpbmcudW5iaW5kKCk7XG4gIFx0fVxuXG4gIFx0aWYgKHRoaXMuZXZlbnRIYW5kbGVycykge1xuICBcdFx0dGhpcy5ldmVudEhhbmRsZXJzLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcbiAgXHR9XG5cbiAgXHQvLyBTcGVjaWFsIGNhc2UgLSA8b3B0aW9uPlxuICBcdGlmICh0aGlzLm5hbWUgPT09IFwib3B0aW9uXCIpIHtcbiAgXHRcdHNwZWNpYWxfb3B0aW9uX191bmJpbmQodGhpcyk7XG4gIFx0fVxuXG4gIFx0dGhpcy5hdHRyaWJ1dGVzLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcbiAgXHR0aGlzLmNvbmRpdGlvbmFsQXR0cmlidXRlcy5mb3JFYWNoKG1ldGhvZENhbGxlcnNfX3VuYmluZCk7XG4gIH1cblxuICB2YXIgRWxlbWVudF9wcm90b3R5cGVfdW5yZW5kZXIgPSBFbGVtZW50JHVucmVuZGVyO1xuXG4gIGZ1bmN0aW9uIEVsZW1lbnQkdW5yZW5kZXIoc2hvdWxkRGVzdHJveSkge1xuICBcdHZhciBiaW5kaW5nLCBiaW5kaW5ncywgdHJhbnNpdGlvbjtcblxuICBcdGlmICh0cmFuc2l0aW9uID0gdGhpcy50cmFuc2l0aW9uKSB7XG4gIFx0XHR0cmFuc2l0aW9uLmNvbXBsZXRlKCk7XG4gIFx0fVxuXG4gIFx0Ly8gRGV0YWNoIGFzIHNvb24gYXMgd2UgY2FuXG4gIFx0aWYgKHRoaXMubmFtZSA9PT0gXCJvcHRpb25cIikge1xuICBcdFx0Ly8gPG9wdGlvbj4gZWxlbWVudHMgZGV0YWNoIGltbWVkaWF0ZWx5LCBzbyB0aGF0XG4gIFx0XHQvLyB0aGVpciBwYXJlbnQgPHNlbGVjdD4gZWxlbWVudCBzeW5jcyBjb3JyZWN0bHksIGFuZFxuICBcdFx0Ly8gc2luY2Ugb3B0aW9uIGVsZW1lbnRzIGNhbid0IGhhdmUgdHJhbnNpdGlvbnMgYW55d2F5XG4gIFx0XHR0aGlzLmRldGFjaCgpO1xuICBcdH0gZWxzZSBpZiAoc2hvdWxkRGVzdHJveSkge1xuICBcdFx0Z2xvYmFsX3J1bmxvb3AuZGV0YWNoV2hlblJlYWR5KHRoaXMpO1xuICBcdH1cblxuICBcdC8vIENoaWxkcmVuIGZpcnN0LiB0aGF0IHdheSwgYW55IHRyYW5zaXRpb25zIG9uIGNoaWxkIGVsZW1lbnRzIHdpbGwgYmVcbiAgXHQvLyBoYW5kbGVkIGJ5IHRoZSBjdXJyZW50IHRyYW5zaXRpb25NYW5hZ2VyXG4gIFx0aWYgKHRoaXMuZnJhZ21lbnQpIHtcbiAgXHRcdHRoaXMuZnJhZ21lbnQudW5yZW5kZXIoZmFsc2UpO1xuICBcdH1cblxuICBcdGlmIChiaW5kaW5nID0gdGhpcy5iaW5kaW5nKSB7XG4gIFx0XHR0aGlzLmJpbmRpbmcudW5yZW5kZXIoKTtcblxuICBcdFx0dGhpcy5ub2RlLl9yYWN0aXZlLmJpbmRpbmcgPSBudWxsO1xuICBcdFx0YmluZGluZ3MgPSB0aGlzLnJvb3QuX3R3b3dheUJpbmRpbmdzW2JpbmRpbmcua2V5cGF0aC5zdHJdO1xuICBcdFx0YmluZGluZ3Muc3BsaWNlKGJpbmRpbmdzLmluZGV4T2YoYmluZGluZyksIDEpO1xuICBcdH1cblxuICBcdC8vIFJlbW92ZSBldmVudCBoYW5kbGVyc1xuICBcdGlmICh0aGlzLmV2ZW50SGFuZGxlcnMpIHtcbiAgXHRcdHRoaXMuZXZlbnRIYW5kbGVycy5mb3JFYWNoKG1ldGhvZENhbGxlcnNfX3VucmVuZGVyKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5kZWNvcmF0b3IpIHtcbiAgXHRcdGdsb2JhbF9ydW5sb29wLnJlZ2lzdGVyRGVjb3JhdG9yKHRoaXMuZGVjb3JhdG9yKTtcbiAgXHR9XG5cbiAgXHQvLyB0cmlnZ2VyIG91dHJvIHRyYW5zaXRpb24gaWYgbmVjZXNzYXJ5XG4gIFx0aWYgKHRoaXMucm9vdC50cmFuc2l0aW9uc0VuYWJsZWQgJiYgdGhpcy5vdXRybykge1xuICBcdFx0dHJhbnNpdGlvbiA9IG5ldyBfVHJhbnNpdGlvbih0aGlzLCB0aGlzLm91dHJvLCBmYWxzZSk7XG4gIFx0XHRnbG9iYWxfcnVubG9vcC5yZWdpc3RlclRyYW5zaXRpb24odHJhbnNpdGlvbik7XG4gIFx0XHRnbG9iYWxfcnVubG9vcC5zY2hlZHVsZVRhc2soZnVuY3Rpb24gKCkge1xuICBcdFx0XHRyZXR1cm4gdHJhbnNpdGlvbi5zdGFydCgpO1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0Ly8gUmVtb3ZlIHRoaXMgbm9kZSBmcm9tIGFueSBsaXZlIHF1ZXJpZXNcbiAgXHRpZiAodGhpcy5saXZlUXVlcmllcykge1xuICBcdFx0cmVtb3ZlRnJvbUxpdmVRdWVyaWVzKHRoaXMpO1xuICBcdH1cblxuICBcdGlmICh0aGlzLm5hbWUgPT09IFwiZm9ybVwiKSB7XG4gIFx0XHRmb3JtX191bnJlbmRlcih0aGlzKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVGcm9tTGl2ZVF1ZXJpZXMoZWxlbWVudCkge1xuICBcdHZhciBxdWVyeSwgc2VsZWN0b3IsIGk7XG5cbiAgXHRpID0gZWxlbWVudC5saXZlUXVlcmllcy5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0cXVlcnkgPSBlbGVtZW50LmxpdmVRdWVyaWVzW2ldO1xuICBcdFx0c2VsZWN0b3IgPSBxdWVyeS5zZWxlY3RvcjtcblxuICBcdFx0cXVlcnkuX3JlbW92ZShlbGVtZW50Lm5vZGUpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBFbGVtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHR0aGlzLmluaXQob3B0aW9ucyk7XG4gIH07XG5cbiAgRWxlbWVudC5wcm90b3R5cGUgPSB7XG4gIFx0YnViYmxlOiBFbGVtZW50X3Byb3RvdHlwZV9idWJibGUsXG4gIFx0ZGV0YWNoOiBFbGVtZW50X3Byb3RvdHlwZV9kZXRhY2gsXG4gIFx0ZmluZDogRWxlbWVudF9wcm90b3R5cGVfZmluZCxcbiAgXHRmaW5kQWxsOiBFbGVtZW50X3Byb3RvdHlwZV9maW5kQWxsLFxuICBcdGZpbmRBbGxDb21wb25lbnRzOiBFbGVtZW50X3Byb3RvdHlwZV9maW5kQWxsQ29tcG9uZW50cyxcbiAgXHRmaW5kQ29tcG9uZW50OiBFbGVtZW50X3Byb3RvdHlwZV9maW5kQ29tcG9uZW50LFxuICBcdGZpbmROZXh0Tm9kZTogRWxlbWVudF9wcm90b3R5cGVfZmluZE5leHROb2RlLFxuICBcdGZpcnN0Tm9kZTogRWxlbWVudF9wcm90b3R5cGVfZmlyc3ROb2RlLFxuICBcdGdldEF0dHJpYnV0ZTogZ2V0QXR0cmlidXRlLFxuICBcdGluaXQ6IEVsZW1lbnRfcHJvdG90eXBlX2luaXQsXG4gIFx0cmViaW5kOiBFbGVtZW50X3Byb3RvdHlwZV9yZWJpbmQsXG4gIFx0cmVuZGVyOiBFbGVtZW50X3Byb3RvdHlwZV9yZW5kZXIsXG4gIFx0dG9TdHJpbmc6IEVsZW1lbnRfcHJvdG90eXBlX3RvU3RyaW5nLFxuICBcdHVuYmluZDogRWxlbWVudF9wcm90b3R5cGVfdW5iaW5kLFxuICBcdHVucmVuZGVyOiBFbGVtZW50X3Byb3RvdHlwZV91bnJlbmRlclxuICB9O1xuXG4gIHZhciBfRWxlbWVudCA9IEVsZW1lbnQ7XG5cbiAgdmFyIGRlSW5kZW50X19lbXB0eSA9IC9eXFxzKiQvLFxuICAgICAgZGVJbmRlbnRfX2xlYWRpbmdXaGl0ZXNwYWNlID0gL15cXHMqLztcblxuICB2YXIgZGVJbmRlbnQgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIFx0dmFyIGxpbmVzLCBmaXJzdExpbmUsIGxhc3RMaW5lLCBtaW5JbmRlbnQ7XG5cbiAgXHRsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcblxuICBcdC8vIHJlbW92ZSBmaXJzdCBhbmQgbGFzdCBsaW5lLCBpZiB0aGV5IG9ubHkgY29udGFpbiB3aGl0ZXNwYWNlXG4gIFx0Zmlyc3RMaW5lID0gbGluZXNbMF07XG4gIFx0aWYgKGZpcnN0TGluZSAhPT0gdW5kZWZpbmVkICYmIGRlSW5kZW50X19lbXB0eS50ZXN0KGZpcnN0TGluZSkpIHtcbiAgXHRcdGxpbmVzLnNoaWZ0KCk7XG4gIFx0fVxuXG4gIFx0bGFzdExpbmUgPSBsYXN0SXRlbShsaW5lcyk7XG4gIFx0aWYgKGxhc3RMaW5lICE9PSB1bmRlZmluZWQgJiYgZGVJbmRlbnRfX2VtcHR5LnRlc3QobGFzdExpbmUpKSB7XG4gIFx0XHRsaW5lcy5wb3AoKTtcbiAgXHR9XG5cbiAgXHRtaW5JbmRlbnQgPSBsaW5lcy5yZWR1Y2UocmVkdWNlciwgbnVsbCk7XG5cbiAgXHRpZiAobWluSW5kZW50KSB7XG4gIFx0XHRzdHIgPSBsaW5lcy5tYXAoZnVuY3Rpb24gKGxpbmUpIHtcbiAgXHRcdFx0cmV0dXJuIGxpbmUucmVwbGFjZShtaW5JbmRlbnQsIFwiXCIpO1xuICBcdFx0fSkuam9pbihcIlxcblwiKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gc3RyO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlZHVjZXIocHJldmlvdXMsIGxpbmUpIHtcbiAgXHR2YXIgbGluZUluZGVudCA9IGRlSW5kZW50X19sZWFkaW5nV2hpdGVzcGFjZS5leGVjKGxpbmUpWzBdO1xuXG4gIFx0aWYgKHByZXZpb3VzID09PSBudWxsIHx8IGxpbmVJbmRlbnQubGVuZ3RoIDwgcHJldmlvdXMubGVuZ3RoKSB7XG4gIFx0XHRyZXR1cm4gbGluZUluZGVudDtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcHJldmlvdXM7XG4gIH1cblxuICB2YXIgUGFydGlhbF9nZXRQYXJ0aWFsVGVtcGxhdGUgPSBnZXRQYXJ0aWFsVGVtcGxhdGU7XG5cbiAgZnVuY3Rpb24gZ2V0UGFydGlhbFRlbXBsYXRlKHJhY3RpdmUsIG5hbWUsIHBhcmVudEZyYWdtZW50KSB7XG4gIFx0dmFyIHBhcnRpYWw7XG5cbiAgXHQvLyBJZiB0aGUgcGFydGlhbCBpbiBpbnN0YW5jZSBvciB2aWV3IGhlaXJhcmNoeSBpbnN0YW5jZXMsIGdyZWF0XG4gIFx0aWYgKHBhcnRpYWwgPSBnZXRQYXJ0aWFsRnJvbVJlZ2lzdHJ5KHJhY3RpdmUsIG5hbWUsIHBhcmVudEZyYWdtZW50IHx8IHt9KSkge1xuICBcdFx0cmV0dXJuIHBhcnRpYWw7XG4gIFx0fVxuXG4gIFx0Ly8gRG9lcyBpdCBleGlzdCBvbiB0aGUgcGFnZSBhcyBhIHNjcmlwdCB0YWc/XG4gIFx0cGFydGlhbCA9IHRlbXBsYXRlX3BhcnNlci5mcm9tSWQobmFtZSwgeyBub1Rocm93OiB0cnVlIH0pO1xuXG4gIFx0aWYgKHBhcnRpYWwpIHtcbiAgXHRcdC8vIGlzIHRoaXMgbmVjZXNzYXJ5P1xuICBcdFx0cGFydGlhbCA9IGRlSW5kZW50KHBhcnRpYWwpO1xuXG4gIFx0XHQvLyBwYXJzZSBhbmQgcmVnaXN0ZXIgdG8gdGhpcyByYWN0aXZlIGluc3RhbmNlXG4gIFx0XHR2YXIgcGFyc2VkID0gdGVtcGxhdGVfcGFyc2VyLnBhcnNlKHBhcnRpYWwsIHRlbXBsYXRlX3BhcnNlci5nZXRQYXJzZU9wdGlvbnMocmFjdGl2ZSkpO1xuXG4gIFx0XHQvLyByZWdpc3RlciAoYW5kIHJldHVybiBtYWluIHBhcnRpYWwgaWYgdGhlcmUgYXJlIG90aGVycyBpbiB0aGUgdGVtcGxhdGUpXG4gIFx0XHRyZXR1cm4gcmFjdGl2ZS5wYXJ0aWFsc1tuYW1lXSA9IHBhcnNlZC50O1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBhcnRpYWxGcm9tUmVnaXN0cnkocmFjdGl2ZSwgbmFtZSwgcGFyZW50RnJhZ21lbnQpIHtcbiAgXHR2YXIgZm4gPSB1bmRlZmluZWQsXG4gIFx0ICAgIHBhcnRpYWwgPSBmaW5kUGFyZW50UGFydGlhbChuYW1lLCBwYXJlbnRGcmFnbWVudC5vd25lcik7XG5cbiAgXHQvLyBpZiB0aGVyZSB3YXMgYW4gaW5zdGFuY2UgdXAtaGllcmFyY2h5LCBjb29sXG4gIFx0aWYgKHBhcnRpYWwpIHJldHVybiBwYXJ0aWFsO1xuXG4gIFx0Ly8gZmluZCBmaXJzdCBpbnN0YW5jZSBpbiB0aGUgcmFjdGl2ZSBvciB2aWV3IGhpZXJhcmNoeSB0aGF0IGhhcyB0aGlzIHBhcnRpYWxcbiAgXHR2YXIgaW5zdGFuY2UgPSBmaW5kSW5zdGFuY2UoXCJwYXJ0aWFsc1wiLCByYWN0aXZlLCBuYW1lKTtcblxuICBcdGlmICghaW5zdGFuY2UpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRwYXJ0aWFsID0gaW5zdGFuY2UucGFydGlhbHNbbmFtZV07XG5cbiAgXHQvLyBwYXJ0aWFsIGlzIGEgZnVuY3Rpb24/XG4gIFx0aWYgKHR5cGVvZiBwYXJ0aWFsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgXHRcdGZuID0gcGFydGlhbC5iaW5kKGluc3RhbmNlKTtcbiAgXHRcdGZuLmlzT3duZXIgPSBpbnN0YW5jZS5wYXJ0aWFscy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgXHRcdHBhcnRpYWwgPSBmbi5jYWxsKHJhY3RpdmUsIHRlbXBsYXRlX3BhcnNlcik7XG4gIFx0fVxuXG4gIFx0aWYgKCFwYXJ0aWFsICYmIHBhcnRpYWwgIT09IFwiXCIpIHtcbiAgXHRcdHdhcm5JZkRlYnVnKG5vUmVnaXN0cnlGdW5jdGlvblJldHVybiwgbmFtZSwgXCJwYXJ0aWFsXCIsIFwicGFydGlhbFwiLCB7IHJhY3RpdmU6IHJhY3RpdmUgfSk7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0Ly8gSWYgdGhpcyB3YXMgYWRkZWQgbWFudWFsbHkgdG8gdGhlIHJlZ2lzdHJ5LFxuICBcdC8vIGJ1dCBoYXNuJ3QgYmVlbiBwYXJzZWQsIHBhcnNlIGl0IG5vd1xuICBcdGlmICghdGVtcGxhdGVfcGFyc2VyLmlzUGFyc2VkKHBhcnRpYWwpKSB7XG5cbiAgXHRcdC8vIHVzZSB0aGUgcGFyc2VPcHRpb25zIG9mIHRoZSByYWN0aXZlIGluc3RhbmNlIG9uIHdoaWNoIGl0IHdhcyBmb3VuZFxuICBcdFx0dmFyIHBhcnNlZCA9IHRlbXBsYXRlX3BhcnNlci5wYXJzZShwYXJ0aWFsLCB0ZW1wbGF0ZV9wYXJzZXIuZ2V0UGFyc2VPcHRpb25zKGluc3RhbmNlKSk7XG5cbiAgXHRcdC8vIFBhcnRpYWxzIGNhbm5vdCBjb250YWluIG5lc3RlZCBwYXJ0aWFscyFcbiAgXHRcdC8vIFRPRE8gYWRkIGEgdGVzdCBmb3IgdGhpc1xuICBcdFx0aWYgKHBhcnNlZC5wKSB7XG4gIFx0XHRcdHdhcm5JZkRlYnVnKFwiUGFydGlhbHMgKHt7PiVzfX0pIGNhbm5vdCBjb250YWluIG5lc3RlZCBpbmxpbmUgcGFydGlhbHNcIiwgbmFtZSwgeyByYWN0aXZlOiByYWN0aXZlIH0pO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBpZiBmbiwgdXNlIGluc3RhbmNlIHRvIHN0b3JlIHJlc3VsdCwgb3RoZXJ3aXNlIG5lZWRzIHRvIGdvXG4gIFx0XHQvLyBpbiB0aGUgY29ycmVjdCBwb2ludCBpbiBwcm90b3R5cGUgY2hhaW4gb24gaW5zdGFuY2Ugb3IgY29uc3RydWN0b3JcbiAgXHRcdHZhciB0YXJnZXQgPSBmbiA/IGluc3RhbmNlIDogZmluZE93bmVyKGluc3RhbmNlLCBuYW1lKTtcblxuICBcdFx0Ly8gbWF5IGJlIGEgdGVtcGxhdGUgd2l0aCBwYXJ0aWFscywgd2hpY2ggbmVlZCB0byBiZSByZWdpc3RlcmVkIGFuZCBtYWluIHRlbXBsYXRlIGV4dHJhY3RlZFxuICBcdFx0dGFyZ2V0LnBhcnRpYWxzW25hbWVdID0gcGFydGlhbCA9IHBhcnNlZC50O1xuICBcdH1cblxuICBcdC8vIHN0b3JlIGZvciByZXNldFxuICBcdGlmIChmbikge1xuICBcdFx0cGFydGlhbC5fZm4gPSBmbjtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcGFydGlhbC52ID8gcGFydGlhbC50IDogcGFydGlhbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRPd25lcihyYWN0aXZlLCBrZXkpIHtcbiAgXHRyZXR1cm4gcmFjdGl2ZS5wYXJ0aWFscy5oYXNPd25Qcm9wZXJ0eShrZXkpID8gcmFjdGl2ZSA6IGZpbmRDb25zdHJ1Y3RvcihyYWN0aXZlLmNvbnN0cnVjdG9yLCBrZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZENvbnN0cnVjdG9yKGNvbnN0cnVjdG9yLCBrZXkpIHtcbiAgXHRpZiAoIWNvbnN0cnVjdG9yKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuICBcdHJldHVybiBjb25zdHJ1Y3Rvci5wYXJ0aWFscy5oYXNPd25Qcm9wZXJ0eShrZXkpID8gY29uc3RydWN0b3IgOiBmaW5kQ29uc3RydWN0b3IoY29uc3RydWN0b3IuX1BhcmVudCwga2V5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRQYXJlbnRQYXJ0aWFsKG5hbWUsIHBhcmVudCkge1xuICBcdGlmIChwYXJlbnQpIHtcbiAgXHRcdGlmIChwYXJlbnQudGVtcGxhdGUgJiYgcGFyZW50LnRlbXBsYXRlLnAgJiYgcGFyZW50LnRlbXBsYXRlLnBbbmFtZV0pIHtcbiAgXHRcdFx0cmV0dXJuIHBhcmVudC50ZW1wbGF0ZS5wW25hbWVdO1xuICBcdFx0fSBlbHNlIGlmIChwYXJlbnQucGFyZW50RnJhZ21lbnQgJiYgcGFyZW50LnBhcmVudEZyYWdtZW50Lm93bmVyKSB7XG4gIFx0XHRcdHJldHVybiBmaW5kUGFyZW50UGFydGlhbChuYW1lLCBwYXJlbnQucGFyZW50RnJhZ21lbnQub3duZXIpO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIHZhciBhcHBseUluZGVudCA9IGZ1bmN0aW9uIChzdHJpbmcsIGluZGVudCkge1xuICBcdHZhciBpbmRlbnRlZDtcblxuICBcdGlmICghaW5kZW50KSB7XG4gIFx0XHRyZXR1cm4gc3RyaW5nO1xuICBcdH1cblxuICBcdGluZGVudGVkID0gc3RyaW5nLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbiAobGluZSwgbm90Rmlyc3RMaW5lKSB7XG4gIFx0XHRyZXR1cm4gbm90Rmlyc3RMaW5lID8gaW5kZW50ICsgbGluZSA6IGxpbmU7XG4gIFx0fSkuam9pbihcIlxcblwiKTtcblxuICBcdHJldHVybiBpbmRlbnRlZDtcbiAgfTtcblxuICB2YXIgbWlzc2luZ1BhcnRpYWxNZXNzYWdlID0gXCJDb3VsZCBub3QgZmluZCB0ZW1wbGF0ZSBmb3IgcGFydGlhbCBcXFwiJXNcXFwiXCI7XG5cbiAgdmFyIFBhcnRpYWwgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHZhciBwYXJlbnRGcmFnbWVudCwgdGVtcGxhdGU7XG5cbiAgXHRwYXJlbnRGcmFnbWVudCA9IHRoaXMucGFyZW50RnJhZ21lbnQgPSBvcHRpb25zLnBhcmVudEZyYWdtZW50O1xuXG4gIFx0dGhpcy5yb290ID0gcGFyZW50RnJhZ21lbnQucm9vdDtcbiAgXHR0aGlzLnR5cGUgPSBQQVJUSUFMO1xuICBcdHRoaXMuaW5kZXggPSBvcHRpb25zLmluZGV4O1xuICBcdHRoaXMubmFtZSA9IG9wdGlvbnMudGVtcGxhdGUucjtcbiAgXHR0aGlzLnJlbmRlcmVkID0gZmFsc2U7XG5cbiAgXHR0aGlzLmZyYWdtZW50ID0gdGhpcy5mcmFnbWVudFRvUmVuZGVyID0gdGhpcy5mcmFnbWVudFRvVW5yZW5kZXIgPSBudWxsO1xuXG4gIFx0TXVzdGFjaGUuaW5pdCh0aGlzLCBvcHRpb25zKTtcblxuICBcdC8vIElmIHRoaXMgZGlkbid0IHJlc29sdmUsIGl0IG1vc3QgbGlrZWx5IG1lYW5zIHdlIGhhdmUgYSBuYW1lZCBwYXJ0aWFsXG4gIFx0Ly8gKGkuZS4gYHt7PmZvb319YCBtZWFucyAndXNlIHRoZSBmb28gcGFydGlhbCcsIG5vdCAndXNlIHRoZSBwYXJ0aWFsXG4gIFx0Ly8gd2hvc2UgbmFtZSBpcyB0aGUgdmFsdWUgb2YgYGZvb2AnKVxuICBcdGlmICghdGhpcy5rZXlwYXRoKSB7XG4gIFx0XHRpZiAodGVtcGxhdGUgPSBQYXJ0aWFsX2dldFBhcnRpYWxUZW1wbGF0ZSh0aGlzLnJvb3QsIHRoaXMubmFtZSwgcGFyZW50RnJhZ21lbnQpKSB7XG4gIFx0XHRcdHNoYXJlZF91bmJpbmQuY2FsbCh0aGlzKTsgLy8gcHJldmVudCBhbnkgZnVydGhlciBjaGFuZ2VzXG4gIFx0XHRcdHRoaXMuaXNOYW1lZCA9IHRydWU7XG4gIFx0XHRcdHRoaXMuc2V0VGVtcGxhdGUodGVtcGxhdGUpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0d2Fybk9uY2VJZkRlYnVnKG1pc3NpbmdQYXJ0aWFsTWVzc2FnZSwgdGhpcy5uYW1lKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH07XG5cbiAgUGFydGlhbC5wcm90b3R5cGUgPSB7XG4gIFx0YnViYmxlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLnBhcmVudEZyYWdtZW50LmJ1YmJsZSgpO1xuICBcdH0sXG5cbiAgXHRkZXRhY2g6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50LmRldGFjaCgpO1xuICBcdH0sXG5cbiAgXHRmaW5kOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50LmZpbmQoc2VsZWN0b3IpO1xuICBcdH0sXG5cbiAgXHRmaW5kQWxsOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHF1ZXJ5KSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC5maW5kQWxsKHNlbGVjdG9yLCBxdWVyeSk7XG4gIFx0fSxcblxuICBcdGZpbmRDb21wb25lbnQ6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmluZENvbXBvbmVudChzZWxlY3Rvcik7XG4gIFx0fSxcblxuICBcdGZpbmRBbGxDb21wb25lbnRzOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHF1ZXJ5KSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC5maW5kQWxsQ29tcG9uZW50cyhzZWxlY3RvciwgcXVlcnkpO1xuICBcdH0sXG5cbiAgXHRmaXJzdE5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50LmZpcnN0Tm9kZSgpO1xuICBcdH0sXG5cbiAgXHRmaW5kTmV4dE5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLnBhcmVudEZyYWdtZW50LmZpbmROZXh0Tm9kZSh0aGlzKTtcbiAgXHR9LFxuXG4gIFx0Z2V0UGFydGlhbE5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmICh0aGlzLmlzTmFtZWQgJiYgdGhpcy5uYW1lKSByZXR1cm4gdGhpcy5uYW1lO2Vsc2UgaWYgKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMubmFtZTtlbHNlIHJldHVybiB0aGlzLnZhbHVlO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZ2V0VmFsdWUoKTtcbiAgXHR9LFxuXG4gIFx0cmViaW5kOiBmdW5jdGlvbiAob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdFx0Ly8gbmFtZWQgcGFydGlhbHMgYXJlbid0IGJvdW5kLCBzbyBkb24ndCByZWJpbmRcbiAgXHRcdGlmICghdGhpcy5pc05hbWVkKSB7XG4gIFx0XHRcdE11c3RhY2hlX3JlYmluZC5jYWxsKHRoaXMsIG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodGhpcy5mcmFnbWVudCkge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50LnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIFx0XHR0aGlzLnVwZGF0ZSgpO1xuXG4gIFx0XHR0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgXHRcdHJldHVybiB0aGlzLmRvY0ZyYWc7XG4gIFx0fSxcblxuICBcdHJlc29sdmU6IE11c3RhY2hlLnJlc29sdmUsXG5cbiAgXHRzZXRWYWx1ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gIFx0XHR2YXIgdGVtcGxhdGU7XG5cbiAgXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlID09PSB0aGlzLnZhbHVlKSB7XG4gIFx0XHRcdC8vIG5vdGhpbmcgaGFzIGNoYW5nZWQsIHNvIG5vIHdvcmsgdG8gYmUgZG9uZVxuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gIFx0XHRcdHRlbXBsYXRlID0gUGFydGlhbF9nZXRQYXJ0aWFsVGVtcGxhdGUodGhpcy5yb290LCBcIlwiICsgdmFsdWUsIHRoaXMucGFyZW50RnJhZ21lbnQpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyB3ZSBtYXkgYmUgaGVyZSBpZiB3ZSBoYXZlIGEgcGFydGlhbCBsaWtlIGB7ez5mb299fWAgYW5kIGBmb29gIGlzIHRoZVxuICBcdFx0Ly8gbmFtZSBvZiBib3RoIGEgZGF0YSBwcm9wZXJ0eSAod2hvc2UgdmFsdWUgSVNOJ1QgdGhlIG5hbWUgb2YgYSBwYXJ0aWFsKVxuICBcdFx0Ly8gYW5kIGEgcGFydGlhbC4gSW4gdGhvc2UgY2FzZXMsIHRoaXMgYmVjb21lcyBhIG5hbWVkIHBhcnRpYWxcbiAgXHRcdGlmICghdGVtcGxhdGUgJiYgdGhpcy5uYW1lICYmICh0ZW1wbGF0ZSA9IFBhcnRpYWxfZ2V0UGFydGlhbFRlbXBsYXRlKHRoaXMucm9vdCwgdGhpcy5uYW1lLCB0aGlzLnBhcmVudEZyYWdtZW50KSkpIHtcbiAgXHRcdFx0c2hhcmVkX3VuYmluZC5jYWxsKHRoaXMpO1xuICBcdFx0XHR0aGlzLmlzTmFtZWQgPSB0cnVlO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIXRlbXBsYXRlKSB7XG4gIFx0XHRcdHdhcm5PbmNlSWZEZWJ1ZyhtaXNzaW5nUGFydGlhbE1lc3NhZ2UsIHRoaXMubmFtZSwgeyByYWN0aXZlOiB0aGlzLnJvb3QgfSk7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblxuICBcdFx0dGhpcy5zZXRUZW1wbGF0ZSh0ZW1wbGF0ZSB8fCBbXSk7XG5cbiAgXHRcdHRoaXMuYnViYmxlKCk7XG5cbiAgXHRcdGlmICh0aGlzLnJlbmRlcmVkKSB7XG4gIFx0XHRcdGdsb2JhbF9ydW5sb29wLmFkZFZpZXcodGhpcyk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHNldFRlbXBsYXRlOiBmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgXHRcdGlmICh0aGlzLmZyYWdtZW50KSB7XG4gIFx0XHRcdHRoaXMuZnJhZ21lbnQudW5iaW5kKCk7XG4gIFx0XHRcdGlmICh0aGlzLnJlbmRlcmVkKSB7XG4gIFx0XHRcdFx0dGhpcy5mcmFnbWVudFRvVW5yZW5kZXIgPSB0aGlzLmZyYWdtZW50O1xuICBcdFx0XHR9XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMuZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRcdHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgXHRcdFx0cm9vdDogdGhpcy5yb290LFxuICBcdFx0XHRvd25lcjogdGhpcyxcbiAgXHRcdFx0cEVsZW1lbnQ6IHRoaXMucGFyZW50RnJhZ21lbnQucEVsZW1lbnRcbiAgXHRcdH0pO1xuXG4gIFx0XHR0aGlzLmZyYWdtZW50VG9SZW5kZXIgPSB0aGlzLmZyYWdtZW50O1xuICBcdH0sXG5cbiAgXHR0b1N0cmluZzogZnVuY3Rpb24gKHRvU3RyaW5nKSB7XG4gIFx0XHR2YXIgc3RyaW5nLCBwcmV2aW91c0l0ZW0sIGxhc3RMaW5lLCBtYXRjaDtcblxuICBcdFx0c3RyaW5nID0gdGhpcy5mcmFnbWVudC50b1N0cmluZyh0b1N0cmluZyk7XG5cbiAgXHRcdHByZXZpb3VzSXRlbSA9IHRoaXMucGFyZW50RnJhZ21lbnQuaXRlbXNbdGhpcy5pbmRleCAtIDFdO1xuXG4gIFx0XHRpZiAoIXByZXZpb3VzSXRlbSB8fCBwcmV2aW91c0l0ZW0udHlwZSAhPT0gVEVYVCkge1xuICBcdFx0XHRyZXR1cm4gc3RyaW5nO1xuICBcdFx0fVxuXG4gIFx0XHRsYXN0TGluZSA9IHByZXZpb3VzSXRlbS50ZXh0LnNwbGl0KFwiXFxuXCIpLnBvcCgpO1xuXG4gIFx0XHRpZiAobWF0Y2ggPSAvXlxccyskLy5leGVjKGxhc3RMaW5lKSkge1xuICBcdFx0XHRyZXR1cm4gYXBwbHlJbmRlbnQoc3RyaW5nLCBtYXRjaFswXSk7XG4gIFx0XHR9XG5cbiAgXHRcdHJldHVybiBzdHJpbmc7XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLmlzTmFtZWQpIHtcbiAgXHRcdFx0Ly8gZHluYW1pYyBwYXJ0aWFsIC0gbmVlZCB0byB1bmJpbmQgc2VsZlxuICBcdFx0XHRzaGFyZWRfdW5iaW5kLmNhbGwodGhpcyk7XG4gIFx0XHR9XG5cbiAgXHRcdGlmICh0aGlzLmZyYWdtZW50KSB7XG4gIFx0XHRcdHRoaXMuZnJhZ21lbnQudW5iaW5kKCk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHVucmVuZGVyOiBmdW5jdGlvbiAoc2hvdWxkRGVzdHJveSkge1xuICBcdFx0aWYgKHRoaXMucmVuZGVyZWQpIHtcbiAgXHRcdFx0aWYgKHRoaXMuZnJhZ21lbnQpIHtcbiAgXHRcdFx0XHR0aGlzLmZyYWdtZW50LnVucmVuZGVyKHNob3VsZERlc3Ryb3kpO1xuICBcdFx0XHR9XG4gIFx0XHRcdHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgdGFyZ2V0LCBhbmNob3I7XG5cbiAgXHRcdGlmICh0aGlzLmZyYWdtZW50VG9VbnJlbmRlcikge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50VG9VbnJlbmRlci51bnJlbmRlcih0cnVlKTtcbiAgXHRcdFx0dGhpcy5mcmFnbWVudFRvVW5yZW5kZXIgPSBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodGhpcy5mcmFnbWVudFRvUmVuZGVyKSB7XG4gIFx0XHRcdHRoaXMuZG9jRnJhZy5hcHBlbmRDaGlsZCh0aGlzLmZyYWdtZW50VG9SZW5kZXIucmVuZGVyKCkpO1xuICBcdFx0XHR0aGlzLmZyYWdtZW50VG9SZW5kZXIgPSBudWxsO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodGhpcy5yZW5kZXJlZCkge1xuICBcdFx0XHR0YXJnZXQgPSB0aGlzLnBhcmVudEZyYWdtZW50LmdldE5vZGUoKTtcbiAgXHRcdFx0YW5jaG9yID0gdGhpcy5wYXJlbnRGcmFnbWVudC5maW5kTmV4dE5vZGUodGhpcyk7XG4gIFx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUodGhpcy5kb2NGcmFnLCBhbmNob3IpO1xuICBcdFx0fVxuICBcdH1cbiAgfTtcblxuICB2YXIgX1BhcnRpYWwgPSBQYXJ0aWFsO1xuXG4gIC8vIGZpbmRzIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgaW4gdGhlIHJlZ2lzdHJ5IG9yIHZpZXcgaGllcmFyY2h5IHJlZ2lzdHJpZXNcblxuICB2YXIgQ29tcG9uZW50X2dldENvbXBvbmVudCA9IGdldENvbXBvbmVudDtcbiAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50KHJhY3RpdmUsIG5hbWUpIHtcblxuICBcdHZhciBDb21wb25lbnQsXG4gIFx0ICAgIGluc3RhbmNlID0gZmluZEluc3RhbmNlKFwiY29tcG9uZW50c1wiLCByYWN0aXZlLCBuYW1lKTtcblxuICBcdGlmIChpbnN0YW5jZSkge1xuICBcdFx0Q29tcG9uZW50ID0gaW5zdGFuY2UuY29tcG9uZW50c1tuYW1lXTtcblxuICBcdFx0Ly8gYmVzdCB0ZXN0IHdlIGhhdmUgZm9yIG5vdCBSYWN0aXZlLmV4dGVuZFxuICBcdFx0aWYgKCFDb21wb25lbnQuX1BhcmVudCkge1xuICBcdFx0XHQvLyBmdW5jdGlvbiBvcHRpb24sIGV4ZWN1dGUgYW5kIHN0b3JlIGZvciByZXNldFxuICBcdFx0XHR2YXIgZm4gPSBDb21wb25lbnQuYmluZChpbnN0YW5jZSk7XG4gIFx0XHRcdGZuLmlzT3duZXIgPSBpbnN0YW5jZS5jb21wb25lbnRzLmhhc093blByb3BlcnR5KG5hbWUpO1xuICBcdFx0XHRDb21wb25lbnQgPSBmbigpO1xuXG4gIFx0XHRcdGlmICghQ29tcG9uZW50KSB7XG4gIFx0XHRcdFx0d2FybklmRGVidWcobm9SZWdpc3RyeUZ1bmN0aW9uUmV0dXJuLCBuYW1lLCBcImNvbXBvbmVudFwiLCBcImNvbXBvbmVudFwiLCB7IHJhY3RpdmU6IHJhY3RpdmUgfSk7XG5cbiAgXHRcdFx0XHRyZXR1cm47XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAodHlwZW9mIENvbXBvbmVudCA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRcdC8vIGFsbG93IHN0cmluZyBsb29rdXBcbiAgXHRcdFx0XHRDb21wb25lbnQgPSBnZXRDb21wb25lbnQocmFjdGl2ZSwgQ29tcG9uZW50KTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdENvbXBvbmVudC5fZm4gPSBmbjtcbiAgXHRcdFx0aW5zdGFuY2UuY29tcG9uZW50c1tuYW1lXSA9IENvbXBvbmVudDtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gQ29tcG9uZW50O1xuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfZGV0YWNoID0gQ29tcG9uZW50JGRldGFjaDtcbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfZGV0YWNoX19kZXRhY2hIb29rID0gbmV3IGhvb2tzX0hvb2soXCJkZXRhY2hcIik7XG4gIGZ1bmN0aW9uIENvbXBvbmVudCRkZXRhY2goKSB7XG4gIFx0dmFyIGRldGFjaGVkID0gdGhpcy5pbnN0YW5jZS5mcmFnbWVudC5kZXRhY2goKTtcbiAgXHRDb21wb25lbnRfcHJvdG90eXBlX2RldGFjaF9fZGV0YWNoSG9vay5maXJlKHRoaXMuaW5zdGFuY2UpO1xuICBcdHJldHVybiBkZXRhY2hlZDtcbiAgfVxuXG4gIHZhciBDb21wb25lbnRfcHJvdG90eXBlX2ZpbmQgPSBDb21wb25lbnQkZmluZDtcblxuICBmdW5jdGlvbiBDb21wb25lbnQkZmluZChzZWxlY3Rvcikge1xuICBcdHJldHVybiB0aGlzLmluc3RhbmNlLmZyYWdtZW50LmZpbmQoc2VsZWN0b3IpO1xuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfZmluZEFsbCA9IENvbXBvbmVudCRmaW5kQWxsO1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCRmaW5kQWxsKHNlbGVjdG9yLCBxdWVyeSkge1xuICBcdHJldHVybiB0aGlzLmluc3RhbmNlLmZyYWdtZW50LmZpbmRBbGwoc2VsZWN0b3IsIHF1ZXJ5KTtcbiAgfVxuXG4gIHZhciBDb21wb25lbnRfcHJvdG90eXBlX2ZpbmRBbGxDb21wb25lbnRzID0gQ29tcG9uZW50JGZpbmRBbGxDb21wb25lbnRzO1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCRmaW5kQWxsQ29tcG9uZW50cyhzZWxlY3RvciwgcXVlcnkpIHtcbiAgXHRxdWVyeS5fdGVzdCh0aGlzLCB0cnVlKTtcblxuICBcdGlmICh0aGlzLmluc3RhbmNlLmZyYWdtZW50KSB7XG4gIFx0XHR0aGlzLmluc3RhbmNlLmZyYWdtZW50LmZpbmRBbGxDb21wb25lbnRzKHNlbGVjdG9yLCBxdWVyeSk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfZmluZENvbXBvbmVudCA9IENvbXBvbmVudCRmaW5kQ29tcG9uZW50O1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCRmaW5kQ29tcG9uZW50KHNlbGVjdG9yKSB7XG4gIFx0aWYgKCFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gdGhpcy5uYW1lKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5pbnN0YW5jZS5mcmFnbWVudCkge1xuICBcdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2UuZnJhZ21lbnQuZmluZENvbXBvbmVudChzZWxlY3Rvcik7XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgQ29tcG9uZW50X3Byb3RvdHlwZV9maW5kTmV4dE5vZGUgPSBDb21wb25lbnQkZmluZE5leHROb2RlO1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCRmaW5kTmV4dE5vZGUoKSB7XG4gIFx0cmV0dXJuIHRoaXMucGFyZW50RnJhZ21lbnQuZmluZE5leHROb2RlKHRoaXMpO1xuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfZmlyc3ROb2RlID0gQ29tcG9uZW50JGZpcnN0Tm9kZTtcblxuICBmdW5jdGlvbiBDb21wb25lbnQkZmlyc3ROb2RlKCkge1xuICBcdGlmICh0aGlzLnJlbmRlcmVkKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5pbnN0YW5jZS5mcmFnbWVudC5maXJzdE5vZGUoKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBwcm9jZXNzV3JhcHBlciA9IGZ1bmN0aW9uICh3cmFwcGVyLCBhcnJheSwgbWV0aG9kTmFtZSwgbmV3SW5kaWNlcykge1xuICBcdHZhciByb290ID0gd3JhcHBlci5yb290O1xuICBcdHZhciBrZXlwYXRoID0gd3JhcHBlci5rZXlwYXRoO1xuXG4gIFx0aWYgKCEhbmV3SW5kaWNlcykge1xuICBcdFx0cm9vdC52aWV3bW9kZWwuc21hcnRVcGRhdGUoa2V5cGF0aCwgYXJyYXksIG5ld0luZGljZXMpO1xuICBcdH0gZWxzZSB7XG4gIFx0XHQvLyBJZiB0aGlzIGlzIGEgc29ydCBvciByZXZlcnNlLCB3ZSBqdXN0IGRvIHJvb3Quc2V0KCkuLi5cbiAgXHRcdC8vIFRPRE8gdXNlIG1lcmdlIGxvZ2ljP1xuICBcdFx0cm9vdC52aWV3bW9kZWwubWFyayhrZXlwYXRoKTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIHBhdGNoZWRBcnJheVByb3RvID0gW10sXG4gICAgICBtdXRhdG9yTWV0aG9kcyA9IFtcInBvcFwiLCBcInB1c2hcIiwgXCJyZXZlcnNlXCIsIFwic2hpZnRcIiwgXCJzb3J0XCIsIFwic3BsaWNlXCIsIFwidW5zaGlmdFwiXSxcbiAgICAgIHRlc3RPYmosXG4gICAgICBwYXRjaEFycmF5TWV0aG9kcyxcbiAgICAgIHVucGF0Y2hBcnJheU1ldGhvZHM7XG5cbiAgbXV0YXRvck1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICBcdHZhciBtZXRob2QgPSBmdW5jdGlvbiAoKSB7XG4gIFx0XHRmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICBcdFx0XHRhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICBcdFx0fVxuXG4gIFx0XHR2YXIgbmV3SW5kaWNlcywgcmVzdWx0LCB3cmFwcGVyLCBpO1xuXG4gIFx0XHRuZXdJbmRpY2VzID0gc2hhcmVkX2dldE5ld0luZGljZXModGhpcywgbWV0aG9kTmFtZSwgYXJncyk7XG5cbiAgXHRcdC8vIGFwcGx5IHRoZSB1bmRlcmx5aW5nIG1ldGhvZFxuICBcdFx0cmVzdWx0ID0gQXJyYXkucHJvdG90eXBlW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgXHRcdC8vIHRyaWdnZXIgY2hhbmdlc1xuICBcdFx0Z2xvYmFsX3J1bmxvb3Auc3RhcnQoKTtcblxuICBcdFx0dGhpcy5fcmFjdGl2ZS5zZXR0aW5nID0gdHJ1ZTtcbiAgXHRcdGkgPSB0aGlzLl9yYWN0aXZlLndyYXBwZXJzLmxlbmd0aDtcbiAgXHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0d3JhcHBlciA9IHRoaXMuX3JhY3RpdmUud3JhcHBlcnNbaV07XG5cbiAgXHRcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkUmFjdGl2ZSh3cmFwcGVyLnJvb3QpO1xuICBcdFx0XHRwcm9jZXNzV3JhcHBlcih3cmFwcGVyLCB0aGlzLCBtZXRob2ROYW1lLCBuZXdJbmRpY2VzKTtcbiAgXHRcdH1cblxuICBcdFx0Z2xvYmFsX3J1bmxvb3AuZW5kKCk7XG5cbiAgXHRcdHRoaXMuX3JhY3RpdmUuc2V0dGluZyA9IGZhbHNlO1xuICBcdFx0cmV0dXJuIHJlc3VsdDtcbiAgXHR9O1xuXG4gIFx0ZGVmaW5lUHJvcGVydHkocGF0Y2hlZEFycmF5UHJvdG8sIG1ldGhvZE5hbWUsIHtcbiAgXHRcdHZhbHVlOiBtZXRob2RcbiAgXHR9KTtcbiAgfSk7XG5cbiAgLy8gY2FuIHdlIHVzZSBwcm90b3R5cGUgY2hhaW4gaW5qZWN0aW9uP1xuICAvLyBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS9ob3ctZWNtYXNjcmlwdC01LXN0aWxsLWRvZXMtbm90LWFsbG93LXRvLXN1YmNsYXNzLWFuLWFycmF5LyN3cmFwcGVyc19wcm90b3R5cGVfY2hhaW5faW5qZWN0aW9uXG4gIHRlc3RPYmogPSB7fTtcblxuICBpZiAodGVzdE9iai5fX3Byb3RvX18pIHtcbiAgXHQvLyB5ZXMsIHdlIGNhblxuICBcdHBhdGNoQXJyYXlNZXRob2RzID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gIFx0XHRhcnJheS5fX3Byb3RvX18gPSBwYXRjaGVkQXJyYXlQcm90bztcbiAgXHR9O1xuXG4gIFx0dW5wYXRjaEFycmF5TWV0aG9kcyA9IGZ1bmN0aW9uIChhcnJheSkge1xuICBcdFx0YXJyYXkuX19wcm90b19fID0gQXJyYXkucHJvdG90eXBlO1xuICBcdH07XG4gIH0gZWxzZSB7XG4gIFx0Ly8gbm8sIHdlIGNhbid0XG4gIFx0cGF0Y2hBcnJheU1ldGhvZHMgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgXHRcdHZhciBpLCBtZXRob2ROYW1lO1xuXG4gIFx0XHRpID0gbXV0YXRvck1ldGhvZHMubGVuZ3RoO1xuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRtZXRob2ROYW1lID0gbXV0YXRvck1ldGhvZHNbaV07XG4gIFx0XHRcdGRlZmluZVByb3BlcnR5KGFycmF5LCBtZXRob2ROYW1lLCB7XG4gIFx0XHRcdFx0dmFsdWU6IHBhdGNoZWRBcnJheVByb3RvW21ldGhvZE5hbWVdLFxuICBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICBcdFx0XHR9KTtcbiAgXHRcdH1cbiAgXHR9O1xuXG4gIFx0dW5wYXRjaEFycmF5TWV0aG9kcyA9IGZ1bmN0aW9uIChhcnJheSkge1xuICBcdFx0dmFyIGk7XG5cbiAgXHRcdGkgPSBtdXRhdG9yTWV0aG9kcy5sZW5ndGg7XG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdGRlbGV0ZSBhcnJheVttdXRhdG9yTWV0aG9kc1tpXV07XG4gIFx0XHR9XG4gIFx0fTtcbiAgfVxuXG4gIHBhdGNoQXJyYXlNZXRob2RzLnVucGF0Y2ggPSB1bnBhdGNoQXJyYXlNZXRob2RzO1xuICB2YXIgcGF0Y2ggPSBwYXRjaEFycmF5TWV0aG9kcztcblxuICB2YXIgYXJyYXlBZGFwdG9yLFxuXG4gIC8vIGhlbHBlcnNcbiAgQXJyYXlXcmFwcGVyLCBhcnJheV9pbmRleF9fZXJyb3JNZXNzYWdlO1xuXG4gIGFycmF5QWRhcHRvciA9IHtcbiAgXHRmaWx0ZXI6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgXHRcdC8vIHdyYXAgdGhlIGFycmF5IGlmIGEpIGIpIGl0J3MgYW4gYXJyYXksIGFuZCBiKSBlaXRoZXIgaXQgaGFzbid0IGJlZW4gd3JhcHBlZCBhbHJlYWR5LFxuICBcdFx0Ly8gb3IgdGhlIGFycmF5IGRpZG4ndCB0cmlnZ2VyIHRoZSBnZXQoKSBpdHNlbGZcbiAgXHRcdHJldHVybiBpc0FycmF5KG9iamVjdCkgJiYgKCFvYmplY3QuX3JhY3RpdmUgfHwgIW9iamVjdC5fcmFjdGl2ZS5zZXR0aW5nKTtcbiAgXHR9LFxuICBcdHdyYXA6IGZ1bmN0aW9uIChyYWN0aXZlLCBhcnJheSwga2V5cGF0aCkge1xuICBcdFx0cmV0dXJuIG5ldyBBcnJheVdyYXBwZXIocmFjdGl2ZSwgYXJyYXksIGtleXBhdGgpO1xuICBcdH1cbiAgfTtcblxuICBBcnJheVdyYXBwZXIgPSBmdW5jdGlvbiAocmFjdGl2ZSwgYXJyYXksIGtleXBhdGgpIHtcbiAgXHR0aGlzLnJvb3QgPSByYWN0aXZlO1xuICBcdHRoaXMudmFsdWUgPSBhcnJheTtcbiAgXHR0aGlzLmtleXBhdGggPSBnZXRLZXlwYXRoKGtleXBhdGgpO1xuXG4gIFx0Ly8gaWYgdGhpcyBhcnJheSBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJhY3RpZmllZCwgcmFjdGlmeSBpdFxuICBcdGlmICghYXJyYXkuX3JhY3RpdmUpIHtcblxuICBcdFx0Ly8gZGVmaW5lIGEgbm9uLWVudW1lcmFibGUgX3JhY3RpdmUgcHJvcGVydHkgdG8gc3RvcmUgdGhlIHdyYXBwZXJzXG4gIFx0XHRkZWZpbmVQcm9wZXJ0eShhcnJheSwgXCJfcmFjdGl2ZVwiLCB7XG4gIFx0XHRcdHZhbHVlOiB7XG4gIFx0XHRcdFx0d3JhcHBlcnM6IFtdLFxuICBcdFx0XHRcdGluc3RhbmNlczogW10sXG4gIFx0XHRcdFx0c2V0dGluZzogZmFsc2VcbiAgXHRcdFx0fSxcbiAgXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG4gIFx0XHR9KTtcblxuICBcdFx0cGF0Y2goYXJyYXkpO1xuICBcdH1cblxuICBcdC8vIHN0b3JlIHRoZSByYWN0aXZlIGluc3RhbmNlLCBzbyB3ZSBjYW4gaGFuZGxlIHRyYW5zaXRpb25zIGxhdGVyXG4gIFx0aWYgKCFhcnJheS5fcmFjdGl2ZS5pbnN0YW5jZXNbcmFjdGl2ZS5fZ3VpZF0pIHtcbiAgXHRcdGFycmF5Ll9yYWN0aXZlLmluc3RhbmNlc1tyYWN0aXZlLl9ndWlkXSA9IDA7XG4gIFx0XHRhcnJheS5fcmFjdGl2ZS5pbnN0YW5jZXMucHVzaChyYWN0aXZlKTtcbiAgXHR9XG5cbiAgXHRhcnJheS5fcmFjdGl2ZS5pbnN0YW5jZXNbcmFjdGl2ZS5fZ3VpZF0gKz0gMTtcbiAgXHRhcnJheS5fcmFjdGl2ZS53cmFwcGVycy5wdXNoKHRoaXMpO1xuICB9O1xuXG4gIEFycmF5V3JhcHBlci5wcm90b3R5cGUgPSB7XG4gIFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcbiAgXHR9LFxuICBcdHRlYXJkb3duOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgYXJyYXksIHN0b3JhZ2UsIHdyYXBwZXJzLCBpbnN0YW5jZXMsIGluZGV4O1xuXG4gIFx0XHRhcnJheSA9IHRoaXMudmFsdWU7XG4gIFx0XHRzdG9yYWdlID0gYXJyYXkuX3JhY3RpdmU7XG4gIFx0XHR3cmFwcGVycyA9IHN0b3JhZ2Uud3JhcHBlcnM7XG4gIFx0XHRpbnN0YW5jZXMgPSBzdG9yYWdlLmluc3RhbmNlcztcblxuICBcdFx0Ly8gaWYgdGVhcmRvd24oKSB3YXMgaW52b2tlZCBiZWNhdXNlIHdlJ3JlIGNsZWFyaW5nIHRoZSBjYWNoZSBhcyBhIHJlc3VsdCBvZlxuICBcdFx0Ly8gYSBjaGFuZ2UgdGhhdCB0aGUgYXJyYXkgaXRzZWxmIHRyaWdnZXJlZCwgd2UgY2FuIHNhdmUgb3Vyc2VsdmVzIHRoZSB0ZWFyZG93blxuICBcdFx0Ly8gYW5kIGltbWVkaWF0ZSBzZXR1cFxuICBcdFx0aWYgKHN0b3JhZ2Uuc2V0dGluZykge1xuICBcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIHNvIHRoYXQgd2UgZG9uJ3QgcmVtb3ZlIGl0IGZyb20gdGhpcy5yb290LnZpZXdtb2RlbC53cmFwcGVkXG4gIFx0XHR9XG5cbiAgXHRcdGluZGV4ID0gd3JhcHBlcnMuaW5kZXhPZih0aGlzKTtcbiAgXHRcdGlmIChpbmRleCA9PT0gLTEpIHtcbiAgXHRcdFx0dGhyb3cgbmV3IEVycm9yKGFycmF5X2luZGV4X19lcnJvck1lc3NhZ2UpO1xuICBcdFx0fVxuXG4gIFx0XHR3cmFwcGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gIFx0XHQvLyBpZiBub3RoaW5nIGVsc2UgZGVwZW5kcyBvbiB0aGlzIGFycmF5LCB3ZSBjYW4gcmV2ZXJ0IGl0IHRvIGl0c1xuICBcdFx0Ly8gbmF0dXJhbCBzdGF0ZVxuICBcdFx0aWYgKCF3cmFwcGVycy5sZW5ndGgpIHtcbiAgXHRcdFx0ZGVsZXRlIGFycmF5Ll9yYWN0aXZlO1xuICBcdFx0XHRwYXRjaC51bnBhdGNoKHRoaXMudmFsdWUpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0Ly8gcmVtb3ZlIHJhY3RpdmUgaW5zdGFuY2UgaWYgcG9zc2libGVcbiAgXHRcdFx0aW5zdGFuY2VzW3RoaXMucm9vdC5fZ3VpZF0gLT0gMTtcbiAgXHRcdFx0aWYgKCFpbnN0YW5jZXNbdGhpcy5yb290Ll9ndWlkXSkge1xuICBcdFx0XHRcdGluZGV4ID0gaW5zdGFuY2VzLmluZGV4T2YodGhpcy5yb290KTtcblxuICBcdFx0XHRcdGlmIChpbmRleCA9PT0gLTEpIHtcbiAgXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihhcnJheV9pbmRleF9fZXJyb3JNZXNzYWdlKTtcbiAgXHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRpbnN0YW5jZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuICBcdH1cbiAgfTtcblxuICBhcnJheV9pbmRleF9fZXJyb3JNZXNzYWdlID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZyBpbiBhIHJhdGhlciBpbnRlcmVzdGluZyB3YXlcIjtcbiAgdmFyIGFycmF5X2luZGV4ID0gYXJyYXlBZGFwdG9yO1xuXG4gIHZhciBudW1lcmljID0gL15cXHMqWzAtOV0rXFxzKiQvO1xuXG4gIHZhciBjcmVhdGVCcmFuY2ggPSBmdW5jdGlvbiAoa2V5KSB7XG4gIFx0cmV0dXJuIG51bWVyaWMudGVzdChrZXkpID8gW10gOiB7fTtcbiAgfTtcblxuICB2YXIgbWFnaWNBZGFwdG9yLCBNYWdpY1dyYXBwZXI7XG5cbiAgdHJ5IHtcbiAgXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwidGVzdFwiLCB7IHZhbHVlOiAwIH0pO1xuXG4gIFx0bWFnaWNBZGFwdG9yID0ge1xuICBcdFx0ZmlsdGVyOiBmdW5jdGlvbiAob2JqZWN0LCBrZXlwYXRoLCByYWN0aXZlKSB7XG4gIFx0XHRcdHZhciBwYXJlbnRXcmFwcGVyLCBwYXJlbnRWYWx1ZTtcblxuICBcdFx0XHRpZiAoIWtleXBhdGgpIHtcbiAgXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRrZXlwYXRoID0gZ2V0S2V5cGF0aChrZXlwYXRoKTtcblxuICBcdFx0XHQvLyBJZiB0aGUgcGFyZW50IHZhbHVlIGlzIGEgd3JhcHBlciwgb3RoZXIgdGhhbiBhIG1hZ2ljIHdyYXBwZXIsXG4gIFx0XHRcdC8vIHdlIHNob3VsZG4ndCB3cmFwIHRoaXMgcHJvcGVydHlcbiAgXHRcdFx0aWYgKChwYXJlbnRXcmFwcGVyID0gcmFjdGl2ZS52aWV3bW9kZWwud3JhcHBlZFtrZXlwYXRoLnBhcmVudC5zdHJdKSAmJiAhcGFyZW50V3JhcHBlci5tYWdpYykge1xuICBcdFx0XHRcdHJldHVybiBmYWxzZTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHBhcmVudFZhbHVlID0gcmFjdGl2ZS52aWV3bW9kZWwuZ2V0KGtleXBhdGgucGFyZW50KTtcblxuICBcdFx0XHQvLyBpZiBwYXJlbnRWYWx1ZSBpcyBhbiBhcnJheSB0aGF0IGRvZXNuJ3QgaW5jbHVkZSB0aGlzIG1lbWJlcixcbiAgXHRcdFx0Ly8gd2Ugc2hvdWxkIHJldHVybiBmYWxzZSBvdGhlcndpc2UgbGVuZ3RocyB3aWxsIGdldCBtZXNzZWQgdXBcbiAgXHRcdFx0aWYgKGlzQXJyYXkocGFyZW50VmFsdWUpICYmIC9eWzAtOV0rJC8udGVzdChrZXlwYXRoLmxhc3RLZXkpKSB7XG4gIFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0cmV0dXJuIHBhcmVudFZhbHVlICYmICh0eXBlb2YgcGFyZW50VmFsdWUgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHBhcmVudFZhbHVlID09PSBcImZ1bmN0aW9uXCIpO1xuICBcdFx0fSxcbiAgXHRcdHdyYXA6IGZ1bmN0aW9uIChyYWN0aXZlLCBwcm9wZXJ0eSwga2V5cGF0aCkge1xuICBcdFx0XHRyZXR1cm4gbmV3IE1hZ2ljV3JhcHBlcihyYWN0aXZlLCBwcm9wZXJ0eSwga2V5cGF0aCk7XG4gIFx0XHR9XG4gIFx0fTtcblxuICBcdE1hZ2ljV3JhcHBlciA9IGZ1bmN0aW9uIChyYWN0aXZlLCB2YWx1ZSwga2V5cGF0aCkge1xuICBcdFx0dmFyIG9iaktleXBhdGgsIHRlbXBsYXRlLCBzaWJsaW5ncztcblxuICBcdFx0a2V5cGF0aCA9IGdldEtleXBhdGgoa2V5cGF0aCk7XG5cbiAgXHRcdHRoaXMubWFnaWMgPSB0cnVlO1xuXG4gIFx0XHR0aGlzLnJhY3RpdmUgPSByYWN0aXZlO1xuICBcdFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblxuICBcdFx0dGhpcy5wcm9wID0ga2V5cGF0aC5sYXN0S2V5O1xuXG4gIFx0XHRvYmpLZXlwYXRoID0ga2V5cGF0aC5wYXJlbnQ7XG4gIFx0XHR0aGlzLm9iaiA9IG9iaktleXBhdGguaXNSb290ID8gcmFjdGl2ZS52aWV3bW9kZWwuZGF0YSA6IHJhY3RpdmUudmlld21vZGVsLmdldChvYmpLZXlwYXRoKTtcblxuICBcdFx0dGVtcGxhdGUgPSB0aGlzLm9yaWdpbmFsRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5vYmosIHRoaXMucHJvcCk7XG5cbiAgXHRcdC8vIEhhcyB0aGlzIHByb3BlcnR5IGFscmVhZHkgYmVlbiB3cmFwcGVkP1xuICBcdFx0aWYgKHRlbXBsYXRlICYmIHRlbXBsYXRlLnNldCAmJiAoc2libGluZ3MgPSB0ZW1wbGF0ZS5zZXQuX3JhY3RpdmVXcmFwcGVycykpIHtcblxuICBcdFx0XHQvLyBZZXMuIFJlZ2lzdGVyIHRoaXMgd3JhcHBlciB0byB0aGlzIHByb3BlcnR5LCBpZiBpdCBoYXNuJ3QgYmVlbiBhbHJlYWR5XG4gIFx0XHRcdGlmIChzaWJsaW5ncy5pbmRleE9mKHRoaXMpID09PSAtMSkge1xuICBcdFx0XHRcdHNpYmxpbmdzLnB1c2godGhpcyk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRyZXR1cm47IC8vIGFscmVhZHkgd3JhcHBlZFxuICBcdFx0fVxuXG4gIFx0XHQvLyBObywgaXQgaGFzbid0IGJlZW4gd3JhcHBlZFxuICBcdFx0Y3JlYXRlQWNjZXNzb3JzKHRoaXMsIHZhbHVlLCB0ZW1wbGF0ZSk7XG4gIFx0fTtcblxuICBcdE1hZ2ljV3JhcHBlci5wcm90b3R5cGUgPSB7XG4gIFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdFx0cmV0dXJuIHRoaXMudmFsdWU7XG4gIFx0XHR9LFxuICBcdFx0cmVzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBcdFx0XHRpZiAodGhpcy51cGRhdGluZykge1xuICBcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHRoaXMudXBkYXRpbmcgPSB0cnVlO1xuICBcdFx0XHR0aGlzLm9ialt0aGlzLnByb3BdID0gdmFsdWU7IC8vIHRyaWdnZXIgc2V0KCkgYWNjZXNzb3JcbiAgXHRcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkUmFjdGl2ZSh0aGlzLnJhY3RpdmUpO1xuICBcdFx0XHR0aGlzLnJhY3RpdmUudmlld21vZGVsLm1hcmsodGhpcy5rZXlwYXRoLCB7IGtlZXBFeGlzdGluZ1dyYXBwZXI6IHRydWUgfSk7XG4gIFx0XHRcdHRoaXMudXBkYXRpbmcgPSBmYWxzZTtcbiAgXHRcdFx0cmV0dXJuIHRydWU7XG4gIFx0XHR9LFxuICBcdFx0c2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICBcdFx0XHRpZiAodGhpcy51cGRhdGluZykge1xuICBcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmICghdGhpcy5vYmpbdGhpcy5wcm9wXSkge1xuICBcdFx0XHRcdHRoaXMudXBkYXRpbmcgPSB0cnVlO1xuICBcdFx0XHRcdHRoaXMub2JqW3RoaXMucHJvcF0gPSBjcmVhdGVCcmFuY2goa2V5KTtcbiAgXHRcdFx0XHR0aGlzLnVwZGF0aW5nID0gZmFsc2U7XG4gIFx0XHRcdH1cblxuICBcdFx0XHR0aGlzLm9ialt0aGlzLnByb3BdW2tleV0gPSB2YWx1ZTtcbiAgXHRcdH0sXG4gIFx0XHR0ZWFyZG93bjogZnVuY3Rpb24gKCkge1xuICBcdFx0XHR2YXIgdGVtcGxhdGUsIHNldCwgdmFsdWUsIHdyYXBwZXJzLCBpbmRleDtcblxuICBcdFx0XHQvLyBJZiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIGJlY2F1c2UgdGhlIGNhY2hlIHdhcyBiZWluZyBjbGVhcmVkIGFzIGFcbiAgXHRcdFx0Ly8gcmVzdWx0IG9mIGEgc2V0KCkvdXBkYXRlKCkgY2FsbCBtYWRlIGJ5IHRoaXMgd3JhcHBlciwgd2UgcmV0dXJuIGZhbHNlXG4gIFx0XHRcdC8vIHNvIHRoYXQgaXQgZG9lc24ndCBnZXQgdG9ybiBkb3duXG4gIFx0XHRcdGlmICh0aGlzLnVwZGF0aW5nKSB7XG4gIFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0dGVtcGxhdGUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRoaXMub2JqLCB0aGlzLnByb3ApO1xuICBcdFx0XHRzZXQgPSB0ZW1wbGF0ZSAmJiB0ZW1wbGF0ZS5zZXQ7XG5cbiAgXHRcdFx0aWYgKCFzZXQpIHtcbiAgXHRcdFx0XHQvLyBtb3N0IGxpa2VseSwgdGhpcyB3YXMgYW4gYXJyYXkgbWVtYmVyIHRoYXQgd2FzIHNwbGljZWQgb3V0XG4gIFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0d3JhcHBlcnMgPSBzZXQuX3JhY3RpdmVXcmFwcGVycztcblxuICBcdFx0XHRpbmRleCA9IHdyYXBwZXJzLmluZGV4T2YodGhpcyk7XG4gIFx0XHRcdGlmIChpbmRleCAhPT0gLTEpIHtcbiAgXHRcdFx0XHR3cmFwcGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0Ly8gTGFzdCBvbmUgb3V0LCB0dXJuIG9mZiB0aGUgbGlnaHRzXG4gIFx0XHRcdGlmICghd3JhcHBlcnMubGVuZ3RoKSB7XG4gIFx0XHRcdFx0dmFsdWUgPSB0aGlzLm9ialt0aGlzLnByb3BdO1xuXG4gIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCB0aGlzLnByb3AsIHRoaXMub3JpZ2luYWxEZXNjcmlwdG9yIHx8IHtcbiAgXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuICBcdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiAgXHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICBcdFx0XHRcdH0pO1xuXG4gIFx0XHRcdFx0dGhpcy5vYmpbdGhpcy5wcm9wXSA9IHZhbHVlO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gIFx0bWFnaWNBZGFwdG9yID0gZmFsc2U7IC8vIG5vIG1hZ2ljIGluIHRoaXMgYnJvd3NlclxuICB9XG5cbiAgdmFyIGFkYXB0b3JzX21hZ2ljID0gbWFnaWNBZGFwdG9yO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFjY2Vzc29ycyhvcmlnaW5hbFdyYXBwZXIsIHZhbHVlLCB0ZW1wbGF0ZSkge1xuXG4gIFx0dmFyIG9iamVjdCwgcHJvcGVydHksIG9sZEdldCwgb2xkU2V0LCBnZXQsIHNldDtcblxuICBcdG9iamVjdCA9IG9yaWdpbmFsV3JhcHBlci5vYmo7XG4gIFx0cHJvcGVydHkgPSBvcmlnaW5hbFdyYXBwZXIucHJvcDtcblxuICBcdC8vIElzIHRoaXMgdGVtcGxhdGUgY29uZmlndXJhYmxlP1xuICBcdGlmICh0ZW1wbGF0ZSAmJiAhdGVtcGxhdGUuY29uZmlndXJhYmxlKSB7XG4gIFx0XHQvLyBTcGVjaWFsIGNhc2UgLSBhcnJheSBsZW5ndGhcbiAgXHRcdGlmIChwcm9wZXJ0eSA9PT0gXCJsZW5ndGhcIikge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgbWFnaWMgbW9kZSB3aXRoIHByb3BlcnR5IFxcXCJcIiArIHByb3BlcnR5ICsgXCJcXFwiIC0gb2JqZWN0IGlzIG5vdCBjb25maWd1cmFibGVcIik7XG4gIFx0fVxuXG4gIFx0Ly8gVGltZSB0byB3cmFwIHRoaXMgcHJvcGVydHlcbiAgXHRpZiAodGVtcGxhdGUpIHtcbiAgXHRcdG9sZEdldCA9IHRlbXBsYXRlLmdldDtcbiAgXHRcdG9sZFNldCA9IHRlbXBsYXRlLnNldDtcbiAgXHR9XG5cbiAgXHRnZXQgPSBvbGRHZXQgfHwgZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHZhbHVlO1xuICBcdH07XG5cbiAgXHRzZXQgPSBmdW5jdGlvbiAodikge1xuICBcdFx0aWYgKG9sZFNldCkge1xuICBcdFx0XHRvbGRTZXQodik7XG4gIFx0XHR9XG5cbiAgXHRcdHZhbHVlID0gb2xkR2V0ID8gb2xkR2V0KCkgOiB2O1xuICBcdFx0c2V0Ll9yYWN0aXZlV3JhcHBlcnMuZm9yRWFjaCh1cGRhdGVXcmFwcGVyKTtcbiAgXHR9O1xuXG4gIFx0ZnVuY3Rpb24gdXBkYXRlV3JhcHBlcih3cmFwcGVyKSB7XG4gIFx0XHR2YXIga2V5cGF0aCwgcmFjdGl2ZTtcblxuICBcdFx0d3JhcHBlci52YWx1ZSA9IHZhbHVlO1xuXG4gIFx0XHRpZiAod3JhcHBlci51cGRhdGluZykge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdHJhY3RpdmUgPSB3cmFwcGVyLnJhY3RpdmU7XG4gIFx0XHRrZXlwYXRoID0gd3JhcHBlci5rZXlwYXRoO1xuXG4gIFx0XHR3cmFwcGVyLnVwZGF0aW5nID0gdHJ1ZTtcbiAgXHRcdGdsb2JhbF9ydW5sb29wLnN0YXJ0KHJhY3RpdmUpO1xuXG4gIFx0XHRyYWN0aXZlLnZpZXdtb2RlbC5tYXJrKGtleXBhdGgpO1xuXG4gIFx0XHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcbiAgXHRcdHdyYXBwZXIudXBkYXRpbmcgPSBmYWxzZTtcbiAgXHR9XG5cbiAgXHQvLyBDcmVhdGUgYW4gYXJyYXkgb2Ygd3JhcHBlcnMsIGluIGNhc2Ugb3RoZXIga2V5cGF0aHMvcmFjdGl2ZXMgZGVwZW5kIG9uIHRoaXMgcHJvcGVydHkuXG4gIFx0Ly8gSGFuZGlseSwgd2UgY2FuIHN0b3JlIHRoZW0gYXMgYSBwcm9wZXJ0eSBvZiB0aGUgc2V0IGZ1bmN0aW9uLiBZYXkgSmF2YVNjcmlwdC5cbiAgXHRzZXQuX3JhY3RpdmVXcmFwcGVycyA9IFtvcmlnaW5hbFdyYXBwZXJdO1xuICBcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCB7IGdldDogZ2V0LCBzZXQ6IHNldCwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xuICB9XG5cbiAgdmFyIG1hZ2ljQXJyYXlBZGFwdG9yLCBNYWdpY0FycmF5V3JhcHBlcjtcblxuICBpZiAoYWRhcHRvcnNfbWFnaWMpIHtcbiAgXHRtYWdpY0FycmF5QWRhcHRvciA9IHtcbiAgXHRcdGZpbHRlcjogZnVuY3Rpb24gKG9iamVjdCwga2V5cGF0aCwgcmFjdGl2ZSkge1xuICBcdFx0XHRyZXR1cm4gYWRhcHRvcnNfbWFnaWMuZmlsdGVyKG9iamVjdCwga2V5cGF0aCwgcmFjdGl2ZSkgJiYgYXJyYXlfaW5kZXguZmlsdGVyKG9iamVjdCk7XG4gIFx0XHR9LFxuXG4gIFx0XHR3cmFwOiBmdW5jdGlvbiAocmFjdGl2ZSwgYXJyYXksIGtleXBhdGgpIHtcbiAgXHRcdFx0cmV0dXJuIG5ldyBNYWdpY0FycmF5V3JhcHBlcihyYWN0aXZlLCBhcnJheSwga2V5cGF0aCk7XG4gIFx0XHR9XG4gIFx0fTtcblxuICBcdE1hZ2ljQXJyYXlXcmFwcGVyID0gZnVuY3Rpb24gKHJhY3RpdmUsIGFycmF5LCBrZXlwYXRoKSB7XG4gIFx0XHR0aGlzLnZhbHVlID0gYXJyYXk7XG5cbiAgXHRcdHRoaXMubWFnaWMgPSB0cnVlO1xuXG4gIFx0XHR0aGlzLm1hZ2ljV3JhcHBlciA9IGFkYXB0b3JzX21hZ2ljLndyYXAocmFjdGl2ZSwgYXJyYXksIGtleXBhdGgpO1xuICBcdFx0dGhpcy5hcnJheVdyYXBwZXIgPSBhcnJheV9pbmRleC53cmFwKHJhY3RpdmUsIGFycmF5LCBrZXlwYXRoKTtcbiAgXHR9O1xuXG4gIFx0TWFnaWNBcnJheVdyYXBwZXIucHJvdG90eXBlID0ge1xuICBcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHJldHVybiB0aGlzLnZhbHVlO1xuICBcdFx0fSxcbiAgXHRcdHRlYXJkb3duOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRcdHRoaXMuYXJyYXlXcmFwcGVyLnRlYXJkb3duKCk7XG4gIFx0XHRcdHRoaXMubWFnaWNXcmFwcGVyLnRlYXJkb3duKCk7XG4gIFx0XHR9LFxuICBcdFx0cmVzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBcdFx0XHRyZXR1cm4gdGhpcy5tYWdpY1dyYXBwZXIucmVzZXQodmFsdWUpO1xuICBcdFx0fVxuICBcdH07XG4gIH1cblxuICB2YXIgbWFnaWNBcnJheSA9IG1hZ2ljQXJyYXlBZGFwdG9yO1xuXG4gIHZhciBwcm90b3R5cGVfYWRhcHQgPSBWaWV3bW9kZWwkYWRhcHQ7XG5cbiAgdmFyIHByZWZpeGVycyA9IHt9O1xuICBmdW5jdGlvbiBWaWV3bW9kZWwkYWRhcHQoa2V5cGF0aCwgdmFsdWUpIHtcbiAgXHR2YXIgbGVuLCBpLCBhZGFwdG9yLCB3cmFwcGVkO1xuXG4gIFx0aWYgKCF0aGlzLmFkYXB0b3JzKSByZXR1cm47XG5cbiAgXHQvLyBEbyB3ZSBoYXZlIGFuIGFkYXB0b3IgZm9yIHRoaXMgdmFsdWU/XG4gIFx0bGVuID0gdGhpcy5hZGFwdG9ycy5sZW5ndGg7XG4gIFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gIFx0XHRhZGFwdG9yID0gdGhpcy5hZGFwdG9yc1tpXTtcblxuICBcdFx0aWYgKGFkYXB0b3IuZmlsdGVyKHZhbHVlLCBrZXlwYXRoLCB0aGlzLnJhY3RpdmUpKSB7XG4gIFx0XHRcdHdyYXBwZWQgPSB0aGlzLndyYXBwZWRba2V5cGF0aF0gPSBhZGFwdG9yLndyYXAodGhpcy5yYWN0aXZlLCB2YWx1ZSwga2V5cGF0aCwgZ2V0UHJlZml4ZXIoa2V5cGF0aCkpO1xuICBcdFx0XHR3cmFwcGVkLnZhbHVlID0gdmFsdWU7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBwcmVmaXhLZXlwYXRoKG9iaiwgcHJlZml4KSB7XG4gIFx0dmFyIHByZWZpeGVkID0ge30sXG4gIFx0ICAgIGtleTtcblxuICBcdGlmICghcHJlZml4KSB7XG4gIFx0XHRyZXR1cm4gb2JqO1xuICBcdH1cblxuICBcdHByZWZpeCArPSBcIi5cIjtcblxuICBcdGZvciAoa2V5IGluIG9iaikge1xuICBcdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gIFx0XHRcdHByZWZpeGVkW3ByZWZpeCArIGtleV0gPSBvYmpba2V5XTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4gcHJlZml4ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQcmVmaXhlcihyb290S2V5cGF0aCkge1xuICBcdHZhciByb290RG90O1xuXG4gIFx0aWYgKCFwcmVmaXhlcnNbcm9vdEtleXBhdGhdKSB7XG4gIFx0XHRyb290RG90ID0gcm9vdEtleXBhdGggPyByb290S2V5cGF0aCArIFwiLlwiIDogXCJcIjtcblxuICBcdFx0cHJlZml4ZXJzW3Jvb3RLZXlwYXRoXSA9IGZ1bmN0aW9uIChyZWxhdGl2ZUtleXBhdGgsIHZhbHVlKSB7XG4gIFx0XHRcdHZhciBvYmo7XG5cbiAgXHRcdFx0aWYgKHR5cGVvZiByZWxhdGl2ZUtleXBhdGggPT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdFx0XHRvYmogPSB7fTtcbiAgXHRcdFx0XHRvYmpbcm9vdERvdCArIHJlbGF0aXZlS2V5cGF0aF0gPSB2YWx1ZTtcbiAgXHRcdFx0XHRyZXR1cm4gb2JqO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0aWYgKHR5cGVvZiByZWxhdGl2ZUtleXBhdGggPT09IFwib2JqZWN0XCIpIHtcbiAgXHRcdFx0XHQvLyAncmVsYXRpdmVLZXlwYXRoJyBpcyBpbiBmYWN0IGEgaGFzaCwgbm90IGEga2V5cGF0aFxuICBcdFx0XHRcdHJldHVybiByb290RG90ID8gcHJlZml4S2V5cGF0aChyZWxhdGl2ZUtleXBhdGgsIHJvb3RLZXlwYXRoKSA6IHJlbGF0aXZlS2V5cGF0aDtcbiAgXHRcdFx0fVxuICBcdFx0fTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcHJlZml4ZXJzW3Jvb3RLZXlwYXRoXTtcbiAgfVxuXG4gIC8vIFRFTVBcblxuICB2YXIgaGVscGVyc19nZXRVcHN0cmVhbUNoYW5nZXMgPSBnZXRVcHN0cmVhbUNoYW5nZXM7XG4gIGZ1bmN0aW9uIGdldFVwc3RyZWFtQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gIFx0dmFyIHVwc3RyZWFtQ2hhbmdlcyA9IFtyb290S2V5cGF0aF0sXG4gIFx0ICAgIGksXG4gIFx0ICAgIGtleXBhdGg7XG5cbiAgXHRpID0gY2hhbmdlcy5sZW5ndGg7XG4gIFx0d2hpbGUgKGktLSkge1xuICBcdFx0a2V5cGF0aCA9IGNoYW5nZXNbaV0ucGFyZW50O1xuXG4gIFx0XHR3aGlsZSAoa2V5cGF0aCAmJiAha2V5cGF0aC5pc1Jvb3QpIHtcbiAgXHRcdFx0aWYgKGNoYW5nZXMuaW5kZXhPZihrZXlwYXRoKSA9PT0gLTEpIHtcbiAgXHRcdFx0XHRhZGRUb0FycmF5KHVwc3RyZWFtQ2hhbmdlcywga2V5cGF0aCk7XG4gIFx0XHRcdH1cbiAgXHRcdFx0a2V5cGF0aCA9IGtleXBhdGgucGFyZW50O1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiB1cHN0cmVhbUNoYW5nZXM7XG4gIH1cblxuICB2YXIgYXBwbHlDaGFuZ2VzX25vdGlmeVBhdHRlcm5PYnNlcnZlcnMgPSBub3RpZnlQYXR0ZXJuT2JzZXJ2ZXJzO1xuXG4gIGZ1bmN0aW9uIG5vdGlmeVBhdHRlcm5PYnNlcnZlcnModmlld21vZGVsLCBrZXlwYXRoLCBvbmx5RGlyZWN0KSB7XG4gIFx0dmFyIHBvdGVudGlhbFdpbGRjYXJkTWF0Y2hlcztcblxuICBcdHVwZGF0ZU1hdGNoaW5nUGF0dGVybk9ic2VydmVycyh2aWV3bW9kZWwsIGtleXBhdGgpO1xuXG4gIFx0aWYgKG9ubHlEaXJlY3QpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRwb3RlbnRpYWxXaWxkY2FyZE1hdGNoZXMgPSBrZXlwYXRoLndpbGRjYXJkTWF0Y2hlcygpO1xuICBcdHBvdGVudGlhbFdpbGRjYXJkTWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uICh1cHN0cmVhbVBhdHRlcm4pIHtcbiAgXHRcdGNhc2NhZGUodmlld21vZGVsLCB1cHN0cmVhbVBhdHRlcm4sIGtleXBhdGgpO1xuICBcdH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FzY2FkZSh2aWV3bW9kZWwsIHVwc3RyZWFtUGF0dGVybiwga2V5cGF0aCkge1xuICBcdHZhciBncm91cCwgbWFwLCBhY3R1YWxDaGlsZEtleXBhdGg7XG5cbiAgXHQvLyBUT0RPIHNob3VsZCBiZSBvbmUgb3IgdGhlIG90aGVyXG4gIFx0dXBzdHJlYW1QYXR0ZXJuID0gdXBzdHJlYW1QYXR0ZXJuLnN0ciB8fCB1cHN0cmVhbVBhdHRlcm47XG5cbiAgXHRncm91cCA9IHZpZXdtb2RlbC5kZXBzTWFwLnBhdHRlcm5PYnNlcnZlcnM7XG4gIFx0bWFwID0gZ3JvdXAgJiYgZ3JvdXBbdXBzdHJlYW1QYXR0ZXJuXTtcblxuICBcdGlmICghbWFwKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0bWFwLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkS2V5cGF0aCkge1xuICBcdFx0YWN0dWFsQ2hpbGRLZXlwYXRoID0ga2V5cGF0aC5qb2luKGNoaWxkS2V5cGF0aC5sYXN0S2V5KTsgLy8gJ2Zvby5iYXIuYmF6J1xuXG4gIFx0XHR1cGRhdGVNYXRjaGluZ1BhdHRlcm5PYnNlcnZlcnModmlld21vZGVsLCBhY3R1YWxDaGlsZEtleXBhdGgpO1xuICBcdFx0Y2FzY2FkZSh2aWV3bW9kZWwsIGNoaWxkS2V5cGF0aCwgYWN0dWFsQ2hpbGRLZXlwYXRoKTtcbiAgXHR9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU1hdGNoaW5nUGF0dGVybk9ic2VydmVycyh2aWV3bW9kZWwsIGtleXBhdGgpIHtcbiAgXHR2aWV3bW9kZWwucGF0dGVybk9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICBcdFx0aWYgKG9ic2VydmVyLnJlZ2V4LnRlc3Qoa2V5cGF0aC5zdHIpKSB7XG4gIFx0XHRcdG9ic2VydmVyLnVwZGF0ZShrZXlwYXRoKTtcbiAgXHRcdH1cbiAgXHR9KTtcbiAgfVxuXG4gIHZhciBhcHBseUNoYW5nZXMgPSBWaWV3bW9kZWwkYXBwbHlDaGFuZ2VzO1xuXG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRhcHBseUNoYW5nZXMoKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciBzZWxmID0gdGhpcyxcbiAgXHQgICAgY2hhbmdlcyxcbiAgXHQgICAgdXBzdHJlYW1DaGFuZ2VzLFxuICBcdCAgICBoYXNoID0ge30sXG4gIFx0ICAgIGJpbmRpbmdzO1xuXG4gIFx0Y2hhbmdlcyA9IHRoaXMuY2hhbmdlcztcblxuICBcdGlmICghY2hhbmdlcy5sZW5ndGgpIHtcbiAgXHRcdC8vIFRPRE8gd2UgZW5kIHVwIGhlcmUgb24gaW5pdGlhbCByZW5kZXIuIFBlcmhhcHMgd2Ugc2hvdWxkbid0P1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdGZ1bmN0aW9uIGludmFsaWRhdGVDb21wdXRhdGlvbihjb21wdXRhdGlvbikge1xuICBcdFx0dmFyIGtleSA9IGNvbXB1dGF0aW9uLmtleTtcblxuICBcdFx0aWYgKGNvbXB1dGF0aW9uLnZpZXdtb2RlbCA9PT0gc2VsZikge1xuICBcdFx0XHRzZWxmLmNsZWFyQ2FjaGUoa2V5LnN0cik7XG4gIFx0XHRcdGNvbXB1dGF0aW9uLmludmFsaWRhdGUoKTtcblxuICBcdFx0XHRjaGFuZ2VzLnB1c2goa2V5KTtcbiAgXHRcdFx0Y2FzY2FkZShrZXkpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0Y29tcHV0YXRpb24udmlld21vZGVsLm1hcmsoa2V5KTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRmdW5jdGlvbiBjYXNjYWRlKGtleXBhdGgpIHtcbiAgXHRcdHZhciBtYXAsIGNvbXB1dGF0aW9ucztcblxuICBcdFx0aWYgKHNlbGYubm9DYXNjYWRlLmhhc093blByb3BlcnR5KGtleXBhdGguc3RyKSkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChjb21wdXRhdGlvbnMgPSBzZWxmLmRlcHMuY29tcHV0ZWRba2V5cGF0aC5zdHJdKSB7XG4gIFx0XHRcdGNvbXB1dGF0aW9ucy5mb3JFYWNoKGludmFsaWRhdGVDb21wdXRhdGlvbik7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChtYXAgPSBzZWxmLmRlcHNNYXAuY29tcHV0ZWRba2V5cGF0aC5zdHJdKSB7XG4gIFx0XHRcdG1hcC5mb3JFYWNoKGNhc2NhZGUpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGNoYW5nZXMuc2xpY2UoKS5mb3JFYWNoKGNhc2NhZGUpO1xuXG4gIFx0dXBzdHJlYW1DaGFuZ2VzID0gaGVscGVyc19nZXRVcHN0cmVhbUNoYW5nZXMoY2hhbmdlcyk7XG4gIFx0dXBzdHJlYW1DaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdHZhciBjb21wdXRhdGlvbnM7XG5cbiAgXHRcdC8vIG1ha2Ugc3VyZSB3ZSBoYXZlbid0IGFscmVhZHkgYmVlbiBkb3duIHRoaXMgcGFydGljdWxhciBrZXlwYXRoIGluIHRoaXMgdHVyblxuICBcdFx0aWYgKGNoYW5nZXMuaW5kZXhPZihrZXlwYXRoKSA9PT0gLTEgJiYgKGNvbXB1dGF0aW9ucyA9IHNlbGYuZGVwcy5jb21wdXRlZFtrZXlwYXRoLnN0cl0pKSB7XG4gIFx0XHRcdGNvbXB1dGF0aW9ucy5mb3JFYWNoKGludmFsaWRhdGVDb21wdXRhdGlvbik7XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgXHR0aGlzLmNoYW5nZXMgPSBbXTtcblxuICBcdC8vIFBhdHRlcm4gb2JzZXJ2ZXJzIGFyZSBhIHdlaXJkIHNwZWNpYWwgY2FzZVxuICBcdGlmICh0aGlzLnBhdHRlcm5PYnNlcnZlcnMubGVuZ3RoKSB7XG4gIFx0XHR1cHN0cmVhbUNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0XHRyZXR1cm4gYXBwbHlDaGFuZ2VzX25vdGlmeVBhdHRlcm5PYnNlcnZlcnMoX3RoaXMsIGtleXBhdGgsIHRydWUpO1xuICBcdFx0fSk7XG4gIFx0XHRjaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdFx0cmV0dXJuIGFwcGx5Q2hhbmdlc19ub3RpZnlQYXR0ZXJuT2JzZXJ2ZXJzKF90aGlzLCBrZXlwYXRoKTtcbiAgXHRcdH0pO1xuICBcdH1cblxuICBcdGlmICh0aGlzLmRlcHMub2JzZXJ2ZXJzKSB7XG4gIFx0XHR1cHN0cmVhbUNoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0XHRyZXR1cm4gbm90aWZ5VXBzdHJlYW1EZXBlbmRhbnRzKF90aGlzLCBudWxsLCBrZXlwYXRoLCBcIm9ic2VydmVyc1wiKTtcbiAgXHRcdH0pO1xuICBcdFx0bm90aWZ5QWxsRGVwZW5kYW50cyh0aGlzLCBjaGFuZ2VzLCBcIm9ic2VydmVyc1wiKTtcbiAgXHR9XG5cbiAgXHRpZiAodGhpcy5kZXBzW1wiZGVmYXVsdFwiXSkge1xuICBcdFx0YmluZGluZ3MgPSBbXTtcbiAgXHRcdHVwc3RyZWFtQ2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdHJldHVybiBub3RpZnlVcHN0cmVhbURlcGVuZGFudHMoX3RoaXMsIGJpbmRpbmdzLCBrZXlwYXRoLCBcImRlZmF1bHRcIik7XG4gIFx0XHR9KTtcblxuICBcdFx0aWYgKGJpbmRpbmdzLmxlbmd0aCkge1xuICBcdFx0XHRub3RpZnlCaW5kaW5ncyh0aGlzLCBiaW5kaW5ncywgY2hhbmdlcyk7XG4gIFx0XHR9XG5cbiAgXHRcdG5vdGlmeUFsbERlcGVuZGFudHModGhpcywgY2hhbmdlcywgXCJkZWZhdWx0XCIpO1xuICBcdH1cblxuICBcdC8vIFJldHVybiBhIGhhc2ggb2Yga2V5cGF0aHMgdG8gdXBkYXRlZCB2YWx1ZXNcbiAgXHRjaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdGhhc2hba2V5cGF0aC5zdHJdID0gX3RoaXMuZ2V0KGtleXBhdGgpO1xuICBcdH0pO1xuXG4gIFx0dGhpcy5pbXBsaWNpdENoYW5nZXMgPSB7fTtcbiAgXHR0aGlzLm5vQ2FzY2FkZSA9IHt9O1xuXG4gIFx0cmV0dXJuIGhhc2g7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlVcHN0cmVhbURlcGVuZGFudHModmlld21vZGVsLCBiaW5kaW5ncywga2V5cGF0aCwgZ3JvdXBOYW1lKSB7XG4gIFx0dmFyIGRlcGVuZGFudHMsIHZhbHVlO1xuXG4gIFx0aWYgKGRlcGVuZGFudHMgPSBmaW5kRGVwZW5kYW50cyh2aWV3bW9kZWwsIGtleXBhdGgsIGdyb3VwTmFtZSkpIHtcbiAgXHRcdHZhbHVlID0gdmlld21vZGVsLmdldChrZXlwYXRoKTtcblxuICBcdFx0ZGVwZW5kYW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gIFx0XHRcdC8vIGRvbid0IFwic2V0XCIgdGhlIHBhcmVudCB2YWx1ZSwgcmVmaW5lIGl0XG4gIFx0XHRcdC8vIGkuZS4gbm90IGRhdGEgPSB2YWx1ZSwgYnV0IGRhdGFbZm9vXSA9IGZvb1ZhbHVlXG4gIFx0XHRcdGlmIChiaW5kaW5ncyAmJiBkLnJlZmluZVZhbHVlKSB7XG4gIFx0XHRcdFx0YmluZGluZ3MucHVzaChkKTtcbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHRkLnNldFZhbHVlKHZhbHVlKTtcbiAgXHRcdFx0fVxuICBcdFx0fSk7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gbm90aWZ5QmluZGluZ3Modmlld21vZGVsLCBiaW5kaW5ncywgY2hhbmdlcykge1xuXG4gIFx0YmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmluZGluZykge1xuICBcdFx0dmFyIHVzZVNldCA9IGZhbHNlLFxuICBcdFx0ICAgIGkgPSAwLFxuICBcdFx0ICAgIGxlbmd0aCA9IGNoYW5nZXMubGVuZ3RoLFxuICBcdFx0ICAgIHJlZmluZW1lbnRzID0gW107XG5cbiAgXHRcdHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gIFx0XHRcdHZhciBrZXlwYXRoID0gY2hhbmdlc1tpXTtcblxuICBcdFx0XHRpZiAoa2V5cGF0aCA9PT0gYmluZGluZy5rZXlwYXRoKSB7XG4gIFx0XHRcdFx0dXNlU2V0ID0gdHJ1ZTtcbiAgXHRcdFx0XHRicmVhaztcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdGlmIChrZXlwYXRoLnNsaWNlKDAsIGJpbmRpbmcua2V5cGF0aC5sZW5ndGgpID09PSBiaW5kaW5nLmtleXBhdGgpIHtcbiAgXHRcdFx0XHRyZWZpbmVtZW50cy5wdXNoKGtleXBhdGgpO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0aSsrO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodXNlU2V0KSB7XG4gIFx0XHRcdGJpbmRpbmcuc2V0VmFsdWUodmlld21vZGVsLmdldChiaW5kaW5nLmtleXBhdGgpKTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKHJlZmluZW1lbnRzLmxlbmd0aCkge1xuICBcdFx0XHRiaW5kaW5nLnJlZmluZVZhbHVlKHJlZmluZW1lbnRzKTtcbiAgXHRcdH1cbiAgXHR9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeUFsbERlcGVuZGFudHModmlld21vZGVsLCBrZXlwYXRocywgZ3JvdXBOYW1lKSB7XG4gIFx0dmFyIHF1ZXVlID0gW107XG5cbiAgXHRhZGRLZXlwYXRocyhrZXlwYXRocyk7XG4gIFx0cXVldWUuZm9yRWFjaChkaXNwYXRjaCk7XG5cbiAgXHRmdW5jdGlvbiBhZGRLZXlwYXRocyhrZXlwYXRocykge1xuICBcdFx0a2V5cGF0aHMuZm9yRWFjaChhZGRLZXlwYXRoKTtcbiAgXHRcdGtleXBhdGhzLmZvckVhY2goY2FzY2FkZSk7XG4gIFx0fVxuXG4gIFx0ZnVuY3Rpb24gYWRkS2V5cGF0aChrZXlwYXRoKSB7XG4gIFx0XHR2YXIgZGVwcyA9IGZpbmREZXBlbmRhbnRzKHZpZXdtb2RlbCwga2V5cGF0aCwgZ3JvdXBOYW1lKTtcblxuICBcdFx0aWYgKGRlcHMpIHtcbiAgXHRcdFx0cXVldWUucHVzaCh7XG4gIFx0XHRcdFx0a2V5cGF0aDoga2V5cGF0aCxcbiAgXHRcdFx0XHRkZXBzOiBkZXBzXG4gIFx0XHRcdH0pO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGZ1bmN0aW9uIGNhc2NhZGUoa2V5cGF0aCkge1xuICBcdFx0dmFyIGNoaWxkRGVwcztcblxuICBcdFx0aWYgKGNoaWxkRGVwcyA9IHZpZXdtb2RlbC5kZXBzTWFwW2dyb3VwTmFtZV1ba2V5cGF0aC5zdHJdKSB7XG4gIFx0XHRcdGFkZEtleXBhdGhzKGNoaWxkRGVwcyk7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0ZnVuY3Rpb24gZGlzcGF0Y2goc2V0KSB7XG4gIFx0XHR2YXIgdmFsdWUgPSB2aWV3bW9kZWwuZ2V0KHNldC5rZXlwYXRoKTtcbiAgXHRcdHNldC5kZXBzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgXHRcdFx0cmV0dXJuIGQuc2V0VmFsdWUodmFsdWUpO1xuICBcdFx0fSk7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gZmluZERlcGVuZGFudHModmlld21vZGVsLCBrZXlwYXRoLCBncm91cE5hbWUpIHtcbiAgXHR2YXIgZ3JvdXAgPSB2aWV3bW9kZWwuZGVwc1tncm91cE5hbWVdO1xuICBcdHJldHVybiBncm91cCA/IGdyb3VwW2tleXBhdGguc3RyXSA6IG51bGw7XG4gIH1cblxuICB2YXIgY2FwdHVyZSA9IFZpZXdtb2RlbCRjYXB0dXJlO1xuXG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRjYXB0dXJlKCkge1xuICBcdHRoaXMuY2FwdHVyZUdyb3Vwcy5wdXNoKFtdKTtcbiAgfVxuXG4gIHZhciBjbGVhckNhY2hlID0gVmlld21vZGVsJGNsZWFyQ2FjaGU7XG5cbiAgZnVuY3Rpb24gVmlld21vZGVsJGNsZWFyQ2FjaGUoa2V5cGF0aCwga2VlcEV4aXN0aW5nV3JhcHBlcikge1xuICBcdHZhciBjYWNoZU1hcCwgd3JhcHBlcjtcblxuICBcdGlmICgha2VlcEV4aXN0aW5nV3JhcHBlcikge1xuICBcdFx0Ly8gSXMgdGhlcmUgYSB3cmFwcGVkIHByb3BlcnR5IGF0IHRoaXMga2V5cGF0aD9cbiAgXHRcdGlmICh3cmFwcGVyID0gdGhpcy53cmFwcGVkW2tleXBhdGhdKSB7XG4gIFx0XHRcdC8vIERpZCB3ZSB1bndyYXAgaXQ/XG4gIFx0XHRcdGlmICh3cmFwcGVyLnRlYXJkb3duKCkgIT09IGZhbHNlKSB7XG4gIFx0XHRcdFx0Ly8gSXMgdGhpcyByaWdodD9cbiAgXHRcdFx0XHQvLyBXaGF0J3MgdGhlIG1lYW5pbmcgb2YgcmV0dXJuaW5nIGZhbHNlIGZyb20gdGVhcmRvd24/XG4gIFx0XHRcdFx0Ly8gQ291bGQgdGhlcmUgYmUgYSBHQyByYW1pZmljYXRpb24gaWYgdGhpcyBpcyBhIFwicmVhbFwiIHJhY3RpdmUudGVhcmRvd24oKT9cbiAgXHRcdFx0XHR0aGlzLndyYXBwZWRba2V5cGF0aF0gPSBudWxsO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0dGhpcy5jYWNoZVtrZXlwYXRoXSA9IHVuZGVmaW5lZDtcblxuICBcdGlmIChjYWNoZU1hcCA9IHRoaXMuY2FjaGVNYXBba2V5cGF0aF0pIHtcbiAgXHRcdHdoaWxlIChjYWNoZU1hcC5sZW5ndGgpIHtcbiAgXHRcdFx0dGhpcy5jbGVhckNhY2hlKGNhY2hlTWFwLnBvcCgpKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgVW5yZXNvbHZlZERlcGVuZGVuY3kgPSBmdW5jdGlvbiAoY29tcHV0YXRpb24sIHJlZikge1xuICBcdHRoaXMuY29tcHV0YXRpb24gPSBjb21wdXRhdGlvbjtcbiAgXHR0aGlzLnZpZXdtb2RlbCA9IGNvbXB1dGF0aW9uLnZpZXdtb2RlbDtcbiAgXHR0aGlzLnJlZiA9IHJlZjtcblxuICBcdC8vIFRPRE8gdGhpcyBzZWVtcyBsaWtlIGEgcmVkIGZsYWchXG4gIFx0dGhpcy5yb290ID0gdGhpcy52aWV3bW9kZWwucmFjdGl2ZTtcbiAgXHR0aGlzLnBhcmVudEZyYWdtZW50ID0gdGhpcy5yb290LmNvbXBvbmVudCAmJiB0aGlzLnJvb3QuY29tcG9uZW50LnBhcmVudEZyYWdtZW50O1xuICB9O1xuXG4gIFVucmVzb2x2ZWREZXBlbmRlbmN5LnByb3RvdHlwZSA9IHtcbiAgXHRyZXNvbHZlOiBmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0dGhpcy5jb21wdXRhdGlvbi5zb2Z0RGVwcy5wdXNoKGtleXBhdGgpO1xuICBcdFx0dGhpcy5jb21wdXRhdGlvbi51bnJlc29sdmVkRGVwc1trZXlwYXRoLnN0cl0gPSBudWxsO1xuICBcdFx0dGhpcy52aWV3bW9kZWwucmVnaXN0ZXIoa2V5cGF0aCwgdGhpcy5jb21wdXRhdGlvbiwgXCJjb21wdXRlZFwiKTtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIENvbXB1dGF0aW9uX1VucmVzb2x2ZWREZXBlbmRlbmN5ID0gVW5yZXNvbHZlZERlcGVuZGVuY3k7XG5cbiAgdmFyIENvbXB1dGF0aW9uID0gZnVuY3Rpb24gKGtleSwgc2lnbmF0dXJlKSB7XG4gIFx0dGhpcy5rZXkgPSBrZXk7XG5cbiAgXHR0aGlzLmdldHRlciA9IHNpZ25hdHVyZS5nZXR0ZXI7XG4gIFx0dGhpcy5zZXR0ZXIgPSBzaWduYXR1cmUuc2V0dGVyO1xuXG4gIFx0dGhpcy5oYXJkRGVwcyA9IHNpZ25hdHVyZS5kZXBzIHx8IFtdO1xuICBcdHRoaXMuc29mdERlcHMgPSBbXTtcbiAgXHR0aGlzLnVucmVzb2x2ZWREZXBzID0ge307XG5cbiAgXHR0aGlzLmRlcFZhbHVlcyA9IHt9O1xuXG4gIFx0dGhpcy5fZGlydHkgPSB0aGlzLl9maXJzdFJ1biA9IHRydWU7XG4gIH07XG5cbiAgQ29tcHV0YXRpb24ucHJvdG90eXBlID0ge1xuICBcdGNvbnN0cnVjdG9yOiBDb21wdXRhdGlvbixcblxuICBcdGluaXQ6IGZ1bmN0aW9uICh2aWV3bW9kZWwpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdHZhciBpbml0aWFsO1xuXG4gIFx0XHR0aGlzLnZpZXdtb2RlbCA9IHZpZXdtb2RlbDtcbiAgXHRcdHRoaXMuYnlwYXNzID0gdHJ1ZTtcblxuICBcdFx0aW5pdGlhbCA9IHZpZXdtb2RlbC5nZXQodGhpcy5rZXkpO1xuICBcdFx0dmlld21vZGVsLmNsZWFyQ2FjaGUodGhpcy5rZXkuc3RyKTtcblxuICBcdFx0dGhpcy5ieXBhc3MgPSBmYWxzZTtcblxuICBcdFx0aWYgKHRoaXMuc2V0dGVyICYmIGluaXRpYWwgIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHR0aGlzLnNldChpbml0aWFsKTtcbiAgXHRcdH1cblxuICBcdFx0aWYgKHRoaXMuaGFyZERlcHMpIHtcbiAgXHRcdFx0dGhpcy5oYXJkRGVwcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gIFx0XHRcdFx0cmV0dXJuIHZpZXdtb2RlbC5yZWdpc3RlcihkLCBfdGhpcywgXCJjb21wdXRlZFwiKTtcbiAgXHRcdFx0fSk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdGludmFsaWRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgXHR9LFxuXG4gIFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHR2YXIgbmV3RGVwcyxcbiAgXHRcdCAgICBkZXBlbmRlbmNpZXNDaGFuZ2VkLFxuICBcdFx0ICAgIGRlcGVuZGVuY3lWYWx1ZXNDaGFuZ2VkID0gZmFsc2U7XG5cbiAgXHRcdGlmICh0aGlzLmdldHRpbmcpIHtcbiAgXHRcdFx0Ly8gcHJldmVudCBkb3VibGUtY29tcHV0YXRpb24gKGUuZy4gY2F1c2VkIGJ5IGFycmF5IG11dGF0aW9uIGluc2lkZSBjb21wdXRhdGlvbilcbiAgXHRcdFx0dmFyIG1zZyA9IFwiVGhlIFwiICsgdGhpcy5rZXkuc3RyICsgXCIgY29tcHV0YXRpb24gaW5kaXJlY3RseSBjYWxsZWQgaXRzZWxmLiBUaGlzIHByb2JhYmx5IGluZGljYXRlcyBhIGJ1ZyBpbiB0aGUgY29tcHV0YXRpb24uIEl0IGlzIGNvbW1vbmx5IGNhdXNlZCBieSBgYXJyYXkuc29ydCguLi4pYCAtIGlmIHRoYXQncyB0aGUgY2FzZSwgY2xvbmUgdGhlIGFycmF5IGZpcnN0IHdpdGggYGFycmF5LnNsaWNlKCkuc29ydCguLi4pYFwiO1xuICBcdFx0XHR3YXJuT25jZShtc2cpO1xuICBcdFx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5nZXR0aW5nID0gdHJ1ZTtcblxuICBcdFx0aWYgKHRoaXMuX2RpcnR5KSB7XG4gIFx0XHRcdC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSBpbnB1dHMgaGF2ZSBjaGFuZ2VkLCBpbiBjYXNlIHRoaXMgZGVwZW5kcyBvblxuICBcdFx0XHQvLyBvdGhlciBjb21wdXRlZCB2YWx1ZXNcbiAgXHRcdFx0aWYgKHRoaXMuX2ZpcnN0UnVuIHx8ICF0aGlzLmhhcmREZXBzLmxlbmd0aCAmJiAhdGhpcy5zb2Z0RGVwcy5sZW5ndGgpIHtcbiAgXHRcdFx0XHRkZXBlbmRlbmN5VmFsdWVzQ2hhbmdlZCA9IHRydWU7XG4gIFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0W3RoaXMuaGFyZERlcHMsIHRoaXMuc29mdERlcHNdLmZvckVhY2goZnVuY3Rpb24gKGRlcHMpIHtcbiAgXHRcdFx0XHRcdHZhciBrZXlwYXRoLCB2YWx1ZSwgaTtcblxuICBcdFx0XHRcdFx0aWYgKGRlcGVuZGVuY3lWYWx1ZXNDaGFuZ2VkKSB7XG4gIFx0XHRcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0XHRcdH1cblxuICBcdFx0XHRcdFx0aSA9IGRlcHMubGVuZ3RoO1xuICBcdFx0XHRcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRcdFx0XHRrZXlwYXRoID0gZGVwc1tpXTtcbiAgXHRcdFx0XHRcdFx0dmFsdWUgPSBfdGhpcy52aWV3bW9kZWwuZ2V0KGtleXBhdGgpO1xuXG4gIFx0XHRcdFx0XHRcdGlmICghaXNFcXVhbCh2YWx1ZSwgX3RoaXMuZGVwVmFsdWVzW2tleXBhdGguc3RyXSkpIHtcbiAgXHRcdFx0XHRcdFx0XHRfdGhpcy5kZXBWYWx1ZXNba2V5cGF0aC5zdHJdID0gdmFsdWU7XG4gIFx0XHRcdFx0XHRcdFx0ZGVwZW5kZW5jeVZhbHVlc0NoYW5nZWQgPSB0cnVlO1xuXG4gIFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuICBcdFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRpZiAoZGVwZW5kZW5jeVZhbHVlc0NoYW5nZWQpIHtcbiAgXHRcdFx0XHR0aGlzLnZpZXdtb2RlbC5jYXB0dXJlKCk7XG5cbiAgXHRcdFx0XHR0cnkge1xuICBcdFx0XHRcdFx0dGhpcy52YWx1ZSA9IHRoaXMuZ2V0dGVyKCk7XG4gIFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gIFx0XHRcdFx0XHR3YXJuSWZEZWJ1ZyhcIkZhaWxlZCB0byBjb21wdXRlIFxcXCIlc1xcXCJcIiwgdGhpcy5rZXkuc3RyKTtcbiAgXHRcdFx0XHRcdGxvZ0lmRGVidWcoZXJyLnN0YWNrIHx8IGVycik7XG5cbiAgXHRcdFx0XHRcdHRoaXMudmFsdWUgPSB2b2lkIDA7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0bmV3RGVwcyA9IHRoaXMudmlld21vZGVsLnJlbGVhc2UoKTtcbiAgXHRcdFx0XHRkZXBlbmRlbmNpZXNDaGFuZ2VkID0gdGhpcy51cGRhdGVEZXBlbmRlbmNpZXMobmV3RGVwcyk7XG5cbiAgXHRcdFx0XHRpZiAoZGVwZW5kZW5jaWVzQ2hhbmdlZCkge1xuICBcdFx0XHRcdFx0W3RoaXMuaGFyZERlcHMsIHRoaXMuc29mdERlcHNdLmZvckVhY2goZnVuY3Rpb24gKGRlcHMpIHtcbiAgXHRcdFx0XHRcdFx0ZGVwcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdFx0XHRcdFx0X3RoaXMuZGVwVmFsdWVzW2tleXBhdGguc3RyXSA9IF90aGlzLnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG4gIFx0XHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG5cbiAgXHRcdFx0dGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5nZXR0aW5nID0gdGhpcy5fZmlyc3RSdW4gPSBmYWxzZTtcbiAgXHRcdHJldHVybiB0aGlzLnZhbHVlO1xuICBcdH0sXG5cbiAgXHRzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBcdFx0aWYgKHRoaXMuc2V0dGluZykge1xuICBcdFx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0aWYgKCF0aGlzLnNldHRlcikge1xuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb21wdXRlZCBwcm9wZXJ0aWVzIHdpdGhvdXQgc2V0dGVycyBhcmUgcmVhZC1vbmx5LiAoVGhpcyBtYXkgY2hhbmdlIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgUmFjdGl2ZSEpXCIpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLnNldHRlcih2YWx1ZSk7XG4gIFx0fSxcblxuICBcdHVwZGF0ZURlcGVuZGVuY2llczogZnVuY3Rpb24gKG5ld0RlcHMpIHtcbiAgXHRcdHZhciBpLCBvbGREZXBzLCBrZXlwYXRoLCBkZXBlbmRlbmNpZXNDaGFuZ2VkLCB1bnJlc29sdmVkO1xuXG4gIFx0XHRvbGREZXBzID0gdGhpcy5zb2Z0RGVwcztcblxuICBcdFx0Ly8gcmVtb3ZlIGRlcGVuZGVuY2llcyB0aGF0IGFyZSBubyBsb25nZXIgdXNlZFxuICBcdFx0aSA9IG9sZERlcHMubGVuZ3RoO1xuICBcdFx0d2hpbGUgKGktLSkge1xuICBcdFx0XHRrZXlwYXRoID0gb2xkRGVwc1tpXTtcblxuICBcdFx0XHRpZiAobmV3RGVwcy5pbmRleE9mKGtleXBhdGgpID09PSAtMSkge1xuICBcdFx0XHRcdGRlcGVuZGVuY2llc0NoYW5nZWQgPSB0cnVlO1xuICBcdFx0XHRcdHRoaXMudmlld21vZGVsLnVucmVnaXN0ZXIoa2V5cGF0aCwgdGhpcywgXCJjb21wdXRlZFwiKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHQvLyBjcmVhdGUgcmVmZXJlbmNlcyBmb3IgYW55IG5ldyBkZXBlbmRlbmNpZXNcbiAgXHRcdGkgPSBuZXdEZXBzLmxlbmd0aDtcbiAgXHRcdHdoaWxlIChpLS0pIHtcbiAgXHRcdFx0a2V5cGF0aCA9IG5ld0RlcHNbaV07XG5cbiAgXHRcdFx0aWYgKG9sZERlcHMuaW5kZXhPZihrZXlwYXRoKSA9PT0gLTEgJiYgKCF0aGlzLmhhcmREZXBzIHx8IHRoaXMuaGFyZERlcHMuaW5kZXhPZihrZXlwYXRoKSA9PT0gLTEpKSB7XG4gIFx0XHRcdFx0ZGVwZW5kZW5jaWVzQ2hhbmdlZCA9IHRydWU7XG5cbiAgXHRcdFx0XHQvLyBpZiB0aGlzIGtleXBhdGggaXMgY3VycmVudGx5IHVucmVzb2x2ZWQsIHdlIG5lZWQgdG8gbWFya1xuICBcdFx0XHRcdC8vIGl0IGFzIHN1Y2guIFRPRE8gdGhpcyBpcyBhIGJpdCBtdWRkeS4uLlxuICBcdFx0XHRcdGlmIChpc1VucmVzb2x2ZWQodGhpcy52aWV3bW9kZWwsIGtleXBhdGgpICYmICF0aGlzLnVucmVzb2x2ZWREZXBzW2tleXBhdGguc3RyXSkge1xuICBcdFx0XHRcdFx0dW5yZXNvbHZlZCA9IG5ldyBDb21wdXRhdGlvbl9VbnJlc29sdmVkRGVwZW5kZW5jeSh0aGlzLCBrZXlwYXRoLnN0cik7XG4gIFx0XHRcdFx0XHRuZXdEZXBzLnNwbGljZShpLCAxKTtcblxuICBcdFx0XHRcdFx0dGhpcy51bnJlc29sdmVkRGVwc1trZXlwYXRoLnN0cl0gPSB1bnJlc29sdmVkO1xuICBcdFx0XHRcdFx0Z2xvYmFsX3J1bmxvb3AuYWRkVW5yZXNvbHZlZCh1bnJlc29sdmVkKTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0dGhpcy52aWV3bW9kZWwucmVnaXN0ZXIoa2V5cGF0aCwgdGhpcywgXCJjb21wdXRlZFwiKTtcbiAgXHRcdFx0XHR9XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0aWYgKGRlcGVuZGVuY2llc0NoYW5nZWQpIHtcbiAgXHRcdFx0dGhpcy5zb2Z0RGVwcyA9IG5ld0RlcHMuc2xpY2UoKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGRlcGVuZGVuY2llc0NoYW5nZWQ7XG4gIFx0fVxuICB9O1xuXG4gIGZ1bmN0aW9uIGlzVW5yZXNvbHZlZCh2aWV3bW9kZWwsIGtleXBhdGgpIHtcbiAgXHR2YXIga2V5ID0ga2V5cGF0aC5maXJzdEtleTtcblxuICBcdHJldHVybiAhKGtleSBpbiB2aWV3bW9kZWwuZGF0YSkgJiYgIShrZXkgaW4gdmlld21vZGVsLmNvbXB1dGF0aW9ucykgJiYgIShrZXkgaW4gdmlld21vZGVsLm1hcHBpbmdzKTtcbiAgfVxuXG4gIHZhciBDb21wdXRhdGlvbl9Db21wdXRhdGlvbiA9IENvbXB1dGF0aW9uO1xuXG4gIHZhciBjb21wdXRlID0gVmlld21vZGVsJGNvbXB1dGU7XG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRjb21wdXRlKGtleSwgc2lnbmF0dXJlKSB7XG4gIFx0dmFyIGNvbXB1dGF0aW9uID0gbmV3IENvbXB1dGF0aW9uX0NvbXB1dGF0aW9uKGtleSwgc2lnbmF0dXJlKTtcblxuICBcdGlmICh0aGlzLnJlYWR5KSB7XG4gIFx0XHRjb21wdXRhdGlvbi5pbml0KHRoaXMpO1xuICBcdH1cblxuICBcdHJldHVybiB0aGlzLmNvbXB1dGF0aW9uc1trZXkuc3RyXSA9IGNvbXB1dGF0aW9uO1xuICB9XG5cbiAgdmFyIEZBSUxFRF9MT09LVVAgPSB7IEZBSUxFRF9MT09LVVA6IHRydWUgfTtcblxuICB2YXIgdmlld21vZGVsX3Byb3RvdHlwZV9nZXQgPSBWaWV3bW9kZWwkZ2V0O1xuXG4gIHZhciB2aWV3bW9kZWxfcHJvdG90eXBlX2dldF9fZW1wdHkgPSB7fTtcbiAgZnVuY3Rpb24gVmlld21vZGVsJGdldChrZXlwYXRoLCBvcHRpb25zKSB7XG4gIFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZSxcbiAgXHQgICAgdmFsdWUsXG4gIFx0ICAgIGNvbXB1dGF0aW9uLFxuICBcdCAgICB3cmFwcGVkLFxuICBcdCAgICBjYXB0dXJlR3JvdXAsXG4gIFx0ICAgIGtleXBhdGhTdHIgPSBrZXlwYXRoLnN0cixcbiAgXHQgICAga2V5O1xuXG4gIFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwgdmlld21vZGVsX3Byb3RvdHlwZV9nZXRfX2VtcHR5O1xuXG4gIFx0Ly8gY2FwdHVyZSB0aGUga2V5cGF0aCwgaWYgd2UncmUgaW5zaWRlIGEgY29tcHV0YXRpb25cbiAgXHRpZiAob3B0aW9ucy5jYXB0dXJlICYmIChjYXB0dXJlR3JvdXAgPSBsYXN0SXRlbSh0aGlzLmNhcHR1cmVHcm91cHMpKSkge1xuICBcdFx0aWYgKCEgfmNhcHR1cmVHcm91cC5pbmRleE9mKGtleXBhdGgpKSB7XG4gIFx0XHRcdGNhcHR1cmVHcm91cC5wdXNoKGtleXBhdGgpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChoYXNPd24uY2FsbCh0aGlzLm1hcHBpbmdzLCBrZXlwYXRoLmZpcnN0S2V5KSkge1xuICBcdFx0cmV0dXJuIHRoaXMubWFwcGluZ3Nba2V5cGF0aC5maXJzdEtleV0uZ2V0KGtleXBhdGgsIG9wdGlvbnMpO1xuICBcdH1cblxuICBcdGlmIChrZXlwYXRoLmlzU3BlY2lhbCkge1xuICBcdFx0cmV0dXJuIGtleXBhdGgudmFsdWU7XG4gIFx0fVxuXG4gIFx0aWYgKGNhY2hlW2tleXBhdGhTdHJdID09PSB1bmRlZmluZWQpIHtcblxuICBcdFx0Ly8gSXMgdGhpcyBhIGNvbXB1dGVkIHByb3BlcnR5P1xuICBcdFx0aWYgKChjb21wdXRhdGlvbiA9IHRoaXMuY29tcHV0YXRpb25zW2tleXBhdGhTdHJdKSAmJiAhY29tcHV0YXRpb24uYnlwYXNzKSB7XG4gIFx0XHRcdHZhbHVlID0gY29tcHV0YXRpb24uZ2V0KCk7XG4gIFx0XHRcdHRoaXMuYWRhcHQoa2V5cGF0aFN0ciwgdmFsdWUpO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBJcyB0aGlzIGEgd3JhcHBlZCBwcm9wZXJ0eT9cbiAgXHRcdGVsc2UgaWYgKHdyYXBwZWQgPSB0aGlzLndyYXBwZWRba2V5cGF0aFN0cl0pIHtcbiAgXHRcdFx0dmFsdWUgPSB3cmFwcGVkLnZhbHVlO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBJcyBpdCB0aGUgcm9vdD9cbiAgXHRcdGVsc2UgaWYgKGtleXBhdGguaXNSb290KSB7XG4gIFx0XHRcdHRoaXMuYWRhcHQoXCJcIiwgdGhpcy5kYXRhKTtcbiAgXHRcdFx0dmFsdWUgPSB0aGlzLmRhdGE7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIE5vPyBUaGVuIHdlIG5lZWQgdG8gcmV0cmlldmUgdGhlIHZhbHVlIG9uZSBrZXkgYXQgYSB0aW1lXG4gIFx0XHRlbHNlIHtcbiAgXHRcdFx0dmFsdWUgPSByZXRyaWV2ZSh0aGlzLCBrZXlwYXRoKTtcbiAgXHRcdH1cblxuICBcdFx0Y2FjaGVba2V5cGF0aFN0cl0gPSB2YWx1ZTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0dmFsdWUgPSBjYWNoZVtrZXlwYXRoU3RyXTtcbiAgXHR9XG5cbiAgXHRpZiAoIW9wdGlvbnMubm9VbndyYXAgJiYgKHdyYXBwZWQgPSB0aGlzLndyYXBwZWRba2V5cGF0aFN0cl0pKSB7XG4gIFx0XHR2YWx1ZSA9IHdyYXBwZWQuZ2V0KCk7XG4gIFx0fVxuXG4gIFx0aWYgKGtleXBhdGguaXNSb290ICYmIG9wdGlvbnMuZnVsbFJvb3RHZXQpIHtcbiAgXHRcdGZvciAoa2V5IGluIHRoaXMubWFwcGluZ3MpIHtcbiAgXHRcdFx0dmFsdWVba2V5XSA9IHRoaXMubWFwcGluZ3Nba2V5XS5nZXRWYWx1ZSgpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiB2YWx1ZSA9PT0gRkFJTEVEX0xPT0tVUCA/IHZvaWQgMCA6IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0cmlldmUodmlld21vZGVsLCBrZXlwYXRoKSB7XG5cbiAgXHR2YXIgcGFyZW50VmFsdWUsIGNhY2hlTWFwLCB2YWx1ZSwgd3JhcHBlZDtcblxuICBcdHBhcmVudFZhbHVlID0gdmlld21vZGVsLmdldChrZXlwYXRoLnBhcmVudCk7XG5cbiAgXHRpZiAod3JhcHBlZCA9IHZpZXdtb2RlbC53cmFwcGVkW2tleXBhdGgucGFyZW50LnN0cl0pIHtcbiAgXHRcdHBhcmVudFZhbHVlID0gd3JhcHBlZC5nZXQoKTtcbiAgXHR9XG5cbiAgXHRpZiAocGFyZW50VmFsdWUgPT09IG51bGwgfHwgcGFyZW50VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICBcdFx0cmV0dXJuO1xuICBcdH1cblxuICBcdC8vIHVwZGF0ZSBjYWNoZSBtYXBcbiAgXHRpZiAoIShjYWNoZU1hcCA9IHZpZXdtb2RlbC5jYWNoZU1hcFtrZXlwYXRoLnBhcmVudC5zdHJdKSkge1xuICBcdFx0dmlld21vZGVsLmNhY2hlTWFwW2tleXBhdGgucGFyZW50LnN0cl0gPSBba2V5cGF0aC5zdHJdO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRpZiAoY2FjaGVNYXAuaW5kZXhPZihrZXlwYXRoLnN0cikgPT09IC0xKSB7XG4gIFx0XHRcdGNhY2hlTWFwLnB1c2goa2V5cGF0aC5zdHIpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdC8vIElmIHRoaXMgcHJvcGVydHkgZG9lc24ndCBleGlzdCwgd2UgcmV0dXJuIGEgc2VudGluZWwgdmFsdWVcbiAgXHQvLyBzbyB0aGF0IHdlIGtub3cgdG8gcXVlcnkgcGFyZW50IHNjb3BlIChpZiBzdWNoIHRoZXJlIGJlKVxuICBcdGlmICh0eXBlb2YgcGFyZW50VmFsdWUgPT09IFwib2JqZWN0XCIgJiYgIShrZXlwYXRoLmxhc3RLZXkgaW4gcGFyZW50VmFsdWUpKSB7XG4gIFx0XHRyZXR1cm4gdmlld21vZGVsLmNhY2hlW2tleXBhdGguc3RyXSA9IEZBSUxFRF9MT09LVVA7XG4gIFx0fVxuXG4gIFx0dmFsdWUgPSBwYXJlbnRWYWx1ZVtrZXlwYXRoLmxhc3RLZXldO1xuXG4gIFx0Ly8gRG8gd2UgaGF2ZSBhbiBhZGFwdG9yIGZvciB0aGlzIHZhbHVlP1xuICBcdHZpZXdtb2RlbC5hZGFwdChrZXlwYXRoLnN0ciwgdmFsdWUsIGZhbHNlKTtcblxuICBcdC8vIFVwZGF0ZSBjYWNoZVxuICBcdHZpZXdtb2RlbC5jYWNoZVtrZXlwYXRoLnN0cl0gPSB2YWx1ZTtcbiAgXHRyZXR1cm4gdmFsdWU7XG4gIH1cblxuICB2YXIgdmlld21vZGVsX3Byb3RvdHlwZV9pbml0ID0gVmlld21vZGVsJGluaXQ7XG5cbiAgZnVuY3Rpb24gVmlld21vZGVsJGluaXQoKSB7XG4gIFx0dmFyIGtleTtcblxuICBcdGZvciAoa2V5IGluIHRoaXMuY29tcHV0YXRpb25zKSB7XG4gIFx0XHR0aGlzLmNvbXB1dGF0aW9uc1trZXldLmluaXQodGhpcyk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9tYXAgPSBWaWV3bW9kZWwkbWFwO1xuXG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRtYXAoa2V5LCBvcHRpb25zKSB7XG4gIFx0dmFyIG1hcHBpbmcgPSB0aGlzLm1hcHBpbmdzW2tleS5zdHJdID0gbmV3IE1hcHBpbmcoa2V5LCBvcHRpb25zKTtcbiAgXHRtYXBwaW5nLmluaXRWaWV3bW9kZWwodGhpcyk7XG4gIFx0cmV0dXJuIG1hcHBpbmc7XG4gIH1cblxuICB2YXIgTWFwcGluZyA9IGZ1bmN0aW9uIChsb2NhbEtleSwgb3B0aW9ucykge1xuICBcdHRoaXMubG9jYWxLZXkgPSBsb2NhbEtleTtcbiAgXHR0aGlzLmtleXBhdGggPSBvcHRpb25zLmtleXBhdGg7XG4gIFx0dGhpcy5vcmlnaW4gPSBvcHRpb25zLm9yaWdpbjtcblxuICBcdHRoaXMuZGVwcyA9IFtdO1xuICBcdHRoaXMudW5yZXNvbHZlZCA9IFtdO1xuXG4gIFx0dGhpcy5yZXNvbHZlZCA9IGZhbHNlO1xuICB9O1xuXG4gIE1hcHBpbmcucHJvdG90eXBlID0ge1xuICBcdGZvcmNlUmVzb2x1dGlvbjogZnVuY3Rpb24gKCkge1xuICBcdFx0Ly8gVE9ETyB3YXJuLCBhcyBwZXIgIzE2OTI/XG4gIFx0XHR0aGlzLmtleXBhdGggPSB0aGlzLmxvY2FsS2V5O1xuICBcdFx0dGhpcy5zZXR1cCgpO1xuICBcdH0sXG5cbiAgXHRnZXQ6IGZ1bmN0aW9uIChrZXlwYXRoLCBvcHRpb25zKSB7XG4gIFx0XHRpZiAoIXRoaXMucmVzb2x2ZWQpIHtcbiAgXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcbiAgXHRcdH1cbiAgXHRcdHJldHVybiB0aGlzLm9yaWdpbi5nZXQodGhpcy5tYXAoa2V5cGF0aCksIG9wdGlvbnMpO1xuICBcdH0sXG5cbiAgXHRnZXRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLmtleXBhdGgpIHtcbiAgXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcbiAgXHRcdH1cbiAgXHRcdHJldHVybiB0aGlzLm9yaWdpbi5nZXQodGhpcy5rZXlwYXRoKTtcbiAgXHR9LFxuXG4gIFx0aW5pdFZpZXdtb2RlbDogZnVuY3Rpb24gKHZpZXdtb2RlbCkge1xuICBcdFx0dGhpcy5sb2NhbCA9IHZpZXdtb2RlbDtcbiAgXHRcdHRoaXMuc2V0dXAoKTtcbiAgXHR9LFxuXG4gIFx0bWFwOiBmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0aWYgKHR5cGVvZiB0aGlzLmtleXBhdGggPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRyZXR1cm4gdGhpcy5sb2NhbEtleTtcbiAgXHRcdH1cbiAgXHRcdHJldHVybiBrZXlwYXRoLnJlcGxhY2UodGhpcy5sb2NhbEtleSwgdGhpcy5rZXlwYXRoKTtcbiAgXHR9LFxuXG4gIFx0cmVnaXN0ZXI6IGZ1bmN0aW9uIChrZXlwYXRoLCBkZXBlbmRhbnQsIGdyb3VwKSB7XG4gIFx0XHR0aGlzLmRlcHMucHVzaCh7IGtleXBhdGg6IGtleXBhdGgsIGRlcDogZGVwZW5kYW50LCBncm91cDogZ3JvdXAgfSk7XG5cbiAgXHRcdGlmICh0aGlzLnJlc29sdmVkKSB7XG4gIFx0XHRcdHRoaXMub3JpZ2luLnJlZ2lzdGVyKHRoaXMubWFwKGtleXBhdGgpLCBkZXBlbmRhbnQsIGdyb3VwKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0cmVzb2x2ZTogZnVuY3Rpb24gKGtleXBhdGgpIHtcbiAgXHRcdGlmICh0aGlzLmtleXBhdGggIT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHR0aGlzLnVuYmluZCh0cnVlKTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5rZXlwYXRoID0ga2V5cGF0aDtcbiAgXHRcdHRoaXMuc2V0dXAoKTtcbiAgXHR9LFxuXG4gIFx0c2V0OiBmdW5jdGlvbiAoa2V5cGF0aCwgdmFsdWUpIHtcbiAgXHRcdGlmICghdGhpcy5yZXNvbHZlZCkge1xuICBcdFx0XHR0aGlzLmZvcmNlUmVzb2x1dGlvbigpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLm9yaWdpbi5zZXQodGhpcy5tYXAoa2V5cGF0aCksIHZhbHVlKTtcbiAgXHR9LFxuXG4gIFx0c2V0dXA6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdGlmICh0aGlzLmtleXBhdGggPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMucmVzb2x2ZWQgPSB0cnVlO1xuXG4gIFx0XHQvLyBhY2N1bXVsYXRlZCBkZXBlbmRhbnRzIGNhbiBub3cgYmUgcmVnaXN0ZXJlZFxuICBcdFx0aWYgKHRoaXMuZGVwcy5sZW5ndGgpIHtcbiAgXHRcdFx0dGhpcy5kZXBzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgXHRcdFx0XHR2YXIga2V5cGF0aCA9IF90aGlzLm1hcChkLmtleXBhdGgpO1xuICBcdFx0XHRcdF90aGlzLm9yaWdpbi5yZWdpc3RlcihrZXlwYXRoLCBkLmRlcCwgZC5ncm91cCk7XG5cbiAgXHRcdFx0XHQvLyBUT0RPIHRoaXMgaXMgYSBiaXQgb2YgYSByZWQgZmxhZy4uLiBhbGwgZGVwcyBzaG91bGQgYmUgdGhlIHNhbWU/XG4gIFx0XHRcdFx0aWYgKGQuZGVwLnNldFZhbHVlKSB7XG4gIFx0XHRcdFx0XHRkLmRlcC5zZXRWYWx1ZShfdGhpcy5vcmlnaW4uZ2V0KGtleXBhdGgpKTtcbiAgXHRcdFx0XHR9IGVsc2UgaWYgKGQuZGVwLmludmFsaWRhdGUpIHtcbiAgXHRcdFx0XHRcdGQuZGVwLmludmFsaWRhdGUoKTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHJhaXNlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWN0aXZlanMvcmFjdGl2ZS9pc3N1ZXMgLSB0aGFua3MhXCIpO1xuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSk7XG5cbiAgXHRcdFx0dGhpcy5vcmlnaW4ubWFyayh0aGlzLmtleXBhdGgpO1xuICBcdFx0fVxuICBcdH0sXG5cbiAgXHRzZXRWYWx1ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gIFx0XHRpZiAoIXRoaXMua2V5cGF0aCkge1xuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJNYXBwaW5nIGRvZXMgbm90IGhhdmUga2V5cGF0aCwgY2Fubm90IHNldCB2YWx1ZS4gUGxlYXNlIHJhaXNlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWN0aXZlanMvcmFjdGl2ZS9pc3N1ZXMgLSB0aGFua3MhXCIpO1xuICBcdFx0fVxuXG4gIFx0XHR0aGlzLm9yaWdpbi5zZXQodGhpcy5rZXlwYXRoLCB2YWx1ZSk7XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKGtlZXBMb2NhbCkge1xuICBcdFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdFx0aWYgKCFrZWVwTG9jYWwpIHtcbiAgXHRcdFx0ZGVsZXRlIHRoaXMubG9jYWwubWFwcGluZ3NbdGhpcy5sb2NhbEtleV07XG4gIFx0XHR9XG5cbiAgXHRcdGlmICghdGhpcy5yZXNvbHZlZCkge1xuICBcdFx0XHRyZXR1cm47XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMuZGVwcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gIFx0XHRcdF90aGlzLm9yaWdpbi51bnJlZ2lzdGVyKF90aGlzLm1hcChkLmtleXBhdGgpLCBkLmRlcCwgZC5ncm91cCk7XG4gIFx0XHR9KTtcblxuICBcdFx0aWYgKHRoaXMudHJhY2tlcikge1xuICBcdFx0XHR0aGlzLm9yaWdpbi51bnJlZ2lzdGVyKHRoaXMua2V5cGF0aCwgdGhpcy50cmFja2VyKTtcbiAgXHRcdH1cbiAgXHR9LFxuXG4gIFx0dW5yZWdpc3RlcjogZnVuY3Rpb24gKGtleXBhdGgsIGRlcGVuZGFudCwgZ3JvdXApIHtcbiAgXHRcdHZhciBkZXBzLCBpO1xuXG4gIFx0XHRpZiAoIXRoaXMucmVzb2x2ZWQpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHRkZXBzID0gdGhpcy5kZXBzO1xuICBcdFx0aSA9IGRlcHMubGVuZ3RoO1xuXG4gIFx0XHR3aGlsZSAoaS0tKSB7XG4gIFx0XHRcdGlmIChkZXBzW2ldLmRlcCA9PT0gZGVwZW5kYW50KSB7XG4gIFx0XHRcdFx0ZGVwcy5zcGxpY2UoaSwgMSk7XG4gIFx0XHRcdFx0YnJlYWs7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHRcdHRoaXMub3JpZ2luLnVucmVnaXN0ZXIodGhpcy5tYXAoa2V5cGF0aCksIGRlcGVuZGFudCwgZ3JvdXApO1xuICBcdH1cbiAgfTtcblxuICB2YXIgbWFyayA9IFZpZXdtb2RlbCRtYXJrO1xuXG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRtYXJrKGtleXBhdGgsIG9wdGlvbnMpIHtcbiAgXHR2YXIgY29tcHV0YXRpb24sXG4gIFx0ICAgIGtleXBhdGhTdHIgPSBrZXlwYXRoLnN0cjtcblxuICBcdC8vIGltcGxpY2l0IGNoYW5nZXMgKGkuZS4gYGZvby5sZW5ndGhgIG9uIGByYWN0aXZlLnB1c2goJ2ZvbycsNDIpYClcbiAgXHQvLyBzaG91bGQgbm90IGJlIHBpY2tlZCB1cCBieSBwYXR0ZXJuIG9ic2VydmVyc1xuICBcdGlmIChvcHRpb25zKSB7XG4gIFx0XHRpZiAob3B0aW9ucy5pbXBsaWNpdCkge1xuICBcdFx0XHR0aGlzLmltcGxpY2l0Q2hhbmdlc1trZXlwYXRoU3RyXSA9IHRydWU7XG4gIFx0XHR9XG4gIFx0XHRpZiAob3B0aW9ucy5ub0Nhc2NhZGUpIHtcbiAgXHRcdFx0dGhpcy5ub0Nhc2NhZGVba2V5cGF0aFN0cl0gPSB0cnVlO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChjb21wdXRhdGlvbiA9IHRoaXMuY29tcHV0YXRpb25zW2tleXBhdGhTdHJdKSB7XG4gIFx0XHRjb21wdXRhdGlvbi5pbnZhbGlkYXRlKCk7XG4gIFx0fVxuXG4gIFx0aWYgKHRoaXMuY2hhbmdlcy5pbmRleE9mKGtleXBhdGgpID09PSAtMSkge1xuICBcdFx0dGhpcy5jaGFuZ2VzLnB1c2goa2V5cGF0aCk7XG4gIFx0fVxuXG4gIFx0Ly8gcGFzcyBvbiBrZWVwRXhpc3RpbmdXcmFwcGVyLCBpZiB3ZSBjYW5cbiAgXHR2YXIga2VlcEV4aXN0aW5nV3JhcHBlciA9IG9wdGlvbnMgPyBvcHRpb25zLmtlZXBFeGlzdGluZ1dyYXBwZXIgOiBmYWxzZTtcblxuICBcdHRoaXMuY2xlYXJDYWNoZShrZXlwYXRoU3RyLCBrZWVwRXhpc3RpbmdXcmFwcGVyKTtcblxuICBcdGlmICh0aGlzLnJlYWR5KSB7XG4gIFx0XHR0aGlzLm9uY2hhbmdlKCk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIG1hcE9sZFRvTmV3SW5kZXggPSBmdW5jdGlvbiAob2xkQXJyYXksIG5ld0FycmF5KSB7XG4gIFx0dmFyIHVzZWRJbmRpY2VzLCBmaXJzdFVudXNlZEluZGV4LCBuZXdJbmRpY2VzLCBjaGFuZ2VkO1xuXG4gIFx0dXNlZEluZGljZXMgPSB7fTtcbiAgXHRmaXJzdFVudXNlZEluZGV4ID0gMDtcblxuICBcdG5ld0luZGljZXMgPSBvbGRBcnJheS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgXHRcdHZhciBpbmRleCwgc3RhcnQsIGxlbjtcblxuICBcdFx0c3RhcnQgPSBmaXJzdFVudXNlZEluZGV4O1xuICBcdFx0bGVuID0gbmV3QXJyYXkubGVuZ3RoO1xuXG4gIFx0XHRkbyB7XG4gIFx0XHRcdGluZGV4ID0gbmV3QXJyYXkuaW5kZXhPZihpdGVtLCBzdGFydCk7XG5cbiAgXHRcdFx0aWYgKGluZGV4ID09PSAtMSkge1xuICBcdFx0XHRcdGNoYW5nZWQgPSB0cnVlO1xuICBcdFx0XHRcdHJldHVybiAtMTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHN0YXJ0ID0gaW5kZXggKyAxO1xuICBcdFx0fSB3aGlsZSAodXNlZEluZGljZXNbaW5kZXhdICYmIHN0YXJ0IDwgbGVuKTtcblxuICBcdFx0Ly8ga2VlcCB0cmFjayBvZiB0aGUgZmlyc3QgdW51c2VkIGluZGV4LCBzbyB3ZSBkb24ndCBzZWFyY2hcbiAgXHRcdC8vIHRoZSB3aG9sZSBvZiBuZXdBcnJheSBmb3IgZWFjaCBpdGVtIGluIG9sZEFycmF5IHVubmVjZXNzYXJpbHlcbiAgXHRcdGlmIChpbmRleCA9PT0gZmlyc3RVbnVzZWRJbmRleCkge1xuICBcdFx0XHRmaXJzdFVudXNlZEluZGV4ICs9IDE7XG4gIFx0XHR9XG5cbiAgXHRcdGlmIChpbmRleCAhPT0gaSkge1xuICBcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcbiAgXHRcdH1cblxuICBcdFx0dXNlZEluZGljZXNbaW5kZXhdID0gdHJ1ZTtcbiAgXHRcdHJldHVybiBpbmRleDtcbiAgXHR9KTtcblxuICBcdHJldHVybiBuZXdJbmRpY2VzO1xuICB9O1xuXG4gIHZhciBtZXJnZSA9IFZpZXdtb2RlbCRtZXJnZTtcblxuICB2YXIgY29tcGFyYXRvcnMgPSB7fTtcbiAgZnVuY3Rpb24gVmlld21vZGVsJG1lcmdlKGtleXBhdGgsIGN1cnJlbnRBcnJheSwgYXJyYXksIG9wdGlvbnMpIHtcbiAgXHR2YXIgb2xkQXJyYXksIG5ld0FycmF5LCBjb21wYXJhdG9yLCBuZXdJbmRpY2VzO1xuXG4gIFx0dGhpcy5tYXJrKGtleXBhdGgpO1xuXG4gIFx0aWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5jb21wYXJlKSB7XG5cbiAgXHRcdGNvbXBhcmF0b3IgPSBnZXRDb21wYXJhdG9yRnVuY3Rpb24ob3B0aW9ucy5jb21wYXJlKTtcblxuICBcdFx0dHJ5IHtcbiAgXHRcdFx0b2xkQXJyYXkgPSBjdXJyZW50QXJyYXkubWFwKGNvbXBhcmF0b3IpO1xuICBcdFx0XHRuZXdBcnJheSA9IGFycmF5Lm1hcChjb21wYXJhdG9yKTtcbiAgXHRcdH0gY2F0Y2ggKGVycikge1xuICBcdFx0XHQvLyBmYWxsYmFjayB0byBhbiBpZGVudGl0eSBjaGVjayAtIHdvcnN0IGNhc2Ugc2NlbmFyaW8gd2UgaGF2ZVxuICBcdFx0XHQvLyB0byBkbyBtb3JlIERPTSBtYW5pcHVsYXRpb24gdGhhbiB3ZSB0aG91Z2h0Li4uXG4gIFx0XHRcdHdhcm5JZkRlYnVnKFwibWVyZ2UoKTogXFxcIiVzXFxcIiBjb21wYXJpc29uIGZhaWxlZC4gRmFsbGluZyBiYWNrIHRvIGlkZW50aXR5IGNoZWNraW5nXCIsIGtleXBhdGgpO1xuXG4gIFx0XHRcdG9sZEFycmF5ID0gY3VycmVudEFycmF5O1xuICBcdFx0XHRuZXdBcnJheSA9IGFycmF5O1xuICBcdFx0fVxuICBcdH0gZWxzZSB7XG4gIFx0XHRvbGRBcnJheSA9IGN1cnJlbnRBcnJheTtcbiAgXHRcdG5ld0FycmF5ID0gYXJyYXk7XG4gIFx0fVxuXG4gIFx0Ly8gZmluZCBuZXcgaW5kaWNlcyBmb3IgbWVtYmVycyBvZiBvbGRBcnJheVxuICBcdG5ld0luZGljZXMgPSBtYXBPbGRUb05ld0luZGV4KG9sZEFycmF5LCBuZXdBcnJheSk7XG5cbiAgXHR0aGlzLnNtYXJ0VXBkYXRlKGtleXBhdGgsIGFycmF5LCBuZXdJbmRpY2VzLCBjdXJyZW50QXJyYXkubGVuZ3RoICE9PSBhcnJheS5sZW5ndGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RyaW5naWZ5KGl0ZW0pIHtcbiAgXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb21wYXJhdG9yRnVuY3Rpb24oY29tcGFyYXRvcikge1xuICBcdC8vIElmIGBjb21wYXJlYCBpcyBgdHJ1ZWAsIHdlIHVzZSBKU09OLnN0cmluZ2lmeSB0byBjb21wYXJlXG4gIFx0Ly8gb2JqZWN0cyB0aGF0IGFyZSB0aGUgc2FtZSBzaGFwZSwgYnV0IG5vbi1pZGVudGljYWwgLSBpLmUuXG4gIFx0Ly8geyBmb286ICdiYXInIH0gIT09IHsgZm9vOiAnYmFyJyB9XG4gIFx0aWYgKGNvbXBhcmF0b3IgPT09IHRydWUpIHtcbiAgXHRcdHJldHVybiBzdHJpbmdpZnk7XG4gIFx0fVxuXG4gIFx0aWYgKHR5cGVvZiBjb21wYXJhdG9yID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRpZiAoIWNvbXBhcmF0b3JzW2NvbXBhcmF0b3JdKSB7XG4gIFx0XHRcdGNvbXBhcmF0b3JzW2NvbXBhcmF0b3JdID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgXHRcdFx0XHRyZXR1cm4gaXRlbVtjb21wYXJhdG9yXTtcbiAgXHRcdFx0fTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGNvbXBhcmF0b3JzW2NvbXBhcmF0b3JdO1xuICBcdH1cblxuICBcdGlmICh0eXBlb2YgY29tcGFyYXRvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRyZXR1cm4gY29tcGFyYXRvcjtcbiAgXHR9XG5cbiAgXHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYGNvbXBhcmVgIG9wdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb24sIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBpZGVudGlmeWluZyBmaWVsZCAob3IgYHRydWVgIHRvIHVzZSBKU09OLnN0cmluZ2lmeSlcIik7XG4gIH1cblxuICB2YXIgcmVnaXN0ZXIgPSBWaWV3bW9kZWwkcmVnaXN0ZXI7XG5cbiAgZnVuY3Rpb24gVmlld21vZGVsJHJlZ2lzdGVyKGtleXBhdGgsIGRlcGVuZGFudCkge1xuICBcdHZhciBncm91cCA9IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gXCJkZWZhdWx0XCIgOiBhcmd1bWVudHNbMl07XG5cbiAgXHR2YXIgbWFwcGluZywgZGVwc0J5S2V5cGF0aCwgZGVwcztcblxuICBcdGlmIChkZXBlbmRhbnQuaXNTdGF0aWMpIHtcbiAgXHRcdHJldHVybjsgLy8gVE9ETyB3ZSBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUgaWYgYSBkZXBlbmRhbnQgaXMgc3RhdGljLi4uXG4gIFx0fVxuXG4gIFx0aWYgKG1hcHBpbmcgPSB0aGlzLm1hcHBpbmdzW2tleXBhdGguZmlyc3RLZXldKSB7XG4gIFx0XHRtYXBwaW5nLnJlZ2lzdGVyKGtleXBhdGgsIGRlcGVuZGFudCwgZ3JvdXApO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRkZXBzQnlLZXlwYXRoID0gdGhpcy5kZXBzW2dyb3VwXSB8fCAodGhpcy5kZXBzW2dyb3VwXSA9IHt9KTtcbiAgXHRcdGRlcHMgPSBkZXBzQnlLZXlwYXRoW2tleXBhdGguc3RyXSB8fCAoZGVwc0J5S2V5cGF0aFtrZXlwYXRoLnN0cl0gPSBbXSk7XG5cbiAgXHRcdGRlcHMucHVzaChkZXBlbmRhbnQpO1xuXG4gIFx0XHRpZiAoIXRoaXMuZGVwc01hcFtncm91cF0pIHtcbiAgXHRcdFx0dGhpcy5kZXBzTWFwW2dyb3VwXSA9IHt9O1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIWtleXBhdGguaXNSb290KSB7XG4gIFx0XHRcdHJlZ2lzdGVyX191cGRhdGVEZXBlbmRhbnRzTWFwKHRoaXMsIGtleXBhdGgsIGdyb3VwKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3Rlcl9fdXBkYXRlRGVwZW5kYW50c01hcCh2aWV3bW9kZWwsIGtleXBhdGgsIGdyb3VwKSB7XG4gIFx0dmFyIG1hcCwgcGFyZW50LCBrZXlwYXRoU3RyO1xuXG4gIFx0Ly8gdXBkYXRlIGRlcGVuZGFudHMgbWFwXG4gIFx0d2hpbGUgKCFrZXlwYXRoLmlzUm9vdCkge1xuICBcdFx0bWFwID0gdmlld21vZGVsLmRlcHNNYXBbZ3JvdXBdO1xuICBcdFx0cGFyZW50ID0gbWFwW2tleXBhdGgucGFyZW50LnN0cl0gfHwgKG1hcFtrZXlwYXRoLnBhcmVudC5zdHJdID0gW10pO1xuXG4gIFx0XHRrZXlwYXRoU3RyID0ga2V5cGF0aC5zdHI7XG5cbiAgXHRcdC8vIFRPRE8gZmluZCBhbiBhbHRlcm5hdGl2ZSB0byB0aGlzIG5hc3R5IGFwcHJvYWNoXG4gIFx0XHRpZiAocGFyZW50W1wiX1wiICsga2V5cGF0aFN0cl0gPT09IHVuZGVmaW5lZCkge1xuICBcdFx0XHRwYXJlbnRbXCJfXCIgKyBrZXlwYXRoU3RyXSA9IDA7XG4gIFx0XHRcdHBhcmVudC5wdXNoKGtleXBhdGgpO1xuICBcdFx0fVxuXG4gIFx0XHRwYXJlbnRbXCJfXCIgKyBrZXlwYXRoU3RyXSArPSAxO1xuICBcdFx0a2V5cGF0aCA9IGtleXBhdGgucGFyZW50O1xuICBcdH1cbiAgfVxuXG4gIHZhciByZWxlYXNlID0gVmlld21vZGVsJHJlbGVhc2U7XG5cbiAgZnVuY3Rpb24gVmlld21vZGVsJHJlbGVhc2UoKSB7XG4gIFx0cmV0dXJuIHRoaXMuY2FwdHVyZUdyb3Vwcy5wb3AoKTtcbiAgfVxuXG4gIHZhciByZXNldCA9IFZpZXdtb2RlbCRyZXNldDtcblxuICBmdW5jdGlvbiBWaWV3bW9kZWwkcmVzZXQoZGF0YSkge1xuICBcdHRoaXMuZGF0YSA9IGRhdGE7XG4gIFx0dGhpcy5jbGVhckNhY2hlKFwiXCIpO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV9zZXQgPSBWaWV3bW9kZWwkc2V0O1xuXG4gIGZ1bmN0aW9uIFZpZXdtb2RlbCRzZXQoa2V5cGF0aCwgdmFsdWUpIHtcbiAgXHR2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cbiAgXHR2YXIgbWFwcGluZywgY29tcHV0YXRpb24sIHdyYXBwZXIsIGtlZXBFeGlzdGluZ1dyYXBwZXI7XG5cbiAgXHQvLyB1bmxlc3MgZGF0YSBpcyBiZWluZyBzZXQgZm9yIGRhdGEgdHJhY2tpbmcgcHVycG9zZXNcbiAgXHRpZiAoIW9wdGlvbnMubm9NYXBwaW5nKSB7XG4gIFx0XHQvLyBJZiB0aGlzIGRhdGEgYmVsb25ncyB0byBhIGRpZmZlcmVudCB2aWV3bW9kZWwsXG4gIFx0XHQvLyBwYXNzIHRoZSBjaGFuZ2UgYWxvbmdcbiAgXHRcdGlmIChtYXBwaW5nID0gdGhpcy5tYXBwaW5nc1trZXlwYXRoLmZpcnN0S2V5XSkge1xuICBcdFx0XHRyZXR1cm4gbWFwcGluZy5zZXQoa2V5cGF0aCwgdmFsdWUpO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGNvbXB1dGF0aW9uID0gdGhpcy5jb21wdXRhdGlvbnNba2V5cGF0aC5zdHJdO1xuICBcdGlmIChjb21wdXRhdGlvbikge1xuICBcdFx0aWYgKGNvbXB1dGF0aW9uLnNldHRpbmcpIHtcbiAgXHRcdFx0Ly8gbGV0IHRoZSBvdGhlciBjb21wdXRhdGlvbiBzZXQoKSBoYW5kbGUgdGhpbmdzLi4uXG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cbiAgXHRcdGNvbXB1dGF0aW9uLnNldCh2YWx1ZSk7XG4gIFx0XHR2YWx1ZSA9IGNvbXB1dGF0aW9uLmdldCgpO1xuICBcdH1cblxuICBcdGlmIChpc0VxdWFsKHRoaXMuY2FjaGVba2V5cGF0aC5zdHJdLCB2YWx1ZSkpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHR3cmFwcGVyID0gdGhpcy53cmFwcGVkW2tleXBhdGguc3RyXTtcblxuICBcdC8vIElmIHdlIGhhdmUgYSB3cmFwcGVyIHdpdGggYSBgcmVzZXQoKWAgbWV0aG9kLCB3ZSB0cnkgYW5kIHVzZSBpdC4gSWYgdGhlXG4gIFx0Ly8gYHJlc2V0KClgIG1ldGhvZCByZXR1cm5zIGZhbHNlLCB0aGUgd3JhcHBlciBzaG91bGQgYmUgdG9ybiBkb3duLCBhbmRcbiAgXHQvLyAobW9zdCBsaWtlbHkpIGEgbmV3IG9uZSBzaG91bGQgYmUgY3JlYXRlZCBsYXRlclxuICBcdGlmICh3cmFwcGVyICYmIHdyYXBwZXIucmVzZXQpIHtcbiAgXHRcdGtlZXBFeGlzdGluZ1dyYXBwZXIgPSB3cmFwcGVyLnJlc2V0KHZhbHVlKSAhPT0gZmFsc2U7XG5cbiAgXHRcdGlmIChrZWVwRXhpc3RpbmdXcmFwcGVyKSB7XG4gIFx0XHRcdHZhbHVlID0gd3JhcHBlci5nZXQoKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAoIWNvbXB1dGF0aW9uICYmICFrZWVwRXhpc3RpbmdXcmFwcGVyKSB7XG4gIFx0XHRyZXNvbHZlU2V0KHRoaXMsIGtleXBhdGgsIHZhbHVlKTtcbiAgXHR9XG5cbiAgXHRpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gIFx0XHR0aGlzLm1hcmsoa2V5cGF0aCk7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdC8vIFdlJ3JlIHNldHRpbmcgYSBwYXJlbnQgb2YgdGhlIG9yaWdpbmFsIHRhcmdldCBrZXlwYXRoIChpLmUuXG4gIFx0XHQvLyBjcmVhdGluZyBhIGZyZXNoIGJyYW5jaCkgLSB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBjYWNoZSwgYnV0XG4gIFx0XHQvLyBub3QgbWFyayBpdCBhcyBhIGNoYW5nZVxuICBcdFx0dGhpcy5jbGVhckNhY2hlKGtleXBhdGguc3RyKTtcbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlU2V0KHZpZXdtb2RlbCwga2V5cGF0aCwgdmFsdWUpIHtcbiAgXHR2YXIgd3JhcHBlciwgcGFyZW50VmFsdWUsIHdyYXBwZXJTZXQsIHZhbHVlU2V0O1xuXG4gIFx0d3JhcHBlclNldCA9IGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmICh3cmFwcGVyLnNldCkge1xuICBcdFx0XHR3cmFwcGVyLnNldChrZXlwYXRoLmxhc3RLZXksIHZhbHVlKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdHBhcmVudFZhbHVlID0gd3JhcHBlci5nZXQoKTtcbiAgXHRcdFx0dmFsdWVTZXQoKTtcbiAgXHRcdH1cbiAgXHR9O1xuXG4gIFx0dmFsdWVTZXQgPSBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAoIXBhcmVudFZhbHVlKSB7XG4gIFx0XHRcdHBhcmVudFZhbHVlID0gY3JlYXRlQnJhbmNoKGtleXBhdGgubGFzdEtleSk7XG4gIFx0XHRcdHZpZXdtb2RlbC5zZXQoa2V5cGF0aC5wYXJlbnQsIHBhcmVudFZhbHVlLCB7IHNpbGVudDogdHJ1ZSB9KTtcbiAgXHRcdH1cbiAgXHRcdHBhcmVudFZhbHVlW2tleXBhdGgubGFzdEtleV0gPSB2YWx1ZTtcbiAgXHR9O1xuXG4gIFx0d3JhcHBlciA9IHZpZXdtb2RlbC53cmFwcGVkW2tleXBhdGgucGFyZW50LnN0cl07XG5cbiAgXHRpZiAod3JhcHBlcikge1xuICBcdFx0d3JhcHBlclNldCgpO1xuICBcdH0gZWxzZSB7XG4gIFx0XHRwYXJlbnRWYWx1ZSA9IHZpZXdtb2RlbC5nZXQoa2V5cGF0aC5wYXJlbnQpO1xuXG4gIFx0XHQvLyBtYXkgaGF2ZSBiZWVuIHdyYXBwZWQgdmlhIHRoZSBhYm92ZSAuZ2V0KClcbiAgXHRcdC8vIGNhbGwgb24gdmlld21vZGVsIGlmIHRoaXMgaXMgZmlyc3QgYWNjZXNzIHZpYSAuc2V0KCkhXG4gIFx0XHRpZiAod3JhcHBlciA9IHZpZXdtb2RlbC53cmFwcGVkW2tleXBhdGgucGFyZW50LnN0cl0pIHtcbiAgXHRcdFx0d3JhcHBlclNldCgpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0dmFsdWVTZXQoKTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICB2YXIgc21hcnRVcGRhdGUgPSBWaWV3bW9kZWwkc21hcnRVcGRhdGU7XG5cbiAgdmFyIGltcGxpY2l0T3B0aW9uID0geyBpbXBsaWNpdDogdHJ1ZSB9LFxuICAgICAgbm9DYXNjYWRlT3B0aW9uID0geyBub0Nhc2NhZGU6IHRydWUgfTtcbiAgZnVuY3Rpb24gVmlld21vZGVsJHNtYXJ0VXBkYXRlKGtleXBhdGgsIGFycmF5LCBuZXdJbmRpY2VzKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciBkZXBlbmRhbnRzLCBvbGRMZW5ndGgsIGk7XG5cbiAgXHRvbGRMZW5ndGggPSBuZXdJbmRpY2VzLmxlbmd0aDtcblxuICBcdC8vIEluZGljZXMgdGhhdCBhcmUgYmVpbmcgcmVtb3ZlZCBzaG91bGQgYmUgbWFya2VkIGFzIGRpcnR5XG4gIFx0bmV3SW5kaWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChuZXdJbmRleCwgb2xkSW5kZXgpIHtcbiAgXHRcdGlmIChuZXdJbmRleCA9PT0gLTEpIHtcbiAgXHRcdFx0X3RoaXMubWFyayhrZXlwYXRoLmpvaW4ob2xkSW5kZXgpLCBub0Nhc2NhZGVPcHRpb24pO1xuICBcdFx0fVxuICBcdH0pO1xuXG4gIFx0Ly8gVXBkYXRlIHRoZSBtb2RlbFxuICBcdC8vIFRPRE8gYWxsb3cgZXhpc3RpbmcgYXJyYXkgdG8gYmUgdXBkYXRlZCBpbiBwbGFjZSwgcmF0aGVyIHRoYW4gcmVwbGFjZWQ/XG4gIFx0dGhpcy5zZXQoa2V5cGF0aCwgYXJyYXksIHsgc2lsZW50OiB0cnVlIH0pO1xuXG4gIFx0aWYgKGRlcGVuZGFudHMgPSB0aGlzLmRlcHNbXCJkZWZhdWx0XCJdW2tleXBhdGguc3RyXSkge1xuICBcdFx0ZGVwZW5kYW50cy5maWx0ZXIoY2FuU2h1ZmZsZSkuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICBcdFx0XHRyZXR1cm4gZC5zaHVmZmxlKG5ld0luZGljZXMsIGFycmF5KTtcbiAgXHRcdH0pO1xuICBcdH1cblxuICBcdGlmIChvbGRMZW5ndGggIT09IGFycmF5Lmxlbmd0aCkge1xuICBcdFx0dGhpcy5tYXJrKGtleXBhdGguam9pbihcImxlbmd0aFwiKSwgaW1wbGljaXRPcHRpb24pO1xuXG4gIFx0XHRmb3IgKGkgPSBuZXdJbmRpY2VzLnRvdWNoZWRGcm9tOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IDEpIHtcbiAgXHRcdFx0dGhpcy5tYXJrKGtleXBhdGguam9pbihpKSk7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIGRvbid0IGFsbG93IHJlbW92ZWQgaW5kZXhlcyBiZXlvbmQgZW5kIG9mIG5ldyBhcnJheSB0byB0cmlnZ2VyIHJlY29tcHV0YXRpb25zXG4gIFx0XHQvLyBUT0RPIGlzIHRoaXMgc3RpbGwgbmVjZXNzYXJ5LCBub3cgdGhhdCBjb21wdXRhdGlvbnMgYXJlIGxhenk/XG4gIFx0XHRmb3IgKGkgPSBhcnJheS5sZW5ndGg7IGkgPCBvbGRMZW5ndGg7IGkgKz0gMSkge1xuICBcdFx0XHR0aGlzLm1hcmsoa2V5cGF0aC5qb2luKGkpLCBub0Nhc2NhZGVPcHRpb24pO1xuICBcdFx0fVxuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblNodWZmbGUoZGVwZW5kYW50KSB7XG4gIFx0cmV0dXJuIHR5cGVvZiBkZXBlbmRhbnQuc2h1ZmZsZSA9PT0gXCJmdW5jdGlvblwiO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZV90ZWFyZG93biA9IFZpZXdtb2RlbCR0ZWFyZG93bjtcblxuICBmdW5jdGlvbiBWaWV3bW9kZWwkdGVhcmRvd24oKSB7XG4gIFx0dmFyIF90aGlzID0gdGhpcztcblxuICBcdHZhciB1bnJlc29sdmVkSW1wbGljaXREZXBlbmRlbmN5O1xuXG4gIFx0Ly8gQ2xlYXIgZW50aXJlIGNhY2hlIC0gdGhpcyBoYXMgdGhlIGRlc2lyZWQgc2lkZS1lZmZlY3RcbiAgXHQvLyBvZiB1bndyYXBwaW5nIGFkYXB0ZWQgdmFsdWVzIChlLmcuIGFycmF5cylcbiAgXHRPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRyZXR1cm4gX3RoaXMuY2xlYXJDYWNoZShrZXlwYXRoKTtcbiAgXHR9KTtcblxuICBcdC8vIFRlYXJkb3duIGFueSBmYWlsZWQgbG9va3VwcyAtIHdlIGRvbid0IG5lZWQgdGhlbSB0byByZXNvbHZlIGFueSBtb3JlXG4gIFx0d2hpbGUgKHVucmVzb2x2ZWRJbXBsaWNpdERlcGVuZGVuY3kgPSB0aGlzLnVucmVzb2x2ZWRJbXBsaWNpdERlcGVuZGVuY2llcy5wb3AoKSkge1xuICBcdFx0dW5yZXNvbHZlZEltcGxpY2l0RGVwZW5kZW5jeS50ZWFyZG93bigpO1xuICBcdH1cbiAgfVxuXG4gIHZhciB1bnJlZ2lzdGVyID0gVmlld21vZGVsJHVucmVnaXN0ZXI7XG5cbiAgZnVuY3Rpb24gVmlld21vZGVsJHVucmVnaXN0ZXIoa2V5cGF0aCwgZGVwZW5kYW50KSB7XG4gIFx0dmFyIGdyb3VwID0gYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBcImRlZmF1bHRcIiA6IGFyZ3VtZW50c1syXTtcblxuICBcdHZhciBtYXBwaW5nLCBkZXBzLCBpbmRleDtcblxuICBcdGlmIChkZXBlbmRhbnQuaXNTdGF0aWMpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRpZiAobWFwcGluZyA9IHRoaXMubWFwcGluZ3Nba2V5cGF0aC5maXJzdEtleV0pIHtcbiAgXHRcdHJldHVybiBtYXBwaW5nLnVucmVnaXN0ZXIoa2V5cGF0aCwgZGVwZW5kYW50LCBncm91cCk7XG4gIFx0fVxuXG4gIFx0ZGVwcyA9IHRoaXMuZGVwc1tncm91cF1ba2V5cGF0aC5zdHJdO1xuICBcdGluZGV4ID0gZGVwcy5pbmRleE9mKGRlcGVuZGFudCk7XG5cbiAgXHRpZiAoaW5kZXggPT09IC0xKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gcmVtb3ZlIGEgZGVwZW5kYW50IHRoYXQgd2FzIG5vIGxvbmdlciByZWdpc3RlcmVkISBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBJZiB5b3UgYXJlIHNlZWluZyB0aGlzIGJ1ZyBpbiBkZXZlbG9wbWVudCBwbGVhc2UgcmFpc2UgYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL1JhY3RpdmVKUy9SYWN0aXZlL2lzc3VlcyAtIHRoYW5rc1wiKTtcbiAgXHR9XG5cbiAgXHRkZXBzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgXHRpZiAoa2V5cGF0aC5pc1Jvb3QpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHR1bnJlZ2lzdGVyX191cGRhdGVEZXBlbmRhbnRzTWFwKHRoaXMsIGtleXBhdGgsIGdyb3VwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVucmVnaXN0ZXJfX3VwZGF0ZURlcGVuZGFudHNNYXAodmlld21vZGVsLCBrZXlwYXRoLCBncm91cCkge1xuICBcdHZhciBtYXAsIHBhcmVudDtcblxuICBcdC8vIHVwZGF0ZSBkZXBlbmRhbnRzIG1hcFxuICBcdHdoaWxlICgha2V5cGF0aC5pc1Jvb3QpIHtcbiAgXHRcdG1hcCA9IHZpZXdtb2RlbC5kZXBzTWFwW2dyb3VwXTtcbiAgXHRcdHBhcmVudCA9IG1hcFtrZXlwYXRoLnBhcmVudC5zdHJdO1xuXG4gIFx0XHRwYXJlbnRbXCJfXCIgKyBrZXlwYXRoLnN0cl0gLT0gMTtcblxuICBcdFx0aWYgKCFwYXJlbnRbXCJfXCIgKyBrZXlwYXRoLnN0cl0pIHtcbiAgXHRcdFx0Ly8gcmVtb3ZlIGZyb20gcGFyZW50IGRlcHMgbWFwXG4gIFx0XHRcdHJlbW92ZUZyb21BcnJheShwYXJlbnQsIGtleXBhdGgpO1xuICBcdFx0XHRwYXJlbnRbXCJfXCIgKyBrZXlwYXRoLnN0cl0gPSB1bmRlZmluZWQ7XG4gIFx0XHR9XG5cbiAgXHRcdGtleXBhdGggPSBrZXlwYXRoLnBhcmVudDtcbiAgXHR9XG4gIH1cblxuICB2YXIgVmlld21vZGVsID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHR2YXIgYWRhcHQgPSBvcHRpb25zLmFkYXB0O1xuICBcdHZhciBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICBcdHZhciByYWN0aXZlID0gb3B0aW9ucy5yYWN0aXZlO1xuICBcdHZhciBjb21wdXRlZCA9IG9wdGlvbnMuY29tcHV0ZWQ7XG4gIFx0dmFyIG1hcHBpbmdzID0gb3B0aW9ucy5tYXBwaW5ncztcbiAgXHR2YXIga2V5O1xuICBcdHZhciBtYXBwaW5nO1xuXG4gIFx0Ly8gVE9ETyBpcyBpdCBwb3NzaWJsZSB0byByZW1vdmUgdGhpcyByZWZlcmVuY2U/XG4gIFx0dGhpcy5yYWN0aXZlID0gcmFjdGl2ZTtcblxuICBcdHRoaXMuYWRhcHRvcnMgPSBhZGFwdDtcbiAgXHR0aGlzLm9uY2hhbmdlID0gb3B0aW9ucy5vbmNoYW5nZTtcblxuICBcdHRoaXMuY2FjaGUgPSB7fTsgLy8gd2UgbmVlZCB0byBiZSBhYmxlIHRvIHVzZSBoYXNPd25Qcm9wZXJ0eSwgc28gY2FuJ3QgaW5oZXJpdCBmcm9tIG51bGxcbiAgXHR0aGlzLmNhY2hlTWFwID0gY3JlYXRlKG51bGwpO1xuXG4gIFx0dGhpcy5kZXBzID0ge1xuICBcdFx0Y29tcHV0ZWQ6IGNyZWF0ZShudWxsKSxcbiAgXHRcdFwiZGVmYXVsdFwiOiBjcmVhdGUobnVsbClcbiAgXHR9O1xuICBcdHRoaXMuZGVwc01hcCA9IHtcbiAgXHRcdGNvbXB1dGVkOiBjcmVhdGUobnVsbCksXG4gIFx0XHRcImRlZmF1bHRcIjogY3JlYXRlKG51bGwpXG4gIFx0fTtcblxuICBcdHRoaXMucGF0dGVybk9ic2VydmVycyA9IFtdO1xuXG4gIFx0dGhpcy5zcGVjaWFscyA9IGNyZWF0ZShudWxsKTtcblxuICBcdHRoaXMud3JhcHBlZCA9IGNyZWF0ZShudWxsKTtcbiAgXHR0aGlzLmNvbXB1dGF0aW9ucyA9IGNyZWF0ZShudWxsKTtcblxuICBcdHRoaXMuY2FwdHVyZUdyb3VwcyA9IFtdO1xuICBcdHRoaXMudW5yZXNvbHZlZEltcGxpY2l0RGVwZW5kZW5jaWVzID0gW107XG5cbiAgXHR0aGlzLmNoYW5nZXMgPSBbXTtcbiAgXHR0aGlzLmltcGxpY2l0Q2hhbmdlcyA9IHt9O1xuICBcdHRoaXMubm9DYXNjYWRlID0ge307XG5cbiAgXHR0aGlzLmRhdGEgPSBkYXRhO1xuXG4gIFx0Ly8gc2V0IHVwIGV4cGxpY2l0IG1hcHBpbmdzXG4gIFx0dGhpcy5tYXBwaW5ncyA9IGNyZWF0ZShudWxsKTtcbiAgXHRmb3IgKGtleSBpbiBtYXBwaW5ncykge1xuICBcdFx0dGhpcy5tYXAoZ2V0S2V5cGF0aChrZXkpLCBtYXBwaW5nc1trZXldKTtcbiAgXHR9XG5cbiAgXHRpZiAoZGF0YSkge1xuICBcdFx0Ly8gaWYgZGF0YSBleGlzdHMgbG9jYWxseSwgYnV0IGlzIG1pc3Npbmcgb24gdGhlIHBhcmVudCxcbiAgXHRcdC8vIHdlIHRyYW5zZmVyIG93bmVyc2hpcCB0byB0aGUgcGFyZW50XG4gIFx0XHRmb3IgKGtleSBpbiBkYXRhKSB7XG4gIFx0XHRcdGlmICgobWFwcGluZyA9IHRoaXMubWFwcGluZ3Nba2V5XSkgJiYgbWFwcGluZy5nZXRWYWx1ZSgpID09PSB1bmRlZmluZWQpIHtcbiAgXHRcdFx0XHRtYXBwaW5nLnNldFZhbHVlKGRhdGFba2V5XSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRmb3IgKGtleSBpbiBjb21wdXRlZCkge1xuICBcdFx0aWYgKG1hcHBpbmdzICYmIGtleSBpbiBtYXBwaW5ncykge1xuICBcdFx0XHRmYXRhbChcIkNhbm5vdCBtYXAgdG8gYSBjb21wdXRlZCBwcm9wZXJ0eSAoJyVzJylcIiwga2V5KTtcbiAgXHRcdH1cblxuICBcdFx0dGhpcy5jb21wdXRlKGdldEtleXBhdGgoa2V5KSwgY29tcHV0ZWRba2V5XSk7XG4gIFx0fVxuXG4gIFx0dGhpcy5yZWFkeSA9IHRydWU7XG4gIH07XG5cbiAgVmlld21vZGVsLnByb3RvdHlwZSA9IHtcbiAgXHRhZGFwdDogcHJvdG90eXBlX2FkYXB0LFxuICBcdGFwcGx5Q2hhbmdlczogYXBwbHlDaGFuZ2VzLFxuICBcdGNhcHR1cmU6IGNhcHR1cmUsXG4gIFx0Y2xlYXJDYWNoZTogY2xlYXJDYWNoZSxcbiAgXHRjb21wdXRlOiBjb21wdXRlLFxuICBcdGdldDogdmlld21vZGVsX3Byb3RvdHlwZV9nZXQsXG4gIFx0aW5pdDogdmlld21vZGVsX3Byb3RvdHlwZV9pbml0LFxuICBcdG1hcDogcHJvdG90eXBlX21hcCxcbiAgXHRtYXJrOiBtYXJrLFxuICBcdG1lcmdlOiBtZXJnZSxcbiAgXHRyZWdpc3RlcjogcmVnaXN0ZXIsXG4gIFx0cmVsZWFzZTogcmVsZWFzZSxcbiAgXHRyZXNldDogcmVzZXQsXG4gIFx0c2V0OiBwcm90b3R5cGVfc2V0LFxuICBcdHNtYXJ0VXBkYXRlOiBzbWFydFVwZGF0ZSxcbiAgXHR0ZWFyZG93bjogcHJvdG90eXBlX3RlYXJkb3duLFxuICBcdHVucmVnaXN0ZXI6IHVucmVnaXN0ZXJcbiAgfTtcblxuICB2YXIgdmlld21vZGVsX1ZpZXdtb2RlbCA9IFZpZXdtb2RlbDtcblxuICBmdW5jdGlvbiBIb29rUXVldWUoZXZlbnQpIHtcbiAgXHR0aGlzLmhvb2sgPSBuZXcgaG9va3NfSG9vayhldmVudCk7XG4gIFx0dGhpcy5pblByb2Nlc3MgPSB7fTtcbiAgXHR0aGlzLnF1ZXVlID0ge307XG4gIH1cblxuICBIb29rUXVldWUucHJvdG90eXBlID0ge1xuXG4gIFx0Y29uc3RydWN0b3I6IEhvb2tRdWV1ZSxcblxuICBcdGJlZ2luOiBmdW5jdGlvbiAocmFjdGl2ZSkge1xuICBcdFx0dGhpcy5pblByb2Nlc3NbcmFjdGl2ZS5fZ3VpZF0gPSB0cnVlO1xuICBcdH0sXG5cbiAgXHRlbmQ6IGZ1bmN0aW9uIChyYWN0aXZlKSB7XG5cbiAgXHRcdHZhciBwYXJlbnQgPSByYWN0aXZlLnBhcmVudDtcblxuICBcdFx0Ly8gSWYgdGhpcyBpcyAqaXNuJ3QqIGEgY2hpbGQgb2YgYSBjb21wb25lbnQgdGhhdCdzIGluIHByb2Nlc3MsXG4gIFx0XHQvLyBpdCBzaG91bGQgY2FsbCBtZXRob2RzIG9yIGZpcmUgYXQgdGhpcyBwb2ludFxuICBcdFx0aWYgKCFwYXJlbnQgfHwgIXRoaXMuaW5Qcm9jZXNzW3BhcmVudC5fZ3VpZF0pIHtcbiAgXHRcdFx0ZmlyZSh0aGlzLCByYWN0aXZlKTtcbiAgXHRcdH1cbiAgXHRcdC8vIGVsc2V3aXNlLCBoYW5kb2ZmIHRvIHBhcmVudCB0byBmaXJlIHdoZW4gcmVhZHlcbiAgXHRcdGVsc2Uge1xuICBcdFx0XHRnZXRDaGlsZFF1ZXVlKHRoaXMucXVldWUsIHBhcmVudCkucHVzaChyYWN0aXZlKTtcbiAgXHRcdH1cblxuICBcdFx0ZGVsZXRlIHRoaXMuaW5Qcm9jZXNzW3JhY3RpdmUuX2d1aWRdO1xuICBcdH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXRDaGlsZFF1ZXVlKHF1ZXVlLCByYWN0aXZlKSB7XG4gIFx0cmV0dXJuIHF1ZXVlW3JhY3RpdmUuX2d1aWRdIHx8IChxdWV1ZVtyYWN0aXZlLl9ndWlkXSA9IFtdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmUoaG9va1F1ZXVlLCByYWN0aXZlKSB7XG5cbiAgXHR2YXIgY2hpbGRRdWV1ZSA9IGdldENoaWxkUXVldWUoaG9va1F1ZXVlLnF1ZXVlLCByYWN0aXZlKTtcblxuICBcdGhvb2tRdWV1ZS5ob29rLmZpcmUocmFjdGl2ZSk7XG5cbiAgXHQvLyBxdWV1ZSBpcyBcImxpdmVcIiBiZWNhdXNlIGNvbXBvbmVudHMgY2FuIGVuZCB1cCBiZWluZ1xuICBcdC8vIGFkZGVkIHdoaWxlIGhvb2tzIGZpcmUgb24gcGFyZW50cyB0aGF0IG1vZGlmeSBkYXRhIHZhbHVlcy5cbiAgXHR3aGlsZSAoY2hpbGRRdWV1ZS5sZW5ndGgpIHtcbiAgXHRcdGZpcmUoaG9va1F1ZXVlLCBjaGlsZFF1ZXVlLnNoaWZ0KCkpO1xuICBcdH1cblxuICBcdGRlbGV0ZSBob29rUXVldWUucXVldWVbcmFjdGl2ZS5fZ3VpZF07XG4gIH1cblxuICB2YXIgaG9va3NfSG9va1F1ZXVlID0gSG9va1F1ZXVlO1xuXG4gIHZhciBoZWxwZXJzX2dldENvbXB1dGF0aW9uU2lnbmF0dXJlcyA9IGdldENvbXB1dGF0aW9uU2lnbmF0dXJlcztcblxuICB2YXIgaGVscGVyc19nZXRDb21wdXRhdGlvblNpZ25hdHVyZXNfX3BhdHRlcm4gPSAvXFwkXFx7KFteXFx9XSspXFx9L2c7XG4gIGZ1bmN0aW9uIGdldENvbXB1dGF0aW9uU2lnbmF0dXJlcyhyYWN0aXZlLCBjb21wdXRlZCkge1xuICBcdHZhciBzaWduYXR1cmVzID0ge30sXG4gIFx0ICAgIGtleTtcblxuICBcdGZvciAoa2V5IGluIGNvbXB1dGVkKSB7XG4gIFx0XHRzaWduYXR1cmVzW2tleV0gPSBnZXRDb21wdXRhdGlvblNpZ25hdHVyZShyYWN0aXZlLCBrZXksIGNvbXB1dGVkW2tleV0pO1xuICBcdH1cblxuICBcdHJldHVybiBzaWduYXR1cmVzO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29tcHV0YXRpb25TaWduYXR1cmUocmFjdGl2ZSwga2V5LCBzaWduYXR1cmUpIHtcbiAgXHR2YXIgZ2V0dGVyLCBzZXR0ZXI7XG5cbiAgXHRpZiAodHlwZW9mIHNpZ25hdHVyZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIFx0XHRnZXR0ZXIgPSBoZWxwZXJzX2dldENvbXB1dGF0aW9uU2lnbmF0dXJlc19fYmluZChzaWduYXR1cmUsIHJhY3RpdmUpO1xuICBcdH1cblxuICBcdGlmICh0eXBlb2Ygc2lnbmF0dXJlID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRnZXR0ZXIgPSBjcmVhdGVGdW5jdGlvbkZyb21TdHJpbmcocmFjdGl2ZSwgc2lnbmF0dXJlKTtcbiAgXHR9XG5cbiAgXHRpZiAodHlwZW9mIHNpZ25hdHVyZSA9PT0gXCJvYmplY3RcIikge1xuICBcdFx0aWYgKHR5cGVvZiBzaWduYXR1cmUuZ2V0ID09PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRcdGdldHRlciA9IGNyZWF0ZUZ1bmN0aW9uRnJvbVN0cmluZyhyYWN0aXZlLCBzaWduYXR1cmUuZ2V0KTtcbiAgXHRcdH0gZWxzZSBpZiAodHlwZW9mIHNpZ25hdHVyZS5nZXQgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRnZXR0ZXIgPSBoZWxwZXJzX2dldENvbXB1dGF0aW9uU2lnbmF0dXJlc19fYmluZChzaWduYXR1cmUuZ2V0LCByYWN0aXZlKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGZhdGFsKFwiYCVzYCBjb21wdXRhdGlvbiBtdXN0IGhhdmUgYSBgZ2V0KClgIG1ldGhvZFwiLCBrZXkpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAodHlwZW9mIHNpZ25hdHVyZS5zZXQgPT09IFwiZnVuY3Rpb25cIikge1xuICBcdFx0XHRzZXR0ZXIgPSBoZWxwZXJzX2dldENvbXB1dGF0aW9uU2lnbmF0dXJlc19fYmluZChzaWduYXR1cmUuc2V0LCByYWN0aXZlKTtcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRyZXR1cm4geyBnZXR0ZXI6IGdldHRlciwgc2V0dGVyOiBzZXR0ZXIgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uRnJvbVN0cmluZyhyYWN0aXZlLCBzdHIpIHtcbiAgXHR2YXIgZnVuY3Rpb25Cb2R5LCBoYXNUaGlzLCBmbjtcblxuICBcdGZ1bmN0aW9uQm9keSA9IFwicmV0dXJuIChcIiArIHN0ci5yZXBsYWNlKGhlbHBlcnNfZ2V0Q29tcHV0YXRpb25TaWduYXR1cmVzX19wYXR0ZXJuLCBmdW5jdGlvbiAobWF0Y2gsIGtleXBhdGgpIHtcbiAgXHRcdGhhc1RoaXMgPSB0cnVlO1xuICBcdFx0cmV0dXJuIFwiX19yYWN0aXZlLmdldChcXFwiXCIgKyBrZXlwYXRoICsgXCJcXFwiKVwiO1xuICBcdH0pICsgXCIpO1wiO1xuXG4gIFx0aWYgKGhhc1RoaXMpIHtcbiAgXHRcdGZ1bmN0aW9uQm9keSA9IFwidmFyIF9fcmFjdGl2ZSA9IHRoaXM7IFwiICsgZnVuY3Rpb25Cb2R5O1xuICBcdH1cblxuICBcdGZuID0gbmV3IEZ1bmN0aW9uKGZ1bmN0aW9uQm9keSk7XG4gIFx0cmV0dXJuIGhhc1RoaXMgPyBmbi5iaW5kKHJhY3RpdmUpIDogZm47XG4gIH1cblxuICBmdW5jdGlvbiBoZWxwZXJzX2dldENvbXB1dGF0aW9uU2lnbmF0dXJlc19fYmluZChmbiwgY29udGV4dCkge1xuICBcdHJldHVybiAvdGhpcy8udGVzdChmbi50b1N0cmluZygpKSA/IGZuLmJpbmQoY29udGV4dCkgOiBmbjtcbiAgfVxuXG4gIHZhciBjb25zdHJ1Y3RIb29rID0gbmV3IGhvb2tzX0hvb2soXCJjb25zdHJ1Y3RcIik7XG4gIHZhciBjb25maWdIb29rID0gbmV3IGhvb2tzX0hvb2soXCJjb25maWdcIik7XG4gIHZhciBpbml0SG9vayA9IG5ldyBob29rc19Ib29rUXVldWUoXCJpbml0XCIpO1xuICB2YXIgaW5pdGlhbGlzZV9fdWlkID0gMDtcblxuICB2YXIgaW5pdGlhbGlzZV9fcmVnaXN0cnlOYW1lcyA9IFtcImFkYXB0b3JzXCIsIFwiY29tcG9uZW50c1wiLCBcImRlY29yYXRvcnNcIiwgXCJlYXNpbmdcIiwgXCJldmVudHNcIiwgXCJpbnRlcnBvbGF0b3JzXCIsIFwicGFydGlhbHNcIiwgXCJ0cmFuc2l0aW9uc1wiXTtcblxuICB2YXIgaW5pdGlhbGlzZSA9IGluaXRpYWxpc2VSYWN0aXZlSW5zdGFuY2U7XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGlzZVJhY3RpdmVJbnN0YW5jZShyYWN0aXZlKSB7XG4gIFx0dmFyIHVzZXJPcHRpb25zID0gYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcbiAgXHR2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cbiAgXHR2YXIgZWwsIHZpZXdtb2RlbDtcblxuICBcdGlmIChfUmFjdGl2ZS5ERUJVRykge1xuICBcdFx0d2VsY29tZSgpO1xuICBcdH1cblxuICBcdGluaXRpYWxpc2VQcm9wZXJ0aWVzKHJhY3RpdmUsIG9wdGlvbnMpO1xuXG4gIFx0Ly8gVE9ETyByZW1vdmUgdGhpcywgZXZlbnR1YWxseVxuICBcdGRlZmluZVByb3BlcnR5KHJhY3RpdmUsIFwiZGF0YVwiLCB7IGdldDogZGVwcmVjYXRlUmFjdGl2ZURhdGEgfSk7XG5cbiAgXHQvLyBUT0RPIGRvbid0IGFsbG93IGBvbmNvbnN0cnVjdGAgd2l0aCBgbmV3IFJhY3RpdmUoKWAsIHRoZXJlJ3Mgbm8gbmVlZCBmb3IgaXRcbiAgXHRjb25zdHJ1Y3RIb29rLmZpcmUocmFjdGl2ZSwgdXNlck9wdGlvbnMpO1xuXG4gIFx0Ly8gQWRkIHJlZ2lzdHJpZXNcbiAgXHRpbml0aWFsaXNlX19yZWdpc3RyeU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgXHRcdHJhY3RpdmVbbmFtZV0gPSB1dGlsc19vYmplY3RfX2V4dGVuZChjcmVhdGUocmFjdGl2ZS5jb25zdHJ1Y3RvcltuYW1lXSB8fCBudWxsKSwgdXNlck9wdGlvbnNbbmFtZV0pO1xuICBcdH0pO1xuXG4gIFx0Ly8gQ3JlYXRlIGEgdmlld21vZGVsXG4gIFx0dmlld21vZGVsID0gbmV3IHZpZXdtb2RlbF9WaWV3bW9kZWwoe1xuICBcdFx0YWRhcHQ6IGdldEFkYXB0b3JzKHJhY3RpdmUsIHJhY3RpdmUuYWRhcHQsIHVzZXJPcHRpb25zKSxcbiAgXHRcdGRhdGE6IGN1c3RvbV9kYXRhLmluaXQocmFjdGl2ZS5jb25zdHJ1Y3RvciwgcmFjdGl2ZSwgdXNlck9wdGlvbnMpLFxuICBcdFx0Y29tcHV0ZWQ6IGhlbHBlcnNfZ2V0Q29tcHV0YXRpb25TaWduYXR1cmVzKHJhY3RpdmUsIHV0aWxzX29iamVjdF9fZXh0ZW5kKGNyZWF0ZShyYWN0aXZlLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb21wdXRlZCksIHVzZXJPcHRpb25zLmNvbXB1dGVkKSksXG4gIFx0XHRtYXBwaW5nczogb3B0aW9ucy5tYXBwaW5ncyxcbiAgXHRcdHJhY3RpdmU6IHJhY3RpdmUsXG4gIFx0XHRvbmNoYW5nZTogZnVuY3Rpb24gKCkge1xuICBcdFx0XHRyZXR1cm4gZ2xvYmFsX3J1bmxvb3AuYWRkUmFjdGl2ZShyYWN0aXZlKTtcbiAgXHRcdH1cbiAgXHR9KTtcblxuICBcdHJhY3RpdmUudmlld21vZGVsID0gdmlld21vZGVsO1xuXG4gIFx0Ly8gVGhpcyBjYW4ndCBoYXBwZW4gZWFybGllciwgYmVjYXVzZSBjb21wdXRlZCBwcm9wZXJ0aWVzIG1heSBjYWxsIGByYWN0aXZlLmdldCgpYCwgZXRjXG4gIFx0dmlld21vZGVsLmluaXQoKTtcblxuICBcdC8vIGluaXQgY29uZmlnIGZyb20gUGFyZW50IGFuZCBvcHRpb25zXG4gIFx0Y29uZmlnX2NvbmZpZy5pbml0KHJhY3RpdmUuY29uc3RydWN0b3IsIHJhY3RpdmUsIHVzZXJPcHRpb25zKTtcblxuICBcdGNvbmZpZ0hvb2suZmlyZShyYWN0aXZlKTtcbiAgXHRpbml0SG9vay5iZWdpbihyYWN0aXZlKTtcblxuICBcdC8vIC8vIElmIHRoaXMgaXMgYSBjb21wb25lbnQgd2l0aCBhIGZ1bmN0aW9uIGBkYXRhYCBwcm9wZXJ0eSwgY2FsbCB0aGUgZnVuY3Rpb25cbiAgXHQvLyAvLyB3aXRoIGByYWN0aXZlYCBhcyBjb250ZXh0ICh1bmxlc3MgdGhlIGNoaWxkIHdhcyBhbHNvIGEgZnVuY3Rpb24pXG4gIFx0Ly8gaWYgKCB0eXBlb2YgcmFjdGl2ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuZGF0YSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdXNlck9wdGlvbnMuZGF0YSAhPT0gJ2Z1bmN0aW9uJyApIHtcbiAgXHQvLyBcdHZpZXdtb2RlbC5yZXNldCggcmFjdGl2ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuZGF0YS5jYWxsKCByYWN0aXZlICkgfHwgZmF0YWwoICdgZGF0YWAgZnVuY3Rpb25zIG11c3QgcmV0dXJuIGEgZGF0YSBvYmplY3QnICkgKTtcbiAgXHQvLyB9XG5cbiAgXHQvLyBSZW5kZXIgdmlydHVhbCBET01cbiAgXHRpZiAocmFjdGl2ZS50ZW1wbGF0ZSkge1xuICBcdFx0dmFyIGNzc0lkcyA9IHVuZGVmaW5lZDtcblxuICBcdFx0aWYgKG9wdGlvbnMuY3NzSWRzIHx8IHJhY3RpdmUuY3NzSWQpIHtcbiAgXHRcdFx0Y3NzSWRzID0gb3B0aW9ucy5jc3NJZHMgPyBvcHRpb25zLmNzc0lkcy5zbGljZSgpIDogW107XG5cbiAgXHRcdFx0aWYgKHJhY3RpdmUuY3NzSWQpIHtcbiAgXHRcdFx0XHRjc3NJZHMucHVzaChyYWN0aXZlLmNzc0lkKTtcbiAgXHRcdFx0fVxuICBcdFx0fVxuXG4gIFx0XHRyYWN0aXZlLmZyYWdtZW50ID0gbmV3IHZpcnR1YWxkb21fRnJhZ21lbnQoe1xuICBcdFx0XHR0ZW1wbGF0ZTogcmFjdGl2ZS50ZW1wbGF0ZSxcbiAgXHRcdFx0cm9vdDogcmFjdGl2ZSxcbiAgXHRcdFx0b3duZXI6IHJhY3RpdmUsIC8vIHNhdmVzIGRvaW5nIGBpZiAoIHRoaXMucGFyZW50ICkgeyAvKi4uLiovIH1gIGxhdGVyIG9uXG4gIFx0XHRcdGNzc0lkczogY3NzSWRzXG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHRpbml0SG9vay5lbmQocmFjdGl2ZSk7XG5cbiAgXHQvLyByZW5kZXIgYXV0b21hdGljYWxseSAoIGlmIGBlbGAgaXMgc3BlY2lmaWVkIClcbiAgXHRpZiAoZWwgPSBnZXRFbGVtZW50KHJhY3RpdmUuZWwpKSB7XG4gIFx0XHR2YXIgcHJvbWlzZSA9IHJhY3RpdmUucmVuZGVyKGVsLCByYWN0aXZlLmFwcGVuZCk7XG5cbiAgXHRcdGlmIChfUmFjdGl2ZS5ERUJVR19QUk9NSVNFUykge1xuICBcdFx0XHRwcm9taXNlW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICBcdFx0XHRcdHdhcm5PbmNlSWZEZWJ1ZyhcIlByb21pc2UgZGVidWdnaW5nIGlzIGVuYWJsZWQsIHRvIGhlbHAgc29sdmUgZXJyb3JzIHRoYXQgaGFwcGVuIGFzeW5jaHJvbm91c2x5LiBTb21lIGJyb3dzZXJzIHdpbGwgbG9nIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnMsIGluIHdoaWNoIGNhc2UgeW91IGNhbiBzYWZlbHkgZGlzYWJsZSBwcm9taXNlIGRlYnVnZ2luZzpcXG4gIFJhY3RpdmUuREVCVUdfUFJPTUlTRVMgPSBmYWxzZTtcIik7XG4gIFx0XHRcdFx0d2FybklmRGVidWcoXCJBbiBlcnJvciBoYXBwZW5lZCBkdXJpbmcgcmVuZGVyaW5nXCIsIHsgcmFjdGl2ZTogcmFjdGl2ZSB9KTtcbiAgXHRcdFx0XHRlcnIuc3RhY2sgJiYgbG9nSWZEZWJ1ZyhlcnIuc3RhY2spO1xuXG4gIFx0XHRcdFx0dGhyb3cgZXJyO1xuICBcdFx0XHR9KTtcbiAgXHRcdH1cbiAgXHR9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRBZGFwdG9ycyhyYWN0aXZlLCBwcm90b0FkYXB0LCB1c2VyT3B0aW9ucykge1xuICBcdHZhciBhZGFwdCwgbWFnaWMsIG1vZGlmeUFycmF5cztcblxuICBcdHByb3RvQWRhcHQgPSBwcm90b0FkYXB0Lm1hcChsb29rdXApO1xuICBcdGFkYXB0ID0gZW5zdXJlQXJyYXkodXNlck9wdGlvbnMuYWRhcHQpLm1hcChsb29rdXApO1xuXG4gIFx0YWRhcHQgPSBpbml0aWFsaXNlX19jb21iaW5lKHByb3RvQWRhcHQsIGFkYXB0KTtcblxuICBcdG1hZ2ljID0gXCJtYWdpY1wiIGluIHVzZXJPcHRpb25zID8gdXNlck9wdGlvbnMubWFnaWMgOiByYWN0aXZlLm1hZ2ljO1xuICBcdG1vZGlmeUFycmF5cyA9IFwibW9kaWZ5QXJyYXlzXCIgaW4gdXNlck9wdGlvbnMgPyB1c2VyT3B0aW9ucy5tb2RpZnlBcnJheXMgOiByYWN0aXZlLm1vZGlmeUFycmF5cztcblxuICBcdGlmIChtYWdpYykge1xuICBcdFx0aWYgKCFlbnZpcm9ubWVudF9fbWFnaWMpIHtcbiAgXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiR2V0dGVycyBhbmQgc2V0dGVycyAobWFnaWMgbW9kZSkgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAobW9kaWZ5QXJyYXlzKSB7XG4gIFx0XHRcdGFkYXB0LnB1c2gobWFnaWNBcnJheSk7XG4gIFx0XHR9XG5cbiAgXHRcdGFkYXB0LnB1c2goYWRhcHRvcnNfbWFnaWMpO1xuICBcdH1cblxuICBcdGlmIChtb2RpZnlBcnJheXMpIHtcbiAgXHRcdGFkYXB0LnB1c2goYXJyYXlfaW5kZXgpO1xuICBcdH1cblxuICBcdHJldHVybiBhZGFwdDtcblxuICBcdGZ1bmN0aW9uIGxvb2t1cChhZGFwdG9yKSB7XG4gIFx0XHRpZiAodHlwZW9mIGFkYXB0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdFx0YWRhcHRvciA9IGZpbmRJblZpZXdIaWVyYXJjaHkoXCJhZGFwdG9yc1wiLCByYWN0aXZlLCBhZGFwdG9yKTtcblxuICBcdFx0XHRpZiAoIWFkYXB0b3IpIHtcbiAgXHRcdFx0XHRmYXRhbChtaXNzaW5nUGx1Z2luKGFkYXB0b3IsIFwiYWRhcHRvclwiKSk7XG4gIFx0XHRcdH1cbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIGFkYXB0b3I7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGlzZV9fY29tYmluZShhLCBiKSB7XG4gIFx0dmFyIGMgPSBhLnNsaWNlKCksXG4gIFx0ICAgIGkgPSBiLmxlbmd0aDtcblxuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGlmICghIH5jLmluZGV4T2YoYltpXSkpIHtcbiAgXHRcdFx0Yy5wdXNoKGJbaV0pO1xuICBcdFx0fVxuICBcdH1cblxuICBcdHJldHVybiBjO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGlzZVByb3BlcnRpZXMocmFjdGl2ZSwgb3B0aW9ucykge1xuICBcdC8vIEdlbmVyYXRlIGEgdW5pcXVlIGlkZW50aWZpZXIsIGZvciBwbGFjZXMgd2hlcmUgeW91J2QgdXNlIGEgd2VhayBtYXAgaWYgaXRcbiAgXHQvLyBleGlzdGVkXG4gIFx0cmFjdGl2ZS5fZ3VpZCA9IFwici1cIiArIGluaXRpYWxpc2VfX3VpZCsrO1xuXG4gIFx0Ly8gZXZlbnRzXG4gIFx0cmFjdGl2ZS5fc3VicyA9IGNyZWF0ZShudWxsKTtcblxuICBcdC8vIHN0b3JhZ2UgZm9yIGl0ZW0gY29uZmlndXJhdGlvbiBmcm9tIGluc3RhbnRpYXRpb24gdG8gcmVzZXQsXG4gIFx0Ly8gbGlrZSBkeW5hbWljIGZ1bmN0aW9ucyBvciBvcmlnaW5hbCB2YWx1ZXNcbiAgXHRyYWN0aXZlLl9jb25maWcgPSB7fTtcblxuICBcdC8vIHR3by13YXkgYmluZGluZ3NcbiAgXHRyYWN0aXZlLl90d293YXlCaW5kaW5ncyA9IGNyZWF0ZShudWxsKTtcblxuICBcdC8vIGFuaW1hdGlvbnMgKHNvIHdlIGNhbiBzdG9wIGFueSBpbiBwcm9ncmVzcyBhdCB0ZWFyZG93bilcbiAgXHRyYWN0aXZlLl9hbmltYXRpb25zID0gW107XG5cbiAgXHQvLyBub2RlcyByZWdpc3RyeVxuICBcdHJhY3RpdmUubm9kZXMgPSB7fTtcblxuICBcdC8vIGxpdmUgcXVlcmllc1xuICBcdHJhY3RpdmUuX2xpdmVRdWVyaWVzID0gW107XG4gIFx0cmFjdGl2ZS5fbGl2ZUNvbXBvbmVudFF1ZXJpZXMgPSBbXTtcblxuICBcdC8vIGJvdW5kIGRhdGEgZnVuY3Rpb25zXG4gIFx0cmFjdGl2ZS5fYm91bmRGdW5jdGlvbnMgPSBbXTtcblxuICBcdC8vIG9ic2VydmVyc1xuICBcdHJhY3RpdmUuX29ic2VydmVycyA9IFtdO1xuXG4gIFx0Ly8gcHJvcGVydGllcyBzcGVjaWZpYyB0byBpbmxpbmUgY29tcG9uZW50c1xuICBcdGlmIChvcHRpb25zLmNvbXBvbmVudCkge1xuICBcdFx0cmFjdGl2ZS5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgXHRcdHJhY3RpdmUuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXIgfHwgbnVsbDtcbiAgXHRcdHJhY3RpdmUucm9vdCA9IHJhY3RpdmUucGFyZW50LnJvb3Q7XG5cbiAgXHRcdHJhY3RpdmUuY29tcG9uZW50ID0gb3B0aW9ucy5jb21wb25lbnQ7XG4gIFx0XHRvcHRpb25zLmNvbXBvbmVudC5pbnN0YW5jZSA9IHJhY3RpdmU7XG5cbiAgXHRcdC8vIGZvciBoYWNrYWJpbGl0eSwgdGhpcyBjb3VsZCBiZSBhbiBvcGVuIG9wdGlvblxuICBcdFx0Ly8gZm9yIGFueSByYWN0aXZlIGluc3RhbmNlLCBidXQgZm9yIG5vdywganVzdFxuICBcdFx0Ly8gZm9yIGNvbXBvbmVudHMgYW5kIGp1c3QgZm9yIHJhY3RpdmUuLi5cbiAgXHRcdHJhY3RpdmUuX2lubGluZVBhcnRpYWxzID0gb3B0aW9ucy5pbmxpbmVQYXJ0aWFscztcbiAgXHR9IGVsc2Uge1xuICBcdFx0cmFjdGl2ZS5yb290ID0gcmFjdGl2ZTtcbiAgXHRcdHJhY3RpdmUucGFyZW50ID0gcmFjdGl2ZS5jb250YWluZXIgPSBudWxsO1xuICBcdH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlcHJlY2F0ZVJhY3RpdmVEYXRhKCkge1xuICBcdHRocm93IG5ldyBFcnJvcihcIlVzaW5nIGByYWN0aXZlLmRhdGFgIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgLSB5b3UgbXVzdCB1c2UgdGhlIGByYWN0aXZlLmdldCgpYCBBUEkgaW5zdGVhZFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbXBsZXhQYXJhbWV0ZXIoY29tcG9uZW50LCB0ZW1wbGF0ZSwgY2FsbGJhY2spIHtcbiAgXHR0aGlzLnBhcmVudEZyYWdtZW50ID0gY29tcG9uZW50LnBhcmVudEZyYWdtZW50O1xuICBcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICBcdHRoaXMuZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHR0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gIFx0XHRyb290OiBjb21wb25lbnQucm9vdCxcbiAgXHRcdG93bmVyOiB0aGlzXG4gIFx0fSk7XG5cbiAgXHR0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgdmFyIGluaXRpYWxpc2VfQ29tcGxleFBhcmFtZXRlciA9IENvbXBsZXhQYXJhbWV0ZXI7XG5cbiAgQ29tcGxleFBhcmFtZXRlci5wcm90b3R5cGUgPSB7XG4gIFx0YnViYmxlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRpZiAoIXRoaXMuZGlydHkpIHtcbiAgXHRcdFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gIFx0XHRcdGdsb2JhbF9ydW5sb29wLmFkZFZpZXcodGhpcyk7XG4gIFx0XHR9XG4gIFx0fSxcblxuICBcdHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5jYWxsYmFjayh0aGlzLmZyYWdtZW50LmdldFZhbHVlKCkpO1xuICBcdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuICBcdH0sXG5cbiAgXHRyZWJpbmQ6IGZ1bmN0aW9uIChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHR9LFxuXG4gIFx0dW5iaW5kOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnVuYmluZCgpO1xuICBcdH1cbiAgfTtcblxuICB2YXIgY3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAoY29tcG9uZW50LCBDb21wb25lbnQsIGF0dHJpYnV0ZXMsIHlpZWxkVGVtcGxhdGUsIHBhcnRpYWxzKSB7XG4gIFx0dmFyIGluc3RhbmNlLFxuICBcdCAgICBwYXJlbnRGcmFnbWVudCxcbiAgXHQgICAgcmFjdGl2ZSxcbiAgXHQgICAgZnJhZ21lbnQsXG4gIFx0ICAgIGNvbnRhaW5lcixcbiAgXHQgICAgaW5saW5lUGFydGlhbHMgPSB7fSxcbiAgXHQgICAgZGF0YSA9IHt9LFxuICBcdCAgICBtYXBwaW5ncyA9IHt9LFxuICBcdCAgICByZWFkeSxcbiAgXHQgICAgcmVzb2x2ZXJzID0gW107XG5cbiAgXHRwYXJlbnRGcmFnbWVudCA9IGNvbXBvbmVudC5wYXJlbnRGcmFnbWVudDtcbiAgXHRyYWN0aXZlID0gY29tcG9uZW50LnJvb3Q7XG5cbiAgXHRwYXJ0aWFscyA9IHBhcnRpYWxzIHx8IHt9O1xuICBcdHV0aWxzX29iamVjdF9fZXh0ZW5kKGlubGluZVBhcnRpYWxzLCBwYXJ0aWFscyk7XG5cbiAgXHQvLyBNYWtlIGNvbnRlbnRzIGF2YWlsYWJsZSBhcyBhIHt7PmNvbnRlbnR9fSBwYXJ0aWFsXG4gIFx0cGFydGlhbHMuY29udGVudCA9IHlpZWxkVGVtcGxhdGUgfHwgW107XG5cbiAgXHQvLyBzZXQgYSBkZWZhdWx0IHBhcnRpYWwgZm9yIHlpZWxkcyB3aXRoIG5vIG5hbWVcbiAgXHRpbmxpbmVQYXJ0aWFsc1tcIlwiXSA9IHBhcnRpYWxzLmNvbnRlbnQ7XG5cbiAgXHRpZiAoQ29tcG9uZW50LmRlZmF1bHRzLmVsKSB7XG4gIFx0XHR3YXJuSWZEZWJ1ZyhcIlRoZSA8JXMvPiBjb21wb25lbnQgaGFzIGEgZGVmYXVsdCBgZWxgIHByb3BlcnR5OyBpdCBoYXMgYmVlbiBkaXNyZWdhcmRlZFwiLCBjb21wb25lbnQubmFtZSk7XG4gIFx0fVxuXG4gIFx0Ly8gZmluZCBjb250YWluZXJcbiAgXHRmcmFnbWVudCA9IHBhcmVudEZyYWdtZW50O1xuICBcdHdoaWxlIChmcmFnbWVudCkge1xuICBcdFx0aWYgKGZyYWdtZW50Lm93bmVyLnR5cGUgPT09IFlJRUxERVIpIHtcbiAgXHRcdFx0Y29udGFpbmVyID0gZnJhZ21lbnQub3duZXIuY29udGFpbmVyO1xuICBcdFx0XHRicmVhaztcbiAgXHRcdH1cblxuICBcdFx0ZnJhZ21lbnQgPSBmcmFnbWVudC5wYXJlbnQ7XG4gIFx0fVxuXG4gIFx0Ly8gZWFjaCBhdHRyaWJ1dGUgcmVwcmVzZW50cyBlaXRoZXIgYSkgZGF0YSBvciBiKSBhIG1hcHBpbmdcbiAgXHRpZiAoYXR0cmlidXRlcykge1xuICBcdFx0T2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gIFx0XHRcdHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2tleV0sXG4gIFx0XHRcdCAgICBwYXJzZWQsXG4gIFx0XHRcdCAgICByZXNvbHZlcjtcblxuICBcdFx0XHRpZiAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0XHRcdC8vIGl0J3Mgc3RhdGljIGRhdGFcbiAgXHRcdFx0XHRwYXJzZWQgPSBwYXJzZUpTT04oYXR0cmlidXRlKTtcbiAgXHRcdFx0XHRkYXRhW2tleV0gPSBwYXJzZWQgPyBwYXJzZWQudmFsdWUgOiBhdHRyaWJ1dGU7XG4gIFx0XHRcdH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSAwKSB7XG4gIFx0XHRcdFx0Ly8gaXQgaGFkIG5vICc9Jywgc28gd2UnbGwgY2FsbCBpdCB0cnVlXG4gIFx0XHRcdFx0ZGF0YVtrZXldID0gdHJ1ZTtcbiAgXHRcdFx0fSBlbHNlIGlmIChpc0FycmF5KGF0dHJpYnV0ZSkpIHtcbiAgXHRcdFx0XHQvLyB0aGlzIHJlcHJlc2VudHMgZHluYW1pYyBkYXRhXG4gIFx0XHRcdFx0aWYgKGlzU2luZ2xlSW50ZXJwb2xhdG9yKGF0dHJpYnV0ZSkpIHtcbiAgXHRcdFx0XHRcdG1hcHBpbmdzW2tleV0gPSB7XG4gIFx0XHRcdFx0XHRcdG9yaWdpbjogY29tcG9uZW50LnJvb3Qudmlld21vZGVsLFxuICBcdFx0XHRcdFx0XHRrZXlwYXRoOiB1bmRlZmluZWRcbiAgXHRcdFx0XHRcdH07XG5cbiAgXHRcdFx0XHRcdHJlc29sdmVyID0gY3JlYXRlUmVzb2x2ZXIoY29tcG9uZW50LCBhdHRyaWJ1dGVbMF0sIGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdFx0XHRcdGlmIChrZXlwYXRoLmlzU3BlY2lhbCkge1xuICBcdFx0XHRcdFx0XHRcdGlmIChyZWFkeSkge1xuICBcdFx0XHRcdFx0XHRcdFx0aW5zdGFuY2Uuc2V0KGtleSwga2V5cGF0aC52YWx1ZSk7IC8vIFRPRE8gdXNlIHZpZXdtb2RlbD9cbiAgXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0XHRcdFx0ZGF0YVtrZXldID0ga2V5cGF0aC52YWx1ZTtcblxuICBcdFx0XHRcdFx0XHRcdFx0Ly8gVE9ETyBlcnJyLi4uLiB3b3VsZCBiZSBiZXR0ZXIgaWYgd2UgZGlkbid0IGhhdmUgdG8gZG8gdGhpc1xuICBcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1hcHBpbmdzW2tleV07XG4gIFx0XHRcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0XHRcdGlmIChyZWFkeSkge1xuICBcdFx0XHRcdFx0XHRcdFx0aW5zdGFuY2Uudmlld21vZGVsLm1hcHBpbmdzW2tleV0ucmVzb2x2ZShrZXlwYXRoKTtcbiAgXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0XHRcdFx0Ly8gcmVzb2x2ZWQgaW1tZWRpYXRlbHlcbiAgXHRcdFx0XHRcdFx0XHRcdG1hcHBpbmdzW2tleV0ua2V5cGF0aCA9IGtleXBhdGg7XG4gIFx0XHRcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHR9IGVsc2Uge1xuICBcdFx0XHRcdFx0cmVzb2x2ZXIgPSBuZXcgaW5pdGlhbGlzZV9Db21wbGV4UGFyYW1ldGVyKGNvbXBvbmVudCwgYXR0cmlidXRlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgXHRcdFx0XHRcdFx0aWYgKHJlYWR5KSB7XG4gIFx0XHRcdFx0XHRcdFx0aW5zdGFuY2Uuc2V0KGtleSwgdmFsdWUpOyAvLyBUT0RPIHVzZSB2aWV3bW9kZWw/XG4gIFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRcdFx0ZGF0YVtrZXldID0gdmFsdWU7XG4gIFx0XHRcdFx0XHRcdH1cbiAgXHRcdFx0XHRcdH0pO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdHJlc29sdmVycy5wdXNoKHJlc29sdmVyKTtcbiAgXHRcdFx0fSBlbHNlIHtcbiAgXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJlcm0gd3V0XCIpO1xuICBcdFx0XHR9XG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHRpbnN0YW5jZSA9IGNyZWF0ZShDb21wb25lbnQucHJvdG90eXBlKTtcblxuICBcdGluaXRpYWxpc2UoaW5zdGFuY2UsIHtcbiAgXHRcdGVsOiBudWxsLFxuICBcdFx0YXBwZW5kOiB0cnVlLFxuICBcdFx0ZGF0YTogZGF0YSxcbiAgXHRcdHBhcnRpYWxzOiBwYXJ0aWFscyxcbiAgXHRcdG1hZ2ljOiByYWN0aXZlLm1hZ2ljIHx8IENvbXBvbmVudC5kZWZhdWx0cy5tYWdpYyxcbiAgXHRcdG1vZGlmeUFycmF5czogcmFjdGl2ZS5tb2RpZnlBcnJheXMsXG4gIFx0XHQvLyBuZWVkIHRvIGluaGVyaXQgcnVudGltZSBwYXJlbnQgYWRhcHRvcnNcbiAgXHRcdGFkYXB0OiByYWN0aXZlLmFkYXB0XG4gIFx0fSwge1xuICBcdFx0cGFyZW50OiByYWN0aXZlLFxuICBcdFx0Y29tcG9uZW50OiBjb21wb25lbnQsXG4gIFx0XHRjb250YWluZXI6IGNvbnRhaW5lcixcbiAgXHRcdG1hcHBpbmdzOiBtYXBwaW5ncyxcbiAgXHRcdGlubGluZVBhcnRpYWxzOiBpbmxpbmVQYXJ0aWFscyxcbiAgXHRcdGNzc0lkczogcGFyZW50RnJhZ21lbnQuY3NzSWRzXG4gIFx0fSk7XG5cbiAgXHRyZWFkeSA9IHRydWU7XG4gIFx0Y29tcG9uZW50LnJlc29sdmVycyA9IHJlc29sdmVycztcblxuICBcdHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVSZXNvbHZlcihjb21wb25lbnQsIHRlbXBsYXRlLCBjYWxsYmFjaykge1xuICBcdHZhciByZXNvbHZlcjtcblxuICBcdGlmICh0ZW1wbGF0ZS5yKSB7XG4gIFx0XHRyZXNvbHZlciA9IFJlc29sdmVyc19jcmVhdGVSZWZlcmVuY2VSZXNvbHZlcihjb21wb25lbnQsIHRlbXBsYXRlLnIsIGNhbGxiYWNrKTtcbiAgXHR9IGVsc2UgaWYgKHRlbXBsYXRlLngpIHtcbiAgXHRcdHJlc29sdmVyID0gbmV3IFJlc29sdmVyc19FeHByZXNzaW9uUmVzb2x2ZXIoY29tcG9uZW50LCBjb21wb25lbnQucGFyZW50RnJhZ21lbnQsIHRlbXBsYXRlLngsIGNhbGxiYWNrKTtcbiAgXHR9IGVsc2UgaWYgKHRlbXBsYXRlLnJ4KSB7XG4gIFx0XHRyZXNvbHZlciA9IG5ldyBSZWZlcmVuY2VFeHByZXNzaW9uUmVzb2x2ZXJfUmVmZXJlbmNlRXhwcmVzc2lvblJlc29sdmVyKGNvbXBvbmVudCwgdGVtcGxhdGUucngsIGNhbGxiYWNrKTtcbiAgXHR9XG5cbiAgXHRyZXR1cm4gcmVzb2x2ZXI7XG4gIH1cblxuICBmdW5jdGlvbiBpc1NpbmdsZUludGVycG9sYXRvcih0ZW1wbGF0ZSkge1xuICBcdHJldHVybiB0ZW1wbGF0ZS5sZW5ndGggPT09IDEgJiYgdGVtcGxhdGVbMF0udCA9PT0gSU5URVJQT0xBVE9SO1xuICB9XG5cbiAgLy8gVE9ETyBob3cgc2hvdWxkIGV2ZW50IGFyZ3VtZW50cyBiZSBoYW5kbGVkPyBlLmcuXG4gIC8vIDx3aWRnZXQgb24tZm9vPSdiYXI6MSwyLDMnLz5cbiAgLy8gVGhlIGV2ZW50ICdiYXInIHdpbGwgYmUgZmlyZWQgb24gdGhlIHBhcmVudCBpbnN0YW5jZVxuICAvLyB3aGVuICdmb28nIGZpcmVzIG9uIHRoZSBjaGlsZCwgYnV0IHRoZSAxLDIsMyBhcmd1bWVudHNcbiAgLy8gd2lsbCBiZSBsb3N0XG5cbiAgdmFyIGluaXRpYWxpc2VfcHJvcGFnYXRlRXZlbnRzID0gcHJvcGFnYXRlRXZlbnRzO1xuXG4gIGZ1bmN0aW9uIHByb3BhZ2F0ZUV2ZW50cyhjb21wb25lbnQsIGV2ZW50c0Rlc2NyaXB0b3IpIHtcbiAgXHR2YXIgZXZlbnROYW1lO1xuXG4gIFx0Zm9yIChldmVudE5hbWUgaW4gZXZlbnRzRGVzY3JpcHRvcikge1xuICBcdFx0aWYgKGV2ZW50c0Rlc2NyaXB0b3IuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xuICBcdFx0XHRwcm9wYWdhdGVFdmVudChjb21wb25lbnQuaW5zdGFuY2UsIGNvbXBvbmVudC5yb290LCBldmVudE5hbWUsIGV2ZW50c0Rlc2NyaXB0b3JbZXZlbnROYW1lXSk7XG4gIFx0XHR9XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gcHJvcGFnYXRlRXZlbnQoY2hpbGRJbnN0YW5jZSwgcGFyZW50SW5zdGFuY2UsIGV2ZW50TmFtZSwgcHJveHlFdmVudE5hbWUpIHtcbiAgXHRpZiAodHlwZW9mIHByb3h5RXZlbnROYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gIFx0XHRmYXRhbChcIkNvbXBvbmVudHMgY3VycmVudGx5IG9ubHkgc3VwcG9ydCBzaW1wbGUgZXZlbnRzIC0geW91IGNhbm5vdCBpbmNsdWRlIGFyZ3VtZW50cy4gU29ycnkhXCIpO1xuICBcdH1cblxuICBcdGNoaWxkSW5zdGFuY2Uub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gIFx0XHR2YXIgZXZlbnQsIGFyZ3M7XG5cbiAgXHRcdC8vIHNlbWktd2VhayB0ZXN0LCBidXQgd2hhdCBlbHNlPyB0YWcgdGhlIGV2ZW50IG9iaiAuX2lzRXZlbnQgP1xuICBcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgYXJndW1lbnRzWzBdICYmIGFyZ3VtZW50c1swXS5ub2RlKSB7XG4gIFx0XHRcdGV2ZW50ID0gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmNhbGwoYXJndW1lbnRzKTtcbiAgXHRcdH1cblxuICBcdFx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgXHRcdHNoYXJlZF9maXJlRXZlbnQocGFyZW50SW5zdGFuY2UsIHByb3h5RXZlbnROYW1lLCB7IGV2ZW50OiBldmVudCwgYXJnczogYXJncyB9KTtcblxuICBcdFx0Ly8gY2FuY2VsIGJ1YmJsaW5nXG4gIFx0XHRyZXR1cm4gZmFsc2U7XG4gIFx0fSk7XG4gIH1cblxuICB2YXIgaW5pdGlhbGlzZV91cGRhdGVMaXZlUXVlcmllcyA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgXHR2YXIgYW5jZXN0b3IsIHF1ZXJ5O1xuXG4gIFx0Ly8gSWYgdGhlcmUncyBhIGxpdmUgcXVlcnkgZm9yIHRoaXMgY29tcG9uZW50IHR5cGUsIGFkZCBpdFxuICBcdGFuY2VzdG9yID0gY29tcG9uZW50LnJvb3Q7XG4gIFx0d2hpbGUgKGFuY2VzdG9yKSB7XG4gIFx0XHRpZiAocXVlcnkgPSBhbmNlc3Rvci5fbGl2ZUNvbXBvbmVudFF1ZXJpZXNbXCJfXCIgKyBjb21wb25lbnQubmFtZV0pIHtcbiAgXHRcdFx0cXVlcnkucHVzaChjb21wb25lbnQuaW5zdGFuY2UpO1xuICBcdFx0fVxuXG4gIFx0XHRhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcbiAgXHR9XG4gIH07XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfaW5pdCA9IENvbXBvbmVudCRpbml0O1xuICBmdW5jdGlvbiBDb21wb25lbnQkaW5pdChvcHRpb25zLCBDb21wb25lbnQpIHtcbiAgXHR2YXIgcGFyZW50RnJhZ21lbnQsIHJvb3Q7XG5cbiAgXHRpZiAoIUNvbXBvbmVudCkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFxcXCJcIiArIHRoaXMubmFtZSArIFwiXFxcIiBub3QgZm91bmRcIik7XG4gIFx0fVxuXG4gIFx0cGFyZW50RnJhZ21lbnQgPSB0aGlzLnBhcmVudEZyYWdtZW50ID0gb3B0aW9ucy5wYXJlbnRGcmFnbWVudDtcbiAgXHRyb290ID0gcGFyZW50RnJhZ21lbnQucm9vdDtcblxuICBcdHRoaXMucm9vdCA9IHJvb3Q7XG4gIFx0dGhpcy50eXBlID0gQ09NUE9ORU5UO1xuICBcdHRoaXMubmFtZSA9IG9wdGlvbnMudGVtcGxhdGUuZTtcbiAgXHR0aGlzLmluZGV4ID0gb3B0aW9ucy5pbmRleDtcbiAgXHR0aGlzLmluZGV4UmVmQmluZGluZ3MgPSB7fTtcbiAgXHR0aGlzLnlpZWxkZXJzID0ge307XG4gIFx0dGhpcy5yZXNvbHZlcnMgPSBbXTtcblxuICBcdGNyZWF0ZUluc3RhbmNlKHRoaXMsIENvbXBvbmVudCwgb3B0aW9ucy50ZW1wbGF0ZS5hLCBvcHRpb25zLnRlbXBsYXRlLmYsIG9wdGlvbnMudGVtcGxhdGUucCk7XG4gIFx0aW5pdGlhbGlzZV9wcm9wYWdhdGVFdmVudHModGhpcywgb3B0aW9ucy50ZW1wbGF0ZS52KTtcblxuICBcdC8vIGludHJvLCBvdXRybyBhbmQgZGVjb3JhdG9yIGRpcmVjdGl2ZXMgaGF2ZSBubyBlZmZlY3RcbiAgXHRpZiAob3B0aW9ucy50ZW1wbGF0ZS50MCB8fCBvcHRpb25zLnRlbXBsYXRlLnQxIHx8IG9wdGlvbnMudGVtcGxhdGUudDIgfHwgb3B0aW9ucy50ZW1wbGF0ZS5vKSB7XG4gIFx0XHR3YXJuSWZEZWJ1ZyhcIlRoZSBcXFwiaW50cm9cXFwiLCBcXFwib3V0cm9cXFwiIGFuZCBcXFwiZGVjb3JhdG9yXFxcIiBkaXJlY3RpdmVzIGhhdmUgbm8gZWZmZWN0IG9uIGNvbXBvbmVudHNcIiwgeyByYWN0aXZlOiB0aGlzLmluc3RhbmNlIH0pO1xuICBcdH1cblxuICBcdGluaXRpYWxpc2VfdXBkYXRlTGl2ZVF1ZXJpZXModGhpcyk7XG4gIH1cblxuICB2YXIgQ29tcG9uZW50X3Byb3RvdHlwZV9yZWJpbmQgPSBDb21wb25lbnQkcmViaW5kO1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCRyZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuICBcdHZhciBxdWVyeTtcblxuICBcdHRoaXMucmVzb2x2ZXJzLmZvckVhY2gocmViaW5kKTtcblxuICBcdGZvciAodmFyIGsgaW4gdGhpcy55aWVsZGVycykge1xuICBcdFx0aWYgKHRoaXMueWllbGRlcnNba11bMF0pIHtcbiAgXHRcdFx0cmViaW5kKHRoaXMueWllbGRlcnNba11bMF0pO1xuICBcdFx0fVxuICBcdH1cblxuICBcdGlmIChxdWVyeSA9IHRoaXMucm9vdC5fbGl2ZUNvbXBvbmVudFF1ZXJpZXNbXCJfXCIgKyB0aGlzLm5hbWVdKSB7XG4gIFx0XHRxdWVyeS5fbWFrZURpcnR5KCk7XG4gIFx0fVxuXG4gIFx0ZnVuY3Rpb24gcmViaW5kKHgpIHtcbiAgXHRcdHgucmViaW5kKG9sZEtleXBhdGgsIG5ld0tleXBhdGgpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBDb21wb25lbnRfcHJvdG90eXBlX3JlbmRlciA9IENvbXBvbmVudCRyZW5kZXI7XG5cbiAgZnVuY3Rpb24gQ29tcG9uZW50JHJlbmRlcigpIHtcbiAgXHR2YXIgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlO1xuXG4gIFx0aW5zdGFuY2UucmVuZGVyKHRoaXMucGFyZW50RnJhZ21lbnQuZ2V0Tm9kZSgpKTtcblxuICBcdHRoaXMucmVuZGVyZWQgPSB0cnVlO1xuICBcdHJldHVybiBpbnN0YW5jZS5mcmFnbWVudC5kZXRhY2goKTtcbiAgfVxuXG4gIHZhciBDb21wb25lbnRfcHJvdG90eXBlX3RvU3RyaW5nID0gQ29tcG9uZW50JHRvU3RyaW5nO1xuXG4gIGZ1bmN0aW9uIENvbXBvbmVudCR0b1N0cmluZygpIHtcbiAgXHRyZXR1cm4gdGhpcy5pbnN0YW5jZS5mcmFnbWVudC50b1N0cmluZygpO1xuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfdW5iaW5kID0gQ29tcG9uZW50JHVuYmluZDtcblxuICB2YXIgQ29tcG9uZW50X3Byb3RvdHlwZV91bmJpbmRfX3RlYXJkb3duSG9vayA9IG5ldyBob29rc19Ib29rKFwidGVhcmRvd25cIik7XG4gIGZ1bmN0aW9uIENvbXBvbmVudCR1bmJpbmQoKSB7XG4gIFx0dmFyIGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZTtcblxuICBcdHRoaXMucmVzb2x2ZXJzLmZvckVhY2gobWV0aG9kQ2FsbGVyc19fdW5iaW5kKTtcblxuICBcdHJlbW92ZUZyb21MaXZlQ29tcG9uZW50UXVlcmllcyh0aGlzKTtcblxuICBcdGluc3RhbmNlLl9vYnNlcnZlcnMuZm9yRWFjaChjYW5jZWwpO1xuXG4gIFx0Ly8gdGVhcmRvd24gdGhlIGluc3RhbmNlXG4gIFx0aW5zdGFuY2UuZnJhZ21lbnQudW5iaW5kKCk7XG4gIFx0aW5zdGFuY2Uudmlld21vZGVsLnRlYXJkb3duKCk7XG5cbiAgXHRpZiAoaW5zdGFuY2UuZnJhZ21lbnQucmVuZGVyZWQgJiYgaW5zdGFuY2UuZWwuX19yYWN0aXZlX2luc3RhbmNlc19fKSB7XG4gIFx0XHRyZW1vdmVGcm9tQXJyYXkoaW5zdGFuY2UuZWwuX19yYWN0aXZlX2luc3RhbmNlc19fLCBpbnN0YW5jZSk7XG4gIFx0fVxuXG4gIFx0Q29tcG9uZW50X3Byb3RvdHlwZV91bmJpbmRfX3RlYXJkb3duSG9vay5maXJlKGluc3RhbmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUZyb21MaXZlQ29tcG9uZW50UXVlcmllcyhjb21wb25lbnQpIHtcbiAgXHR2YXIgaW5zdGFuY2UsIHF1ZXJ5O1xuXG4gIFx0aW5zdGFuY2UgPSBjb21wb25lbnQucm9vdDtcblxuICBcdGRvIHtcbiAgXHRcdGlmIChxdWVyeSA9IGluc3RhbmNlLl9saXZlQ29tcG9uZW50UXVlcmllc1tcIl9cIiArIGNvbXBvbmVudC5uYW1lXSkge1xuICBcdFx0XHRxdWVyeS5fcmVtb3ZlKGNvbXBvbmVudCk7XG4gIFx0XHR9XG4gIFx0fSB3aGlsZSAoaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQpO1xuICB9XG5cbiAgdmFyIENvbXBvbmVudF9wcm90b3R5cGVfdW5yZW5kZXIgPSBDb21wb25lbnQkdW5yZW5kZXI7XG5cbiAgZnVuY3Rpb24gQ29tcG9uZW50JHVucmVuZGVyKHNob3VsZERlc3Ryb3kpIHtcbiAgXHR0aGlzLnNob3VsZERlc3Ryb3kgPSBzaG91bGREZXN0cm95O1xuICBcdHRoaXMuaW5zdGFuY2UudW5yZW5kZXIoKTtcbiAgfVxuXG4gIHZhciBDb21wb25lbnQgPSBmdW5jdGlvbiAob3B0aW9ucywgQ29uc3RydWN0b3IpIHtcbiAgXHR0aGlzLmluaXQob3B0aW9ucywgQ29uc3RydWN0b3IpO1xuICB9O1xuXG4gIENvbXBvbmVudC5wcm90b3R5cGUgPSB7XG4gIFx0ZGV0YWNoOiBDb21wb25lbnRfcHJvdG90eXBlX2RldGFjaCxcbiAgXHRmaW5kOiBDb21wb25lbnRfcHJvdG90eXBlX2ZpbmQsXG4gIFx0ZmluZEFsbDogQ29tcG9uZW50X3Byb3RvdHlwZV9maW5kQWxsLFxuICBcdGZpbmRBbGxDb21wb25lbnRzOiBDb21wb25lbnRfcHJvdG90eXBlX2ZpbmRBbGxDb21wb25lbnRzLFxuICBcdGZpbmRDb21wb25lbnQ6IENvbXBvbmVudF9wcm90b3R5cGVfZmluZENvbXBvbmVudCxcbiAgXHRmaW5kTmV4dE5vZGU6IENvbXBvbmVudF9wcm90b3R5cGVfZmluZE5leHROb2RlLFxuICBcdGZpcnN0Tm9kZTogQ29tcG9uZW50X3Byb3RvdHlwZV9maXJzdE5vZGUsXG4gIFx0aW5pdDogQ29tcG9uZW50X3Byb3RvdHlwZV9pbml0LFxuICBcdHJlYmluZDogQ29tcG9uZW50X3Byb3RvdHlwZV9yZWJpbmQsXG4gIFx0cmVuZGVyOiBDb21wb25lbnRfcHJvdG90eXBlX3JlbmRlcixcbiAgXHR0b1N0cmluZzogQ29tcG9uZW50X3Byb3RvdHlwZV90b1N0cmluZyxcbiAgXHR1bmJpbmQ6IENvbXBvbmVudF9wcm90b3R5cGVfdW5iaW5kLFxuICBcdHVucmVuZGVyOiBDb21wb25lbnRfcHJvdG90eXBlX3VucmVuZGVyXG4gIH07XG5cbiAgdmFyIF9Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cbiAgdmFyIENvbW1lbnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdHRoaXMudHlwZSA9IENPTU1FTlQ7XG4gIFx0dGhpcy52YWx1ZSA9IG9wdGlvbnMudGVtcGxhdGUuYztcbiAgfTtcblxuICBDb21tZW50LnByb3RvdHlwZSA9IHtcbiAgXHRkZXRhY2g6IHNoYXJlZF9kZXRhY2gsXG5cbiAgXHRmaXJzdE5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLm5vZGU7XG4gIFx0fSxcblxuICBcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0aWYgKCF0aGlzLm5vZGUpIHtcbiAgXHRcdFx0dGhpcy5ub2RlID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0aGlzLnZhbHVlKTtcbiAgXHRcdH1cblxuICBcdFx0cmV0dXJuIHRoaXMubm9kZTtcbiAgXHR9LFxuXG4gIFx0dG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiBcIjwhLS1cIiArIHRoaXMudmFsdWUgKyBcIi0tPlwiO1xuICBcdH0sXG5cbiAgXHR1bnJlbmRlcjogZnVuY3Rpb24gKHNob3VsZERlc3Ryb3kpIHtcbiAgXHRcdGlmIChzaG91bGREZXN0cm95KSB7XG4gIFx0XHRcdHRoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7XG4gIFx0XHR9XG4gIFx0fVxuICB9O1xuXG4gIHZhciBpdGVtc19Db21tZW50ID0gQ29tbWVudDtcblxuICB2YXIgWWllbGRlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIFx0dmFyIGNvbnRhaW5lciwgY29tcG9uZW50O1xuXG4gIFx0dGhpcy50eXBlID0gWUlFTERFUjtcblxuICBcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyID0gb3B0aW9ucy5wYXJlbnRGcmFnbWVudC5yb290O1xuICBcdHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50ID0gY29udGFpbmVyLmNvbXBvbmVudDtcblxuICBcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICBcdHRoaXMuY29udGFpbmVyRnJhZ21lbnQgPSBvcHRpb25zLnBhcmVudEZyYWdtZW50O1xuICBcdHRoaXMucGFyZW50RnJhZ21lbnQgPSBjb21wb25lbnQucGFyZW50RnJhZ21lbnQ7XG5cbiAgXHR2YXIgbmFtZSA9IHRoaXMubmFtZSA9IG9wdGlvbnMudGVtcGxhdGUubiB8fCBcIlwiO1xuXG4gIFx0dmFyIHRlbXBsYXRlID0gY29udGFpbmVyLl9pbmxpbmVQYXJ0aWFsc1tuYW1lXTtcblxuICBcdGlmICghdGVtcGxhdGUpIHtcbiAgXHRcdHdhcm5JZkRlYnVnKFwiQ291bGQgbm90IGZpbmQgdGVtcGxhdGUgZm9yIHBhcnRpYWwgXFxcIlwiICsgbmFtZSArIFwiXFxcIlwiLCB7IHJhY3RpdmU6IG9wdGlvbnMucm9vdCB9KTtcbiAgXHRcdHRlbXBsYXRlID0gW107XG4gIFx0fVxuXG4gIFx0dGhpcy5mcmFnbWVudCA9IG5ldyB2aXJ0dWFsZG9tX0ZyYWdtZW50KHtcbiAgXHRcdG93bmVyOiB0aGlzLFxuICBcdFx0cm9vdDogY29udGFpbmVyLnBhcmVudCxcbiAgXHRcdHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgXHRcdHBFbGVtZW50OiB0aGlzLmNvbnRhaW5lckZyYWdtZW50LnBFbGVtZW50XG4gIFx0fSk7XG5cbiAgXHQvLyBldmVuIHRob3VnaCBvbmx5IG9uZSB5aWVsZGVyIGlzIGFsbG93ZWQsIHdlIG5lZWQgdG8gaGF2ZSBhbiBhcnJheSBvZiB0aGVtXG4gIFx0Ly8gYXMgaXQncyBwb3NzaWJsZSB0byBjYXVzZSBhIHlpZWxkZXIgdG8gYmUgY3JlYXRlZCBiZWZvcmUgdGhlIGxhc3Qgb25lXG4gIFx0Ly8gd2FzIGRlc3Ryb3llZCBpbiB0aGUgc2FtZSB0dXJuIG9mIHRoZSBydW5sb29wXG4gIFx0aWYgKCFpc0FycmF5KGNvbXBvbmVudC55aWVsZGVyc1tuYW1lXSkpIHtcbiAgXHRcdGNvbXBvbmVudC55aWVsZGVyc1tuYW1lXSA9IFt0aGlzXTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0Y29tcG9uZW50LnlpZWxkZXJzW25hbWVdLnB1c2godGhpcyk7XG4gIFx0fVxuXG4gIFx0Z2xvYmFsX3J1bmxvb3Auc2NoZWR1bGVUYXNrKGZ1bmN0aW9uICgpIHtcbiAgXHRcdGlmIChjb21wb25lbnQueWllbGRlcnNbbmFtZV0ubGVuZ3RoID4gMSkge1xuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJBIGNvbXBvbmVudCB0ZW1wbGF0ZSBjYW4gb25seSBoYXZlIG9uZSB7e3lpZWxkXCIgKyAobmFtZSA/IFwiIFwiICsgbmFtZSA6IFwiXCIpICsgXCJ9fSBkZWNsYXJhdGlvbiBhdCBhIHRpbWVcIik7XG4gIFx0XHR9XG4gIFx0fSk7XG4gIH07XG5cbiAgWWllbGRlci5wcm90b3R5cGUgPSB7XG4gIFx0ZGV0YWNoOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC5kZXRhY2goKTtcbiAgXHR9LFxuXG4gIFx0ZmluZDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5mcmFnbWVudC5maW5kKHNlbGVjdG9yKTtcbiAgXHR9LFxuXG4gIFx0ZmluZEFsbDogZnVuY3Rpb24gKHNlbGVjdG9yLCBxdWVyeSkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmluZEFsbChzZWxlY3RvciwgcXVlcnkpO1xuICBcdH0sXG5cbiAgXHRmaW5kQ29tcG9uZW50OiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50LmZpbmRDb21wb25lbnQoc2VsZWN0b3IpO1xuICBcdH0sXG5cbiAgXHRmaW5kQWxsQ29tcG9uZW50czogZnVuY3Rpb24gKHNlbGVjdG9yLCBxdWVyeSkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmluZEFsbENvbXBvbmVudHMoc2VsZWN0b3IsIHF1ZXJ5KTtcbiAgXHR9LFxuXG4gIFx0ZmluZE5leHROb2RlOiBmdW5jdGlvbiAoKSB7XG4gIFx0XHRyZXR1cm4gdGhpcy5jb250YWluZXJGcmFnbWVudC5maW5kTmV4dE5vZGUodGhpcyk7XG4gIFx0fSxcblxuICBcdGZpcnN0Tm9kZTogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZmlyc3ROb2RlKCk7XG4gIFx0fSxcblxuICBcdGdldFZhbHVlOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQuZ2V0VmFsdWUob3B0aW9ucyk7XG4gIFx0fSxcblxuICBcdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIHRoaXMuZnJhZ21lbnQucmVuZGVyKCk7XG4gIFx0fSxcblxuICBcdHVuYmluZDogZnVuY3Rpb24gKCkge1xuICBcdFx0dGhpcy5mcmFnbWVudC51bmJpbmQoKTtcbiAgXHR9LFxuXG4gIFx0dW5yZW5kZXI6IGZ1bmN0aW9uIChzaG91bGREZXN0cm95KSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnVucmVuZGVyKHNob3VsZERlc3Ryb3kpO1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KHRoaXMuY29tcG9uZW50LnlpZWxkZXJzW3RoaXMubmFtZV0sIHRoaXMpO1xuICBcdH0sXG5cbiAgXHRyZWJpbmQ6IGZ1bmN0aW9uIChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKSB7XG4gIFx0XHR0aGlzLmZyYWdtZW50LnJlYmluZChvbGRLZXlwYXRoLCBuZXdLZXlwYXRoKTtcbiAgXHR9LFxuXG4gIFx0dG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgXHRcdHJldHVybiB0aGlzLmZyYWdtZW50LnRvU3RyaW5nKCk7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBpdGVtc19ZaWVsZGVyID0gWWllbGRlcjtcblxuICB2YXIgRG9jdHlwZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIFx0dGhpcy5kZWNsYXJhdGlvbiA9IG9wdGlvbnMudGVtcGxhdGUuYTtcbiAgfTtcblxuICBEb2N0eXBlLnByb3RvdHlwZSA9IHtcbiAgXHRpbml0OiBub29wLFxuICBcdHJlbmRlcjogbm9vcCxcbiAgXHR1bnJlbmRlcjogbm9vcCxcbiAgXHR0ZWFyZG93bjogbm9vcCxcbiAgXHR0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICBcdFx0cmV0dXJuIFwiPCFET0NUWVBFXCIgKyB0aGlzLmRlY2xhcmF0aW9uICsgXCI+XCI7XG4gIFx0fVxuICB9O1xuXG4gIHZhciBpdGVtc19Eb2N0eXBlID0gRG9jdHlwZTtcblxuICB2YXIgRnJhZ21lbnRfcHJvdG90eXBlX2luaXQgPSBGcmFnbWVudCRpbml0O1xuXG4gIGZ1bmN0aW9uIEZyYWdtZW50JGluaXQob3B0aW9ucykge1xuICBcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHR0aGlzLm93bmVyID0gb3B0aW9ucy5vd25lcjsgLy8gVGhlIGl0ZW0gdGhhdCBvd25zIHRoaXMgZnJhZ21lbnQgLSBhbiBlbGVtZW50LCBzZWN0aW9uLCBwYXJ0aWFsLCBvciBhdHRyaWJ1dGVcbiAgXHR0aGlzLnBhcmVudCA9IHRoaXMub3duZXIucGFyZW50RnJhZ21lbnQ7XG5cbiAgXHQvLyBpbmhlcml0ZWQgcHJvcGVydGllc1xuICBcdHRoaXMucm9vdCA9IG9wdGlvbnMucm9vdDtcbiAgXHR0aGlzLnBFbGVtZW50ID0gb3B0aW9ucy5wRWxlbWVudDtcbiAgXHR0aGlzLmNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQ7XG4gIFx0dGhpcy5pbmRleCA9IG9wdGlvbnMuaW5kZXg7XG4gIFx0dGhpcy5rZXkgPSBvcHRpb25zLmtleTtcbiAgXHR0aGlzLnJlZ2lzdGVyZWRJbmRleFJlZnMgPSBbXTtcblxuICBcdC8vIGVuY2Fwc3VsYXRlZCBzdHlsZXMgc2hvdWxkIGJlIGluaGVyaXRlZCB1bnRpbCB0aGV5IGdldCBhcHBsaWVkIGJ5IGFuIGVsZW1lbnRcbiAgXHR0aGlzLmNzc0lkcyA9IFwiY3NzSWRzXCIgaW4gb3B0aW9ucyA/IG9wdGlvbnMuY3NzSWRzIDogdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5jc3NJZHMgOiBudWxsO1xuXG4gIFx0dGhpcy5pdGVtcyA9IG9wdGlvbnMudGVtcGxhdGUubWFwKGZ1bmN0aW9uICh0ZW1wbGF0ZSwgaSkge1xuICBcdFx0cmV0dXJuIGNyZWF0ZUl0ZW0oe1xuICBcdFx0XHRwYXJlbnRGcmFnbWVudDogX3RoaXMsXG4gIFx0XHRcdHBFbGVtZW50OiBvcHRpb25zLnBFbGVtZW50LFxuICBcdFx0XHR0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gIFx0XHRcdGluZGV4OiBpXG4gIFx0XHR9KTtcbiAgXHR9KTtcblxuICBcdHRoaXMudmFsdWUgPSB0aGlzLmFyZ3NMaXN0ID0gbnVsbDtcbiAgXHR0aGlzLmRpcnR5QXJncyA9IHRoaXMuZGlydHlWYWx1ZSA9IHRydWU7XG5cbiAgXHR0aGlzLmJvdW5kID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUl0ZW0ob3B0aW9ucykge1xuICBcdGlmICh0eXBlb2Ygb3B0aW9ucy50ZW1wbGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICBcdFx0cmV0dXJuIG5ldyBpdGVtc19UZXh0KG9wdGlvbnMpO1xuICBcdH1cblxuICBcdHN3aXRjaCAob3B0aW9ucy50ZW1wbGF0ZS50KSB7XG4gIFx0XHRjYXNlIFlJRUxERVI6XG4gIFx0XHRcdHJldHVybiBuZXcgaXRlbXNfWWllbGRlcihvcHRpb25zKTtcbiAgXHRcdGNhc2UgSU5URVJQT0xBVE9SOlxuICBcdFx0XHRyZXR1cm4gbmV3IGl0ZW1zX0ludGVycG9sYXRvcihvcHRpb25zKTtcbiAgXHRcdGNhc2UgU0VDVElPTjpcbiAgXHRcdFx0cmV0dXJuIG5ldyBfU2VjdGlvbihvcHRpb25zKTtcbiAgXHRcdGNhc2UgVFJJUExFOlxuICBcdFx0XHRyZXR1cm4gbmV3IF9UcmlwbGUob3B0aW9ucyk7XG4gIFx0XHRjYXNlIEVMRU1FTlQ6XG4gIFx0XHRcdHZhciBjb25zdHJ1Y3RvciA9IHVuZGVmaW5lZDtcbiAgXHRcdFx0aWYgKGNvbnN0cnVjdG9yID0gQ29tcG9uZW50X2dldENvbXBvbmVudChvcHRpb25zLnBhcmVudEZyYWdtZW50LnJvb3QsIG9wdGlvbnMudGVtcGxhdGUuZSkpIHtcbiAgXHRcdFx0XHRyZXR1cm4gbmV3IF9Db21wb25lbnQob3B0aW9ucywgY29uc3RydWN0b3IpO1xuICBcdFx0XHR9XG4gIFx0XHRcdHJldHVybiBuZXcgX0VsZW1lbnQob3B0aW9ucyk7XG4gIFx0XHRjYXNlIFBBUlRJQUw6XG4gIFx0XHRcdHJldHVybiBuZXcgX1BhcnRpYWwob3B0aW9ucyk7XG4gIFx0XHRjYXNlIENPTU1FTlQ6XG4gIFx0XHRcdHJldHVybiBuZXcgaXRlbXNfQ29tbWVudChvcHRpb25zKTtcbiAgXHRcdGNhc2UgRE9DVFlQRTpcbiAgXHRcdFx0cmV0dXJuIG5ldyBpdGVtc19Eb2N0eXBlKG9wdGlvbnMpO1xuXG4gIFx0XHRkZWZhdWx0OlxuICBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTb21ldGhpbmcgdmVyeSBzdHJhbmdlIGhhcHBlbmVkLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vcmFjdGl2ZWpzL3JhY3RpdmUvaXNzdWVzLiBUaGFua3MhXCIpO1xuICBcdH1cbiAgfVxuXG4gIHZhciBGcmFnbWVudF9wcm90b3R5cGVfcmViaW5kID0gRnJhZ21lbnQkcmViaW5kO1xuICBmdW5jdGlvbiBGcmFnbWVudCRyZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCkge1xuXG4gIFx0Ly8gYXNzaWduIG5ldyBjb250ZXh0IGtleXBhdGggaWYgbmVlZGVkXG4gIFx0aWYgKCF0aGlzLm93bmVyIHx8IHRoaXMub3duZXIuaGFzQ29udGV4dCkge1xuICBcdFx0YXNzaWduTmV3S2V5cGF0aCh0aGlzLCBcImNvbnRleHRcIiwgb2xkS2V5cGF0aCwgbmV3S2V5cGF0aCk7XG4gIFx0fVxuXG4gIFx0dGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIFx0XHRpZiAoaXRlbS5yZWJpbmQpIHtcbiAgXHRcdFx0aXRlbS5yZWJpbmQob2xkS2V5cGF0aCwgbmV3S2V5cGF0aCk7XG4gIFx0XHR9XG4gIFx0fSk7XG4gIH1cblxuICB2YXIgRnJhZ21lbnRfcHJvdG90eXBlX3JlbmRlciA9IEZyYWdtZW50JHJlbmRlcjtcblxuICBmdW5jdGlvbiBGcmFnbWVudCRyZW5kZXIoKSB7XG4gIFx0dmFyIHJlc3VsdDtcblxuICBcdGlmICh0aGlzLml0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICBcdFx0cmVzdWx0ID0gdGhpcy5pdGVtc1swXS5yZW5kZXIoKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0cmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIFx0XHR0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgXHRcdFx0cmVzdWx0LmFwcGVuZENoaWxkKGl0ZW0ucmVuZGVyKCkpO1xuICBcdFx0fSk7XG4gIFx0fVxuXG4gIFx0dGhpcy5yZW5kZXJlZCA9IHRydWU7XG4gIFx0cmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHZhciBGcmFnbWVudF9wcm90b3R5cGVfdG9TdHJpbmcgPSBGcmFnbWVudCR0b1N0cmluZztcblxuICBmdW5jdGlvbiBGcmFnbWVudCR0b1N0cmluZyhlc2NhcGUpIHtcbiAgXHRpZiAoIXRoaXMuaXRlbXMpIHtcbiAgXHRcdHJldHVybiBcIlwiO1xuICBcdH1cblxuICBcdHJldHVybiB0aGlzLml0ZW1zLm1hcChlc2NhcGUgPyB0b0VzY2FwZWRTdHJpbmcgOiBGcmFnbWVudF9wcm90b3R5cGVfdG9TdHJpbmdfX3RvU3RyaW5nKS5qb2luKFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gRnJhZ21lbnRfcHJvdG90eXBlX3RvU3RyaW5nX190b1N0cmluZyhpdGVtKSB7XG4gIFx0cmV0dXJuIGl0ZW0udG9TdHJpbmcoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvRXNjYXBlZFN0cmluZyhpdGVtKSB7XG4gIFx0cmV0dXJuIGl0ZW0udG9TdHJpbmcodHJ1ZSk7XG4gIH1cblxuICB2YXIgRnJhZ21lbnRfcHJvdG90eXBlX3VuYmluZCA9IEZyYWdtZW50JHVuYmluZDtcblxuICBmdW5jdGlvbiBGcmFnbWVudCR1bmJpbmQoKSB7XG4gIFx0aWYgKCF0aGlzLmJvdW5kKSB7XG4gIFx0XHRyZXR1cm47XG4gIFx0fVxuXG4gIFx0dGhpcy5pdGVtcy5mb3JFYWNoKHVuYmluZEl0ZW0pO1xuICBcdHRoaXMuYm91bmQgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuYmluZEl0ZW0oaXRlbSkge1xuICBcdGlmIChpdGVtLnVuYmluZCkge1xuICBcdFx0aXRlbS51bmJpbmQoKTtcbiAgXHR9XG4gIH1cblxuICB2YXIgRnJhZ21lbnRfcHJvdG90eXBlX3VucmVuZGVyID0gRnJhZ21lbnQkdW5yZW5kZXI7XG5cbiAgZnVuY3Rpb24gRnJhZ21lbnQkdW5yZW5kZXIoc2hvdWxkRGVzdHJveSkge1xuICBcdGlmICghdGhpcy5yZW5kZXJlZCkge1xuICBcdFx0dGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIHVucmVuZGVyIGEgZnJhZ21lbnQgdGhhdCB3YXMgbm90IHJlbmRlcmVkXCIpO1xuICBcdH1cblxuICBcdHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuICBcdFx0cmV0dXJuIGkudW5yZW5kZXIoc2hvdWxkRGVzdHJveSk7XG4gIFx0fSk7XG4gIFx0dGhpcy5yZW5kZXJlZCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIEZyYWdtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHR0aGlzLmluaXQob3B0aW9ucyk7XG4gIH07XG5cbiAgRnJhZ21lbnQucHJvdG90eXBlID0ge1xuICBcdGJ1YmJsZTogcHJvdG90eXBlX2J1YmJsZSxcbiAgXHRkZXRhY2g6IEZyYWdtZW50X3Byb3RvdHlwZV9kZXRhY2gsXG4gIFx0ZmluZDogRnJhZ21lbnRfcHJvdG90eXBlX2ZpbmQsXG4gIFx0ZmluZEFsbDogRnJhZ21lbnRfcHJvdG90eXBlX2ZpbmRBbGwsXG4gIFx0ZmluZEFsbENvbXBvbmVudHM6IEZyYWdtZW50X3Byb3RvdHlwZV9maW5kQWxsQ29tcG9uZW50cyxcbiAgXHRmaW5kQ29tcG9uZW50OiBGcmFnbWVudF9wcm90b3R5cGVfZmluZENvbXBvbmVudCxcbiAgXHRmaW5kTmV4dE5vZGU6IHByb3RvdHlwZV9maW5kTmV4dE5vZGUsXG4gIFx0Zmlyc3ROb2RlOiBwcm90b3R5cGVfZmlyc3ROb2RlLFxuICBcdGdldEFyZ3NMaXN0OiBnZXRBcmdzTGlzdCxcbiAgXHRnZXROb2RlOiBnZXROb2RlLFxuICBcdGdldFZhbHVlOiBwcm90b3R5cGVfZ2V0VmFsdWUsXG4gIFx0aW5pdDogRnJhZ21lbnRfcHJvdG90eXBlX2luaXQsXG4gIFx0cmViaW5kOiBGcmFnbWVudF9wcm90b3R5cGVfcmViaW5kLFxuICBcdHJlZ2lzdGVySW5kZXhSZWY6IGZ1bmN0aW9uIChpZHgpIHtcbiAgXHRcdHZhciBpZHhzID0gdGhpcy5yZWdpc3RlcmVkSW5kZXhSZWZzO1xuICBcdFx0aWYgKGlkeHMuaW5kZXhPZihpZHgpID09PSAtMSkge1xuICBcdFx0XHRpZHhzLnB1c2goaWR4KTtcbiAgXHRcdH1cbiAgXHR9LFxuICBcdHJlbmRlcjogRnJhZ21lbnRfcHJvdG90eXBlX3JlbmRlcixcbiAgXHR0b1N0cmluZzogRnJhZ21lbnRfcHJvdG90eXBlX3RvU3RyaW5nLFxuICBcdHVuYmluZDogRnJhZ21lbnRfcHJvdG90eXBlX3VuYmluZCxcbiAgXHR1bnJlZ2lzdGVySW5kZXhSZWY6IGZ1bmN0aW9uIChpZHgpIHtcbiAgXHRcdHZhciBpZHhzID0gdGhpcy5yZWdpc3RlcmVkSW5kZXhSZWZzO1xuICBcdFx0aWR4cy5zcGxpY2UoaWR4cy5pbmRleE9mKGlkeCksIDEpO1xuICBcdH0sXG4gIFx0dW5yZW5kZXI6IEZyYWdtZW50X3Byb3RvdHlwZV91bnJlbmRlclxuICB9O1xuXG4gIHZhciB2aXJ0dWFsZG9tX0ZyYWdtZW50ID0gRnJhZ21lbnQ7XG5cbiAgdmFyIHByb3RvdHlwZV9yZXNldCA9IFJhY3RpdmUkcmVzZXQ7XG4gIHZhciBzaG91bGRSZXJlbmRlciA9IFtcInRlbXBsYXRlXCIsIFwicGFydGlhbHNcIiwgXCJjb21wb25lbnRzXCIsIFwiZGVjb3JhdG9yc1wiLCBcImV2ZW50c1wiXSxcbiAgICAgIHJlc2V0SG9vayA9IG5ldyBob29rc19Ib29rKFwicmVzZXRcIik7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkcmVzZXQoZGF0YSkge1xuICBcdHZhciBwcm9taXNlLCB3cmFwcGVyLCBjaGFuZ2VzLCBpLCByZXJlbmRlcjtcblxuICBcdGRhdGEgPSBkYXRhIHx8IHt9O1xuXG4gIFx0aWYgKHR5cGVvZiBkYXRhICE9PSBcIm9iamVjdFwiKSB7XG4gIFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzZXQgbWV0aG9kIHRha2VzIGVpdGhlciBubyBhcmd1bWVudHMsIG9yIGFuIG9iamVjdCBjb250YWluaW5nIG5ldyBkYXRhXCIpO1xuICBcdH1cblxuICBcdC8vIElmIHRoZSByb290IG9iamVjdCBpcyB3cmFwcGVkLCB0cnkgYW5kIHVzZSB0aGUgd3JhcHBlcidzIHJlc2V0IHZhbHVlXG4gIFx0aWYgKCh3cmFwcGVyID0gdGhpcy52aWV3bW9kZWwud3JhcHBlZFtcIlwiXSkgJiYgd3JhcHBlci5yZXNldCkge1xuICBcdFx0aWYgKHdyYXBwZXIucmVzZXQoZGF0YSkgPT09IGZhbHNlKSB7XG4gIFx0XHRcdC8vIHJlc2V0IHdhcyByZWplY3RlZCwgd2UgbmVlZCB0byByZXBsYWNlIHRoZSBvYmplY3RcbiAgXHRcdFx0dGhpcy52aWV3bW9kZWwucmVzZXQoZGF0YSk7XG4gIFx0XHR9XG4gIFx0fSBlbHNlIHtcbiAgXHRcdHRoaXMudmlld21vZGVsLnJlc2V0KGRhdGEpO1xuICBcdH1cblxuICBcdC8vIHJlc2V0IGNvbmZpZyBpdGVtcyBhbmQgdHJhY2sgaWYgbmVlZCB0byByZXJlbmRlclxuICBcdGNoYW5nZXMgPSBjb25maWdfY29uZmlnLnJlc2V0KHRoaXMpO1xuXG4gIFx0aSA9IGNoYW5nZXMubGVuZ3RoO1xuICBcdHdoaWxlIChpLS0pIHtcbiAgXHRcdGlmIChzaG91bGRSZXJlbmRlci5pbmRleE9mKGNoYW5nZXNbaV0pID4gLTEpIHtcbiAgXHRcdFx0cmVyZW5kZXIgPSB0cnVlO1xuICBcdFx0XHRicmVhaztcbiAgXHRcdH1cbiAgXHR9XG5cbiAgXHRpZiAocmVyZW5kZXIpIHtcbiAgXHRcdHZhciBjb21wb25lbnQgPSB1bmRlZmluZWQ7XG5cbiAgXHRcdHRoaXMudmlld21vZGVsLm1hcmsocm9vdEtleXBhdGgpO1xuXG4gIFx0XHQvLyBJcyB0aGlzIGlzIGEgY29tcG9uZW50LCB3ZSBuZWVkIHRvIHNldCB0aGUgYHNob3VsZERlc3Ryb3lgXG4gIFx0XHQvLyBmbGFnLCBvdGhlcndpc2UgaXQgd2lsbCBhc3N1bWUgYnkgZGVmYXVsdCB0aGF0IGEgcGFyZW50IG5vZGVcbiAgXHRcdC8vIHdpbGwgYmUgZGV0YWNoZWQsIGFuZCB0aGVyZWZvcmUgaXQgZG9lc24ndCBuZWVkIHRvIGJvdGhlclxuICBcdFx0Ly8gZGV0YWNoaW5nIGl0cyBvd24gbm9kZXNcbiAgXHRcdGlmIChjb21wb25lbnQgPSB0aGlzLmNvbXBvbmVudCkge1xuICBcdFx0XHRjb21wb25lbnQuc2hvdWxkRGVzdHJveSA9IHRydWU7XG4gIFx0XHR9XG5cbiAgXHRcdHRoaXMudW5yZW5kZXIoKTtcblxuICBcdFx0aWYgKGNvbXBvbmVudCkge1xuICBcdFx0XHRjb21wb25lbnQuc2hvdWxkRGVzdHJveSA9IGZhbHNlO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBJZiB0aGUgdGVtcGxhdGUgY2hhbmdlZCwgd2UgbmVlZCB0byBkZXN0cm95IHRoZSBwYXJhbGxlbCBET01cbiAgXHRcdC8vIFRPRE8gaWYgd2UncmUgaGVyZSwgcHJlc3VtYWJseSBpdCBkaWQ/XG4gIFx0XHRpZiAodGhpcy5mcmFnbWVudC50ZW1wbGF0ZSAhPT0gdGhpcy50ZW1wbGF0ZSkge1xuICBcdFx0XHR0aGlzLmZyYWdtZW50LnVuYmluZCgpO1xuXG4gIFx0XHRcdHRoaXMuZnJhZ21lbnQgPSBuZXcgdmlydHVhbGRvbV9GcmFnbWVudCh7XG4gIFx0XHRcdFx0dGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gIFx0XHRcdFx0cm9vdDogdGhpcyxcbiAgXHRcdFx0XHRvd25lcjogdGhpc1xuICBcdFx0XHR9KTtcbiAgXHRcdH1cblxuICBcdFx0cHJvbWlzZSA9IHRoaXMucmVuZGVyKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0cHJvbWlzZSA9IGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMsIHRydWUpO1xuICBcdFx0dGhpcy52aWV3bW9kZWwubWFyayhyb290S2V5cGF0aCk7XG4gIFx0XHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcbiAgXHR9XG5cbiAgXHRyZXNldEhvb2suZmlyZSh0aGlzLCBkYXRhKTtcblxuICBcdHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgdmFyIHJlc2V0UGFydGlhbCA9IGZ1bmN0aW9uIChuYW1lLCBwYXJ0aWFsKSB7XG4gIFx0dmFyIHByb21pc2UsXG4gIFx0ICAgIGNvbGxlY3Rpb24gPSBbXTtcblxuICBcdGZ1bmN0aW9uIGNvbGxlY3Qoc291cmNlLCBkZXN0LCByYWN0aXZlKSB7XG4gIFx0XHQvLyBpZiB0aGlzIGlzIGEgY29tcG9uZW50IGFuZCBpdCBoYXMgaXRzIG93biBwYXJ0aWFsLCBiYWlsXG4gIFx0XHRpZiAocmFjdGl2ZSAmJiByYWN0aXZlLnBhcnRpYWxzW25hbWVdKSByZXR1cm47XG5cbiAgXHRcdHNvdXJjZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIFx0XHRcdC8vIHF1ZXVlIHRvIHJlcmVuZGVyIGlmIHRoZSBpdGVtIGlzIGEgcGFydGlhbCBhbmQgdGhlIGN1cnJlbnQgbmFtZSBtYXRjaGVzXG4gIFx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFBBUlRJQUwgJiYgaXRlbS5nZXRQYXJ0aWFsTmFtZSgpID09PSBuYW1lKSB7XG4gIFx0XHRcdFx0ZGVzdC5wdXNoKGl0ZW0pO1xuICBcdFx0XHR9XG5cbiAgXHRcdFx0Ly8gaWYgaXQgaGFzIGEgZnJhZ21lbnQsIHByb2Nlc3MgaXRzIGl0ZW1zXG4gIFx0XHRcdGlmIChpdGVtLmZyYWdtZW50KSB7XG4gIFx0XHRcdFx0Y29sbGVjdChpdGVtLmZyYWdtZW50Lml0ZW1zLCBkZXN0LCByYWN0aXZlKTtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIG9yIGlmIGl0IGhhcyBmcmFnbWVudHNcbiAgXHRcdFx0aWYgKGlzQXJyYXkoaXRlbS5mcmFnbWVudHMpKSB7XG4gIFx0XHRcdFx0Y29sbGVjdChpdGVtLmZyYWdtZW50cywgZGVzdCwgcmFjdGl2ZSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBvciBpZiBpdCBpcyBpdHNlbGYgYSBmcmFnbWVudCwgcHJvY2VzcyBpdHMgaXRlbXNcbiAgXHRcdFx0ZWxzZSBpZiAoaXNBcnJheShpdGVtLml0ZW1zKSkge1xuICBcdFx0XHRcdGNvbGxlY3QoaXRlbS5pdGVtcywgZGVzdCwgcmFjdGl2ZSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBvciBpZiBpdCBpcyBhIGNvbXBvbmVudCwgc3RlcCBpbiBhbmQgcHJvY2VzcyBpdHMgaXRlbXNcbiAgXHRcdFx0ZWxzZSBpZiAoaXRlbS50eXBlID09PSBDT01QT05FTlQgJiYgaXRlbS5pbnN0YW5jZSkge1xuICBcdFx0XHRcdGNvbGxlY3QoaXRlbS5pbnN0YW5jZS5mcmFnbWVudC5pdGVtcywgZGVzdCwgaXRlbS5pbnN0YW5jZSk7XG4gIFx0XHRcdH1cblxuICBcdFx0XHQvLyBpZiB0aGUgaXRlbSBpcyBhbiBlbGVtZW50LCBwcm9jZXNzIGl0cyBhdHRyaWJ1dGVzIHRvb1xuICBcdFx0XHRpZiAoaXRlbS50eXBlID09PSBFTEVNRU5UKSB7XG4gIFx0XHRcdFx0aWYgKGlzQXJyYXkoaXRlbS5hdHRyaWJ1dGVzKSkge1xuICBcdFx0XHRcdFx0Y29sbGVjdChpdGVtLmF0dHJpYnV0ZXMsIGRlc3QsIHJhY3RpdmUpO1xuICBcdFx0XHRcdH1cblxuICBcdFx0XHRcdGlmIChpc0FycmF5KGl0ZW0uY29uZGl0aW9uYWxBdHRyaWJ1dGVzKSkge1xuICBcdFx0XHRcdFx0Y29sbGVjdChpdGVtLmNvbmRpdGlvbmFsQXR0cmlidXRlcywgZGVzdCwgcmFjdGl2ZSk7XG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9XG4gIFx0XHR9KTtcbiAgXHR9XG5cbiAgXHRjb2xsZWN0KHRoaXMuZnJhZ21lbnQuaXRlbXMsIGNvbGxlY3Rpb24pO1xuICBcdHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuXG4gIFx0cHJvbWlzZSA9IGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMsIHRydWUpO1xuXG4gIFx0Y29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIFx0XHRpdGVtLnZhbHVlID0gdW5kZWZpbmVkO1xuICBcdFx0aXRlbS5zZXRWYWx1ZShuYW1lKTtcbiAgXHR9KTtcblxuICBcdGdsb2JhbF9ydW5sb29wLmVuZCgpO1xuXG4gIFx0cmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgLy8gVE9ETyBzaG91bGQgcmVzZXRUZW1wbGF0ZSBiZSBhc3luY2hyb25vdXM/IGkuZS4gc2hvdWxkIGl0IGJlIGEgY2FzZVxuICAvLyBvZiBvdXRybywgdXBkYXRlIHRlbXBsYXRlLCBpbnRybz8gSSByZWNrb24gcHJvYmFibHkgbm90LCBzaW5jZSB0aGF0XG4gIC8vIGNvdWxkIGJlIGFjaGlldmVkIHdpdGggdW5yZW5kZXItcmVzZXRUZW1wbGF0ZS1yZW5kZXIuIEFsc28sIGl0IHNob3VsZFxuICAvLyBjb25jZXB0dWFsbHkgYmUgc2ltaWxhciB0byByZXNldFBhcnRpYWwsIHdoaWNoIGNvdWxkbid0IGJlIGFzeW5jXG5cbiAgdmFyIHJlc2V0VGVtcGxhdGUgPSBSYWN0aXZlJHJlc2V0VGVtcGxhdGU7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkcmVzZXRUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICBcdHZhciB0cmFuc2l0aW9uc0VuYWJsZWQsIGNvbXBvbmVudDtcblxuICBcdHRlbXBsYXRlX3RlbXBsYXRlLmluaXQobnVsbCwgdGhpcywgeyB0ZW1wbGF0ZTogdGVtcGxhdGUgfSk7XG5cbiAgXHR0cmFuc2l0aW9uc0VuYWJsZWQgPSB0aGlzLnRyYW5zaXRpb25zRW5hYmxlZDtcbiAgXHR0aGlzLnRyYW5zaXRpb25zRW5hYmxlZCA9IGZhbHNlO1xuXG4gIFx0Ly8gSXMgdGhpcyBpcyBhIGNvbXBvbmVudCwgd2UgbmVlZCB0byBzZXQgdGhlIGBzaG91bGREZXN0cm95YFxuICBcdC8vIGZsYWcsIG90aGVyd2lzZSBpdCB3aWxsIGFzc3VtZSBieSBkZWZhdWx0IHRoYXQgYSBwYXJlbnQgbm9kZVxuICBcdC8vIHdpbGwgYmUgZGV0YWNoZWQsIGFuZCB0aGVyZWZvcmUgaXQgZG9lc24ndCBuZWVkIHRvIGJvdGhlclxuICBcdC8vIGRldGFjaGluZyBpdHMgb3duIG5vZGVzXG4gIFx0aWYgKGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50KSB7XG4gIFx0XHRjb21wb25lbnQuc2hvdWxkRGVzdHJveSA9IHRydWU7XG4gIFx0fVxuXG4gIFx0dGhpcy51bnJlbmRlcigpO1xuXG4gIFx0aWYgKGNvbXBvbmVudCkge1xuICBcdFx0Y29tcG9uZW50LnNob3VsZERlc3Ryb3kgPSBmYWxzZTtcbiAgXHR9XG5cbiAgXHQvLyByZW1vdmUgZXhpc3RpbmcgZnJhZ21lbnQgYW5kIGNyZWF0ZSBuZXcgb25lXG4gIFx0dGhpcy5mcmFnbWVudC51bmJpbmQoKTtcbiAgXHR0aGlzLmZyYWdtZW50ID0gbmV3IHZpcnR1YWxkb21fRnJhZ21lbnQoe1xuICBcdFx0dGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gIFx0XHRyb290OiB0aGlzLFxuICBcdFx0b3duZXI6IHRoaXNcbiAgXHR9KTtcblxuICBcdHRoaXMucmVuZGVyKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblxuICBcdHRoaXMudHJhbnNpdGlvbnNFbmFibGVkID0gdHJhbnNpdGlvbnNFbmFibGVkO1xuICB9XG5cbiAgdmFyIHJldmVyc2UgPSBtYWtlQXJyYXlNZXRob2QoXCJyZXZlcnNlXCIpO1xuXG4gIHZhciBSYWN0aXZlX3Byb3RvdHlwZV9zZXQgPSBSYWN0aXZlJHNldDtcblxuICBmdW5jdGlvbiBSYWN0aXZlJHNldChrZXlwYXRoLCB2YWx1ZSkge1xuICBcdHZhciBtYXAsIHByb21pc2U7XG5cbiAgXHRwcm9taXNlID0gZ2xvYmFsX3J1bmxvb3Auc3RhcnQodGhpcywgdHJ1ZSk7XG5cbiAgXHQvLyBTZXQgbXVsdGlwbGUga2V5cGF0aHMgaW4gb25lIGdvXG4gIFx0aWYgKGlzT2JqZWN0KGtleXBhdGgpKSB7XG4gIFx0XHRtYXAgPSBrZXlwYXRoO1xuXG4gIFx0XHRmb3IgKGtleXBhdGggaW4gbWFwKSB7XG4gIFx0XHRcdGlmIChtYXAuaGFzT3duUHJvcGVydHkoa2V5cGF0aCkpIHtcbiAgXHRcdFx0XHR2YWx1ZSA9IG1hcFtrZXlwYXRoXTtcbiAgXHRcdFx0XHRzZXQodGhpcywga2V5cGF0aCwgdmFsdWUpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0Ly8gU2V0IGEgc2luZ2xlIGtleXBhdGhcbiAgXHRlbHNlIHtcbiAgXHRcdHNldCh0aGlzLCBrZXlwYXRoLCB2YWx1ZSk7XG4gIFx0fVxuXG4gIFx0Z2xvYmFsX3J1bmxvb3AuZW5kKCk7XG5cbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldChyYWN0aXZlLCBrZXlwYXRoLCB2YWx1ZSkge1xuICBcdGtleXBhdGggPSBnZXRLZXlwYXRoKG5vcm1hbGlzZShrZXlwYXRoKSk7XG5cbiAgXHRpZiAoa2V5cGF0aC5pc1BhdHRlcm4pIHtcbiAgXHRcdGdldE1hdGNoaW5nS2V5cGF0aHMocmFjdGl2ZSwga2V5cGF0aCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5cGF0aCkge1xuICBcdFx0XHRyYWN0aXZlLnZpZXdtb2RlbC5zZXQoa2V5cGF0aCwgdmFsdWUpO1xuICBcdFx0fSk7XG4gIFx0fSBlbHNlIHtcbiAgXHRcdHJhY3RpdmUudmlld21vZGVsLnNldChrZXlwYXRoLCB2YWx1ZSk7XG4gIFx0fVxuICB9XG5cbiAgdmFyIHNoaWZ0ID0gbWFrZUFycmF5TWV0aG9kKFwic2hpZnRcIik7XG5cbiAgdmFyIHByb3RvdHlwZV9zb3J0ID0gbWFrZUFycmF5TWV0aG9kKFwic29ydFwiKTtcblxuICB2YXIgc3BsaWNlID0gbWFrZUFycmF5TWV0aG9kKFwic3BsaWNlXCIpO1xuXG4gIHZhciBzdWJ0cmFjdCA9IFJhY3RpdmUkc3VidHJhY3Q7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkc3VidHJhY3Qoa2V5cGF0aCwgZCkge1xuICBcdHJldHVybiBzaGFyZWRfYWRkKHRoaXMsIGtleXBhdGgsIGQgPT09IHVuZGVmaW5lZCA/IC0xIDogLWQpO1xuICB9XG5cbiAgLy8gVGVhcmRvd24uIFRoaXMgZ29lcyB0aHJvdWdoIHRoZSByb290IGZyYWdtZW50IGFuZCBhbGwgaXRzIGNoaWxkcmVuLCByZW1vdmluZyBvYnNlcnZlcnNcbiAgLy8gYW5kIGdlbmVyYWxseSBjbGVhbmluZyB1cCBhZnRlciBpdHNlbGZcblxuICB2YXIgUmFjdGl2ZV9wcm90b3R5cGVfdGVhcmRvd24gPSBSYWN0aXZlJHRlYXJkb3duO1xuXG4gIHZhciBSYWN0aXZlX3Byb3RvdHlwZV90ZWFyZG93bl9fdGVhcmRvd25Ib29rID0gbmV3IGhvb2tzX0hvb2soXCJ0ZWFyZG93blwiKTtcbiAgZnVuY3Rpb24gUmFjdGl2ZSR0ZWFyZG93bigpIHtcbiAgXHR2YXIgcHJvbWlzZTtcblxuICBcdHRoaXMuZnJhZ21lbnQudW5iaW5kKCk7XG4gIFx0dGhpcy52aWV3bW9kZWwudGVhcmRvd24oKTtcblxuICBcdHRoaXMuX29ic2VydmVycy5mb3JFYWNoKGNhbmNlbCk7XG5cbiAgXHRpZiAodGhpcy5mcmFnbWVudC5yZW5kZXJlZCAmJiB0aGlzLmVsLl9fcmFjdGl2ZV9pbnN0YW5jZXNfXykge1xuICBcdFx0cmVtb3ZlRnJvbUFycmF5KHRoaXMuZWwuX19yYWN0aXZlX2luc3RhbmNlc19fLCB0aGlzKTtcbiAgXHR9XG5cbiAgXHR0aGlzLnNob3VsZERlc3Ryb3kgPSB0cnVlO1xuICBcdHByb21pc2UgPSB0aGlzLmZyYWdtZW50LnJlbmRlcmVkID8gdGhpcy51bnJlbmRlcigpIDogdXRpbHNfUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgXHRSYWN0aXZlX3Byb3RvdHlwZV90ZWFyZG93bl9fdGVhcmRvd25Ib29rLmZpcmUodGhpcyk7XG5cbiAgXHR0aGlzLl9ib3VuZEZ1bmN0aW9ucy5mb3JFYWNoKGRlbGV0ZUZ1bmN0aW9uQ29weSk7XG5cbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZUZ1bmN0aW9uQ29weShib3VuZCkge1xuICBcdGRlbGV0ZSBib3VuZC5mbltib3VuZC5wcm9wXTtcbiAgfVxuXG4gIHZhciB0b2dnbGUgPSBSYWN0aXZlJHRvZ2dsZTtcbiAgZnVuY3Rpb24gUmFjdGl2ZSR0b2dnbGUoa2V5cGF0aCkge1xuICBcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRpZiAodHlwZW9mIGtleXBhdGggIT09IFwic3RyaW5nXCIpIHtcbiAgXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYmFkQXJndW1lbnRzKTtcbiAgXHR9XG5cbiAgXHR2YXIgY2hhbmdlcyA9IHVuZGVmaW5lZDtcblxuICBcdGlmICgvXFwqLy50ZXN0KGtleXBhdGgpKSB7XG4gIFx0XHRjaGFuZ2VzID0ge307XG5cbiAgXHRcdGdldE1hdGNoaW5nS2V5cGF0aHModGhpcywgZ2V0S2V5cGF0aChub3JtYWxpc2Uoa2V5cGF0aCkpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdGNoYW5nZXNba2V5cGF0aC5zdHJdID0gIV90aGlzLnZpZXdtb2RlbC5nZXQoa2V5cGF0aCk7XG4gIFx0XHR9KTtcblxuICBcdFx0cmV0dXJuIHRoaXMuc2V0KGNoYW5nZXMpO1xuICBcdH1cblxuICBcdHJldHVybiB0aGlzLnNldChrZXlwYXRoLCAhdGhpcy5nZXQoa2V5cGF0aCkpO1xuICB9XG5cbiAgdmFyIHRvSFRNTCA9IFJhY3RpdmUkdG9IVE1MO1xuXG4gIGZ1bmN0aW9uIFJhY3RpdmUkdG9IVE1MKCkge1xuICBcdHJldHVybiB0aGlzLmZyYWdtZW50LnRvU3RyaW5nKHRydWUpO1xuICB9XG5cbiAgdmFyIFJhY3RpdmVfcHJvdG90eXBlX3VucmVuZGVyID0gUmFjdGl2ZSR1bnJlbmRlcjtcbiAgdmFyIHVucmVuZGVySG9vayA9IG5ldyBob29rc19Ib29rKFwidW5yZW5kZXJcIik7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkdW5yZW5kZXIoKSB7XG4gIFx0dmFyIHByb21pc2UsIHNob3VsZERlc3Ryb3k7XG5cbiAgXHRpZiAoIXRoaXMuZnJhZ21lbnQucmVuZGVyZWQpIHtcbiAgXHRcdHdhcm5JZkRlYnVnKFwicmFjdGl2ZS51bnJlbmRlcigpIHdhcyBjYWxsZWQgb24gYSBSYWN0aXZlIGluc3RhbmNlIHRoYXQgd2FzIG5vdCByZW5kZXJlZFwiKTtcbiAgXHRcdHJldHVybiB1dGlsc19Qcm9taXNlLnJlc29sdmUoKTtcbiAgXHR9XG5cbiAgXHRwcm9taXNlID0gZ2xvYmFsX3J1bmxvb3Auc3RhcnQodGhpcywgdHJ1ZSk7XG5cbiAgXHQvLyBJZiB0aGlzIGlzIGEgY29tcG9uZW50LCBhbmQgdGhlIGNvbXBvbmVudCBpc24ndCBtYXJrZWQgZm9yIGRlc3RydWN0aW9uLFxuICBcdC8vIGRvbid0IGRldGFjaCBub2RlcyBmcm9tIHRoZSBET00gdW5uZWNlc3NhcmlseVxuICBcdHNob3VsZERlc3Ryb3kgPSAhdGhpcy5jb21wb25lbnQgfHwgdGhpcy5jb21wb25lbnQuc2hvdWxkRGVzdHJveSB8fCB0aGlzLnNob3VsZERlc3Ryb3k7XG5cbiAgXHQvLyBDYW5jZWwgYW55IGFuaW1hdGlvbnMgaW4gcHJvZ3Jlc3NcbiAgXHR3aGlsZSAodGhpcy5fYW5pbWF0aW9uc1swXSkge1xuICBcdFx0dGhpcy5fYW5pbWF0aW9uc1swXS5zdG9wKCk7IC8vIGl0IHdpbGwgcmVtb3ZlIGl0c2VsZiBmcm9tIHRoZSBpbmRleFxuICBcdH1cblxuICBcdHRoaXMuZnJhZ21lbnQudW5yZW5kZXIoc2hvdWxkRGVzdHJveSk7XG5cbiAgXHRyZW1vdmVGcm9tQXJyYXkodGhpcy5lbC5fX3JhY3RpdmVfaW5zdGFuY2VzX18sIHRoaXMpO1xuXG4gIFx0dW5yZW5kZXJIb29rLmZpcmUodGhpcyk7XG5cbiAgXHRnbG9iYWxfcnVubG9vcC5lbmQoKTtcbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIHZhciB1bnNoaWZ0ID0gbWFrZUFycmF5TWV0aG9kKFwidW5zaGlmdFwiKTtcblxuICB2YXIgUmFjdGl2ZV9wcm90b3R5cGVfdXBkYXRlID0gUmFjdGl2ZSR1cGRhdGU7XG4gIHZhciB1cGRhdGVIb29rID0gbmV3IGhvb2tzX0hvb2soXCJ1cGRhdGVcIik7XG4gIGZ1bmN0aW9uIFJhY3RpdmUkdXBkYXRlKGtleXBhdGgpIHtcbiAgXHR2YXIgcHJvbWlzZTtcblxuICBcdGtleXBhdGggPSBnZXRLZXlwYXRoKGtleXBhdGgpIHx8IHJvb3RLZXlwYXRoO1xuXG4gIFx0cHJvbWlzZSA9IGdsb2JhbF9ydW5sb29wLnN0YXJ0KHRoaXMsIHRydWUpO1xuICBcdHRoaXMudmlld21vZGVsLm1hcmsoa2V5cGF0aCk7XG4gIFx0Z2xvYmFsX3J1bmxvb3AuZW5kKCk7XG5cbiAgXHR1cGRhdGVIb29rLmZpcmUodGhpcywga2V5cGF0aCk7XG5cbiAgXHRyZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGVfdXBkYXRlTW9kZWwgPSBSYWN0aXZlJHVwZGF0ZU1vZGVsO1xuXG4gIGZ1bmN0aW9uIFJhY3RpdmUkdXBkYXRlTW9kZWwoa2V5cGF0aCwgY2FzY2FkZSkge1xuICBcdHZhciB2YWx1ZXMsIGtleSwgYmluZGluZ3M7XG5cbiAgXHRpZiAodHlwZW9mIGtleXBhdGggPT09IFwic3RyaW5nXCIgJiYgIWNhc2NhZGUpIHtcbiAgXHRcdGJpbmRpbmdzID0gdGhpcy5fdHdvd2F5QmluZGluZ3Nba2V5cGF0aF07XG4gIFx0fSBlbHNlIHtcbiAgXHRcdGJpbmRpbmdzID0gW107XG5cbiAgXHRcdGZvciAoa2V5IGluIHRoaXMuX3R3b3dheUJpbmRpbmdzKSB7XG4gIFx0XHRcdGlmICgha2V5cGF0aCB8fCBnZXRLZXlwYXRoKGtleSkuZXF1YWxzT3JTdGFydHNXaXRoKGtleXBhdGgpKSB7XG4gIFx0XHRcdFx0Ly8gVE9ETyBpcyB0aGlzIHJpZ2h0P1xuICBcdFx0XHRcdGJpbmRpbmdzLnB1c2guYXBwbHkoYmluZGluZ3MsIHRoaXMuX3R3b3dheUJpbmRpbmdzW2tleV0pO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0dmFsdWVzID0gY29uc29saWRhdGUodGhpcywgYmluZGluZ3MpO1xuICBcdHJldHVybiB0aGlzLnNldCh2YWx1ZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29uc29saWRhdGUocmFjdGl2ZSwgYmluZGluZ3MpIHtcbiAgXHR2YXIgdmFsdWVzID0ge30sXG4gIFx0ICAgIGNoZWNrYm94R3JvdXBzID0gW107XG5cbiAgXHRiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gIFx0XHR2YXIgb2xkVmFsdWUsIG5ld1ZhbHVlO1xuXG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSByYWRpbyBuYW1lIGJpbmRpbmdzXG4gIFx0XHRpZiAoYi5yYWRpb05hbWUgJiYgIWIuZWxlbWVudC5ub2RlLmNoZWNrZWQpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHQvLyBzcGVjaWFsIGNhc2UgLSBjaGVja2JveCBuYW1lIGJpbmRpbmdzIGNvbWUgaW4gZ3JvdXBzLCBzb1xuICBcdFx0Ly8gd2Ugd2FudCB0byBnZXQgdGhlIHZhbHVlIG9uY2UgYXQgbW9zdFxuICBcdFx0aWYgKGIuY2hlY2tib3hOYW1lKSB7XG4gIFx0XHRcdGlmICghY2hlY2tib3hHcm91cHNbYi5rZXlwYXRoLnN0cl0gJiYgIWIuY2hhbmdlZCgpKSB7XG4gIFx0XHRcdFx0Y2hlY2tib3hHcm91cHMucHVzaChiLmtleXBhdGgpO1xuICBcdFx0XHRcdGNoZWNrYm94R3JvdXBzW2Iua2V5cGF0aC5zdHJdID0gYjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cblxuICBcdFx0b2xkVmFsdWUgPSBiLmF0dHJpYnV0ZS52YWx1ZTtcbiAgXHRcdG5ld1ZhbHVlID0gYi5nZXRWYWx1ZSgpO1xuXG4gIFx0XHRpZiAoYXJyYXlDb250ZW50c01hdGNoKG9sZFZhbHVlLCBuZXdWYWx1ZSkpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHRpZiAoIWlzRXF1YWwob2xkVmFsdWUsIG5ld1ZhbHVlKSkge1xuICBcdFx0XHR2YWx1ZXNbYi5rZXlwYXRoLnN0cl0gPSBuZXdWYWx1ZTtcbiAgXHRcdH1cbiAgXHR9KTtcblxuICBcdC8vIEhhbmRsZSBncm91cHMgb2YgYDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0ne3tmb299fScgLi4uPmBcbiAgXHRpZiAoY2hlY2tib3hHcm91cHMubGVuZ3RoKSB7XG4gIFx0XHRjaGVja2JveEdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXlwYXRoKSB7XG4gIFx0XHRcdHZhciBiaW5kaW5nLCBvbGRWYWx1ZSwgbmV3VmFsdWU7XG5cbiAgXHRcdFx0YmluZGluZyA9IGNoZWNrYm94R3JvdXBzW2tleXBhdGguc3RyXTsgLy8gb25lIHRvIHJlcHJlc2VudCB0aGUgZW50aXJlIGdyb3VwXG4gIFx0XHRcdG9sZFZhbHVlID0gYmluZGluZy5hdHRyaWJ1dGUudmFsdWU7XG4gIFx0XHRcdG5ld1ZhbHVlID0gYmluZGluZy5nZXRWYWx1ZSgpO1xuXG4gIFx0XHRcdGlmICghYXJyYXlDb250ZW50c01hdGNoKG9sZFZhbHVlLCBuZXdWYWx1ZSkpIHtcbiAgXHRcdFx0XHR2YWx1ZXNba2V5cGF0aC5zdHJdID0gbmV3VmFsdWU7XG4gIFx0XHRcdH1cbiAgXHRcdH0pO1xuICBcdH1cblxuICBcdHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlID0ge1xuICBcdGFkZDogcHJvdG90eXBlX2FkZCxcbiAgXHRhbmltYXRlOiBwcm90b3R5cGVfYW5pbWF0ZSxcbiAgXHRkZXRhY2g6IHByb3RvdHlwZV9kZXRhY2gsXG4gIFx0ZmluZDogcHJvdG90eXBlX2ZpbmQsXG4gIFx0ZmluZEFsbDogcHJvdG90eXBlX2ZpbmRBbGwsXG4gIFx0ZmluZEFsbENvbXBvbmVudHM6IHByb3RvdHlwZV9maW5kQWxsQ29tcG9uZW50cyxcbiAgXHRmaW5kQ29tcG9uZW50OiBwcm90b3R5cGVfZmluZENvbXBvbmVudCxcbiAgXHRmaW5kQ29udGFpbmVyOiBmaW5kQ29udGFpbmVyLFxuICBcdGZpbmRQYXJlbnQ6IGZpbmRQYXJlbnQsXG4gIFx0ZmlyZTogcHJvdG90eXBlX2ZpcmUsXG4gIFx0Z2V0OiBwcm90b3R5cGVfZ2V0LFxuICBcdGluc2VydDogaW5zZXJ0LFxuICBcdG1lcmdlOiBwcm90b3R5cGVfbWVyZ2UsXG4gIFx0b2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgXHRvYnNlcnZlT25jZTogb2JzZXJ2ZU9uY2UsXG4gIFx0b2ZmOiBvZmYsXG4gIFx0b246IG9uLFxuICBcdG9uY2U6IG9uY2UsXG4gIFx0cG9wOiBwb3AsXG4gIFx0cHVzaDogcHVzaCxcbiAgXHRyZW5kZXI6IHByb3RvdHlwZV9yZW5kZXIsXG4gIFx0cmVzZXQ6IHByb3RvdHlwZV9yZXNldCxcbiAgXHRyZXNldFBhcnRpYWw6IHJlc2V0UGFydGlhbCxcbiAgXHRyZXNldFRlbXBsYXRlOiByZXNldFRlbXBsYXRlLFxuICBcdHJldmVyc2U6IHJldmVyc2UsXG4gIFx0c2V0OiBSYWN0aXZlX3Byb3RvdHlwZV9zZXQsXG4gIFx0c2hpZnQ6IHNoaWZ0LFxuICBcdHNvcnQ6IHByb3RvdHlwZV9zb3J0LFxuICBcdHNwbGljZTogc3BsaWNlLFxuICBcdHN1YnRyYWN0OiBzdWJ0cmFjdCxcbiAgXHR0ZWFyZG93bjogUmFjdGl2ZV9wcm90b3R5cGVfdGVhcmRvd24sXG4gIFx0dG9nZ2xlOiB0b2dnbGUsXG4gIFx0dG9IVE1MOiB0b0hUTUwsXG4gIFx0dG9IdG1sOiB0b0hUTUwsXG4gIFx0dW5yZW5kZXI6IFJhY3RpdmVfcHJvdG90eXBlX3VucmVuZGVyLFxuICBcdHVuc2hpZnQ6IHVuc2hpZnQsXG4gIFx0dXBkYXRlOiBSYWN0aXZlX3Byb3RvdHlwZV91cGRhdGUsXG4gIFx0dXBkYXRlTW9kZWw6IHByb3RvdHlwZV91cGRhdGVNb2RlbFxuICB9O1xuXG4gIHZhciB3cmFwTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZCwgc3VwZXJNZXRob2QsIGZvcmNlKSB7XG5cbiAgXHRpZiAoZm9yY2UgfHwgbmVlZHNTdXBlcihtZXRob2QsIHN1cGVyTWV0aG9kKSkge1xuXG4gIFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXG4gIFx0XHRcdHZhciBoYXNTdXBlciA9IChcIl9zdXBlclwiIGluIHRoaXMpLFxuICBcdFx0XHQgICAgX3N1cGVyID0gdGhpcy5fc3VwZXIsXG4gIFx0XHRcdCAgICByZXN1bHQ7XG5cbiAgXHRcdFx0dGhpcy5fc3VwZXIgPSBzdXBlck1ldGhvZDtcblxuICBcdFx0XHRyZXN1bHQgPSBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICBcdFx0XHRpZiAoaGFzU3VwZXIpIHtcbiAgXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9zdXBlcjtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdHJldHVybiByZXN1bHQ7XG4gIFx0XHR9O1xuICBcdH0gZWxzZSB7XG4gIFx0XHRyZXR1cm4gbWV0aG9kO1xuICBcdH1cbiAgfTtcblxuICBmdW5jdGlvbiBuZWVkc1N1cGVyKG1ldGhvZCwgc3VwZXJNZXRob2QpIHtcbiAgXHRyZXR1cm4gdHlwZW9mIHN1cGVyTWV0aG9kID09PSBcImZ1bmN0aW9uXCIgJiYgL19zdXBlci8udGVzdChtZXRob2QpO1xuICB9XG5cbiAgdmFyIHVud3JhcEV4dGVuZGVkID0gdW53cmFwO1xuXG4gIGZ1bmN0aW9uIHVud3JhcChDaGlsZCkge1xuICBcdHZhciBvcHRpb25zID0ge307XG5cbiAgXHR3aGlsZSAoQ2hpbGQpIHtcbiAgXHRcdGFkZFJlZ2lzdHJpZXMoQ2hpbGQsIG9wdGlvbnMpO1xuICBcdFx0YWRkT3RoZXJPcHRpb25zKENoaWxkLCBvcHRpb25zKTtcblxuICBcdFx0aWYgKENoaWxkLl9QYXJlbnQgIT09IF9SYWN0aXZlKSB7XG4gIFx0XHRcdENoaWxkID0gQ2hpbGQuX1BhcmVudDtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdENoaWxkID0gZmFsc2U7XG4gIFx0XHR9XG4gIFx0fVxuXG4gIFx0cmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRSZWdpc3RyaWVzKENoaWxkLCBvcHRpb25zKSB7XG4gIFx0Y29uZmlnX3JlZ2lzdHJpZXMuZm9yRWFjaChmdW5jdGlvbiAocikge1xuICBcdFx0YWRkUmVnaXN0cnkoci51c2VEZWZhdWx0cyA/IENoaWxkLnByb3RvdHlwZSA6IENoaWxkLCBvcHRpb25zLCByLm5hbWUpO1xuICBcdH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkUmVnaXN0cnkodGFyZ2V0LCBvcHRpb25zLCBuYW1lKSB7XG4gIFx0dmFyIHJlZ2lzdHJ5LFxuICBcdCAgICBrZXlzID0gT2JqZWN0LmtleXModGFyZ2V0W25hbWVdKTtcblxuICBcdGlmICgha2V5cy5sZW5ndGgpIHtcbiAgXHRcdHJldHVybjtcbiAgXHR9XG5cbiAgXHRpZiAoIShyZWdpc3RyeSA9IG9wdGlvbnNbbmFtZV0pKSB7XG4gIFx0XHRyZWdpc3RyeSA9IG9wdGlvbnNbbmFtZV0gPSB7fTtcbiAgXHR9XG5cbiAgXHRrZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gIFx0XHRyZXR1cm4gIShrZXkgaW4gcmVnaXN0cnkpO1xuICBcdH0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICBcdFx0cmV0dXJuIHJlZ2lzdHJ5W2tleV0gPSB0YXJnZXRbbmFtZV1ba2V5XTtcbiAgXHR9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE90aGVyT3B0aW9ucyhDaGlsZCwgb3B0aW9ucykge1xuICBcdE9iamVjdC5rZXlzKENoaWxkLnByb3RvdHlwZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gIFx0XHRpZiAoa2V5ID09PSBcImNvbXB1dGVkXCIpIHtcbiAgXHRcdFx0cmV0dXJuO1xuICBcdFx0fVxuXG4gIFx0XHR2YXIgdmFsdWUgPSBDaGlsZC5wcm90b3R5cGVba2V5XTtcblxuICBcdFx0aWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7XG4gIFx0XHRcdG9wdGlvbnNba2V5XSA9IHZhbHVlLl9tZXRob2QgPyB2YWx1ZS5fbWV0aG9kIDogdmFsdWU7XG4gIFx0XHR9XG5cbiAgXHRcdC8vIGlzIGl0IGEgd3JhcHBlZCBmdW5jdGlvbj9cbiAgXHRcdGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zW2tleV0gPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiAmJiBvcHRpb25zW2tleV0uX21ldGhvZCkge1xuXG4gIFx0XHRcdHZhciByZXN1bHQgPSB1bmRlZmluZWQsXG4gIFx0XHRcdCAgICBuZWVkc1N1cGVyID0gdmFsdWUuX21ldGhvZDtcblxuICBcdFx0XHRpZiAobmVlZHNTdXBlcikge1xuICBcdFx0XHRcdHZhbHVlID0gdmFsdWUuX21ldGhvZDtcbiAgXHRcdFx0fVxuXG4gIFx0XHRcdC8vIHJld3JhcCBib3VuZCBkaXJlY3RseSB0byBwYXJlbnQgZm5cbiAgXHRcdFx0cmVzdWx0ID0gd3JhcE1ldGhvZChvcHRpb25zW2tleV0uX21ldGhvZCwgdmFsdWUpO1xuXG4gIFx0XHRcdGlmIChuZWVkc1N1cGVyKSB7XG4gIFx0XHRcdFx0cmVzdWx0Ll9tZXRob2QgPSByZXN1bHQ7XG4gIFx0XHRcdH1cblxuICBcdFx0XHRvcHRpb25zW2tleV0gPSByZXN1bHQ7XG4gIFx0XHR9XG4gIFx0fSk7XG4gIH1cblxuICB2YXIgX2V4dGVuZCA9IF9leHRlbmRfX2V4dGVuZDtcblxuICBmdW5jdGlvbiBfZXh0ZW5kX19leHRlbmQoKSB7XG4gIFx0Zm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgXHRcdG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIFx0fVxuXG4gIFx0aWYgKCFvcHRpb25zLmxlbmd0aCkge1xuICBcdFx0cmV0dXJuIGV4dGVuZE9uZSh0aGlzKTtcbiAgXHR9IGVsc2Uge1xuICBcdFx0cmV0dXJuIG9wdGlvbnMucmVkdWNlKGV4dGVuZE9uZSwgdGhpcyk7XG4gIFx0fVxuICB9XG5cbiAgZnVuY3Rpb24gZXh0ZW5kT25lKFBhcmVudCkge1xuICBcdHZhciBvcHRpb25zID0gYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICBcdHZhciBDaGlsZCwgcHJvdG87XG5cbiAgXHQvLyBpZiB3ZSdyZSBleHRlbmRpbmcgd2l0aCBhbm90aGVyIFJhY3RpdmUgaW5zdGFuY2UuLi5cbiAgXHQvL1xuICBcdC8vICAgdmFyIEh1bWFuID0gUmFjdGl2ZS5leHRlbmQoLi4uKSwgU3BpZGVyID0gUmFjdGl2ZS5leHRlbmQoLi4uKTtcbiAgXHQvLyAgIHZhciBTcGlkZXJtYW4gPSBIdW1hbi5leHRlbmQoIFNwaWRlciApO1xuICBcdC8vXG4gIFx0Ly8gLi4uaW5oZXJpdCBwcm90b3R5cGUgbWV0aG9kcyBhbmQgZGVmYXVsdCBvcHRpb25zIGFzIHdlbGxcbiAgXHRpZiAob3B0aW9ucy5wcm90b3R5cGUgaW5zdGFuY2VvZiBfUmFjdGl2ZSkge1xuICBcdFx0b3B0aW9ucyA9IHVud3JhcEV4dGVuZGVkKG9wdGlvbnMpO1xuICBcdH1cblxuICBcdENoaWxkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgXHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBDaGlsZCkpIHJldHVybiBuZXcgQ2hpbGQob3B0aW9ucyk7XG4gIFx0XHRpbml0aWFsaXNlKHRoaXMsIG9wdGlvbnMpO1xuICBcdH07XG5cbiAgXHRwcm90byA9IGNyZWF0ZShQYXJlbnQucHJvdG90eXBlKTtcbiAgXHRwcm90by5jb25zdHJ1Y3RvciA9IENoaWxkO1xuXG4gIFx0Ly8gU3RhdGljIHByb3BlcnRpZXNcbiAgXHRkZWZpbmVQcm9wZXJ0aWVzKENoaWxkLCB7XG4gIFx0XHQvLyBhbGlhcyBwcm90b3R5cGUgYXMgZGVmYXVsdHNcbiAgXHRcdGRlZmF1bHRzOiB7IHZhbHVlOiBwcm90byB9LFxuXG4gIFx0XHQvLyBleHRlbmRhYmxlXG4gIFx0XHRleHRlbmQ6IHsgdmFsdWU6IF9leHRlbmRfX2V4dGVuZCwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LFxuXG4gIFx0XHQvLyBQYXJlbnQgLSBmb3IgSUU4LCBjYW4ndCB1c2UgT2JqZWN0LmdldFByb3RvdHlwZU9mXG4gIFx0XHRfUGFyZW50OiB7IHZhbHVlOiBQYXJlbnQgfVxuICBcdH0pO1xuXG4gIFx0Ly8gZXh0ZW5kIGNvbmZpZ3VyYXRpb25cbiAgXHRjb25maWdfY29uZmlnLmV4dGVuZChQYXJlbnQsIHByb3RvLCBvcHRpb25zKTtcblxuICBcdGN1c3RvbV9kYXRhLmV4dGVuZChQYXJlbnQsIHByb3RvLCBvcHRpb25zKTtcblxuICBcdGlmIChvcHRpb25zLmNvbXB1dGVkKSB7XG4gIFx0XHRwcm90by5jb21wdXRlZCA9IHV0aWxzX29iamVjdF9fZXh0ZW5kKGNyZWF0ZShQYXJlbnQucHJvdG90eXBlLmNvbXB1dGVkKSwgb3B0aW9ucy5jb21wdXRlZCk7XG4gIFx0fVxuXG4gIFx0Q2hpbGQucHJvdG90eXBlID0gcHJvdG87XG5cbiAgXHRyZXR1cm4gQ2hpbGQ7XG4gIH1cblxuICB2YXIgZ2V0Tm9kZUluZm8gPSBmdW5jdGlvbiAobm9kZSkge1xuICBcdHZhciBpbmZvID0ge30sXG4gIFx0ICAgIHByaXYsXG4gIFx0ICAgIGluZGljZXM7XG5cbiAgXHRpZiAoIW5vZGUgfHwgIShwcml2ID0gbm9kZS5fcmFjdGl2ZSkpIHtcbiAgXHRcdHJldHVybiBpbmZvO1xuICBcdH1cblxuICBcdGluZm8ucmFjdGl2ZSA9IHByaXYucm9vdDtcbiAgXHRpbmZvLmtleXBhdGggPSBwcml2LmtleXBhdGguc3RyO1xuICBcdGluZm8uaW5kZXggPSB7fTtcblxuICBcdC8vIGZpbmQgYWxsIGluZGV4IHJlZmVyZW5jZXMgYW5kIHJlc29sdmUgdGhlbVxuICBcdGlmIChpbmRpY2VzID0gUmVzb2x2ZXJzX2ZpbmRJbmRleFJlZnMocHJpdi5wcm94eS5wYXJlbnRGcmFnbWVudCkpIHtcbiAgXHRcdGluZm8uaW5kZXggPSBSZXNvbHZlcnNfZmluZEluZGV4UmVmcy5yZXNvbHZlKGluZGljZXMpO1xuICBcdH1cblxuICBcdHJldHVybiBpbmZvO1xuICB9O1xuXG4gIHZhciBSYWN0aXZlLCBwcm9wZXJ0aWVzO1xuXG4gIC8vIE1haW4gUmFjdGl2ZSByZXF1aXJlZCBvYmplY3RcbiAgUmFjdGl2ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIFx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFJhY3RpdmUpKSByZXR1cm4gbmV3IFJhY3RpdmUob3B0aW9ucyk7XG4gIFx0aW5pdGlhbGlzZSh0aGlzLCBvcHRpb25zKTtcbiAgfTtcblxuICAvLyBSYWN0aXZlIHByb3BlcnRpZXNcbiAgcHJvcGVydGllcyA9IHtcblxuICBcdC8vIGRlYnVnIGZsYWdcbiAgXHRERUJVRzogeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRydWUgfSxcbiAgXHRERUJVR19QUk9NSVNFUzogeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRydWUgfSxcblxuICBcdC8vIHN0YXRpYyBtZXRob2RzOlxuICBcdGV4dGVuZDogeyB2YWx1ZTogX2V4dGVuZCB9LFxuICBcdGdldE5vZGVJbmZvOiB7IHZhbHVlOiBnZXROb2RlSW5mbyB9LFxuICBcdHBhcnNlOiB7IHZhbHVlOiBfcGFyc2UgfSxcblxuICBcdC8vIE5hbWVzcGFjZWQgY29uc3RydWN0b3JzXG4gIFx0UHJvbWlzZTogeyB2YWx1ZTogdXRpbHNfUHJvbWlzZSB9LFxuXG4gIFx0Ly8gc3VwcG9ydFxuICBcdHN2ZzogeyB2YWx1ZTogc3ZnIH0sXG4gIFx0bWFnaWM6IHsgdmFsdWU6IGVudmlyb25tZW50X19tYWdpYyB9LFxuXG4gIFx0Ly8gdmVyc2lvblxuICBcdFZFUlNJT046IHsgdmFsdWU6IFwiMC43LjNcIiB9LFxuXG4gIFx0Ly8gUGx1Z2luc1xuICBcdGFkYXB0b3JzOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSxcbiAgXHRjb21wb25lbnRzOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSxcbiAgXHRkZWNvcmF0b3JzOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSxcbiAgXHRlYXNpbmc6IHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBzdGF0aWNfZWFzaW5nIH0sXG4gIFx0ZXZlbnRzOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSxcbiAgXHRpbnRlcnBvbGF0b3JzOiB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogc3RhdGljX2ludGVycG9sYXRvcnMgfSxcbiAgXHRwYXJ0aWFsczogeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHt9IH0sXG4gIFx0dHJhbnNpdGlvbnM6IHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiB7fSB9XG4gIH07XG5cbiAgLy8gUmFjdGl2ZSBwcm9wZXJ0aWVzXG4gIGRlZmluZVByb3BlcnRpZXMoUmFjdGl2ZSwgcHJvcGVydGllcyk7XG5cbiAgUmFjdGl2ZS5wcm90b3R5cGUgPSB1dGlsc19vYmplY3RfX2V4dGVuZChwcm90b3R5cGUsIGNvbmZpZ19kZWZhdWx0cyk7XG5cbiAgUmFjdGl2ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSYWN0aXZlO1xuXG4gIC8vIGFsaWFzIHByb3RvdHlwZSBhcyBkZWZhdWx0c1xuICBSYWN0aXZlLmRlZmF1bHRzID0gUmFjdGl2ZS5wcm90b3R5cGU7XG5cbiAgLy8gUmFjdGl2ZS5qcyBtYWtlcyBsaWJlcmFsIHVzZSBvZiB0aGluZ3MgbGlrZSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi4gSW5cbiAgLy8gb2xkZXIgYnJvd3NlcnMsIHRoZXNlIGFyZSBtYWRlIGF2YWlsYWJsZSB2aWEgYSBzaGltIC0gaGVyZSwgd2UgZG8gYSBxdWlja1xuICAvLyBwcmUtZmxpZ2h0IGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IGVpdGhlciBhKSB3ZSdyZSBub3QgaW4gYSBzaGl0IGJyb3dzZXIsXG4gIC8vIG9yIGIpIHdlJ3JlIHVzaW5nIGEgUmFjdGl2ZS1sZWdhY3kuanMgYnVpbGRcbiAgdmFyIEZVTkNUSU9OID0gXCJmdW5jdGlvblwiO1xuXG4gIGlmICh0eXBlb2YgRGF0ZS5ub3cgIT09IEZVTkNUSU9OIHx8IHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gIT09IEZVTkNUSU9OIHx8IHR5cGVvZiBPYmplY3Qua2V5cyAhPT0gRlVOQ1RJT04gfHwgdHlwZW9mIEFycmF5LnByb3RvdHlwZS5pbmRleE9mICE9PSBGVU5DVElPTiB8fCB0eXBlb2YgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggIT09IEZVTkNUSU9OIHx8IHR5cGVvZiBBcnJheS5wcm90b3R5cGUubWFwICE9PSBGVU5DVElPTiB8fCB0eXBlb2YgQXJyYXkucHJvdG90eXBlLmZpbHRlciAhPT0gRlVOQ1RJT04gfHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT09IEZVTkNUSU9OKSB7XG4gIFx0dGhyb3cgbmV3IEVycm9yKFwiSXQgbG9va3MgbGlrZSB5b3UncmUgYXR0ZW1wdGluZyB0byB1c2UgUmFjdGl2ZS5qcyBpbiBhbiBvbGRlciBicm93c2VyLiBZb3UnbGwgbmVlZCB0byB1c2Ugb25lIG9mIHRoZSAnbGVnYWN5IGJ1aWxkcycgaW4gb3JkZXIgdG8gY29udGludWUgLSBzZWUgaHR0cDovL2RvY3MucmFjdGl2ZWpzLm9yZy9sYXRlc3QvbGVnYWN5LWJ1aWxkcyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cIik7XG4gIH1cblxuICB2YXIgX1JhY3RpdmUgPSBSYWN0aXZlO1xuXG4gIHJldHVybiBfUmFjdGl2ZTtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjdGl2ZS5qcy5tYXBcbiJdfQ==
